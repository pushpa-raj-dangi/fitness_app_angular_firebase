"use strict";var lC=Object.defineProperty,cC=Object.defineProperties,dC=Object.getOwnPropertyDescriptors,Vw=Object.getOwnPropertySymbols,hC=Object.prototype.hasOwnProperty,fC=Object.prototype.propertyIsEnumerable,Uw=(St,je,$)=>je in St?lC(St,je,{enumerable:!0,configurable:!0,writable:!0,value:$}):St[je]=$,Bw=(St,je)=>{for(var $ in je||(je={}))hC.call(je,$)&&Uw(St,$,je[$]);if(Vw)for(var $ of Vw(je))fC.call(je,$)&&Uw(St,$,je[$]);return St},jw=(St,je)=>cC(St,dC(je));(self.webpackChunkfirebaseapp=self.webpackChunkfirebaseapp||[]).push([[179],{440:(St,je,$)=>{$.d(je,{nm:()=>ei});var w=$(5813);$(5e3),$(5867);var rt=$(5861),Qe=$(9681),He=$(4859),qe=$(2090),ft=$(1877);const oe=new Map,et={activated:!1,tokenObservers:[]},he={initialized:!1,enabled:!1};function De(Ae){return oe.get(Ae)||et}function Me(Ae,be){oe.set(Ae,be)}function ze(){return he}class en{constructor(be,Fe,ut,Ct,Nt){if(this.operation=be,this.retryPolicy=Fe,this.getWaitDuration=ut,this.lowerBound=Ct,this.upperBound=Nt,this.pending=null,this.nextErrorWaitInterval=Ct,Ct>Nt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(be){var Fe=this;return(0,rt.Z)(function*(){Fe.stop();try{Fe.pending=new qe.BH,yield function Zt(Ae){return new Promise(be=>{setTimeout(be,Ae)})}(Fe.getNextRun(be)),Fe.pending.resolve(),yield Fe.pending.promise,Fe.pending=new qe.BH,yield Fe.operation(),Fe.pending.resolve(),yield Fe.pending.promise,Fe.process(!0).catch(()=>{})}catch(ut){Fe.retryPolicy(ut)?Fe.process(!1).catch(()=>{}):Fe.stop()}})()}getNextRun(be){if(be)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Fe=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Fe}}}const Yt=new qe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function nn(Ae){if(!De(Ae).activated)throw Yt.create("use-before-activation",{appName:Ae.name})}function or(Ae,be){return wr.apply(this,arguments)}function wr(){return(wr=(0,rt.Z)(function*({url:Ae,body:be},Fe){var ut,Ct;const Nt={"Content-Type":"application/json"},Mn=Fe.getImmediate({optional:!0});if(Mn){const ls=yield Mn.getHeartbeatsHeader();ls&&(Nt["X-Firebase-Client"]=ls)}const ti={method:"POST",body:JSON.stringify(be),headers:Nt};let Nn,Zi;try{Nn=yield fetch(Ae,ti)}catch(ls){throw Yt.create("fetch-network-error",{originalErrorMessage:null===(ut=ls)||void 0===ut?void 0:ut.message})}if(200!==Nn.status)throw Yt.create("fetch-status-error",{httpStatus:Nn.status});try{Zi=yield Nn.json()}catch(ls){throw Yt.create("fetch-parse-error",{originalErrorMessage:null===(Ct=ls)||void 0===Ct?void 0:Ct.message})}const ni=Zi.ttl.match(/^([\d.]+)(s)$/);if(!ni||!ni[2]||isNaN(Number(ni[1])))throw Yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Zi.ttl}`});const To=1e3*Number(ni[1]),qr=Date.now();return{token:Zi.token,expireTimeMillis:qr+To,issuedAtTimeMillis:qr}})).apply(this,arguments)}function zn(Ae,be){const{projectId:Fe,appId:ut,apiKey:Ct}=Ae.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Fe}/apps/${ut}:exchangeDebugToken?key=${Ct}`,body:{debug_token:be}}}const Ht="firebase-app-check-store";let wn=null;function pn(){return wn||(wn=new Promise((Ae,be)=>{var Fe;try{const ut=indexedDB.open("firebase-app-check-database",1);ut.onsuccess=Ct=>{Ae(Ct.target.result)},ut.onerror=Ct=>{var Nt;be(Yt.create("storage-open",{originalErrorMessage:null===(Nt=Ct.target.error)||void 0===Nt?void 0:Nt.message}))},ut.onupgradeneeded=Ct=>{0===Ct.oldVersion&&Ct.target.result.createObjectStore(Ht,{keyPath:"compositeKey"})}}catch(ut){be(Yt.create("storage-open",{originalErrorMessage:null===(Fe=ut)||void 0===Fe?void 0:Fe.message}))}}),wn)}function _r(){return(_r=(0,rt.Z)(function*(Ae,be){const ut=(yield pn()).transaction(Ht,"readwrite"),Nt=ut.objectStore(Ht).put({compositeKey:Ae,value:be});return new Promise((Mn,ti)=>{Nt.onsuccess=Nn=>{Mn()},ut.onerror=Nn=>{var Zi;ti(Yt.create("storage-set",{originalErrorMessage:null===(Zi=Nn.target.error)||void 0===Zi?void 0:Zi.message}))}})})).apply(this,arguments)}const Rr=new ft.Yd("@firebase/app-check");function Is(Ae,be){return(0,qe.hl)()?function Ki(Ae,be){return function vi(Ae,be){return _r.apply(this,arguments)}(function Wt(Ae){return`${Ae.options.appId}-${Ae.name}`}(Ae),be)}(Ae,be).catch(Fe=>{Rr.warn(`Failed to write token to IndexedDB. Error: ${Fe}`)}):Promise.resolve()}function Jt(){return ze().enabled}function Te(){return pe.apply(this,arguments)}function pe(){return(pe=(0,rt.Z)(function*(){const Ae=ze();if(Ae.enabled&&Ae.token)return Ae.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Se={error:"UNKNOWN_ERROR"};function le(Ae){return qe.US.encodeString(JSON.stringify(Ae),!1)}function Ke(Ae){return vt.apply(this,arguments)}function vt(){return(vt=(0,rt.Z)(function*(Ae,be=!1){const Fe=Ae.app;nn(Fe);const ut=De(Fe);let Nt,Ct=ut.token;if(!Ct){const Nn=yield ut.cachedTokenPromise;Nn&&lr(Nn)&&(Ct=Nn)}if(!be&&Ct&&lr(Ct))return{token:Ct.token};let ti,Mn=!1;if(Jt()){ut.exchangeTokenPromise||(ut.exchangeTokenPromise=or(zn(Fe,yield Te()),Ae.heartbeatServiceProvider).then(Zi=>(ut.exchangeTokenPromise=void 0,Zi)),Mn=!0);const Nn=yield ut.exchangeTokenPromise;return yield Is(Fe,Nn),Me(Fe,Object.assign(Object.assign({},ut),{token:Nn})),{token:Nn.token}}try{ut.exchangeTokenPromise||(ut.exchangeTokenPromise=ut.provider.getToken().then(Nn=>(ut.exchangeTokenPromise=void 0,Nn)),Mn=!0),Ct=yield ut.exchangeTokenPromise}catch(Nn){"appCheck/throttled"===Nn.code?Rr.warn(Nn.message):Rr.error(Nn),Nt=Nn}return Ct?(ti={token:Ct.token},Me(Fe,Object.assign(Object.assign({},ut),{token:Ct})),yield Is(Fe,Ct)):ti=Cs(Nt),Mn&&yn(Fe,ti),ti})).apply(this,arguments)}function tn(Ae,be){const Fe=De(Ae),ut=Fe.tokenObservers.filter(Ct=>Ct.next!==be);0===ut.length&&Fe.tokenRefresher&&Fe.tokenRefresher.isRunning()&&Fe.tokenRefresher.stop(),Me(Ae,Object.assign(Object.assign({},Fe),{tokenObservers:ut}))}function Yn(Ae){const{app:be}=Ae,Fe=De(be);let ut=Fe.tokenRefresher;ut||(ut=function Qn(Ae){const{app:be}=Ae;return new en((0,rt.Z)(function*(){let ut;if(ut=De(be).token?yield Ke(Ae,!0):yield Ke(Ae),ut.error)throw ut.error}),()=>!0,()=>{const Fe=De(be);if(Fe.token){let ut=Fe.token.issuedAtTimeMillis+.5*(Fe.token.expireTimeMillis-Fe.token.issuedAtTimeMillis)+3e5;return ut=Math.min(ut,Fe.token.expireTimeMillis-3e5),Math.max(0,ut-Date.now())}return 0},3e4,96e4)}(Ae),Me(be,Object.assign(Object.assign({},Fe),{tokenRefresher:ut}))),!ut.isRunning()&&Fe.isTokenAutoRefreshEnabled&&ut.start()}function yn(Ae,be){const Fe=De(Ae).tokenObservers;for(const ut of Fe)try{"EXTERNAL"===ut.type&&null!=be.error?ut.error(be.error):ut.next(be)}catch(Ct){}}function lr(Ae){return Ae.expireTimeMillis-Date.now()>0}function Cs(Ae){return{token:le(Se),error:Ae}}class ui{constructor(be,Fe){this.app=be,this.heartbeatServiceProvider=Fe}_delete(){const{tokenObservers:be}=De(this.app);for(const Fe of be)tn(this.app,Fe.next);return Promise.resolve()}}const Ds="app-check-internal";!function ki(){(0,Qe._registerComponent)(new He.wA("app-check",Ae=>function ts(Ae,be){return new ui(Ae,be)}(Ae.getProvider("app").getImmediate(),Ae.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ae,be,Fe)=>{Ae.getProvider(Ds).initialize()})),(0,Qe._registerComponent)(new He.wA(Ds,Ae=>function vn(Ae){return{getToken:be=>Ke(Ae,be),addTokenListener:be=>function Pt(Ae,be,Fe,ut){const{app:Ct}=Ae,Nt=De(Ct),Mn={next:Fe,error:ut,type:be};if(Me(Ct,Object.assign(Object.assign({},Nt),{tokenObservers:[...Nt.tokenObservers,Mn]})),Nt.token&&lr(Nt.token)){const ti=Nt.token;Promise.resolve().then(()=>{Fe({token:ti.token}),Yn(Ae)}).catch(()=>{})}Nt.cachedTokenPromise.then(()=>Yn(Ae))}(Ae,"INTERNAL",be),removeTokenListener:be=>tn(Ae.app,be)}}(Ae.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Qe.registerVersion)("@firebase/app-check","0.5.10")}();class ei{constructor(){return(0,w.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(St,je,$)=>{$.d(je,{zQ:()=>Ge,ww:()=>pt,rT:()=>he,f7:()=>Me,L6:()=>oe,_Q:()=>et,lh:()=>De,Qv:()=>ft,nw:()=>ze});var w=$(5e3),ne=$(7579),te=$(9646),xe=$(8306),Ee=$(8996),ye=$(6451),Le=$(6063);class we extends ne.x{constructor($t=1/0,Bt=1/0,tt=Le.l){super(),this._bufferSize=$t,this._windowTime=Bt,this._timestampProvider=tt,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Bt===1/0,this._bufferSize=Math.max(1,$t),this._windowTime=Math.max(1,Bt)}next($t){const{isStopped:Bt,_buffer:tt,_infiniteTimeWindow:en,_timestampProvider:Zt,_windowTime:Qt}=this;Bt||(tt.push($t),!en&&tt.push(Zt.now()+Qt)),this._trimBuffer(),super.next($t)}_subscribe($t){this._throwIfClosed(),this._trimBuffer();const Bt=this._innerSubscribe($t),{_infiniteTimeWindow:tt,_buffer:en}=this,Zt=en.slice();for(let Qt=0;Qt<Zt.length&&!$t.closed;Qt+=tt?1:2)$t.next(Zt[Qt]);return this._checkFinalizedStatuses($t),Bt}_trimBuffer(){const{_bufferSize:$t,_timestampProvider:Bt,_buffer:tt,_infiniteTimeWindow:en}=this,Zt=(en?1:2)*$t;if($t<1/0&&Zt<tt.length&&tt.splice(0,tt.length-Zt),!en){const Qt=Bt.now();let Yt=0;for(let bn=1;bn<tt.length&&tt[bn]<=Qt;bn+=2)Yt=bn;Yt&&tt.splice(0,Yt+1)}}}var Ne=$(3099);function fe(bt,$t,Bt){let tt,en=!1;return bt&&"object"==typeof bt?({bufferSize:tt=1/0,windowTime:$t=1/0,refCount:en=!1,scheduler:Bt}=bt):tt=null!=bt?bt:1/0,(0,Ne.B)({connector:()=>new we(tt,$t,Bt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:en})}var de=$(3900),Pe=$(576);function wt(bt,$t){return(0,Pe.m)($t)?(0,de.w)(()=>bt,$t):(0,de.w)(()=>bt)}var st=$(5363),ot=$(4004),It=$(590),Ye=$(9468),at=$(9300),Ie=$(5813),Tt=$(2011),rt=$(9808),Qe=$(440),He=$(127);const ft=new w.OlP("angularfire2.auth.use-emulator"),oe=new w.OlP("angularfire2.auth.settings"),et=new w.OlP("angularfire2.auth.tenant-id"),he=new w.OlP("angularfire2.auth.langugage-code"),De=new w.OlP("angularfire2.auth.use-device-language"),Me=new w.OlP("angularfire.auth.persistence"),ze=(bt,$t,Bt,tt,en,Zt,Qt,Yt)=>(0,Tt.cc)(`${bt.name}.auth`,"AngularFireAuth",bt.name,()=>{const bn=$t.runOutsideAngular(()=>bt.auth());if(Bt&&bn.useEmulator(...Bt),tt&&(bn.tenantId=tt),bn.languageCode=en,Zt&&bn.useDeviceLanguage(),Qt)for(const[nn,cn]of Object.entries(Qt))bn.settings[nn]=cn;return Yt&&bn.setPersistence(Yt),bn},[Bt,tt,en,Zt,Qt,Yt]);let Ge=(()=>{class bt{constructor(Bt,tt,en,Zt,Qt,Yt,bn,nn,cn,pr,or,wr){const gr=new ne.x,Lr=(0,te.of)(void 0).pipe((0,st.Q)(Qt.outsideAngular),(0,de.w)(()=>Zt.runOutsideAngular(()=>Promise.resolve().then($.bind($,3677)))),(0,ot.U)(()=>(0,Tt.on)(Bt,Zt,tt)),(0,ot.U)(zn=>ze(zn,Zt,Yt,nn,cn,pr,bn,or)),fe({bufferSize:1,refCount:!1}));if((0,rt.PM)(en))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,te.of)(null);else{Lr.pipe((0,It.P)()).subscribe();const Er=Lr.pipe((0,de.w)(Ln=>Ln.getRedirectResult().then(wn=>wn,()=>null)),Ie.iC,fe({bufferSize:1,refCount:!1})),Zn=Lr.pipe((0,de.w)(Ln=>new xe.y(wn=>({unsubscribe:Zt.runOutsideAngular(()=>Ln.onAuthStateChanged(pn=>wn.next(pn),pn=>wn.error(pn),()=>wn.complete()))})))),Ht=Lr.pipe((0,de.w)(Ln=>new xe.y(wn=>({unsubscribe:Zt.runOutsideAngular(()=>Ln.onIdTokenChanged(pn=>wn.next(pn),pn=>wn.error(pn),()=>wn.complete()))}))));this.authState=Er.pipe(wt(Zn),(0,Ye.R)(Qt.outsideAngular),(0,st.Q)(Qt.insideAngular)),this.user=Er.pipe(wt(Ht),(0,Ye.R)(Qt.outsideAngular),(0,st.Q)(Qt.insideAngular)),this.idToken=this.user.pipe((0,de.w)(Ln=>Ln?(0,Ee.D)(Ln.getIdToken()):(0,te.of)(null))),this.idTokenResult=this.user.pipe((0,de.w)(Ln=>Ln?(0,Ee.D)(Ln.getIdTokenResult()):(0,te.of)(null))),this.credential=(0,ye.T)(Er,gr,this.authState.pipe((0,at.h)(Ln=>!Ln))).pipe((0,ot.U)(Ln=>(null==Ln?void 0:Ln.user)?Ln:null),(0,Ye.R)(Qt.outsideAngular),(0,st.Q)(Qt.insideAngular))}return(0,Tt.pX)(this,Lr,Zt,{spy:{apply:(zn,Er,Zn)=>{(zn.startsWith("signIn")||zn.startsWith("createUser"))&&Zn.then(Ht=>gr.next(Ht))}}})}}return bt.\u0275fac=function(Bt){return new(Bt||bt)(w.LFG(Tt.Dh),w.LFG(Tt.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Ie.HU),w.LFG(ft,8),w.LFG(oe,8),w.LFG(et,8),w.LFG(he,8),w.LFG(De,8),w.LFG(Me,8),w.LFG(Qe.nm,8))},bt.\u0275prov=w.Yz7({token:bt,factory:bt.\u0275fac,providedIn:"any"}),bt})(),pt=(()=>{class bt{constructor(){He.Z.registerVersion("angularfire",Ie.q4.full,"auth-compat")}}return bt.\u0275fac=function(Bt){return new(Bt||bt)},bt.\u0275mod=w.oAB({type:bt}),bt.\u0275inj=w.cJS({providers:[Ge]}),bt})()},7407:(St,je,$)=>{$.d(je,{ST:()=>z_,yb:()=>_v});var w=$(5e3),ne=$(4986),te=$(8306),xe=$(8996),Ee=$(9646),ye=$(5813),Le=$(4482),we=$(5403);function Ne(){return(0,Le.e)((i,e)=>{let t,s=!1;i.subscribe((0,we.x)(e,d=>{const g=t;t=d,s&&e.next([g,d]),s=!0}))})}var oe,fe=$(8675),de=$(4004),Pe=$(5026),wt=$(1884),st=$(9300),ot=$(2011),It=$(9808),at=($(3677),$(3942)),Ie=$(5861),Tt=$(9681),rt=$(4859),Qe=$(1877),He=$(2090),qe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ft={},et=et||{},he=qe||self;function De(){}function Me(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ze(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var pt="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function $t(i,e,t){return i.call.apply(i.bind,arguments)}function Bt(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,s),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function tt(i,e,t){return(tt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?$t:Bt).apply(null,arguments)}function en(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function Zt(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,d,g){for(var v=Array(arguments.length-2),x=2;x<arguments.length;x++)v[x-2]=arguments[x];return e.prototype[d].apply(s,v)}}function Qt(){this.s=this.s,this.o=this.o}var bn={};Qt.prototype.s=!1,Qt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Ge(i){return Object.prototype.hasOwnProperty.call(i,pt)&&i[pt]||(i[pt]=++bt)}(this);delete bn[i]}},Qt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nn=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},cn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const s=i.length,d="string"==typeof i?i.split(""):i;for(let g=0;g<s;g++)g in d&&e.call(t,d[g],g,i)};function or(i){return Array.prototype.concat.apply([],arguments)}function wr(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function gr(i){return/^[\s\xa0]*$/.test(i)}var Zn,Lr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function zn(i,e){return-1!=i.indexOf(e)}function Er(i,e){return i<e?-1:i>e?1:0}e:{var Ht=he.navigator;if(Ht){var Ln=Ht.userAgent;if(Ln){Zn=Ln;break e}}Zn=""}function wn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function pn(i){const e={};for(const t in i)e[t]=i[t];return e}var as="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ki(i,e){let t,s;for(let d=1;d<arguments.length;d++){for(t in s=arguments[d],s)i[t]=s[t];for(let g=0;g<as.length;g++)t=as[g],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function Xr(i){return Xr[" "](i),i}Xr[" "]=De;var Dn,i,vi=zn(Zn,"Opera"),_r=zn(Zn,"Trident")||zn(Zn,"MSIE"),Rt=zn(Zn,"Edge"),jt=Rt||_r,Wt=zn(Zn,"Gecko")&&!(zn(Zn.toLowerCase(),"webkit")&&!zn(Zn,"Edge"))&&!(zn(Zn,"Trident")||zn(Zn,"MSIE"))&&!zn(Zn,"Edge"),Rr=zn(Zn.toLowerCase(),"webkit")&&!zn(Zn,"Edge");function qi(){var i=he.document;return i?i.documentMode:void 0}e:{var Is="",wi=(i=Zn,Wt?/rv:([^\);]+)(\)|;)/.exec(i):Rt?/Edge\/([\d\.]+)/.exec(i):_r?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Rr?/WebKit\/(\S+)/.exec(i):vi?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(wi&&(Is=wi?wi[1]:""),_r){var ur=qi();if(null!=ur&&ur>parseFloat(Is)){Dn=String(ur);break e}}Dn=Is}var Jt={};var Se=he.document&&_r&&(qi()||parseInt(Dn,10))||void 0,le=function(){if(!he.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{he.addEventListener("test",De,e),he.removeEventListener("test",De,e)}catch(t){}return i}();function Ke(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function vt(i,e){if(Ke.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Wt){e:{try{Xr(e.nodeName);var d=!0;break e}catch(g){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Pt[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&vt.Z.h.call(this)}}Ke.prototype.h=function(){this.defaultPrevented=!0},Zt(vt,Ke);var Pt={2:"touch",3:"pen",4:"mouse"};vt.prototype.h=function(){vt.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var tn="closure_listenable_"+(1e6*Math.random()|0),Yn=0;function Qn(i,e,t,s,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=d,this.key=++Yn,this.ca=this.fa=!1}function yn(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function lr(i){this.src=i,this.g={},this.h=0}function Cs(i,e){var t=e.type;if(t in i.g){var g,s=i.g[t],d=nn(s,e);(g=0<=d)&&Array.prototype.splice.call(s,d,1),g&&(yn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function ui(i,e,t,s){for(var d=0;d<i.length;++d){var g=i[d];if(!g.ca&&g.listener==e&&g.capture==!!t&&g.ia==s)return d}return-1}lr.prototype.add=function(i,e,t,s,d){var g=i.toString();(i=this.g[g])||(i=this.g[g]=[],this.h++);var v=ui(i,e,s,d);return-1<v?(e=i[v],t||(e.fa=!1)):((e=new Qn(e,this.src,g,!!s,d)).fa=t,i.push(e)),e};var ts="closure_lm_"+(1e6*Math.random()|0),vn={};function Ir(i,e,t,s,d){if(s&&s.once)return rr(i,e,t,s,d);if(Array.isArray(e)){for(var g=0;g<e.length;g++)Ir(i,e[g],t,s,d);return null}return t=ps(t),i&&i[tn]?i.N(e,t,ze(s)?!!s.capture:!!s,d):Ni(i,e,t,!1,s,d)}function Ni(i,e,t,s,d,g){if(!e)throw Error("Invalid event type");var v=ze(d)?!!d.capture:!!d,x=Vr(i);if(x||(i[ts]=x=new lr(i)),(t=x.add(e,t,s,v,g)).proxy)return t;if(s=function Cr(){var e=us;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)le||(d=v),void 0===d&&(d=!1),i.addEventListener(e.toString(),s,d);else if(i.attachEvent)i.attachEvent(Pi(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function rr(i,e,t,s,d){if(Array.isArray(e)){for(var g=0;g<e.length;g++)rr(i,e[g],t,s,d);return null}return t=ps(t),i&&i[tn]?i.O(e,t,ze(s)?!!s.capture:!!s,d):Ni(i,e,t,!0,s,d)}function Ei(i,e,t,s,d){if(Array.isArray(e))for(var g=0;g<e.length;g++)Ei(i,e[g],t,s,d);else s=ze(s)?!!s.capture:!!s,t=ps(t),i&&i[tn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=ui(g=i.g[e],t,s,d))&&(yn(g[t]),Array.prototype.splice.call(g,t,1),0==g.length&&(delete i.g[e],i.h--))):i&&(i=Vr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=ui(e,t,s,d)),(t=-1<i?e[i]:null)&&bs(t))}function bs(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[tn])Cs(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(Pi(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Vr(e))?(Cs(t,i),0==t.h&&(t.src=null,e[ts]=null)):yn(i)}}}function Pi(i){return i in vn?vn[i]:vn[i]="on"+i}function us(i,e){if(i.ca)i=!0;else{e=new vt(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&bs(i),i=t.call(s,e)}return i}function Vr(i){return(i=i[ts])instanceof lr?i:null}var cr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ps(i){return"function"==typeof i?i:(i[cr]||(i[cr]=function(e){return i.handleEvent(e)}),i[cr])}function Tn(){Qt.call(this),this.i=new lr(this),this.P=this,this.I=null}function gt(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new Ke(e,i);else if(e instanceof Ke)e.target=e.target||i;else{var d=e;Ki(e=new Ke(s,i),d)}if(d=!0,t)for(var g=t.length-1;0<=g;g--){var v=e.g=t[g];d=At(v,s,!0,e)&&d}if(d=At(v=e.g=i,s,!0,e)&&d,d=At(v,s,!1,e)&&d,t)for(g=0;g<t.length;g++)d=At(v=e.g=t[g],s,!1,e)&&d}function At(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,g=0;g<e.length;++g){var v=e[g];if(v&&!v.ca&&v.capture==t){var x=v.listener,j=v.ia||v.src;v.fa&&Cs(i.i,v),d=!1!==x.call(j,s)&&d}}return d&&!s.defaultPrevented}Zt(Tn,Qt),Tn.prototype[tn]=!0,Tn.prototype.removeEventListener=function(i,e,t,s){Ei(this,i,e,t,s)},Tn.prototype.M=function(){if(Tn.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)yn(t[s]);delete i.g[e],i.h--}}this.I=null},Tn.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},Tn.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Sn=he.JSON.stringify;function br(){var i=ns;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var yr,re=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new li,i=>i.reset());class li{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Kn(i){he.setTimeout(()=>{throw i},0)}function Oi(i,e){yr||function dn(){var i=he.Promise.resolve(void 0);yr=function(){i.then(Ds)}}(),qn||(yr(),qn=!0),ns.add(i,e)}var qn=!1,ns=new class Kr{constructor(){this.h=this.g=null}add(e,t){const s=re.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function Ds(){for(var i;i=br();){try{i.h.call(i.g)}catch(t){Kn(t)}var e=re;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}qn=!1}function ki(i,e){Tn.call(this),this.h=i||1,this.g=e||he,this.j=tt(this.kb,this),this.l=Date.now()}function Sr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Mr(i,e,t){if("function"==typeof i)t&&(i=tt(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=tt(i.handleEvent,i)}return 2147483647<Number(e)?-1:he.setTimeout(i,e||0)}function ei(i){i.g=Mr(()=>{i.g=null,i.i&&(i.i=!1,ei(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Zt(ki,Tn),(oe=ki.prototype).da=!1,oe.S=null,oe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gt(this,"tick"),this.da&&(Sr(this),this.start()))}},oe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},oe.M=function(){ki.Z.M.call(this),Sr(this),delete this.g};class Ur extends Qt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ei(this)}M(){super.M(),this.g&&(he.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(i){Qt.call(this),this.h=i,this.g={}}Zt(kn,Qt);var bo=[];function Ii(i,e,t,s){Array.isArray(t)||(t&&(bo[0]=t.toString()),t=bo);for(var d=0;d<t.length;d++){var g=Ir(e,t[d],s||i.handleEvent,!1,i.h||i);if(!g)break;i.g[g.key]=g}}function ci(i){wn(i.g,function(e,t){this.g.hasOwnProperty(t)&&bs(e)},i),i.g={}}function Fi(){this.g=!0}function Ci(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Do(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var d=s[1];if(Array.isArray(d)&&!(1>d.length)){var g=d[0];if("noop"!=g&&"stop"!=g&&"close"!=g)for(var v=1;v<d.length;v++)d[v]=""}}}return Sn(t)}catch(x){return e}}(i,t)+(s?" "+s:"")})}kn.prototype.M=function(){kn.Z.M.call(this),ci(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fi.prototype.Aa=function(){this.g=!1},Fi.prototype.info=function(){};var Ts={},lo=null;function dr(){return lo=lo||new Tn}function vr(i){Ke.call(this,Ts.Ma,i)}function Ae(i){const e=dr();gt(e,new vr(e,i))}function be(i,e){Ke.call(this,Ts.STAT_EVENT,i),this.stat=e}function Fe(i){const e=dr();gt(e,new be(e,i))}function ut(i,e){Ke.call(this,Ts.Na,i),this.size=e}function Ct(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return he.setTimeout(function(){i()},e)}Ts.Ma="serverreachability",Zt(vr,Ke),Ts.STAT_EVENT="statevent",Zt(be,Ke),Ts.Na="timingevent",Zt(ut,Ke);var Nt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Mn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ti(){}function Zi(){}ti.prototype.h=null;var ls,ni={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function To(){Ke.call(this,"d")}function qr(){Ke.call(this,"c")}function rs(){}function Bs(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new kn(this),this.P=Fa,this.W=new ki(i=jt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ca}function ca(){this.i=null,this.g="",this.h=!1}Zt(To,Ke),Zt(qr,Ke),Zt(rs,ti),rs.prototype.g=function(){return new XMLHttpRequest},rs.prototype.i=function(){return{}},ls=new rs;var Fa=45e3,Zr={},Ss={};function gs(i,e,t){i.K=1,i.v=Je(Vn(e)),i.s=t,i.U=!0,Ys(i,null)}function Ys(i,e){i.F=Date.now(),Br(i),i.A=Vn(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),co(t.h,"t",s),i.C=0,t=i.l.H,i.h=new ca,i.g=cu(i.l,t?e:null,!i.s),0<i.O&&(i.L=new Ur(tt(i.Ia,i,i.g),i.O)),Ii(i.V,i.g,"readystatechange",i.gb),e=i.H?pn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ae(1),function Zs(i,e,t,s,d,g){i.info(function(){if(i.g)if(g)for(var v="",x=g.split("&"),j=0;j<x.length;j++){var q=x[j].split("=");if(1<q.length){var ie=q[0];q=q[1];var me=ie.split("_");v=2<=me.length&&"type"==me[1]?v+(ie+"=")+q+"&":v+(ie+"=redacted&")}}else v=null;else v=g;return"XMLHTTP REQ ("+s+") [attempt "+d+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function da(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function js(i,e,t){let d,s=!0;for(;!i.I&&i.C<t.length;){if(d=is(i,t),d==Ss){4==e&&(i.o=4,Fe(14),s=!1),Ci(i.j,i.m,null,"[Incomplete Response]");break}if(d==Zr){i.o=4,Fe(15),Ci(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Ci(i.j,i.m,d,null),As(i,d)}da(i)&&d!=Ss&&d!=Zr&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,Fe(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),eo(e),e.L=!0,Fe(11))):(Ci(i.j,i.m,t,"[Invalid Chunked Response]"),jr(i),So(i))}function is(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Ss:(t=Number(e.substring(t,s)),isNaN(t)?Zr:(s+=1)+t>e.length?Ss:(e=e.substr(s,t),i.C=s+t,e))}function Br(i){i.Y=Date.now()+i.P,Qs(i,i.P)}function Qs(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Ct(tt(i.eb,i),e)}function di(i){i.B&&(he.clearTimeout(i.B),i.B=null)}function So(i){0==i.l.G||i.I||zl(i.l,i)}function jr(i){di(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Sr(i.W),ci(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function As(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||on(t.i,i)))if(t.I=i.N,!i.J&&on(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(q){s=null}if(Array.isArray(s)&&3==s.length){var d=s;if(0==d[0])e:if(t.u)t.ta=d[1],0<t.ta-t.U&&37500>d[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ct(tt(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;ar(t),xo(t)}Zo(t),Fe(18)}if(1>=kt(t.i)&&t.ka){try{t.ka()}catch(q){}t.ka=void 0}}else to(t,11)}else if((i.J||t.g==i)&&ar(t),!gr(e))for(d=t.Ca.g.parse(e),e=0;e<d.length;e++){let q=d[e];if(t.U=q[0],q=q[1],2==t.G)if("c"==q[0]){t.J=q[1],t.la=q[2];const ie=q[3];null!=ie&&(t.ma=ie,t.h.info("VER="+t.ma));const me=q[4];null!=me&&(t.za=me,t.h.info("SVER="+t.za));const Ze=q[5];null!=Ze&&"number"==typeof Ze&&0<Ze&&(t.K=s=1.5*Ze,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const dt=i.g;if(dt){const yt=dt.g?dt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yt){var g=s.i;!g.g&&(zn(yt,"spdy")||zn(yt,"quic")||zn(yt,"h2"))&&(g.j=g.l,g.g=new Set,g.h&&(Yr(g,g.h),g.h=null))}if(s.D){const qt=dt.g?dt.g.getResponseHeader("X-HTTP-Session-Id"):null;qt&&(s.sa=qt,ge(s.F,s.D,qt))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var v=i;if((s=t).oa=Ro(s,s.H?s.la:null,s.W),v.J){fi(s.i,v);var x=v,j=s.K;j&&x.setTimeout(j),x.B&&(di(x),Br(x)),s.g=v}else lu(s);0<t.l.length&&Ba(t)}else"stop"!=q[0]&&"close"!=q[0]||to(t,7);else 3==t.G&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?to(t,7):Di(t):"noop"!=q[0]&&t.j&&t.j.wa(q),t.A=0)}Ae(4)}catch(q){}}function ha(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Me(i)||"string"==typeof i)cn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Me(i)||"string"==typeof i){t=[];for(var s=i.length,d=0;d<s;d++)t.push(d)}else for(d in t=[],s=0,i)t[s++]=d;s=function hi(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Me(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),d=s.length;for(var g=0;g<d;g++)e.call(void 0,s[g],t&&t[g],i)}}function ms(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof ms)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function Li(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];Yi(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var d={};for(t=e=0;e<i.g.length;)Yi(d,s=i.g[e])||(i.g[t++]=s,d[s]=1),e++;i.g.length=t}}function Yi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(oe=Bs.prototype).setTimeout=function(i){this.P=i},oe.gb=function(i){i=i.target;const e=this.L;e&&3==qo(i)?e.l():this.Ia(i)},oe.Ia=function(i){try{if(i==this.g)e:{const ie=qo(this.g);var e=this.g.Da();const me=this.g.ba();if(!(3>ie)&&(3!=ie||jt||this.g&&(this.h.h||this.g.ga()||fa(this.g)))){this.I||4!=ie||7==e||Ae(8==e||0>=me?3:2),di(this);var t=this.g.ba();this.N=t;t:if(da(this)){var s=fa(this.g);i="";var d=s.length,g=4==qo(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){jr(this),So(this);var v="";break t}this.h.i=new he.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:g&&e==d-1});s.splice(0,d),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ga();if(this.i=200==t,function ka(i,e,t,s,d,g,v){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+g+" "+v})}(this.j,this.u,this.A,this.m,this.X,ie,t),this.i){if(this.$&&!this.J){t:{if(this.g){var x,j=this.g;if((x=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!gr(x)){var q=x;break t}}q=null}if(!(t=q)){this.i=!1,this.o=3,Fe(12),jr(this),So(this);break e}Ci(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,As(this,t)}this.U?(js(this,ie,v),jt&&this.i&&3==ie&&(Ii(this.V,this.W,"tick",this.fb),this.W.start())):(Ci(this.j,this.m,v,null),As(this,v)),4==ie&&jr(this),this.i&&!this.I&&(4==ie?zl(this.l,this):(this.i=!1,Br(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,Fe(12)):(this.o=0,Fe(13)),jr(this),So(this)}}}catch(ie){}},oe.fb=function(){if(this.g){var i=qo(this.g),e=this.g.ga();this.C<e.length&&(di(this),js(this,i,e),this.i&&4!=i&&Br(this))}},oe.cancel=function(){this.I=!0,jr(this)},oe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function bi(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ae(3),Fe(17)),jr(this),this.o=2,So(this)):Qs(this,this.Y-i)},(oe=ms.prototype).R=function(){Li(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},oe.T=function(){return Li(this),this.g.concat()},oe.get=function(i,e){return Yi(this.h,i)?this.h[i]:e},oe.set=function(i,e){Yi(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},oe.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var d=t[s],g=this.get(d);i.call(e,g,d,this)}};var xs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Js(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Js){this.g=void 0!==e?e:i.g,L(this,i.j),this.s=i.s,Z(this,i.i),V(this,i.m),this.l=i.l,e=i.h;var t=new Ui;t.i=e.i,e.g&&(t.g=new ms(e.g),t.h=e.h),X(this,t),this.o=i.o}else i&&(t=String(i).match(xs))?(this.g=!!e,L(this,t[1]||"",!0),this.s=rn(t[2]||""),Z(this,t[3]||"",!0),V(this,t[4]),this.l=rn(t[5]||"",!0),X(this,t[6]||"",!0),this.o=rn(t[7]||"")):(this.g=!!e,this.h=new Ui(null,this.g))}function Vn(i){return new Js(i)}function L(i,e,t){i.j=t?rn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Z(i,e,t){i.i=t?rn(e,!0):e}function V(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function X(i,e,t){e instanceof Ui?(i.h=e,function B(i,e){e&&!i.j&&(Kt(i),i.i=null,i.g.forEach(function(t,s){var d=s.toLowerCase();s!=d&&(Bi(this,s),co(this,d,t))},i)),i.j=e}(i.h,i.g)):(t||(e=Fn(e,$n)),i.h=new Ui(e,i.g))}function ge(i,e,t){i.h.set(e,t)}function Je(i){return ge(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function rn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Fn(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,En),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function En(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Js.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Fn(e,Pn,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Fn(e,Pn,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(Fn(t,"/"==t.charAt(0)?On:Nr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",Fn(t,Vi)),i.join("")};var Pn=/[#\/\?@]/g,Nr=/[#\?:]/g,On=/[#\?]/g,$n=/[#\?@]/g,Vi=/#/g;function Ui(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Kt(i){i.g||(i.g=new ms,i.h=0,i.i&&function Rs(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),d=null;if(0<=s){var g=i[t].substring(0,s);d=i[t].substring(s+1)}else g=i[t];e(g,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Bi(i,e){Kt(i),e=ho(i,e),Yi(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Yi((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Li(i)))}function Xs(i,e){return Kt(i),e=ho(i,e),Yi(i.g.h,e)}function co(i,e,t){Bi(i,e),0<t.length&&(i.i=null,i.g.set(ho(i,e),wr(t)),i.h+=t.length)}function ho(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function O(i){this.l=i||H,i=he.PerformanceNavigationTiming?0<(i=he.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(he.g&&he.g.Ea&&he.g.Ea()&&he.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(oe=Ui.prototype).add=function(i,e){Kt(this),this.i=null,i=ho(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},oe.forEach=function(i,e){Kt(this),this.g.forEach(function(t,s){cn(t,function(d){i.call(e,d,s,this)},this)},this)},oe.T=function(){Kt(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var d=i[s],g=0;g<d.length;g++)t.push(e[s]);return t},oe.R=function(i){Kt(this);var e=[];if("string"==typeof i)Xs(this,i)&&(e=or(e,this.g.get(ho(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=or(e,i[t])}return e},oe.set=function(i,e){return Kt(this),this.i=null,Xs(this,i=ho(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},oe.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],d=encodeURIComponent(String(s));s=this.R(s);for(var g=0;g<s.length;g++){var v=d;""!==s[g]&&(v+="="+encodeURIComponent(String(s[g]))),i.push(v)}}return this.i=i.join("&")};var H=10;function Ve(i){return!!i.h||!!i.g&&i.g.size>=i.j}function kt(i){return i.h?1:i.g?i.g.size:0}function on(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Yr(i,e){i.g?i.g.add(e):i.h=e}function fi(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Qi(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return wr(i.i)}function fo(){}function po(){this.g=new fo}function Gl(i,e,t){const s=t||"";try{ha(i,function(d,g){let v=d;ze(d)&&(v=Sn(d)),e.push(s+g+"="+encodeURIComponent(v))})}catch(d){throw e.push(s+"type="+encodeURIComponent("_badmap")),d}}function pi(i,e,t,s,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(s)}catch(g){}}function zo(i){this.l=i.$b||null,this.j=i.ib||!1}function gi(i,e){Tn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=_s,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}O.prototype.cancel=function(){if(this.i=Qi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},fo.prototype.stringify=function(i){return he.JSON.stringify(i,void 0)},fo.prototype.parse=function(i){return he.JSON.parse(i,void 0)},Zt(zo,ti),zo.prototype.g=function(){return new gi(this.l,this.j)},zo.prototype.i=function(i){return function(){return i}}({}),Zt(gi,Tn);var _s=0;function La(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function go(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Ms(i)}function Ms(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(oe=gi.prototype).open=function(i,e){if(this.readyState!=_s)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,Ms(this)},oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||he).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,go(this)),this.readyState=_s},oe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Ms(this)),this.g&&(this.readyState=3,Ms(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==he.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;La(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},oe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?go(this):Ms(this),3==this.readyState&&La(this)}},oe.Ua=function(i){this.g&&(this.response=this.responseText=i,go(this))},oe.Ta=function(i){this.g&&(this.response=i,go(this))},oe.ha=function(){this.g&&go(this)},oe.setRequestHeader=function(i,e){this.v.append(i,e)},oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var $s=he.JSON.parse;function ri(i){Tn.call(this),this.headers=new ms,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Wu,this.K=this.L=!1}Zt(ri,Tn);var Wu="",zu=/^https?$/i,Eu=["POST","PUT"];function Ao(i){return"content-type"==i.toLowerCase()}function Iu(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,gl(i),Ko(i)}function gl(i){i.D||(i.D=!0,gt(i,"complete"),gt(i,"error"))}function Va(i){if(i.h&&void 0!==et&&(!i.C[1]||4!=qo(i)||2!=i.ba()))if(i.v&&4==qo(i))Mr(i.Fa,0,i);else if(gt(i,"readystatechange"),4==qo(i)){i.h=!1;try{const x=i.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===x){var d=String(i.H).match(xs)[1]||null;if(!d&&he.self&&he.self.location){var g=he.self.location.protocol;d=g.substr(0,g.length-1)}s=!zu.test(d?d.toLowerCase():"")}t=s}if(t)gt(i,"complete"),gt(i,"success");else{i.m=6;try{var v=2<qo(i)?i.g.statusText:""}catch(j){v=""}i.j=v+" ["+i.ba()+"]",gl(i)}}finally{Ko(i)}}}function Ko(i,e){if(i.g){Ua(i);const t=i.g,s=i.C[0]?De:null;i.g=null,i.C=null,e||gt(i,"ready");try{t.onreadystatechange=s}catch(d){}}}function Ua(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(he.clearTimeout(i.A),i.A=null)}function qo(i){return i.g?i.g.readyState:0}function fa(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Wu:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ta(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function Cu(i){let e="";return wn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):ge(i,e,t))}function Sa(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function Wl(i){this.za=0,this.l=[],this.h=new Fi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Sa("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Sa("baseRetryDelayMs",5e3,i),this.$a=Sa("retryDelaySeedMs",1e4,i),this.Ya=Sa("forwardChannelMaxRetries",2,i),this.ra=Sa("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new O(i&&i.concurrentRequestLimit),this.Ca=new po,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Di(i){if(mi(i),3==i.G){var e=i.V++,t=Vn(i.F);ge(t,"SID",i.J),ge(t,"RID",e),ge(t,"TYPE","terminate"),Aa(i,t),(e=new Bs(i,i.h,e,void 0)).K=2,e.v=Je(Vn(t)),t=!1,he.navigator&&he.navigator.sendBeacon&&(t=he.navigator.sendBeacon(e.v.toString(),"")),!t&&he.Image&&((new Image).src=e.v,t=!0),t||(e.g=cu(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Br(e)}ja(i)}function xo(i){i.g&&(eo(i),i.g.cancel(),i.g=null)}function mi(i){xo(i),i.u&&(he.clearTimeout(i.u),i.u=null),ar(i),i.i.cancel(),i.m&&("number"==typeof i.m&&he.clearTimeout(i.m),i.m=null)}function Mc(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ba(i)}function Ba(i){Ve(i.i)||i.m||(i.m=!0,Oi(i.Ha,i),i.C=0)}function Td(i,e){var t;t=e?e.m:i.V++;const s=Vn(i.F);ge(s,"SID",i.J),ge(s,"RID",t),ge(s,"AID",i.U),Aa(i,s),i.o&&i.s&&Ta(s,i.o,i.s),t=new Bs(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Pc(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Yr(i.i,t),gs(t,s,e)}function Aa(i,e){i.j&&ha({},function(t,s){ge(e,s,t)})}function Pc(i,e,t){t=Math.min(i.l.length,t);var s=i.j?tt(i.j.Oa,i.j,i):null;e:{var d=i.l;let g=-1;for(;;){const v=["count="+t];-1==g?0<t?(g=d[0].h,v.push("ofs="+g)):g=0:v.push("ofs="+g);let x=!0;for(let j=0;j<t;j++){let q=d[j].h;const ie=d[j].g;if(q-=g,0>q)g=Math.max(0,d[j].h-100),x=!1;else try{Gl(ie,v,"req"+q+"_")}catch(me){s&&s(ie)}}if(x){s=v.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,s}function lu(i){i.g||i.u||(i.Y=1,Oi(i.Ga,i),i.A=0)}function Zo(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Ct(tt(i.Ga,i),pa(i,i.A)),i.A++,0))}function eo(i){null!=i.B&&(he.clearTimeout(i.B),i.B=null)}function xa(i){i.g=new Bs(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=Vn(i.oa);ge(e,"RID","rpc"),ge(e,"SID",i.J),ge(e,"CI",i.N?"0":"1"),ge(e,"AID",i.U),Aa(i,e),ge(e,"TYPE","xmlhttp"),i.o&&i.s&&Ta(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=Je(Vn(e)),t.s=null,t.U=!0,Ys(t,i)}function ar(i){null!=i.v&&(he.clearTimeout(i.v),i.v=null)}function zl(i,e){var t=null;if(i.g==e){ar(i),eo(i),i.g=null;var s=2}else{if(!on(i.i,e))return;t=e.D,fi(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;gt(s=dr(),new ut(s,t,e,d)),Ba(i)}else lu(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==s&&function Nc(i,e){return!(kt(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Ct(tt(i.Ha,i,e),pa(i,i.C)),i.C++,0)))}(i,e)||2==s&&Zo(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),d){case 1:to(i,5);break;case 4:to(i,10);break;case 3:to(i,6);break;default:to(i,2)}}function pa(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function to(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=tt(i.jb,i);t||(t=new Js("//www.google.com/images/cleardot.gif"),he.location&&"http"==he.location.protocol||L(t,"https"),Je(t)),function pl(i,e){const t=new Fi;if(he.Image){const s=new Image;s.onload=en(pi,t,s,"TestLoadImage: loaded",!0,e),s.onerror=en(pi,t,s,"TestLoadImage: error",!1,e),s.onabort=en(pi,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=en(pi,t,s,"TestLoadImage: timeout",!1,e),he.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else Fe(2);i.G=0,i.j&&i.j.va(e),ja(i),mi(i)}function ja(i){i.G=0,i.I=-1,i.j&&((0!=Qi(i.i).length||0!=i.l.length)&&(i.i.i.length=0,wr(i.l),i.l.length=0),i.j.ua())}function Ro(i,e,t){let s=function lt(i){return i instanceof Js?Vn(i):new Js(i,void 0)}(t);if(""!=s.i)e&&Z(s,e+"."+s.i),V(s,s.m);else{const d=he.location;s=function zt(i,e,t,s){var d=new Js(null,void 0);return i&&L(d,i),e&&Z(d,e),t&&V(d,t),s&&(d.l=s),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,t)}return i.aa&&wn(i.aa,function(d,g){ge(s,g,d)}),t=i.sa,(e=i.D)&&t&&ge(s,e,t),ge(s,"VER",i.ma),Aa(i,s),s}function cu(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ri(t&&i.Ba&&!i.qa?new zo({ib:!0}):i.qa)).L=i.H,e}function ga(){}function du(){if(_r&&!(10<=Number(Se)))throw Error("Environmental error: no available transport.")}function no(i,e){Tn.call(this),this.g=new Wl(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!gr(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!gr(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Ti(this)}function ml(i){To.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Kl(){qr.call(this),this.status=1}function Ti(i){this.g=i}(oe=ri.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ls.g(),this.C=function Nn(i){return i.h||(i.h=i.i())}(this.u?this.u:ls),this.g.onreadystatechange=tt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(g){return void Iu(this,g)}i=t||"";const d=new ms(this.headers);s&&ha(s,function(g,v){d.set(v,g)}),s=function pr(i){e:{var e=Ao;const t=i.length,s="string"==typeof i?i.split(""):i;for(let d=0;d<t;d++)if(d in s&&e.call(void 0,s[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),t=he.FormData&&i instanceof he.FormData,!(0<=nn(Eu,e))||s||t||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(g,v){this.g.setRequestHeader(v,g)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ua(this),0<this.B&&((this.K=function uu(i){return _r&&function Te(){return function kr(i){var e=Jt;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Lr(String(Dn)).split("."),t=Lr("9").split("."),s=Math.max(e.length,t.length);for(let v=0;0==i&&v<s;v++){var d=e[v]||"",g=t[v]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],0==d[0].length&&0==g[0].length)break;i=Er(0==d[1].length?0:parseInt(d[1],10),0==g[1].length?0:parseInt(g[1],10))||Er(0==d[2].length,0==g[2].length)||Er(d[2],g[2]),d=d[3],g=g[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=tt(this.pa,this)):this.A=Mr(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(g){Iu(this,g)}},oe.pa=function(){void 0!==et&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gt(this,"timeout"),this.abort(8))},oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,gt(this,"complete"),gt(this,"abort"),Ko(this))},oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ko(this,!0)),ri.Z.M.call(this)},oe.Fa=function(){this.s||(this.F||this.v||this.l?Va(this):this.cb())},oe.cb=function(){Va(this)},oe.ba=function(){try{return 2<qo(this)?this.g.status:-1}catch(i){return-1}},oe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},oe.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),$s(e)}},oe.Da=function(){return this.m},oe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(oe=Wl.prototype).ma=8,oe.G=1,oe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},oe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new Bs(this,this.h,i,void 0);let g=this.s;if(this.P&&(g?(g=pn(g),Ki(g,this.P)):g=this.P),null===this.o&&(d.H=g),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Pc(this,d,e),ge(t=Vn(this.F),"RID",i),ge(t,"CVER",22),this.D&&ge(t,"X-HTTP-Session-Id",this.D),Aa(this,t),this.o&&g&&Ta(t,this.o,g),Yr(this.i,d),this.Ra&&ge(t,"TYPE","init"),this.ja?(ge(t,"$req",e),ge(t,"SID","null"),d.$=!0,gs(d,t,null)):gs(d,t,e),this.G=2}}else 3==this.G&&(i?Td(this,i):0==this.l.length||Ve(this.i)||Td(this))},oe.Ga=function(){if(this.u=null,xa(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Ct(tt(this.bb,this),i)}},oe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Fe(10),xo(this),xa(this))},oe.ab=function(){null!=this.v&&(this.v=null,xo(this),Zo(this),Fe(19))},oe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Fe(2)):(this.h.info("Failed to ping google.com"),Fe(1))},(oe=ga.prototype).xa=function(){},oe.wa=function(){},oe.va=function(){},oe.ua=function(){},oe.Oa=function(){},du.prototype.g=function(i,e){return new no(i,e)},Zt(no,Tn),no.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Oi(tt(i.hb,i,e))),Fe(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Ro(i,null,i.W),Ba(i)},no.prototype.close=function(){Di(this.g)},no.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Mc(this.g,e)}else this.v?((e={}).__data__=Sn(i),Mc(this.g,e)):Mc(this.g,i)},no.prototype.M=function(){this.g.j=null,delete this.j,Di(this.g),delete this.g,no.Z.M.call(this)},Zt(ml,To),Zt(Kl,qr),Zt(Ti,ga),Ti.prototype.xa=function(){gt(this.g,"a")},Ti.prototype.wa=function(i){gt(this.g,new ml(i))},Ti.prototype.va=function(i){gt(this.g,new Kl(i))},Ti.prototype.ua=function(){gt(this.g,"b")},du.prototype.createWebChannel=du.prototype.g,no.prototype.send=no.prototype.u,no.prototype.open=no.prototype.m,no.prototype.close=no.prototype.close,Nt.NO_ERROR=0,Nt.TIMEOUT=8,Nt.HTTP_ERROR=6,Mn.COMPLETE="complete",Zi.EventType=ni,ni.OPEN="a",ni.CLOSE="b",ni.ERROR="c",ni.MESSAGE="d",Tn.prototype.listen=Tn.prototype.N,ri.prototype.listenOnce=ri.prototype.O,ri.prototype.getLastError=ri.prototype.La,ri.prototype.getLastErrorCode=ri.prototype.Da,ri.prototype.getStatus=ri.prototype.ba,ri.prototype.getResponseJson=ri.prototype.Qa,ri.prototype.getResponseText=ri.prototype.ga,ri.prototype.send=ri.prototype.ea;var Ku=ft.createWebChannelTransport=function(){return new du},$a=ft.getStatEventTarget=function(){return dr()},ro=ft.ErrorCode=Nt,_l=ft.EventType=Mn,ql=ft.Event=Ts,Hs=ft.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},qu=ft.FetchXmlHttpFactory=zo,Ar=ft.WebChannel=Zi,io=ft.XhrIo=ri;const Yo="@firebase/firestore";class ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ji.UNAUTHENTICATED=new ji(null),ji.GOOGLE_CREDENTIALS=new ji("google-credentials-uid"),ji.FIRST_PARTY=new ji("first-party-uid"),ji.MOCK_USER=new ji("mock-user");let ma="9.8.4";const _a=new Qe.Yd("@firebase/firestore");function bu(){return _a.logLevel}function mt(i,...e){if(_a.logLevel<=Qe.in.DEBUG){const t=e.map(ya);_a.debug(`Firestore (${ma}): ${i}`,...t)}}function Pr(i,...e){if(_a.logLevel<=Qe.in.ERROR){const t=e.map(ya);_a.error(`Firestore (${ma}): ${i}`,...t)}}function Mo(i,...e){if(_a.logLevel<=Qe.in.WARN){const t=e.map(ya);_a.warn(`Firestore (${ma}): ${i}`,...t)}}function ya(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function S(i="Unexpected state"){const e=`FIRESTORE (${ma}) INTERNAL ASSERTION FAILED: `+i;throw Pr(e),new Error(e)}function D(i,e){i||S()}function M(i,e){return i}const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends He.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ae{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class _e{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class it{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ji.UNAUTHENTICATED))}shutdown(){}}class Ft{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Un{constructor(e){this.t=e,this.currentUser=ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let d=this.i;const g=q=>this.i!==d?(d=this.i,t(q)):Promise.resolve();let v=new ae;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new ae,e.enqueueRetryable(()=>g(this.currentUser))};const x=()=>{const q=v;e.enqueueRetryable((0,Ie.Z)(function*(){yield q.promise,yield g(s.currentUser)}))},j=q=>{mt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(q=>j(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?j(q):(mt("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new ae)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(mt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(D("string"==typeof s.accessToken),new _e(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return D(null===e||"string"==typeof e),new ji(e)}}class Gt{constructor(e,t,s){this.type="FirstParty",this.user=ji.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class hr{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new Gt(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hn{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class so{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=g=>{null!=g.error&&mt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const v=g.token!==this.p;return this.p=g.token,mt("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>s(g))};const d=g=>{mt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.appCheck.addTokenListener(this.o)};this.g.onInit(g=>d(g)),setTimeout(()=>{if(!this.appCheck){const g=this.g.getImmediate({optional:!0});g?d(g):mt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(D("string"==typeof t.token),this.p=t.token,new Hn(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ha(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class va{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const d=Ha(40);for(let g=0;g<d.length;++g)s.length<20&&d[g]<t&&(s+=e.charAt(d[g]%e.length))}return s}}function an(i,e){return i<e?-1:i>e?1:0}function No(i,e,t){return i.length===e.length&&i.every((s,d)=>t(s,e[d]))}function yl(i){return i+"\0"}class $r{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new W(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new W(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new W(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $r.fromMillis(Date.now())}static fromDate(e){return $r.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new $r(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?an(this.nanoseconds,e.nanoseconds):an(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class un{constructor(e){this.timestamp=e}static fromTimestamp(e){return new un(e)}static min(){return new un(new $r(0,0))}static max(){return new un(new $r(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class vl{constructor(e,t,s){void 0===t?t=0:t>e.length&&S(),void 0===s?s=e.length-t:s>e.length-t&&S(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===vl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let d=0;d<s;d++){const g=e.get(d),v=t.get(d);if(g<v)return-1;if(g>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jn extends vl{construct(e,t,s){return new Jn(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new W(N.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(d=>d.length>0))}return new Jn(t)}static emptyPath(){return new Jn([])}}const _i=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ji extends vl{construct(e,t,s){return new Ji(e,t,s)}static isValidIdentifier(e){return _i.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ji.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ji(["__name__"])}static fromServerFormat(e){const t=[];let s="",d=0;const g=()=>{if(0===s.length)throw new W(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let v=!1;for(;d<e.length;){const x=e[d];if("\\"===x){if(d+1===e.length)throw new W(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[d+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new W(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=j,d+=2}else"`"===x?(v=!v,d++):"."!==x||v?(s+=x,d++):(g(),d++)}if(g(),v)throw new W(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ji(t)}static emptyPath(){return new Ji([])}}class Ot{constructor(e){this.path=e}static fromPath(e){return new Ot(Jn.fromString(e))}static fromName(e){return new Ot(Jn.fromString(e).popFirst(5))}static empty(){return new Ot(Jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ot(new Jn(e.slice()))}}class Sd{constructor(e,t,s,d){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=d}}function Oc(i){return i.fields.find(e=>2===e.kind)}function Po(i){return i.fields.filter(e=>2!==e.kind)}Sd.UNKNOWN_ID=-1;class Du{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ga{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ga(0,Xn.min())}}function Tu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,d=un.fromTimestamp(1e9===s?new $r(t+1,0):new $r(t,s));return new Xn(d,Ot.empty(),e)}function Ad(i){return new Xn(i.readTime,i.key,-1)}class Xn{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Xn(un.min(),Ot.empty(),-1)}static max(){return new Xn(un.max(),Ot.empty(),-1)}}function wa(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ot.comparator(i.documentKey,e.documentKey),0!==t?t:an(i.largestBatchId,e.largestBatchId))}const Wa="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ih{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Hr(i){return ys.apply(this,arguments)}function ys(){return ys=(0,Ie.Z)(function*(i){if(i.code!==N.FAILED_PRECONDITION||i.message!==Wa)throw i;mt("LocalStore","Unexpectedly lost primary lease")}),ys.apply(this,arguments)}class $e{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $e((s,d)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(s,d)},this.catchCallback=g=>{this.wrapFailure(t,g).next(s,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $e?t:$e.resolve(t)}catch(t){return $e.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$e.reject(t)}static resolve(e){return new $e((t,s)=>{t(e)})}static reject(e){return new $e((t,s)=>{s(e)})}static waitFor(e){return new $e((t,s)=>{let d=0,g=0,v=!1;e.forEach(x=>{++d,x.next(()=>{++g,v&&g===d&&t()},j=>s(j))}),v=!0,g===d&&t()})}static or(e){let t=$e.resolve(!1);for(const s of e)t=t.next(d=>d?$e.resolve(d):s());return t}static forEach(e,t){const s=[];return e.forEach((d,g)=>{s.push(t.call(this,d,g))}),this.waitFor(s)}static mapArray(e,t){return new $e((s,d)=>{const g=e.length,v=new Array(g);let x=0;for(let j=0;j<g;j++){const q=j;t(e[q]).next(ie=>{v[q]=ie,++x,x===g&&s(v)},ie=>d(ie))}})}static doWhile(e,t){return new $e((s,d)=>{const g=()=>{!0===e()?t().next(()=>{g()},d):s()};g()})}}class Ns{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new ae,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new Oo(e,t.error)):this.T.resolve()},this.transaction.onerror=s=>{const d=Zu(s.target.error);this.T.reject(new Oo(e,d))}}static open(e,t,s,d){try{return new Ns(t,e.transaction(d,s))}catch(g){throw new Oo(t,g)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(mt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ps(t)}}class Dr{constructor(e,t,s){this.name=e,this.version=t,this.P=s,12.2===Dr.v((0,He.z$)())&&Pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return mt("SimpleDb","Removing database:",e),cs(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,He.hl)())return!1;if(Dr.S())return!0;const e=(0,He.z$)(),t=Dr.v(e),s=0<t&&t<10,d=Dr.D(e),g=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||g)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static D(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}k(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(mt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,d)=>{const g=indexedDB.open(t.name,t.version);g.onsuccess=v=>{s(v.target.result)},g.onblocked=()=>{d(new Oo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},g.onerror=v=>{const x=v.target.error;d("VersionError"===x.name?new W(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new W(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new Oo(e,x))},g.onupgradeneeded=v=>{mt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.P.O(v.target.result,g.transaction,v.oldVersion,t.version).next(()=>{mt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=s=>t.M(s)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,d){var g=this;return(0,Ie.Z)(function*(){const v="readonly"===t;let x=0;for(;;){++x;try{g.db=yield g.k(e);const j=Ns.open(g.db,e,v?"readonly":"readwrite",s),q=d(j).next(ie=>(j.R(),ie)).catch(ie=>(j.abort(ie),$e.reject(ie))).toPromise();return q.catch(()=>{}),yield j.A,q}catch(j){const q=j,ie="FirebaseError"!==q.name&&x<3;if(mt("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ie),g.close(),!ie)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Su{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return cs(this.$.delete())}}class Oo extends W{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function mo(i){return"IndexedDbTransactionError"===i.name}class Ps{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(mt("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(mt("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),cs(s)}add(e){return mt("SimpleDb","ADD",this.store.name,e,e),cs(this.store.add(e))}get(e){return cs(this.store.get(e)).next(t=>(void 0===t&&(t=null),mt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return mt("SimpleDb","DELETE",this.store.name,e),cs(this.store.delete(e))}count(){return mt("SimpleDb","COUNT",this.store.name),cs(this.store.count())}K(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const d=this.cursor(s),g=[];return this.G(d,(v,x)=>{g.push(x)}).next(()=>g)}{const d=this.store.getAll(s.range);return new $e((g,v)=>{d.onerror=x=>{v(x.target.error)},d.onsuccess=x=>{g(x.target.result)}})}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new $e((d,g)=>{s.onerror=v=>{g(v.target.error)},s.onsuccess=v=>{d(v.target.result)}})}W(e,t){mt("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const d=this.cursor(s);return this.G(d,(g,v,x)=>x.delete())}J(e,t){let s;t?s=e:(s={},t=e);const d=this.cursor(s);return this.G(d,t)}Y(e){const t=this.cursor({});return new $e((s,d)=>{t.onerror=g=>{const v=Zu(g.target.error);d(v)},t.onsuccess=g=>{const v=g.target.result;v?e(v.primaryKey,v.value).next(x=>{x?v.continue():s()}):s()}})}G(e,t){const s=[];return new $e((d,g)=>{e.onerror=v=>{g(v.target.error)},e.onsuccess=v=>{const x=v.target.result;if(!x)return void d();const j=new Su(x),q=t(x.primaryKey,x.value,j);if(q instanceof $e){const ie=q.catch(me=>(j.done(),$e.reject(me)));s.push(ie)}j.isDone?d():null===j.U?x.continue():x.continue(j.U)}}).next(()=>$e.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function cs(i){return new $e((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const d=Zu(s.target.error);t(d)}})}let za=!1;function Zu(i){const e=Dr.v((0,He.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return za||(za=!0,setTimeout(()=>{throw s},0)),s}}return i}class Gs{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;mt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{mt("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(s){mo(s)?mt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield Hr(s)}yield t.Z(1)}))}}class Yu{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.et(s,e))})()}et(e,t){const s=new Set;let d=t,g=!0;return $e.doWhile(()=>!0===g&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!s.has(v))return mt("IndexBackiller",`Processing collection: ${v}`),this.nt(e,v,d).next(x=>{d-=x,s.add(v)});g=!1})).next(()=>t-d)}nt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,s).next(g=>{const v=g.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.st(d,g)).next(x=>(mt("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,t,x))).next(()=>v.size)}))}st(e,t){let s=e;return t.changes.forEach((d,g)=>{const v=Ad(g);wa(v,s)>0&&(s=v)}),new Xn(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ss{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.it(s),this.rt=s=>t.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function vs(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ka(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function qa(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}ss.ot=-1;class Si{constructor(e,t){this.comparator=e,this.root=t||Os.EMPTY}insert(e,t){return new Si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Os.BLACK,null,null))}remove(e){return new Si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Os.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const d=this.comparator(e,s.key);if(0===d)return t+s.left.size;d<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qu(this.root,e,this.comparator,!0)}}class Qu{constructor(e,t,s,d){this.isReverse=d,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=t?s(e.key,t):1,t&&d&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(0===g){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Os{constructor(e,t,s,d,g){this.key=e,this.value=t,this.color=null!=s?s:Os.RED,this.left=null!=d?d:Os.EMPTY,this.right=null!=g?g:Os.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,d,g){return new Os(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=d?d:this.left,null!=g?g:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let d=this;const g=s(e,d.key);return d=g<0?d.copy(null,null,null,d.left.insert(e,t,s),null):0===g?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,s)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Os.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return Os.EMPTY;s=d.right.min(),d=d.copy(s.key,s.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Os.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Os.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();const e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}}Os.EMPTY=null,Os.RED=!0,Os.BLACK=!1,Os.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(i,e,t,s,d){return this}insert(i,e,t){return new Os(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(e){this.comparator=e,this.data=new Si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const d=s.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Au(this.data.getIterator())}getIteratorFrom(e){return new Au(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof er)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(0!==this.comparator(d,g))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new er(this.comparator);return t.data=e,t}}class Au{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ks(i){return i.hasNext()?i.getNext():void 0}class ii{constructor(e){this.fields=e,e.sort(Ji.comparator)}static empty(){return new ii([])}unionWith(e){let t=new er(Ji.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Fr(t)}static fromUint8Array(e){const t=function(s){let d="";for(let g=0;g<s.length;++g)d+=String.fromCharCode(s[g]);return d}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return an(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const wl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ko(i){if(D(!!i),"string"==typeof i){let e=0;const t=wl.exec(i);if(D(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Gr(i.seconds),nanos:Gr(i.nanos)}}function Gr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function k(i){return"string"==typeof i?Fr.fromBase64String(i):Fr.fromUint8Array(i)}function U(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Q(i){const e=i.mapValue.fields.__previous_value__;return U(e)?Q(e):e}function ce(i){const e=ko(i.mapValue.fields.__local_write_time__.timestampValue);return new $r(e.seconds,e.nanos)}class Oe{constructor(e,t,s,d,g,v,x,j){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=d,this.ssl=g,this.forceLongPolling=v,this.autoDetectLongPolling=x,this.useFetchStreams=j}}class We{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new We("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof We&&e.projectId===this.projectId&&e.database===this.database}}function ht(i){return null==i}function Et(i){return 0===i&&1/i==-1/0}function hn(i){return"number"==typeof i&&Number.isInteger(i)&&!Et(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const mn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},An={nullValue:"NULL_VALUE"};function Xt(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?U(i)?4:Fc(i)?9007199254740991:10:S()}function Wr(i,e){if(i===e)return!0;const t=Xt(i);if(t!==Xt(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return ce(i).isEqual(ce(e));case 3:return function(s,d){if("string"==typeof s.timestampValue&&"string"==typeof d.timestampValue&&s.timestampValue.length===d.timestampValue.length)return s.timestampValue===d.timestampValue;const g=ko(s.timestampValue),v=ko(d.timestampValue);return g.seconds===v.seconds&&g.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,k(i.bytesValue).isEqual(k(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,d){return Gr(s.geoPointValue.latitude)===Gr(d.geoPointValue.latitude)&&Gr(s.geoPointValue.longitude)===Gr(d.geoPointValue.longitude)}(i,e);case 2:return function(s,d){if("integerValue"in s&&"integerValue"in d)return Gr(s.integerValue)===Gr(d.integerValue);if("doubleValue"in s&&"doubleValue"in d){const g=Gr(s.doubleValue),v=Gr(d.doubleValue);return g===v?Et(g)===Et(v):isNaN(g)&&isNaN(v)}return!1}(i,e);case 9:return No(i.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:return function(s,d){const g=s.mapValue.fields||{},v=d.mapValue.fields||{};if(vs(g)!==vs(v))return!1;for(const x in g)if(g.hasOwnProperty(x)&&(void 0===v[x]||!Wr(g[x],v[x])))return!1;return!0}(i,e);default:return S()}var d}function ws(i,e){return void 0!==(i.values||[]).find(t=>Wr(t,e))}function Fo(i,e){if(i===e)return 0;const t=Xt(i),s=Xt(e);if(t!==s)return an(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return an(i.booleanValue,e.booleanValue);case 2:return function(d,g){const v=Gr(d.integerValue||d.doubleValue),x=Gr(g.integerValue||g.doubleValue);return v<x?-1:v>x?1:v===x?0:isNaN(v)?isNaN(x)?0:-1:1}(i,e);case 3:return _o(i.timestampValue,e.timestampValue);case 4:return _o(ce(i),ce(e));case 5:return an(i.stringValue,e.stringValue);case 6:return function(d,g){const v=k(d),x=k(g);return v.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(d,g){const v=d.split("/"),x=g.split("/");for(let j=0;j<v.length&&j<x.length;j++){const q=an(v[j],x[j]);if(0!==q)return q}return an(v.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,g){const v=an(Gr(d.latitude),Gr(g.latitude));return 0!==v?v:an(Gr(d.longitude),Gr(g.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,g){const v=d.values||[],x=g.values||[];for(let j=0;j<v.length&&j<x.length;++j){const q=Fo(v[j],x[j]);if(q)return q}return an(v.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,g){if(d===mn.mapValue&&g===mn.mapValue)return 0;if(d===mn.mapValue)return 1;if(g===mn.mapValue)return-1;const v=d.fields||{},x=Object.keys(v),j=g.fields||{},q=Object.keys(j);x.sort(),q.sort();for(let ie=0;ie<x.length&&ie<q.length;++ie){const me=an(x[ie],q[ie]);if(0!==me)return me;const Ze=Fo(v[x[ie]],j[q[ie]]);if(0!==Ze)return Ze}return an(x.length,q.length)}(i.mapValue,e.mapValue);default:throw S()}}function _o(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return an(i,e);const t=ko(i),s=ko(e),d=an(t.seconds,s.seconds);return 0!==d?d:an(t.nanos,s.nanos)}function ds(i){return xu(i)}function xu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const d=ko(s);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?k(i.bytesValue).toBase64():"referenceValue"in i?Ot.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let d="[",g=!0;for(const v of s.values||[])g?g=!1:d+=",",d+=xu(v);return d+"]"}(i.arrayValue):"mapValue"in i?function(s){const d=Object.keys(s.fields||{}).sort();let g="{",v=!0;for(const x of d)v?v=!1:g+=",",g+=`${x}:${xu(s.fields[x])}`;return g+"}"}(i.mapValue):S();var e}function oo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ru(i){return!!i&&"integerValue"in i}function yo(i){return!!i&&"arrayValue"in i}function Ra(i){return!!i&&"nullValue"in i}function Mu(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function kc(i){return!!i&&"mapValue"in i}function El(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ka(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=El(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=El(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Fc(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Il(i){return"nullValue"in i?An:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?oo(We.empty(),Ot.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:S()}function Lc(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?oo(We.empty(),Ot.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?mn:S()}function Cf(i,e){const t=Fo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Ch(i,e){const t=Fo(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Ws{constructor(e){this.value=e}static empty(){return new Ws({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!kc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=El(t)}setAll(e){let t=Ji.emptyPath(),s={},d=[];e.forEach((v,x)=>{if(!t.isImmediateParentOf(x)){const j=this.getFieldsMap(t);this.applyChanges(j,s,d),s={},d=[],t=x.popLast()}v?s[x.lastSegment()]=El(v):d.push(x.lastSegment())});const g=this.getFieldsMap(t);this.applyChanges(g,s,d)}delete(e){const t=this.field(e.popLast());kc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let d=t.mapValue.fields[e.get(s)];kc(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,s){Ka(t,(d,g)=>e[d]=g);for(const d of s)delete e[d]}clone(){return new Ws(El(this.value))}}function bf(i){const e=[];return Ka(i.fields,(t,s)=>{const d=new Ji([t]);if(kc(s)){const g=bf(s.mapValue).fields;if(0===g.length)e.push(d);else for(const v of g)e.push(d.child(v))}else e.push(d)}),new ii(e)}class si{constructor(e,t,s,d,g,v){this.key=e,this.documentType=t,this.version=s,this.readTime=d,this.data=g,this.documentState=v}static newInvalidDocument(e){return new si(e,0,un.min(),un.min(),Ws.empty(),0)}static newFoundDocument(e,t,s){return new si(e,1,t,un.min(),s,0)}static newNoDocument(e,t){return new si(e,2,t,un.min(),Ws.empty(),0)}static newUnknownDocument(e,t){return new si(e,3,t,un.min(),Ws.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ws.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ws.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=un.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Df{constructor(e,t=null,s=[],d=[],g=null,v=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=d,this.limit=g,this.startAt=v,this.endAt=x,this.ut=null}}function Vc(i,e=null,t=[],s=[],d=null,g=null,v=null){return new Df(i,e,t,s,d,g,v)}function Cl(i){const e=M(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(d=s).field.canonicalString()+d.op.toString()+ds(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(d=s).field.canonicalString()+d.dir;var d}).join(","),ht(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ds(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ds(s)).join(",")),e.ut=t}return e.ut}function Jo(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!Pu(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(s=e.filters[d]).op||!t.field.isEqual(s.field)||!Wr(t.value,s.value))return!1;var t,s;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Sh(i.startAt,e.startAt)&&Sh(i.endAt,e.endAt)}function Za(i){return Ot.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Rd(i,e){return i.filters.filter(t=>t instanceof Ai&&t.field.isEqual(e))}function Tf(i,e,t){let s=An,d=!0;for(const g of Rd(i,e)){let v=An,x=!0;switch(g.op){case"<":case"<=":v=Il(g.value);break;case"==":case"in":case">=":v=g.value;break;case">":v=g.value,x=!1;break;case"!=":case"not-in":v=An}Cf({value:s,inclusive:d},{value:v,inclusive:x})<0&&(s=v,d=x)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const v=t.position[g];Cf({value:s,inclusive:d},{value:v,inclusive:t.inclusive})<0&&(s=v,d=t.inclusive);break}return{value:s,inclusive:d}}function Md(i,e,t){let s=mn,d=!0;for(const g of Rd(i,e)){let v=mn,x=!0;switch(g.op){case">=":case">":v=Lc(g.value),x=!1;break;case"==":case"in":case"<=":v=g.value;break;case"<":v=g.value,x=!1;break;case"!=":case"not-in":v=mn}Ch({value:s,inclusive:d},{value:v,inclusive:x})>0&&(s=v,d=x)}if(null!==t)for(let g=0;g<i.orderBy.length;++g)if(i.orderBy[g].field.isEqual(e)){const v=t.position[g];Ch({value:s,inclusive:d},{value:v,inclusive:t.inclusive})>0&&(s=v,d=t.inclusive);break}return{value:s,inclusive:d}}class Ai extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,s):new Yl(e,t,s):"array-contains"===t?new xf(e,s):"in"===t?new Dh(e,s):"not-in"===t?new Th(e,s):"array-contains-any"===t?new Bp(e,s):new Ai(e,t,s)}static ct(e,t,s){return"in"===t?new Sf(e,s):new Af(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(Fo(t,this.value)):null!==t&&Xt(this.value)===Xt(t)&&this.at(Fo(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return S()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Yl extends Ai{constructor(e,t,s){super(e,t,s),this.key=Ot.fromName(s.referenceValue)}matches(e){const t=Ot.comparator(e.key,this.key);return this.at(t)}}class Sf extends Ai{constructor(e,t){super(e,"in",t),this.keys=bh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Af extends Ai{constructor(e,t){super(e,"not-in",t),this.keys=bh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bh(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Ot.fromName(s.referenceValue))}class xf extends Ai{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yo(t)&&ws(t.arrayValue,this.value)}}class Dh extends Ai{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ws(this.value.arrayValue,t)}}class Th extends Ai{constructor(e,t){super(e,"not-in",t)}matches(e){if(ws(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ws(this.value.arrayValue,t)}}class Bp extends Ai{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>ws(this.value.arrayValue,s))}}class Nu{constructor(e,t){this.position=e,this.inclusive=t}}class Ql{constructor(e,t="asc"){this.field=e,this.dir=t}}function Pu(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Ou(i,e,t){let s=0;for(let d=0;d<i.position.length;d++){const g=e[d],v=i.position[d];if(s=g.field.isKeyField()?Ot.comparator(Ot.fromName(v.referenceValue),t.key):Fo(v,t.data.field(g.field)),"desc"===g.dir&&(s*=-1),0!==s)break}return s}function Sh(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Wr(i.position[t],e.position[t]))return!1;return!0}class Ya{constructor(e,t=null,s=[],d=[],g=null,v="F",x=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=d,this.limit=g,this.limitType=v,this.startAt=x,this.endAt=j,this.lt=null,this.ft=null}}function jp(i,e,t,s,d,g,v,x){return new Ya(i,e,t,s,d,g,v,x)}function bl(i){return new Ya(i)}function Uc(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Dl(i){for(const e of i.filters)if(e.ht())return e.field;return null}function Bc(i){return null!==i.collectionGroup}function Ju(i){const e=M(i);if(null===e.lt){e.lt=[];const t=Dl(e),s=Uc(e);if(null!==t&&null===s)t.isKeyField()||e.lt.push(new Ql(t)),e.lt.push(new Ql(Ji.keyField(),"asc"));else{let d=!1;for(const g of e.explicitOrderBy)e.lt.push(g),g.field.isKeyField()&&(d=!0);if(!d){const g=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Ql(Ji.keyField(),g))}}}return e.lt}function Gn(i){const e=M(i);if(!e.ft)if("F"===e.limitType)e.ft=Vc(e.path,e.collectionGroup,Ju(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const g of Ju(e))t.push(new Ql(g.field,"desc"===g.dir?"asc":"desc"));const s=e.endAt?new Nu(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new Nu(e.startAt.position,e.startAt.inclusive):null;e.ft=Vc(e.path,e.collectionGroup,t,e.filters,e.limit,s,d)}return e.ft}function Tr(i,e,t){return new Ya(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Bn(i,e){return Jo(Gn(i),Gn(e))&&i.limitType===e.limitType}function Xu(i){return`${Cl(Gn(i))}|lt:${i.limitType}`}function ir(i){return`Query(target=${function xd(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${ds(s.value)}`;var s}).join(", ")}]`),ht(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>ds(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>ds(t)).join(",")),`Target(${e})`}(Gn(i))}; limitType=${i.limitType})`}function Jl(i,e){return e.isFoundDocument()&&function(t,s){const d=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):Ot.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,s){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===s.data.field(d.field))return!1;return!0}(i,e)&&function(t,s){for(const d of t.filters)if(!d.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(d,g,v){const x=Ou(d,g,v);return d.inclusive?x<=0:x<0}(t.startAt,Ju(t),s)||t.endAt&&!function(d,g,v){const x=Ou(d,g,v);return d.inclusive?x>=0:x>0}(t.endAt,Ju(t),s)));var t,s}function Qa(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Ma(i){return(e,t)=>{let s=!1;for(const d of Ju(i)){const g=Ah(d,e,t);if(0!==g)return g;s=s||d.field.isKeyField()}return 0}}function Ah(i,e,t){const s=i.field.isKeyField()?Ot.comparator(e.key,t.key):function(d,g,v){const x=g.data.field(d),j=v.data.field(d);return null!==x&&null!==j?Fo(x,j):S()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return S()}}function Qr(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Et(e)?"-0":e}}function Wn(i){return{integerValue:""+i}}function Lo(i,e){return hn(e)?Wn(e):Qr(i,e)}class jc{constructor(){this._=void 0}}function Rf(i,e,t){return i instanceof el?function(s,d){const g={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return d&&(g.fields.__previous_value__=d),{mapValue:g}}(t,e):i instanceof ec?Mf(i,e):i instanceof ea?Nd(i,e):function(s,d){const g=Xl(s,d),v=Pd(g)+Pd(s._t);return Ru(g)&&Ru(s._t)?Wn(v):Qr(s.wt,v)}(i,e)}function Xo(i,e,t){return i instanceof ec?Mf(i,e):i instanceof ea?Nd(i,e):t}function Xl(i,e){return i instanceof Ja?Ru(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class el extends jc{}class ec extends jc{constructor(e){super(),this.elements=e}}function Mf(i,e){const t=Nf(e);for(const s of i.elements)t.some(d=>Wr(d,s))||t.push(s);return{arrayValue:{values:t}}}class ea extends jc{constructor(e){super(),this.elements=e}}function Nd(i,e){let t=Nf(e);for(const s of i.elements)t=t.filter(d=>!Wr(d,s));return{arrayValue:{values:t}}}class Ja extends jc{constructor(e,t){super(),this.wt=e,this._t=t}}function Pd(i){return Gr(i.integerValue||i.doubleValue)}function Nf(i){return yo(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Tl{constructor(e,t){this.field=e,this.transform=t}}class xh{constructor(e,t){this.version=e,this.transformResults=t}}class xi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xi}static exists(e){return new xi(void 0,e)}static updateTime(e){return new xi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $c(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class xr{}function tr(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new tl(i.key,xi.none()):new ku(i.key,i.data,xi.none());{const t=i.data,s=Ws.empty();let d=new er(Ji.comparator);for(let g of e.fields)if(!d.has(g)){let v=t.field(g);null===v&&g.length>1&&(g=g.popLast(),v=t.field(g)),null===v?s.delete(g):s.set(g,v),d=d.add(g)}return new Fs(i.key,s,new ii(d.toArray()),xi.none())}}function Od(i,e,t){i instanceof ku?function(s,d,g){const v=s.value.clone(),x=Ls(s.fieldTransforms,d,g.transformResults);v.setAll(x),d.convertToFoundDocument(g.version,v).setHasCommittedMutations()}(i,e,t):i instanceof Fs?function(s,d,g){if(!$c(s.precondition,d))return void d.convertToUnknownDocument(g.version);const v=Ls(s.fieldTransforms,d,g.transformResults),x=d.data;x.setAll(Pf(s)),x.setAll(v),d.convertToFoundDocument(g.version,x).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function hu(i,e,t,s){return i instanceof ku?function(d,g,v,x){if(!$c(d.precondition,g))return v;const j=d.value.clone(),q=Hp(d.fieldTransforms,x,g);return j.setAll(q),g.convertToFoundDocument(g.version,j).setHasLocalMutations(),null}(i,e,t,s):i instanceof Fs?function(d,g,v,x){if(!$c(d.precondition,g))return v;const j=Hp(d.fieldTransforms,x,g),q=g.data;return q.setAll(Pf(d)),q.setAll(j),g.convertToFoundDocument(g.version,q).setHasLocalMutations(),null===v?null:v.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ie=>ie.field))}(i,e,t,s):(v=t,$c(i.precondition,g=e)?(g.convertToNoDocument(g.version).setHasLocalMutations(),null):v);var g,v}function kd(i,e){let t=null;for(const s of i.fieldTransforms){const d=e.data.field(s.field),g=Xl(s.transform,d||null);null!=g&&(null===t&&(t=Ws.empty()),t.set(s.field,g))}return t||null}function Xa(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&No(t,s,(d,g)=>function tc(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof ec&&s instanceof ec||t instanceof ea&&s instanceof ea?No(t.elements,s.elements,Wr):t instanceof Ja&&s instanceof Ja?Wr(t._t,s._t):t instanceof el&&s instanceof el);var t,s}(d,g))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class ku extends xr{constructor(e,t,s,d=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class Fs extends xr{constructor(e,t,s,d,g=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=d,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Pf(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function Ls(i,e,t){const s=new Map;D(i.length===t.length);for(let d=0;d<t.length;d++){const g=i[d],v=g.transform,x=e.data.field(g.field);s.set(g.field,Xo(v,x,t[d]))}return s}function Hp(i,e,t){const s=new Map;for(const d of i){const g=d.transform,v=t.data.field(d.field);s.set(d.field,Rf(g,v,e))}return s}class tl extends xr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fu extends xr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vo{constructor(e){this.count=e}}var Xi,fr;function Hc(i){switch(i){default:return S();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function $i(i){if(void 0===i)return Pr("GRPC error has no .code"),N.UNKNOWN;switch(i){case Xi.OK:return N.OK;case Xi.CANCELLED:return N.CANCELLED;case Xi.UNKNOWN:return N.UNKNOWN;case Xi.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case Xi.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case Xi.INTERNAL:return N.INTERNAL;case Xi.UNAVAILABLE:return N.UNAVAILABLE;case Xi.UNAUTHENTICATED:return N.UNAUTHENTICATED;case Xi.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case Xi.NOT_FOUND:return N.NOT_FOUND;case Xi.ALREADY_EXISTS:return N.ALREADY_EXISTS;case Xi.PERMISSION_DENIED:return N.PERMISSION_DENIED;case Xi.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case Xi.ABORTED:return N.ABORTED;case Xi.OUT_OF_RANGE:return N.OUT_OF_RANGE;case Xi.UNIMPLEMENTED:return N.UNIMPLEMENTED;case Xi.DATA_LOSS:return N.DATA_LOSS;default:return S()}}(fr=Xi||(Xi={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";class Uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[d,g]of s)if(this.equalsFn(d,e))return g}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),d=this.inner[s];if(void 0===d)return this.inner[s]=[[e,t]],void this.innerSize++;for(let g=0;g<d.length;g++)if(this.equalsFn(d[g][0],e))return void(d[g]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let d=0;d<s.length;d++)if(this.equalsFn(s[d][0],e))return 1===s.length?delete this.inner[t]:s.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(t,s)=>{for(const[d,g]of s)e(d,g)})}isEmpty(){return qa(this.inner)}size(){return this.innerSize}}const Gc=new Si(Ot.comparator);function ta(){return Gc}const Fd=new Si(Ot.comparator);function nc(...i){let e=Fd;for(const t of i)e=e.insert(t.key,t);return e}function nr(i){let e=Fd;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Bo(){return Lu()}function Rh(){return Lu()}function Lu(){return new Uo(i=>i.toString(),(i,e)=>i.isEqual(e))}const Wc=new Si(Ot.comparator),nl=new er(Ot.comparator);function In(...i){let e=nl;for(const t of i)e=e.add(t);return e}const rc=new er(an);function xn(){return rc}class na{constructor(e,t,s,d,g){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=d,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,t)),new na(un.min(),s,xn(),ta(),In())}}class fu{constructor(e,t,s,d,g){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=d,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,t){return new fu(Fr.EMPTY_BYTE_STRING,t,In(),In(),In())}}class Ld{constructor(e,t,s,d){this.gt=e,this.removedTargetIds=t,this.key=s,this.yt=d}}class oi{constructor(e,t){this.targetId=e,this.It=t}}class Vd{constructor(e,t,s=Fr.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=d}}class Mh{constructor(){this.Tt=0,this.Et=ic(),this.At=Fr.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=In(),t=In(),s=In();return this.Et.forEach((d,g)=>{switch(g){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:s=s.add(d);break;default:S()}}),new fu(this.At,this.Rt,e,t,s)}Dt(){this.bt=!1,this.Et=ic()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class vo{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=ta(),this.Bt=Vu(),this.Lt=new er(an)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const s=this.Qt(t);switch(e.state){case 0:this.jt(t)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(s.Ot(),s.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),s.Vt(e.resumeToken));break;default:S()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((s,d)=>{this.jt(d)&&t(d)})}zt(e){const t=e.targetId,s=e.It.count,d=this.Ht(t);if(d){const g=d.target;if(Za(g))if(0===s){const v=new Ot(g.path);this.Kt(t,v,si.newNoDocument(v,un.min()))}else D(1===s);else this.Jt(t)!==s&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((g,v)=>{const x=this.Ht(v);if(x){if(g.current&&Za(x.target)){const j=new Ot(x.target.path);null!==this.$t.get(j)||this.Xt(v,j)||this.Kt(v,j,si.newNoDocument(j,e))}g.vt&&(t.set(v,g.St()),g.Dt())}});let s=In();this.Bt.forEach((g,v)=>{let x=!0;v.forEachWhile(j=>{const q=this.Ht(j);return!q||2===q.purpose||(x=!1,!1)}),x&&(s=s.add(g))}),this.$t.forEach((g,v)=>v.setReadTime(e));const d=new na(e,t,this.Lt,this.$t,s);return this.$t=ta(),this.Bt=Vu(),this.Lt=new er(an),d}qt(e,t){if(!this.jt(e))return;const s=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,s),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,s){if(!this.jt(e))return;const d=this.Qt(e);this.Xt(e,t)?d.Ct(t,1):d.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),s&&(this.$t=this.$t.insert(t,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Mh,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new er(an),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||mt("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Mh),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Vu(){return new Si(Ot.comparator)}function ic(){return new Si(Ot.comparator)}const Nh={asc:"ASCENDING",desc:"DESCENDING"},pu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zc{constructor(e,t){this.databaseId=e,this.dt=t}}function Sl(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ud(i,e){return i.dt?e.toBase64():e.toUint8Array()}function Of(i,e){return Sl(i,e.toTimestamp())}function Ri(i){return D(!!i),un.fromTimestamp(function(e){const t=ko(e);return new $r(t.seconds,t.nanos)}(i))}function Al(i,e){return(t=i,new Jn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function sc(i){const e=Jn.fromString(i);return D(kh(e)),e}function gu(i,e){return Al(i.databaseId,e.path)}function hs(i,e){const t=sc(e);if(t.get(1)!==i.databaseId.projectId)throw new W(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new W(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Ot(T(t))}function E(i,e){return Al(i.databaseId,e)}function p(i){const e=sc(i);return 4===e.length?Jn.emptyPath():T(e)}function m(i){return new Jn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function T(i){return D(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function G(i,e,t){return{name:gu(i,e),fields:t.value.mapValue.fields}}function ee(i,e,t){const s=hs(i,e.name),d=Ri(e.updateTime),g=new Ws({mapValue:{fields:e.fields}}),v=si.newFoundDocument(s,d,g);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Dt(i,e){let t;if(e instanceof ku)t={update:G(i,e.key,e.value)};else if(e instanceof tl)t={delete:gu(i,e.key)};else if(e instanceof Fs)t={update:G(i,e.key,e.data),updateMask:Oh(e.fieldMask)};else{if(!(e instanceof Fu))return S();t={verify:gu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(d,g){const v=g.transform;if(v instanceof el)return{fieldPath:g.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof ec)return{fieldPath:g.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof ea)return{fieldPath:g.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Ja)return{fieldPath:g.field.canonicalString(),increment:v._t};throw S()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:Of(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:S()),t;var d}function Lt(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?xi.updateTime(Ri(d.updateTime)):void 0!==d.exists?xi.exists(d.exists):xi.none():xi.none(),s=e.updateTransforms?e.updateTransforms.map(d=>function(g,v){let x=null;"setToServerValue"in v?(D("REQUEST_TIME"===v.setToServerValue),x=new el):"appendMissingElements"in v?x=new ec(v.appendMissingElements.values||[]):"removeAllFromArray"in v?x=new ea(v.removeAllFromArray.values||[]):"increment"in v?x=new Ja(g,v.increment):S();const j=Ji.fromServerFormat(v.fieldPath);return new Tl(j,x)}(i,d)):[];var d;if(e.update){const d=hs(i,e.update.name),g=new Ws({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new ii((e.updateMask.fieldPaths||[]).map(q=>Ji.fromServerFormat(q)));return new Fs(d,g,v,t,s)}return new ku(d,g,t,s)}if(e.delete){const d=hs(i,e.delete);return new tl(d,t)}if(e.verify){const d=hs(i,e.verify);return new Fu(d,t)}return S()}function ln(i,e){return{documents:[E(i,e.path)]}}function es(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=E(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=E(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const d=function(j){if(0===j.length)return;const q=j.map(ie=>function(me){if("=="===me.op){if(Mu(me.value))return{unaryFilter:{field:mu(me.field),op:"IS_NAN"}};if(Ra(me.value))return{unaryFilter:{field:mu(me.field),op:"IS_NULL"}}}else if("!="===me.op){if(Mu(me.value))return{unaryFilter:{field:mu(me.field),op:"IS_NOT_NAN"}};if(Ra(me.value))return{unaryFilter:{field:mu(me.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mu(me.field),op:oc(me.op),value:me.value}}}(ie));return 1===q.length?q[0]:{compositeFilter:{op:"AND",filters:q}}}(e.filters);d&&(t.structuredQuery.where=d);const g=function(j){if(0!==j.length)return j.map(q=>{return{field:mu((ie=q).field),direction:Ea(ie.dir)};var ie})}(e.orderBy);g&&(t.structuredQuery.orderBy=g);const v=(q=e.limit,i.dt||ht(q)?q:{value:q});var q,x,j;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function ao(i){let e=p(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let d=null;if(s>0){D(1===s);const ie=t.from[0];ie.allDescendants?d=ie.collectionId:e=e.child(ie.collectionId)}let g=[];t.where&&(g=qc(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(ie=>{return new Ql(rl((me=ie).field),function(Ze){switch(Ze){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(me.direction));var me}));let x=null;t.limit&&(x=function(ie){let me;return me="object"==typeof ie?ie.value:ie,ht(me)?null:me}(t.limit));let j=null;var ie;t.startAt&&(j=new Nu((ie=t.startAt).values||[],!!ie.before));let q=null;return t.endAt&&(q=function(ie){return new Nu(ie.values||[],!ie.before)}(t.endAt)),jp(e,d,v,g,x,"F",j,q)}function qc(i){return i?void 0!==i.unaryFilter?[Ph(i)]:void 0!==i.fieldFilter?[Bd(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>qc(e)).reduce((e,t)=>e.concat(t)):S():[]}function Ea(i){return Nh[i]}function oc(i){return pu[i]}function mu(i){return{fieldPath:i.canonicalString()}}function rl(i){return Ji.fromServerFormat(i.fieldPath)}function Bd(i){return Ai.create(rl(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(i.fieldFilter.op),i.fieldFilter.value)}function Ph(i){switch(i.unaryFilter.op){case"IS_NAN":const e=rl(i.unaryFilter.field);return Ai.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rl(i.unaryFilter.field);return Ai.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rl(i.unaryFilter.field);return Ai.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=rl(i.unaryFilter.field);return Ai.create(d,"!=",{nullValue:"NULL_VALUE"});default:return S()}}function Oh(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function kh(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function jo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=jd(e)),e=ra(i.get(t),e);return jd(e)}function ra(i,e){let t=e;const s=i.length;for(let d=0;d<s;d++){const g=i.charAt(d);switch(g){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=g}}return t}function jd(i){return i+"\x01\x01"}function eu(i){const e=i.length;if(D(e>=2),2===e)return D("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Jn.emptyPath();const t=e-2,s=[];let d="";for(let g=0;g<e;){const v=i.indexOf("\x01",g);switch((v<0||v>t)&&S(),i.charAt(v+1)){case"\x01":const x=i.substring(g,v);let j;0===d.length?j=x:(d+=x,j=d,d=""),s.push(j);break;case"\x10":d+=i.substring(g,v),d+="\0";break;case"\x11":d+=i.substring(g,v+1);break;default:S()}g=v+2}return new Jn(s)}const $d=["userId","batchId"];function ac(i,e){return[i,jo(e)]}function uc(i,e,t){return[i,jo(e),t]}const Zc={},Hd=["prefixPath","collectionGroup","readTime","documentId"],xl=["prefixPath","collectionGroup","documentId"],Kg=["collectionGroup","readTime","prefixPath","documentId"],Yc=["canonicalId","targetId"],Gd=["targetId","path"],qg=["path","targetId"],Xm=["collectionId","parent"],Qc=["indexId","uid"],Fh=["uid","sequenceNumber"],Gp=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Lh=["indexId","uid","orderedDocumentKey"],lc=["userId","collectionPath","documentId"],Vh=["userId","collectionPath","largestBatchId"],Zg=["userId","collectionGroup","largestBatchId"],Jr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Na=[...Jr,"documentOverlays"],Jc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Wd=Jc,Wp=[...Wd,"indexConfiguration","indexState","indexEntries"];class Xc extends Ih{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function yi(i,e){const t=M(i);return Dr.N(t.ee,e)}class kf{constructor(e,t,s,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=d}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const g=this.mutations[d];g.key.isEqual(e.key)&&Od(g,e,s[d])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=hu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=hu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Rh();return this.mutations.forEach(d=>{const g=e.get(d.key),v=g.overlayedDocument;let x=this.applyToLocalView(v,g.mutatedFields);x=t.has(d.key)?null:x;const j=tr(v,x);null!==j&&s.set(d.key,j),v.isValidDocument()||v.convertToNoDocument(un.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),In())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(t,s)=>Xa(t,s))&&No(this.baseMutations,e.baseMutations,(t,s)=>Xa(t,s))}}class Uu{constructor(e,t,s,d){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=d}static from(e,t,s){D(e.mutations.length===s.length);let d=Wc;const g=e.mutations;for(let v=0;v<g.length;v++)d=d.insert(g[v].key,s[v].version);return new Uu(e,t,s,d)}}class Uh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tu{constructor(e,t,s,d,g=un.min(),v=un.min(),x=Fr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=d,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=x}withSequenceNumber(e){return new tu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new tu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ff{constructor(e){this.ne=e}}function zp(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Kp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:gu(d=i.ne,(g=e).key),fields:g.data.value.mapValue.fields,updateTime:Sl(d,g.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:cc(e.version)};else{if(!e.isUnknownDocument())return S();s.unknownDocument={path:t.path.toArray(),version:cc(e.version)}}var d,g;return s}function Kp(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function cc(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ed(i){const e=new $r(i.seconds,i.nanoseconds);return un.fromTimestamp(e)}function dc(i,e){const t=(e.baseMutations||[]).map(g=>Lt(i.ne,g));for(let g=0;g<e.mutations.length-1;++g){const v=e.mutations[g];g+1<e.mutations.length&&void 0!==e.mutations[g+1].transform&&(v.updateTransforms=e.mutations[g+1].transform.fieldTransforms,e.mutations.splice(g+1,1),++g)}const s=e.mutations.map(g=>Lt(i.ne,g)),d=$r.fromMillis(e.localWriteTimeMs);return new kf(e.batchId,d,t,s)}function Bh(i){const e=ed(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?ed(i.lastLimboFreeSnapshotVersion):un.min();let s;var d;return void 0!==i.query.documents?(D(1===(d=i.query).documents.length),s=Gn(bl(p(d.documents[0])))):s=Gn(ao(i.query)),new tu(s,i.targetId,0,i.lastListenSequenceNumber,e,t,Fr.fromBase64String(i.resumeToken))}function Yg(i,e){const t=cc(e.snapshotVersion),s=cc(e.lastLimboFreeSnapshotVersion);let d;d=Za(e.target)?ln(i.ne,e.target):es(i.ne,e.target);const g=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Cl(e.target),readTime:t,resumeToken:g,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:d}}function Pa(i){const e=ao({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Tr(e,e.limit,"L"):e}function Lf(i,e){return new Uh(e.largestBatchId,Lt(i.ne,e.overlayMutation))}function qp(i,e){const t=e.path.lastSegment();return[i,jo(e.path.popLast()),t]}function Qg(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:cc(s.readTime),documentKey:jo(s.documentKey.path),largestBatchId:s.largestBatchId}}class e_{getBundleMetadata(e,t){return Jg(e).get(t).next(s=>{if(s)return{id:(d=s).bundleId,createTime:ed(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return Jg(e).put({bundleId:(s=t).id,createTime:cc(Ri(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return Xg(e).get(t).next(s=>{if(s)return{name:(d=s).name,query:Pa(d.bundledQuery),readTime:ed(d.readTime)};var d})}saveNamedQuery(e,t){return Xg(e).put({name:(s=t).name,readTime:cc(Ri(s.readTime)),bundledQuery:s.bundledQuery});var s}}function Jg(i){return yi(i,"bundles")}function Xg(i){return yi(i,"namedQueries")}class jh{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new jh(e,t.uid||"")}getOverlay(e,t){return hc(e).get(qp(this.userId,t)).next(s=>s?Lf(this.wt,s):null)}getOverlays(e,t){const s=Bo();return $e.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){const d=[];return s.forEach((g,v)=>{const x=new Uh(t,v);d.push(this.ie(e,x))}),$e.waitFor(d)}removeOverlaysForBatchId(e,t,s){const d=new Set;t.forEach(v=>d.add(jo(v.getCollectionPath())));const g=[];return d.forEach(v=>{const x=IDBKeyRange.bound([this.userId,v,s],[this.userId,v,s+1],!1,!0);g.push(hc(e).W("collectionPathOverlayIndex",x))}),$e.waitFor(g)}getOverlaysForCollection(e,t,s){const d=Bo(),g=jo(t),v=IDBKeyRange.bound([this.userId,g,s],[this.userId,g,Number.POSITIVE_INFINITY],!0);return hc(e).K("collectionPathOverlayIndex",v).next(x=>{for(const j of x){const q=Lf(this.wt,j);d.set(q.getKey(),q)}return d})}getOverlaysForCollectionGroup(e,t,s,d){const g=Bo();let v;const x=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hc(e).J({index:"collectionGroupOverlayIndex",range:x},(j,q,ie)=>{const me=Lf(this.wt,q);g.size()<d||me.largestBatchId===v?(g.set(me.getKey(),me),v=me.largestBatchId):ie.done()}).next(()=>g)}ie(e,t){return hc(e).put(function(s,d,g){const[v,x,j]=qp(d,g.mutation.key);return{userId:d,collectionPath:x,documentId:j,collectionGroup:g.mutation.key.getCollectionGroup(),largestBatchId:g.largestBatchId,overlayMutation:Dt(s.ne,g.mutation)}}(this.wt,this.userId,t))}}function hc(i){return yi(i,"documentOverlays")}class Rl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Gr(e.integerValue));else if("doubleValue"in e){const s=Gr(e.doubleValue);isNaN(s)?this.ce(t,13):(this.ce(t,15),Et(s)?t.ae(0):t.ae(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ce(t,20),"string"==typeof s?t.he(s):(t.he(`${s.seconds||""}`),t.ae(s.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(k(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ce(t,45),t.ae(s.latitude||0),t.ae(s.longitude||0)}else"mapValue"in e?Fc(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):S()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const s=e.fields||{};this.ce(t,55);for(const d of Object.keys(s))this.le(d,t),this.oe(s[d],t)}me(e,t){const s=e.values||[];this.ce(t,50);for(const d of s)this.oe(d,t)}_e(e,t){this.ce(t,37),Ot.fromName(e).path.forEach(s=>{this.ce(t,60),this.ge(s,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function em(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Rn(i){const e=64-function(t){let s=0;for(let d=0;d<8;++d){const g=em(255&t[d]);if(s+=g,8!==g)break}return s}(i);return Math.ceil(e/8)}Rl.ye=new Rl;class tm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ie(s.value),s=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ie(s);else if(s<2048)this.Ie(960|s>>>6),this.Ie(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s);else{const d=t.codePointAt(0);this.Ie(240|d>>>18),this.Ie(128|63&d>>>12),this.Ie(128|63&d>>>6),this.Ie(128|63&d)}}this.Te()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const d=t.codePointAt(0);this.Ae(240|d>>>18),this.Ae(128|63&d>>>12),this.Ae(128|63&d>>>6),this.Ae(128|63&d)}}this.Re()}ve(e){const t=this.Ve(e),s=Rn(t);this.Se(1+s),this.buffer[this.position++]=255&s;for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=255&t[d]}De(e){const t=this.Ve(e),s=Rn(t);this.Se(1+s),this.buffer[this.position++]=~(255&s);for(let d=t.length-s;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(d){const g=new DataView(new ArrayBuffer(8));return g.setFloat64(0,d,!1),new Uint8Array(g.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let d=1;d<t.length;++d)t[d]^=s?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const d=new Uint8Array(s);d.set(this.buffer),this.buffer=d}}class Vf{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class Zp{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Ml{constructor(){this.Me=new tm,this.Fe=new Vf(this.Me),this.$e=new Zp(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class $o{constructor(e,t,s,d){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=d}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new $o(this.indexId,this.documentKey,this.arrayValue,s)}}function fc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Yp(i.arrayValue,e.arrayValue),0!==t?t:(t=Yp(i.directionalValue,e.directionalValue),0!==t?t:Ot.comparator(i.documentKey,e.documentKey)))}function Yp(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class $h{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const s=t;s.ht()?this.Ke=s:this.qe.push(s)}}Ge(e){const t=Oc(e);if(void 0!==t&&!this.Qe(t))return!1;const s=Po(e);let d=0,g=0;for(;d<s.length&&this.Qe(s[d]);++d);if(d===s.length)return!0;if(void 0!==this.Ke){const v=s[d];if(!this.je(this.Ke,v)||!this.We(this.Ue[g++],v))return!1;++d}for(;d<s.length;++d){const v=s[d];if(g>=this.Ue.length||!this.We(this.Ue[g++],v))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Nl{constructor(){this.ze=new Hh}addToCollectionParentIndex(e,t){return this.ze.add(t),$e.resolve()}getCollectionParents(e,t){return $e.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return $e.resolve()}deleteFieldIndex(e,t){return $e.resolve()}getDocumentsMatchingTarget(e,t){return $e.resolve(null)}getIndexType(e,t){return $e.resolve(0)}getFieldIndexes(e,t){return $e.resolve([])}getNextCollectionGroupToUpdate(e){return $e.resolve(null)}getMinOffset(e,t){return $e.resolve(Xn.min())}getMinOffsetFromCollectionGroup(e,t){return $e.resolve(Xn.min())}updateCollectionGroup(e,t,s){return $e.resolve()}updateIndexEntries(e,t){return $e.resolve()}}class Hh{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t]||new er(Jn.comparator),g=!d.has(s);return this.index[t]=d.add(s),g}has(e){const t=e.lastSegment(),s=e.popLast(),d=this.index[t];return d&&d.has(s)}getEntries(e){return(this.index[e]||new er(Jn.comparator)).toArray()}}const Gh=new Uint8Array(0);class Qp{constructor(e,t){this.user=e,this.databaseId=t,this.He=new Hh,this.Je=new Uo(s=>Cl(s),(s,d)=>Jo(s,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const s=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const g={collectionId:s,parent:jo(d)};return nm(e).put(g)}return $e.resolve()}getCollectionParents(e,t){const s=[],d=IDBKeyRange.bound([t,""],[yl(t),""],!1,!0);return nm(e).K(d).next(g=>{for(const v of g){if(v.collectionId!==t)break;s.push(eu(v.parent))}return s})}addFieldIndex(e,t){const s=Wh(e),d={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var v;delete d.indexId;const g=s.add(d);if(t.indexState){const v=Ol(e);return g.next(x=>{v.put(Qg(x,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return g.next()}deleteFieldIndex(e,t){const s=Wh(e),d=Ol(e),g=Pl(e);return s.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>g.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=Pl(e);let d=!0;const g=new Map;return $e.forEach(this.Ye(t),v=>this.Xe(e,v).next(x=>{d&&(d=!!x),g.set(v,x)})).next(()=>{if(d){let v=In();const x=[];return $e.forEach(g,(j,q)=>{var ie;mt("IndexedDbIndexManager",`Using index ${ie=j,`id=${ie.indexId}|cg=${ie.collectionGroup}|f=${ie.fields.map(zr=>`${zr.fieldPath}:${zr.kind}`).join(",")}`} to execute ${Cl(t)}`);const me=function(zr,Co){const os=Oc(Co);if(void 0===os)return null;for(const Us of Rd(zr,os.fieldPath))switch(Us.op){case"array-contains-any":return Us.value.arrayValue.values||[];case"array-contains":return[Us.value]}return null}(q,j),Ze=function(zr,Co){const os=new Map;for(const Us of Po(Co))for(const Da of Rd(zr,Us.fieldPath))switch(Da.op){case"==":case"in":os.set(Us.fieldPath.canonicalString(),Da.value);break;case"not-in":case"!=":return os.set(Us.fieldPath.canonicalString(),Da.value),Array.from(os.values())}return null}(q,j),dt=function(zr,Co){const os=[];let Us=!0;for(const Da of Po(Co)){const Gg=0===Da.kind?Tf(zr,Da.fieldPath,zr.startAt):Md(zr,Da.fieldPath,zr.startAt);os.push(Gg.value),Us&&(Us=Gg.inclusive)}return new Nu(os,Us)}(q,j),yt=function(zr,Co){const os=[];let Us=!0;for(const Da of Po(Co)){const Gg=0===Da.kind?Md(zr,Da.fieldPath,zr.endAt):Tf(zr,Da.fieldPath,zr.endAt);os.push(Gg.value),Us&&(Us=Gg.inclusive)}return new Nu(os,Us)}(q,j),qt=this.Ze(j,q,dt),fn=this.Ze(j,q,yt),ai=this.tn(j,q,Ze),fs=this.en(j.indexId,me,qt,dt.inclusive,fn,yt.inclusive,ai);return $e.forEach(fs,zr=>s.j(zr,t.limit).next(Co=>{Co.forEach(os=>{const Us=Ot.fromSegments(os.documentKey);v.has(Us)||(v=v.add(Us),x.push(Us))})}))}).next(()=>x)}return $e.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,s,d,g,v,x){const j=(null!=t?t.length:1)*Math.max(s.length,g.length),q=j/(null!=t?t.length:1),ie=[];for(let me=0;me<j;++me){const Ze=t?this.nn(t[me/q]):Gh,dt=this.sn(e,Ze,s[me%q],d),yt=this.rn(e,Ze,g[me%q],v),qt=x.map(fn=>this.sn(e,Ze,fn,!0));ie.push(...this.createRange(dt,yt,qt))}return ie}sn(e,t,s,d){const g=new $o(e,Ot.empty(),t,s);return d?g:g.Le()}rn(e,t,s,d){const g=new $o(e,Ot.empty(),t,s);return d?g.Le():g}Xe(e,t){const s=new $h(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(g=>{let v=null;for(const x of g)s.Ge(x)&&(!v||x.fields.length>v.fields.length)&&(v=x);return v})}getIndexType(e,t){let s=2;return $e.forEach(this.Ye(t),d=>this.Xe(e,d).next(g=>{g?0!==s&&g.fields.length<function(v){let x=new er(Ji.comparator),j=!1;for(const q of v.filters){const ie=q;ie.field.isKeyField()||("array-contains"===ie.op||"array-contains-any"===ie.op?j=!0:x=x.add(ie.field))}for(const q of v.orderBy)q.field.isKeyField()||(x=x.add(q.field));return x.size+(j?1:0)}(d)&&(s=1):s=0})).next(()=>s)}on(e,t){const s=new Ml;for(const d of Po(e)){const g=t.data.field(d.fieldPath);if(null==g)return null;const v=s.Be(d.kind);Rl.ye.re(g,v)}return s.Oe()}nn(e){const t=new Ml;return Rl.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const s=new Ml;return Rl.ye.re(oo(this.databaseId,t),s.Be(function(d){const g=Po(d);return 0===g.length?0:g[g.length-1].kind}(e))),s.Oe()}tn(e,t,s){if(null===s)return[];let d=[];d.push(new Ml);let g=0;for(const v of Po(e)){const x=s[g++];for(const j of d)if(this.cn(t,v.fieldPath)&&yo(x))d=this.an(d,v,x);else{const q=j.Be(v.kind);Rl.ye.re(x,q)}}return this.hn(d)}Ze(e,t,s){return this.tn(e,t,s.position)}hn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Oe();return t}an(e,t,s){const d=[...e],g=[];for(const v of s.arrayValue.values||[])for(const x of d){const j=new Ml;j.seed(x.Oe()),Rl.ye.re(v,j.Be(t.kind)),g.push(j)}return g}cn(e,t){return!!e.filters.find(s=>s instanceof Ai&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=Wh(e),d=Ol(e);return(t?s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.K()).next(g=>{const v=[];return $e.forEach(g,x=>d.get([x.indexId,this.uid]).next(j=>{v.push(function(q,ie){const me=ie?new Ga(ie.sequenceNumber,new Xn(ed(ie.readTime),new Ot(eu(ie.documentKey)),ie.largestBatchId)):Ga.empty(),Ze=q.fields.map(([dt,yt])=>new Du(Ji.fromServerFormat(dt),yt));return new Sd(q.indexId,q.collectionGroup,Ze,me)}(x,j))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,d)=>{const g=s.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==g?g:an(s.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const d=Wh(e),g=Ol(e);return this.ln(e).next(v=>d.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>$e.forEach(x,j=>g.put(Qg(j.indexId,this.user,v,s)))))}updateIndexEntries(e,t){const s=new Map;return $e.forEach(t,(d,g)=>{const v=s.get(d.collectionGroup);return(v?$e.resolve(v):this.getFieldIndexes(e,d.collectionGroup)).next(x=>(s.set(d.collectionGroup,x),$e.forEach(x,j=>this.fn(e,d,j).next(q=>{const ie=this.dn(g,j);return q.isEqual(ie)?$e.resolve():this._n(e,g,j,q,ie)}))))})}wn(e,t,s,d){return Pl(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.un(s,t.key),documentKey:t.key.path.toArray()})}mn(e,t,s,d){return Pl(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.un(s,t.key),t.key.path.toArray()])}fn(e,t,s){const d=Pl(e);let g=new er(fc);return d.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.un(s,t)])},(v,x)=>{g=g.add(new $o(s.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>g)}dn(e,t){let s=new er(fc);const d=this.on(t,e);if(null==d)return s;const g=Oc(t);if(null!=g){const v=e.data.field(g.fieldPath);if(yo(v))for(const x of v.arrayValue.values||[])s=s.add(new $o(t.indexId,e.key,this.nn(x),d))}else s=s.add(new $o(t.indexId,e.key,Gh,d));return s}_n(e,t,s,d,g){mt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(x,j,q,ie,me){const Ze=x.getIterator(),dt=j.getIterator();let yt=ks(Ze),qt=ks(dt);for(;yt||qt;){let fn=!1,ai=!1;if(yt&&qt){const fs=q(yt,qt);fs<0?ai=!0:fs>0&&(fn=!0)}else null!=yt?ai=!0:fn=!0;fn?(ie(qt),qt=ks(dt)):ai?(me(yt),yt=ks(Ze)):(yt=ks(Ze),qt=ks(dt))}}(d,g,fc,x=>{v.push(this.wn(e,t,s,x))},x=>{v.push(this.mn(e,t,s,x))}),$e.waitFor(v)}ln(e){let t=1;return Ol(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,d,g)=>{g.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((v,x)=>fc(v,x)).filter((v,x,j)=>!x||0!==fc(v,j[x-1]));const d=[];d.push(e);for(const v of s){const x=fc(v,e),j=fc(v,t);if(0===x)d[0]=e.Le();else if(x>0&&j<0)d.push(v),d.push(v.Le());else if(j>0)break}d.push(t);const g=[];for(let v=0;v<d.length;v+=2)g.push(IDBKeyRange.bound([d[v].indexId,this.uid,d[v].arrayValue,d[v].directionalValue,Gh,[]],[d[v+1].indexId,this.uid,d[v+1].arrayValue,d[v+1].directionalValue,Gh,[]]));return g}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zh)}getMinOffset(e,t){return $e.mapArray(this.Ye(t),s=>this.Xe(e,s).next(d=>d||S())).next(zh)}}function nm(i){return yi(i,"collectionParents")}function Pl(i){return yi(i,"indexEntries")}function Wh(i){return yi(i,"indexConfiguration")}function Ol(i){return yi(i,"indexState")}function zh(i){D(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const d=i[s].indexState.offset;wa(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new Xn(e.readTime,e.documentKey,t)}const Kh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wo{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new wo(e,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Uf(i,e,t){const s=i.store("mutations"),d=i.store("documentMutations"),g=[],v=IDBKeyRange.only(t.batchId);let x=0;const j=s.J({range:v},(ie,me,Ze)=>(x++,Ze.delete()));g.push(j.next(()=>{D(1===x)}));const q=[];for(const ie of t.mutations){const me=uc(e,ie.key.path,t.batchId);g.push(d.delete(me)),q.push(ie.key)}return $e.waitFor(g).next(()=>q)}function Jp(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw S();e=i.noDocument}return JSON.stringify(e).length}wo.DEFAULT_COLLECTION_PERCENTILE=10,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wo.DEFAULT=new wo(41943040,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wo.DISABLED=new wo(-1,0,0);class Bf{constructor(e,t,s,d){this.userId=e,this.wt=t,this.indexManager=s,this.referenceDelegate=d,this.gn={}}static se(e,t,s,d){D(""!==e.uid);const g=e.isAuthenticated()?e.uid:"";return new Bf(g,t,s,d)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).J({index:"userMutationsIndex",range:s},(d,g,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,s,d){const g=Kd(e),v=pc(e);return v.add({}).next(x=>{D("number"==typeof x);const j=new kf(x,t,s,d),q=function(Ze,dt,yt){const qt=yt.baseMutations.map(ai=>Dt(Ze.ne,ai)),fn=yt.mutations.map(ai=>Dt(Ze.ne,ai));return{userId:dt,batchId:yt.batchId,localWriteTimeMs:yt.localWriteTime.toMillis(),baseMutations:qt,mutations:fn}}(this.wt,this.userId,j),ie=[];let me=new er((Ze,dt)=>an(Ze.canonicalString(),dt.canonicalString()));for(const Ze of d){const dt=uc(this.userId,Ze.key.path,x);me=me.add(Ze.key.path.popLast()),ie.push(v.put(q)),ie.push(g.put(dt,Zc))}return me.forEach(Ze=>{ie.push(this.indexManager.addToCollectionParentIndex(e,Ze))}),e.addOnCommittedListener(()=>{this.gn[x]=j.keys()}),$e.waitFor(ie).next(()=>j)})}lookupMutationBatch(e,t){return pc(e).get(t).next(s=>s?(D(s.userId===this.userId),dc(this.wt,s)):null)}yn(e,t){return this.gn[t]?$e.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const d=s.keys();return this.gn[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,d=IDBKeyRange.lowerBound([this.userId,s]);let g=null;return pc(e).J({index:"userMutationsIndex",range:d},(v,x,j)=>{x.userId===this.userId&&(D(x.batchId>=s),g=dc(this.wt,x)),j.done()}).next(()=>g)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return pc(e).J({index:"userMutationsIndex",range:t,reverse:!0},(d,g,v)=>{s=g.batchId,v.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return pc(e).K("userMutationsIndex",t).next(s=>s.map(d=>dc(this.wt,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=ac(this.userId,t.path),d=IDBKeyRange.lowerBound(s),g=[];return Kd(e).J({range:d},(v,x,j)=>{const[q,ie,me]=v,Ze=eu(ie);if(q===this.userId&&t.path.isEqual(Ze))return pc(e).get(me).next(dt=>{if(!dt)throw S();D(dt.userId===this.userId),g.push(dc(this.wt,dt))});j.done()}).next(()=>g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new er(an);const d=[];return t.forEach(g=>{const v=ac(this.userId,g.path),x=IDBKeyRange.lowerBound(v),j=Kd(e).J({range:x},(q,ie,me)=>{const[Ze,dt,yt]=q,qt=eu(dt);Ze===this.userId&&g.path.isEqual(qt)?s=s.add(yt):me.done()});d.push(j)}),$e.waitFor(d).next(()=>this.pn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1,g=ac(this.userId,s),v=IDBKeyRange.lowerBound(g);let x=new er(an);return Kd(e).J({range:v},(j,q,ie)=>{const[me,Ze,dt]=j,yt=eu(Ze);me===this.userId&&s.isPrefixOf(yt)?yt.length===d&&(x=x.add(dt)):ie.done()}).next(()=>this.pn(e,x))}pn(e,t){const s=[],d=[];return t.forEach(g=>{d.push(pc(e).get(g).next(v=>{if(null===v)throw S();D(v.userId===this.userId),s.push(dc(this.wt,v))}))}),$e.waitFor(d).next(()=>s)}removeMutationBatch(e,t){return Uf(e.ee,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),$e.forEach(s,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $e.resolve();const s=IDBKeyRange.lowerBound([this.userId]),d=[];return Kd(e).J({range:s},(g,v,x)=>{if(g[0]===this.userId){const j=eu(g[1]);d.push(j)}else x.done()}).next(()=>{D(0===d.length)})})}containsKey(e,t){return rm(e,this.userId,t)}Tn(e){return Xp(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rm(i,e,t){const s=ac(e,t.path),d=s[1],g=IDBKeyRange.lowerBound(s);let v=!1;return Kd(i).J({range:g,H:!0},(x,j,q)=>{const[ie,me,Ze]=x;ie===e&&me===d&&(v=!0),q.done()}).next(()=>v)}function pc(i){return yi(i,"mutations")}function Kd(i){return yi(i,"documentMutations")}function Xp(i){return yi(i,"mutationQueues")}class td{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new td(0)}static Rn(){return new td(-1)}}class t_{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const s=new td(t.highestTargetId);return t.highestTargetId=s.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>un.fromTimestamp(new $r(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.bn(e).next(d=>(d.highestListenSequenceNumber=t,s&&(d.lastRemoteSnapshotVersion=s.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Pn(e,d)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(s=>(s.targetCount+=1,this.Vn(t,s),this.Pn(e,s))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>qd(e).delete(t.targetId)).next(()=>this.bn(e)).next(s=>(D(s.targetCount>0),s.targetCount-=1,this.Pn(e,s)))}removeTargets(e,t,s){let d=0;const g=[];return qd(e).J((v,x)=>{const j=Bh(x);j.sequenceNumber<=t&&null===s.get(j.targetId)&&(d++,g.push(this.removeTargetData(e,j)))}).next(()=>$e.waitFor(g)).next(()=>d)}forEachTarget(e,t){return qd(e).J((s,d)=>{const g=Bh(d);t(g)})}bn(e){return jf(e).get("targetGlobalKey").next(t=>(D(null!==t),t))}Pn(e,t){return jf(e).put("targetGlobalKey",t)}vn(e,t){return qd(e).put(Yg(this.wt,t))}Vn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=Cl(t),d=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let g=null;return qd(e).J({range:d,index:"queryTargetsIndex"},(v,x,j)=>{const q=Bh(x);Jo(t,q.target)&&(g=q,j.done())}).next(()=>g)}addMatchingKeys(e,t,s){const d=[],g=kl(e);return t.forEach(v=>{const x=jo(v.path);d.push(g.put({targetId:s,path:x})),d.push(this.referenceDelegate.addReference(e,s,v))}),$e.waitFor(d)}removeMatchingKeys(e,t,s){const d=kl(e);return $e.forEach(t,g=>{const v=jo(g.path);return $e.waitFor([d.delete([s,v]),this.referenceDelegate.removeReference(e,s,g)])})}removeMatchingKeysForTargetId(e,t){const s=kl(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(d)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),d=kl(e);let g=In();return d.J({range:s,H:!0},(v,x,j)=>{const q=eu(v[1]),ie=new Ot(q);g=g.add(ie)}).next(()=>g)}containsKey(e,t){const s=jo(t.path),d=IDBKeyRange.bound([s],[yl(s)],!1,!0);let g=0;return kl(e).J({index:"documentTargetsIndex",H:!0,range:d},([v,x],j,q)=>{0!==v&&(g++,q.done())}).next(()=>g>0)}te(e,t){return qd(e).get(t).next(s=>s?Bh(s):null)}}function qd(i){return yi(i,"targets")}function jf(i){return yi(i,"targetGlobal")}function kl(i){return yi(i,"targetDocuments")}function eg([i,e],[t,s]){const d=an(i,t);return 0===d?an(e,s):d}class Zd{constructor(e){this.Sn=e,this.buffer=new er(eg),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();eg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class n_{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;mt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){mo(s)?mt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield Hr(s)}yield t.kn(3e5)}))}}class X_{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return $e.resolve(ss.ot);const s=new Zd(t);return this.On.forEachTarget(e,d=>s.xn(d.sequenceNumber)).next(()=>this.On.Fn(e,d=>s.xn(d))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.On.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector","Garbage collection skipped; disabled"),$e.resolve(Kh)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(mt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kh):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let s,d,g,v,x,j,q;const ie=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(me=>(me>this.params.maximumSequenceNumbersToCollect?(mt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${me}`),d=this.params.maximumSequenceNumbersToCollect):d=me,v=Date.now(),this.nthSequenceNumber(e,d))).next(me=>(s=me,x=Date.now(),this.removeTargets(e,s,t))).next(me=>(g=me,j=Date.now(),this.removeOrphanedDocuments(e,s))).next(me=>(q=Date.now(),bu()<=Qe.in.DEBUG&&mt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ie}ms\n\tDetermined least recently used ${d} in `+(x-v)+`ms\n\tRemoved ${g} targets in `+(j-x)+`ms\n\tRemoved ${me} documents in `+(q-j)+`ms\nTotal Duration: ${q-ie}ms`),$e.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:g,documentsRemoved:me})))}}class ey{constructor(e,t){this.db=e,this.garbageCollector=new X_(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(d=>s+d))}Bn(e){let t=0;return this.Fn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(s,d)=>t(d))}addReference(e,t,s){return tg(e,s)}removeReference(e,t,s){return tg(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return tg(e,t)}Un(e,t){return function(s,d){let g=!1;return Xp(s).Y(v=>rm(s,v,d).next(x=>(x&&(g=!0),$e.resolve(!x)))).next(()=>g)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let g=0;return this.Ln(e,(v,x)=>{if(x<=t){const j=this.Un(e,v).next(q=>{if(!q)return g++,s.getEntry(e,v).next(()=>(s.removeEntry(v,un.min()),kl(e).delete([0,jo(v.path)])))});d.push(j)}}).next(()=>$e.waitFor(d)).next(()=>s.apply(e)).next(()=>g)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return tg(e,t)}Ln(e,t){const s=kl(e);let d,g=ss.ot;return s.J({index:"documentTargetsIndex"},([v,x],{path:j,sequenceNumber:q})=>{0===v?(g!==ss.ot&&t(new Ot(eu(d)),g),g=q,d=j):g=ss.ot}).next(()=>{g!==ss.ot&&t(new Ot(eu(d)),g)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tg(i,e){return kl(i).put((s=i.currentSequenceNumber,{targetId:0,path:jo(e.path),sequenceNumber:s}));var s}class ng{constructor(){this.changes=new Uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?$e.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class im{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return nu(e).put(s)}removeEntry(e,t,s){return nu(e).delete(function(d,g){const v=d.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],Kp(g),v[v.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.qn(e,s)))}getEntry(e,t){let s=si.newInvalidDocument(t);return nu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ru(t))},(d,g)=>{s=this.Kn(t,g)}).next(()=>s)}Gn(e,t){let s={size:0,document:si.newInvalidDocument(t)};return nu(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ru(t))},(d,g)=>{s={document:this.Kn(t,g),size:Jp(g)}}).next(()=>s)}getEntries(e,t){let s=ta();return this.Qn(e,t,(d,g)=>{const v=this.Kn(d,g);s=s.insert(d,v)}).next(()=>s)}jn(e,t){let s=ta(),d=new Si(Ot.comparator);return this.Qn(e,t,(g,v)=>{const x=this.Kn(g,v);s=s.insert(g,x),d=d.insert(g,Jp(v))}).next(()=>({documents:s,Wn:d}))}Qn(e,t,s){if(t.isEmpty())return $e.resolve();let d=new er(Fl);t.forEach(j=>d=d.add(j));const g=IDBKeyRange.bound(ru(d.first()),ru(d.last())),v=d.getIterator();let x=v.getNext();return nu(e).J({index:"documentKeyIndex",range:g},(j,q,ie)=>{const me=Ot.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;x&&Fl(x,me)<0;)s(x,null),x=v.getNext();x&&x.isEqual(me)&&(s(x,q),x=v.hasNext()?v.getNext():null),x?ie.q(ru(x)):ie.done()}).next(()=>{for(;x;)s(x,null),x=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,s){const d=[t.popLast().toArray(),t.lastSegment(),Kp(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],g=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nu(e).K(IDBKeyRange.bound(d,g,!0)).next(v=>{let x=ta();for(const j of v){const q=this.Kn(Ot.fromSegments(j.prefixPath.concat(j.collectionGroup,j.documentId)),j);x=x.insert(q.key,q)}return x})}getAllFromCollectionGroup(e,t,s,d){let g=ta();const v=qh(t,s),x=qh(t,Xn.max());return nu(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,x,!0)},(j,q,ie)=>{const me=this.Kn(Ot.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);g=g.insert(me.key,me),g.size===d&&ie.done()}).next(()=>g)}newChangeBuffer(e){return new ty(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sm(e).get("remoteDocumentGlobalKey").next(t=>(D(!!t),t))}qn(e,t){return sm(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const s=function zd(i,e){let t;if(e.document)t=ee(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Ot.fromSegments(e.noDocument.path),d=ed(e.noDocument.readTime);t=si.newNoDocument(s,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return S();{const s=Ot.fromSegments(e.unknownDocument.path),d=ed(e.unknownDocument.version);t=si.newUnknownDocument(s,d)}}return e.readTime&&t.setReadTime(function(s){const d=new $r(s[0],s[1]);return un.fromTimestamp(d)}(e.readTime)),t}(this.wt,t);if(!s.isNoDocument()||!s.version.isEqual(un.min()))return s}return si.newInvalidDocument(e)}}function r_(i){return new im(i)}class ty extends ng{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Uo(s=>s.toString(),(s,d)=>s.isEqual(d))}applyChanges(e){const t=[];let s=0,d=new er((g,v)=>an(g.canonicalString(),v.canonicalString()));return this.changes.forEach((g,v)=>{const x=this.Hn.get(g);if(t.push(this.zn.removeEntry(e,g,x.readTime)),v.isValidDocument()){const j=zp(this.zn.wt,v);d=d.add(g.path.popLast()),s+=Jp(j)-x.size,t.push(this.zn.addEntry(e,g,j))}else if(s-=x.size,this.trackRemovals){const j=zp(this.zn.wt,v.convertToNoDocument(un.min()));t.push(this.zn.addEntry(e,g,j))}}),d.forEach(g=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,g))}),t.push(this.zn.updateMetadata(e,s)),$e.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(s=>(this.Hn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:s,Wn:d})=>(d.forEach((g,v)=>{this.Hn.set(g,{size:v,readTime:s.get(g).readTime})}),s))}}function sm(i){return yi(i,"remoteDocumentGlobal")}function nu(i){return yi(i,"remoteDocumentsV14")}function ru(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qh(i,e){const t=e.documentKey.path.toArray();return[i,Kp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Fl(i,e){const t=i.path.toArray(),s=e.path.toArray();let d=0;for(let g=0;g<t.length-2&&g<s.length-2;++g)if(d=an(t[g],s[g]),d)return d;return d=an(t.length,s.length),d||(d=an(t[t.length-2],s[s.length-2]),d||an(t[t.length-1],s[s.length-1]))}class Zh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class nd{constructor(e,t,s,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=d}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(s=d,this.getBaseDocument(e,t,s))).next(d=>(null!==s&&hu(s.mutation,d,ii.empty(),$r.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,In()).next(()=>s))}getLocalViewOfDocuments(e,t,s=In()){const d=Bo();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,s).next(g=>{let v=nc();return g.forEach((x,j)=>{v=v.insert(x,j.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const s=Bo();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,In()))}populateOverlays(e,t,s){const d=[];return s.forEach(g=>{t.has(g)||d.push(g)}),this.documentOverlayCache.getOverlays(e,d).next(g=>{g.forEach((v,x)=>{t.set(v,x)})})}computeViews(e,t,s,d){let g=ta();const v=Lu(),x=Lu();return t.forEach((j,q)=>{const ie=s.get(q.key);d.has(q.key)&&(void 0===ie||ie.mutation instanceof Fs)?g=g.insert(q.key,q):void 0!==ie&&(v.set(q.key,ie.mutation.getFieldMask()),hu(ie.mutation,q,ie.mutation.getFieldMask(),$r.now()))}),this.recalculateAndSaveOverlays(e,g).next(j=>(j.forEach((q,ie)=>v.set(q,ie)),t.forEach((q,ie)=>{var me;return x.set(q,new Zh(ie,null!==(me=v.get(q))&&void 0!==me?me:null))}),x))}recalculateAndSaveOverlays(e,t){const s=Lu();let d=new Si((v,x)=>v-x),g=In();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const x of v)x.keys().forEach(j=>{const q=t.get(j);if(null===q)return;let ie=s.get(j)||ii.empty();ie=x.applyToLocalView(q,ie),s.set(j,ie);const me=(d.get(x.batchId)||In()).add(j);d=d.insert(x.batchId,me)})}).next(()=>{const v=[],x=d.getReverseIterator();for(;x.hasNext();){const j=x.getNext(),q=j.key,ie=j.value,me=Rh();ie.forEach(Ze=>{if(!g.has(Ze)){const dt=tr(t.get(Ze),s.get(Ze));null!==dt&&me.set(Ze,dt),g=g.add(Ze)}}),v.push(this.documentOverlayCache.saveOverlays(e,q,me))}return $e.waitFor(v)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Ot.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Bc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var d}getNextDocuments(e,t,s,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,d).next(g=>{const v=d-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,d-g.size):$e.resolve(Bo());let x=-1,j=g;return v.next(q=>$e.forEach(q,(ie,me)=>(x<me.largestBatchId&&(x=me.largestBatchId),g.get(ie)?$e.resolve():this.getBaseDocument(e,ie,me).next(Ze=>{j=j.insert(ie,Ze)}))).next(()=>this.populateOverlays(e,q,g)).next(()=>this.computeViews(e,j,q,In())).next(ie=>({batchId:x,changes:nr(ie)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ot(t)).next(s=>{let d=nc();return s.isFoundDocument()&&(d=d.insert(s.key,s)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const d=t.collectionGroup;let g=nc();return this.indexManager.getCollectionParents(e,d).next(v=>$e.forEach(v,x=>{const j=(q=t,ie=x.child(d),new Ya(ie,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ie;return this.getDocumentsMatchingCollectionQuery(e,j,s).next(q=>{q.forEach((ie,me)=>{g=g.insert(ie,me)})})}).next(()=>g))}getDocumentsMatchingCollectionQuery(e,t,s){let d;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(g=>(d=g,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(g=>{g.forEach((x,j)=>{const q=j.getKey();null===d.get(q)&&(d=d.insert(q,si.newInvalidDocument(q)))});let v=nc();return d.forEach((x,j)=>{const q=g.get(x);void 0!==q&&hu(q.mutation,j,ii.empty(),$r.now()),Jl(t,j)&&(v=v.insert(x,j))}),v})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):$e.resolve(si.newInvalidDocument(t))}}class om{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return $e.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var s;return this.Jn.set(t.id,{id:(s=t).id,version:s.version,createTime:Ri(s.createTime)}),$e.resolve()}getNamedQuery(e,t){return $e.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(s=t).name,query:Pa(s.bundledQuery),readTime:Ri(s.readTime)}),$e.resolve();var s}}class rg{constructor(){this.overlays=new Si(Ot.comparator),this.Xn=new Map}getOverlay(e,t){return $e.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Bo();return $e.forEach(t,d=>this.getOverlay(e,d).next(g=>{null!==g&&s.set(d,g)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((d,g)=>{this.ie(e,t,g)}),$e.resolve()}removeOverlaysForBatchId(e,t,s){const d=this.Xn.get(s);return void 0!==d&&(d.forEach(g=>this.overlays=this.overlays.remove(g)),this.Xn.delete(s)),$e.resolve()}getOverlaysForCollection(e,t,s){const d=Bo(),g=t.length+1,v=new Ot(t.child("")),x=this.overlays.getIteratorFrom(v);for(;x.hasNext();){const j=x.getNext().value,q=j.getKey();if(!t.isPrefixOf(q.path))break;q.path.length===g&&j.largestBatchId>s&&d.set(j.getKey(),j)}return $e.resolve(d)}getOverlaysForCollectionGroup(e,t,s,d){let g=new Si((q,ie)=>q-ie);const v=this.overlays.getIterator();for(;v.hasNext();){const q=v.getNext().value;if(q.getKey().getCollectionGroup()===t&&q.largestBatchId>s){let ie=g.get(q.largestBatchId);null===ie&&(ie=Bo(),g=g.insert(q.largestBatchId,ie)),ie.set(q.getKey(),q)}}const x=Bo(),j=g.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((q,ie)=>x.set(q,ie)),!(x.size()>=d)););return $e.resolve(x)}ie(e,t,s){const d=this.overlays.get(s.key);if(null!==d){const v=this.Xn.get(d.largestBatchId).delete(s.key);this.Xn.set(d.largestBatchId,v)}this.overlays=this.overlays.insert(s.key,new Uh(t,s));let g=this.Xn.get(t);void 0===g&&(g=In(),this.Xn.set(t,g)),this.Xn.set(t,g.add(s.key))}}class ig{constructor(){this.Zn=new er(Hi.ts),this.es=new er(Hi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new Hi(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new Hi(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new Ot(new Jn([])),s=new Hi(t,e),d=new Hi(t,e+1),g=[];return this.es.forEachInRange([s,d],v=>{this.rs(v),g.push(v.key)}),g}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Ot(new Jn([])),s=new Hi(t,e),d=new Hi(t,e+1);let g=In();return this.es.forEachInRange([s,d],v=>{g=g.add(v.key)}),g}containsKey(e){const t=new Hi(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Hi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Ot.comparator(e.key,t.key)||an(e.ls,t.ls)}static ns(e,t){return an(e.ls,t.ls)||Ot.comparator(e.key,t.key)}}class $f{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new er(Hi.ts)}checkEmpty(e){return $e.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,d){const g=this.fs;this.fs++;const v=new kf(g,t,s,d);this.mutationQueue.push(v);for(const x of d)this.ds=this.ds.add(new Hi(x.key,g)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return $e.resolve(v)}lookupMutationBatch(e,t){return $e.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ws(t+1),g=d<0?0:d;return $e.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return $e.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return $e.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Hi(t,0),d=new Hi(t,Number.POSITIVE_INFINITY),g=[];return this.ds.forEachInRange([s,d],v=>{const x=this._s(v.ls);g.push(x)}),$e.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new er(an);return t.forEach(d=>{const g=new Hi(d,0),v=new Hi(d,Number.POSITIVE_INFINITY);this.ds.forEachInRange([g,v],x=>{s=s.add(x.ls)})}),$e.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,d=s.length+1;let g=s;Ot.isDocumentKey(g)||(g=g.child(""));const v=new Hi(new Ot(g),0);let x=new er(an);return this.ds.forEachWhile(j=>{const q=j.key.path;return!!s.isPrefixOf(q)&&(q.length===d&&(x=x.add(j.ls)),!0)},v),$e.resolve(this.gs(x))}gs(e){const t=[];return e.forEach(s=>{const d=this._s(s);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){D(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ds;return $e.forEach(t.mutations,d=>{const g=new Hi(d.key,t.batchId);return s=s.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,t){const s=new Hi(t,0),d=this.ds.firstAfterOrEqual(s);return $e.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return $e.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class i_{constructor(e){this.ps=e,this.docs=new Si(Ot.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,d=this.docs.get(s),g=d?d.size:0,v=this.ps(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:v}),this.size+=v-g,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return $e.resolve(s?s.document.mutableCopy():si.newInvalidDocument(t))}getEntries(e,t){let s=ta();return t.forEach(d=>{const g=this.docs.get(d);s=s.insert(d,g?g.document.mutableCopy():si.newInvalidDocument(d))}),$e.resolve(s)}getAllFromCollection(e,t,s){let d=ta();const g=new Ot(t.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:x,value:{document:j}}=v.getNext();if(!t.isPrefixOf(x.path))break;x.path.length>t.length+1||wa(Ad(j),s)<=0||(d=d.insert(j.key,j.mutableCopy()))}return $e.resolve(d)}getAllFromCollectionGroup(e,t,s,d){S()}Is(e,t){return $e.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new il(this)}getSize(e){return $e.resolve(this.size)}}class il extends ng{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((s,d)=>{d.isValidDocument()?t.push(this.zn.addEntry(e,d)):this.zn.removeEntry(s)}),$e.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Yh{constructor(e){this.persistence=e,this.Ts=new Uo(t=>Cl(t),Jo),this.lastRemoteSnapshotVersion=un.min(),this.highestTargetId=0,this.Es=0,this.As=new ig,this.targetCount=0,this.Rs=td.An()}forEachTarget(e,t){return this.Ts.forEach((s,d)=>t(d)),$e.resolve()}getLastRemoteSnapshotVersion(e){return $e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $e.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),$e.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Es&&(this.Es=t),$e.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new td(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,$e.resolve()}updateTargetData(e,t){return this.vn(t),$e.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,$e.resolve()}removeTargets(e,t,s){let d=0;const g=[];return this.Ts.forEach((v,x)=>{x.sequenceNumber<=t&&null===s.get(x.targetId)&&(this.Ts.delete(v),g.push(this.removeMatchingKeysForTargetId(e,x.targetId)),d++)}),$e.waitFor(g).next(()=>d)}getTargetCount(e){return $e.resolve(this.targetCount)}getTargetData(e,t){const s=this.Ts.get(t)||null;return $e.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),$e.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const d=this.persistence.referenceDelegate,g=[];return d&&t.forEach(v=>{g.push(d.markPotentiallyOrphaned(e,v))}),$e.waitFor(g)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),$e.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return $e.resolve(s)}containsKey(e,t){return $e.resolve(this.As.containsKey(t))}}class sg{constructor(e,t){this.bs={},this.overlays={},this.Ps=new ss(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Yh(this),this.indexManager=new Nl,this.remoteDocumentCache=new i_(s=>this.referenceDelegate.Ss(s)),this.wt=new Ff(t),this.Ds=new om(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new rg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.bs[e.toKey()];return s||(s=new $f(t,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,s){mt("MemoryPersistence","Starting transaction:",e);const d=new s_(this.Ps.next());return this.referenceDelegate.Cs(),s(d).next(g=>this.referenceDelegate.xs(d).next(()=>g)).toPromise().then(g=>(d.raiseOnCommittedEvent(),g))}Ns(e,t){return $e.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class s_ extends Ih{constructor(e){super(),this.currentSequenceNumber=e}}class Hf{constructor(e){this.persistence=e,this.ks=new ig,this.Os=null}static Ms(e){return new Hf(e)}get Fs(){if(this.Os)return this.Os;throw S()}addReference(e,t,s){return this.ks.addReference(s,t),this.Fs.delete(s.toString()),$e.resolve()}removeReference(e,t,s){return this.ks.removeReference(s,t),this.Fs.add(s.toString()),$e.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),$e.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(d=>this.Fs.add(d.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(g=>this.Fs.add(g.toString()))}).next(()=>s.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $e.forEach(this.Fs,s=>{const d=Ot.fromPath(s);return this.$s(e,d).next(g=>{g||t.removeEntry(d,un.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return $e.or([()=>$e.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class gc{constructor(e){this.wt=e}O(e,t,s,d){const g=new Ns("createOrUpgrade",t);var x;s<1&&d>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0}),x.createObjectStore("documentMutations"),rd(e),function(x){x.createObjectStore("remoteDocuments")}(e));let v=$e.resolve();return s<3&&d>=3&&(0!==s&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),rd(e)),v=v.next(()=>function(x){const j=x.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:un.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",q)}(g))),s<4&&d>=4&&(0!==s&&(v=v.next(()=>function(x,j){return j.store("mutations").K().next(q=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$d,{unique:!0});const ie=j.store("mutations"),me=q.map(Ze=>ie.put(Ze));return $e.waitFor(me)})}(e,g))),v=v.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&d>=5&&(v=v.next(()=>this.Bs(g))),s<6&&d>=6&&(v=v.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(g)))),s<7&&d>=7&&(v=v.next(()=>this.Us(g))),s<8&&d>=8&&(v=v.next(()=>this.qs(e,g))),s<9&&d>=9&&(v=v.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&d>=10&&(v=v.next(()=>this.Ks(g))),s<11&&d>=11&&(v=v.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&d>=12&&(v=v.next(()=>{!function(x){const j=x.createObjectStore("documentOverlays",{keyPath:lc});j.createIndex("collectionPathOverlayIndex",Vh,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",Zg,{unique:!1})}(e)})),s<13&&d>=13&&(v=v.next(()=>function(x){const j=x.createObjectStore("remoteDocumentsV14",{keyPath:Hd});j.createIndex("documentKeyIndex",xl),j.createIndex("collectionGroupIndex",Kg)}(e)).next(()=>this.Gs(e,g)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&d>=14&&(v=v.next(()=>this.Qs(e,g))),s<15&&d>=15&&(v=v.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:Qc}).createIndex("sequenceNumberIndex",Fh,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Gp}).createIndex("documentKeyIndex",Lh,{unique:!1})}(e))),v}Ls(e){let t=0;return e.store("remoteDocuments").J((s,d)=>{t+=Jp(d)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Bs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.K().next(d=>$e.forEach(d,g=>{const v=IDBKeyRange.bound([g.userId,-1],[g.userId,g.lastAcknowledgedBatchId]);return s.K("userMutationsIndex",v).next(x=>$e.forEach(x,j=>{D(j.userId===g.userId);const q=dc(this.wt,j);return Uf(e,g.userId,q).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const g=[];return s.J((v,x)=>{const j=new Jn(v),q=[0,jo(j)];g.push(t.get(q).next(ie=>ie?$e.resolve():t.put({targetId:0,path:jo(j),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>$e.waitFor(g))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:Xm});const s=t.store("collectionParents"),d=new Hh,g=v=>{if(d.add(v)){const x=v.lastSegment(),j=v.popLast();return s.put({collectionId:x,parent:jo(j)})}};return t.store("remoteDocuments").J({H:!0},(v,x)=>{const j=new Jn(v);return g(j.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([v,x,j],q)=>{const ie=eu(x);return g(ie.popLast())}))}Ks(e){const t=e.store("targets");return t.J((s,d)=>{const g=Bh(d),v=Yg(this.wt,g);return t.put(v)})}Gs(e,t){const s=t.store("remoteDocuments"),d=[];return s.J((g,v)=>{const x=t.store("remoteDocumentsV14"),j=(q=v,q.document?new Ot(Jn.fromString(q.document.name).popFirst(5)):q.noDocument?Ot.fromSegments(q.noDocument.path):q.unknownDocument?Ot.fromSegments(q.unknownDocument.path):S()).path.toArray();var q;const ie={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};d.push(x.put(ie))}).next(()=>$e.waitFor(d))}Qs(e,t){const s=t.store("mutations"),d=r_(this.wt),g=new sg(Hf.Ms,this.wt.ne);return s.K().next(v=>{const x=new Map;return v.forEach(j=>{var q;let ie=null!==(q=x.get(j.userId))&&void 0!==q?q:In();dc(this.wt,j).keys().forEach(me=>ie=ie.add(me)),x.set(j.userId,ie)}),$e.forEach(x,(j,q)=>{const ie=new ji(q),me=jh.se(this.wt,ie),Ze=g.getIndexManager(ie),dt=Bf.se(ie,this.wt,Ze,g.referenceDelegate);return new nd(d,dt,me,Ze).recalculateAndSaveOverlaysForDocumentKeys(new Xc(t,ss.ot),j).next()})})}}function rd(i){i.createObjectStore("targetDocuments",{keyPath:Gd}).createIndex("documentTargetsIndex",qg,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yc,{unique:!0}),i.createObjectStore("targetGlobal")}const Yd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mc{constructor(e,t,s,d,g,v,x,j,q,ie,me=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.js=g,this.window=v,this.document=x,this.Ws=q,this.zs=ie,this.Hs=me,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=Ze=>Promise.resolve(),!mc.V())throw new W(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ey(this,d),this.ei=t+"main",this.wt=new Ff(j),this.ni=new Dr(this.ei,this.Hs,new gc(this.wt)),this.Vs=new t_(this.referenceDelegate,this.wt),this.remoteDocumentCache=r_(this.wt),this.Ds=new e_,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===ie&&Pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(N.FAILED_PRECONDITION,Yd);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new ss(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var s=(0,Ie.Z)(function*(d){if(t.started)return e(d)});return function(d){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,Ie.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ol(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(mo(e))return mt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return mt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return sl(e).get("owner").next(t=>$e.resolve(this.di(t)))}_i(e){return ol(e).delete(this.clientId)}wi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const d=yi(s,"clientMetadata");return d.K().next(g=>{const v=e.gi(g,18e5),x=g.filter(j=>-1===v.indexOf(j));return $e.forEach(x,j=>d.delete(j.clientId)).next(()=>x)})}).catch(()=>[]);if(e.si)for(const s of t)e.si.removeItem(e.yi(s.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?$e.resolve(!0):sl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new W(N.FAILED_PRECONDITION,Yd);return!1}}return!(!this.networkEnabled||!this.inForeground)||ol(e).K().next(s=>void 0===this.gi(s,5e3).find(d=>{if(this.clientId!==d.clientId){const v=!this.inForeground&&d.inForeground,x=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||v&&x)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&mt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Xc(t,ss.ot);return e.li(s).next(()=>e._i(s))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(s=>this.mi(s.updateTimeMs,t)&&!this.pi(s.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>ol(e).K().next(t=>this.gi(t,18e5).map(s=>s.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return Bf.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Qp(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return jh.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,s){mt("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",g=15===(v=this.Hs)?Wp:14===v?Wd:13===v?Jc:12===v?Na:11===v?Jr:void S();var v;let x;return this.ni.runTransaction(e,d,g,j=>(x=new Xc(j,this.Ps?this.Ps.next():ss.ot),"readwrite-primary"===t?this.ai(x).next(q=>!!q||this.hi(x)).next(q=>{if(!q)throw Pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new W(N.FAILED_PRECONDITION,Wa);return s(x)}).next(q=>this.fi(x).next(()=>q)):this.bi(x).next(()=>s(x)))).then(j=>(x.raiseOnCommittedEvent(),j))}bi(e){return sl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new W(N.FAILED_PRECONDITION,Yd)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sl(e).put("owner",t)}static V(){return Dr.V()}li(e){const t=sl(e);return t.get("owner").next(s=>this.di(s)?(mt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):$e.resolve())}mi(e,t){const s=Date.now();return!(e<s-t||e>s&&(Pr(`Detected an update time that is in the future: ${e} > ${s}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,He.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const s=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return mt("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return Pr("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){Pr("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sl(i){return yi(i,"owner")}function ol(i){return yi(i,"clientMetadata")}function Qd(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Gf{constructor(e,t,s,d){this.targetId=e,this.fromCache=t,this.Pi=s,this.vi=d}static Vi(e,t){let s=In(),d=In();for(const g of t.docChanges)switch(g.type){case 0:s=s.add(g.doc.key);break;case 1:d=d.add(g.doc.key)}return new Gf(e,t.fromCache,s,d)}}class _c{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,s,d){return this.Ci(e,t).next(g=>g||this.xi(e,t,d,s)).next(g=>g||this.Ni(e,t))}Ci(e,t){return $e.resolve(null)}xi(e,t,s,d){return function $p(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||d.isEqual(un.min())?this.Ni(e,t):this.Di.getDocuments(e,s).next(g=>{const v=this.ki(t,g);return this.Oi(t,v,s,d)?this.Ni(e,t):(bu()<=Qe.in.DEBUG&&mt("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),ir(t)),this.Mi(e,v,t,Tu(d,-1)))})}ki(e,t){let s=new er(Ma(e));return t.forEach((d,g)=>{Jl(e,g)&&(s=s.add(g))}),s}Oi(e,t,s,d){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const g="F"===e.limitType?t.last():t.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(d)>0)}Ni(e,t){return bu()<=Qe.in.DEBUG&&mt("QueryEngine","Using full collection scan to execute query:",ir(t)),this.Di.getDocumentsMatchingQuery(e,t,Xn.min())}Mi(e,t,s,d){return this.Di.getDocumentsMatchingQuery(e,s,d).next(g=>(t.forEach(v=>{g=g.insert(v.key,v)}),g))}}class Wf{constructor(e,t,s,d){this.persistence=e,this.Fi=t,this.wt=d,this.$i=new Si(an),this.Bi=new Uo(g=>Cl(g),Jo),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nd(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function Qh(i,e,t,s){return new Wf(i,e,t,s)}function zf(i,e){return al.apply(this,arguments)}function al(){return al=(0,Ie.Z)(function*(i,e){const t=M(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let d;return t.mutationQueue.getAllMutationBatches(s).next(g=>(d=g,t.qi(e),t.mutationQueue.getAllMutationBatches(s))).next(g=>{const v=[],x=[];let j=In();for(const q of d){v.push(q.batchId);for(const ie of q.mutations)j=j.add(ie.key)}for(const q of g){x.push(q.batchId);for(const ie of q.mutations)j=j.add(ie.key)}return t.localDocuments.getDocuments(s,j).next(q=>({Ki:q,removedBatchIds:v,addedBatchIds:x}))})})}),al.apply(this,arguments)}function Kf(i,e){const t=M(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const d=e.batch.keys(),g=t.Ui.newChangeBuffer({trackRemovals:!0});return function(v,x,j,q){const ie=j.batch,me=ie.keys();let Ze=$e.resolve();return me.forEach(dt=>{Ze=Ze.next(()=>q.getEntry(x,dt)).next(yt=>{const qt=j.docVersions.get(dt);D(null!==qt),yt.version.compareTo(qt)<0&&(ie.applyToRemoteDocument(yt,j),yt.isValidDocument()&&(yt.setReadTime(j.commitVersion),q.addEntry(yt)))})}),Ze.next(()=>v.mutationQueue.removeMutationBatch(x,ie))}(t,s,e,g).next(()=>g.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(v){let x=In();for(let j=0;j<v.mutationResults.length;++j)v.mutationResults[j].transformResults.length>0&&(x=x.add(v.batch.mutations[j].key));return x}(e))).next(()=>t.localDocuments.getDocuments(s,d))})}function Jh(i){const e=M(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function am(i,e){const t=M(i),s=e.snapshotVersion;let d=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const v=t.Ui.newChangeBuffer({trackRemovals:!0});d=t.$i;const x=[];e.targetChanges.forEach((ie,me)=>{const Ze=d.get(me);if(!Ze)return;x.push(t.Vs.removeMatchingKeys(g,ie.removedDocuments,me).next(()=>t.Vs.addMatchingKeys(g,ie.addedDocuments,me)));let dt=Ze.withSequenceNumber(g.currentSequenceNumber);var yt,qt,fn;e.targetMismatches.has(me)?dt=dt.withResumeToken(Fr.EMPTY_BYTE_STRING,un.min()).withLastLimboFreeSnapshotVersion(un.min()):ie.resumeToken.approximateByteSize()>0&&(dt=dt.withResumeToken(ie.resumeToken,s)),d=d.insert(me,dt),qt=dt,fn=ie,(0===(yt=Ze).resumeToken.approximateByteSize()||qt.snapshotVersion.toMicroseconds()-yt.snapshotVersion.toMicroseconds()>=3e8||fn.addedDocuments.size+fn.modifiedDocuments.size+fn.removedDocuments.size>0)&&x.push(t.Vs.updateTargetData(g,dt))});let j=ta(),q=In();if(e.documentUpdates.forEach(ie=>{e.resolvedLimboDocuments.has(ie)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(g,ie))}),x.push(Xh(g,v,e.documentUpdates).next(ie=>{j=ie.Gi,q=ie.Qi})),!s.isEqual(un.min())){const ie=t.Vs.getLastRemoteSnapshotVersion(g).next(me=>t.Vs.setTargetsMetadata(g,g.currentSequenceNumber,s));x.push(ie)}return $e.waitFor(x).next(()=>v.apply(g)).next(()=>t.localDocuments.getLocalViewOfDocuments(g,j,q)).next(()=>j)}).then(g=>(t.$i=d,g))}function Xh(i,e,t){let s=In(),d=In();return t.forEach(g=>s=s.add(g)),e.getEntries(i,s).next(g=>{let v=ta();return t.forEach((x,j)=>{const q=g.get(x);j.isFoundDocument()!==q.isFoundDocument()&&(d=d.add(x)),j.isNoDocument()&&j.version.isEqual(un.min())?(e.removeEntry(x,j.readTime),v=v.insert(x,j)):!q.isValidDocument()||j.version.compareTo(q.version)>0||0===j.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(j),v=v.insert(x,j)):mt("LocalStore","Ignoring outdated watch update for ",x,". Current version:",q.version," Watch version:",j.version)}),{Gi:v,Qi:d}})}function um(i,e){const t=M(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function ul(i,e){const t=M(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let d;return t.Vs.getTargetData(s,e).next(g=>g?(d=g,$e.resolve(d)):t.Vs.allocateTargetId(s).next(v=>(d=new tu(e,v,0,s.currentSequenceNumber),t.Vs.addTargetData(s,d).next(()=>d))))}).then(s=>{const d=t.$i.get(s.targetId);return(null===d||s.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.$i=t.$i.insert(s.targetId,s),t.Bi.set(e,s.targetId)),s})}function id(i,e,t){return og.apply(this,arguments)}function og(){return og=(0,Ie.Z)(function*(i,e,t){const s=M(i),d=s.$i.get(e),g=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",g,v=>s.persistence.referenceDelegate.removeTarget(v,d)))}catch(v){if(!mo(v))throw v;mt("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}s.$i=s.$i.remove(e),s.Bi.delete(d.target)}),og.apply(this,arguments)}function qf(i,e,t){const s=M(i);let d=un.min(),g=In();return s.persistence.runTransaction("Execute query","readonly",v=>function(x,j,q){const ie=M(x),me=ie.Bi.get(q);return void 0!==me?$e.resolve(ie.$i.get(me)):ie.Vs.getTargetData(j,q)}(s,v,Gn(e)).next(x=>{if(x)return d=x.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(v,x.targetId).next(j=>{g=j})}).next(()=>s.Fi.getDocumentsMatchingQuery(v,e,t?d:un.min(),t?g:In())).next(x=>(lm(s,Qa(e),x),{documents:x,ji:g})))}function ia(i,e){const t=M(i),s=M(t.Vs),d=t.$i.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",g=>s.te(g,e).next(v=>v?v.target:null))}function Zf(i,e){const t=M(i),s=t.Li.get(e)||un.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Ui.getAllFromCollectionGroup(d,e,Tu(s,-1),Number.MAX_SAFE_INTEGER)).then(d=>(lm(t,e,d),d))}function lm(i,e,t){let s=un.min();t.forEach((d,g)=>{g.readTime.compareTo(s)>0&&(s=g.readTime)}),i.Li.set(e,s)}function cm(){return cm=(0,Ie.Z)(function*(i,e,t,s){const d=M(i);let g=In(),v=ta();for(const q of t){const ie=e.Wi(q.metadata.name);q.document&&(g=g.add(ie));const me=e.zi(q);me.setReadTime(e.Hi(q.metadata.readTime)),v=v.insert(ie,me)}const x=d.Ui.newChangeBuffer({trackRemovals:!0}),j=yield ul(d,(q=s,Gn(bl(Jn.fromString(`__bundle__/docs/${q}`)))));var q;return d.persistence.runTransaction("Apply bundle documents","readwrite",q=>Xh(q,x,v).next(ie=>(x.apply(q),ie)).next(ie=>d.Vs.removeMatchingKeysForTargetId(q,j.targetId).next(()=>d.Vs.addMatchingKeys(q,g,j.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(q,ie.Gi,ie.Qi)).next(()=>ie.Gi)))}),cm.apply(this,arguments)}function dm(i,e){return ag.apply(this,arguments)}function ag(){return ag=(0,Ie.Z)(function*(i,e,t=In()){const s=yield ul(i,Gn(Pa(e.bundledQuery))),d=M(i);return d.persistence.runTransaction("Save named query","readwrite",g=>{const v=Ri(e.readTime);if(s.snapshotVersion.compareTo(v)>=0)return d.Ds.saveNamedQuery(g,e);const x=s.withResumeToken(Fr.EMPTY_BYTE_STRING,v);return d.$i=d.$i.insert(x.targetId,x),d.Vs.updateTargetData(g,x).next(()=>d.Vs.removeMatchingKeysForTargetId(g,s.targetId)).next(()=>d.Vs.addMatchingKeys(g,t,s.targetId)).next(()=>d.Ds.saveNamedQuery(g,e))})}),ag.apply(this,arguments)}function Yf(i,e){return`firestore_clients_${i}_${e}`}function Jd(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function Xd(i,e){return`firestore_targets_${i}_${e}`}class sd{constructor(e,t,s,d){this.user=e,this.batchId=t,this.state=s,this.error=d}static Ji(e,t,s){const d=JSON.parse(s);let g,v="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return v&&d.error&&(v="string"==typeof d.error.message&&"string"==typeof d.error.code,v&&(g=new W(d.error.code,d.error.message))),v?new sd(e,t,d.state,g):(Pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bu{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let d,g="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return g&&s.error&&(g="string"==typeof s.error.message&&"string"==typeof s.error.code,g&&(d=new W(s.error.code,s.error.message))),g?new Bu(e,s.state,d):(Pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let d="object"==typeof s&&s.activeTargetIds instanceof Array,g=xn();for(let v=0;d&&v<s.activeTargetIds.length;++v)d=hn(s.activeTargetIds[v]),g=g.add(s.activeTargetIds[v]);return d?new eh(e,g):(Pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class ef{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new ef(t.clientId,t.onlineState):(Pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ug{constructor(){this.activeTargetIds=xn()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class od{constructor(e,t,s,d,g){this.window=e,this.js=t,this.persistenceKey=s,this.tr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new Si(an),this.started=!1,this.ir=[];const v=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=g,this.rr=Yf(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new ug),this.cr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.Ri();for(const d of t){if(d===e.tr)continue;const g=e.getItem(Yf(e.persistenceKey,d));if(g){const v=eh.Ji(d,g);v&&(e.sr=e.sr.insert(v.clientId,v))}}e._r();const s=e.storage.getItem(e.lr);if(s){const d=e.wr(s);d&&e.mr(d)}for(const d of e.ir)e.nr(d);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Xd(this.persistenceKey,e));if(s){const d=Bu.Ji(e,s);d&&(t=d.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Xd(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(d=>{this.pr(d)}),this.currentUser=e,s.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return mt("SharedClientState","READ",e,t),t}setItem(e,t){mt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){mt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(mt("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void Pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const d=t.Rr(s.key);return t.br(d,null)}{const d=t.Pr(s.key,s.newValue);if(d)return t.br(d.clientId,d)}}else if(t.ar.test(s.key)){if(null!==s.newValue){const d=t.vr(s.key,s.newValue);if(d)return t.Vr(d)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const d=t.Sr(s.key,s.newValue);if(d)return t.Dr(d)}}else if(s.key===t.lr){if(null!==s.newValue){const d=t.wr(s.newValue);if(d)return t.mr(d)}}else if(s.key===t.ur){const d=function(g){let v=ss.ot;if(null!=g)try{const x=JSON.parse(g);D("number"==typeof x),v=x}catch(x){Pr("SharedClientState","Failed to read sequence number from WebStorage",x)}return v}(s.newValue);d!==ss.ot&&t.sequenceNumberHandler(d)}else if(s.key===t.dr){const d=t.Cr(s.newValue);yield Promise.all(d.map(g=>t.syncEngine.Nr(g)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const d=new sd(this.currentUser,e,t,s),g=Jd(this.persistenceKey,this.currentUser,e);this.setItem(g,d.Yi())}pr(e){const t=Jd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const d=Xd(this.persistenceKey,e),g=new Bu(e,t,s);this.setItem(d,g.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return eh.Ji(s,t)}vr(e,t){const s=this.ar.exec(e),d=Number(s[1]);return sd.Ji(new ji(void 0!==s[2]?s[2]:null),d,t)}Sr(e,t){const s=this.hr.exec(e),d=Number(s[1]);return Bu.Ji(d,t)}wr(e){return ef.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);mt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),d=this.gr(this.sr),g=this.gr(s),v=[],x=[];return g.forEach(j=>{d.has(j)||v.push(j)}),d.forEach(j=>{g.has(j)||x.push(j)}),this.syncEngine.Mr(v,x).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=xn();return e.forEach((s,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class lg{constructor(){this.Fr=new ug,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new ug,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class a_{Br(e){}shutdown(){}}class ad{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){mt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){mt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Qf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class u_{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class ll extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,d,g){const v=this.oo(e,t);mt("RestConnection","Sending: ",v,s);const x={};return this.uo(x,d,g),this.co(e,v,x,s).then(j=>(mt("RestConnection","Received: ",j),j),j=>{throw Mo("RestConnection",`${e} failed with error: `,j,"url: ",v,"request:",s),j})}ao(e,t,s,d,g,v){return this.ro(e,t,s,d,g)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+ma,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,g)=>e[g]=d),s&&s.headers.forEach((d,g)=>e[g]=d)}oo(e,t){return`${this.so}/v1/${t}:${Qf[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,d){return new Promise((g,v)=>{const x=new io;x.listenOnce(_l.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case ro.NO_ERROR:const q=x.getResponseJson();mt("Connection","XHR received:",JSON.stringify(q)),g(q);break;case ro.TIMEOUT:mt("Connection",'RPC "'+e+'" timed out'),v(new W(N.DEADLINE_EXCEEDED,"Request time out"));break;case ro.HTTP_ERROR:const ie=x.getStatus();if(mt("Connection",'RPC "'+e+'" failed with status:',ie,"response text:",x.getResponseText()),ie>0){const me=x.getResponseJson().error;if(me&&me.status&&me.message){const Ze=function(dt){const yt=dt.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(yt)>=0?yt:N.UNKNOWN}(me.status);v(new W(Ze,me.message))}else v(new W(N.UNKNOWN,"Server responded with status "+x.getStatus()))}else v(new W(N.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{mt("Connection",'RPC "'+e+'" completed.')}});const j=JSON.stringify(d);x.send(t,"POST",j,s,15)})}ho(e,t,s){const d=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],g=Ku(),v=$a(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new qu({})),this.uo(x.initMessageHeaders,t,s),(0,He.uI)()||(0,He.b$)()||(0,He.d)()||(0,He.w1)()||(0,He.Mn)()||(0,He.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const j=d.join("");mt("Connection","Creating WebChannel: "+j,x);const q=g.createWebChannel(j,x);let ie=!1,me=!1;const Ze=new u_({jr:yt=>{me?mt("Connection","Not sending because WebChannel is closed:",yt):(ie||(mt("Connection","Opening WebChannel transport."),q.open(),ie=!0),mt("Connection","WebChannel sending:",yt),q.send(yt))},Wr:()=>q.close()}),dt=(yt,qt,fn)=>{yt.listen(qt,ai=>{try{fn(ai)}catch(fs){setTimeout(()=>{throw fs},0)}})};return dt(q,Ar.EventType.OPEN,()=>{me||mt("Connection","WebChannel transport opened.")}),dt(q,Ar.EventType.CLOSE,()=>{me||(me=!0,mt("Connection","WebChannel transport closed"),Ze.eo())}),dt(q,Ar.EventType.ERROR,yt=>{me||(me=!0,Mo("Connection","WebChannel transport errored:",yt),Ze.eo(new W(N.UNAVAILABLE,"The operation could not be completed")))}),dt(q,Ar.EventType.MESSAGE,yt=>{var qt;if(!me){const fn=yt.data[0];D(!!fn);const ai=fn,fs=ai.error||(null===(qt=ai[0])||void 0===qt?void 0:qt.error);if(fs){mt("Connection","WebChannel received error:",fs);const zr=fs.status;let Co=function(Us){const Da=Xi[Us];if(void 0!==Da)return $i(Da)}(zr),os=fs.message;void 0===Co&&(Co=N.INTERNAL,os="Unknown error status: "+zr+" with message "+fs.message),me=!0,Ze.eo(new W(Co,os)),q.close()}else mt("Connection","WebChannel received:",fn),Ze.no(fn)}}),dt(v,ql.STAT_EVENT,yt=>{yt.stat===Hs.PROXY?mt("Connection","Detected buffering proxy"):yt.stat===Hs.NOPROXY&&mt("Connection","Detected no buffering proxy")}),setTimeout(()=>{Ze.Zr()},0),Ze}}function Jf(){return"undefined"!=typeof window?window:null}function th(){return"undefined"!=typeof document?document:null}function yc(i){return new zc(i,!0)}class cg{constructor(e,t,s=1e3,d=1.5,g=6e4){this.js=e,this.timerId=t,this.lo=s,this.fo=d,this._o=g,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),d=Math.max(0,t-s);d>0&&mt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,d,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class dg{constructor(e,t,s,d,g,v,x,j){this.js=e,this.Ao=s,this.Ro=d,this.bo=g,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=x,this.listener=j,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new cg(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,Ie.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var s=this;return(0,Ie.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===N.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,d])=>{this.Po===t&&this.Uo(s,d)},s=>{e(()=>{const d=new W(N.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(d)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(d=>{s(()=>this.qo(d))}),this.stream.onMessage(d=>{s(()=>this.onMessage(d))})}xo(){var e=this;this.state=5,this.So.Io((0,Ie.Z)(function*(){e.state=0,e.start()}))}qo(e){return mt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(mt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tf extends dg{constructor(e,t,s,d,g,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,d,v),this.wt=g}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function nt(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:S(),d=e.targetChange.targetIds||[],g=function(j,q){return j.dt?(D(void 0===q||"string"==typeof q),Fr.fromBase64String(q||"")):(D(void 0===q||q instanceof Uint8Array),Fr.fromUint8Array(q||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,x=v&&function(j){const q=void 0===j.code?N.UNKNOWN:$i(j.code);return new W(q,j.message||"")}(v);t=new Vd(s,d,g,x||null)}else if("documentChange"in e){const s=e.documentChange,d=hs(i,s.document.name),g=Ri(s.document.updateTime),v=new Ws({mapValue:{fields:s.document.fields}}),x=si.newFoundDocument(d,g,v);t=new Ld(s.targetIds||[],s.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const s=e.documentDelete,d=hs(i,s.document),g=s.readTime?Ri(s.readTime):un.min(),v=si.newNoDocument(d,g);t=new Ld([],s.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const s=e.documentRemove,d=hs(i,s.document);t=new Ld([],s.removedTargetIds||[],d,null)}else{if(!("filter"in e))return S();{const s=e.filter,g=new Vo(s.count||0);t=new oi(s.targetId,g)}}var j;return t}(this.wt,e),s=function(d){if(!("targetChange"in d))return un.min();const g=d.targetChange;return g.targetIds&&g.targetIds.length?un.min():g.readTime?Ri(g.readTime):un.min()}(e);return this.listener.Go(t,s)}Qo(e){const t={};t.database=m(this.wt),t.addTarget=function(d,g){let v;const x=g.target;return v=Za(x)?{documents:ln(d,x)}:{query:es(d,x)},v.targetId=g.targetId,g.resumeToken.approximateByteSize()>0?v.resumeToken=Ud(d,g.resumeToken):g.snapshotVersion.compareTo(un.min())>0&&(v.readTime=Sl(d,g.snapshotVersion.toTimestamp())),v}(this.wt,e);const s=function Kc(i,e){const t=function(s,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return S()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Mo(t)}jo(e){const t={};t.database=m(this.wt),t.removeTarget=e,this.Mo(t)}}class cl extends dg{constructor(e,t,s,d,g,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,d,v),this.wt=g,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(D(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function gn(i,e){return i&&i.length>0?(D(void 0!==e),i.map(t=>function(s,d){let g=Ri(s.updateTime?s.updateTime:d);return g.isEqual(un.min())&&(g=Ri(d)),new xh(g,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=Ri(e.commitTime);return this.listener.Jo(s,t)}return D(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=m(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Dt(this.wt,s))};this.Mo(t)}}class nf extends class{}{constructor(e,t,s,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.wt=d,this.Zo=!1}tu(){if(this.Zo)throw new W(N.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.bo.ro(e,t,s,d,g)).catch(d=>{throw"FirebaseError"===d.name?(d.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new W(N.UNKNOWN,d.toString())})}ao(e,t,s,d){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,v])=>this.bo.ao(e,t,s,g,v,d)).catch(g=>{throw"FirebaseError"===g.name?(g.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new W(N.UNKNOWN,g.toString())})}terminate(){this.Zo=!0}}class hg{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Pr(t),this.su=!1):mt("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class hm{constructor(e,t,s,d,g){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=g,this.du.Br(x=>{s.enqueueAndForget((0,Ie.Z)(function*(){var j;wc(v)&&(mt("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,Ie.Z)(function*(q){const ie=M(q);ie.lu.add(4),yield _u(ie),ie._u.set("Unknown"),ie.lu.delete(4),yield ud(ie)}),function(q){return j.apply(this,arguments)})(v))}))}),this._u=new hg(s,d)}}function ud(i){return dl.apply(this,arguments)}function dl(){return dl=(0,Ie.Z)(function*(i){if(wc(i))for(const e of i.fu)yield e(!0)}),dl.apply(this,arguments)}function _u(i){return fg.apply(this,arguments)}function fg(){return fg=(0,Ie.Z)(function*(i){for(const e of i.fu)yield e(!1)}),fg.apply(this,arguments)}function Ho(i,e){const t=M(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),sa(t)?ep(t):Vl(t).Co()&&Xf(t,e))}function vc(i,e){const t=M(i),s=Vl(t);t.hu.delete(e),s.Co()&&rf(t,e),0===t.hu.size&&(s.Co()?s.ko():wc(t)&&t._u.set("Unknown"))}function Xf(i,e){i.wu.Nt(e.targetId),Vl(i).Qo(e)}function rf(i,e){i.wu.Nt(e),Vl(i).jo(e)}function ep(i){i.wu=new vo({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),Vl(i).start(),i._u.iu()}function sa(i){return wc(i)&&!Vl(i).Do()&&i.hu.size>0}function wc(i){return 0===M(i).lu.size}function fm(i){i.wu=void 0}function pg(i){return tp.apply(this,arguments)}function tp(){return tp=(0,Ie.Z)(function*(i){i.hu.forEach((e,t)=>{Xf(i,e)})}),tp.apply(this,arguments)}function pm(i,e){return np.apply(this,arguments)}function np(){return np=(0,Ie.Z)(function*(i,e){fm(i),sa(i)?(i._u.uu(e),ep(i)):i._u.set("Unknown")}),np.apply(this,arguments)}function gg(i,e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=(0,Ie.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof Vd&&2===e.state&&e.cause)try{yield(s=(0,Ie.Z)(function*(d,g){const v=g.cause;for(const x of g.targetIds)d.hu.has(x)&&(yield d.remoteSyncer.rejectListen(x,v),d.hu.delete(x),d.wu.removeTarget(x))}),function(d,g){return s.apply(this,arguments)})(i,e)}catch(s){mt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield Ec(i,s)}else if(e instanceof Ld?i.wu.Ut(e):e instanceof oi?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(un.min()))try{const s=yield Jh(i.localStore);t.compareTo(s)>=0&&(yield function(d,g){const v=d.wu.Yt(g);return v.targetChanges.forEach((x,j)=>{if(x.resumeToken.approximateByteSize()>0){const q=d.hu.get(j);q&&d.hu.set(j,q.withResumeToken(x.resumeToken,g))}}),v.targetMismatches.forEach(x=>{const j=d.hu.get(x);if(!j)return;d.hu.set(x,j.withResumeToken(Fr.EMPTY_BYTE_STRING,j.snapshotVersion)),rf(d,x);const q=new tu(j.target,x,1,j.sequenceNumber);Xf(d,q)}),d.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(s){mt("RemoteStore","Failed to raise snapshot:",s),yield Ec(i,s)}var s}),Ia.apply(this,arguments)}function Ec(i,e,t){return rp.apply(this,arguments)}function rp(){return rp=(0,Ie.Z)(function*(i,e,t){if(!mo(e))throw e;i.lu.add(1),yield _u(i),i._u.set("Offline"),t||(t=()=>Jh(i.localStore)),i.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){mt("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield ud(i)}))}),rp.apply(this,arguments)}function gm(i,e){return e().catch(t=>Ec(i,t,e))}function ld(i){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,Ie.Z)(function*(i){const e=M(i),t=iu(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;mm(e);)try{const d=yield um(e.localStore,s);if(null===d){0===e.au.length&&t.ko();break}s=d.batchId,sf(e,d)}catch(d){yield Ec(e,d)}nh(e)&&_m(e)}),Ic.apply(this,arguments)}function mm(i){return wc(i)&&i.au.length<10}function sf(i,e){i.au.push(e);const t=iu(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function nh(i){return wc(i)&&!iu(i).Do()&&i.au.length>0}function _m(i){iu(i).start()}function mg(i){return af.apply(this,arguments)}function af(){return af=(0,Ie.Z)(function*(i){iu(i).Xo()}),af.apply(this,arguments)}function ym(i){return ip.apply(this,arguments)}function ip(){return ip=(0,Ie.Z)(function*(i){const e=iu(i);for(const t of i.au)e.Ho(t.mutations)}),ip.apply(this,arguments)}function l_(i,e,t){return cd.apply(this,arguments)}function cd(){return cd=(0,Ie.Z)(function*(i,e,t){const s=i.au.shift(),d=Uu.from(s,e,t);yield gm(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield ld(i)}),cd.apply(this,arguments)}function vm(i,e){return _g.apply(this,arguments)}function _g(){return _g=(0,Ie.Z)(function*(i,e){var t;e&&iu(i).zo&&(yield(t=(0,Ie.Z)(function*(s,d){if(Hc(g=d.code)&&g!==N.ABORTED){const v=s.au.shift();iu(s).No(),yield gm(s,()=>s.remoteSyncer.rejectFailedWrite(v.batchId,d)),yield ld(s)}var g}),function(s,d){return t.apply(this,arguments)})(i,e)),nh(i)&&_m(i)}),_g.apply(this,arguments)}function Ll(i,e){return Ca.apply(this,arguments)}function Ca(){return Ca=(0,Ie.Z)(function*(i,e){const t=M(i);t.asyncQueue.verifyOperationInProgress(),mt("RemoteStore","RemoteStore received new credentials");const s=wc(t);t.lu.add(3),yield _u(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield ud(t)}),Ca.apply(this,arguments)}function sp(i,e){return uf.apply(this,arguments)}function uf(){return uf=(0,Ie.Z)(function*(i,e){const t=M(i);e?(t.lu.delete(2),yield ud(t)):e||(t.lu.add(2),yield _u(t),t._u.set("Unknown"))}),uf.apply(this,arguments)}function Vl(i){return i.mu||(i.mu=function(e,t,s){const d=M(e);return d.tu(),new tf(t,d.bo,d.authCredentials,d.appCheckCredentials,d.wt,s)}(i.datastore,i.asyncQueue,{zr:pg.bind(null,i),Jr:pm.bind(null,i),Go:gg.bind(null,i)}),i.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(i.mu.No(),sa(i)?ep(i):i._u.set("Unknown")):(yield i.mu.stop(),fm(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function iu(i){return i.gu||(i.gu=function(e,t,s){const d=M(e);return d.tu(),new cl(t,d.bo,d.authCredentials,d.appCheckCredentials,d.wt,s)}(i.datastore,i.asyncQueue,{zr:mg.bind(null,i),Jr:vm.bind(null,i),Yo:ym.bind(null,i),Jo:l_.bind(null,i)}),i.fu.push(function(){var e=(0,Ie.Z)(function*(t){t?(i.gu.No(),yield ld(i)):(yield i.gu.stop(),i.au.length>0&&(mt("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class Cc{constructor(e,t,s,d,g){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=d,this.removalCallback=g,this.deferred=new ae,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,s,d,g){const v=Date.now()+s,x=new Cc(e,t,v,d,g);return x.start(s),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new W(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rh(i,e){if(Pr("AsyncQueue",`${e}: ${i}`),mo(i))return new W(N.UNAVAILABLE,`${e}: ${i}`);throw i}class dd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ot.comparator(t.key,s.key):(t,s)=>Ot.comparator(t.key,s.key),this.keyedMap=nc(),this.sortedSet=new Si(this.comparator)}static emptySet(e){return new dd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,g=s.getNext().key;if(!d.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new dd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class yg{constructor(){this.yu=new Si(Ot.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):S():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Go{constructor(e,t,s,d,g,v,x,j){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=d,this.mutatedKeys=g,this.fromCache=v,this.syncStateChanged=x,this.excludesMetadataChanges=j}static fromInitialDocuments(e,t,s,d){const g=[];return t.forEach(v=>{g.push({type:0,doc:v})}),new Go(e,t,dd.emptySet(t),g,s,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==s[d].type||!t[d].doc.isEqual(s[d].doc))return!1;return!0}}class ih{constructor(){this.Iu=void 0,this.listeners=[]}}class op{constructor(){this.queries=new Uo(e=>Xu(e),Bn),this.onlineState="Unknown",this.Tu=new Set}}function sh(i,e){return ap.apply(this,arguments)}function ap(){return ap=(0,Ie.Z)(function*(i,e){const t=M(i),s=e.query;let d=!1,g=t.queries.get(s);if(g||(d=!0,g=new ih),d)try{g.Iu=yield t.onListen(s)}catch(v){const x=rh(v,`Initialization of query '${ir(e.query)}' failed`);return void e.onError(x)}t.queries.set(s,g),g.listeners.push(e),e.Eu(t.onlineState),g.Iu&&e.Au(g.Iu)&&lp(t)}),ap.apply(this,arguments)}function up(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,Ie.Z)(function*(i,e){const t=M(i),s=e.query;let d=!1;const g=t.queries.get(s);if(g){const v=g.listeners.indexOf(e);v>=0&&(g.listeners.splice(v,1),d=0===g.listeners.length)}if(d)return t.queries.delete(s),t.onUnlisten(s)}),lf.apply(this,arguments)}function c_(i,e){const t=M(i);let s=!1;for(const d of e){const v=t.queries.get(d.query);if(v){for(const x of v.listeners)x.Au(d)&&(s=!0);v.Iu=d}}s&&lp(t)}function wm(i,e,t){const s=M(i),d=s.queries.get(e);if(d)for(const g of d.listeners)g.onError(t);s.queries.delete(e)}function lp(i){i.Tu.forEach(e=>{e.next()})}class cf{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const d of e.docChanges)3!==d.type&&s.push(d);e=new Go(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class d_{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class oa{constructor(e){this.wt=e}Wi(e){return hs(this.wt,e)}zi(e){return e.metadata.exists?ee(this.wt,e.document,!1):si.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return Ri(e)}}class cp{constructor(e,t,s){this.xu=e,this.localStore=t,this.wt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ul(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=Jn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new oa(this.wt);for(const d of e)if(d.metadata.queries){const g=s.Wi(d.metadata.name);for(const v of d.metadata.queries){const x=(t.get(v)||In()).add(g);t.set(v,x)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function o_(i,e,t,s){return cm.apply(this,arguments)}(e.localStore,new oa(e.wt),e.documents,e.xu.id),s=e.ku(e.documents);for(const d of e.queries)yield dm(e.localStore,d,s.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Ul(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class dp{constructor(e){this.key=e}}class yu{constructor(e){this.key=e}}class hl{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=In(),this.mutatedKeys=In(),this.Lu=Ma(e),this.Uu=new dd(this.Lu)}get qu(){return this.Fu}Ku(e,t){const s=t?t.Gu:new yg,d=t?t.Uu:this.Uu;let g=t?t.mutatedKeys:this.mutatedKeys,v=d,x=!1;const j="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,q="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ie,me)=>{const Ze=d.get(ie),dt=Jl(this.query,me)?me:null,yt=!!Ze&&this.mutatedKeys.has(Ze.key),qt=!!dt&&(dt.hasLocalMutations||this.mutatedKeys.has(dt.key)&&dt.hasCommittedMutations);let fn=!1;Ze&&dt?Ze.data.isEqual(dt.data)?yt!==qt&&(s.track({type:3,doc:dt}),fn=!0):this.Qu(Ze,dt)||(s.track({type:2,doc:dt}),fn=!0,(j&&this.Lu(dt,j)>0||q&&this.Lu(dt,q)<0)&&(x=!0)):!Ze&&dt?(s.track({type:0,doc:dt}),fn=!0):Ze&&!dt&&(s.track({type:1,doc:Ze}),fn=!0,(j||q)&&(x=!0)),fn&&(dt?(v=v.add(dt),g=qt?g.add(ie):g.delete(ie)):(v=v.delete(ie),g=g.delete(ie)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ie="F"===this.query.limitType?v.last():v.first();v=v.delete(ie.key),g=g.delete(ie.key),s.track({type:1,doc:ie})}return{Uu:v,Gu:s,Oi:x,mutatedKeys:g}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const d=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const g=e.Gu.pu();g.sort((q,ie)=>function(me,Ze){const dt=yt=>{switch(yt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return dt(me)-dt(Ze)}(q.type,ie.type)||this.Lu(q.doc,ie.doc)),this.ju(s);const v=t?this.Wu():[],x=0===this.Bu.size&&this.current?1:0,j=x!==this.$u;return this.$u=x,0!==g.length||j?{snapshot:new Go(this.query,e.Uu,d,g,e.mutatedKeys,0===x,j,!1),zu:v}:{zu:v}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new yg,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=In(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new yu(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new dp(s))}),t}Ju(e){this.Fu=e.ji,this.Bu=In();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Go.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Em{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class vg{constructor(e){this.key=e,this.Xu=!1}}class bc{constructor(e,t,s,d,g,v){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=d,this.currentUser=g,this.maxConcurrentLimboResolutions=v,this.Zu={},this.tc=new Uo(x=>Xu(x),Bn),this.ec=new Map,this.nc=new Set,this.sc=new Si(Ot.comparator),this.ic=new Map,this.rc=new ig,this.oc={},this.uc=new Map,this.cc=td.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function Wy(i,e){return su.apply(this,arguments)}function su(){return su=(0,Ie.Z)(function*(i,e){const t=Ip(i);let s,d;const g=t.tc.get(e);if(g)s=g.targetId,t.sharedClientState.addLocalQueryTarget(s),d=g.view.Yu();else{const v=yield ul(t.localStore,Gn(e));t.isPrimaryClient&&Ho(t.remoteStore,v);const x=t.sharedClientState.addLocalQueryTarget(v.targetId);s=v.targetId,d=yield Im(t,e,s,"current"===x)}return d}),su.apply(this,arguments)}function Im(i,e,t,s){return hp.apply(this,arguments)}function hp(){return hp=(0,Ie.Z)(function*(i,e,t,s){i.hc=(ie,me,Ze)=>{return(dt=(0,Ie.Z)(function*(yt,qt,fn,ai){let fs=qt.view.Ku(fn);fs.Oi&&(fs=yield qf(yt.localStore,qt.query,!1).then(({documents:os})=>qt.view.Ku(os,fs)));const zr=ai&&ai.targetChanges.get(qt.targetId),Co=qt.view.applyChanges(fs,yt.isPrimaryClient,zr);return Ig(yt,qt.targetId,Co.zu),Co.snapshot}),function(yt,qt,fn,ai){return dt.apply(this,arguments)})(i,ie,me,Ze);var dt};const d=yield qf(i.localStore,e,!0),g=new hl(e,d.ji),v=g.Ku(d.documents),x=fu.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),j=g.applyChanges(v,i.isPrimaryClient,x);Ig(i,t,j.zu);const q=new Em(e,t,g);return i.tc.set(e,q),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),j.snapshot}),hp.apply(this,arguments)}function Cm(i,e){return fp.apply(this,arguments)}function fp(){return fp=(0,Ie.Z)(function*(i,e){const t=M(i),s=t.tc.get(e),d=t.ec.get(s.targetId);if(d.length>1)return t.ec.set(s.targetId,d.filter(g=>!Bn(g,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield id(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),vc(t.remoteStore,s.targetId),uh(t,s.targetId)}).catch(Hr))):(uh(t,s.targetId),yield id(t.localStore,s.targetId,!0))}),fp.apply(this,arguments)}function wg(){return wg=(0,Ie.Z)(function*(i,e,t){const s=Cp(i);try{const d=yield function(g,v){const x=M(g),j=$r.now(),q=v.reduce((Ze,dt)=>Ze.add(dt.key),In());let ie,me;return x.persistence.runTransaction("Locally write mutations","readwrite",Ze=>{let dt=ta(),yt=In();return x.Ui.getEntries(Ze,q).next(qt=>{dt=qt,dt.forEach((fn,ai)=>{ai.isValidDocument()||(yt=yt.add(fn))})}).next(()=>x.localDocuments.getOverlayedDocuments(Ze,dt)).next(qt=>{ie=qt;const fn=[];for(const ai of v){const fs=kd(ai,ie.get(ai.key).overlayedDocument);null!=fs&&fn.push(new Fs(ai.key,fs,bf(fs.value.mapValue),xi.exists(!0)))}return x.mutationQueue.addMutationBatch(Ze,j,fn,v)}).next(qt=>{me=qt;const fn=qt.applyToLocalDocumentSet(ie,yt);return x.documentOverlayCache.saveOverlays(Ze,qt.batchId,fn)})}).then(()=>({batchId:me.batchId,changes:nr(ie)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(d.batchId),function(g,v,x){let j=g.oc[g.currentUser.toKey()];j||(j=new Si(an)),j=j.insert(v,x),g.oc[g.currentUser.toKey()]=j}(s,d.batchId,t),yield Eo(s,d.changes),yield ld(s.remoteStore)}catch(d){const g=rh(d,"Failed to persist write");t.reject(g)}}),wg.apply(this,arguments)}function pp(i,e){return hd.apply(this,arguments)}function hd(){return hd=(0,Ie.Z)(function*(i,e){const t=M(i);try{const s=yield am(t.localStore,e);e.targetChanges.forEach((d,g)=>{const v=t.ic.get(g);v&&(D(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?v.Xu=!0:d.modifiedDocuments.size>0?D(v.Xu):d.removedDocuments.size>0&&(D(v.Xu),v.Xu=!1))}),yield Eo(t,s,e)}catch(s){yield Hr(s)}}),hd.apply(this,arguments)}function Dc(i,e,t){const s=M(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const d=[];s.tc.forEach((g,v)=>{const x=v.view.Eu(e);x.snapshot&&d.push(x.snapshot)}),function(g,v){const x=M(g);x.onlineState=v;let j=!1;x.queries.forEach((q,ie)=>{for(const me of ie.listeners)me.Eu(v)&&(j=!0)}),j&&lp(x)}(s.eventManager,e),d.length&&s.Zu.Go(d),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function Eg(i,e,t){return oh.apply(this,arguments)}function oh(){return oh=(0,Ie.Z)(function*(i,e,t){const s=M(i);s.sharedClientState.updateQueryState(e,"rejected",t);const d=s.ic.get(e),g=d&&d.key;if(g){let v=new Si(Ot.comparator);v=v.insert(g,si.newNoDocument(g,un.min()));const x=In().add(g),j=new na(un.min(),new Map,new er(an),v,x);yield pp(s,j),s.sc=s.sc.remove(g),s.ic.delete(e),df(s)}else yield id(s.localStore,e,!1).then(()=>uh(s,e,t)).catch(Hr)}),oh.apply(this,arguments)}function Dm(i,e){return gp.apply(this,arguments)}function gp(){return gp=(0,Ie.Z)(function*(i,e){const t=M(i),s=e.batch.batchId;try{const d=yield Kf(t.localStore,e);Tc(t,s,null),ah(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield Eo(t,d)}catch(d){yield Hr(d)}}),gp.apply(this,arguments)}function Tm(i,e,t){return mp.apply(this,arguments)}function mp(){return mp=(0,Ie.Z)(function*(i,e,t){const s=M(i);try{const d=yield function(g,v){const x=M(g);return x.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let q;return x.mutationQueue.lookupMutationBatch(j,v).next(ie=>(D(null!==ie),q=ie.keys(),x.mutationQueue.removeMutationBatch(j,ie))).next(()=>x.mutationQueue.performConsistencyCheck(j)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(j,q,v)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,q)).next(()=>x.localDocuments.getDocuments(j,q))})}(s.localStore,e);Tc(s,e,t),ah(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield Eo(s,d)}catch(d){yield Hr(d)}}),mp.apply(this,arguments)}function _p(){return _p=(0,Ie.Z)(function*(i,e){const t=M(i);wc(t.remoteStore)||mt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(g){const v=M(g);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>v.mutationQueue.getHighestUnacknowledgedBatchId(x))}(t.localStore);if(-1===s)return void e.resolve();const d=t.uc.get(s)||[];d.push(e),t.uc.set(s,d)}catch(s){const d=rh(s,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),_p.apply(this,arguments)}function ah(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function Tc(i,e,t){const s=M(i);let d=s.oc[s.currentUser.toKey()];if(d){const g=d.get(e);g&&(t?g.reject(t):g.resolve(),d=d.remove(e)),s.oc[s.currentUser.toKey()]=d}}function uh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.ec.get(e))i.tc.delete(s),t&&i.Zu.lc(s,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(s=>{i.rc.containsKey(s)||fd(i,s)})}function fd(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(vc(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),df(i))}function Ig(i,e,t){for(const s of t)s instanceof dp?(i.rc.addReference(s.key,e),h_(i,s)):s instanceof yu?(mt("SyncEngine","Document no longer in limbo: "+s.key),i.rc.removeReference(s.key,e),i.rc.containsKey(s.key)||fd(i,s.key)):S()}function h_(i,e){const t=e.key,s=t.path.canonicalString();i.sc.get(t)||i.nc.has(s)||(mt("SyncEngine","New document in limbo: "+t),i.nc.add(s),df(i))}function df(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new Ot(Jn.fromString(e)),s=i.cc.next();i.ic.set(s,new vg(t)),i.sc=i.sc.insert(t,s),Ho(i.remoteStore,new tu(Gn(bl(t.path)),s,2,ss.ot))}}function Eo(i,e,t){return pd.apply(this,arguments)}function pd(){return pd=(0,Ie.Z)(function*(i,e,t){const s=M(i),d=[],g=[],v=[];var x;s.tc.isEmpty()||(s.tc.forEach((x,j)=>{v.push(s.hc(j,e,t).then(q=>{if(q){s.isPrimaryClient&&s.sharedClientState.updateQueryState(j.targetId,q.fromCache?"not-current":"current"),d.push(q);const ie=Gf.Vi(j.targetId,q);g.push(ie)}}))}),yield Promise.all(v),s.Zu.Go(d),yield(x=(0,Ie.Z)(function*(j,q){const ie=M(j);try{yield ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",me=>$e.forEach(q,Ze=>$e.forEach(Ze.Pi,dt=>ie.persistence.referenceDelegate.addReference(me,Ze.targetId,dt)).next(()=>$e.forEach(Ze.vi,dt=>ie.persistence.referenceDelegate.removeReference(me,Ze.targetId,dt)))))}catch(me){if(!mo(me))throw me;mt("LocalStore","Failed to update sequence numbers: "+me)}for(const me of q){const Ze=me.targetId;if(!me.fromCache){const dt=ie.$i.get(Ze),qt=dt.withLastLimboFreeSnapshotVersion(dt.snapshotVersion);ie.$i=ie.$i.insert(Ze,qt)}}}),function(j,q){return x.apply(this,arguments)})(s.localStore,g))}),pd.apply(this,arguments)}function aa(i,e){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,Ie.Z)(function*(i,e){const t=M(i);if(!t.currentUser.isEqual(e)){mt("SyncEngine","User change. New user:",e.toKey());const s=yield zf(t.localStore,e);t.currentUser=e,(d=t).uc.forEach(v=>{v.forEach(x=>{x.reject(new W(N.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.uc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield Eo(t,s.Ki)}var d}),Bl.apply(this,arguments)}function yp(i,e){const t=M(i),s=t.ic.get(e);if(s&&s.Xu)return In().add(s.key);{let d=In();const g=t.ec.get(e);if(!g)return d;for(const v of g){const x=t.tc.get(v);d=d.unionWith(x.view.qu)}return d}}function vu(i,e){return hf.apply(this,arguments)}function hf(){return hf=(0,Ie.Z)(function*(i,e){const t=M(i),s=yield qf(t.localStore,e.query,!0),d=e.view.Ju(s);return t.isPrimaryClient&&Ig(t,e.targetId,d.zu),d}),hf.apply(this,arguments)}function lh(i,e){return Sc.apply(this,arguments)}function Sc(){return Sc=(0,Ie.Z)(function*(i,e){const t=M(i);return Zf(t.localStore,e).then(s=>Eo(t,s))}),Sc.apply(this,arguments)}function ch(i,e,t,s){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,Ie.Z)(function*(i,e,t,s){const d=M(i),g=yield function(v,x){const j=M(v),q=M(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",ie=>q.yn(ie,x).next(me=>me?j.localDocuments.getDocuments(ie,me):$e.resolve(null)))}(d.localStore,e);var x;null!==g?("pending"===t?yield ld(d.remoteStore):"acknowledged"===t||"rejected"===t?(Tc(d,e,s||null),ah(d,e),x=e,M(M(d.localStore).mutationQueue).In(x)):S(),yield Eo(d,g)):mt("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ac.apply(this,arguments)}function xc(){return xc=(0,Ie.Z)(function*(i,e){const t=M(i);if(Ip(t),Cp(t),!0===e&&!0!==t.ac){const s=t.sharedClientState.getAllActiveQueryTargets(),d=yield gd(t,s.toArray());t.ac=!0,yield sp(t.remoteStore,!0);for(const g of d)Ho(t.remoteStore,g)}else if(!1===e&&!1!==t.ac){const s=[];let d=Promise.resolve();t.ec.forEach((g,v)=>{t.sharedClientState.isLocalQueryTarget(v)?s.push(v):d=d.then(()=>(uh(t,v),id(t.localStore,v,!0))),vc(t.remoteStore,v)}),yield d,yield gd(t,s),function(g){const v=M(g);v.ic.forEach((x,j)=>{vc(v.remoteStore,j)}),v.rc.cs(),v.ic=new Map,v.sc=new Si(Ot.comparator)}(t),t.ac=!1,yield sp(t.remoteStore,!1)}}),xc.apply(this,arguments)}function gd(i,e,t){return Io.apply(this,arguments)}function Io(){return Io=(0,Ie.Z)(function*(i,e,t){const s=M(i),d=[],g=[];for(const v of e){let x;const j=s.ec.get(v);if(j&&0!==j.length){x=yield ul(s.localStore,Gn(j[0]));for(const q of j){const ie=s.tc.get(q),me=yield vu(s,ie);me.snapshot&&g.push(me.snapshot)}}else{const q=yield ia(s.localStore,v);x=yield ul(s.localStore,q),yield Im(s,md(q),v,!1)}d.push(x)}return s.Zu.Go(g),d}),Io.apply(this,arguments)}function md(i){return jp(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function vp(i){const e=M(i);return M(M(e.localStore).persistence).Ri()}function Cg(i,e,t,s){return wp.apply(this,arguments)}function wp(){return wp=(0,Ie.Z)(function*(i,e,t,s){const d=M(i);if(d.ac)return void mt("SyncEngine","Ignoring unexpected query state notification.");const g=d.ec.get(e);if(g&&g.length>0)switch(t){case"current":case"not-current":{const v=yield Zf(d.localStore,Qa(g[0])),x=na.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Eo(d,v,x);break}case"rejected":yield id(d.localStore,e,!0),uh(d,e,s);break;default:S()}}),wp.apply(this,arguments)}function bg(i,e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=(0,Ie.Z)(function*(i,e,t){const s=Ip(i);if(s.ac){for(const d of e){if(s.ec.has(d)){mt("SyncEngine","Adding an already active target "+d);continue}const g=yield ia(s.localStore,d),v=yield ul(s.localStore,g);yield Im(s,md(g),v.targetId,!1),Ho(s.remoteStore,v)}for(const d of t)s.ec.has(d)&&(yield id(s.localStore,d,!1).then(()=>{vc(s.remoteStore,d),uh(s,d)}).catch(Hr))}}),Ep.apply(this,arguments)}function Ip(i){const e=M(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=pp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yp.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Eg.bind(null,e),e.Zu.Go=c_.bind(null,e.eventManager),e.Zu.lc=wm.bind(null,e.eventManager),e}function Cp(i){const e=M(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Dm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Tm.bind(null,e),e}class bp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.wt=yc(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return Qh(this.persistence,new _c,e.initialUser,this.wt)}_c(e){return new sg(Hf.Ms,this.wt)}dc(e){return new lg}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Am extends bp{constructor(e,t,s){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,Ie.Z)(function*(){yield t().call(s,e),yield s.yc.initialize(s,e),yield Cp(s.yc.syncEngine),yield ld(s.yc.remoteStore),yield s.persistence.ci(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return Qh(this.persistence,new _c,e.initialUser,this.wt)}mc(e,t){return new n_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const s=new Yu(t,this.persistence);return new Gs(e.asyncQueue,s)}_c(e){const t=Qd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?wo.withCacheSize(this.cacheSizeBytes):wo.DEFAULT;return new mc(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,Jf(),th(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new lg}}class xm extends Am{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,Ie.Z)(function*(){yield t().call(s,e);const d=s.yc.syncEngine;s.sharedClientState instanceof od&&(s.sharedClientState.syncEngine={kr:ch.bind(null,d),Or:Cg.bind(null,d),Mr:bg.bind(null,d),Ri:vp.bind(null,d),Nr:lh.bind(null,d)},yield s.sharedClientState.start()),yield s.persistence.ci(function(){var g=(0,Ie.Z)(function*(v){yield function dh(i,e){return xc.apply(this,arguments)}(s.yc.syncEngine,v),s.gcScheduler&&(v&&!s.gcScheduler.started?s.gcScheduler.start():v||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(v&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():v||s.indexBackfillerScheduler.stop())});return function(v){return g.apply(this,arguments)}}())})()}dc(e){const t=Jf();if(!od.V(t))throw new W(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=Qd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new od(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class Rm{initialize(e,t){var s=this;return(0,Ie.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=d=>Dc(s.syncEngine,d,1),s.remoteStore.remoteSyncer.handleCredentialChange=aa.bind(null,s.syncEngine),yield sp(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new op}createDatastore(e){const t=yc(e.databaseInfo.databaseId),s=new ll(e.databaseInfo);return new nf(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,d=e.asyncQueue,g=x=>Dc(this.syncEngine,x,0),v=ad.V()?new ad:new a_,new hm(t,s,d,g,v);var t,s,d,g,v}createSyncEngine(e,t){return function(s,d,g,v,x,j,q){const ie=new bc(s,d,g,v,x,j);return q&&(ie.ac=!0),ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const s=M(t);mt("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield _u(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Mm(i,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class f_{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new ae,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.bc();if(null===t)return null;const s=e.Ac.decode(t),d=Number(s);isNaN(d)&&e.Pc(`length string (${s}) is not valid number`);const g=yield e.vc(d);return new d_(JSON.parse(g),t.length+d)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,Ie.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const s=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class p_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new W(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(d=(0,Ie.Z)(function*(g,v){const x=M(g),j=m(x.wt)+"/documents",q={documents:v.map(dt=>gu(x.wt,dt))},ie=yield x.ao("BatchGetDocuments",j,q,v.length),me=new Map;ie.forEach(dt=>{const yt=function Ce(i,e){return"found"in e?function(t,s){D(!!s.found);const d=hs(t,s.found.name),g=Ri(s.found.updateTime),v=new Ws({mapValue:{fields:s.found.fields}});return si.newFoundDocument(d,g,v)}(i,e):"missing"in e?function(t,s){D(!!s.missing),D(!!s.readTime);const d=hs(t,s.missing),g=Ri(s.readTime);return si.newNoDocument(d,g)}(i,e):S()}(x.wt,dt);me.set(yt.key.toString(),yt)});const Ze=[];return v.forEach(dt=>{const yt=me.get(dt.toString());D(!!yt),Ze.push(yt)}),Ze}),function(g,v){return d.apply(this,arguments)})(t.datastore,e);var d;return s.forEach(d=>t.recordVersion(d)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new tl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,d)=>{const g=Ot.fromPath(d);e.mutations.push(new Fu(g,e.precondition(g)))}),yield(s=(0,Ie.Z)(function*(d,g){const v=M(d),x=m(v.wt)+"/documents",j={writes:g.map(q=>Dt(v.wt,q))};yield v.ro("Commit",x,j)}),function(d,g){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw S();t=un.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new W(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?xi.updateTime(t):xi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(un.min()))throw new W(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xi.updateTime(t)}return xi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Nm{constructor(e,t,s,d,g){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=d,this.deferred=g,this.Dc=s.maxAttempts,this.So=new cg(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,Ie.Z)(function*(){const t=new p_(e.datastore),s=e.xc(t);s&&s.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(g=>{e.Nc(g)}))}).catch(d=>{e.Nc(d)})}))}xc(e){try{const t=this.updateFunction(e);return!ht(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Hc(t)}return!1}}class g_{constructor(e,t,s,d){var g=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=d,this.user=ji.UNAUTHENTICATED,this.clientId=va.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var v=(0,Ie.Z)(function*(x){mt("FirestoreClient","Received user=",x.uid),yield g.authCredentialListener(x),g.user=x});return function(x){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(s,v=>(mt("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(N.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ae;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const d=rh(s,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function Dg(i,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),mt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,Ie.Z)(function*(g){s.isEqual(g)||(yield zf(e.localStore,g),s=g)});return function(g){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Tg.apply(this,arguments)}function Pm(i,e){return Om.apply(this,arguments)}function Om(){return Om=(0,Ie.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield km(i);mt("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(d=>Ll(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,g)=>Ll(e.remoteStore,g)),i.onlineComponents=e}),Om.apply(this,arguments)}function km(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,Ie.Z)(function*(i){return i.offlineComponents||(mt("FirestoreClient","Using default OfflineComponentProvider"),yield Dg(i,new bp)),i.offlineComponents}),Dp.apply(this,arguments)}function hh(i){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,Ie.Z)(function*(i){return i.onlineComponents||(mt("FirestoreClient","Using default OnlineComponentProvider"),yield Pm(i,new Rm)),i.onlineComponents}),Sg.apply(this,arguments)}function m_(i){return km(i).then(e=>e.persistence)}function Ag(i){return km(i).then(e=>e.localStore)}function __(i){return hh(i).then(e=>e.remoteStore)}function xg(i){return hh(i).then(e=>e.syncEngine)}function _d(i){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,Ie.Z)(function*(i){const e=yield hh(i),t=e.eventManager;return t.onListen=Wy.bind(null,e.syncEngine),t.onUnlisten=Cm.bind(null,e.syncEngine),t}),Fm.apply(this,arguments)}function yd(i,e,t={}){const s=new ae;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(d,g,v,x,j){const q=new ff({next:me=>{g.enqueueAndForget(()=>up(d,ie));const Ze=me.docs.has(v);!Ze&&me.fromCache?j.reject(new W(N.UNAVAILABLE,"Failed to get document because the client is offline.")):Ze&&me.fromCache&&x&&"server"===x.source?j.reject(new W(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(me)},error:me=>j.reject(me)}),ie=new cf(bl(v.path),q,{includeMetadataChanges:!0,Du:!0});return sh(d,ie)}(yield _d(i),i.asyncQueue,e,t,s)})),s.promise}function Rg(i,e,t={}){const s=new ae;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(d,g,v,x,j){const q=new ff({next:me=>{g.enqueueAndForget(()=>up(d,ie)),me.fromCache&&"server"===x.source?j.reject(new W(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(me)},error:me=>j.reject(me)}),ie=new cf(v,q,{includeMetadataChanges:!0,Du:!0});return sh(d,ie)}(yield _d(i),i.asyncQueue,e,t,s)})),s.promise}const Mg=new Map;function Sp(i,e,t){if(!t)throw new W(N.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Ng(i,e,t,s){if(!0===e&&!0===s)throw new W(N.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Pg(i){if(!Ot.isDocumentKey(i))throw new W(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function vd(i){if(Ot.isDocumentKey(i))throw new W(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ap(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":S()}function mr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new W(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ap(i);throw new W(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Og(i,e){if(e<=0)throw new W(N.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class xp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new W(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new W(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Ng("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xp({}),this._settingsFrozen=!1,e instanceof We?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new We(d.options.projectId)}(e))}get app(){if(!this._app)throw new W(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new W(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new it;switch(t.type){case"gapi":const s=t.client;return D(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new hr(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new W(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mg.get(e);t&&(mt("ComponentProvider","Removing Datastore"),Mg.delete(e),t.terminate())}(this),Promise.resolve()}}class Gi{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gi(this.firestore,e,this._key)}}class ba{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ba(this.firestore,e,this._query)}}class Oa extends ba{constructor(e,t,s){super(e,t,bl(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gi(this.firestore,null,new Ot(e))}withConverter(e){return new Oa(this.firestore,e,this._path)}}function kg(i,e,...t){if(i=(0,He.m9)(i),Sp("collection","path",e),i instanceof pf){const s=Jn.fromString(e,...t);return vd(s),new Oa(i,null,s)}{if(!(i instanceof Gi||i instanceof Oa))throw new W(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Jn.fromString(e,...t));return vd(s),new Oa(i.firestore,null,s)}}function fh(i,e,...t){if(i=(0,He.m9)(i),1===arguments.length&&(e=va.I()),Sp("doc","path",e),i instanceof pf){const s=Jn.fromString(e,...t);return Pg(s),new Gi(i,null,new Ot(s))}{if(!(i instanceof Gi||i instanceof Oa))throw new W(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Jn.fromString(e,...t));return Pg(s),new Gi(i.firestore,i instanceof Oa?i.converter:null,new Ot(s))}}function Vm(i,e){return i=(0,He.m9)(i),e=(0,He.m9)(e),(i instanceof Gi||i instanceof Oa)&&(e instanceof Gi||e instanceof Oa)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function ph(i,e){return i=(0,He.m9)(i),e=(0,He.m9)(e),i instanceof ba&&e instanceof ba&&i.firestore===e.firestore&&Bn(i._query,e._query)&&i.converter===e.converter}class Np{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new cg(this,"async_queue_retry"),this.Kc=()=>{const t=th();t&&mt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=th();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=th();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new ae;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!mo(t))throw t;mt("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(s=>{throw this.Bc=s,this.Lc=!1,Pr("INTERNAL UNHANDLED ERROR: ",function(g){let v=g.message||"";return g.stack&&(v=g.stack.includes(g.message)?g.stack:g.message+"\n"+g.stack),v}(s)),s}).then(s=>(this.Lc=!1,s))));return this.Oc=t,t}enqueueAfterDelay(e,t,s){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const d=Cc.createAndSchedule(this,e,t,s,g=>this.Wc(g));return this.$c.push(d),d}Gc(){this.Bc&&S()}verifyOperationInProgress(){}zc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function gf(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const d of["next","error","complete"])if(d in s&&"function"==typeof s[d])return!0;return!1}(i)}class ny{constructor(){this._progressObserver={},this._taskCompletionResolver=new ae,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wi extends pf{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new Np,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Pp(this),this._firestoreClient.terminate()}}function zs(i){return i._firestoreClient||Pp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Pp(i){var e;const t=i._freezeSettings(),s=(g=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Oe(i._databaseId,g,i._persistenceKey,(x=t).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var g,x;i._firestoreClient=new g_(i._authCredentials,i._appCheckCredentials,i._queue,s)}function o(i,e,t){const s=new ae;return i.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield Dg(i,t),yield Pm(i,e),s.resolve()}catch(d){const g=d;if(!("FirebaseError"===(v=g).name?v.code===N.FAILED_PRECONDITION||v.code===N.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw g;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+g),s.reject(g)}var v})).then(()=>s.promise)}function se(i){if(i._initialized||i._terminated)throw new W(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Re{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new W(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ji(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xe{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xe(Fr.fromBase64String(e))}catch(t){throw new W(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xe(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class xt{constructor(e){this._methodName=e}}class Vt{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new W(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new W(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return an(this._lat,e._lat)||an(this._long,e._long)}}const jn=/^__.*__$/;class sr{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Fs(e,this.data,this.fieldMask,t,this.fieldTransforms):new ku(e,this.data,t,this.fieldTransforms)}}class uo{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Fs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Vs(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}class Mi{constructor(e,t,s,d,g,v){this.settings=e,this.databaseId=t,this.wt=s,this.ignoreUndefinedProperties=d,void 0===g&&this.Xc(),this.fieldTransforms=g||[],this.fieldMask=v||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Mi(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ta({path:s,na:!1});return d.sa(e),d}ia(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ta({path:s,na:!1});return d.Xc(),d}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return Fg(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Vs(this.Zc)&&jn.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class Ks{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=s||yc(e)}aa(e,t,s,d=!1){return new Mi({Zc:e,methodName:t,ca:s,path:Ji.emptyPath(),na:!1,ua:d},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function $u(i){const e=i._freezeSettings(),t=yc(i._databaseId);return new Ks(i._databaseId,!!e.ignoreUndefinedProperties,t)}function jl(i,e,t,s,d,g={}){const v=i.aa(g.merge||g.mergeFields?2:0,e,t,d);T_("Data must be an object, but it was:",v,s);const x=D_(s,v);let j,q;if(g.merge)j=new ii(v.fieldMask),q=v.fieldTransforms;else if(g.mergeFields){const ie=[];for(const me of g.mergeFields){const Ze=S_(e,me,t);if(!v.contains(Ze))throw new W(N.INVALID_ARGUMENT,`Field '${Ze}' is specified in your field mask but missing from your input data.`);Ky(ie,Ze)||ie.push(Ze)}j=new ii(ie),q=v.fieldTransforms.filter(me=>j.covers(me.field))}else j=null,q=v.fieldTransforms;return new sr(new Ws(x),j,q)}class wd extends xt{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}function Ed(i,e,t){return new Mi({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class mf extends xt{_toFieldTransform(e){return new Tl(e.path,new el)}isEqual(e){return e instanceof mf}}class Wo extends xt{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ed(this,e,!0),s=this.ha.map(g=>gh(g,t)),d=new ec(s);return new Tl(e.path,d)}isEqual(e){return this===e}}class ry extends xt{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Ed(this,e,!0),s=this.ha.map(g=>gh(g,t)),d=new ea(s);return new Tl(e.path,d)}isEqual(e){return this===e}}class zy extends xt{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Ja(e.wt,Lo(e.wt,this.la));return new Tl(e.path,t)}isEqual(e){return this===e}}function b_(i,e,t,s){const d=i.aa(1,e,t);T_("Data must be an object, but it was:",d,s);const g=[],v=Ws.empty();Ka(s,(j,q)=>{const ie=jm(e,j,t);q=(0,He.m9)(q);const me=d.ia(ie);if(q instanceof wd)g.push(ie);else{const Ze=gh(q,me);null!=Ze&&(g.push(ie),v.set(ie,Ze))}});const x=new ii(g);return new uo(v,x,d.fieldTransforms)}function Bm(i,e,t,s,d,g){const v=i.aa(1,e,t),x=[S_(e,s,t)],j=[d];if(g.length%2!=0)throw new W(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Ze=0;Ze<g.length;Ze+=2)x.push(S_(e,g[Ze])),j.push(g[Ze+1]);const q=[],ie=Ws.empty();for(let Ze=x.length-1;Ze>=0;--Ze)if(!Ky(q,x[Ze])){const dt=x[Ze];let yt=j[Ze];yt=(0,He.m9)(yt);const qt=v.ia(dt);if(yt instanceof wd)q.push(dt);else{const fn=gh(yt,qt);null!=fn&&(q.push(dt),ie.set(dt,fn))}}const me=new ii(q);return new uo(ie,me,v.fieldTransforms)}function iy(i,e,t,s=!1){return gh(t,i.aa(s?4:3,e))}function gh(i,e){if(_f(i=(0,He.m9)(i)))return T_("Unsupported field value:",e,i),D_(i,e);if(i instanceof xt)return function(t,s){if(!Vs(s.Zc))throw s.oa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(s);d&&s.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,s){const d=[];let g=0;for(const v of t){let x=gh(v,s.ra(g));null==x&&(x={nullValue:"NULL_VALUE"}),d.push(x),g++}return{arrayValue:{values:d}}}(i,e)}return function(t,s){if(null===(t=(0,He.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Lo(s.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=$r.fromDate(t);return{timestampValue:Sl(s.wt,d)}}if(t instanceof $r){const d=new $r(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sl(s.wt,d)}}if(t instanceof Vt)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Xe)return{bytesValue:Ud(s.wt,t._byteString)};if(t instanceof Gi){const d=s.databaseId,g=t.firestore._databaseId;if(!g.isEqual(d))throw s.oa(`Document reference is for database ${g.projectId}/${g.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Al(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.oa(`Unsupported field value: ${Ap(t)}`)}(i,e)}function D_(i,e){const t={};return qa(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(i,(s,d)=>{const g=gh(d,e.ea(s));null!=g&&(t[s]=g)}),{mapValue:{fields:t}}}function _f(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof $r||i instanceof Vt||i instanceof Xe||i instanceof Gi||i instanceof xt)}function T_(i,e,t){if(!_f(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Ap(t);throw e.oa("an object"===s?i+" a custom object":i+" "+s)}var s}function S_(i,e,t){if((e=(0,He.m9)(e))instanceof Re)return e._internalPath;if("string"==typeof e)return jm(i,e);throw Fg("Field path arguments must be of type string or ",i,!1,void 0,t)}const sy=new RegExp("[~\\*/\\[\\]]");function jm(i,e,t){if(e.search(sy)>=0)throw Fg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Re(...e.split("."))._internalPath}catch(s){throw Fg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function Fg(i,e,t,s,d){const g=s&&!s.isEmpty(),v=void 0!==d;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let j="";return(g||v)&&(j+=" (found",g&&(j+=` in field ${s}`),v&&(j+=` in document ${d}`),j+=")"),new W(N.INVALID_ARGUMENT,x+i+j)}function Ky(i,e){return i.some(t=>t.isEqual(e))}class Op{constructor(e,t,s,d,g){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=d,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new Gi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A_ extends Op{data(){return super.data()}}function Hu(i,e){return"string"==typeof e?jm(i,e):e instanceof Re?e._internalPath:e._delegate._internalPath}class yf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Id extends Op{constructor(e,t,s,d,g,v){super(e,t,s,d,v),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Hu("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class wu extends Id{data(e={}){return super.data(e)}}class ua{constructor(e,t,s,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new yf(d.hasPendingWrites,d.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new wu(this._firestore,this._userDataWriter,s.key,s,new yf(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new W(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,d){if(s._snapshot.oldDocs.isEmpty()){let g=0;return s._snapshot.docChanges.map(v=>({type:"added",doc:new wu(s._firestore,s._userDataWriter,v.doc.key,v.doc,new yf(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:g++}))}{let g=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(v=>d||3!==v.type).map(v=>{const x=new wu(s._firestore,s._userDataWriter,v.doc.key,v.doc,new yf(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter);let j=-1,q=-1;return 0!==v.type&&(j=g.indexOf(v.doc.key),g=g.delete(v.doc.key)),1!==v.type&&(g=g.add(v.doc),q=g.indexOf(v.doc.key)),{type:$l(v.type),doc:x,oldIndex:j,newIndex:q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $l(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}function x_(i,e){return i instanceof Id&&e instanceof Id?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof ua&&e instanceof ua&&i._firestore===e._firestore&&ph(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function R_(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new W(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lg{}function mh(i,...e){for(const t of e)i=t._apply(i);return i}class qy extends Lg{constructor(e,t,s){super(),this.fa=e,this.da=t,this._a=s,this.type="where"}_apply(e){const t=$u(e.firestore),s=function(d,g,v,x,j,q,ie){let me;if(j.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new W(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){P_(ie,q);const dt=[];for(const yt of ie)dt.push(Gm(x,d,yt));me={arrayValue:{values:dt}}}else me=Gm(x,d,ie)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||P_(ie,q),me=iy(v,"where",ie,"in"===q||"not-in"===q);const Ze=Ai.create(j,q,me);return function(dt,yt){if(yt.ht()){const fn=Dl(dt);if(null!==fn&&!fn.isEqual(yt.field))throw new W(N.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${fn.toString()}' and '${yt.field.toString()}'`);const ai=Uc(dt);null!==ai&&O_(0,yt.field,ai)}const qt=function(fn,ai){for(const fs of fn.filters)if(ai.indexOf(fs.op)>=0)return fs.op;return null}(dt,function(fn){switch(fn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(yt.op));if(null!==qt)throw new W(N.INVALID_ARGUMENT,qt===yt.op?`Invalid query. You cannot use more than one '${yt.op.toString()}' filter.`:`Invalid query. You cannot use '${yt.op.toString()}' filters with '${qt.toString()}' filters.`)}(d,Ze),Ze}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new ba(e.firestore,e.converter,function(d,g){const v=d.filters.concat([g]);return new Ya(d.path,d.collectionGroup,d.explicitOrderBy.slice(),v,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,s))}}class M_ extends Lg{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(s,d,g){if(null!==s.startAt)throw new W(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new W(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Ql(d,g);return function(x,j){if(null===Uc(x)){const q=Dl(x);null!==q&&O_(0,q,j.field)}}(s,v),v}(e._query,this.fa,this.wa);return new ba(e.firestore,e.converter,function(s,d){const g=s.explicitOrderBy.concat([d]);return new Ya(s.path,s.collectionGroup,g,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class oy extends Lg{constructor(e,t,s){super(),this.type=e,this.ma=t,this.ga=s}_apply(e){return new ba(e.firestore,e.converter,Tr(e._query,this.ma,this.ga))}}class N_ extends Lg{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=Hm(e,this.type,this.ya,this.pa);return new ba(e.firestore,e.converter,(d=t,new Ya((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,d,s.endAt)));var s,d}}class ly extends Lg{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=Hm(e,this.type,this.ya,this.pa);return new ba(e.firestore,e.converter,(d=t,new Ya((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,d)));var s,d}}function Hm(i,e,t,s){if(t[0]=(0,He.m9)(t[0]),t[0]instanceof Op)return function(d,g,v,x,j){if(!x)throw new W(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const q=[];for(const ie of Ju(d))if(ie.field.isKeyField())q.push(oo(g,x.key));else{const me=x.data.field(ie.field);if(U(me))throw new W(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ie.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===me){const Ze=ie.field.canonicalString();throw new W(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Ze}' (used as the orderBy) does not exist.`)}q.push(me)}return new Nu(q,j)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const d=$u(i.firestore);return function(g,v,x,j,q,ie){const me=g.explicitOrderBy;if(q.length>me.length)throw new W(N.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Ze=[];for(let dt=0;dt<q.length;dt++){const yt=q[dt];if(me[dt].field.isKeyField()){if("string"!=typeof yt)throw new W(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof yt}`);if(!Bc(g)&&-1!==yt.indexOf("/"))throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${yt}' contains a slash.`);const qt=g.path.child(Jn.fromString(yt));if(!Ot.isDocumentKey(qt))throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${qt}' is not because it contains an odd number of segments.`);const fn=new Ot(qt);Ze.push(oo(v,fn))}else{const qt=iy(x,j,yt);Ze.push(qt)}}return new Nu(Ze,ie)}(i._query,i.firestore._databaseId,d,e,t,s)}}function Gm(i,e,t){if("string"==typeof(t=(0,He.m9)(t))){if(""===t)throw new W(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bc(e)&&-1!==t.indexOf("/"))throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Jn.fromString(t));if(!Ot.isDocumentKey(s))throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return oo(i,new Ot(s))}if(t instanceof Gi)return oo(i,t._key);throw new W(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ap(t)}.`)}function P_(i,e){if(!Array.isArray(i)||0===i.length)throw new W(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new W(N.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function O_(i,e,t){if(!t.isEqual(e))throw new W(N.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const hy={maxAttempts:5};class Wm{convertValue(e,t="none"){switch(Xt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(k(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw S()}}convertObject(e,t){const s={};return Ka(e.fields,(d,g)=>{s[d]=this.convertValue(g,t)}),s}convertGeoPoint(e){return new Vt(Gr(e.latitude),Gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Q(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(ce(e));default:return null}}convertTimestamp(e){const t=ko(e);return new $r(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Jn.fromString(e);D(kh(s));const d=new We(s.get(1),s.get(3)),g=new Ot(s.popFirst(5));return d.isEqual(t)||Pr(`Document ${g} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),g}}function Ug(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class fy extends Wm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xe(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,t)}}class k_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$u(e)}set(e,t,s){this._verifyNotCommitted();const d=Cd(e,this._firestore),g=Ug(d.converter,t,s),v=jl(this._dataReader,"WriteBatch.set",d._key,g,null!==d.converter,s);return this._mutations.push(v.toMutation(d._key,xi.none())),this}update(e,t,s,...d){this._verifyNotCommitted();const g=Cd(e,this._firestore);let v;return v="string"==typeof(t=(0,He.m9)(t))||t instanceof Re?Bm(this._dataReader,"WriteBatch.update",g._key,t,s,d):b_(this._dataReader,"WriteBatch.update",g._key,t),this._mutations.push(v.toMutation(g._key,xi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cd(e,this._firestore);return this._mutations=this._mutations.concat(new tl(t._key,xi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cd(i,e){if((i=(0,He.m9)(i)).firestore!==e)throw new W(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class vf extends Wm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xe(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gi(this.firestore,null,t)}}function py(i,e,t){i=mr(i,Gi);const s=mr(i.firestore,Wi),d=Ug(i.converter,e,t);return kp(s,[jl($u(s),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,xi.none())])}function gy(i,e,t,...s){i=mr(i,Gi);const d=mr(i.firestore,Wi),g=$u(d);let v;return v="string"==typeof(e=(0,He.m9)(e))||e instanceof Re?Bm(g,"updateDoc",i._key,e,t,s):b_(g,"updateDoc",i._key,e),kp(d,[v.toMutation(i._key,xi.exists(!0))])}function my(i,...e){var t,s,d;i=(0,He.m9)(i);let g={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||gf(e[v])||(g=e[v],v++);const x={includeMetadataChanges:g.includeMetadataChanges};if(gf(e[v])){const me=e[v];e[v]=null===(t=me.next)||void 0===t?void 0:t.bind(me),e[v+1]=null===(s=me.error)||void 0===s?void 0:s.bind(me),e[v+2]=null===(d=me.complete)||void 0===d?void 0:d.bind(me)}let j,q,ie;if(i instanceof Gi)q=mr(i.firestore,Wi),ie=bl(i._key.path),j={next:me=>{e[v]&&e[v](F_(q,i,me))},error:e[v+1],complete:e[v+2]};else{const me=mr(i,ba);q=mr(me.firestore,Wi),ie=me._query;const Ze=new vf(q);j={next:dt=>{e[v]&&e[v](new ua(q,Ze,me,dt))},error:e[v+1],complete:e[v+2]},R_(i._query)}return function(me,Ze,dt,yt){const qt=new ff(yt),fn=new cf(Ze,qt,dt);return me.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return sh(yield _d(me),fn)})),()=>{qt.Tc(),me.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return up(yield _d(me),fn)}))}}(zs(q),ie,x,j)}function kp(i,e){return function(t,s){const d=new ae;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function bm(i,e,t){return wg.apply(this,arguments)}(yield xg(t),s,d)})),d.promise}(zs(i),e)}function F_(i,e,t){const s=t.docs.get(e._key),d=new vf(i);return new Id(i,d,e._key,s,new yf(t.hasPendingWrites,t.fromCache),e.converter)}class ov extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$u(e)}get(e){const t=Cd(e,this._firestore),s=new fy(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return S();const g=d[0];if(g.isFoundDocument())return new Op(this._firestore,s,g.key,g,t.converter);if(g.isNoDocument())return new Op(this._firestore,s,t._key,null,t.converter);throw S()})}set(e,t,s){const d=Cd(e,this._firestore),g=Ug(d.converter,t,s),v=jl(this._dataReader,"Transaction.set",d._key,g,null!==d.converter,s);return this._transaction.set(d._key,v),this}update(e,t,s,...d){const g=Cd(e,this._firestore);let v;return v="string"==typeof(t=(0,He.m9)(t))||t instanceof Re?Bm(this._dataReader,"Transaction.update",g._key,t,s,d):b_(this._dataReader,"Transaction.update",g._key,t),this._transaction.update(g._key,v),this}delete(e){const t=Cd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cd(e,this._firestore),s=new vf(this._firestore);return super.get(e).then(d=>new Id(this._firestore,s,t._key,d._document,new yf(!1,!1),t.converter))}}function zm(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new W("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function V_(){if("undefined"==typeof Uint8Array)throw new W("unimplemented","Uint8Arrays are not available in this environment.")}function _h(){if(!function Up(){return"undefined"!=typeof atob}())throw new W("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){ma=Tt.SDK_VERSION,(0,Tt._registerComponent)(new rt.wA("firestore",(t,{options:s})=>{const d=t.getProvider("app").getImmediate(),g=new Wi(d,new Un(t.getProvider("auth-internal")),new so(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),g._setSettings(s),g},"PUBLIC")),(0,Tt.registerVersion)(Yo,"3.4.11",i),(0,Tt.registerVersion)(Yo,"3.4.11","esm2017")}();class Bg{constructor(e){this._delegate=e}static fromBase64String(e){return _h(),new Bg(Xe.fromBase64String(e))}static fromUint8Array(e){return V_(),new Bg(Xe.fromUint8Array(e))}toBase64(){return _h(),this._delegate.toBase64()}toUint8Array(){return V_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function U_(i){return function Fp(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class d0{enableIndexedDbPersistence(e,t){return function C_(i,e){se(i=mr(i,Wi));const t=zs(i),s=i._freezeSettings(),d=new Rm;return o(t,d,new Am(d,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function l(i){se(i=mr(i,Wi));const e=zs(i),t=i._freezeSettings(),s=new Rm;return o(e,s,new xm(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function u(i){if(i._initialized&&!i._terminated)throw new W(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ae;return i._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(s){if(!Dr.V())return Promise.resolve();const d=s+"main";yield Dr.delete(d)}),function(s){return t.apply(this,arguments)})(Qd(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Km{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof We||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Mo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function Rp(i,e,t,s={}){var d;const g=(i=mr(i,pf))._getSettings();if("firestore.googleapis.com"!==g.host&&g.host!==e&&Mo("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},g),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let v,x;if("string"==typeof s.mockUserToken)v=s.mockUserToken,x=ji.MOCK_USER;else{v=(0,He.Sg)(s.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const j=s.mockUserToken.sub||s.mockUserToken.user_id;if(!j)throw new W(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new ji(j)}i._authCredentials=new Ft(new _e(v,x))}}(this._delegate,e,t,s)}enableNetwork(){return function y(i){return function Rc(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield m_(i),t=yield __(i);return e.setNetworkEnabled(!0),function(s){const d=M(s);return d.lu.delete(0),ud(d)}(t)}))}(zs(i=mr(i,Wi)))}(this._delegate)}disableNetwork(){return function C(i){return function Es(i){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield m_(i),t=yield __(i);return e.setNetworkEnabled(!1),(s=(0,Ie.Z)(function*(d){const g=M(d);g.lu.add(0),yield _u(g),g._u.set("Offline")}),function(d){return s.apply(this,arguments)})(t);var s}))}(zs(i=mr(i,Wi)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,Ng("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function h(i){return function(e){const t=new ae;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function ju(i,e){return _p.apply(this,arguments)}(yield xg(e),t)})),t.promise}(zs(i=mr(i,Wi)))}(this._delegate)}onSnapshotsInSync(e){return function sv(i,e){return function Tp(i,e){const t=new ff(e);return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return s=yield _d(i),d=t,M(s).Tu.add(d),void d.next();var s,d})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return s=yield _d(i),d=t,void M(s).Tu.delete(d);var s,d}))}}(zs(i=mr(i,Wi)),gf(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new W("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wf(this,kg(this._delegate,e))}catch(t){throw au(t,"collection()","Firestore.collection()")}}doc(e){try{return new fl(this,fh(this._delegate,e))}catch(t){throw au(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new la(this,function Mp(i,e){if(i=mr(i,pf),Sp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new W(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ba(i,null,(t=e,new Ya(Jn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw au(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function av(i,e,t){i=mr(i,Wi);const s=Object.assign(Object.assign({},hy),t);return function(d){if(d.maxAttempts<1)throw new W(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function v_(i,e,t){const s=new ae;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const d=yield(g=i,hh(g).then(v=>v.datastore));var g;new Nm(i.asyncQueue,d,t,e,s).run()})),s.promise}(zs(i),d=>e(new ov(i,d)),s)}(this._delegate,t=>e(new j_(this,t)))}batch(){return zs(this._delegate),new dv(new k_(this._delegate,e=>kp(this._delegate,e)))}loadBundle(e){return function K(i,e){const t=zs(i=mr(i,Wi)),s=new ny;return function Lm(i,e,t,s){const d=function(g,v){let x;return x="string"==typeof g?(new TextEncoder).encode(g):g,j=function(j,q){if(j instanceof Uint8Array)return Mm(j,q);if(j instanceof ArrayBuffer)return Mm(new Uint8Array(j),q);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new f_(j,v);var j}(t,yc(e));i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function Sm(i,e,t){const s=M(i);var d;(d=(0,Ie.Z)(function*(g,v,x){try{const j=yield v.getMetadata();if(yield function(Ze,dt){const yt=M(Ze),qt=Ri(dt.createTime);return yt.persistence.runTransaction("hasNewerBundle","readonly",fn=>yt.Ds.getBundleMetadata(fn,dt.id)).then(fn=>!!fn&&fn.createTime.compareTo(qt)>=0)}(g.localStore,j))return yield v.close(),x._completeWith({taskState:"Success",documentsLoaded:(Ze=j).totalDocuments,bytesLoaded:Ze.totalBytes,totalDocuments:Ze.totalDocuments,totalBytes:Ze.totalBytes}),Promise.resolve(new Set);x._updateProgress(Ul(j));const q=new cp(j,g.localStore,v.wt);let ie=yield v.fc();for(;ie;){const Ze=yield q.Nu(ie);Ze&&x._updateProgress(Ze),ie=yield v.fc()}const me=yield q.complete();return yield Eo(g,me.Mu,void 0),yield function(Ze,dt){const yt=M(Ze);return yt.persistence.runTransaction("Save bundle","readwrite",qt=>yt.Ds.saveBundleMetadata(qt,dt))}(g.localStore,j),x._completeWith(me.progress),Promise.resolve(me.Ou)}catch(j){return Mo("SyncEngine",`Loading bundle failed with ${j}`),x._failWith(j),Promise.resolve(new Set)}var Ze}),function(g,v,x){return d.apply(this,arguments)})(s,e,t).then(d=>{s.sharedClientState.notifyBundleLoaded(d)})}(yield xg(i),d,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function J(i,e){return function w_(i,e){return i.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,s){const d=M(t);return d.persistence.runTransaction("Get named query","readonly",g=>d.Ds.getNamedQuery(g,s))}(yield Ag(i),e)}))}(zs(i=mr(i,Wi)),e).then(t=>t?new ba(i,null,t.query):null)}(this._delegate,e).then(t=>t?new la(this,t):null)}}class B_ extends Wm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bg(new Xe(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return fl.forKey(t,this.firestore,null)}}class j_{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new B_(e)}get(e){const t=Ef(e);return this._delegate.get(t).then(s=>new $g(this._firestore,new Id(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const d=Ef(e);return s?(zm("Transaction.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=Ef(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=Ef(e);return this._delegate.delete(t),this}}class dv{constructor(e){this._delegate=e}set(e,t,s){const d=Ef(e);return s?(zm("WriteBatch.set",s),this._delegate.set(d,t,s)):this._delegate.set(d,t),this}update(e,t,s,...d){const g=Ef(e);return 2===arguments.length?this._delegate.update(g,t):this._delegate.update(g,t,s,...d),this}delete(e){const t=Ef(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _n{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new wu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new yh(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=_n.INSTANCES;let d=s.get(e);d||(d=new WeakMap,s.set(e,d));let g=d.get(t);return g||(g=new _n(e,new B_(e),t),d.set(t,g)),g}}_n.INSTANCES=new WeakMap;class fl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new B_(e)}static forPath(e,t,s){if(e.length%2!=0)throw new W("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new fl(t,new Gi(t._delegate,s,new Ot(e)))}static forKey(e,t,s){return new fl(t,new Gi(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new wf(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wf(this.firestore,kg(this._delegate,e))}catch(t){throw au(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,He.m9)(e))instanceof Gi&&Vm(this._delegate,e)}set(e,t){t=zm("DocumentReference.set",t);try{return t?py(this._delegate,e,t):py(this._delegate,e)}catch(s){throw au(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?gy(this._delegate,e):gy(this._delegate,e,t,...s)}catch(d){throw au(d,"updateDoc()","DocumentReference.update()")}}delete(){return function rv(i){return kp(mr(i.firestore,Wi),[new tl(i._key,xi.none())])}(this._delegate)}onSnapshot(...e){const t=by(e),s=jg(e,d=>new $g(this.firestore,new Id(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return my(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Jy(i){i=mr(i,Gi);const e=mr(i.firestore,Wi),t=zs(e),s=new vf(e);return function ou(i,e){const t=new ae;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(s=(0,Ie.Z)(function*(d,g,v){try{const x=yield function(j,q){const ie=M(j);return ie.persistence.runTransaction("read document","readonly",me=>ie.localDocuments.getDocument(me,q))}(d,g);x.isFoundDocument()?v.resolve(x):x.isNoDocument()?v.resolve(null):v.reject(new W(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const j=rh(x,`Failed to get document '${g} from cache`);v.reject(j)}}),function(d,g,v){return s.apply(this,arguments)})(yield Ag(i),e,t);var s})),t.promise}(t,i._key).then(d=>new Id(e,s,i._key,d,new yf(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Xy(i){i=mr(i,Gi);const e=mr(i.firestore,Wi);return yd(zs(e),i._key,{source:"server"}).then(t=>F_(e,i,t))}(this._delegate):function Qy(i){i=mr(i,Gi);const e=mr(i.firestore,Wi);return yd(zs(e),i._key).then(t=>F_(e,i,t))}(this._delegate),t.then(s=>new $g(this.firestore,new Id(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new fl(this.firestore,this._delegate.withConverter(e?_n.getInstance(this.firestore,e):null))}}function au(i,e,t){return i.message=i.message.replace(e,t),i}function by(i){for(const e of i)if("object"==typeof e&&!U_(e))return e;return{}}function jg(i,e){var t,s;let d;return d=U_(i[0])?i[0]:U_(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:g=>{d.next&&d.next(e(g))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(s=d.complete)||void 0===s?void 0:s.bind(d)}}class $g{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new fl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return x_(this._delegate,e._delegate)}}class yh extends $g{data(e){const t=this._delegate.data(e);return function b(i,e){i||S()}(void 0!==t),t}}class la{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new B_(e)}where(e,t,s){try{return new la(this.firestore,mh(this._delegate,function Zy(i,e,t){const s=e,d=Hu("where",i);return new qy(d,s,t)}(e,t,s)))}catch(d){throw au(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new la(this.firestore,mh(this._delegate,function Vg(i,e="asc"){const t=e,s=Hu("orderBy",i);return new M_(s,t)}(e,t)))}catch(s){throw au(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new la(this.firestore,mh(this._delegate,function ay(i){return Og("limit",i),new oy("limit",i,"F")}(e)))}catch(t){throw au(t,"limit()","Query.limit()")}}limitToLast(e){try{return new la(this.firestore,mh(this._delegate,function Yy(i){return Og("limitToLast",i),new oy("limitToLast",i,"L")}(e)))}catch(t){throw au(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new la(this.firestore,mh(this._delegate,function uy(...i){return new N_("startAt",i,!0)}(...e)))}catch(t){throw au(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new la(this.firestore,mh(this._delegate,function $m(...i){return new N_("startAfter",i,!1)}(...e)))}catch(t){throw au(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new la(this.firestore,mh(this._delegate,function cy(...i){return new ly("endBefore",i,!1)}(...e)))}catch(t){throw au(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new la(this.firestore,mh(this._delegate,function dy(...i){return new ly("endAt",i,!0)}(...e)))}catch(t){throw au(t,"endAt()","Query.endAt()")}}isEqual(e){return ph(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function tv(i){i=mr(i,ba);const e=mr(i.firestore,Wi),t=zs(e),s=new vf(e);return function y_(i,e){const t=new ae;return i.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(s=(0,Ie.Z)(function*(d,g,v){try{const x=yield qf(d,g,!0),j=new hl(g,x.ji),q=j.Ku(x.documents),ie=j.applyChanges(q,!1);v.resolve(ie.snapshot)}catch(x){const j=rh(x,`Failed to execute query '${g} against cache`);v.reject(j)}}),function(d,g,v){return s.apply(this,arguments)})(yield Ag(i),e,t);var s})),t.promise}(t,i._query).then(d=>new ua(e,s,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function nv(i){i=mr(i,ba);const e=mr(i.firestore,Wi),t=zs(e),s=new vf(e);return Rg(t,i._query,{source:"server"}).then(d=>new ua(e,s,i,d))}(this._delegate):function ev(i){i=mr(i,ba);const e=mr(i.firestore,Wi),t=zs(e),s=new vf(e);return R_(i._query),Rg(t,i._query).then(d=>new ua(e,s,i,d))}(this._delegate),t.then(s=>new Dy(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=by(e),s=jg(e,d=>new Dy(this.firestore,new ua(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return my(this._delegate,t,s)}withConverter(e){return new la(this.firestore,this._delegate.withConverter(e?_n.getInstance(this.firestore,e):null))}}class qs{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new yh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Dy{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new la(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new yh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qs(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new yh(this._firestore,s))})}isEqual(e){return x_(this._delegate,e._delegate)}}class wf extends la{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new fl(this.firestore,e):null}doc(e){try{return new fl(this.firestore,void 0===e?fh(this._delegate):fh(this._delegate,e))}catch(t){throw au(t,"doc()","CollectionReference.doc()")}}add(e){return function iv(i,e){const t=mr(i.firestore,Wi),s=fh(i),d=Ug(i.converter,e);return kp(t,[jl($u(i.firestore),"addDoc",s._key,d,null!==i.converter,{}).toMutation(s._key,xi.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new fl(this.firestore,t))}isEqual(e){return Vm(this._delegate,e._delegate)}withConverter(e){return new wf(this.firestore,this._delegate.withConverter(e?_n.getInstance(this.firestore,e):null))}}function Ef(i){return mr(i,Gi)}class $_{constructor(...e){this._delegate=new Re(...e)}static documentId(){return new $_(Ji.keyField().canonicalString())}isEqual(e){return(e=(0,He.m9)(e))instanceof Re&&this._delegate._internalPath.isEqual(e._internalPath)}}class vh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function _y(){return new mf("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new vh(e)}static delete(){const e=function uv(){return new wd("deleteField")}();return e._methodName="FieldValue.delete",new vh(e)}static arrayUnion(...e){const t=function yy(...i){return new Wo("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new vh(t)}static arrayRemove(...e){const t=function vy(...i){return new ry("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new vh(t)}static increment(e){const t=function wy(i){return new zy("increment",i)}(e);return t._methodName="FieldValue.increment",new vh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ty={Firestore:Km,GeoPoint:Vt,Timestamp:$r,Blob:Bg,Transaction:j_,WriteBatch:dv,DocumentReference:fl,DocumentSnapshot:$g,Query:la,QueryDocumentSnapshot:yh,QuerySnapshot:Dy,CollectionReference:wf,FieldPath:$_,FieldValue:vh,setLogLevel:function Cy(i){!function Zl(i){_a.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Ay(i){(function Sy(i,e){i.INTERNAL.registerComponent(new rt.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(s,d)},"PUBLIC").setServiceProps(Object.assign({},Ty)))})(i,(e,t)=>new Km(e,t,new d0)),i.registerVersion("@firebase/firestore-compat","0.1.20")}(at.Z);var wh=$(1205),hv=$(440),fv=$(127);function xy(i,e){return function Hg(i,e=ne.z){return new te.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function H_(i,e){return xy(i,e).pipe((0,de.U)(t=>({payload:t,type:"query"})))}function If(i,e){return H_(i,e).pipe((0,fe.O)(void 0),Ne(),(0,de.U)(([t,s])=>{const d=s.payload.docChanges(),g=d.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((v,x)=>{const j=d.find(ie=>ie.doc.ref.isEqual(v.ref)),q=null==t?void 0:t.payload.docs.find(ie=>ie.ref.isEqual(v.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(v.metadata)||!j&&q&&JSON.stringify(q.metadata)===JSON.stringify(v.metadata)||g.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:v}})}),g}))}function G_(i,e,t){return If(i,t).pipe((0,Pe.R)((s,d)=>function Ry(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function gv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return qm(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qm(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qm(i,e.oldIndex,1)}return i}(i,s))}),i}(s,d.map(g=>g.payload),e),[]),(0,wt.x)(),(0,de.U)(s=>s.map(d=>({type:d.type,payload:d}))))}function qm(i,e,t,...s){const d=i.slice();return d.splice(e,t,...s),d}function Lp(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class Vp{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=If(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,de.U)(s=>s.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,fe.O)(void 0),Ne(),(0,st.h)(([s,d])=>d.length>0||!s),(0,de.U)(([s,d])=>d),ye.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Pe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Lp(e);return G_(this.query,t,this.afs.schedulers.outsideAngular).pipe(ye.iC)}valueChanges(e={}){return H_(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),ye.iC)}get(e){return(0,xe.D)(this.query.get(e)).pipe(ye.iC)}add(e){return this.ref.add(e)}doc(e){return new My(this.ref.doc(e),this.afs)}}class My{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:d,query:g}=ky(s,t);return new Vp(d,g,this.afs)}snapshotChanges(){return function pv(i,e){return xy(i,e).pipe((0,fe.O)(void 0),Ne(),(0,de.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ye.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,de.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xe.D)(this.ref.get(e)).pipe(ye.iC)}}class mv{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?If(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,st.h)(t=>t.length>0),ye.iC):If(this.query,this.afs.schedulers.outsideAngular).pipe(ye.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Pe.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=Lp(e);return G_(this.query,t,this.afs.schedulers.outsideAngular).pipe(ye.iC)}valueChanges(e={}){return H_(this.query,this.afs.schedulers.outsideAngular).pipe((0,de.U)(s=>s.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),ye.iC)}get(e){return(0,xe.D)(this.query.get(e)).pipe(ye.iC)}}const Ny=new w.OlP("angularfire2.enableFirestorePersistence"),W_=new w.OlP("angularfire2.firestore.persistenceSettings"),Py=new w.OlP("angularfire2.firestore.settings"),Oy=new w.OlP("angularfire2.firestore.use-emulator");function ky(i,e=(t=>t)){return{query:e(i),ref:i}}let z_=(()=>{class i{constructor(t,s,d,g,v,x,j,q,ie,me,Ze,dt,yt,qt,fn,ai,fs){this.schedulers=j;const zr=(0,ot.on)(t,x,s),Co=ie;me&&(0,wh.nw)(zr,x,Ze,yt,qt,fn,dt,ai),[this.firestore,this.persistenceEnabled$]=(0,ot.cc)(`${zr.name}.firestore`,"AngularFirestore",zr.name,()=>{const os=x.runOutsideAngular(()=>zr.firestore());if(g&&os.settings(g),Co&&os.useEmulator(...Co),d&&!(0,It.PM)(v)){const Us=()=>{try{return(0,xe.D)(os.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(Da){return"undefined"!=typeof console&&console.warn(Da),(0,Ee.of)(!1)}};return[os,x.runOutsideAngular(Us)]}return[os,(0,Ee.of)(!1)]},[g,Co,d])}collection(t,s){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:g,query:v}=ky(d,s),x=this.schedulers.ngZone.run(()=>g);return new Vp(x,v,this)}collectionGroup(t,s){const d=s||(v=>v),g=this.firestore.collectionGroup(t);return new mv(d(g),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>s);return new My(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(w.LFG(ot.Dh),w.LFG(ot.xv,8),w.LFG(Ny,8),w.LFG(Py,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(ye.HU),w.LFG(W_,8),w.LFG(Oy,8),w.LFG(wh.zQ,8),w.LFG(wh.Qv,8),w.LFG(wh.L6,8),w.LFG(wh._Q,8),w.LFG(wh.rT,8),w.LFG(wh.lh,8),w.LFG(wh.f7,8),w.LFG(hv.nm,8))},i.\u0275prov=w.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),_v=(()=>{class i{constructor(){fv.Z.registerVersion("angularfire",ye.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:Ny,useValue:!0},{provide:W_,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=w.oAB({type:i}),i.\u0275inj=w.cJS({providers:[z_]}),i})()},2011:(St,je,$)=>{$.d(je,{hO:()=>wt,xv:()=>Ne,Dh:()=>we,GT:()=>ye,cc:()=>st,on:()=>fe,pX:()=>Ee});var w=$(5e3),ne=$(127),te=$(5813);St=$.hmd(St);const xe=["ngOnDestroy"],Ee=(at,Ie,Tt,rt={})=>new Proxy(at,{get:(Qe,He)=>Tt.runOutsideAngular(()=>{var qe;if(at[He])return(null===(qe=null==rt?void 0:rt.spy)||void 0===qe?void 0:qe.get)&&rt.spy.get(He,at[He]),at[He];if(xe.indexOf(He)>-1)return()=>{};const ft=Ie.toPromise().then(oe=>{const et=oe&&oe[He];return"function"==typeof et?et.bind(oe):et&&et.then?et.then(he=>Tt.run(()=>he)):Tt.run(()=>et)});return new Proxy(()=>{},{get:(oe,et)=>ft[et],apply:(oe,et,he)=>ft.then(De=>{var Me;const ze=De&&De(...he);return(null===(Me=null==rt?void 0:rt.spy)||void 0===Me?void 0:Me.apply)&&rt.spy.apply(He,he,ze),ze})})})}),ye=(at,Ie)=>{Ie.forEach(Tt=>{Object.getOwnPropertyNames(Tt.prototype||Tt).forEach(rt=>{Object.defineProperty(at.prototype,rt,Object.getOwnPropertyDescriptor(Tt.prototype||Tt,rt))})})};class Le{constructor(Ie){return Ie}}const we=new w.OlP("angularfire2.app.options"),Ne=new w.OlP("angularfire2.app.name");function fe(at,Ie,Tt){const Qe="object"==typeof Tt&&Tt||{};Qe.name=Qe.name||"string"==typeof Tt&&Tt||"[DEFAULT]";const qe=ne.Z.apps.filter(ft=>ft&&ft.name===Qe.name)[0]||Ie.runOutsideAngular(()=>ne.Z.initializeApp(at,Qe));try{JSON.stringify(at)!==JSON.stringify(qe.options)&&de("error",`${qe.name} Firebase App already initialized with different options${St.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ft){}return new Le(qe)}const de=(at,...Ie)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[at](...Ie)},Pe={provide:Le,useFactory:fe,deps:[we,w.R0b,[new w.FiY,Ne]]};let wt=(()=>{class at{constructor(Tt){ne.Z.registerVersion("angularfire",te.q4.full,"core"),ne.Z.registerVersion("angularfire",te.q4.full,"app-compat"),ne.Z.registerVersion("angular",w.q4F.full,Tt.toString())}static initializeApp(Tt,rt){return{ngModule:at,providers:[{provide:we,useValue:Tt},{provide:Ne,useValue:rt}]}}}return at.\u0275fac=function(Tt){return new(Tt||at)(w.LFG(w.Lbi))},at.\u0275mod=w.oAB({type:at}),at.\u0275inj=w.cJS({providers:[Pe]}),at})();function st(at,Ie,Tt,rt,Qe){const[,He,qe]=globalThis.\u0275AngularfireInstanceCache.find(ft=>ft[0]===at)||[];if(He)return function ot(at,Ie){try{return at.toString()===Ie.toString()}catch(Tt){return at===Ie}}(Qe,qe)||(Ye("error",`${Ie} was already initialized on the ${Tt} Firebase App with different settings.${It?" You may need to reload as Firebase is not HMR aware.":""}`),Ye("warn",{is:Qe,was:qe})),He;{const ft=rt();return globalThis.\u0275AngularfireInstanceCache.push([at,ft,Qe]),ft}}const It=!!St.hot,Ye=(at,...Ie)=>{(0,w.X6Q)()&&"undefined"!=typeof console&&console[at](...Ie)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(St,je,$)=>{$.d(je,{q4:()=>Dr,iC:()=>Fr,fc:()=>ii,HU:()=>Os,vb:()=>Ka,JM:()=>vs});var w=$(5e3),ne=$(5867),te=$(5861),xe=$(9681),Ee=$(2090),ye=$(4859),Le=$(1877),we=$(8766);const Ne="@firebase/installations",fe="0.5.11",Pe=`w:${fe}`,wt="FIS_v2",Ie=new Ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Tt(k){return k instanceof Ee.ZR&&k.code.includes("request-failed")}function rt({projectId:k}){return`https://firebaseinstallations.googleapis.com/v1/projects/${k}/installations`}function Qe(k){return{token:k.token,requestStatus:2,expiresIn:De(k.expiresIn),creationTime:Date.now()}}function He(k,U){return qe.apply(this,arguments)}function qe(){return(qe=(0,te.Z)(function*(k,U){const ce=(yield U.json()).error;return Ie.create("request-failed",{requestName:k,serverCode:ce.code,serverMessage:ce.message,serverStatus:ce.status})})).apply(this,arguments)}function ft({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function oe(k,{refreshToken:U}){const Q=ft(k);return Q.append("Authorization",function Me(k){return`${wt} ${k}`}(U)),Q}function et(k){return he.apply(this,arguments)}function he(){return(he=(0,te.Z)(function*(k){const U=yield k();return U.status>=500&&U.status<600?k():U})).apply(this,arguments)}function De(k){return Number(k.replace("s","000"))}function ze(k,U){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,te.Z)(function*({appConfig:k,heartbeatServiceProvider:U},{fid:Q}){const ce=rt(k),Oe=ft(k),We=U.getImmediate({optional:!0});if(We){const mn=yield We.getHeartbeatsHeader();mn&&Oe.append("x-firebase-client",mn)}const Et={method:"POST",headers:Oe,body:JSON.stringify({fid:Q,authVersion:wt,appId:k.appId,sdkVersion:Pe})},hn=yield et(()=>fetch(ce,Et));if(hn.ok){const mn=yield hn.json();return{fid:mn.fid||Q,registrationStatus:2,refreshToken:mn.refreshToken,authToken:Qe(mn.authToken)}}throw yield He("Create Installation",hn)})).apply(this,arguments)}function pt(k){return new Promise(U=>{setTimeout(U,k)})}const $t=/^[cdef][\w-]{21}$/;function tt(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const Q=function en(k){return function bt(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return $t.test(Q)?Q:""}catch(k){return""}}function Zt(k){return`${k.appName}!${k.appId}`}const Qt=new Map;function Yt(k,U){const Q=Zt(k);cn(Q,U),function pr(k,U){const Q=function wr(){return!or&&"BroadcastChannel"in self&&(or=new BroadcastChannel("[Firebase] FID Change"),or.onmessage=k=>{cn(k.data.key,k.data.fid)}),or}();Q&&Q.postMessage({key:k,fid:U}),function gr(){0===Qt.size&&or&&(or.close(),or=null)}()}(Q,U)}function cn(k,U){const Q=Qt.get(k);if(Q)for(const ce of Q)ce(U)}let or=null;const Er="firebase-installations-store";let Zn=null;function Ht(){return Zn||(Zn=(0,we.X3)("firebase-installations-database",1,{upgrade:(k,U)=>{0===U&&k.createObjectStore(Er)}})),Zn}function Ln(k,U){return wn.apply(this,arguments)}function wn(){return(wn=(0,te.Z)(function*(k,U){const Q=Zt(k),Oe=(yield Ht()).transaction(Er,"readwrite"),We=Oe.objectStore(Er),ht=yield We.get(Q);return yield We.put(U,Q),yield Oe.done,(!ht||ht.fid!==U.fid)&&Yt(k,U.fid),U})).apply(this,arguments)}function pn(k){return as.apply(this,arguments)}function as(){return(as=(0,te.Z)(function*(k){const U=Zt(k),ce=(yield Ht()).transaction(Er,"readwrite");yield ce.objectStore(Er).delete(U),yield ce.done})).apply(this,arguments)}function Ki(k,U){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,te.Z)(function*(k,U){const Q=Zt(k),Oe=(yield Ht()).transaction(Er,"readwrite"),We=Oe.objectStore(Er),ht=yield We.get(Q),Et=U(ht);return void 0===Et?yield We.delete(Q):yield We.put(Et,Q),yield Oe.done,Et&&(!ht||ht.fid!==Et.fid)&&Yt(k,Et.fid),Et})).apply(this,arguments)}function kr(k){return vi.apply(this,arguments)}function vi(){return(vi=(0,te.Z)(function*(k){let U;const Q=yield Ki(k.appConfig,ce=>{const Oe=_r(ce),We=Rt(k,Oe);return U=We.registrationPromise,We.installationEntry});return""===Q.fid?{installationEntry:yield U}:{installationEntry:Q,registrationPromise:U}})).apply(this,arguments)}function _r(k){return Is(k||{fid:tt(),registrationStatus:0})}function Rt(k,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(Ie.create("app-offline"))};const Q={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},ce=function jt(k,U){return Wt.apply(this,arguments)}(k,Q);return{installationEntry:Q,registrationPromise:ce}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:Rr(k)}:{installationEntry:U}}function Wt(){return(Wt=(0,te.Z)(function*(k,U){try{const Q=yield ze(k,U);return Ln(k.appConfig,Q)}catch(Q){throw Tt(Q)&&409===Q.customData.serverCode?yield pn(k.appConfig):yield Ln(k.appConfig,{fid:U.fid,registrationStatus:0}),Q}})).apply(this,arguments)}function Rr(k){return qi.apply(this,arguments)}function qi(){return(qi=(0,te.Z)(function*(k){let U=yield Dn(k.appConfig);for(;1===U.registrationStatus;)yield pt(100),U=yield Dn(k.appConfig);if(0===U.registrationStatus){const{installationEntry:Q,registrationPromise:ce}=yield kr(k);return ce||Q}return U})).apply(this,arguments)}function Dn(k){return Ki(k,U=>{if(!U)throw Ie.create("installation-not-found");return Is(U)})}function Is(k){return function wi(k){return 1===k.registrationStatus&&k.registrationTime+1e4<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function ur(k,U){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,te.Z)(function*({appConfig:k,heartbeatServiceProvider:U},Q){const ce=Te(k,Q),Oe=oe(k,Q),We=U.getImmediate({optional:!0});if(We){const mn=yield We.getHeartbeatsHeader();mn&&Oe.append("x-firebase-client",mn)}const Et={method:"POST",headers:Oe,body:JSON.stringify({installation:{sdkVersion:Pe,appId:k.appId}})},hn=yield et(()=>fetch(ce,Et));if(hn.ok)return Qe(yield hn.json());throw yield He("Generate Auth Token",hn)})).apply(this,arguments)}function Te(k,{fid:U}){return`${rt(k)}/${U}/authTokens:generate`}function pe(k){return ke.apply(this,arguments)}function ke(){return(ke=(0,te.Z)(function*(k,U=!1){let Q;const ce=yield Ki(k.appConfig,We=>{if(!tn(We))throw Ie.create("not-registered");const ht=We.authToken;if(!U&&Yn(ht))return We;if(1===ht.requestStatus)return Q=Se(k,U),We;{if(!navigator.onLine)throw Ie.create("app-offline");const Et=yn(We);return Q=vt(k,Et),Et}});return Q?yield Q:ce.authToken})).apply(this,arguments)}function Se(k,U){return le.apply(this,arguments)}function le(){return(le=(0,te.Z)(function*(k,U){let Q=yield Ke(k.appConfig);for(;1===Q.authToken.requestStatus;)yield pt(100),Q=yield Ke(k.appConfig);const ce=Q.authToken;return 0===ce.requestStatus?pe(k,U):ce})).apply(this,arguments)}function Ke(k){return Ki(k,U=>{if(!tn(U))throw Ie.create("not-registered");return function lr(k){return 1===k.requestStatus&&k.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function vt(k,U){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,te.Z)(function*(k,U){try{const Q=yield ur(k,U),ce=Object.assign(Object.assign({},U),{authToken:Q});return yield Ln(k.appConfig,ce),Q}catch(Q){if(!Tt(Q)||401!==Q.customData.serverCode&&404!==Q.customData.serverCode){const ce=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield Ln(k.appConfig,ce)}else yield pn(k.appConfig);throw Q}})).apply(this,arguments)}function tn(k){return void 0!==k&&2===k.registrationStatus}function Yn(k){return 2===k.requestStatus&&!function Qn(k){const U=Date.now();return U<k.creationTime||k.creationTime+k.expiresIn<U+36e5}(k)}function yn(k){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:U})}function ui(){return(ui=(0,te.Z)(function*(k){const U=k,{installationEntry:Q,registrationPromise:ce}=yield kr(U);return ce?ce.catch(console.error):pe(U).catch(console.error),Q.fid})).apply(this,arguments)}function vn(){return(vn=(0,te.Z)(function*(k,U=!1){const Q=k;return yield Ir(Q),(yield pe(Q,U)).token})).apply(this,arguments)}function Ir(k){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,te.Z)(function*(k){const{registrationPromise:U}=yield kr(k);U&&(yield U)})).apply(this,arguments)}function ps(k){return Ie.create("missing-app-config-values",{valueName:k})}const Tn="installations",At=k=>{const U=k.getProvider("app").getImmediate(),Q=function cr(k){if(!k||!k.options)throw ps("App Configuration");if(!k.name)throw ps("App Name");const U=["projectId","apiKey","appId"];for(const Q of U)if(!k.options[Q])throw ps(Q);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(U);return{app:U,appConfig:Q,heartbeatServiceProvider:(0,xe._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},Sn=k=>{const U=k.getProvider("app").getImmediate(),Q=(0,xe._getProvider)(U,Tn).getImmediate();return{getId:()=>function Cs(k){return ui.apply(this,arguments)}(Q),getToken:Oe=>function ts(k){return vn.apply(this,arguments)}(Q,Oe)}};(function br(){(0,xe._registerComponent)(new ye.wA(Tn,At,"PUBLIC")),(0,xe._registerComponent)(new ye.wA("installations-internal",Sn,"PRIVATE"))})(),(0,xe.registerVersion)(Ne,fe),(0,xe.registerVersion)(Ne,fe,"esm2017");const Kr="@firebase/remote-config",yr=new Ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Ts{constructor(U,Q,ce,Oe){this.client=U,this.storage=Q,this.storageCache=ce,this.logger=Oe}isCachedDataFresh(U,Q){if(!Q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ce=Date.now()-Q,Oe=ce<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ce}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${Oe}.`),Oe}fetch(U){var Q=this;return(0,te.Z)(function*(){const[ce,Oe]=yield Promise.all([Q.storage.getLastSuccessfulFetchTimestampMillis(),Q.storage.getLastSuccessfulFetchResponse()]);if(Oe&&Q.isCachedDataFresh(U.cacheMaxAgeMillis,ce))return Oe;U.eTag=Oe&&Oe.eTag;const We=yield Q.client.fetch(U),ht=[Q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===We.status&&ht.push(Q.storage.setLastSuccessfulFetchResponse(We)),yield Promise.all(ht),We})()}}function lo(k=navigator){return k.languages&&k.languages[0]||k.language}class dr{constructor(U,Q,ce,Oe,We,ht){this.firebaseInstallations=U,this.sdkVersion=Q,this.namespace=ce,this.projectId=Oe,this.apiKey=We,this.appId=ht}fetch(U){var Q=this;return(0,te.Z)(function*(){var ce,Oe,We;const[ht,Et]=yield Promise.all([Q.firebaseInstallations.getId(),Q.firebaseInstallations.getToken()]),mn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Q.projectId}/namespaces/${Q.namespace}:fetch?key=${Q.apiKey}`,An={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},Xt={sdk_version:Q.sdkVersion,app_instance_id:ht,app_instance_id_token:Et,app_id:Q.appId,language_code:lo()},Wr={method:"POST",headers:An,body:JSON.stringify(Xt)},ws=fetch(mn,Wr),Fo=new Promise((yo,Ra)=>{U.signal.addEventListener(()=>{const Mu=new Error("The operation was aborted.");Mu.name="AbortError",Ra(Mu)})});let _o;try{yield Promise.race([ws,Fo]),_o=yield ws}catch(yo){let Ra="fetch-client-network";throw"AbortError"===(null===(ce=yo)||void 0===ce?void 0:ce.name)&&(Ra="fetch-timeout"),yr.create(Ra,{originalErrorMessage:null===(Oe=yo)||void 0===Oe?void 0:Oe.message})}let ds=_o.status;const xu=_o.headers.get("ETag")||void 0;let oo,Ru;if(200===_o.status){let yo;try{yo=yield _o.json()}catch(Ra){throw yr.create("fetch-client-parse",{originalErrorMessage:null===(We=Ra)||void 0===We?void 0:We.message})}oo=yo.entries,Ru=yo.state}if("INSTANCE_STATE_UNSPECIFIED"===Ru?ds=500:"NO_CHANGE"===Ru?ds=304:("NO_TEMPLATE"===Ru||"EMPTY_CONFIG"===Ru)&&(oo={}),304!==ds&&200!==ds)throw yr.create("fetch-status",{httpStatus:ds});return{status:ds,eTag:xu,config:oo}})()}}class be{constructor(U,Q){this.client=U,this.storage=Q}fetch(U){var Q=this;return(0,te.Z)(function*(){const ce=(yield Q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Q.attemptFetch(U,ce)})()}attemptFetch(U,{throttleEndTimeMillis:Q,backoffCount:ce}){var Oe=this;return(0,te.Z)(function*(){yield function vr(k,U){return new Promise((Q,ce)=>{const Oe=Math.max(U-Date.now(),0),We=setTimeout(Q,Oe);k.addEventListener(()=>{clearTimeout(We),ce(yr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,Q);try{const We=yield Oe.client.fetch(U);return yield Oe.storage.deleteThrottleMetadata(),We}catch(We){if(!function Ae(k){if(!(k instanceof Ee.ZR&&k.customData))return!1;const U=Number(k.customData.httpStatus);return 429===U||500===U||503===U||504===U}(We))throw We;const ht={throttleEndTimeMillis:Date.now()+(0,Ee.$s)(ce),backoffCount:ce+1};return yield Oe.storage.setThrottleMetadata(ht),Oe.attemptFetch(U,ht)}})()}}class Ct{constructor(U,Q,ce,Oe,We){this.app=U,this._client=Q,this._storageCache=ce,this._storage=Oe,this._logger=We,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nt(k,U){var Q;const ce=k.target.error||void 0;return yr.create(U,{originalErrorMessage:ce&&(null===(Q=ce)||void 0===Q?void 0:Q.message)})}const Mn="app_namespace_store";class ni{constructor(U,Q,ce,Oe=function Zi(){return new Promise((k,U)=>{var Q;try{const ce=indexedDB.open("firebase_remote_config",1);ce.onerror=Oe=>{U(Nt(Oe,"storage-open"))},ce.onsuccess=Oe=>{k(Oe.target.result)},ce.onupgradeneeded=Oe=>{0===Oe.oldVersion&&Oe.target.result.createObjectStore(Mn,{keyPath:"compositeKey"})}}catch(ce){U(yr.create("storage-open",{originalErrorMessage:null===(Q=ce)||void 0===Q?void 0:Q.message}))}})}()){this.appId=U,this.appName=Q,this.namespace=ce,this.openDbPromise=Oe}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var Q=this;return(0,te.Z)(function*(){const ce=yield Q.openDbPromise;return new Promise((Oe,We)=>{var ht;const hn=ce.transaction([Mn],"readonly").objectStore(Mn),mn=Q.createCompositeKey(U);try{const An=hn.get(mn);An.onerror=Xt=>{We(Nt(Xt,"storage-get"))},An.onsuccess=Xt=>{const Wr=Xt.target.result;Oe(Wr?Wr.value:void 0)}}catch(An){We(yr.create("storage-get",{originalErrorMessage:null===(ht=An)||void 0===ht?void 0:ht.message}))}})})()}set(U,Q){var ce=this;return(0,te.Z)(function*(){const Oe=yield ce.openDbPromise;return new Promise((We,ht)=>{var Et;const mn=Oe.transaction([Mn],"readwrite").objectStore(Mn),An=ce.createCompositeKey(U);try{const Xt=mn.put({compositeKey:An,value:Q});Xt.onerror=Wr=>{ht(Nt(Wr,"storage-set"))},Xt.onsuccess=()=>{We()}}catch(Xt){ht(yr.create("storage-set",{originalErrorMessage:null===(Et=Xt)||void 0===Et?void 0:Et.message}))}})})()}delete(U){var Q=this;return(0,te.Z)(function*(){const ce=yield Q.openDbPromise;return new Promise((Oe,We)=>{var ht;const hn=ce.transaction([Mn],"readwrite").objectStore(Mn),mn=Q.createCompositeKey(U);try{const An=hn.delete(mn);An.onerror=Xt=>{We(Nt(Xt,"storage-delete"))},An.onsuccess=()=>{Oe()}}catch(An){We(yr.create("storage-delete",{originalErrorMessage:null===(ht=An)||void 0===ht?void 0:ht.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class To{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,te.Z)(function*(){const Q=U.storage.getLastFetchStatus(),ce=U.storage.getLastSuccessfulFetchTimestampMillis(),Oe=U.storage.getActiveConfig(),We=yield Q;We&&(U.lastFetchStatus=We);const ht=yield ce;ht&&(U.lastSuccessfulFetchTimestampMillis=ht);const Et=yield Oe;Et&&(U.activeConfig=Et)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function Bs(){return ca.apply(this,arguments)}function ca(){return(ca=(0,te.Z)(function*(){if(!(0,Ee.hl)())return!1;try{return yield(0,Ee.eu)()}catch(k){return!1}})).apply(this,arguments)}!function qr(){(0,xe._registerComponent)(new ye.wA("remote-config",function k(U,{instanceIdentifier:Q}){const ce=U.getProvider("app").getImmediate(),Oe=U.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw yr.create("registration-window");if(!(0,Ee.hl)())throw yr.create("indexed-db-unavailable");const{projectId:We,apiKey:ht,appId:Et}=ce.options;if(!We)throw yr.create("registration-project-id");if(!ht)throw yr.create("registration-api-key");if(!Et)throw yr.create("registration-app-id");const hn=new ni(Et,ce.name,Q=Q||"firebase"),mn=new To(hn),An=new Le.Yd(Kr);An.logLevel=Le.in.ERROR;const Xt=new dr(Oe,xe.SDK_VERSION,Q,We,ht,Et),Wr=new be(Xt,hn),ws=new Ts(Wr,hn,mn,An),Fo=new Ct(ce,ws,mn,hn,An);return function kn(k){const U=(0,Ee.m9)(k);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(Fo),Fo},"PUBLIC").setMultipleInstances(!0)),(0,xe.registerVersion)(Kr,"0.3.10"),(0,xe.registerVersion)(Kr,"0.3.10","esm2017")}();const Fa="/firebase-messaging-sw.js",Zr="/firebase-cloud-messaging-push-scope",Ss="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ys="google.c.a.c_id",da="google.c.a.c_l",js="google.c.a.ts",is="google.c.a.e";var Qs=(()=>{return(k=Qs||(Qs={})).PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",Qs;var k})();function di(k){const U=new Uint8Array(k);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function So(k){const Q=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ce=atob(Q),Oe=new Uint8Array(ce.length);for(let We=0;We<ce.length;++We)Oe[We]=ce.charCodeAt(We);return Oe}const jr="fcm_token_details_db",hi="fcm_token_object_Store";function ha(k){return ms.apply(this,arguments)}function ms(){return ms=(0,te.Z)(function*(k){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(We=>We.name).includes(jr))return null;let U=null;return(yield(0,we.X3)(jr,5,{upgrade:(ce=(0,te.Z)(function*(Oe,We,ht,Et){var hn;if(We<2||!Oe.objectStoreNames.contains(hi))return;const mn=Et.objectStore(hi),An=yield mn.index("fcmSenderId").get(k);if(yield mn.clear(),An)if(2===We){const Xt=An;if(!Xt.auth||!Xt.p256dh||!Xt.endpoint)return;U={token:Xt.fcmToken,createTime:null!==(hn=Xt.createTime)&&void 0!==hn?hn:Date.now(),subscriptionOptions:{auth:Xt.auth,p256dh:Xt.p256dh,endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:"string"==typeof Xt.vapidKey?Xt.vapidKey:di(Xt.vapidKey)}}}else if(3===We){const Xt=An;U={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:di(Xt.auth),p256dh:di(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:di(Xt.vapidKey)}}}else if(4===We){const Xt=An;U={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:di(Xt.auth),p256dh:di(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:di(Xt.vapidKey)}}}}),function(We,ht,Et,hn){return ce.apply(this,arguments)})})).close(),yield(0,we.Lj)(jr),yield(0,we.Lj)("fcm_vapid_details_db"),yield(0,we.Lj)("undefined"),Li(U)?U:null;var ce}),ms.apply(this,arguments)}function Li(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:U}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const Rs="firebase-messaging-store";let Js=null;function Vn(){return Js||(Js=(0,we.X3)("firebase-messaging-database",1,{upgrade:(k,U)=>{0===U&&k.createObjectStore(Rs)}})),Js}function L(k){return Z.apply(this,arguments)}function Z(){return(Z=(0,te.Z)(function*(k){const U=lt(k),ce=yield(yield Vn()).transaction(Rs).objectStore(Rs).get(U);if(ce)return ce;{const Oe=yield ha(k.appConfig.senderId);if(Oe)return yield V(k,Oe),Oe}})).apply(this,arguments)}function V(k,U){return X.apply(this,arguments)}function X(){return(X=(0,te.Z)(function*(k,U){const Q=lt(k),Oe=(yield Vn()).transaction(Rs,"readwrite");return yield Oe.objectStore(Rs).put(U,Q),yield Oe.done,U})).apply(this,arguments)}function ge(k){return Je.apply(this,arguments)}function Je(){return(Je=(0,te.Z)(function*(k){const U=lt(k),ce=(yield Vn()).transaction(Rs,"readwrite");yield ce.objectStore(Rs).delete(U),yield ce.done})).apply(this,arguments)}function lt({appConfig:k}){return k.appId}const rn=new Ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Fn(k,U){return En.apply(this,arguments)}function En(){return(En=(0,te.Z)(function*(k,U){var Q;const ce=yield Ui(k),Oe=Bi(U),We={method:"POST",headers:ce,body:JSON.stringify(Oe)};let ht;try{ht=yield(yield fetch(Vi(k.appConfig),We)).json()}catch(Et){throw rn.create("token-subscribe-failed",{errorInfo:null===(Q=Et)||void 0===Q?void 0:Q.toString()})}if(ht.error)throw rn.create("token-subscribe-failed",{errorInfo:ht.error.message});if(!ht.token)throw rn.create("token-subscribe-no-token");return ht.token})).apply(this,arguments)}function Pn(k,U){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,te.Z)(function*(k,U){var Q;const ce=yield Ui(k),Oe=Bi(U.subscriptionOptions),We={method:"PATCH",headers:ce,body:JSON.stringify(Oe)};let ht;try{ht=yield(yield fetch(`${Vi(k.appConfig)}/${U.token}`,We)).json()}catch(Et){throw rn.create("token-update-failed",{errorInfo:null===(Q=Et)||void 0===Q?void 0:Q.toString()})}if(ht.error)throw rn.create("token-update-failed",{errorInfo:ht.error.message});if(!ht.token)throw rn.create("token-update-no-token");return ht.token})).apply(this,arguments)}function On(k,U){return $n.apply(this,arguments)}function $n(){return($n=(0,te.Z)(function*(k,U){var Q;const Oe={method:"DELETE",headers:yield Ui(k)};try{const ht=yield(yield fetch(`${Vi(k.appConfig)}/${U}`,Oe)).json();if(ht.error)throw rn.create("token-unsubscribe-failed",{errorInfo:ht.error.message})}catch(We){throw rn.create("token-unsubscribe-failed",{errorInfo:null===(Q=We)||void 0===Q?void 0:Q.toString()})}})).apply(this,arguments)}function Vi({projectId:k}){return`https://fcmregistrations.googleapis.com/v1/projects/${k}/registrations`}function Ui(k){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,te.Z)(function*({appConfig:k,installations:U}){const Q=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k.apiKey,"x-goog-firebase-installations-auth":`FIS ${Q}`})})).apply(this,arguments)}function Bi({p256dh:k,auth:U,endpoint:Q,vapidKey:ce}){const Oe={web:{endpoint:Q,auth:U,p256dh:k}};return ce!==Ss&&(Oe.web.applicationPubKey=ce),Oe}const Xs=6048e5;function co(k){return ho.apply(this,arguments)}function ho(){return(ho=(0,te.Z)(function*(k){const U=yield on(k.swRegistration,k.vapidKey),Q={vapidKey:k.vapidKey,swScope:k.swRegistration.scope,endpoint:U.endpoint,auth:di(U.getKey("auth")),p256dh:di(U.getKey("p256dh"))},ce=yield L(k.firebaseDependencies);if(ce){if(fi(ce.subscriptionOptions,Q))return Date.now()>=ce.createTime+Xs?O(k,{token:ce.token,createTime:Date.now(),subscriptionOptions:Q}):ce.token;try{yield On(k.firebaseDependencies,ce.token)}catch(Oe){console.warn(Oe)}return Ve(k.firebaseDependencies,Q)}return Ve(k.firebaseDependencies,Q)})).apply(this,arguments)}function B(k){return F.apply(this,arguments)}function F(){return(F=(0,te.Z)(function*(k){const U=yield L(k.firebaseDependencies);U&&(yield On(k.firebaseDependencies,U.token),yield ge(k.firebaseDependencies));const Q=yield k.swRegistration.pushManager.getSubscription();return!Q||Q.unsubscribe()})).apply(this,arguments)}function O(k,U){return H.apply(this,arguments)}function H(){return(H=(0,te.Z)(function*(k,U){try{const Q=yield Pn(k.firebaseDependencies,U),ce=Object.assign(Object.assign({},U),{token:Q,createTime:Date.now()});return yield V(k.firebaseDependencies,ce),Q}catch(Q){throw yield B(k),Q}})).apply(this,arguments)}function Ve(k,U){return kt.apply(this,arguments)}function kt(){return(kt=(0,te.Z)(function*(k,U){const ce={token:yield Fn(k,U),createTime:Date.now(),subscriptionOptions:U};return yield V(k,ce),ce.token})).apply(this,arguments)}function on(k,U){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,te.Z)(function*(k,U){return(yield k.pushManager.getSubscription())||k.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:So(U)})})).apply(this,arguments)}function fi(k,U){return U.vapidKey===k.vapidKey&&U.endpoint===k.endpoint&&U.auth===k.auth&&U.p256dh===k.p256dh}function Qi(k){const U={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function fo(k,U){if(!U.notification)return;k.notification={};const Q=U.notification.title;Q&&(k.notification.title=Q);const ce=U.notification.body;ce&&(k.notification.body=ce);const Oe=U.notification.image;Oe&&(k.notification.image=Oe)}(U,k),function po(k,U){!U.data||(k.data=U.data)}(U,k),function Gl(k,U){var Q,ce,Oe,We,ht;if(!U.fcmOptions&&!(null===(Q=U.notification)||void 0===Q?void 0:Q.click_action))return;k.fcmOptions={};const Et=null!==(Oe=null===(ce=U.fcmOptions)||void 0===ce?void 0:ce.link)&&void 0!==Oe?Oe:null===(We=U.notification)||void 0===We?void 0:We.click_action;Et&&(k.fcmOptions.link=Et);const hn=null===(ht=U.fcmOptions)||void 0===ht?void 0:ht.analytics_label;hn&&(k.fcmOptions.analyticsLabel=hn)}(U,k),U}function pl(k){return"object"==typeof k&&!!k&&Ys in k}function pi(k,U){const Q=[];for(let ce=0;ce<k.length;ce++)Q.push(k.charAt(ce)),ce<U.length&&Q.push(U.charAt(ce));return Q.join("")}function gi(k){return rn.create("missing-app-config-values",{valueName:k})}pi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),pi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _s{constructor(U,Q,ce){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Oe=function zo(k){if(!k||!k.options)throw gi("App Configuration Object");if(!k.name)throw gi("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:Q}=k;for(const ce of U)if(!Q[ce])throw gi(ce);return{appName:k.name,projectId:Q.projectId,apiKey:Q.apiKey,appId:Q.appId,senderId:Q.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:Oe,installations:Q,analyticsProvider:ce}}_delete(){return Promise.resolve()}}function La(k){return go.apply(this,arguments)}function go(){return(go=(0,te.Z)(function*(k){var U;try{k.swRegistration=yield navigator.serviceWorker.register(Fa,{scope:Zr}),k.swRegistration.update().catch(()=>{})}catch(Q){throw rn.create("failed-service-worker-registration",{browserErrorMessage:null===(U=Q)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function Ms(k,U){return $s.apply(this,arguments)}function $s(){return($s=(0,te.Z)(function*(k,U){if(!U&&!k.swRegistration&&(yield La(k)),U||!k.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw rn.create("invalid-sw-registration");k.swRegistration=U}})).apply(this,arguments)}function ri(k,U){return Wu.apply(this,arguments)}function Wu(){return(Wu=(0,te.Z)(function*(k,U){U?k.vapidKey=U:k.vapidKey||(k.vapidKey=Ss)})).apply(this,arguments)}function Eu(){return(Eu=(0,te.Z)(function*(k,U){if(!navigator)throw rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw rn.create("permission-blocked");return yield ri(k,null==U?void 0:U.vapidKey),yield Ms(k,null==U?void 0:U.serviceWorkerRegistration),co(k)})).apply(this,arguments)}function uu(k,U,Q){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,te.Z)(function*(k,U,Q){const ce=Iu(U);(yield k.firebaseDependencies.analyticsProvider.get()).logEvent(ce,{message_id:Q[Ys],message_name:Q[da],message_time:Q[js],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Iu(k){switch(k){case Qs.NOTIFICATION_CLICKED:return"notification_open";case Qs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Va(){return(Va=(0,te.Z)(function*(k,U){const Q=U.data;if(!Q.isFirebaseMessaging)return;k.onMessageHandler&&Q.messageType===Qs.PUSH_RECEIVED&&("function"==typeof k.onMessageHandler?k.onMessageHandler(Qi(Q)):k.onMessageHandler.next(Qi(Q)));const ce=Q.data;pl(ce)&&"1"===ce[is]&&(yield uu(k,Q.messageType,ce))})).apply(this,arguments)}const Ko="@firebase/messaging",qo=k=>{const U=new _s(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Q=>function gl(k,U){return Va.apply(this,arguments)}(U,Q)),U},fa=k=>{const U=k.getProvider("messaging").getImmediate();return{getToken:ce=>function zu(k,U){return Eu.apply(this,arguments)}(U,ce)}};function Ta(){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,te.Z)(function*(){try{yield(0,Ee.eu)()}catch(k){return!1}return"undefined"!=typeof window&&(0,Ee.hl)()&&(0,Ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cu(){(0,xe._registerComponent)(new ye.wA("messaging",qo,"PUBLIC")),(0,xe._registerComponent)(new ye.wA("messaging-internal",fa,"PRIVATE")),(0,xe.registerVersion)(Ko,"0.9.15"),(0,xe.registerVersion)(Ko,"0.9.15","esm2017")}();const Aa="analytics",Pc="firebase_id",eo="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xa="https://www.googletagmanager.com/gtag/js",ar=new Le.Yd("@firebase/analytics");function zl(k){return Promise.all(k.map(U=>U.catch(Q=>Q)))}function pa(k,U){const Q=document.createElement("script");Q.src=`${xa}?l=${k}&id=${U}`,Q.async=!0,document.head.appendChild(Q)}function ja(k,U,Q,ce,Oe,We){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,te.Z)(function*(k,U,Q,ce,Oe,We){const ht=ce[Oe];try{if(ht)yield U[ht];else{const hn=(yield zl(Q)).find(mn=>mn.measurementId===Oe);hn&&(yield U[hn.appId])}}catch(Et){ar.error(Et)}k("config",Oe,We)})).apply(this,arguments)}function cu(k,U,Q,ce,Oe){return ga.apply(this,arguments)}function ga(){return(ga=(0,te.Z)(function*(k,U,Q,ce,Oe){try{let We=[];if(Oe&&Oe.send_to){let ht=Oe.send_to;Array.isArray(ht)||(ht=[ht]);const Et=yield zl(Q);for(const hn of ht){const mn=Et.find(Xt=>Xt.measurementId===hn),An=mn&&U[mn.appId];if(!An){We=[];break}We.push(An)}}0===We.length&&(We=Object.values(U)),yield Promise.all(We),k("event",ce,Oe||{})}catch(We){ar.error(We)}})).apply(this,arguments)}function ml(){const k=window.document.getElementsByTagName("script");for(const U of Object.values(k))if(U.src&&U.src.includes(xa))return U;return null}const Ti=new Ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),_l=new class ro{constructor(U={},Q=1e3){this.throttleMetadata=U,this.intervalMillis=Q}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,Q){this.throttleMetadata[U]=Q}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function ql(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function Hs(k){return qu.apply(this,arguments)}function qu(){return(qu=(0,te.Z)(function*(k){var U;const{appId:Q,apiKey:ce}=k,Oe={method:"GET",headers:ql(ce)},We=eo.replace("{app-id}",Q),ht=yield fetch(We,Oe);if(200!==ht.status&&304!==ht.status){let Et="";try{const hn=yield ht.json();(null===(U=hn.error)||void 0===U?void 0:U.message)&&(Et=hn.error.message)}catch(hn){}throw Ti.create("config-fetch-failed",{httpStatus:ht.status,responseMessage:Et})}return ht.json()})).apply(this,arguments)}function Ar(k){return io.apply(this,arguments)}function io(){return(io=(0,te.Z)(function*(k,U=_l,Q){const{appId:ce,apiKey:Oe,measurementId:We}=k.options;if(!ce)throw Ti.create("no-app-id");if(!Oe){if(We)return{measurementId:We,appId:ce};throw Ti.create("no-api-key")}const ht=U.getThrottleMetadata(ce)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Et=new bu;return setTimeout((0,te.Z)(function*(){Et.abort()}),void 0!==Q?Q:6e4),Yo({appId:ce,apiKey:Oe,measurementId:We},ht,Et,U)})).apply(this,arguments)}function Yo(k,U,Q){return ji.apply(this,arguments)}function ji(){return(ji=(0,te.Z)(function*(k,{throttleEndTimeMillis:U,backoffCount:Q},ce,Oe=_l){var We,ht;const{appId:Et,measurementId:hn}=k;try{yield ma(ce,U)}catch(mn){if(hn)return ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${null===(We=mn)||void 0===We?void 0:We.message}]`),{appId:Et,measurementId:hn};throw mn}try{const mn=yield Hs(k);return Oe.deleteThrottleMetadata(Et),mn}catch(mn){const An=mn;if(!_a(An)){if(Oe.deleteThrottleMetadata(Et),hn)return ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${hn} provided in the "measurementId" field in the local Firebase config. [${null==An?void 0:An.message}]`),{appId:Et,measurementId:hn};throw mn}const Xt=503===Number(null===(ht=null==An?void 0:An.customData)||void 0===ht?void 0:ht.httpStatus)?(0,Ee.$s)(Q,Oe.intervalMillis,30):(0,Ee.$s)(Q,Oe.intervalMillis),Wr={throttleEndTimeMillis:Date.now()+Xt,backoffCount:Q+1};return Oe.setThrottleMetadata(Et,Wr),ar.debug(`Calling attemptFetch again in ${Xt} millis`),Yo(k,Wr,ce,Oe)}})).apply(this,arguments)}function ma(k,U){return new Promise((Q,ce)=>{const Oe=Math.max(U-Date.now(),0),We=setTimeout(Q,Oe);k.addEventListener(()=>{clearTimeout(We),ce(Ti.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function _a(k){if(!(k instanceof Ee.ZR&&k.customData))return!1;const U=Number(k.customData.httpStatus);return 429===U||500===U||503===U||504===U}class bu{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}function Zl(){return mt.apply(this,arguments)}function mt(){return(mt=(0,te.Z)(function*(){var k;if(!(0,Ee.hl)())return ar.warn(Ti.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ee.eu)()}catch(U){return ar.warn(Ti.create("indexeddb-unavailable",{errorInfo:null===(k=U)||void 0===k?void 0:k.toString()}).message),!1}return!0})).apply(this,arguments)}function Mo(){return(Mo=(0,te.Z)(function*(k,U,Q,ce,Oe,We,ht){var Et;const hn=Ar(k);hn.then(ws=>{Q[ws.measurementId]=ws.appId,k.options.measurementId&&ws.measurementId!==k.options.measurementId&&ar.warn(`The measurement ID in the local Firebase config (${k.options.measurementId}) does not match the measurement ID fetched from the server (${ws.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ws=>ar.error(ws)),U.push(hn);const mn=Zl().then(ws=>{if(ws)return ce.getId()}),[An,Xt]=yield Promise.all([hn,mn]);ml()||pa(We,An.measurementId),Oe("js",new Date);const Wr=null!==(Et=null==ht?void 0:ht.config)&&void 0!==Et?Et:{};return Wr.origin="firebase",Wr.update=!0,null!=Xt&&(Wr[Pc]=Xt),Oe("config",An.measurementId,Wr),An.measurementId})).apply(this,arguments)}class ya{constructor(U){this.app=U}_delete(){return delete S[this.app.options.appId],Promise.resolve()}}let S={},D=[];const b={};let W,ae,M="dataLayer",_e=!1;function Un(k,U,Q){!function Ft(){const k=[];if((0,Ee.ru)()&&k.push("This is a browser extension environment."),(0,Ee.zI)()||k.push("Cookies are not available."),k.length>0){const U=k.map((ce,Oe)=>`(${Oe+1}) ${ce}`).join(" "),Q=Ti.create("invalid-analytics-context",{errorInfo:U});ar.warn(Q.message)}}();const ce=k.options.appId;if(!ce)throw Ti.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw Ti.create("no-api-key");ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=S[ce])throw Ti.create("already-exists",{id:ce});if(!_e){!function to(k){let U=[];Array.isArray(window[k])?U=window[k]:window[k]=U}(M);const{wrappedGtag:We,gtagCore:ht}=function no(k,U,Q,ce,Oe){let We=function(...ht){window[ce].push(arguments)};return window[Oe]&&"function"==typeof window[Oe]&&(We=window[Oe]),window[Oe]=function du(k,U,Q,ce){function We(){return(We=(0,te.Z)(function*(ht,Et,hn){try{"event"===ht?yield cu(k,U,Q,Et,hn):"config"===ht?yield ja(k,U,Q,ce,Et,hn):k("set",Et)}catch(mn){ar.error(mn)}})).apply(this,arguments)}return function Oe(ht,Et,hn){return We.apply(this,arguments)}}(We,k,U,Q),{gtagCore:We,wrappedGtag:window[Oe]}}(S,D,b,M,"gtag");ae=We,W=ht,_e=!0}return S[ce]=function Pr(k,U,Q,ce,Oe,We,ht){return Mo.apply(this,arguments)}(k,D,b,U,W,M,Q),new ya(k)}function hr(){return(hr=(0,te.Z)(function*(k,U,Q,ce,Oe){if(Oe&&Oe.global)k("event",Q,ce);else{const We=yield U;k("event",Q,Object.assign(Object.assign({},ce),{send_to:We}))}})).apply(this,arguments)}function vl(){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,te.Z)(function*(){if((0,Ee.ru)()||!(0,Ee.zI)()||!(0,Ee.hl)())return!1;try{return yield(0,Ee.eu)()}catch(k){return!1}})).apply(this,arguments)}const Po="@firebase/analytics";!function Ga(){(0,xe._registerComponent)(new ye.wA(Aa,(U,{options:Q})=>Un(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),Q),"PUBLIC")),(0,xe._registerComponent)(new ye.wA("analytics-internal",function k(U){try{const Q=U.getProvider(Aa).getImmediate();return{logEvent:(ce,Oe,We)=>function Oc(k,U,Q,ce){k=(0,Ee.m9)(k),function Gt(k,U,Q,ce,Oe){return hr.apply(this,arguments)}(ae,S[k.app.options.appId],U,Q,ce).catch(Oe=>ar.error(Oe))}(Q,ce,Oe,We)}}catch(Q){throw Ti.create("interop-component-reg-failed",{reason:Q})}},"PRIVATE")),(0,xe.registerVersion)(Po,"0.7.11"),(0,xe.registerVersion)(Po,"0.7.11","esm2017")}();var Tu=$(4408),Xn=$(7565);const Wa=new class wa extends Xn.v{}(class Ad extends Tu.o{constructor(U,Q){super(U,Q),this.scheduler=U,this.work=Q}schedule(U,Q=0){return Q>0?super.schedule(U,Q):(this.delay=Q,this.state=U,this.scheduler.flush(this),this)}execute(U,Q){return Q>0||this.closed?super.execute(U,Q):this._execute(U,Q)}requestAsyncId(U,Q,ce=0){return null!=ce&&ce>0||null==ce&&this.delay>0?super.requestAsyncId(U,Q,ce):U.flush(this)}});var Hr=$(4986),ys=$(8505),$e=$(5363),Ns=$(9468);const Dr=new w.GfV("7.4.1"),Su="__angularfire_symbol__analyticsIsSupportedValue",Oo="__angularfire_symbol__analyticsIsSupported",mo="__angularfire_symbol__remoteConfigIsSupportedValue",Ps="__angularfire_symbol__remoteConfigIsSupported",cs="__angularfire_symbol__messagingIsSupportedValue",za="__angularfire_symbol__messagingIsSupported";function vs(k,U,Q){if(U){if(1===U.length)return U[0];const We=U.filter(ht=>ht.app===Q);if(1===We.length)return We[0]}return Q.container.getProvider(k).getImmediate({optional:!0})}globalThis[Oo]||(globalThis[Oo]=vl().then(k=>globalThis[Su]=k).catch(()=>globalThis[Su]=!1)),globalThis[za]||(globalThis[za]=Ta().then(k=>globalThis[cs]=k).catch(()=>globalThis[cs]=!1)),globalThis[Ps]||(globalThis[Ps]=Bs().then(k=>globalThis[mo]=k).catch(()=>globalThis[mo]=!1));const Ka=(k,U)=>{const Q=U?[U]:(0,ne.C6)(),ce=[];return Q.forEach(Oe=>{Oe.container.getProvider(k).instances.forEach(ht=>{ce.includes(ht)||ce.push(ht)})}),ce};function qa(){}class Si{constructor(U,Q=Wa){this.zone=U,this.delegate=Q}now(){return this.delegate.now()}schedule(U,Q,ce){const Oe=this.zone;return this.delegate.schedule(function(ht){Oe.runGuarded(()=>{U.apply(this,[ht])})},Q,ce)}}class Qu{constructor(U){this.zone=U,this.task=null}call(U,Q){const ce=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qa,{},qa,qa)),Q.pipe((0,ys.b)({next:ce,complete:ce,error:ce})).subscribe(U).add(ce)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Os=(()=>{class k{constructor(Q){this.ngZone=Q,this.outsideAngular=Q.runOutsideAngular(()=>new Si(Zone.current)),this.insideAngular=Q.run(()=>new Si(Zone.current,Hr.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(Q){return new(Q||k)(w.LFG(w.R0b))},k.\u0275prov=w.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function er(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function ii(k){return k.pipe((0,$e.Q)(er().outsideAngular))}function Fr(k){return er(),function wl(k){return function(Q){return(Q=Q.lift(new Qu(k.ngZone))).pipe((0,Ns.R)(k.outsideAngular),(0,$e.Q)(k.insideAngular))}}(er())(k)}},2090:(St,je,$)=>{$.d(je,{BH:()=>wt,LL:()=>Ge,ZR:()=>ze,gQ:()=>Er,zI:()=>he,hu:()=>ne,g5:()=>te,US:()=>ye,tV:()=>Ne,h$:()=>Le,L:()=>we,$s:()=>Is,r3:()=>bn,Sg:()=>st,ne:()=>Zn,p$:()=>fe,vZ:()=>or,ZB:()=>de,gK:()=>Ki,pd:()=>zn,m9:()=>Jt,z$:()=>ot,GJ:()=>Yt,jU:()=>at,ru:()=>Ie,d:()=>rt,xb:()=>cn,w1:()=>Qe,hl:()=>oe,uI:()=>It,UG:()=>Ye,Yr:()=>qe,b$:()=>Tt,G6:()=>ft,Mn:()=>He,w9:()=>Qt,cI:()=>$t,UI:()=>pr,xO:()=>gr,zd:()=>Lr,DV:()=>nn,ug:()=>Rt,dS:()=>_r,Pz:()=>Bt,Dv:()=>as,Wj:()=>kr,lb:()=>vi,eu:()=>et});const ne=function(Te,pe){if(!Te)throw te(pe)},te=function(Te){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Te)},xe=function(Te){const pe=[];let ke=0;for(let Se=0;Se<Te.length;Se++){let le=Te.charCodeAt(Se);le<128?pe[ke++]=le:le<2048?(pe[ke++]=le>>6|192,pe[ke++]=63&le|128):55296==(64512&le)&&Se+1<Te.length&&56320==(64512&Te.charCodeAt(Se+1))?(le=65536+((1023&le)<<10)+(1023&Te.charCodeAt(++Se)),pe[ke++]=le>>18|240,pe[ke++]=le>>12&63|128,pe[ke++]=le>>6&63|128,pe[ke++]=63&le|128):(pe[ke++]=le>>12|224,pe[ke++]=le>>6&63|128,pe[ke++]=63&le|128)}return pe},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Te,pe){if(!Array.isArray(Te))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ke=pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Se=[];for(let le=0;le<Te.length;le+=3){const Ke=Te[le],vt=le+1<Te.length,Pt=vt?Te[le+1]:0,tn=le+2<Te.length,Yn=tn?Te[le+2]:0;let lr=(15&Pt)<<2|Yn>>6,Cs=63&Yn;tn||(Cs=64,vt||(lr=64)),Se.push(ke[Ke>>2],ke[(3&Ke)<<4|Pt>>4],ke[lr],ke[Cs])}return Se.join("")},encodeString(Te,pe){return this.HAS_NATIVE_SUPPORT&&!pe?btoa(Te):this.encodeByteArray(xe(Te),pe)},decodeString(Te,pe){return this.HAS_NATIVE_SUPPORT&&!pe?atob(Te):function(Te){const pe=[];let ke=0,Se=0;for(;ke<Te.length;){const le=Te[ke++];if(le<128)pe[Se++]=String.fromCharCode(le);else if(le>191&&le<224){const Ke=Te[ke++];pe[Se++]=String.fromCharCode((31&le)<<6|63&Ke)}else if(le>239&&le<365){const tn=((7&le)<<18|(63&Te[ke++])<<12|(63&Te[ke++])<<6|63&Te[ke++])-65536;pe[Se++]=String.fromCharCode(55296+(tn>>10)),pe[Se++]=String.fromCharCode(56320+(1023&tn))}else{const Ke=Te[ke++],vt=Te[ke++];pe[Se++]=String.fromCharCode((15&le)<<12|(63&Ke)<<6|63&vt)}}return pe.join("")}(this.decodeStringToByteArray(Te,pe))},decodeStringToByteArray(Te,pe){this.init_();const ke=pe?this.charToByteMapWebSafe_:this.charToByteMap_,Se=[];for(let le=0;le<Te.length;){const Ke=ke[Te.charAt(le++)],Pt=le<Te.length?ke[Te.charAt(le)]:0;++le;const Yn=le<Te.length?ke[Te.charAt(le)]:64;++le;const yn=le<Te.length?ke[Te.charAt(le)]:64;if(++le,null==Ke||null==Pt||null==Yn||null==yn)throw Error();Se.push(Ke<<2|Pt>>4),64!==Yn&&(Se.push(Pt<<4&240|Yn>>2),64!==yn&&Se.push(Yn<<6&192|yn))}return Se},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Te=0;Te<this.ENCODED_VALS.length;Te++)this.byteToCharMap_[Te]=this.ENCODED_VALS.charAt(Te),this.charToByteMap_[this.byteToCharMap_[Te]]=Te,this.byteToCharMapWebSafe_[Te]=this.ENCODED_VALS_WEBSAFE.charAt(Te),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Te]]=Te,Te>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Te)]=Te,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Te)]=Te)}}},Le=function(Te){const pe=xe(Te);return ye.encodeByteArray(pe,!0)},we=function(Te){return Le(Te).replace(/\./g,"")},Ne=function(Te){try{return ye.decodeString(Te,!0)}catch(pe){console.error("base64Decode failed: ",pe)}return null};function fe(Te){return de(void 0,Te)}function de(Te,pe){if(!(pe instanceof Object))return pe;switch(pe.constructor){case Date:return new Date(pe.getTime());case Object:void 0===Te&&(Te={});break;case Array:Te=[];break;default:return pe}for(const ke in pe)!pe.hasOwnProperty(ke)||!Pe(ke)||(Te[ke]=de(Te[ke],pe[ke]));return Te}function Pe(Te){return"__proto__"!==Te}class wt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((pe,ke)=>{this.resolve=pe,this.reject=ke})}wrapCallback(pe){return(ke,Se)=>{ke?this.reject(ke):this.resolve(Se),"function"==typeof pe&&(this.promise.catch(()=>{}),1===pe.length?pe(ke):pe(ke,Se))}}}function st(Te,pe){if(Te.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Se=pe||"demo-project",le=Te.iat||0,Ke=Te.sub||Te.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vt=Object.assign({iss:`https://securetoken.google.com/${Se}`,aud:Se,iat:le,exp:le+3600,auth_time:le,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},Te);return[we(JSON.stringify({alg:"none",type:"JWT"})),we(JSON.stringify(vt)),""].join(".")}function ot(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function It(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function Ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Te){return!1}}function at(){return"object"==typeof self&&self.self===self}function Ie(){const Te="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Te&&void 0!==Te.id}function Tt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){return ot().indexOf("Electron/")>=0}function Qe(){const Te=ot();return Te.indexOf("MSIE ")>=0||Te.indexOf("Trident/")>=0}function He(){return ot().indexOf("MSAppHost/")>=0}function qe(){return!1}function ft(){return!Ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oe(){return"object"==typeof indexedDB}function et(){return new Promise((Te,pe)=>{try{let ke=!0;const Se="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(Se);le.onsuccess=()=>{le.result.close(),ke||self.indexedDB.deleteDatabase(Se),Te(!0)},le.onupgradeneeded=()=>{ke=!1},le.onerror=()=>{var Ke;pe((null===(Ke=le.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(ke){pe(ke)}})}function he(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class ze extends Error{constructor(pe,ke,Se){super(ke),this.code=pe,this.customData=Se,this.name="FirebaseError",Object.setPrototypeOf(this,ze.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(pe,ke,Se){this.service=pe,this.serviceName=ke,this.errors=Se}create(pe,...ke){const Se=ke[0]||{},le=`${this.service}/${pe}`,Ke=this.errors[pe],vt=Ke?function pt(Te,pe){return Te.replace(bt,(ke,Se)=>{const le=pe[Se];return null!=le?String(le):`<${Se}?>`})}(Ke,Se):"Error";return new ze(le,`${this.serviceName}: ${vt} (${le}).`,Se)}}const bt=/\{\$([^}]+)}/g;function $t(Te){return JSON.parse(Te)}function Bt(Te){return JSON.stringify(Te)}const tt=function(Te){let pe={},ke={},Se={},le="";try{const Ke=Te.split(".");pe=$t(Ne(Ke[0])||""),ke=$t(Ne(Ke[1])||""),le=Ke[2],Se=ke.d||{},delete ke.d}catch(Ke){}return{header:pe,claims:ke,data:Se,signature:le}},Qt=function(Te){const ke=tt(Te).claims;return!!ke&&"object"==typeof ke&&ke.hasOwnProperty("iat")},Yt=function(Te){const pe=tt(Te).claims;return"object"==typeof pe&&!0===pe.admin};function bn(Te,pe){return Object.prototype.hasOwnProperty.call(Te,pe)}function nn(Te,pe){if(Object.prototype.hasOwnProperty.call(Te,pe))return Te[pe]}function cn(Te){for(const pe in Te)if(Object.prototype.hasOwnProperty.call(Te,pe))return!1;return!0}function pr(Te,pe,ke){const Se={};for(const le in Te)Object.prototype.hasOwnProperty.call(Te,le)&&(Se[le]=pe.call(ke,Te[le],le,Te));return Se}function or(Te,pe){if(Te===pe)return!0;const ke=Object.keys(Te),Se=Object.keys(pe);for(const le of ke){if(!Se.includes(le))return!1;const Ke=Te[le],vt=pe[le];if(wr(Ke)&&wr(vt)){if(!or(Ke,vt))return!1}else if(Ke!==vt)return!1}for(const le of Se)if(!ke.includes(le))return!1;return!0}function wr(Te){return null!==Te&&"object"==typeof Te}function gr(Te){const pe=[];for(const[ke,Se]of Object.entries(Te))Array.isArray(Se)?Se.forEach(le=>{pe.push(encodeURIComponent(ke)+"="+encodeURIComponent(le))}):pe.push(encodeURIComponent(ke)+"="+encodeURIComponent(Se));return pe.length?"&"+pe.join("&"):""}function Lr(Te){const pe={};return Te.replace(/^\?/,"").split("&").forEach(Se=>{if(Se){const[le,Ke]=Se.split("=");pe[decodeURIComponent(le)]=decodeURIComponent(Ke)}}),pe}function zn(Te){const pe=Te.indexOf("?");if(!pe)return"";const ke=Te.indexOf("#",pe);return Te.substring(pe,ke>0?ke:void 0)}class Er{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let pe=1;pe<this.blockSize;++pe)this.pad_[pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(pe,ke){ke||(ke=0);const Se=this.W_;if("string"==typeof pe)for(let yn=0;yn<16;yn++)Se[yn]=pe.charCodeAt(ke)<<24|pe.charCodeAt(ke+1)<<16|pe.charCodeAt(ke+2)<<8|pe.charCodeAt(ke+3),ke+=4;else for(let yn=0;yn<16;yn++)Se[yn]=pe[ke]<<24|pe[ke+1]<<16|pe[ke+2]<<8|pe[ke+3],ke+=4;for(let yn=16;yn<80;yn++){const lr=Se[yn-3]^Se[yn-8]^Se[yn-14]^Se[yn-16];Se[yn]=4294967295&(lr<<1|lr>>>31)}let Yn,Qn,le=this.chain_[0],Ke=this.chain_[1],vt=this.chain_[2],Pt=this.chain_[3],tn=this.chain_[4];for(let yn=0;yn<80;yn++){yn<40?yn<20?(Yn=Pt^Ke&(vt^Pt),Qn=1518500249):(Yn=Ke^vt^Pt,Qn=1859775393):yn<60?(Yn=Ke&vt|Pt&(Ke|vt),Qn=2400959708):(Yn=Ke^vt^Pt,Qn=3395469782);const lr=(le<<5|le>>>27)+Yn+tn+Qn+Se[yn]&4294967295;tn=Pt,Pt=vt,vt=4294967295&(Ke<<30|Ke>>>2),Ke=le,le=lr}this.chain_[0]=this.chain_[0]+le&4294967295,this.chain_[1]=this.chain_[1]+Ke&4294967295,this.chain_[2]=this.chain_[2]+vt&4294967295,this.chain_[3]=this.chain_[3]+Pt&4294967295,this.chain_[4]=this.chain_[4]+tn&4294967295}update(pe,ke){if(null==pe)return;void 0===ke&&(ke=pe.length);const Se=ke-this.blockSize;let le=0;const Ke=this.buf_;let vt=this.inbuf_;for(;le<ke;){if(0===vt)for(;le<=Se;)this.compress_(pe,le),le+=this.blockSize;if("string"==typeof pe){for(;le<ke;)if(Ke[vt]=pe.charCodeAt(le),++vt,++le,vt===this.blockSize){this.compress_(Ke),vt=0;break}}else for(;le<ke;)if(Ke[vt]=pe[le],++vt,++le,vt===this.blockSize){this.compress_(Ke),vt=0;break}}this.inbuf_=vt,this.total_+=ke}digest(){const pe=[];let ke=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&ke,ke/=256;this.compress_(this.buf_);let Se=0;for(let le=0;le<5;le++)for(let Ke=24;Ke>=0;Ke-=8)pe[Se]=this.chain_[le]>>Ke&255,++Se;return pe}}function Zn(Te,pe){const ke=new Ht(Te,pe);return ke.subscribe.bind(ke)}class Ht{constructor(pe,ke){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ke,this.task.then(()=>{pe(this)}).catch(Se=>{this.error(Se)})}next(pe){this.forEachObserver(ke=>{ke.next(pe)})}error(pe){this.forEachObserver(ke=>{ke.error(pe)}),this.close(pe)}complete(){this.forEachObserver(pe=>{pe.complete()}),this.close()}subscribe(pe,ke,Se){let le;if(void 0===pe&&void 0===ke&&void 0===Se)throw new Error("Missing Observer.");le=function wn(Te,pe){if("object"!=typeof Te||null===Te)return!1;for(const ke of pe)if(ke in Te&&"function"==typeof Te[ke])return!0;return!1}(pe,["next","error","complete"])?pe:{next:pe,error:ke,complete:Se},void 0===le.next&&(le.next=pn),void 0===le.error&&(le.error=pn),void 0===le.complete&&(le.complete=pn);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch(vt){}}),this.observers.push(le),Ke}unsubscribeOne(pe){void 0===this.observers||void 0===this.observers[pe]||(delete this.observers[pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(pe){if(!this.finalized)for(let ke=0;ke<this.observers.length;ke++)this.sendOne(ke,pe)}sendOne(pe,ke){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[pe])try{ke(this.observers[pe])}catch(Se){"undefined"!=typeof console&&console.error&&console.error(Se)}})}close(pe){this.finalized||(this.finalized=!0,void 0!==pe&&(this.finalError=pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}const as=function(Te,pe,ke,Se){let le;if(Se<pe?le="at least "+pe:Se>ke&&(le=0===ke?"none":"no more than "+ke),le)throw new Error(Te+" failed: Was called with "+Se+(1===Se?" argument.":" arguments.")+" Expects "+le+".")};function Ki(Te,pe){return`${Te} failed: ${pe} argument `}function kr(Te,pe,ke,Se){if((!Se||ke)&&"function"!=typeof ke)throw new Error(Ki(Te,pe)+"must be a valid function.")}function vi(Te,pe,ke,Se){if((!Se||ke)&&("object"!=typeof ke||null===ke))throw new Error(Ki(Te,pe)+"must be a valid context object.")}const _r=function(Te){const pe=[];let ke=0;for(let Se=0;Se<Te.length;Se++){let le=Te.charCodeAt(Se);if(le>=55296&&le<=56319){const Ke=le-55296;Se++,ne(Se<Te.length,"Surrogate pair missing trail surrogate."),le=65536+(Ke<<10)+(Te.charCodeAt(Se)-56320)}le<128?pe[ke++]=le:le<2048?(pe[ke++]=le>>6|192,pe[ke++]=63&le|128):le<65536?(pe[ke++]=le>>12|224,pe[ke++]=le>>6&63|128,pe[ke++]=63&le|128):(pe[ke++]=le>>18|240,pe[ke++]=le>>12&63|128,pe[ke++]=le>>6&63|128,pe[ke++]=63&le|128)}return pe},Rt=function(Te){let pe=0;for(let ke=0;ke<Te.length;ke++){const Se=Te.charCodeAt(ke);Se<128?pe++:Se<2048?pe+=2:Se>=55296&&Se<=56319?(pe+=4,ke++):pe+=3}return pe};function Is(Te,pe=1e3,ke=2){const Se=pe*Math.pow(ke,Te),le=Math.round(.5*Se*(Math.random()-.5)*2);return Math.min(144e5,Se+le)}function Jt(Te){return Te&&Te._delegate?Te._delegate:Te}},6209:(St,je,$)=>{$.d(je,{e:()=>Ee});var w=$(5e3),ne=$(7407),te=$(1205),xe=$(5839);let Ee=(()=>{class ye{constructor(we,Ne,fe,de){this.afs=we,this.afAuth=Ne,this.router=fe,this.ngZone=de}login(we,Ne){return this.afAuth.signInWithEmailAndPassword(we,Ne)}SignIn(we,Ne){return this.afAuth.signInWithEmailAndPassword(we,Ne).then(fe=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(fe.user)}).catch(fe=>{window.alert(fe.message)})}register(we,Ne){return this.afAuth.createUserWithEmailAndPassword(we,Ne)}SignUp(we,Ne){return this.afAuth.createUserWithEmailAndPassword(we,Ne).then(fe=>{this.SendVerificationMail(),this.SetUserData(fe.user)}).catch(fe=>fe)}SendVerificationMail(){return this.afAuth.currentUser.then(we=>we.sendEmailVerification()).then(()=>{this.router.navigate([""])})}ForgotPassword(we){return this.afAuth.sendPasswordResetEmail(we).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(Ne=>{window.alert(Ne)})}get isLoggedIn(){const we=JSON.parse(localStorage.getItem("user"));return null!==we&&!1!==we.emailVerified}AuthLogin(we){return this.afAuth.signInWithPopup(we).then(Ne=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(Ne.user)}).catch(Ne=>{window.alert(Ne)})}SetUserData(we){return this.afs.doc(`users/${we.uid}`).set({uid:we.uid,email:we.email,displayName:we.displayName,photoURL:we.photoURL,emailVerified:we.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return ye.\u0275fac=function(we){return new(we||ye)(w.LFG(ne.ST),w.LFG(te.zQ),w.LFG(xe.F0),w.LFG(w.R0b))},ye.\u0275prov=w.Yz7({token:ye,factory:ye.\u0275fac}),ye})()},8583:(St,je,$)=>{$.d(je,{m:()=>Ee});var w=$(6209),ne=$(9808),te=$(2382),xe=$(5e3);let Ee=(()=>{class ye{static forRoot(){return{ngModule:ye,providers:[w.e]}}}return ye.\u0275fac=function(we){return new(we||ye)},ye.\u0275mod=xe.oAB({type:ye}),ye.\u0275inj=xe.cJS({imports:[[ne.ez,te.UX]]}),ye})()},4759:(St,je,$)=>{var w=$(9808),ne=$(5e3);class te extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class xe extends te{static makeCurrent(){(0,w.HT)(new xe)}onAndCancel(o,u,h){return o.addEventListener(u,h,!1),()=>{o.removeEventListener(u,h,!1)}}dispatchEvent(o,u){o.dispatchEvent(u)}remove(o){o.parentNode&&o.parentNode.removeChild(o)}createElement(o,u){return(u=u||this.getDefaultDocument()).createElement(o)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(o){return o.nodeType===Node.ELEMENT_NODE}isShadowRoot(o){return o instanceof DocumentFragment}getGlobalEventTarget(o,u){return"window"===u?window:"document"===u?o:"body"===u?o.body:null}getBaseHref(o){const u=function ye(){return Ee=Ee||document.querySelector("base"),Ee?Ee.getAttribute("href"):null}();return null==u?null:function we(l){Le=Le||document.createElement("a"),Le.setAttribute("href",l);const o=Le.pathname;return"/"===o.charAt(0)?o:`/${o}`}(u)}resetBaseElement(){Ee=null}getUserAgent(){return window.navigator.userAgent}getCookie(o){return(0,w.Mx)(document.cookie,o)}}let Le,Ee=null;const Ne=new ne.OlP("TRANSITION_ID"),de=[{provide:ne.ip1,useFactory:function fe(l,o,u){return()=>{u.get(ne.CZH).donePromise.then(()=>{const h=(0,w.q)(),y=o.querySelectorAll(`style[ng-transition="${l}"]`);for(let C=0;C<y.length;C++)h.remove(y[C])})}},deps:[Ne,w.K0,ne.zs3],multi:!0}];class Pe{static init(){(0,ne.VLi)(new Pe)}addToWindow(o){ne.dqk.getAngularTestability=(h,y=!0)=>{const C=o.findTestabilityInTree(h,y);if(null==C)throw new Error("Could not find testability for element.");return C},ne.dqk.getAllAngularTestabilities=()=>o.getAllTestabilities(),ne.dqk.getAllAngularRootElements=()=>o.getAllRootElements(),ne.dqk.frameworkStabilizers||(ne.dqk.frameworkStabilizers=[]),ne.dqk.frameworkStabilizers.push(h=>{const y=ne.dqk.getAllAngularTestabilities();let C=y.length,R=!1;const K=function(J){R=R||J,C--,0==C&&h(R)};y.forEach(function(J){J.whenStable(K)})})}findTestabilityInTree(o,u,h){if(null==u)return null;const y=o.getTestability(u);return null!=y?y:h?(0,w.q)().isShadowRoot(u)?this.findTestabilityInTree(o,u.host,!0):this.findTestabilityInTree(o,u.parentElement,!0):null}}let wt=(()=>{class l{build(){return new XMLHttpRequest}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac}),l})();const st=new ne.OlP("EventManagerPlugins");let ot=(()=>{class l{constructor(u,h){this._zone=h,this._eventNameToPlugin=new Map,u.forEach(y=>y.manager=this),this._plugins=u.slice().reverse()}addEventListener(u,h,y){return this._findPluginFor(h).addEventListener(u,h,y)}addGlobalEventListener(u,h,y){return this._findPluginFor(h).addGlobalEventListener(u,h,y)}getZone(){return this._zone}_findPluginFor(u){const h=this._eventNameToPlugin.get(u);if(h)return h;const y=this._plugins;for(let C=0;C<y.length;C++){const R=y[C];if(R.supports(u))return this._eventNameToPlugin.set(u,R),R}throw new Error(`No event manager plugin found for event ${u}`)}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(st),ne.LFG(ne.R0b))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac}),l})();class It{constructor(o){this._doc=o}addGlobalEventListener(o,u,h){const y=(0,w.q)().getGlobalEventTarget(this._doc,o);if(!y)throw new Error(`Unsupported event target ${y} for event ${u}`);return this.addEventListener(y,u,h)}}let Ye=(()=>{class l{constructor(){this._stylesSet=new Set}addStyles(u){const h=new Set;u.forEach(y=>{this._stylesSet.has(y)||(this._stylesSet.add(y),h.add(y))}),this.onStylesAdded(h)}onStylesAdded(u){}getAllStyles(){return Array.from(this._stylesSet)}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac}),l})(),at=(()=>{class l extends Ye{constructor(u){super(),this._doc=u,this._hostNodes=new Map,this._hostNodes.set(u.head,[])}_addStylesToHost(u,h,y){u.forEach(C=>{const R=this._doc.createElement("style");R.textContent=C,y.push(h.appendChild(R))})}addHost(u){const h=[];this._addStylesToHost(this._stylesSet,u,h),this._hostNodes.set(u,h)}removeHost(u){const h=this._hostNodes.get(u);h&&h.forEach(Ie),this._hostNodes.delete(u)}onStylesAdded(u){this._hostNodes.forEach((h,y)=>{this._addStylesToHost(u,y,h)})}ngOnDestroy(){this._hostNodes.forEach(u=>u.forEach(Ie))}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(w.K0))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac}),l})();function Ie(l){(0,w.q)().remove(l)}const Tt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rt=/%COMP%/g;function he(l,o,u){for(let h=0;h<o.length;h++){let y=o[h];Array.isArray(y)?he(l,y,u):(y=y.replace(rt,l),u.push(y))}return u}function De(l){return o=>{if("__ngUnwrap__"===o)return l;!1===l(o)&&(o.preventDefault(),o.returnValue=!1)}}let ze=(()=>{class l{constructor(u,h,y){this.eventManager=u,this.sharedStylesHost=h,this.appId=y,this.rendererByCompId=new Map,this.defaultRenderer=new Ge(u)}createRenderer(u,h){if(!u||!h)return this.defaultRenderer;switch(h.encapsulation){case ne.ifc.Emulated:{let y=this.rendererByCompId.get(h.id);return y||(y=new $t(this.eventManager,this.sharedStylesHost,h,this.appId),this.rendererByCompId.set(h.id,y)),y.applyToHost(u),y}case 1:case ne.ifc.ShadowDom:return new Bt(this.eventManager,this.sharedStylesHost,u,h);default:if(!this.rendererByCompId.has(h.id)){const y=he(h.id,h.styles,[]);this.sharedStylesHost.addStyles(y),this.rendererByCompId.set(h.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(ot),ne.LFG(at),ne.LFG(ne.AFp))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac}),l})();class Ge{constructor(o){this.eventManager=o,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(o,u){return u?document.createElementNS(Tt[u]||u,o):document.createElement(o)}createComment(o){return document.createComment(o)}createText(o){return document.createTextNode(o)}appendChild(o,u){o.appendChild(u)}insertBefore(o,u,h){o&&o.insertBefore(u,h)}removeChild(o,u){o&&o.removeChild(u)}selectRootElement(o,u){let h="string"==typeof o?document.querySelector(o):o;if(!h)throw new Error(`The selector "${o}" did not match any elements`);return u||(h.textContent=""),h}parentNode(o){return o.parentNode}nextSibling(o){return o.nextSibling}setAttribute(o,u,h,y){if(y){u=y+":"+u;const C=Tt[y];C?o.setAttributeNS(C,u,h):o.setAttribute(u,h)}else o.setAttribute(u,h)}removeAttribute(o,u,h){if(h){const y=Tt[h];y?o.removeAttributeNS(y,u):o.removeAttribute(`${h}:${u}`)}else o.removeAttribute(u)}addClass(o,u){o.classList.add(u)}removeClass(o,u){o.classList.remove(u)}setStyle(o,u,h,y){y&(ne.JOm.DashCase|ne.JOm.Important)?o.style.setProperty(u,h,y&ne.JOm.Important?"important":""):o.style[u]=h}removeStyle(o,u,h){h&ne.JOm.DashCase?o.style.removeProperty(u):o.style[u]=""}setProperty(o,u,h){o[u]=h}setValue(o,u){o.nodeValue=u}listen(o,u,h){return"string"==typeof o?this.eventManager.addGlobalEventListener(o,u,De(h)):this.eventManager.addEventListener(o,u,De(h))}}class $t extends Ge{constructor(o,u,h,y){super(o),this.component=h;const C=he(y+"-"+h.id,h.styles,[]);u.addStyles(C),this.contentAttr=function oe(l){return"_ngcontent-%COMP%".replace(rt,l)}(y+"-"+h.id),this.hostAttr=function et(l){return"_nghost-%COMP%".replace(rt,l)}(y+"-"+h.id)}applyToHost(o){super.setAttribute(o,this.hostAttr,"")}createElement(o,u){const h=super.createElement(o,u);return super.setAttribute(h,this.contentAttr,""),h}}class Bt extends Ge{constructor(o,u,h,y){super(o),this.sharedStylesHost=u,this.hostEl=h,this.shadowRoot=h.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const C=he(y.id,y.styles,[]);for(let R=0;R<C.length;R++){const K=document.createElement("style");K.textContent=C[R],this.shadowRoot.appendChild(K)}}nodeOrShadowRoot(o){return o===this.hostEl?this.shadowRoot:o}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(o,u){return super.appendChild(this.nodeOrShadowRoot(o),u)}insertBefore(o,u,h){return super.insertBefore(this.nodeOrShadowRoot(o),u,h)}removeChild(o,u){return super.removeChild(this.nodeOrShadowRoot(o),u)}parentNode(o){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(o)))}}let tt=(()=>{class l extends It{constructor(u){super(u)}supports(u){return!0}addEventListener(u,h,y){return u.addEventListener(h,y,!1),()=>this.removeEventListener(u,h,y)}removeEventListener(u,h,y){return u.removeEventListener(h,y)}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(w.K0))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac}),l})();const en=["alt","control","meta","shift"],Qt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},bn={alt:l=>l.altKey,control:l=>l.ctrlKey,meta:l=>l.metaKey,shift:l=>l.shiftKey};let nn=(()=>{class l extends It{constructor(u){super(u)}supports(u){return null!=l.parseEventName(u)}addEventListener(u,h,y){const C=l.parseEventName(h),R=l.eventCallback(C.fullKey,y,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(u,C.domEventName,R))}static parseEventName(u){const h=u.toLowerCase().split("."),y=h.shift();if(0===h.length||"keydown"!==y&&"keyup"!==y)return null;const C=l._normalizeKey(h.pop());let R="";if(en.forEach(J=>{const se=h.indexOf(J);se>-1&&(h.splice(se,1),R+=J+".")}),R+=C,0!=h.length||0===C.length)return null;const K={};return K.domEventName=y,K.fullKey=R,K}static getEventFullKey(u){let h="",y=function cn(l){let o=l.key;if(null==o){if(o=l.keyIdentifier,null==o)return"Unidentified";o.startsWith("U+")&&(o=String.fromCharCode(parseInt(o.substring(2),16)),3===l.location&&Yt.hasOwnProperty(o)&&(o=Yt[o]))}return Qt[o]||o}(u);return y=y.toLowerCase()," "===y?y="space":"."===y&&(y="dot"),en.forEach(C=>{C!=y&&bn[C](u)&&(h+=C+".")}),h+=y,h}static eventCallback(u,h,y){return C=>{l.getEventFullKey(C)===u&&y.runGuarded(()=>h(C))}}static _normalizeKey(u){return"esc"===u?"escape":u}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(w.K0))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac}),l})();const Lr=(0,ne.eFA)(ne._c5,"browser",[{provide:ne.Lbi,useValue:w.bD},{provide:ne.g9A,useValue:function pr(){xe.makeCurrent(),Pe.init()},multi:!0},{provide:w.K0,useFactory:function wr(){return(0,ne.RDi)(document),document},deps:[]}]),zn=[{provide:ne.zSh,useValue:"root"},{provide:ne.qLn,useFactory:function or(){return new ne.qLn},deps:[]},{provide:st,useClass:tt,multi:!0,deps:[w.K0,ne.R0b,ne.Lbi]},{provide:st,useClass:nn,multi:!0,deps:[w.K0]},{provide:ze,useClass:ze,deps:[ot,at,ne.AFp]},{provide:ne.FYo,useExisting:ze},{provide:Ye,useExisting:at},{provide:at,useClass:at,deps:[w.K0]},{provide:ne.dDg,useClass:ne.dDg,deps:[ne.R0b]},{provide:ot,useClass:ot,deps:[st,ne.R0b]},{provide:w.JF,useClass:wt,deps:[]}];let Er=(()=>{class l{constructor(u){if(u)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(u){return{ngModule:l,providers:[{provide:ne.AFp,useValue:u.appId},{provide:Ne,useExisting:ne.AFp},de]}}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(l,12))},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({providers:zn,imports:[w.ez,ne.hGG]}),l})();"undefined"!=typeof window&&window;var ui=$(5839);const ts=[];let vn=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({imports:[[ui.Bz.forRoot(ts)],ui.Bz]}),l})(),Ir=(()=>{class l{constructor(){this.title="firebaseapp"}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=ne.Xpm({type:l,selectors:[["app-root"]],decls:1,vars:0,template:function(u,h){1&u&&ne._UZ(0,"router-outlet")},directives:[ui.lC],styles:[""]}),l})();var Ni=$(8583),Cr=$(2011),rr=$(1205),Ei=$(8306),bs=$(9646),Pi=$(8996),us=$(4986),Vr=$(4482),cr=$(5403),Tn=$(4004),gt=$(3900),At=$(5813),Sn=$(3942),br=$(5861),Kr=$(9681),re=$(2090),li=$(4859);const Kn="firebasestorage.googleapis.com",Oi="storageBucket";class qn extends re.ZR{constructor(o,u){super(ns(o),`Firebase Storage: ${u} (${ns(o)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qn.prototype)}_codeEquals(o){return ns(o)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(o){this.customData.serverResponse=o,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ns(l){return"storage/"+l}function Ds(){return new qn("unknown","An unknown error occurred, please check the error payload for server response.")}function bo(){return new qn("canceled","User canceled the upload/download.")}function Zs(){return new qn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function bi(l){return new qn("invalid-argument",l)}function Do(){return new qn("app-deleted","The Firebase app was deleted.")}function Ts(l){return new qn("invalid-root-operation","The operation '"+l+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function lo(l,o){return new qn("invalid-format","String does not match format '"+l+"': "+o)}function dr(l){throw new qn("internal-error","Internal error: "+l)}class vr{constructor(o,u){this.bucket=o,this.path_=u}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const o=encodeURIComponent;return"/b/"+o(this.bucket)+"/o/"+o(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(o,u){let h;try{h=vr.makeFromUrl(o,u)}catch(y){return new vr(o,"")}if(""===h.path)return h;throw function ci(l){return new qn("invalid-default-bucket","Invalid default bucket '"+l+"'.")}(o)}static makeFromUrl(o,u){let h=null;const y="([A-Za-z0-9.\\-_]+)",K=new RegExp("^gs://"+y+"(/(.*))?$","i");function se(Ks){Ks.path_=decodeURIComponent(Ks.path)}const Be=u.replace(/[.]/g,"\\."),Mi=[{regex:K,indices:{bucket:1,path:3},postModify:function C(Ks){"/"===Ks.path.charAt(Ks.path.length-1)&&(Ks.path_=Ks.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Be}/v[A-Za-z0-9_]+/b/${y}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:se},{regex:new RegExp(`^https?://${u===Kn?"(?:storage.googleapis.com|storage.cloud.google.com)":u}/${y}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:se}];for(let Ks=0;Ks<Mi.length;Ks++){const $u=Mi[Ks],jl=$u.regex.exec(o);if(jl){let Ed=jl[$u.indices.path];Ed||(Ed=""),h=new vr(jl[$u.indices.bucket],Ed),$u.postModify(h);break}}if(null==h)throw function Ii(l){return new qn("invalid-url","Invalid URL '"+l+"'.")}(o);return h}}class Ae{constructor(o){this.promise_=Promise.reject(o)}getPromise(){return this.promise_}cancel(o=!1){}}function Mn(l){return"string"==typeof l||l instanceof String}function ti(l){return Nn()&&l instanceof Blob}function Nn(){return"undefined"!=typeof Blob}function Zi(l,o,u,h){if(h<o)throw bi(`Invalid value for '${l}'. Expected ${o} or greater.`);if(h>u)throw bi(`Invalid value for '${l}'. Expected ${u} or less.`)}function ni(l,o,u){let h=o;return null==u&&(h=`https://${o}`),`${u}://${h}/v0${l}`}function To(l){const o=encodeURIComponent;let u="?";for(const h in l)l.hasOwnProperty(h)&&(u=u+(o(h)+"=")+o(l[h])+"&");return u=u.slice(0,-1),u}var qr=(()=>{return(l=qr||(qr={}))[l.NO_ERROR=0]="NO_ERROR",l[l.NETWORK_ERROR=1]="NETWORK_ERROR",l[l.ABORT=2]="ABORT",qr;var l})();class ls{constructor(o,u,h,y,C,R,K,J,se,Re,Be){this.url_=o,this.method_=u,this.headers_=h,this.body_=y,this.successCodes_=C,this.additionalRetryCodes_=R,this.callback_=K,this.errorCallback_=J,this.timeout_=se,this.progressCallback_=Re,this.connectionFactory_=Be,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Xe,xt)=>{this.resolve_=Xe,this.reject_=xt,this.start_()})}start_(){const u=(h,y)=>{const C=this.resolve_,R=this.reject_,K=y.connection;if(y.wasSuccessCode)try{const J=this.callback_(K,K.getResponse());!function ut(l){return void 0!==l}(J)?C():C(J)}catch(J){R(J)}else if(null!==K){const J=Ds();J.serverResponse=K.getErrorText(),R(this.errorCallback_?this.errorCallback_(K,J):J)}else R(y.canceled?this.appDelete_?Do():bo():function kn(){return new qn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?u(0,new rs(!1,null,!0)):this.backoffId_=function be(l,o,u){let h=1,y=null,C=null,R=!1,K=0;function J(){return 2===K}let se=!1;function Re(...sr){se||(se=!0,o.apply(null,sr))}function Be(sr){y=setTimeout(()=>{y=null,l(xt,J())},sr)}function Xe(){C&&clearTimeout(C)}function xt(sr,...uo){if(se)return void Xe();if(sr)return Xe(),void Re.call(null,sr,...uo);if(J()||R)return Xe(),void Re.call(null,sr,...uo);let Mi;h<64&&(h*=2),1===K?(K=2,Mi=0):Mi=1e3*(h+Math.random()),Be(Mi)}let Vt=!1;function jn(sr){Vt||(Vt=!0,Xe(),!se&&(null!==y?(sr||(K=2),clearTimeout(y),Be(0)):sr||(K=1)))}return Be(0),C=setTimeout(()=>{R=!0,jn(!0)},u),jn}((h,y)=>{if(y)return void h(!1,new rs(!1,null,!0));const C=this.connectionFactory_();this.pendingConnection_=C;const R=K=>{null!==this.progressCallback_&&this.progressCallback_(K.loaded,K.lengthComputable?K.total:-1)};null!==this.progressCallback_&&C.addUploadProgressListener(R),C.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&C.removeUploadProgressListener(R),this.pendingConnection_=null;const K=C.getErrorCode()===qr.NO_ERROR,J=C.getStatus();if(!K||this.isRetryStatusCode_(J)){const Re=C.getErrorCode()===qr.ABORT;return void h(!1,new rs(!1,null,Re))}const se=-1!==this.successCodes_.indexOf(J);h(!0,new rs(se,C))})},u,this.timeout_)}getPromise(){return this.promise_}cancel(o){this.canceled_=!0,this.appDelete_=o||!1,null!==this.backoffId_&&function Fe(l){l(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(o){const u=o>=500&&o<600,y=-1!==[408,429].indexOf(o),C=-1!==this.additionalRetryCodes_.indexOf(o);return u||y||C}}class rs{constructor(o,u,h){this.wasSuccessCode=o,this.connection=u,this.canceled=!!h}}function Ys(...l){const o=function gs(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==o){const u=new o;for(let h=0;h<l.length;h++)u.append(l[h]);return u.getBlob()}if(Nn())return new Blob(l);throw new qn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const is={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Br{constructor(o,u){this.data=o,this.contentType=u||null}}function Qs(l,o){switch(l){case is.RAW:return new Br(di(o));case is.BASE64:case is.BASE64URL:return new Br(jr(l,o));case is.DATA_URL:return new Br(function hi(l){const o=new As(l);return o.base64?jr(is.BASE64,o.rest):function So(l){let o;try{o=decodeURIComponent(l)}catch(u){throw lo(is.DATA_URL,"Malformed data URL.")}return di(o)}(o.rest)}(o),function ha(l){return new As(l).contentType}(o))}throw Ds()}function di(l){const o=[];for(let u=0;u<l.length;u++){let h=l.charCodeAt(u);h<=127?o.push(h):h<=2047?o.push(192|h>>6,128|63&h):55296==(64512&h)?u<l.length-1&&56320==(64512&l.charCodeAt(u+1))?(h=65536|(1023&h)<<10|1023&l.charCodeAt(++u),o.push(240|h>>18,128|h>>12&63,128|h>>6&63,128|63&h)):o.push(239,191,189):56320==(64512&h)?o.push(239,191,189):o.push(224|h>>12,128|h>>6&63,128|63&h)}return new Uint8Array(o)}function jr(l,o){switch(l){case is.BASE64:{const y=-1!==o.indexOf("-"),C=-1!==o.indexOf("_");if(y||C)throw lo(l,"Invalid character '"+(y?"-":"_")+"' found: is it base64url encoded?");break}case is.BASE64URL:{const y=-1!==o.indexOf("+"),C=-1!==o.indexOf("/");if(y||C)throw lo(l,"Invalid character '"+(y?"+":"/")+"' found: is it base64 encoded?");o=o.replace(/-/g,"+").replace(/_/g,"/");break}}let u;try{u=function js(l){return atob(l)}(o)}catch(y){throw lo(l,"Invalid character found")}const h=new Uint8Array(u.length);for(let y=0;y<u.length;y++)h[y]=u.charCodeAt(y);return h}class As{constructor(o){this.base64=!1,this.contentType=null;const u=o.match(/^data:([^,]+)?,/);if(null===u)throw lo(is.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const h=u[1]||null;null!=h&&(this.base64=function ms(l,o){return l.length>=o.length&&l.substring(l.length-o.length)===o}(h,";base64"),this.contentType=this.base64?h.substring(0,h.length-7):h),this.rest=o.substring(o.indexOf(",")+1)}}class Li{constructor(o,u){let h=0,y="";ti(o)?(this.data_=o,h=o.size,y=o.type):o instanceof ArrayBuffer?(u?this.data_=new Uint8Array(o):(this.data_=new Uint8Array(o.byteLength),this.data_.set(new Uint8Array(o))),h=this.data_.length):o instanceof Uint8Array&&(u?this.data_=o:(this.data_=new Uint8Array(o.length),this.data_.set(o)),h=o.length),this.size_=h,this.type_=y}size(){return this.size_}type(){return this.type_}slice(o,u){if(ti(this.data_)){const y=function da(l,o,u){return l.webkitSlice?l.webkitSlice(o,u):l.mozSlice?l.mozSlice(o,u):l.slice?l.slice(o,u):null}(this.data_,o,u);return null===y?null:new Li(y)}{const h=new Uint8Array(this.data_.buffer,o,u-o);return new Li(h,!0)}}static getBlob(...o){if(Nn()){const u=o.map(h=>h instanceof Li?h.data_:h);return new Li(Ys.apply(null,u))}{const u=o.map(R=>Mn(R)?Qs(is.RAW,R).data:R.data_);let h=0;u.forEach(R=>{h+=R.byteLength});const y=new Uint8Array(h);let C=0;return u.forEach(R=>{for(let K=0;K<R.length;K++)y[C++]=R[K]}),new Li(y,!0)}}uploadData(){return this.data_}}function Yi(l){let o;try{o=JSON.parse(l)}catch(u){return null}return function Nt(l){return"object"==typeof l&&!Array.isArray(l)}(o)?o:null}function Js(l){const o=l.lastIndexOf("/",l.length-2);return-1===o?l:l.slice(o+1)}function Vn(l,o){return o}class L{constructor(o,u,h,y){this.server=o,this.local=u||o,this.writable=!!h,this.xform=y||Vn}}let Z=null;function X(){if(Z)return Z;const l=[];l.push(new L("bucket")),l.push(new L("generation")),l.push(new L("metageneration")),l.push(new L("name","fullPath",!0));const u=new L("name");u.xform=function o(C,R){return function V(l){return!Mn(l)||l.length<2?l:Js(l)}(R)},l.push(u);const y=new L("size");return y.xform=function h(C,R){return void 0!==R?Number(R):R},l.push(y),l.push(new L("timeCreated")),l.push(new L("updated")),l.push(new L("md5Hash",null,!0)),l.push(new L("cacheControl",null,!0)),l.push(new L("contentDisposition",null,!0)),l.push(new L("contentEncoding",null,!0)),l.push(new L("contentLanguage",null,!0)),l.push(new L("contentType",null,!0)),l.push(new L("metadata","customMetadata",!0)),Z=l,Z}function lt(l,o,u){const h=Yi(o);return null===h?null:function Je(l,o,u){const h={type:"file"},y=u.length;for(let C=0;C<y;C++){const R=u[C];h[R.local]=R.xform(h,o[R.server])}return function ge(l,o){Object.defineProperty(l,"ref",{get:function u(){const C=new vr(l.bucket,l.fullPath);return o._makeStorageReference(C)}})}(h,l),h}(l,h,u)}function rn(l,o){const u={},h=o.length;for(let y=0;y<h;y++){const C=o[y];C.writable&&(u[C.server]=l[C.local])}return JSON.stringify(u)}const Fn="prefixes";class On{constructor(o,u,h,y){this.url=o,this.method=u,this.handler=h,this.timeout=y,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function $n(l){if(!l)throw Ds()}function Vi(l,o){return function u(h,y){const C=lt(l,y,o);return $n(null!==C),C}}function Bi(l){return function o(u,h){let y;return y=401===u.getStatus()?u.getErrorText().includes("Firebase App Check token is invalid")?function ei(){return new qn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function Mr(){return new qn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===u.getStatus()?function Sr(l){return new qn("quota-exceeded","Quota for bucket '"+l+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(l.bucket):403===u.getStatus()?function Ur(l){return new qn("unauthorized","User does not have permission to access '"+l+"'.")}(l.path):h,y.serverResponse=h.serverResponse,y}}function Xs(l){const o=Bi(l);return function u(h,y){let C=o(h,y);return 404===h.getStatus()&&(C=function ki(l){return new qn("object-not-found","Object '"+l+"' does not exist.")}(l.path)),C.serverResponse=y.serverResponse,C}}function co(l,o,u){const y=ni(o.fullServerUrl(),l.host,l._protocol),R=l.maxOperationRetryTime,K=new On(y,"GET",Vi(l,u),R);return K.errorHandler=Xs(o),K}function ho(l,o,u,h,y){const C={};C.prefix=o.isRoot?"":o.path+"/",u&&u.length>0&&(C.delimiter=u),h&&(C.pageToken=h),y&&(C.maxResults=y);const K=ni(o.bucketOnlyServerUrl(),l.host,l._protocol),se=l.maxOperationRetryTime,Re=new On(K,"GET",function Ui(l,o){return function u(h,y){const C=function Nr(l,o,u){const h=Yi(u);return null===h?null:function Pn(l,o,u){const h={prefixes:[],items:[],nextPageToken:u.nextPageToken};if(u[Fn])for(const y of u[Fn]){const C=y.replace(/\/$/,""),R=l._makeStorageReference(new vr(o,C));h.prefixes.push(R)}if(u.items)for(const y of u.items){const C=l._makeStorageReference(new vr(o,y.name));h.items.push(C)}return h}(l,o,h)}(l,o,y);return $n(null!==C),C}}(l,o.bucket),se);return Re.urlParams=C,Re.errorHandler=Bi(o),Re}function kt(l,o,u){const h=Object.assign({},u);return h.fullPath=l.path,h.size=o.size(),h.contentType||(h.contentType=function Ve(l,o){return l&&l.contentType||o&&o.type()||"application/octet-stream"}(null,o)),h}class Yr{constructor(o,u,h,y){this.current=o,this.total=u,this.finalized=!!h,this.metadata=y||null}}function fi(l,o){let u=null;try{u=l.getResponseHeader("X-Goog-Upload-Status")}catch(y){$n(!1)}return $n(!!u&&-1!==(o||["active"]).indexOf(u)),u}const pl={STATE_CHANGED:"state_changed"},pi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zo(l){switch(l){case"running":case"pausing":case"canceling":return pi.RUNNING;case"paused":return pi.PAUSED;case"success":return pi.SUCCESS;case"canceled":return pi.CANCELED;default:return pi.ERROR}}class gi{constructor(o,u,h){if(function Ct(l){return"function"==typeof l}(o)||null!=u||null!=h)this.next=o,this.error=null!=u?u:void 0,this.complete=null!=h?h:void 0;else{const C=o;this.next=C.next,this.error=C.error,this.complete=C.complete}}}function _s(l){return(...o)=>{Promise.resolve().then(()=>l(...o))}}class Ms extends class go{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qr.NO_ERROR,this.sendPromise_=new Promise(o=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qr.ABORT,o()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qr.NETWORK_ERROR,o()}),this.xhr_.addEventListener("load",()=>{o()})})}send(o,u,h,y){if(this.sent_)throw dr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(u,o,!0),void 0!==y)for(const C in y)y.hasOwnProperty(C)&&this.xhr_.setRequestHeader(C,y[C].toString());return void 0!==h?this.xhr_.send(h):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dr("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(o){return-1}}getResponse(){if(!this.sent_)throw dr("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dr("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(o){return this.xhr_.getResponseHeader(o)}addUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",o)}removeUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",o)}}{initXhr(){this.xhr_.responseType="text"}}function $s(){return new Ms}class uu{constructor(o,u,h=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=o,this._blob=u,this._metadata=h,this._mappings=X(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=y=>{this._request=void 0,this._chunkMultiplier=1,y._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=y,this._transition("error"))},this._metadataErrorHandler=y=>{this._request=void 0,y._codeEquals("canceled")?this.completeTransitions_():(this._error=y,this._transition("error"))},this._promise=new Promise((y,C)=>{this._resolve=y,this._reject=C,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const o=this._transferred;return u=>this._updateProgress(o+u)}_shouldDoResumable(o){return o.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(o){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([u,h])=>{switch(this._state){case"running":o(u,h);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((o,u)=>{const h=function Qi(l,o,u,h,y){const C=o.bucketOnlyServerUrl(),R=kt(o,h,y),K={name:R.fullPath},J=ni(C,l.host,l._protocol),Re={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${h.size()}`,"X-Goog-Upload-Header-Content-Type":R.contentType,"Content-Type":"application/json; charset=utf-8"},Be=rn(R,u),Vt=new On(J,"POST",function xt(jn){let sr;fi(jn);try{sr=jn.getResponseHeader("X-Goog-Upload-URL")}catch(uo){$n(!1)}return $n(Mn(sr)),sr},l.maxUploadRetryTime);return Vt.urlParams=K,Vt.headers=Re,Vt.body=Be,Vt.errorHandler=Bi(o),Vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(h,$s,o,u);this._request=y,y.getPromise().then(C=>{this._request=void 0,this._uploadUrl=C,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const o=this._uploadUrl;this._resolveToken((u,h)=>{const y=function fo(l,o,u,h){const J=new On(u,"POST",function C(se){const Re=fi(se,["active","final"]);let Be=null;try{Be=se.getResponseHeader("X-Goog-Upload-Size-Received")}catch(xt){$n(!1)}Be||$n(!1);const Xe=Number(Be);return $n(!isNaN(Xe)),new Yr(Xe,h.size(),"final"===Re)},l.maxUploadRetryTime);return J.headers={"X-Goog-Upload-Command":"query"},J.errorHandler=Bi(o),J}(this._ref.storage,this._ref._location,o,this._blob),C=this._ref.storage._makeRequest(y,$s,u,h);this._request=C,C.getPromise().then(R=>{R=R,this._request=void 0,this._updateProgress(R.current),this._needToFetchStatus=!1,R.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const o=262144*this._chunkMultiplier,u=new Yr(this._transferred,this._blob.size()),h=this._uploadUrl;this._resolveToken((y,C)=>{let R;try{R=function Gl(l,o,u,h,y,C,R,K){const J=new Yr(0,0);if(R?(J.current=R.current,J.total=R.total):(J.current=0,J.total=h.size()),h.size()!==J.total)throw function ka(){return new qn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const se=J.total-J.current;let Re=se;y>0&&(Re=Math.min(Re,y));const Be=J.current,Vt={"X-Goog-Upload-Command":Re===se?"upload, finalize":"upload","X-Goog-Upload-Offset":`${J.current}`},jn=h.slice(Be,Be+Re);if(null===jn)throw Zs();const Mi=new On(u,"POST",function sr(Ks,$u){const jl=fi(Ks,["active","final"]),wd=J.current+Re,Ed=h.size();let mf;return mf="final"===jl?Vi(o,C)(Ks,$u):null,new Yr(wd,Ed,"final"===jl,mf)},o.maxUploadRetryTime);return Mi.headers=Vt,Mi.body=jn.uploadData(),Mi.progressCallback=K||null,Mi.errorHandler=Bi(l),Mi}(this._ref._location,this._ref.storage,h,this._blob,o,this._mappings,u,this._makeProgressCallback())}catch(J){return this._error=J,void this._transition("error")}const K=this._ref.storage._makeRequest(R,$s,y,C);this._request=K,K.getPromise().then(J=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(J.current),J.finalized?(this._metadata=J.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((o,u)=>{const h=co(this._ref.storage,this._ref._location,this._mappings),y=this._ref.storage._makeRequest(h,$s,o,u);this._request=y,y.getPromise().then(C=>{this._request=void 0,this._metadata=C,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((o,u)=>{const h=function on(l,o,u,h,y){const C=o.bucketOnlyServerUrl(),R={"X-Goog-Upload-Protocol":"multipart"},J=function K(){let Mi="";for(let Ks=0;Ks<2;Ks++)Mi+=Math.random().toString().slice(2);return Mi}();R["Content-Type"]="multipart/related; boundary="+J;const se=kt(o,h,y),Re=rn(se,u),xt=Li.getBlob("--"+J+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Re+"\r\n--"+J+"\r\nContent-Type: "+se.contentType+"\r\n\r\n",h,"\r\n--"+J+"--");if(null===xt)throw Zs();const Vt={name:se.fullPath},jn=ni(C,l.host,l._protocol),uo=l.maxUploadRetryTime,Vs=new On(jn,"POST",Vi(l,u),uo);return Vs.urlParams=Vt,Vs.headers=R,Vs.body=xt.uploadData(),Vs.errorHandler=Bi(o),Vs}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(h,$s,o,u);this._request=y,y.getPromise().then(C=>{this._request=void 0,this._metadata=C,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(o){const u=this._transferred;this._transferred=o,this._transferred!==u&&this._notifyObservers()}_transition(o){if(this._state!==o)switch(o){case"canceling":case"pausing":this._state=o,void 0!==this._request&&this._request.cancel();break;case"running":const u="paused"===this._state;this._state=o,u&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=o,this._notifyObservers();break;case"canceled":this._error=bo(),this._state=o,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const o=zo(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:o,metadata:this._metadata,task:this,ref:this._ref}}on(o,u,h,y){const C=new gi(u||void 0,h||void 0,y||void 0);return this._addObserver(C),()=>{this._removeObserver(C)}}then(o,u){return this._promise.then(o,u)}catch(o){return this.then(null,o)}_addObserver(o){this._observers.push(o),this._notifyObserver(o)}_removeObserver(o){const u=this._observers.indexOf(o);-1!==u&&this._observers.splice(u,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(u=>{this._notifyObserver(u)})}_finishPromise(){if(void 0!==this._resolve){let o=!0;switch(zo(this._state)){case pi.SUCCESS:_s(this._resolve.bind(null,this.snapshot))();break;case pi.CANCELED:case pi.ERROR:_s(this._reject.bind(null,this._error))();break;default:o=!1}o&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(o){switch(zo(this._state)){case pi.RUNNING:case pi.PAUSED:o.next&&_s(o.next.bind(o,this.snapshot))();break;case pi.SUCCESS:o.complete&&_s(o.complete.bind(o))();break;default:o.error&&_s(o.error.bind(o,this._error))()}}resume(){const o="paused"===this._state||"pausing"===this._state;return o&&this._transition("running"),o}pause(){const o="running"===this._state;return o&&this._transition("pausing"),o}cancel(){const o="running"===this._state||"pausing"===this._state;return o&&this._transition("canceling"),o}}class Ao{constructor(o,u){this._service=o,this._location=u instanceof vr?u:vr.makeFromUrl(u,o.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(o,u){return new Ao(o,u)}get root(){const o=new vr(this._location.bucket,"");return this._newRef(this._service,o)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Js(this._location.path)}get storage(){return this._service}get parent(){const o=function xs(l){if(0===l.length)return null;const o=l.lastIndexOf("/");return-1===o?"":l.slice(0,o)}(this._location.path);if(null===o)return null;const u=new vr(this._location.bucket,o);return new Ao(this._service,u)}_throwIfRoot(o){if(""===this._location.path)throw Ts(o)}}function fa(l,o,u){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,br.Z)(function*(l,o,u){const y=yield Ta(l,{pageToken:u});o.prefixes.push(...y.prefixes),o.items.push(...y.items),null!=y.nextPageToken&&(yield fa(l,o,y.nextPageToken))})).apply(this,arguments)}function Ta(l,o){null!=o&&"number"==typeof o.maxResults&&Zi("options.maxResults",1,1e3,o.maxResults);const u=o||{},h=ho(l.storage,l._location,"/",u.pageToken,u.maxResults);return l.storage.makeRequestWithTokens(h,$s)}function Di(l){l._throwIfRoot("getDownloadURL");const o=function F(l,o,u){const y=ni(o.fullServerUrl(),l.host,l._protocol),R=l.maxOperationRetryTime,K=new On(y,"GET",function Kt(l,o){return function u(h,y){const C=lt(l,y,o);return $n(null!==C),function zt(l,o,u,h){const y=Yi(o);if(null===y||!Mn(y.downloadTokens))return null;const C=y.downloadTokens;if(0===C.length)return null;const R=encodeURIComponent;return C.split(",").map(se=>{const Be=l.fullPath;return ni("/b/"+R(l.bucket)+"/o/"+R(Be),u,h)+To({alt:"media",token:se})})[0]}(C,y,l.host,l._protocol)}}(l,u),R);return K.errorHandler=Xs(o),K}(l.storage,l._location,X());return l.storage.makeRequestWithTokens(o,$s).then(u=>{if(null===u)throw function Ci(){return new qn("no-download-url","The given file does not have any download URLs.")}();return u})}function mi(l,o){const u=function Rs(l,o){const u=o.split("/").filter(h=>h.length>0).join("/");return 0===l.length?u:l+"/"+u}(l._location.path,o),h=new vr(l._location.bucket,u);return new Ao(l.storage,h)}function Nc(l,o){if(l instanceof lu){const u=l;if(null==u._bucket)throw function Fi(){return new qn("no-default-bucket","No default bucket found. Did you set the '"+Oi+"' property when initializing the app?")}();const h=new Ao(u,u._bucket);return null!=o?Nc(h,o):h}return void 0!==o?mi(l,o):l}function Td(l,o){if(o&&function Mc(l){return/^[A-Za-z]+:\/\//.test(l)}(o)){if(l instanceof lu)return function Ba(l,o){return new Ao(l,o)}(l,o);throw bi("To use ref(service, url), the first argument must be a Storage instance.")}return Nc(l,o)}function Aa(l,o){const u=null==o?void 0:o[Oi];return null==u?null:vr.makeFromBucketSpec(u,l)}class lu{constructor(o,u,h,y,C){this.app=o,this._authProvider=u,this._appCheckProvider=h,this._url=y,this._firebaseVersion=C,this._bucket=null,this._host=Kn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=y?vr.makeFromBucketSpec(y,this._host):Aa(this._host,this.app.options)}get host(){return this._host}set host(o){this._host=o,this._bucket=null!=this._url?vr.makeFromBucketSpec(this._url,o):Aa(o,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(o){Zi("time",0,Number.POSITIVE_INFINITY,o),this._maxUploadRetryTime=o}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(o){Zi("time",0,Number.POSITIVE_INFINITY,o),this._maxOperationRetryTime=o}_getAuthToken(){var o=this;return(0,br.Z)(function*(){if(o._overrideAuthToken)return o._overrideAuthToken;const u=o._authProvider.getImmediate({optional:!0});if(u){const h=yield u.getToken();if(null!==h)return h.accessToken}return null})()}_getAppCheckToken(){var o=this;return(0,br.Z)(function*(){const u=o._appCheckProvider.getImmediate({optional:!0});return u?(yield u.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(o=>o.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(o){return new Ao(this,o)}_makeRequest(o,u,h,y){if(this._deleted)return new Ae(Do());{const C=function Ss(l,o,u,h,y,C){const R=To(l.urlParams),K=l.url+R,J=Object.assign({},l.headers);return function Fa(l,o){o&&(l["X-Firebase-GMPID"]=o)}(J,o),function Bs(l,o){null!==o&&o.length>0&&(l.Authorization="Firebase "+o)}(J,u),function ca(l,o){l["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager")}(J,C),function Zr(l,o){null!==o&&(l["X-Firebase-AppCheck"]=o)}(J,h),new ls(K,l.method,J,l.body,l.successCodes,l.additionalRetryCodes,l.handler,l.errorHandler,l.timeout,l.progressCallback,y)}(o,this._appId,h,y,u,this._firebaseVersion);return this._requests.add(C),C.getPromise().then(()=>this._requests.delete(C),()=>this._requests.delete(C)),C}}makeRequestWithTokens(o,u){var h=this;return(0,br.Z)(function*(){const[y,C]=yield Promise.all([h._getAuthToken(),h._getAppCheckToken()]);return h._makeRequest(o,u,y,C).getPromise()})()}}const Zo="@firebase/storage";function ml(l,o){return Td(l=(0,re.m9)(l),o)}function _l(l,{instanceIdentifier:o}){const u=l.getProvider("app").getImmediate(),h=l.getProvider("auth-internal"),y=l.getProvider("app-check-internal");return new lu(u,h,y,o,Kr.SDK_VERSION)}!function ql(){(0,Kr._registerComponent)(new li.wA("storage",_l,"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(Zo,"0.9.8",""),(0,Kr.registerVersion)(Zo,"0.9.8","esm2017")}();class Hs{constructor(o,u,h){this._delegate=o,this.task=u,this.ref=h}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class qu{constructor(o,u){this._delegate=o,this._ref=u,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Hs(this._delegate.snapshot,this,this._ref)}then(o,u){return this._delegate.then(h=>{if(o)return o(new Hs(h,this,this._ref))},u)}on(o,u,h,y){let C;return u&&(C="function"==typeof u?R=>u(new Hs(R,this,this._ref)):{next:u.next?R=>u.next(new Hs(R,this,this._ref)):void 0,complete:u.complete||void 0,error:u.error||void 0}),this._delegate.on(o,C,h||void 0,y||void 0)}}class Ar{constructor(o,u){this._delegate=o,this._service=u}get prefixes(){return this._delegate.prefixes.map(o=>new io(o,this._service))}get items(){return this._delegate.items.map(o=>new io(o,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class io{constructor(o,u){this._delegate=o,this.storage=u}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(o){const u=function Kl(l,o){return mi(l,o)}(this._delegate,o);return new io(u,this.storage)}get root(){return new io(this._delegate.root,this.storage)}get parent(){const o=this._delegate.parent;return null==o?null:new io(o,this.storage)}put(o,u){return this._throwIfRoot("put"),new qu(function to(l,o,u){return function Ko(l,o,u){return l._throwIfRoot("uploadBytesResumable"),new uu(l,new Li(o),u)}(l=(0,re.m9)(l),o,u)}(this._delegate,o,u),this)}putString(o,u=is.RAW,h){this._throwIfRoot("putString");const y=Qs(u,o),C=Object.assign({},h);return null==C.contentType&&null!=y.contentType&&(C.contentType=y.contentType),new qu(new uu(this._delegate,new Li(y.data,!0),C),this)}listAll(){return function ga(l){return function qo(l){const o={prefixes:[],items:[]};return fa(l,o).then(()=>o)}(l=(0,re.m9)(l))}(this._delegate).then(o=>new Ar(o,this.storage))}list(o){return function cu(l,o){return Ta(l=(0,re.m9)(l),o)}(this._delegate,o||void 0).then(u=>new Ar(u,this.storage))}getMetadata(){return function ja(l){return function Sa(l){l._throwIfRoot("getMetadata");const o=co(l.storage,l._location,X());return l.storage.makeRequestWithTokens(o,$s)}(l=(0,re.m9)(l))}(this._delegate)}updateMetadata(o){return function Ro(l,o){return function Wl(l,o){l._throwIfRoot("updateMetadata");const u=function O(l,o,u,h){const C=ni(o.fullServerUrl(),l.host,l._protocol),K=rn(u,h),se=l.maxOperationRetryTime,Re=new On(C,"PATCH",Vi(l,h),se);return Re.headers={"Content-Type":"application/json; charset=utf-8"},Re.body=K,Re.errorHandler=Xs(o),Re}(l.storage,l._location,o,X());return l.storage.makeRequestWithTokens(u,$s)}(l=(0,re.m9)(l),o)}(this._delegate,o)}getDownloadURL(){return function du(l){return Di(l=(0,re.m9)(l))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function no(l){return function xo(l){l._throwIfRoot("deleteObject");const o=function H(l,o){const h=ni(o.fullServerUrl(),l.host,l._protocol),K=new On(h,"DELETE",function R(J,se){},l.maxOperationRetryTime);return K.successCodes=[200,204],K.errorHandler=Xs(o),K}(l.storage,l._location);return l.storage.makeRequestWithTokens(o,$s)}(l=(0,re.m9)(l))}(this._delegate)}_throwIfRoot(o){if(""===this._delegate._location.path)throw Ts(o)}}class Yo{constructor(o,u){this.app=o,this._delegate=u}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(o){if(ji(o))throw bi("ref() expected a child path but got a URL, use refFromURL instead.");return new io(ml(this._delegate,o),this)}refFromURL(o){if(!ji(o))throw bi("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vr.makeFromUrl(o,this._delegate.host)}catch(u){throw bi("refFromUrl() expected a valid full URL but got an invalid one.")}return new io(ml(this._delegate,o),this)}setMaxUploadRetryTime(o){this._delegate.maxUploadRetryTime=o}setMaxOperationRetryTime(o){this._delegate.maxOperationRetryTime=o}useEmulator(o,u,h={}){!function Ku(l,o,u,h={}){!function Pc(l,o,u,h={}){l.host=`${o}:${u}`,l._protocol="http";const{mockUserToken:y}=h;y&&(l._overrideAuthToken="string"==typeof y?y:(0,re.Sg)(y,l.app.options.projectId))}(l,o,u,h)}(this._delegate,o,u,h)}}function ji(l){return/^[A-Za-z]+:\/\//.test(l)}function Zl(l,{instanceIdentifier:o}){const u=l.getProvider("app-compat").getImmediate(),h=l.getProvider("storage").getImmediate({identifier:o});return new Yo(u,h)}!function mt(l){const o={TaskState:pi,TaskEvent:pl,StringFormat:is,Storage:Yo,Reference:io};l.INTERNAL.registerComponent(new li.wA("storage-compat",Zl,"PUBLIC").setServiceProps(o).setMultipleInstances(!0)),l.registerVersion("@firebase/storage-compat","0.1.16")}(Sn.Z);var Pr=$(440),Mo=$(127);function S(l){const o=function ya(l){return new Ei.y(o=>{const u=R=>o.next(R);u(l.snapshot);const C=l.on("state_changed",u);return l.then(R=>{u(R),o.complete()},R=>{u(l.snapshot),(R=>{o.error(R)})(R)}),function(){C()}}).pipe(function ps(l,o=us.z){return(0,Vr.e)((u,h)=>{let y=null,C=null,R=null;const K=()=>{if(y){y.unsubscribe(),y=null;const se=C;C=null,h.next(se)}};function J(){const se=R+l,Re=o.now();if(Re<se)return y=this.schedule(void 0,se-Re),void h.add(y);K()}u.subscribe((0,cr.x)(h,se=>{C=se,R=o.now(),y||(y=o.schedule(J,l),h.add(y))},()=>{K(),h.complete()},void 0,()=>{C=y=null}))})}(0))}(l);return{task:l,then:l.then.bind(l),catch:l.catch.bind(l),pause:l.pause.bind(l),cancel:l.cancel.bind(l),resume:l.resume.bind(l),snapshotChanges:()=>o,percentageChanges:()=>o.pipe((0,Tn.U)(u=>u.bytesTransferred/u.totalBytes*100))}}function D(l){return{getDownloadURL:()=>(0,bs.of)(void 0).pipe(At.fc,(0,gt.w)(()=>l.getDownloadURL()),At.iC),getMetadata:()=>(0,bs.of)(void 0).pipe(At.fc,(0,gt.w)(()=>l.getMetadata()),At.iC),delete:()=>(0,Pi.D)(l.delete()),child:o=>D(l.child(o)),updateMetadata:o=>(0,Pi.D)(l.updateMetadata(o)),put:(o,u)=>S(l.put(o,u)),putString:(o,u,h)=>S(l.putString(o,u,h)),list:o=>(0,Pi.D)(l.list(o)),listAll:()=>(0,Pi.D)(l.listAll())}}const b=new ne.OlP("angularfire2.storageBucket"),M=new ne.OlP("angularfire2.storage.maxUploadRetryTime"),N=new ne.OlP("angularfire2.storage.maxOperationRetryTime"),W=new ne.OlP("angularfire2.storage.use-emulator");let ae=(()=>{class l{constructor(u,h,y,C,R,K,J,se,Re,Be){const Xe=(0,Cr.on)(u,R,h);this.storage=(0,Cr.cc)(`${Xe.name}.storage.${y}`,"AngularFireStorage",Xe.name,()=>{const xt=R.runOutsideAngular(()=>Xe.storage(y||void 0)),Vt=Re;return Vt&&xt.useEmulator(...Vt),J&&xt.setMaxUploadRetryTime(J),se&&xt.setMaxOperationRetryTime(se),xt},[J,se])}ref(u){return D(this.storage.ref(u))}refFromURL(u){return D(this.storage.refFromURL(u))}upload(u,h,y){return D(this.storage.ref(u)).put(h,y)}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(Cr.Dh),ne.LFG(Cr.xv,8),ne.LFG(b,8),ne.LFG(ne.Lbi),ne.LFG(ne.R0b),ne.LFG(At.HU),ne.LFG(M,8),ne.LFG(N,8),ne.LFG(W,8),ne.LFG(Pr.nm,8))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),it=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({}),l})(),Ft=(()=>{class l{constructor(){Mo.Z.registerVersion("angularfire",At.q4.full,"gcs-compat")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({providers:[ae],imports:[it]}),l})();var Un=$(7407),Gt=$(6451),hr=$(3099),Hn=$(5026),so=$(1884),Qo=$(8421),Ha=$(4671),va=$(5032),an=$(7669);$(3677);var un=$(1877);const vl="@firebase/database";let _i="";function Ji(l){_i=l}class Ot{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,u){null==u?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,re.Pz)(u))}get(o){const u=this.domStorage_.getItem(this.prefixedName_(o));return null==u?null:(0,re.cI)(u)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Sd{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,u){null==u?delete this.cache_[o]:this.cache_[o]=u}get(o){return(0,re.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const Oc=function(l){try{if("undefined"!=typeof window&&void 0!==window[l]){const o=window[l];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new Ot(o)}}catch(o){}return new Sd},Po=Oc("localStorage"),Du=Oc("sessionStorage"),Ga=new un.Yd("@firebase/database"),Tu=function(){let l=1;return function(){return l++}}(),Ad=function(l){const o=(0,re.dS)(l),u=new re.gQ;u.update(o);const h=u.digest();return re.US.encodeByteArray(h)},Xn=function(...l){let o="";for(let u=0;u<l.length;u++){const h=l[u];Array.isArray(h)||h&&"object"==typeof h&&"number"==typeof h.length?o+=Xn.apply(null,h):o+="object"==typeof h?(0,re.Pz)(h):h,o+=" "}return o};let wa=null,Wa=!0;const Ih=function(l,o){(0,re.hu)(!o||!0===l||!1===l,"Can't turn on custom loggers persistently."),!0===l?(Ga.logLevel=un.in.VERBOSE,wa=Ga.log.bind(Ga),o&&Du.set("logging_enabled",!0)):"function"==typeof l?wa=l:(wa=null,Du.remove("logging_enabled"))},Hr=function(...l){if(!0===Wa&&(Wa=!1,null===wa&&!0===Du.get("logging_enabled")&&Ih(!0)),wa){const o=Xn.apply(null,l);wa(o)}},ys=function(l){return function(...o){Hr(l,...o)}},$e=function(...l){const o="FIREBASE INTERNAL ERROR: "+Xn(...l);Ga.error(o)},Ns=function(...l){const o=`FIREBASE FATAL ERROR: ${Xn(...l)}`;throw Ga.error(o),new Error(o)},Dr=function(...l){const o="FIREBASE WARNING: "+Xn(...l);Ga.warn(o)},Oo=function(l){return"number"==typeof l&&(l!=l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},Ps="[MIN_NAME]",cs="[MAX_NAME]",za=function(l,o){if(l===o)return 0;if(l===Ps||o===cs)return-1;if(o===Ps||l===cs)return 1;{const u=ks(l),h=ks(o);return null!==u?null!==h?u-h==0?l.length-o.length:u-h:-1:null!==h?1:l<o?-1:1}},Zu=function(l,o){return l===o?0:l<o?-1:1},Gs=function(l,o){if(o&&l in o)return o[l];throw new Error("Missing required key ("+l+") in object: "+(0,re.Pz)(o))},Yu=function(l){if("object"!=typeof l||null===l)return(0,re.Pz)(l);const o=[];for(const h in l)o.push(h);o.sort();let u="{";for(let h=0;h<o.length;h++)0!==h&&(u+=","),u+=(0,re.Pz)(o[h]),u+=":",u+=Yu(l[o[h]]);return u+="}",u},ss=function(l,o){const u=l.length;if(u<=o)return[l];const h=[];for(let y=0;y<u;y+=o)h.push(l.substring(y,y+o>u?u:y+o));return h};function vs(l,o){for(const u in l)l.hasOwnProperty(u)&&o(u,l[u])}const Ka=function(l){(0,re.hu)(!Oo(l),"Invalid JSON number");const h=1023;let y,C,R,K,J;0===l?(C=0,R=0,y=1/l==-1/0?1:0):(y=l<0,(l=Math.abs(l))>=Math.pow(2,1-h)?(K=Math.min(Math.floor(Math.log(l)/Math.LN2),h),C=K+h,R=Math.round(l*Math.pow(2,52-K)-Math.pow(2,52))):(C=0,R=Math.round(l/Math.pow(2,-1074))));const se=[];for(J=52;J;J-=1)se.push(R%2?1:0),R=Math.floor(R/2);for(J=11;J;J-=1)se.push(C%2?1:0),C=Math.floor(C/2);se.push(y?1:0),se.reverse();const Re=se.join("");let Be="";for(J=0;J<64;J+=8){let Xe=parseInt(Re.substr(J,8),2).toString(16);1===Xe.length&&(Xe="0"+Xe),Be+=Xe}return Be.toLowerCase()},Os=new RegExp("^-?(0*)\\d{1,10}$"),er=-2147483648,Au=2147483647,ks=function(l){if(Os.test(l)){const o=Number(l);if(o>=er&&o<=Au)return o}return null},ii=function(l){try{l()}catch(o){setTimeout(()=>{throw Dr("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},Fr=function(l,o){const u=setTimeout(l,o);return"object"==typeof u&&u.unref&&u.unref(),u};class wl{constructor(o,u){this.appName_=o,this.appCheckProvider=u,this.appCheck=null==u?void 0:u.getImmediate({optional:!0}),this.appCheck||null==u||u.get().then(h=>this.appCheck=h)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((u,h)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(u,h):u(null)},0)})}addTokenChangeListener(o){var u;null===(u=this.appCheckProvider)||void 0===u||u.get().then(h=>h.addTokenListener(o))}notifyForInvalidToken(){Dr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ko{constructor(o,u,h){this.appName_=o,this.firebaseOptions_=u,this.authProvider_=h,this.auth_=null,this.auth_=h.getImmediate({optional:!0}),this.auth_||h.onInit(y=>this.auth_=y)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(u=>u&&"auth/token-not-initialized"===u.code?(Hr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)):new Promise((u,h)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(u,h):u(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(u=>u.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(u=>u.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dr(o)}}let Gr=(()=>{class l{constructor(u){this.accessToken=u}getToken(u){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(u){u(this.accessToken)}removeTokenChangeListener(u){}notifyForInvalidToken(){}}return l.OWNER="owner",l})();const We=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mn="websocket",An="long_polling";class Xt{constructor(o,u,h,y,C=!1,R="",K=!1){this.secure=u,this.namespace=h,this.webSocketOnly=y,this.nodeAdmin=C,this.persistenceKey=R,this.includeNamespaceInQueryParams=K,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Po.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&Po.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ws(l,o,u){let h;if((0,re.hu)("string"==typeof o,"typeof type must == string"),(0,re.hu)("object"==typeof u,"typeof params must == object"),o===mn)h=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else{if(o!==An)throw new Error("Unknown connection type: "+o);h=(l.secure?"https://":"http://")+l.internalHost+"/.lp?"}(function Wr(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams})(l)&&(u.ns=l.namespace);const y=[];return vs(u,(C,R)=>{y.push(C+"="+R)}),h+y.join("&")}class Fo{constructor(){this.counters_={}}incrementCounter(o,u=1){(0,re.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=u}get(){return(0,re.p$)(this.counters_)}}const _o={},ds={};function xu(l){const o=l.toString();return _o[o]||(_o[o]=new Fo),_o[o]}class Ru{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,u){this.closeAfterResponse=o,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,u){for(this.pendingResponses[o]=u;this.pendingResponses[this.currentResponseNum];){const h=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let y=0;y<h.length;++y)h[y]&&ii(()=>{this.onMessage_(h[y])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Jo{constructor(o,u,h,y,C,R,K){this.connId=o,this.repoInfo=u,this.applicationId=h,this.appCheckToken=y,this.authToken=C,this.transportSessionId=R,this.lastSessionId=K,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ys(o),this.stats_=xu(u),this.urlFn=J=>(this.appCheckToken&&(J.ac=this.appCheckToken),ws(u,An,J))}open(o,u){this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new Ru(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(l){if((0,re.Yr)()||"complete"===document.readyState)l();else{let o=!1;const u=function(){document.body?o||(o=!0,l()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Za((...C)=>{const[R,K,J,se,Re]=C;if(this.incrementIncomingBytes_(C),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===R)this.id=K,this.password=J;else{if("close"!==R)throw new Error("Unrecognized command received: "+R);K?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(K,()=>{this.onClosed_()})):this.onClosed_()}},(...C)=>{const[R,K]=C;this.incrementIncomingBytes_(C),this.myPacketOrderer.handleResponse(R,K)},()=>{this.onClosed_()},this.urlFn);const h={start:"t"};h.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(h.cb=this.scriptTagHolder.uniqueCallbackIdentifier),h.v="5",this.transportSessionId&&(h.s=this.transportSessionId),this.lastSessionId&&(h.ls=this.lastSessionId),this.applicationId&&(h.p=this.applicationId),this.appCheckToken&&(h.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&We.test(location.hostname)&&(h.r="f");const y=this.urlFn(h);this.log_("Connecting via long-poll to "+y),this.scriptTagHolder.addTag(y,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Jo.forceAllow_=!0}static forceDisallow(){Jo.forceDisallow_=!0}static isAvailable(){return!((0,re.Yr)()||!Jo.forceAllow_&&(Jo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const u=(0,re.Pz)(o);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const h=(0,re.h$)(u),y=ss(h,1840);for(let C=0;C<y.length;C++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,y.length,y[C]),this.curSegmentNum++}addDisconnectPingFrame(o,u){if((0,re.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const h={dframe:"t"};h.id=o,h.pw=u,this.myDisconnFrame.src=this.urlFn(h),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const u=(0,re.Pz)(o).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)}}class Za{constructor(o,u,h,y){if(this.onDisconnect=h,this.urlFn=y,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,re.Yr)())this.commandCB=o,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=Tu(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=Za.createIFrame_();let C="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(C='<script>document.domain="'+document.domain+'";<\/script>');const R="<html><body>"+C+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(R),this.myIFrame.doc.close()}catch(K){Hr("frame writing exception"),K.stack&&Hr(K.stack),Hr(K)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Hr("No IE domain setting required")}catch(u){const h=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+h+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,u){for(this.myID=o,this.myPW=u,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let u=this.urlFn(o),h="",y=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+h.length<=1870;){const R=this.pendingSegs.shift();h=h+"&seg"+y+"="+R.seg+"&ts"+y+"="+R.ts+"&d"+y+"="+R.d,y++}return u+=h,this.addLongPollTag_(u,this.currentSerial),!0}return!1}enqueueSegment(o,u,h){this.pendingSegs.push({seg:o,ts:u,d:h}),this.alive&&this.newRequest_()}addLongPollTag_(o,u){this.outstandingRequests.add(u);const h=()=>{this.outstandingRequests.delete(u),this.newRequest_()},y=setTimeout(h,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(y),h()})}addTag(o,u){(0,re.Yr)()?this.doNodeLongPoll(o,u):setTimeout(()=>{try{if(!this.sendNewPolls)return;const h=this.myIFrame.doc.createElement("script");h.type="text/javascript",h.async=!0,h.src=o,h.onload=h.onreadystatechange=function(){const y=h.readyState;(!y||"loaded"===y||"complete"===y)&&(h.onload=h.onreadystatechange=null,h.parentNode&&h.parentNode.removeChild(h),u())},h.onerror=()=>{Hr("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(h)}catch(h){}},Math.floor(1))}}let Md=null;"undefined"!=typeof MozWebSocket?Md=MozWebSocket:"undefined"!=typeof WebSocket&&(Md=WebSocket);let Ai=(()=>{class l{constructor(u,h,y,C,R,K,J){this.connId=u,this.applicationId=y,this.appCheckToken=C,this.authToken=R,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ys(this.connId),this.stats_=xu(h),this.connURL=l.connectionURL_(h,K,J,C,y),this.nodeAdmin=h.nodeAdmin}static connectionURL_(u,h,y,C,R){const K={v:"5"};return!(0,re.Yr)()&&"undefined"!=typeof location&&location.hostname&&We.test(location.hostname)&&(K.r="f"),h&&(K.s=h),y&&(K.ls=y),C&&(K.ac=C),R&&(K.p=R),ws(u,mn,K)}open(u,h){this.onDisconnect=h,this.onMessage=u,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Po.set("previous_websocket_failure",!0);try{let y;if((0,re.Yr)()){const R={headers:{"User-Agent":`Firebase/5/${_i}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(R.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(R.headers["X-Firebase-AppCheck"]=this.appCheckToken);const K=process.env,J=0===this.connURL.indexOf("wss://")?K.HTTPS_PROXY||K.https_proxy:K.HTTP_PROXY||K.http_proxy;J&&(R.proxy={origin:J})}this.mySock=new Md(this.connURL,[],y)}catch(y){this.log_("Error instantiating WebSocket.");const C=y.message||y.data;return C&&this.log_(C),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=y=>{this.handleIncomingFrame(y)},this.mySock.onerror=y=>{this.log_("WebSocket error.  Closing connection.");const C=y.message||y.data;C&&this.log_(C),this.onClosed_()}}start(){}static forceDisallow(){l.forceDisallow_=!0}static isAvailable(){let u=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(u=!0)}return!u&&null!==Md&&!l.forceDisallow_}static previouslyFailed(){return Po.isInMemoryStorage||!0===Po.get("previous_websocket_failure")}markConnectionHealthy(){Po.remove("previous_websocket_failure")}appendFrame_(u){if(this.frames.push(u),this.frames.length===this.totalFrames){const h=this.frames.join("");this.frames=null;const y=(0,re.cI)(h);this.onMessage(y)}}handleNewFrameCount_(u){this.totalFrames=u,this.frames=[]}extractFrameCount_(u){if((0,re.hu)(null===this.frames,"We already have a frame buffer"),u.length<=6){const h=Number(u);if(!isNaN(h))return this.handleNewFrameCount_(h),null}return this.handleNewFrameCount_(1),u}handleIncomingFrame(u){if(null===this.mySock)return;const h=u.data;if(this.bytesReceived+=h.length,this.stats_.incrementCounter("bytes_received",h.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(h);else{const y=this.extractFrameCount_(h);null!==y&&this.appendFrame_(y)}}send(u){this.resetKeepAlive();const h=(0,re.Pz)(u);this.bytesSent+=h.length,this.stats_.incrementCounter("bytes_sent",h.length);const y=ss(h,16384);y.length>1&&this.sendString_(String(y.length));for(let C=0;C<y.length;C++)this.sendString_(y[C])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(u){try{this.mySock.send(u)}catch(h){this.log_("Exception thrown from WebSocket.send():",h.message||h.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return l.responsesRequiredToBeHealthy=2,l.healthyTimeout=3e4,l})(),Yl=(()=>{class l{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[Jo,Ai]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(u){const h=Ai&&Ai.isAvailable();let y=h&&!Ai.previouslyFailed();if(u.webSocketOnly&&(h||Dr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),y=!0),y)this.transports_=[Ai];else{const C=this.transports_=[];for(const R of l.ALL_TRANSPORTS)R&&R.isAvailable()&&C.push(R);l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return l.globalTransportInitialized_=!1,l})();class bl{constructor(o,u,h,y,C,R,K,J,se,Re){this.id=o,this.repoInfo_=u,this.applicationId_=h,this.appCheckToken_=y,this.authToken_=C,this.onMessage_=R,this.onReady_=K,this.onDisconnect_=J,this.onKill_=se,this.lastSessionId=Re,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ys("c:"+this.id+":"),this.transportManager_=new Yl(u),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.conn_),h=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(u,h)},Math.floor(0));const y=o.healthyTimeout||0;y>0&&(this.healthyTimeout_=Fr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(y)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return u=>{o===this.conn_?this.onConnectionLost_(u):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return u=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(u):o===this.secondaryConn_?this.onSecondaryMessageReceived_(u):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const u=o.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const u=Gs("t",o),h=Gs("d",o);if("c"===u)this.onSecondaryControl_(h);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(h)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const u=Gs("t",o),h=Gs("d",o);"c"===u?this.onControl_(h):"d"===u&&this.onDataMessage_(h)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const u=Gs("t",o);if("d"in o){const h=o.d;if("h"===u)this.onHandshake_(h);else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let y=0;y<this.pendingDataMessages.length;++y)this.onDataMessage_(this.pendingDataMessages[y]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(h):"r"===u?this.onReset_(h):"e"===u?$e("Server Error: "+h):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$e("Unknown control packet command: "+u)}}onHandshake_(o){const u=o.ts,h=o.v,y=o.h;this.sessionId=o.s,this.repoInfo_.host=y,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==h&&Dr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.secondaryConn_),h=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(u,h),Fr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,u){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Po.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class $p{put(o,u,h,y){}merge(o,u,h,y){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,u,h){}onDisconnectMerge(o,u,h){}onDisconnectCancel(o,u){}reportStats(o){}}class Uc{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,re.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...u){if(Array.isArray(this.listeners_[o])){const h=[...this.listeners_[o]];for(let y=0;y<h.length;y++)h[y].callback.apply(h[y].context,u)}}on(o,u,h){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:u,context:h});const y=this.getInitialEvent(o);y&&u.apply(h,y)}off(o,u,h){this.validateEventType_(o);const y=this.listeners_[o]||[];for(let C=0;C<y.length;C++)if(y[C].callback===u&&(!h||h===y[C].context))return void y.splice(C,1)}validateEventType_(o){(0,re.hu)(this.allowedEvents_.find(u=>u===o),"Unknown event: "+o)}}class Dl extends Uc{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,re.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Dl}getInitialEvent(o){return(0,re.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class Gn{constructor(o,u){if(void 0===u){this.pieces_=o.split("/");let h=0;for(let y=0;y<this.pieces_.length;y++)this.pieces_[y].length>0&&(this.pieces_[h]=this.pieces_[y],h++);this.pieces_.length=h,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=u}toString(){let o="";for(let u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(o+="/"+this.pieces_[u]);return o||"/"}}function Tr(){return new Gn("")}function Bn(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function Xu(l){return l.pieces_.length-l.pieceNum_}function ir(l){let o=l.pieceNum_;return o<l.pieces_.length&&o++,new Gn(l.pieces_,o)}function Jl(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function Ma(l,o=0){return l.pieces_.slice(l.pieceNum_+o)}function Ah(l){if(l.pieceNum_>=l.pieces_.length)return null;const o=[];for(let u=l.pieceNum_;u<l.pieces_.length-1;u++)o.push(l.pieces_[u]);return new Gn(o,0)}function Qr(l,o){const u=[];for(let h=l.pieceNum_;h<l.pieces_.length;h++)u.push(l.pieces_[h]);if(o instanceof Gn)for(let h=o.pieceNum_;h<o.pieces_.length;h++)u.push(o.pieces_[h]);else{const h=o.split("/");for(let y=0;y<h.length;y++)h[y].length>0&&u.push(h[y])}return new Gn(u,0)}function Wn(l){return l.pieceNum_>=l.pieces_.length}function Lo(l,o){const u=Bn(l),h=Bn(o);if(null===u)return o;if(u===h)return Lo(ir(l),ir(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+l+")")}function jc(l,o){const u=Ma(l,0),h=Ma(o,0);for(let y=0;y<u.length&&y<h.length;y++){const C=za(u[y],h[y]);if(0!==C)return C}return u.length===h.length?0:u.length<h.length?-1:1}function Rf(l,o){if(Xu(l)!==Xu(o))return!1;for(let u=l.pieceNum_,h=o.pieceNum_;u<=l.pieces_.length;u++,h++)if(l.pieces_[u]!==o.pieces_[h])return!1;return!0}function Xo(l,o){let u=l.pieceNum_,h=o.pieceNum_;if(Xu(l)>Xu(o))return!1;for(;u<l.pieces_.length;){if(l.pieces_[u]!==o.pieces_[h])return!1;++u,++h}return!0}class Xl{constructor(o,u){this.errorPrefix_=u,this.parts_=Ma(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let h=0;h<this.parts_.length;h++)this.byteLength_+=(0,re.ug)(this.parts_[h]);Mf(this)}}function Mf(l){if(l.byteLength_>768)throw new Error(l.errorPrefix_+"has a key path longer than 768 bytes ("+l.byteLength_+").");if(l.parts_.length>32)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ea(l))}function ea(l){return 0===l.parts_.length?"":"in property '"+l.parts_.join(".")+"'"}class Nd extends Uc{constructor(){let o,u;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(u="visibilitychange",o="hidden"):void 0!==document.mozHidden?(u="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(u="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(u="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,u&&document.addEventListener(u,()=>{const h=!document[o];h!==this.visible_&&(this.visible_=h,this.trigger("visible",h))},!1)}static getInstance(){return new Nd}getInitialEvent(o){return(0,re.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const Ja=1e3;let hu,xr=(()=>{class l extends $p{constructor(u,h,y,C,R,K,J,se){if(super(),this.repoInfo_=u,this.applicationId_=h,this.onDataUpdate_=y,this.onConnectStatus_=C,this.onServerInfoUpdate_=R,this.authTokenProvider_=K,this.appCheckTokenProvider_=J,this.authOverride_=se,this.id=l.nextPersistentConnectionId_++,this.log_=ys("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ja,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,se&&!(0,re.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Nd.getInstance().on("visible",this.onVisible_,this),-1===u.host.indexOf("fblocal")&&Dl.getInstance().on("online",this.onOnline_,this)}sendRequest(u,h,y){const C=++this.requestNumber_,R={r:C,a:u,b:h};this.log_((0,re.Pz)(R)),(0,re.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(R),y&&(this.requestCBHash_[C]=y)}get(u){this.initConnection_();const h=new re.BH,C={action:"g",request:{p:u._path.toString(),q:u._queryObject},onComplete:K=>{const J=K.d;"ok"===K.s?h.resolve(J):h.reject(J)}};this.outstandingGets_.push(C),this.outstandingGetCount_++;const R=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const K=this.outstandingGets_[R];void 0===K||C!==K||(delete this.outstandingGets_[R],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+R+" timed out on connection"),h.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(R),h.promise}listen(u,h,y,C){this.initConnection_();const R=u._queryIdentifier,K=u._path.toString();this.log_("Listen called for "+K+" "+R),this.listens.has(K)||this.listens.set(K,new Map),(0,re.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,re.hu)(!this.listens.get(K).has(R),"listen() called twice for same path/queryId.");const J={onComplete:C,hashFn:h,query:u,tag:y};this.listens.get(K).set(R,J),this.connected_&&this.sendListen_(J)}sendGet_(u){const h=this.outstandingGets_[u];this.sendRequest("g",h.request,y=>{delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),h.onComplete&&h.onComplete(y)})}sendListen_(u){const h=u.query,y=h._path.toString(),C=h._queryIdentifier;this.log_("Listen on "+y+" for "+C);const R={p:y};u.tag&&(R.q=h._queryObject,R.t=u.tag),R.h=u.hashFn(),this.sendRequest("q",R,J=>{const se=J.d,Re=J.s;l.warnOnListenWarnings_(se,h),(this.listens.get(y)&&this.listens.get(y).get(C))===u&&(this.log_("listen response",J),"ok"!==Re&&this.removeListen_(y,C),u.onComplete&&u.onComplete(Re,se))})}static warnOnListenWarnings_(u,h){if(u&&"object"==typeof u&&(0,re.r3)(u,"w")){const y=(0,re.DV)(u,"w");if(Array.isArray(y)&&~y.indexOf("no_index")){const C='".indexOn": "'+h._queryParams.getIndex().toString()+'"',R=h._path.toString();Dr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${C} at ${R} to your security rules for better performance.`)}}}refreshAuthToken(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(u)}reduceReconnectDelayIfAdminCredential_(u){(u&&40===u.length||(0,re.GJ)(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(u){this.appCheckToken_=u,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const u=this.authToken_,h=(0,re.w9)(u)?"auth":"gauth",y={cred:u};null===this.authOverride_?y.noauth=!0:"object"==typeof this.authOverride_&&(y.authvar=this.authOverride_),this.sendRequest(h,y,C=>{const R=C.s,K=C.d||"error";this.authToken_===u&&("ok"===R?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(R,K))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},u=>{const h=u.s,y=u.d||"error";"ok"===h?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(h,y)})}unlisten(u,h){const y=u._path.toString(),C=u._queryIdentifier;this.log_("Unlisten called for "+y+" "+C),(0,re.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(y,C)&&this.connected_&&this.sendUnlisten_(y,C,u._queryObject,h)}sendUnlisten_(u,h,y,C){this.log_("Unlisten on "+u+" for "+h);const R={p:u};C&&(R.q=y,R.t=C),this.sendRequest("n",R)}onDisconnectPut(u,h,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",u,h,y):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:h,onComplete:y})}onDisconnectMerge(u,h,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",u,h,y):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:h,onComplete:y})}onDisconnectCancel(u,h){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",u,null,h):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:h})}sendOnDisconnect_(u,h,y,C){const R={p:h,d:y};this.log_("onDisconnect "+u,R),this.sendRequest(u,R,K=>{C&&setTimeout(()=>{C(K.s,K.d)},Math.floor(0))})}put(u,h,y,C){this.putInternal("p",u,h,y,C)}merge(u,h,y,C){this.putInternal("m",u,h,y,C)}putInternal(u,h,y,C,R){this.initConnection_();const K={p:h,d:y};void 0!==R&&(K.h=R),this.outstandingPuts_.push({action:u,request:K,onComplete:C}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+h)}sendPut_(u){const h=this.outstandingPuts_[u].action,y=this.outstandingPuts_[u].request,C=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(h,y,R=>{this.log_(h+" response",R),delete this.outstandingPuts_[u],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),C&&C(R.s,R.d)})}reportStats(u){if(this.connected_){const h={c:u};this.log_("reportStats",h),this.sendRequest("s",h,y=>{"ok"!==y.s&&this.log_("reportStats","Error sending stats: "+y.d)})}}onDataMessage_(u){if("r"in u){this.log_("from server: "+(0,re.Pz)(u));const h=u.r,y=this.requestCBHash_[h];y&&(delete this.requestCBHash_[h],y(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}}onDataPush_(u,h){this.log_("handleServerMessage",u,h),"d"===u?this.onDataUpdate_(h.p,h.d,!1,h.t):"m"===u?this.onDataUpdate_(h.p,h.d,!0,h.t):"c"===u?this.onListenRevoked_(h.p,h.q):"ac"===u?this.onAuthRevoked_(h.s,h.d):"apc"===u?this.onAppCheckRevoked_(h.s,h.d):"sd"===u?this.onSecurityDebugPacket_(h):$e("Unrecognized action received from server: "+(0,re.Pz)(u)+"\nAre you using the latest client?")}onReady_(u,h){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=h,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(u){(0,re.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(u))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)),this.visible_=u}onOnline_(u){u?(this.log_("Browser went online."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ja),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const u=(new Date).getTime()-this.lastConnectionAttemptTime_;let h=Math.max(0,this.reconnectDelay_-u);h=Math.random()*h,this.log_("Trying to reconnect in "+h+"ms"),this.scheduleConnect_(h),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var u=this;return(0,br.Z)(function*(){if(u.shouldReconnect_()){u.log_("Making a connection attempt"),u.lastConnectionAttemptTime_=(new Date).getTime(),u.lastConnectionEstablishedTime_=null;const h=u.onDataMessage_.bind(u),y=u.onReady_.bind(u),C=u.onRealtimeDisconnect_.bind(u),R=u.id+":"+l.nextConnectionId_++,K=u.lastSessionId;let J=!1,se=null;const Re=function(){se?se.close():(J=!0,C())};u.realtime_={close:Re,sendRequest:function(xt){(0,re.hu)(se,"sendRequest call when we're not connected not allowed."),se.sendRequest(xt)}};const Xe=u.forceTokenRefresh_;u.forceTokenRefresh_=!1;try{const[xt,Vt]=yield Promise.all([u.authTokenProvider_.getToken(Xe),u.appCheckTokenProvider_.getToken(Xe)]);J?Hr("getToken() completed but was canceled"):(Hr("getToken() completed. Creating connection."),u.authToken_=xt&&xt.accessToken,u.appCheckToken_=Vt&&Vt.token,se=new bl(R,u.repoInfo_,u.applicationId_,u.appCheckToken_,u.authToken_,h,y,C,jn=>{Dr(jn+" ("+u.repoInfo_.toString()+")"),u.interrupt("server_kill")},K))}catch(xt){u.log_("Failed to get token: "+xt),J||(u.repoInfo_.nodeAdmin&&Dr(xt),Re())}}})()}interrupt(u){Hr("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(u){Hr("Resuming connection for reason: "+u),delete this.interruptReasons_[u],(0,re.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(u){const h=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:h})}cancelSentTransactions_(){for(let u=0;u<this.outstandingPuts_.length;u++){const h=this.outstandingPuts_[u];h&&"h"in h.request&&h.queued&&(h.onComplete&&h.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(u,h){let y;y=h?h.map(R=>Yu(R)).join("$"):"default";const C=this.removeListen_(u,y);C&&C.onComplete&&C.onComplete("permission_denied")}removeListen_(u,h){const y=new Gn(u).toString();let C;if(this.listens.has(y)){const R=this.listens.get(y);C=R.get(h),R.delete(h),0===R.size&&this.listens.delete(y)}else C=void 0;return C}onAuthRevoked_(u,h){Hr("Auth token revoked: "+u+"/"+h),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(u,h){Hr("App check token revoked: "+u+"/"+h),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===u||"permission_denied"===u)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const u of this.listens.values())for(const h of u.values())this.sendListen_(h);for(let u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){const u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(let u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}sendConnectStats_(){const u={};let h="js";(0,re.Yr)()&&(h=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+h+"."+_i.replace(/\./g,"-")]=1,(0,re.uI)()?u["framework.cordova"]=1:(0,re.b$)()&&(u["framework.reactnative"]=1),this.reportStats(u)}shouldReconnect_(){const u=Dl.getInstance().currentlyOnline();return(0,re.xb)(this.interruptReasons_)&&u}}return l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l})();class tr{constructor(o,u){this.name=o,this.node=u}static Wrap(o,u){return new tr(o,u)}}class Od{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,u){const h=new tr(Ps,o),y=new tr(Ps,u);return 0!==this.compare(h,y)}minPost(){return tr.MIN}}class kd extends Od{static get __EMPTY_NODE(){return hu}static set __EMPTY_NODE(o){hu=o}compare(o,u){return za(o.name,u.name)}isDefinedOn(o){throw(0,re.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,u){return!1}minPost(){return tr.MIN}maxPost(){return new tr(cs,hu)}makePost(o,u){return(0,re.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new tr(o,hu)}toString(){return".key"}}const Xa=new kd;class ku{constructor(o,u,h,y,C=null){this.isReverse_=y,this.resultGenerator_=C,this.nodeStack_=[];let R=1;for(;!o.isEmpty();)if(o=o,R=u?h(o.key,u):1,y&&(R*=-1),R<0)o=this.isReverse_?o.left:o.right;else{if(0===R){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let u,o=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return u}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let Fu,Fs=(()=>{class l{constructor(u,h,y,C,R){this.key=u,this.value=h,this.color=null!=y?y:l.RED,this.left=null!=C?C:Ls.EMPTY_NODE,this.right=null!=R?R:Ls.EMPTY_NODE}copy(u,h,y,C,R){return new l(null!=u?u:this.key,null!=h?h:this.value,null!=y?y:this.color,null!=C?C:this.left,null!=R?R:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(u){return this.left.inorderTraversal(u)||!!u(this.key,this.value)||this.right.inorderTraversal(u)}reverseTraversal(u){return this.right.reverseTraversal(u)||u(this.key,this.value)||this.left.reverseTraversal(u)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(u,h,y){let C=this;const R=y(u,C.key);return C=R<0?C.copy(null,null,null,C.left.insert(u,h,y),null):0===R?C.copy(null,h,null,null,null):C.copy(null,null,null,null,C.right.insert(u,h,y)),C.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ls.EMPTY_NODE;let u=this;return!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.removeMin_(),null),u.fixUp_()}remove(u,h){let y,C;if(y=this,h(u,y.key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(u,h),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===h(u,y.key)){if(y.right.isEmpty())return Ls.EMPTY_NODE;C=y.right.min_(),y=y.copy(C.key,C.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(u,h))}return y.fixUp_()}isRed_(){return this.color}fixUp_(){let u=this;return u.right.isRed_()&&!u.left.isRed_()&&(u=u.rotateLeft_()),u.left.isRed_()&&u.left.left.isRed_()&&(u=u.rotateRight_()),u.left.isRed_()&&u.right.isRed_()&&(u=u.colorFlip_()),u}moveRedLeft_(){let u=this.colorFlip_();return u.right.left.isRed_()&&(u=u.copy(null,null,null,null,u.right.rotateRight_()),u=u.rotateLeft_(),u=u.colorFlip_()),u}moveRedRight_(){let u=this.colorFlip_();return u.left.left.isRed_()&&(u=u.rotateRight_(),u=u.colorFlip_()),u}rotateLeft_(){const u=this.copy(null,null,l.RED,null,this.right.left);return this.right.copy(null,null,this.color,u,null)}rotateRight_(){const u=this.copy(null,null,l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,u)}colorFlip_(){const u=this.left.copy(null,null,!this.left.color,null,null),h=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,u,h)}checkMaxDepth_(){const u=this.check_();return Math.pow(2,u)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const u=this.left.check_();if(u!==this.right.check_())throw new Error("Black depths differ");return u+(this.isRed_()?0:1)}}return l.RED=!0,l.BLACK=!1,l})();class Ls{constructor(o,u=Ls.EMPTY_NODE){this.comparator_=o,this.root_=u}insert(o,u){return new Ls(this.comparator_,this.root_.insert(o,u,this.comparator_).copy(null,null,Fs.BLACK,null,null))}remove(o){return new Ls(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,Fs.BLACK,null,null))}get(o){let u,h=this.root_;for(;!h.isEmpty();){if(u=this.comparator_(o,h.key),0===u)return h.value;u<0?h=h.left:u>0&&(h=h.right)}return null}getPredecessorKey(o){let u,h=this.root_,y=null;for(;!h.isEmpty();){if(u=this.comparator_(o,h.key),0===u){if(h.left.isEmpty())return y?y.key:null;for(h=h.left;!h.right.isEmpty();)h=h.right;return h.key}u<0?h=h.left:u>0&&(y=h,h=h.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new ku(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,u){return new ku(this.root_,o,this.comparator_,!1,u)}getReverseIteratorFrom(o,u){return new ku(this.root_,o,this.comparator_,!0,u)}getReverseIterator(o){return new ku(this.root_,null,this.comparator_,!0,o)}}function Hp(l,o){return za(l.name,o.name)}function tl(l,o){return za(l,o)}Ls.EMPTY_NODE=new class Pf{copy(o,u,h,y,C){return this}insert(o,u,h){return new Fs(o,u,null)}remove(o,u){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Xi=function(l){return"number"==typeof l?"number:"+Ka(l):"string:"+l},fr=function(l){if(l.isLeafNode()){const o=l.val();(0,re.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,re.r3)(o,".sv"),"Priority must be a string or number.")}else(0,re.hu)(l===Fu||l.isEmpty(),"priority of unexpected type.");(0,re.hu)(l===Fu||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Hc,Uo,Gc,$i=(()=>{class l{constructor(u,h=l.__childrenNodeConstructor.EMPTY_NODE){this.value_=u,this.priorityNode_=h,this.lazyHash_=null,(0,re.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),fr(this.priorityNode_)}static set __childrenNodeConstructor(u){Hc=u}static get __childrenNodeConstructor(){return Hc}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(u){return new l(this.value_,u)}getImmediateChild(u){return".priority"===u?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}getChild(u){return Wn(u)?this:".priority"===Bn(u)?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(u,h){return null}updateImmediateChild(u,h){return".priority"===u?this.updatePriority(h):h.isEmpty()&&".priority"!==u?this:l.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(u,h).updatePriority(this.priorityNode_)}updateChild(u,h){const y=Bn(u);return null===y?h:h.isEmpty()&&".priority"!==y?this:((0,re.hu)(".priority"!==y||1===Xu(u),".priority must be the last token in a path"),this.updateImmediateChild(y,l.__childrenNodeConstructor.EMPTY_NODE.updateChild(ir(u),h)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(u,h){return!1}val(u){return u&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let u="";this.priorityNode_.isEmpty()||(u+="priority:"+Xi(this.priorityNode_.val())+":");const h=typeof this.value_;u+=h+":",u+="number"===h?Ka(this.value_):this.value_,this.lazyHash_=Ad(u)}return this.lazyHash_}getValue(){return this.value_}compareTo(u){return u===l.__childrenNodeConstructor.EMPTY_NODE?1:u instanceof l.__childrenNodeConstructor?-1:((0,re.hu)(u.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(u))}compareToLeafNode_(u){const h=typeof u.value_,y=typeof this.value_,C=l.VALUE_TYPE_ORDER.indexOf(h),R=l.VALUE_TYPE_ORDER.indexOf(y);return(0,re.hu)(C>=0,"Unknown leaf type: "+h),(0,re.hu)(R>=0,"Unknown leaf type: "+y),C===R?"object"===y?0:this.value_<u.value_?-1:this.value_===u.value_?0:1:R-C}withIndex(){return this}isIndexed(){return!0}equals(u){if(u===this)return!0;if(u.isLeafNode()){const h=u;return this.value_===h.value_&&this.priorityNode_.equals(h.priorityNode_)}return!1}}return l.VALUE_TYPE_ORDER=["object","boolean","number","string"],l})();const nr=new class nc extends Od{compare(o,u){const h=o.node.getPriority(),y=u.node.getPriority(),C=h.compareTo(y);return 0===C?za(o.name,u.name):C}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,u){return!o.getPriority().equals(u.getPriority())}minPost(){return tr.MIN}maxPost(){return new tr(cs,new $i("[PRIORITY-POST]",Gc))}makePost(o,u){const h=Uo(o);return new tr(u,new $i("[PRIORITY-POST]",h))}toString(){return".priority"}},Bo=Math.log(2);class Rh{constructor(o){this.count=parseInt(Math.log(o+1)/Bo,10),this.current_=this.count-1;const y=(C=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&y}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const Lu=function(l,o,u,h){l.sort(o);const y=function(J,se){const Re=se-J;let Be,Xe;if(0===Re)return null;if(1===Re)return Be=l[J],Xe=u?u(Be):Be,new Fs(Xe,Be.node,Fs.BLACK,null,null);{const xt=parseInt(Re/2,10)+J,Vt=y(J,xt),jn=y(xt+1,se);return Be=l[xt],Xe=u?u(Be):Be,new Fs(Xe,Be.node,Fs.BLACK,Vt,jn)}},K=function(J){let se=null,Re=null,Be=l.length;const Xe=function(Vt,jn){const sr=Be-Vt,uo=Be;Be-=Vt;const Vs=y(sr+1,uo),Mi=l[sr],Ks=u?u(Mi):Mi;xt(new Fs(Ks,Mi.node,jn,null,Vs))},xt=function(Vt){se?(se.left=Vt,se=Vt):(Re=Vt,se=Vt)};for(let Vt=0;Vt<J.count;++Vt){const jn=J.nextBitIsOne(),sr=Math.pow(2,J.count-(Vt+1));jn?Xe(sr,Fs.BLACK):(Xe(sr,Fs.BLACK),Xe(sr,Fs.RED))}return Re}(new Rh(l.length));return new Ls(h||o,K)};let Wc;const nl={};class In{constructor(o,u){this.indexes_=o,this.indexSet_=u}static get Default(){return(0,re.hu)(nl&&nr,"ChildrenNode.ts has not been loaded"),Wc=Wc||new In({".priority":nl},{".priority":nr}),Wc}get(o){const u=(0,re.DV)(this.indexes_,o);if(!u)throw new Error("No index defined for "+o);return u instanceof Ls?u:null}hasIndex(o){return(0,re.r3)(this.indexSet_,o.toString())}addIndex(o,u){(0,re.hu)(o!==Xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const h=[];let y=!1;const C=u.getIterator(tr.Wrap);let K,R=C.getNext();for(;R;)y=y||o.isDefinedOn(R.node),h.push(R),R=C.getNext();K=y?Lu(h,o.getCompare()):nl;const J=o.toString(),se=Object.assign({},this.indexSet_);se[J]=o;const Re=Object.assign({},this.indexes_);return Re[J]=K,new In(Re,se)}addToIndexes(o,u){const h=(0,re.UI)(this.indexes_,(y,C)=>{const R=(0,re.DV)(this.indexSet_,C);if((0,re.hu)(R,"Missing index implementation for "+C),y===nl){if(R.isDefinedOn(o.node)){const K=[],J=u.getIterator(tr.Wrap);let se=J.getNext();for(;se;)se.name!==o.name&&K.push(se),se=J.getNext();return K.push(o),Lu(K,R.getCompare())}return nl}{const K=u.get(o.name);let J=y;return K&&(J=J.remove(new tr(o.name,K))),J.insert(o,o.node)}});return new In(h,this.indexSet_)}removeFromIndexes(o,u){const h=(0,re.UI)(this.indexes_,y=>{if(y===nl)return y;{const C=u.get(o.name);return C?y.remove(new tr(o.name,C)):y}});return new In(h,this.indexSet_)}}let rc,xn=(()=>{class l{constructor(u,h,y){this.children_=u,this.priorityNode_=h,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&fr(this.priorityNode_),this.children_.isEmpty()&&(0,re.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rc||(rc=new l(new Ls(tl),null,In.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rc}updatePriority(u){return this.children_.isEmpty()?this:new l(this.children_,u,this.indexMap_)}getImmediateChild(u){if(".priority"===u)return this.getPriority();{const h=this.children_.get(u);return null===h?rc:h}}getChild(u){const h=Bn(u);return null===h?this:this.getImmediateChild(h).getChild(ir(u))}hasChild(u){return null!==this.children_.get(u)}updateImmediateChild(u,h){if((0,re.hu)(h,"We should always be passing snapshot nodes"),".priority"===u)return this.updatePriority(h);{const y=new tr(u,h);let C,R;h.isEmpty()?(C=this.children_.remove(u),R=this.indexMap_.removeFromIndexes(y,this.children_)):(C=this.children_.insert(u,h),R=this.indexMap_.addToIndexes(y,this.children_));const K=C.isEmpty()?rc:this.priorityNode_;return new l(C,K,R)}}updateChild(u,h){const y=Bn(u);if(null===y)return h;{(0,re.hu)(".priority"!==Bn(u)||1===Xu(u),".priority must be the last token in a path");const C=this.getImmediateChild(y).updateChild(ir(u),h);return this.updateImmediateChild(y,C)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(u){if(this.isEmpty())return null;const h={};let y=0,C=0,R=!0;if(this.forEachChild(nr,(K,J)=>{h[K]=J.val(u),y++,R&&l.INTEGER_REGEXP_.test(K)?C=Math.max(C,Number(K)):R=!1}),!u&&R&&C<2*y){const K=[];for(const J in h)K[J]=h[J];return K}return u&&!this.getPriority().isEmpty()&&(h[".priority"]=this.getPriority().val()),h}hash(){if(null===this.lazyHash_){let u="";this.getPriority().isEmpty()||(u+="priority:"+Xi(this.getPriority().val())+":"),this.forEachChild(nr,(h,y)=>{const C=y.hash();""!==C&&(u+=":"+h+":"+C)}),this.lazyHash_=""===u?"":Ad(u)}return this.lazyHash_}getPredecessorChildName(u,h,y){const C=this.resolveIndex_(y);if(C){const R=C.getPredecessorKey(new tr(u,h));return R?R.name:null}return this.children_.getPredecessorKey(u)}getFirstChildName(u){const h=this.resolveIndex_(u);if(h){const y=h.minKey();return y&&y.name}return this.children_.minKey()}getFirstChild(u){const h=this.getFirstChildName(u);return h?new tr(h,this.children_.get(h)):null}getLastChildName(u){const h=this.resolveIndex_(u);if(h){const y=h.maxKey();return y&&y.name}return this.children_.maxKey()}getLastChild(u){const h=this.getLastChildName(u);return h?new tr(h,this.children_.get(h)):null}forEachChild(u,h){const y=this.resolveIndex_(u);return y?y.inorderTraversal(C=>h(C.name,C.node)):this.children_.inorderTraversal(h)}getIterator(u){return this.getIteratorFrom(u.minPost(),u)}getIteratorFrom(u,h){const y=this.resolveIndex_(h);if(y)return y.getIteratorFrom(u,C=>C);{const C=this.children_.getIteratorFrom(u.name,tr.Wrap);let R=C.peek();for(;null!=R&&h.compare(R,u)<0;)C.getNext(),R=C.peek();return C}}getReverseIterator(u){return this.getReverseIteratorFrom(u.maxPost(),u)}getReverseIteratorFrom(u,h){const y=this.resolveIndex_(h);if(y)return y.getReverseIteratorFrom(u,C=>C);{const C=this.children_.getReverseIteratorFrom(u.name,tr.Wrap);let R=C.peek();for(;null!=R&&h.compare(R,u)>0;)C.getNext(),R=C.peek();return C}}compareTo(u){return this.isEmpty()?u.isEmpty()?0:-1:u.isLeafNode()||u.isEmpty()?1:u===fu?-1:0}withIndex(u){if(u===Xa||this.indexMap_.hasIndex(u))return this;{const h=this.indexMap_.addIndex(u,this.children_);return new l(this.children_,this.priorityNode_,h)}}isIndexed(u){return u===Xa||this.indexMap_.hasIndex(u)}equals(u){if(u===this)return!0;if(u.isLeafNode())return!1;{const h=u;if(this.getPriority().equals(h.getPriority())){if(this.children_.count()===h.children_.count()){const y=this.getIterator(nr),C=h.getIterator(nr);let R=y.getNext(),K=C.getNext();for(;R&&K;){if(R.name!==K.name||!R.node.equals(K.node))return!1;R=y.getNext(),K=C.getNext()}return null===R&&null===K}return!1}return!1}}resolveIndex_(u){return u===Xa?null:this.indexMap_.get(u.toString())}}return l.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,l})();const fu=new class na extends xn{constructor(){super(new Ls(tl),xn.EMPTY_NODE,In.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return xn.EMPTY_NODE}isEmpty(){return!1}};function oi(l,o=null){if(null===l)return xn.EMPTY_NODE;if("object"==typeof l&&".priority"in l&&(o=l[".priority"]),(0,re.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof l&&".value"in l&&null!==l[".value"]&&(l=l[".value"]),"object"!=typeof l||".sv"in l)return new $i(l,oi(o));if(l instanceof Array){let u=xn.EMPTY_NODE;return vs(l,(h,y)=>{if((0,re.r3)(l,h)&&"."!==h.substring(0,1)){const C=oi(y);(C.isLeafNode()||!C.isEmpty())&&(u=u.updateImmediateChild(h,C))}}),u.updatePriority(oi(o))}{const u=[];let h=!1;if(vs(l,(R,K)=>{if("."!==R.substring(0,1)){const J=oi(K);J.isEmpty()||(h=h||!J.getPriority().isEmpty(),u.push(new tr(R,J)))}}),0===u.length)return xn.EMPTY_NODE;const C=Lu(u,Hp,R=>R.name,tl);if(h){const R=Lu(u,nr.getCompare());return new xn(C,oi(o),new In({".priority":R},{".priority":nr}))}return new xn(C,oi(o),In.Default)}}Object.defineProperties(tr,{MIN:{value:new tr(Ps,xn.EMPTY_NODE)},MAX:{value:new tr(cs,fu)}}),kd.__EMPTY_NODE=xn.EMPTY_NODE,$i.__childrenNodeConstructor=xn,function Vo(l){Fu=l}(fu),function Fd(l){Gc=l}(fu),function ta(l){Uo=l}(oi);class Vd extends Od{constructor(o){super(),this.indexPath_=o,(0,re.hu)(!Wn(o)&&".priority"!==Bn(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,u){const h=this.extractChild(o.node),y=this.extractChild(u.node),C=h.compareTo(y);return 0===C?za(o.name,u.name):C}makePost(o,u){const h=oi(o),y=xn.EMPTY_NODE.updateChild(this.indexPath_,h);return new tr(u,y)}maxPost(){const o=xn.EMPTY_NODE.updateChild(this.indexPath_,fu);return new tr(cs,o)}toString(){return Ma(this.indexPath_,0).join("/")}}const vo=new class Mh extends Od{compare(o,u){const h=o.node.compareTo(u.node);return 0===h?za(o.name,u.name):h}isDefinedOn(o){return!0}indexedValueChanged(o,u){return!o.equals(u)}minPost(){return tr.MIN}maxPost(){return tr.MAX}makePost(o,u){const h=oi(o);return new tr(u,h)}toString(){return".value"}},Vu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",zc=function(){let l=0;const o=[];return function(u){const h=u===l;let y;l=u;const C=new Array(8);for(y=7;y>=0;y--)C[y]=Vu.charAt(u%64),u=Math.floor(u/64);(0,re.hu)(0===u,"Cannot push at time == 0");let R=C.join("");if(h){for(y=11;y>=0&&63===o[y];y--)o[y]=0;o[y]++}else for(y=0;y<12;y++)o[y]=Math.floor(64*Math.random());for(y=0;y<12;y++)R+=Vu.charAt(o[y]);return(0,re.hu)(20===R.length,"nextPushId: Length should be 20."),R}}(),Sl=function(l){if(l===""+Au)return"-";const o=ks(l);if(null!=o)return""+(o+1);const u=new Array(l.length);for(let R=0;R<u.length;R++)u[R]=l.charAt(R);if(u.length<786)return u.push("-"),u.join("");let h=u.length-1;for(;h>=0&&"z"===u[h];)h--;if(-1===h)return cs;const C=Vu.charAt(Vu.indexOf(u[h])+1);return u[h]=C,u.slice(0,h+1).join("")},Ud=function(l){if(l===""+er)return Ps;const o=ks(l);if(null!=o)return""+(o-1);const u=new Array(l.length);for(let h=0;h<u.length;h++)u[h]=l.charAt(h);return"-"===u[u.length-1]?1===u.length?""+Au:(delete u[u.length-1],u.join("")):(u[u.length-1]=Vu.charAt(Vu.indexOf(u[u.length-1])-1),u.join("")+"z".repeat(786-u.length))};function Of(l){return{type:"value",snapshotNode:l}}function Ri(l,o){return{type:"child_added",snapshotNode:o,childName:l}}function Al(l,o){return{type:"child_removed",snapshotNode:o,childName:l}}function sc(l,o,u){return{type:"child_changed",snapshotNode:o,childName:l,oldSnap:u}}class hs{constructor(o){this.index_=o}updateChild(o,u,h,y,C,R){(0,re.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const K=o.getImmediateChild(u);return K.getChild(y).equals(h.getChild(y))&&K.isEmpty()===h.isEmpty()||(null!=R&&(h.isEmpty()?o.hasChild(u)?R.trackChildChange(Al(u,K)):(0,re.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):K.isEmpty()?R.trackChildChange(Ri(u,h)):R.trackChildChange(sc(u,h,K))),o.isLeafNode()&&h.isEmpty())?o:o.updateImmediateChild(u,h).withIndex(this.index_)}updateFullNode(o,u,h){return null!=h&&(o.isLeafNode()||o.forEachChild(nr,(y,C)=>{u.hasChild(y)||h.trackChildChange(Al(y,C))}),u.isLeafNode()||u.forEachChild(nr,(y,C)=>{if(o.hasChild(y)){const R=o.getImmediateChild(y);R.equals(C)||h.trackChildChange(sc(y,C,R))}else h.trackChildChange(Ri(y,C))})),u.withIndex(this.index_)}updatePriority(o,u){return o.isEmpty()?xn.EMPTY_NODE:o.updatePriority(u)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class E{constructor(o){this.indexedFilter_=new hs(o.getIndex()),this.index_=o.getIndex(),this.startPost_=E.getStartPost_(o),this.endPost_=E.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,u,h,y,C,R){return this.matches(new tr(u,h))||(h=xn.EMPTY_NODE),this.indexedFilter_.updateChild(o,u,h,y,C,R)}updateFullNode(o,u,h){u.isLeafNode()&&(u=xn.EMPTY_NODE);let y=u.withIndex(this.index_);y=y.updatePriority(xn.EMPTY_NODE);const C=this;return u.forEachChild(nr,(R,K)=>{C.matches(new tr(R,K))||(y=y.updateImmediateChild(R,xn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,y,h)}updatePriority(o,u){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const u=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),u)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const u=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),u)}return o.getIndex().maxPost()}}class p{constructor(o){this.rangedFilter_=new E(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,u,h,y,C,R){return this.rangedFilter_.matches(new tr(u,h))||(h=xn.EMPTY_NODE),o.getImmediateChild(u).equals(h)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,u,h,y,C,R):this.fullLimitUpdateChild_(o,u,h,C,R)}updateFullNode(o,u,h){let y;if(u.isLeafNode()||u.isEmpty())y=xn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){let C;y=xn.EMPTY_NODE.withIndex(this.index_),C=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let R=0;for(;C.hasNext()&&R<this.limit_;){const K=C.getNext();let J;if(J=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),K)<=0:this.index_.compare(K,this.rangedFilter_.getEndPost())<=0,!J)break;y=y.updateImmediateChild(K.name,K.node),R++}}else{let C,R,K,J;if(y=u.withIndex(this.index_),y=y.updatePriority(xn.EMPTY_NODE),this.reverse_){J=y.getReverseIterator(this.index_),C=this.rangedFilter_.getEndPost(),R=this.rangedFilter_.getStartPost();const Be=this.index_.getCompare();K=(Xe,xt)=>Be(xt,Xe)}else J=y.getIterator(this.index_),C=this.rangedFilter_.getStartPost(),R=this.rangedFilter_.getEndPost(),K=this.index_.getCompare();let se=0,Re=!1;for(;J.hasNext();){const Be=J.getNext();!Re&&K(C,Be)<=0&&(Re=!0),Re&&se<this.limit_&&K(Be,R)<=0?se++:y=y.updateImmediateChild(Be.name,xn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,y,h)}updatePriority(o,u){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,u,h,y,C){let R;if(this.reverse_){const Be=this.index_.getCompare();R=(Xe,xt)=>Be(xt,Xe)}else R=this.index_.getCompare();const K=o;(0,re.hu)(K.numChildren()===this.limit_,"");const J=new tr(u,h),se=this.reverse_?K.getFirstChild(this.index_):K.getLastChild(this.index_),Re=this.rangedFilter_.matches(J);if(K.hasChild(u)){const Be=K.getImmediateChild(u);let Xe=y.getChildAfterChild(this.index_,se,this.reverse_);for(;null!=Xe&&(Xe.name===u||K.hasChild(Xe.name));)Xe=y.getChildAfterChild(this.index_,Xe,this.reverse_);const xt=null==Xe?1:R(Xe,J);if(Re&&!h.isEmpty()&&xt>=0)return null!=C&&C.trackChildChange(sc(u,h,Be)),K.updateImmediateChild(u,h);{null!=C&&C.trackChildChange(Al(u,Be));const jn=K.updateImmediateChild(u,xn.EMPTY_NODE);return null!=Xe&&this.rangedFilter_.matches(Xe)?(null!=C&&C.trackChildChange(Ri(Xe.name,Xe.node)),jn.updateImmediateChild(Xe.name,Xe.node)):jn}}return h.isEmpty()?o:Re&&R(se,J)>=0?(null!=C&&(C.trackChildChange(Al(se.name,se.node)),C.trackChildChange(Ri(u,h))),K.updateImmediateChild(u,h).updateImmediateChild(se.name,xn.EMPTY_NODE)):o}}class m{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,re.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ps}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,re.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:cs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,re.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nr}copy(){const o=new m;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function Ce(l,o,u){const h=l.copy();return h.startSet_=!0,void 0===o&&(o=null),h.indexStartValue_=o,null!=u?(h.startNameSet_=!0,h.indexStartName_=u):(h.startNameSet_=!1,h.indexStartName_=""),h}function Dt(l,o,u){const h=l.copy();return h.endSet_=!0,void 0===o&&(o=null),h.indexEndValue_=o,void 0!==u?(h.endNameSet_=!0,h.indexEndName_=u):(h.endNameSet_=!1,h.indexEndName_=""),h}function gn(l,o){const u=l.copy();return u.index_=o,u}function ln(l){const o={};if(l.isDefault())return o;let u;return l.index_===nr?u="$priority":l.index_===vo?u="$value":l.index_===Xa?u="$key":((0,re.hu)(l.index_ instanceof Vd,"Unrecognized index type!"),u=l.index_.toString()),o.orderBy=(0,re.Pz)(u),l.startSet_&&(o.startAt=(0,re.Pz)(l.indexStartValue_),l.startNameSet_&&(o.startAt+=","+(0,re.Pz)(l.indexStartName_))),l.endSet_&&(o.endAt=(0,re.Pz)(l.indexEndValue_),l.endNameSet_&&(o.endAt+=","+(0,re.Pz)(l.indexEndName_))),l.limitSet_&&(l.isViewFromLeft()?o.limitToFirst=l.limit_:o.limitToLast=l.limit_),o}function es(l){const o={};if(l.startSet_&&(o.sp=l.indexStartValue_,l.startNameSet_&&(o.sn=l.indexStartName_)),l.endSet_&&(o.ep=l.indexEndValue_,l.endNameSet_&&(o.en=l.indexEndName_)),l.limitSet_){o.l=l.limit_;let u=l.viewFrom_;""===u&&(u=l.isViewFromLeft()?"l":"r"),o.vf=u}return l.index_!==nr&&(o.i=l.index_.toString()),o}class ao extends $p{constructor(o,u,h,y){super(),this.repoInfo_=o,this.onDataUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=y,this.log_=ys("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,u){return void 0!==u?"tag$"+u:((0,re.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,u,h,y){const C=o._path.toString();this.log_("Listen called for "+C+" "+o._queryIdentifier);const R=ao.getListenId_(o,h),K={};this.listens_[R]=K;const J=ln(o._queryParams);this.restRequest_(C+".json",J,(se,Re)=>{let Be=Re;if(404===se&&(Be=null,se=null),null===se&&this.onDataUpdate_(C,Be,!1,h),(0,re.DV)(this.listens_,R)===K){let Xe;Xe=se?401===se?"permission_denied":"rest_error:"+se:"ok",y(Xe,null)}})}unlisten(o,u){const h=ao.getListenId_(o,u);delete this.listens_[h]}get(o){const u=ln(o._queryParams),h=o._path.toString(),y=new re.BH;return this.restRequest_(h+".json",u,(C,R)=>{let K=R;404===C&&(K=null,C=null),null===C?(this.onDataUpdate_(h,K,!1,null),y.resolve(K)):y.reject(new Error(K))}),y.promise}refreshAuthToken(o){}restRequest_(o,u={},h){return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([y,C])=>{y&&y.accessToken&&(u.auth=y.accessToken),C&&C.token&&(u.ac=C.token);const R=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,re.xO)(u);this.log_("Sending REST request for "+R);const K=new XMLHttpRequest;K.onreadystatechange=()=>{if(h&&4===K.readyState){this.log_("REST Response for "+R+" received. status:",K.status,"response:",K.responseText);let J=null;if(K.status>=200&&K.status<300){try{J=(0,re.cI)(K.responseText)}catch(se){Dr("Failed to parse JSON response for "+R+": "+K.responseText)}h(null,J)}else 401!==K.status&&404!==K.status&&Dr("Got unsuccessful REST response for "+R+" Status: "+K.status),h(K.status);h=null}},K.open("GET",R,!0),K.send()})}}class Kc{constructor(){this.rootNode_=xn.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,u){this.rootNode_=this.rootNode_.updateChild(o,u)}}function qc(){return{value:null,children:new Map}}function Ea(l,o,u){if(Wn(o))l.value=u,l.children.clear();else if(null!==l.value)l.value=l.value.updateChild(o,u);else{const h=Bn(o);l.children.has(h)||l.children.set(h,qc()),Ea(l.children.get(h),o=ir(o),u)}}function oc(l,o){if(Wn(o))return l.value=null,l.children.clear(),!0;if(null!==l.value){if(l.value.isLeafNode())return!1;{const u=l.value;return l.value=null,u.forEachChild(nr,(h,y)=>{Ea(l,new Gn(h),y)}),oc(l,o)}}if(l.children.size>0){const u=Bn(o);return o=ir(o),l.children.has(u)&&oc(l.children.get(u),o)&&l.children.delete(u),0===l.children.size}return!0}function mu(l,o,u){null!==l.value?u(o,l.value):function rl(l,o){l.children.forEach((u,h)=>{o(h,u)})}(l,(h,y)=>{mu(y,new Gn(o.toString()+"/"+h),u)})}class Bd{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),u=Object.assign({},o);return this.last_&&vs(this.last_,(h,y)=>{u[h]=u[h]-y}),this.last_=o,u}}class jo{constructor(o,u){this.server_=u,this.statsToReport_={},this.statsListener_=new Bd(o);const h=1e4+2e4*Math.random();Fr(this.reportStats_.bind(this),Math.floor(h))}reportStats_(){const o=this.statsListener_.get(),u={};let h=!1;vs(o,(y,C)=>{C>0&&(0,re.r3)(this.statsToReport_,y)&&(u[y]=C,h=!0)}),h&&this.server_.reportStats(u),Fr(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ra=(()=>{return(l=ra||(ra={}))[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ra;var l})();function $d(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class ac{constructor(o,u,h){this.path=o,this.affectedTree=u,this.revert=h,this.type=ra.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(Wn(this.path)){if(null!=this.affectedTree.value)return(0,re.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const u=this.affectedTree.subtree(new Gn(o));return new ac(Tr(),u,this.revert)}}return(0,re.hu)(Bn(this.path)===o,"operationForChild called for unrelated child."),new ac(ir(this.path),this.affectedTree,this.revert)}}class uc{constructor(o,u){this.source=o,this.path=u,this.type=ra.LISTEN_COMPLETE}operationForChild(o){return Wn(this.path)?new uc(this.source,Tr()):new uc(this.source,ir(this.path))}}class Zc{constructor(o,u,h){this.source=o,this.path=u,this.snap=h,this.type=ra.OVERWRITE}operationForChild(o){return Wn(this.path)?new Zc(this.source,Tr(),this.snap.getImmediateChild(o)):new Zc(this.source,ir(this.path),this.snap)}}class Hd{constructor(o,u,h){this.source=o,this.path=u,this.children=h,this.type=ra.MERGE}operationForChild(o){if(Wn(this.path)){const u=this.children.subtree(new Gn(o));return u.isEmpty()?null:u.value?new Zc(this.source,Tr(),u.value):new Hd(this.source,Tr(),u)}return(0,re.hu)(Bn(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Hd(this.source,ir(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class xl{constructor(o,u,h){this.node_=o,this.fullyInitialized_=u,this.filtered_=h}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(Wn(o))return this.isFullyInitialized()&&!this.filtered_;const u=Bn(o);return this.isCompleteForChild(u)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Kg{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function Gd(l,o,u,h,y,C){const R=h.filter(K=>K.type===u);R.sort((K,J)=>function Xm(l,o,u){if(null==o.childName||null==u.childName)throw(0,re.g5)("Should only compare child_ events.");const h=new tr(o.childName,o.snapshotNode),y=new tr(u.childName,u.snapshotNode);return l.index_.compare(h,y)}(l,K,J)),R.forEach(K=>{const J=function qg(l,o,u){return"value"===o.type||"child_removed"===o.type||(o.prevName=u.getPredecessorChildName(o.childName,o.snapshotNode,l.index_)),o}(l,K,C);y.forEach(se=>{se.respondsTo(K.type)&&o.push(se.createEvent(J,l.query_))})})}function Qc(l,o){return{eventCache:l,serverCache:o}}function Fh(l,o,u,h){return Qc(new xl(o,u,h),l.serverCache)}function Gp(l,o,u,h){return Qc(l.eventCache,new xl(o,u,h))}function Lh(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function lc(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let Vh;class Jr{constructor(o,u=(()=>(Vh||(Vh=new Ls(Zu)),Vh))()){this.value=o,this.children=u}static fromObject(o){let u=new Jr(null);return vs(o,(h,y)=>{u=u.set(new Gn(h),y)}),u}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,u){if(null!=this.value&&u(this.value))return{path:Tr(),value:this.value};if(Wn(o))return null;{const h=Bn(o),y=this.children.get(h);if(null!==y){const C=y.findRootMostMatchingPathAndValue(ir(o),u);return null!=C?{path:Qr(new Gn(h),C.path),value:C.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(Wn(o))return this;{const u=Bn(o),h=this.children.get(u);return null!==h?h.subtree(ir(o)):new Jr(null)}}set(o,u){if(Wn(o))return new Jr(u,this.children);{const h=Bn(o),C=(this.children.get(h)||new Jr(null)).set(ir(o),u),R=this.children.insert(h,C);return new Jr(this.value,R)}}remove(o){if(Wn(o))return this.children.isEmpty()?new Jr(null):new Jr(null,this.children);{const u=Bn(o),h=this.children.get(u);if(h){const y=h.remove(ir(o));let C;return C=y.isEmpty()?this.children.remove(u):this.children.insert(u,y),null===this.value&&C.isEmpty()?new Jr(null):new Jr(this.value,C)}return this}}get(o){if(Wn(o))return this.value;{const u=Bn(o),h=this.children.get(u);return h?h.get(ir(o)):null}}setTree(o,u){if(Wn(o))return u;{const h=Bn(o),C=(this.children.get(h)||new Jr(null)).setTree(ir(o),u);let R;return R=C.isEmpty()?this.children.remove(h):this.children.insert(h,C),new Jr(this.value,R)}}fold(o){return this.fold_(Tr(),o)}fold_(o,u){const h={};return this.children.inorderTraversal((y,C)=>{h[y]=C.fold_(Qr(o,y),u)}),u(o,this.value,h)}findOnPath(o,u){return this.findOnPath_(o,Tr(),u)}findOnPath_(o,u,h){const y=!!this.value&&h(u,this.value);if(y)return y;if(Wn(o))return null;{const C=Bn(o),R=this.children.get(C);return R?R.findOnPath_(ir(o),Qr(u,C),h):null}}foreachOnPath(o,u){return this.foreachOnPath_(o,Tr(),u)}foreachOnPath_(o,u,h){if(Wn(o))return this;{this.value&&h(u,this.value);const y=Bn(o),C=this.children.get(y);return C?C.foreachOnPath_(ir(o),Qr(u,y),h):new Jr(null)}}foreach(o){this.foreach_(Tr(),o)}foreach_(o,u){this.children.inorderTraversal((h,y)=>{y.foreach_(Qr(o,h),u)}),this.value&&u(o,this.value)}foreachChild(o){this.children.inorderTraversal((u,h)=>{h.value&&o(u,h.value)})}}class Na{constructor(o){this.writeTree_=o}static empty(){return new Na(new Jr(null))}}function Jc(l,o,u){if(Wn(o))return new Na(new Jr(u));{const h=l.writeTree_.findRootMostValueAndPath(o);if(null!=h){const y=h.path;let C=h.value;const R=Lo(y,o);return C=C.updateChild(R,u),new Na(l.writeTree_.set(y,C))}{const y=new Jr(u),C=l.writeTree_.setTree(o,y);return new Na(C)}}}function Wd(l,o,u){let h=l;return vs(u,(y,C)=>{h=Jc(h,Qr(o,y),C)}),h}function Wp(l,o){if(Wn(o))return Na.empty();{const u=l.writeTree_.setTree(o,new Jr(null));return new Na(u)}}function Xc(l,o){return null!=yi(l,o)}function yi(l,o){const u=l.writeTree_.findRootMostValueAndPath(o);return null!=u?l.writeTree_.get(u.path).getChild(Lo(u.path,o)):null}function kf(l){const o=[],u=l.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(nr,(h,y)=>{o.push(new tr(h,y))}):l.writeTree_.children.inorderTraversal((h,y)=>{null!=y.value&&o.push(new tr(h,y.value))}),o}function Uu(l,o){if(Wn(o))return l;{const u=yi(l,o);return new Na(null!=u?new Jr(u):l.writeTree_.subtree(o))}}function Uh(l){return l.writeTree_.isEmpty()}function tu(l,o){return Ff(Tr(),l.writeTree_,o)}function Ff(l,o,u){if(null!=o.value)return u.updateChild(l,o.value);{let h=null;return o.children.inorderTraversal((y,C)=>{".priority"===y?((0,re.hu)(null!==C.value,"Priority writes must always be leaf nodes"),h=C.value):u=Ff(Qr(l,y),C,u)}),!u.getChild(l).isEmpty()&&null!==h&&(u=u.updateChild(Qr(l,".priority"),h)),u}}function zd(l,o){return Ml(o,l)}function dc(l,o){if(l.snap)return Xo(l.path,o);for(const u in l.children)if(l.children.hasOwnProperty(u)&&Xo(Qr(l.path,u),o))return!0;return!1}function Yg(l){return l.visible}function Pa(l,o,u){let h=Na.empty();for(let y=0;y<l.length;++y){const C=l[y];if(o(C)){const R=C.path;let K;if(C.snap)Xo(u,R)?(K=Lo(u,R),h=Jc(h,K,C.snap)):Xo(R,u)&&(K=Lo(R,u),h=Jc(h,Tr(),C.snap.getChild(K)));else{if(!C.children)throw(0,re.g5)("WriteRecord should have .snap or .children");if(Xo(u,R))K=Lo(u,R),h=Wd(h,K,C.children);else if(Xo(R,u))if(K=Lo(R,u),Wn(K))h=Wd(h,Tr(),C.children);else{const J=(0,re.DV)(C.children,Bn(K));if(J){const se=J.getChild(ir(K));h=Jc(h,Tr(),se)}}}}}return h}function Lf(l,o,u,h,y){if(h||y){const C=Uu(l.visibleWrites,o);return!y&&Uh(C)?u:y||null!=u||Xc(C,Tr())?tu(Pa(l.allWrites,function(se){return(se.visible||y)&&(!h||!~h.indexOf(se.writeId))&&(Xo(se.path,o)||Xo(o,se.path))},o),u||xn.EMPTY_NODE):null}{const C=yi(l.visibleWrites,o);if(null!=C)return C;{const R=Uu(l.visibleWrites,o);return Uh(R)?u:null!=u||Xc(R,Tr())?tu(R,u||xn.EMPTY_NODE):null}}}function hc(l,o,u,h){return Lf(l.writeTree,l.treePath,o,u,h)}function Rl(l,o){return function qp(l,o,u){let h=xn.EMPTY_NODE;const y=yi(l.visibleWrites,o);if(y)return y.isLeafNode()||y.forEachChild(nr,(C,R)=>{h=h.updateImmediateChild(C,R)}),h;if(u){const C=Uu(l.visibleWrites,o);return u.forEachChild(nr,(R,K)=>{const J=tu(Uu(C,new Gn(R)),K);h=h.updateImmediateChild(R,J)}),kf(C).forEach(R=>{h=h.updateImmediateChild(R.name,R.node)}),h}return kf(Uu(l.visibleWrites,o)).forEach(R=>{h=h.updateImmediateChild(R.name,R.node)}),h}(l.writeTree,l.treePath,o)}function em(l,o,u,h){return function Qg(l,o,u,h,y){(0,re.hu)(h||y,"Either existingEventSnap or existingServerSnap must exist");const C=Qr(o,u);if(Xc(l.visibleWrites,C))return null;{const R=Uu(l.visibleWrites,C);return Uh(R)?y.getChild(u):tu(R,y.getChild(u))}}(l.writeTree,l.treePath,o,u,h)}function Rn(l,o){return function Jg(l,o){return yi(l.visibleWrites,o)}(l.writeTree,Qr(l.treePath,o))}function Vf(l,o,u){return function e_(l,o,u,h){const y=Qr(o,u),C=yi(l.visibleWrites,y);return null!=C?C:h.isCompleteForChild(u)?tu(Uu(l.visibleWrites,y),h.getNode().getImmediateChild(u)):null}(l.writeTree,l.treePath,o,u)}function Zp(l,o){return Ml(Qr(l.treePath,o),l.writeTree)}function Ml(l,o){return{treePath:l,writeTree:o}}class $o{constructor(){this.changeMap=new Map}trackChildChange(o){const u=o.type,h=o.childName;(0,re.hu)("child_added"===u||"child_changed"===u||"child_removed"===u,"Only child changes supported for tracking"),(0,re.hu)(".priority"!==h,"Only non-priority child changes can be tracked.");const y=this.changeMap.get(h);if(y){const C=y.type;if("child_added"===u&&"child_removed"===C)this.changeMap.set(h,sc(h,o.snapshotNode,y.snapshotNode));else if("child_removed"===u&&"child_added"===C)this.changeMap.delete(h);else if("child_removed"===u&&"child_changed"===C)this.changeMap.set(h,Al(h,y.oldSnap));else if("child_changed"===u&&"child_added"===C)this.changeMap.set(h,Ri(h,o.snapshotNode));else{if("child_changed"!==u||"child_changed"!==C)throw(0,re.g5)("Illegal combination of changes: "+o+" occurred after "+y);this.changeMap.set(h,sc(h,o.snapshotNode,y.oldSnap))}}else this.changeMap.set(h,o)}getChanges(){return Array.from(this.changeMap.values())}}const Yp=new class fc{getCompleteChild(o){return null}getChildAfterChild(o,u,h){return null}};class $h{constructor(o,u,h=null){this.writes_=o,this.viewCache_=u,this.optCompleteServerCache_=h}getCompleteChild(o){const u=this.viewCache_.eventCache;if(u.isCompleteForChild(o))return u.getNode().getImmediateChild(o);{const h=null!=this.optCompleteServerCache_?new xl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Vf(this.writes_,o,h)}}getChildAfterChild(o,u,h){const y=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:lc(this.viewCache_),C=function tm(l,o,u,h,y,C){return function Xg(l,o,u,h,y,C,R){let K;const J=Uu(l.visibleWrites,o),se=yi(J,Tr());if(null!=se)K=se;else{if(null==u)return[];K=tu(J,u)}if(K=K.withIndex(R),K.isEmpty()||K.isLeafNode())return[];{const Re=[],Be=R.getCompare(),Xe=C?K.getReverseIteratorFrom(h,R):K.getIteratorFrom(h,R);let xt=Xe.getNext();for(;xt&&Re.length<y;)0!==Be(xt,h)&&Re.push(xt),xt=Xe.getNext();return Re}}(l.writeTree,l.treePath,o,u,h,y,C)}(this.writes_,y,u,1,h,o);return 0===C.length?null:C[0]}}function nm(l,o,u,h,y,C){const R=o.eventCache;if(null!=Rn(h,u))return o;{let K,J;if(Wn(u))if((0,re.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const se=lc(o),Be=Rl(h,se instanceof xn?se:xn.EMPTY_NODE);K=l.filter.updateFullNode(o.eventCache.getNode(),Be,C)}else{const se=hc(h,lc(o));K=l.filter.updateFullNode(o.eventCache.getNode(),se,C)}else{const se=Bn(u);if(".priority"===se){(0,re.hu)(1===Xu(u),"Can't have a priority with additional path components");const Re=R.getNode();J=o.serverCache.getNode();const Be=em(h,u,Re,J);K=null!=Be?l.filter.updatePriority(Re,Be):R.getNode()}else{const Re=ir(u);let Be;if(R.isCompleteForChild(se)){J=o.serverCache.getNode();const Xe=em(h,u,R.getNode(),J);Be=null!=Xe?R.getNode().getImmediateChild(se).updateChild(Re,Xe):R.getNode().getImmediateChild(se)}else Be=Vf(h,se,o.serverCache);K=null!=Be?l.filter.updateChild(R.getNode(),se,Be,Re,y,C):R.getNode()}}return Fh(o,K,R.isFullyInitialized()||Wn(u),l.filter.filtersNodes())}}function Pl(l,o,u,h,y,C,R,K){const J=o.serverCache;let se;const Re=R?l.filter:l.filter.getIndexedFilter();if(Wn(u))se=Re.updateFullNode(J.getNode(),h,null);else if(Re.filtersNodes()&&!J.isFiltered()){const xt=J.getNode().updateChild(u,h);se=Re.updateFullNode(J.getNode(),xt,null)}else{const xt=Bn(u);if(!J.isCompleteForPath(u)&&Xu(u)>1)return o;const Vt=ir(u),sr=J.getNode().getImmediateChild(xt).updateChild(Vt,h);se=".priority"===xt?Re.updatePriority(J.getNode(),sr):Re.updateChild(J.getNode(),xt,sr,Vt,Yp,null)}const Be=Gp(o,se,J.isFullyInitialized()||Wn(u),Re.filtersNodes());return nm(l,Be,u,y,new $h(y,Be,C),K)}function Wh(l,o,u,h,y,C,R){const K=o.eventCache;let J,se;const Re=new $h(y,o,C);if(Wn(u))se=l.filter.updateFullNode(o.eventCache.getNode(),h,R),J=Fh(o,se,!0,l.filter.filtersNodes());else{const Be=Bn(u);if(".priority"===Be)se=l.filter.updatePriority(o.eventCache.getNode(),h),J=Fh(o,se,K.isFullyInitialized(),K.isFiltered());else{const Xe=ir(u),xt=K.getNode().getImmediateChild(Be);let Vt;if(Wn(Xe))Vt=h;else{const jn=Re.getCompleteChild(Be);Vt=null!=jn?".priority"===Jl(Xe)&&jn.getChild(Ah(Xe)).isEmpty()?jn:jn.updateChild(Xe,h):xn.EMPTY_NODE}J=xt.equals(Vt)?o:Fh(o,l.filter.updateChild(K.getNode(),Be,Vt,Xe,Re,R),K.isFullyInitialized(),l.filter.filtersNodes())}}return J}function Ol(l,o){return l.eventCache.isCompleteForChild(o)}function Kh(l,o,u){return u.foreach((h,y)=>{o=o.updateChild(h,y)}),o}function wo(l,o,u,h,y,C,R,K){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let se,J=o;se=Wn(u)?h:new Jr(null).setTree(u,h);const Re=o.serverCache.getNode();return se.children.inorderTraversal((Be,Xe)=>{if(Re.hasChild(Be)){const Vt=Kh(0,o.serverCache.getNode().getImmediateChild(Be),Xe);J=Pl(l,J,new Gn(Be),Vt,y,C,R,K)}}),se.children.inorderTraversal((Be,Xe)=>{const xt=!o.serverCache.isCompleteForChild(Be)&&void 0===Xe.value;if(!Re.hasChild(Be)&&!xt){const jn=Kh(0,o.serverCache.getNode().getImmediateChild(Be),Xe);J=Pl(l,J,new Gn(Be),jn,y,C,R,K)}}),J}class rm{constructor(o,u){this.query_=o,this.eventRegistrations_=[];const h=this.query_._queryParams,y=new hs(h.getIndex()),C=function T(l){return l.loadsAllData()?new hs(l.getIndex()):l.hasLimit()?new p(l):new E(l)}(h);this.processor_=function Nl(l){return{filter:l}}(C);const R=u.serverCache,K=u.eventCache,J=y.updateFullNode(xn.EMPTY_NODE,R.getNode(),null),se=C.updateFullNode(xn.EMPTY_NODE,K.getNode(),null),Re=new xl(J,R.isFullyInitialized(),y.filtersNodes()),Be=new xl(se,K.isFullyInitialized(),C.filtersNodes());this.viewCache_=Qc(Be,Re),this.eventGenerator_=new Kg(this.query_)}get query(){return this.query_}}function Xp(l,o){const u=lc(l.viewCache_);return u&&(l.query._queryParams.loadsAllData()||!Wn(o)&&!u.getImmediateChild(Bn(o)).isEmpty())?u.getChild(o):null}function td(l){return 0===l.eventRegistrations_.length}function qd(l,o,u){const h=[];if(u){(0,re.hu)(null==o,"A cancel should cancel all event registrations.");const y=l.query._path;l.eventRegistrations_.forEach(C=>{const R=C.createCancelEvent(u,y);R&&h.push(R)})}if(o){let y=[];for(let C=0;C<l.eventRegistrations_.length;++C){const R=l.eventRegistrations_[C];if(R.matches(o)){if(o.hasAnyCallback()){y=y.concat(l.eventRegistrations_.slice(C+1));break}}else y.push(R)}l.eventRegistrations_=y}else l.eventRegistrations_=[];return h}function jf(l,o,u,h){o.type===ra.MERGE&&null!==o.source.queryId&&((0,re.hu)(lc(l.viewCache_),"We should always have a full cache before handling merges"),(0,re.hu)(Lh(l.viewCache_),"Missing event cache, even though we have a server cache"));const y=l.viewCache_,C=function Gh(l,o,u,h,y){const C=new $o;let R,K;if(u.type===ra.OVERWRITE){const se=u;se.source.fromUser?R=Wh(l,o,se.path,se.snap,h,y,C):((0,re.hu)(se.source.fromServer,"Unknown source."),K=se.source.tagged||o.serverCache.isFiltered()&&!Wn(se.path),R=Pl(l,o,se.path,se.snap,h,y,K,C))}else if(u.type===ra.MERGE){const se=u;se.source.fromUser?R=function zh(l,o,u,h,y,C,R){let K=o;return h.foreach((J,se)=>{const Re=Qr(u,J);Ol(o,Bn(Re))&&(K=Wh(l,K,Re,se,y,C,R))}),h.foreach((J,se)=>{const Re=Qr(u,J);Ol(o,Bn(Re))||(K=Wh(l,K,Re,se,y,C,R))}),K}(l,o,se.path,se.children,h,y,C):((0,re.hu)(se.source.fromServer,"Unknown source."),K=se.source.tagged||o.serverCache.isFiltered(),R=wo(l,o,se.path,se.children,h,y,K,C))}else if(u.type===ra.ACK_USER_WRITE){const se=u;R=se.revert?function Bf(l,o,u,h,y,C){let R;if(null!=Rn(h,u))return o;{const K=new $h(h,o,y),J=o.eventCache.getNode();let se;if(Wn(u)||".priority"===Bn(u)){let Re;if(o.serverCache.isFullyInitialized())Re=hc(h,lc(o));else{const Be=o.serverCache.getNode();(0,re.hu)(Be instanceof xn,"serverChildren would be complete if leaf node"),Re=Rl(h,Be)}Re=Re,se=l.filter.updateFullNode(J,Re,C)}else{const Re=Bn(u);let Be=Vf(h,Re,o.serverCache);null==Be&&o.serverCache.isCompleteForChild(Re)&&(Be=J.getImmediateChild(Re)),se=null!=Be?l.filter.updateChild(J,Re,Be,ir(u),K,C):o.eventCache.getNode().hasChild(Re)?l.filter.updateChild(J,Re,xn.EMPTY_NODE,ir(u),K,C):J,se.isEmpty()&&o.serverCache.isFullyInitialized()&&(R=hc(h,lc(o)),R.isLeafNode()&&(se=l.filter.updateFullNode(se,R,C)))}return R=o.serverCache.isFullyInitialized()||null!=Rn(h,Tr()),Fh(o,se,R,l.filter.filtersNodes())}}(l,o,se.path,h,y,C):function Uf(l,o,u,h,y,C,R){if(null!=Rn(y,u))return o;const K=o.serverCache.isFiltered(),J=o.serverCache;if(null!=h.value){if(Wn(u)&&J.isFullyInitialized()||J.isCompleteForPath(u))return Pl(l,o,u,J.getNode().getChild(u),y,C,K,R);if(Wn(u)){let se=new Jr(null);return J.getNode().forEachChild(Xa,(Re,Be)=>{se=se.set(new Gn(Re),Be)}),wo(l,o,u,se,y,C,K,R)}return o}{let se=new Jr(null);return h.foreach((Re,Be)=>{const Xe=Qr(u,Re);J.isCompleteForPath(Xe)&&(se=se.set(Re,J.getNode().getChild(Xe)))}),wo(l,o,u,se,y,C,K,R)}}(l,o,se.path,se.affectedTree,h,y,C)}else{if(u.type!==ra.LISTEN_COMPLETE)throw(0,re.g5)("Unknown operation type: "+u.type);R=function Jp(l,o,u,h,y){const C=o.serverCache;return nm(l,Gp(o,C.getNode(),C.isFullyInitialized()||Wn(u),C.isFiltered()),u,h,Yp,y)}(l,o,u.path,h,C)}const J=C.getChanges();return function Qp(l,o,u){const h=o.eventCache;if(h.isFullyInitialized()){const y=h.getNode().isLeafNode()||h.getNode().isEmpty(),C=Lh(l);(u.length>0||!l.eventCache.isFullyInitialized()||y&&!h.getNode().equals(C)||!h.getNode().getPriority().equals(C.getPriority()))&&u.push(Of(Lh(o)))}}(o,R,J),{viewCache:R,changes:J}}(l.processor_,y,o,u,h);return function Hh(l,o){(0,re.hu)(o.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),(0,re.hu)(o.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}(l.processor_,C.viewCache),(0,re.hu)(C.viewCache.serverCache.isFullyInitialized()||!y.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=C.viewCache,eg(l,C.changes,C.viewCache.eventCache.getNode(),null)}function eg(l,o,u,h){return function Yc(l,o,u,h){const y=[],C=[];return o.forEach(R=>{"child_changed"===R.type&&l.index_.indexedValueChanged(R.oldSnap,R.snapshotNode)&&C.push(function gu(l,o){return{type:"child_moved",snapshotNode:o,childName:l}}(R.childName,R.snapshotNode))}),Gd(l,y,"child_removed",o,h,u),Gd(l,y,"child_added",o,h,u),Gd(l,y,"child_moved",C,h,u),Gd(l,y,"child_changed",o,h,u),Gd(l,y,"value",o,h,u),y}(l.eventGenerator_,o,u,h?[h]:l.eventRegistrations_)}let Zd,nd;class n_{constructor(){this.views=new Map}}function ng(l,o,u,h){const y=o.source.queryId;if(null!==y){const C=l.views.get(y);return(0,re.hu)(null!=C,"SyncTree gave us an op for an invalid query."),jf(C,o,u,h)}{let C=[];for(const R of l.views.values())C=C.concat(jf(R,o,u,h));return C}}function im(l,o,u,h,y){const R=l.views.get(o._queryIdentifier);if(!R){let K=hc(u,y?h:null),J=!1;K?J=!0:h instanceof xn?(K=Rl(u,h),J=!1):(K=xn.EMPTY_NODE,J=!1);const se=Qc(new xl(K,J,!1),new xl(h,y,!1));return new rm(o,se)}return R}function sm(l){const o=[];for(const u of l.views.values())u.query._queryParams.loadsAllData()||o.push(u);return o}function nu(l,o){let u=null;for(const h of l.views.values())u=u||Xp(h,o);return u}function ru(l,o){return o._queryParams.loadsAllData()?Zh(l):l.views.get(o._queryIdentifier)}function qh(l,o){return null!=ru(l,o)}function Fl(l){return null!=Zh(l)}function Zh(l){for(const o of l.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let ig=1;class Hi{constructor(o){this.listenProvider_=o,this.syncPointTree_=new Jr(null),this.pendingWriteTree_=function jh(){return{visibleWrites:Na.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $f(l,o,u,h,y){return function zp(l,o,u,h,y){(0,re.hu)(h>l.lastWriteId,"Stacking an older write on top of newer ones"),void 0===y&&(y=!0),l.allWrites.push({path:o,snap:u,writeId:h,visible:y}),y&&(l.visibleWrites=Jc(l.visibleWrites,o,u)),l.lastWriteId=h}(l.pendingWriteTree_,o,u,h,y),y?_c(l,new Zc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,u)):[]}function il(l,o,u=!1){const h=function cc(l,o){for(let u=0;u<l.allWrites.length;u++){const h=l.allWrites[u];if(h.writeId===o)return h}return null}(l.pendingWriteTree_,o);if(function ed(l,o){const u=l.allWrites.findIndex(K=>K.writeId===o);(0,re.hu)(u>=0,"removeWrite called with nonexistent writeId.");const h=l.allWrites[u];l.allWrites.splice(u,1);let y=h.visible,C=!1,R=l.allWrites.length-1;for(;y&&R>=0;){const K=l.allWrites[R];K.visible&&(R>=u&&dc(K,h.path)?y=!1:Xo(h.path,K.path)&&(C=!0)),R--}return!!y&&(C?(function Bh(l){l.visibleWrites=Pa(l.allWrites,Yg,Tr()),l.lastWriteId=l.allWrites.length>0?l.allWrites[l.allWrites.length-1].writeId:-1}(l),!0):(h.snap?l.visibleWrites=Wp(l.visibleWrites,h.path):vs(h.children,J=>{l.visibleWrites=Wp(l.visibleWrites,Qr(h.path,J))}),!0))}(l.pendingWriteTree_,o)){let C=new Jr(null);return null!=h.snap?C=C.set(Tr(),!0):vs(h.children,R=>{C=C.set(new Gn(R),!0)}),_c(l,new ac(h.path,C,u))}return[]}function Yh(l,o,u){return _c(l,new Zc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,u))}function gc(l,o,u,h){const y=o._path,C=l.syncPointTree_.get(y);let R=[];if(C&&("default"===o._queryIdentifier||qh(C,o))){const K=function ty(l,o,u,h){const y=o._queryIdentifier,C=[];let R=[];const K=Fl(l);if("default"===y)for(const[J,se]of l.views.entries())R=R.concat(qd(se,u,h)),td(se)&&(l.views.delete(J),se.query._queryParams.loadsAllData()||C.push(se.query));else{const J=l.views.get(y);J&&(R=R.concat(qd(J,u,h)),td(J)&&(l.views.delete(y),J.query._queryParams.loadsAllData()||C.push(J.query)))}return K&&!Fl(l)&&C.push(new(function ey(){return(0,re.hu)(Zd,"Reference.ts has not been loaded"),Zd}())(o._repo,o._path)),{removed:C,events:R}}(C,o,u,h);(function tg(l){return 0===l.views.size})(C)&&(l.syncPointTree_=l.syncPointTree_.remove(y));const J=K.removed;R=K.events;const se=-1!==J.findIndex(Be=>Be._queryParams.loadsAllData()),Re=l.syncPointTree_.findOnPath(y,(Be,Xe)=>Fl(Xe));if(se&&!Re){const Be=l.syncPointTree_.subtree(y);if(!Be.isEmpty()){const Xe=function um(l){return l.fold((o,u,h)=>{if(u&&Fl(u))return[Zh(u)];{let y=[];return u&&(y=sm(u)),vs(h,(C,R)=>{y=y.concat(R)}),y}})}(Be);for(let xt=0;xt<Xe.length;++xt){const Vt=Xe[xt],jn=Vt.query,sr=zf(l,Vt);l.listenProvider_.startListening(ul(jn),al(l,jn),sr.hashFn,sr.onComplete)}}}!Re&&J.length>0&&!h&&(se?l.listenProvider_.stopListening(ul(o),null):J.forEach(Be=>{const Xe=l.queryToTagMap.get(Kf(Be));l.listenProvider_.stopListening(ul(Be),Xe)})),function id(l,o){for(let u=0;u<o.length;++u){const h=o[u];if(!h._queryParams.loadsAllData()){const y=Kf(h),C=l.queryToTagMap.get(y);l.queryToTagMap.delete(y),l.tagToQueryMap.delete(C)}}}(l,J)}return R}function Yd(l,o,u,h){const y=Jh(l,h);if(null!=y){const C=am(y),R=C.path,K=C.queryId,J=Lo(R,o);return Xh(l,R,new Zc($d(K),J,u))}return[]}function sl(l,o){const u=l._path;let h=null,y=!1;o.syncPointTree_.foreachOnPath(u,(se,Re)=>{const Be=Lo(se,u);h=h||nu(Re,Be),y=y||Fl(Re)});let R,C=o.syncPointTree_.get(u);C?(y=y||Fl(C),h=h||nu(C,Tr())):(C=new n_,o.syncPointTree_=o.syncPointTree_.set(u,C)),null!=h?R=!0:(R=!1,h=xn.EMPTY_NODE,o.syncPointTree_.subtree(u).foreachChild((Re,Be)=>{const Xe=nu(Be,Tr());Xe&&(h=h.updateImmediateChild(Re,Xe))}));const K=qh(C,l);if(!K&&!l._queryParams.loadsAllData()){const se=Kf(l);(0,re.hu)(!o.queryToTagMap.has(se),"View does not exist, but we have a tag");const Re=function og(){return ig++}();o.queryToTagMap.set(se,Re),o.tagToQueryMap.set(Re,se)}return{syncPoint:C,writesCache:zd(o.pendingWriteTree_,u),serverCache:h,serverCacheComplete:R,foundAncestorDefaultView:y,viewAlreadyExists:K}}function ol(l,o,u){const{syncPoint:h,serverCache:y,writesCache:C,serverCacheComplete:R,viewAlreadyExists:K,foundAncestorDefaultView:J}=sl(o,l);let se=function r_(l,o,u,h,y,C){const R=im(l,o,h,y,C);return l.views.has(o._queryIdentifier)||l.views.set(o._queryIdentifier,R),function t_(l,o){l.eventRegistrations_.push(o)}(R,u),function kl(l,o){const u=l.viewCache_.eventCache,h=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(nr,(C,R)=>{h.push(Ri(C,R))}),u.isFullyInitialized()&&h.push(Of(u.getNode())),eg(l,h,u.getNode(),o)}(R,u)}(h,o,u,C,y,R);if(!K&&!J){const Re=ru(h,o);se=se.concat(function qf(l,o,u){const h=o._path,y=al(l,o),C=zf(l,u),R=l.listenProvider_.startListening(ul(o),y,C.hashFn,C.onComplete),K=l.syncPointTree_.subtree(h);if(y)(0,re.hu)(!Fl(K.value),"If we're adding a query, it shouldn't be shadowed");else{const J=K.fold((se,Re,Be)=>{if(!Wn(se)&&Re&&Fl(Re))return[Zh(Re).query];{let Xe=[];return Re&&(Xe=Xe.concat(sm(Re).map(xt=>xt.query))),vs(Be,(xt,Vt)=>{Xe=Xe.concat(Vt)}),Xe}});for(let se=0;se<J.length;++se){const Re=J[se];l.listenProvider_.stopListening(ul(Re),al(l,Re))}}return R}(l,o,Re))}return se}function Qd(l,o,u){const y=l.pendingWriteTree_,C=l.syncPointTree_.findOnPath(o,(R,K)=>{const se=nu(K,Lo(R,o));if(se)return se});return Lf(y,o,C,u,!0)}function _c(l,o){return Wf(o,l.syncPointTree_,null,zd(l.pendingWriteTree_,Tr()))}function Wf(l,o,u,h){if(Wn(l.path))return Qh(l,o,u,h);{const y=o.get(Tr());null==u&&null!=y&&(u=nu(y,Tr()));let C=[];const R=Bn(l.path),K=l.operationForChild(R),J=o.children.get(R);if(J&&K){const se=u?u.getImmediateChild(R):null,Re=Zp(h,R);C=C.concat(Wf(K,J,se,Re))}return y&&(C=C.concat(ng(y,l,h,u))),C}}function Qh(l,o,u,h){const y=o.get(Tr());null==u&&null!=y&&(u=nu(y,Tr()));let C=[];return o.children.inorderTraversal((R,K)=>{const J=u?u.getImmediateChild(R):null,se=Zp(h,R),Re=l.operationForChild(R);Re&&(C=C.concat(Qh(Re,K,J,se)))}),y&&(C=C.concat(ng(y,l,h,u))),C}function zf(l,o){const u=o.query,h=al(l,u);return{hashFn:()=>(function pc(l){return l.viewCache_.serverCache.getNode()}(o)||xn.EMPTY_NODE).hash(),onComplete:y=>{if("ok"===y)return h?function Hf(l,o,u){const h=Jh(l,u);if(h){const y=am(h),C=y.path,R=y.queryId,K=Lo(C,o);return Xh(l,C,new uc($d(R),K))}return[]}(l,u._path,h):function s_(l,o){return _c(l,new uc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(l,u._path);{const C=function Qu(l,o){let u="Unknown Error";"too_big"===l?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===l?u="Client doesn't have permission to access the desired data.":"unavailable"===l&&(u="The service is unavailable");const h=new Error(l+" at "+o._path.toString()+": "+u);return h.code=l.toUpperCase(),h}(y,u);return gc(l,u,null,C)}}}}function al(l,o){const u=Kf(o);return l.queryToTagMap.get(u)}function Kf(l){return l._path.toString()+"$"+l._queryIdentifier}function Jh(l,o){return l.tagToQueryMap.get(o)}function am(l){const o=l.indexOf("$");return(0,re.hu)(-1!==o&&o<l.length-1,"Bad queryKey."),{queryId:l.substr(o+1),path:new Gn(l.substr(0,o))}}function Xh(l,o,u){const h=l.syncPointTree_.get(o);return(0,re.hu)(h,"Missing sync point for query tag that we're tracking"),ng(h,u,zd(l.pendingWriteTree_,o),null)}function ul(l){return l._queryParams.loadsAllData()&&!l._queryParams.isDefault()?new(function rg(){return(0,re.hu)(nd,"Reference.ts has not been loaded"),nd}())(l._repo,l._path):l}class ia{constructor(o){this.node_=o}getImmediateChild(o){const u=this.node_.getImmediateChild(o);return new ia(u)}node(){return this.node_}}class Zf{constructor(o,u){this.syncTree_=o,this.path_=u}getImmediateChild(o){const u=Qr(this.path_,o);return new Zf(this.syncTree_,u)}node(){return Qd(this.syncTree_,this.path_)}}const o_=function(l,o,u){return l&&"object"==typeof l?((0,re.hu)(".sv"in l,"Unexpected leaf node or priority contents"),"string"==typeof l[".sv"]?cm(l[".sv"],o,u):"object"==typeof l[".sv"]?dm(l[".sv"],o):void(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2))):l},cm=function(l,o,u){if("timestamp"===l)return u.timestamp;(0,re.hu)(!1,"Unexpected server value: "+l)},dm=function(l,o,u){l.hasOwnProperty("increment")||(0,re.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const h=l.increment;"number"!=typeof h&&(0,re.hu)(!1,"Unexpected increment value: "+h);const y=o.node();if((0,re.hu)(null!=y,"Expected ChildrenNode.EMPTY_NODE for nulls"),!y.isLeafNode())return h;const R=y.getValue();return"number"!=typeof R?h:R+h},ag=function(l,o,u,h){return Jd(o,new Zf(u,l),h)},Yf=function(l,o,u){return Jd(l,new ia(o),u)};function Jd(l,o,u){const h=l.getPriority().val(),y=o_(h,o.getImmediateChild(".priority"),u);let C;if(l.isLeafNode()){const R=l,K=o_(R.getValue(),o,u);return K!==R.getValue()||y!==R.getPriority().val()?new $i(K,oi(y)):l}{const R=l;return C=R,y!==R.getPriority().val()&&(C=C.updatePriority(new $i(y))),R.forEachChild(nr,(K,J)=>{const se=Jd(J,o.getImmediateChild(K),u);se!==J&&(C=C.updateImmediateChild(K,se))}),C}}class Xd{constructor(o="",u=null,h={children:{},childCount:0}){this.name=o,this.parent=u,this.node=h}}function sd(l,o){let u=o instanceof Gn?o:new Gn(o),h=l,y=Bn(u);for(;null!==y;){const C=(0,re.DV)(h.node.children,y)||{children:{},childCount:0};h=new Xd(y,h,C),u=ir(u),y=Bn(u)}return h}function Bu(l){return l.node.value}function eh(l,o){l.node.value=o,Qf(l)}function ef(l){return l.node.childCount>0}function od(l,o){vs(l.node.children,(u,h)=>{o(new Xd(u,l,h))})}function lg(l,o,u,h){u&&!h&&o(l),od(l,y=>{lg(y,o,!0,h)}),u&&h&&o(l)}function ad(l){return new Gn(null===l.parent?l.name:ad(l.parent)+"/"+l.name)}function Qf(l){null!==l.parent&&function u_(l,o,u){const h=function ug(l){return void 0===Bu(l)&&!ef(l)}(u),y=(0,re.r3)(l.node.children,o);h&&y?(delete l.node.children[o],l.node.childCount--,Qf(l)):!h&&!y&&(l.node.children[o]=u.node,l.node.childCount++,Qf(l))}(l.parent,l.name,l)}const ll=/[\[\].#$\/\u0000-\u001F\u007F]/,Jf=/[\[\].#$\u0000-\u001F\u007F]/,th=10485760,yc=function(l){return"string"==typeof l&&0!==l.length&&!ll.test(l)},cg=function(l){return"string"==typeof l&&0!==l.length&&!Jf.test(l)},tf=function(l){return null===l||"string"==typeof l||"number"==typeof l&&!Oo(l)||l&&"object"==typeof l&&(0,re.r3)(l,".sv")},cl=function(l,o,u,h){h&&void 0===o||nf((0,re.gK)(l,"value"),o,u)},nf=function(l,o,u){const h=u instanceof Gn?new Xl(u,l):u;if(void 0===o)throw new Error(l+"contains undefined "+ea(h));if("function"==typeof o)throw new Error(l+"contains a function "+ea(h)+" with contents = "+o.toString());if(Oo(o))throw new Error(l+"contains "+o.toString()+" "+ea(h));if("string"==typeof o&&o.length>th/3&&(0,re.ug)(o)>th)throw new Error(l+"contains a string greater than "+th+" utf8 bytes "+ea(h)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let y=!1,C=!1;if(vs(o,(R,K)=>{if(".value"===R)y=!0;else if(".priority"!==R&&".sv"!==R&&(C=!0,!yc(R)))throw new Error(l+" contains an invalid key ("+R+") "+ea(h)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function el(l,o){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(o),l.byteLength_+=(0,re.ug)(o),Mf(l)})(h,R),nf(l,K,h),function ec(l){const o=l.parts_.pop();l.byteLength_-=(0,re.ug)(o),l.parts_.length>0&&(l.byteLength_-=1)}(h)}),y&&C)throw new Error(l+' contains ".value" child '+ea(h)+" in addition to actual children.")}},hm=function(l,o,u,h){if(h&&void 0===o)return;const y=(0,re.gK)(l,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(y+" must be an object containing the children to replace.");const C=[];vs(o,(R,K)=>{const J=new Gn(R);if(nf(y,K,Qr(u,J)),".priority"===Jl(J)&&!tf(K))throw new Error(y+"contains an invalid value for '"+J.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");C.push(J)}),function(l,o){let u,h;for(u=0;u<o.length;u++){h=o[u];const C=Ma(h);for(let R=0;R<C.length;R++)if((".priority"!==C[R]||R!==C.length-1)&&!yc(C[R]))throw new Error(l+"contains an invalid key ("+C[R]+") in path "+h.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(jc);let y=null;for(u=0;u<o.length;u++){if(h=o[u],null!==y&&Xo(y,h))throw new Error(l+"contains a path "+y.toString()+" that is ancestor of another path "+h.toString());y=h}}(y,C)},ud=function(l,o,u){if(!u||void 0!==o){if(Oo(o))throw new Error((0,re.gK)(l,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!tf(o))throw new Error((0,re.gK)(l,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dl=function(l,o,u,h){if(!(h&&void 0===u||yc(u)))throw new Error((0,re.gK)(l,o)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},_u=function(l,o,u,h){if(!(h&&void 0===u||cg(u)))throw new Error((0,re.gK)(l,o)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ho=function(l,o){if(".info"===Bn(o))throw new Error(l+" failed = Can't modify data under /.info/")},vc=function(l,o){const u=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!yc(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==u.length&&!function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),cg(l)}(u))throw new Error((0,re.gK)(l,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Xf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rf(l,o){let u=null;for(let h=0;h<o.length;h++){const y=o[h],C=y.getPath();null!==u&&!Rf(C,u.path)&&(l.eventLists_.push(u),u=null),null===u&&(u={events:[],path:C}),u.events.push(y)}u&&l.eventLists_.push(u)}function ep(l,o,u){rf(l,u),wc(l,h=>Rf(h,o))}function sa(l,o,u){rf(l,u),wc(l,h=>Xo(h,o)||Xo(o,h))}function wc(l,o){l.recursionDepth_++;let u=!0;for(let h=0;h<l.eventLists_.length;h++){const y=l.eventLists_[h];y&&(o(y.path)?(fm(l.eventLists_[h]),l.eventLists_[h]=null):u=!1)}u&&(l.eventLists_=[]),l.recursionDepth_--}function fm(l){for(let o=0;o<l.events.length;o++){const u=l.events[o];if(null!==u){l.events[o]=null;const h=u.getEventRunner();wa&&Hr("event: "+u.toString()),ii(h)}}}const pg="repo_interrupt";class pm{constructor(o,u,h,y){this.repoInfo_=o,this.forceRestClient_=u,this.authTokenProvider_=h,this.appCheckProvider_=y,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Xf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qc(),this.transactionQueueTree_=new Xd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function gg(l){const u=l.infoData_.getNode(new Gn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u}function Ia(l){return function(l){return(l=l||{}).timestamp=l.timestamp||(new Date).getTime(),l}({timestamp:gg(l)})}function Ec(l,o,u,h,y){l.dataUpdateCount++;const C=new Gn(o);u=l.interceptServerDataCallback_?l.interceptServerDataCallback_(o,u):u;let R=[];if(y)if(h){const J=(0,re.UI)(u,se=>oi(se));R=function mc(l,o,u,h){const y=Jh(l,h);if(y){const C=am(y),R=C.path,K=C.queryId,J=Lo(R,o),se=Jr.fromObject(u);return Xh(l,R,new Hd($d(K),J,se))}return[]}(l.serverSyncTree_,C,J,y)}else{const J=oi(u);R=Yd(l.serverSyncTree_,C,J,y)}else if(h){const J=(0,re.UI)(u,se=>oi(se));R=function sg(l,o,u){const h=Jr.fromObject(u);return _c(l,new Hd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,h))}(l.serverSyncTree_,C,J)}else{const J=oi(u);R=Yh(l.serverSyncTree_,C,J)}let K=C;R.length>0&&(K=Cc(l,C)),sa(l.eventQueue_,K,R)}function rp(l,o){ld(l,"connected",o),!1===o&&function _m(l){Ll(l,"onDisconnectEvents");const o=Ia(l),u=qc();mu(l.onDisconnect_,Tr(),(y,C)=>{const R=ag(y,C,l.serverSyncTree_,o);Ea(u,y,R)});let h=[];mu(u,Tr(),(y,C)=>{h=h.concat(Yh(l.serverSyncTree_,y,C));const R=op(l,y);Cc(l,R)}),l.onDisconnect_=qc(),sa(l.eventQueue_,Tr(),h)}(l)}function ld(l,o,u){const h=new Gn("/.info/"+o),y=oi(u);l.infoData_.updateSnapshot(h,y);const C=Yh(l.infoSyncTree_,h,y);sa(l.eventQueue_,h,C)}function Ic(l){return l.nextWriteId_++}function mm(l,o){const u=function Gf(l,o){const u=o._path;let h=null;l.syncPointTree_.foreachOnPath(u,(se,Re)=>{const Be=Lo(se,u);h=h||nu(Re,Be)});let y=l.syncPointTree_.get(u);y?h=h||nu(y,Tr()):(y=new n_,l.syncPointTree_=l.syncPointTree_.set(u,y));const C=null!=h,R=C?new xl(h,!0,!1):null;return function Kd(l){return Lh(l.viewCache_)}(im(y,o,zd(l.pendingWriteTree_,o._path),C?R.getNode():xn.EMPTY_NODE,C))}(l.serverSyncTree_,o);return null!=u?Promise.resolve(u):l.server_.get(o).then(h=>{const y=oi(h).withIndex(o._queryParams.getIndex());if(o._queryParams.loadsAllData())Yh(l.serverSyncTree_,o._path,y);else{const R=function rd(l,o){const{syncPoint:u,serverCache:h,writesCache:y,serverCacheComplete:C}=sl(o,l),R=im(u,o,y,h,C);return u.views.has(o._queryIdentifier)||u.views.set(o._queryIdentifier,R),o._queryParams.loadsAllData()?null:al(l,o)}(l.serverSyncTree_,o);Yd(l.serverSyncTree_,o._path,y,R)}return gc(l.serverSyncTree_,o,null).length>0&&Ll(l,"unexpected cancel events in repoGetValue"),y},h=>(Ll(l,"get for query "+(0,re.Pz)(o)+" failed: "+h),Promise.reject(new Error(h))))}function sf(l,o,u,h,y){Ll(l,"set",{path:o.toString(),value:u,priority:h});const C=Ia(l),R=oi(u,h),K=Qd(l.serverSyncTree_,o),J=Yf(R,K,C),se=Ic(l),Re=$f(l.serverSyncTree_,o,J,se,!0);rf(l.eventQueue_,Re),l.server_.put(o.toString(),R.val(!0),(Xe,xt)=>{const Vt="ok"===Xe;Vt||Dr("set at "+o+" failed: "+Xe);const jn=il(l.serverSyncTree_,se,!Vt);sa(l.eventQueue_,o,jn),Ca(0,y,Xe,xt)});const Be=op(l,o);Cc(l,Be),sa(l.eventQueue_,Be,[])}function mg(l,o,u){l.server_.onDisconnectCancel(o.toString(),(h,y)=>{"ok"===h&&oc(l.onDisconnect_,o),Ca(0,u,h,y)})}function af(l,o,u,h){const y=oi(u);l.server_.onDisconnectPut(o.toString(),y.val(!0),(C,R)=>{"ok"===C&&Ea(l.onDisconnect_,o,y),Ca(0,h,C,R)})}function cd(l,o,u){let h;h=".info"===Bn(o._path)?gc(l.infoSyncTree_,o,u):gc(l.serverSyncTree_,o,u),ep(l.eventQueue_,o._path,h)}function vm(l){l.persistentConnection_&&l.persistentConnection_.interrupt(pg)}function Ll(l,...o){let u="";l.persistentConnection_&&(u=l.persistentConnection_.id+":"),Hr(u,...o)}function Ca(l,o,u,h){o&&ii(()=>{if("ok"===u)o(null);else{const y=(u||"error").toUpperCase();let C=y;h&&(C+=": "+h);const R=new Error(C);R.code=y,o(R)}})}function uf(l,o,u){return Qd(l.serverSyncTree_,o,u)||xn.EMPTY_NODE}function Vl(l,o=l.transactionQueueTree_){if(o||ih(l,o),Bu(o)){const u=yg(l,o);(0,re.hu)(u.length>0,"Sending zero length transaction queue"),u.every(y=>0===y.status)&&function iu(l,o,u){const h=u.map(se=>se.currentWriteId),y=uf(l,o,h);let C=y;const R=y.hash();for(let se=0;se<u.length;se++){const Re=u[se];(0,re.hu)(0===Re.status,"tryToSendTransactionQueue_: items in queue should all be run."),Re.status=1,Re.retryCount++;const Be=Lo(o,Re.path);C=C.updateChild(Be,Re.currentOutputSnapshotRaw)}const K=C.val(!0),J=o;l.server_.put(J.toString(),K,se=>{Ll(l,"transaction put response",{path:J.toString(),status:se});let Re=[];if("ok"===se){const Be=[];for(let Xe=0;Xe<u.length;Xe++)u[Xe].status=2,Re=Re.concat(il(l.serverSyncTree_,u[Xe].currentWriteId)),u[Xe].onComplete&&Be.push(()=>u[Xe].onComplete(null,!0,u[Xe].currentOutputSnapshotResolved)),u[Xe].unwatcher();ih(l,sd(l.transactionQueueTree_,o)),Vl(l,l.transactionQueueTree_),sa(l.eventQueue_,o,Re);for(let Xe=0;Xe<Be.length;Xe++)ii(Be[Xe])}else{if("datastale"===se)for(let Be=0;Be<u.length;Be++)u[Be].status=3===u[Be].status?4:0;else{Dr("transaction at "+J.toString()+" failed: "+se);for(let Be=0;Be<u.length;Be++)u[Be].status=4,u[Be].abortReason=se}Cc(l,o)}},R)}(l,ad(o),u)}else ef(o)&&od(o,u=>{Vl(l,u)})}function Cc(l,o){const u=dd(l,o),h=ad(u);return function rh(l,o,u){if(0===o.length)return;const h=[];let y=[];const R=o.filter(K=>0===K.status).map(K=>K.currentWriteId);for(let K=0;K<o.length;K++){const J=o[K],se=Lo(u,J.path);let Be,Re=!1;if((0,re.hu)(null!==se,"rerunTransactionsUnderNode_: relativePath should not be null."),4===J.status)Re=!0,Be=J.abortReason,y=y.concat(il(l.serverSyncTree_,J.currentWriteId,!0));else if(0===J.status)if(J.retryCount>=25)Re=!0,Be="maxretry",y=y.concat(il(l.serverSyncTree_,J.currentWriteId,!0));else{const Xe=uf(l,J.path,R);J.currentInputSnapshot=Xe;const xt=o[K].update(Xe.val());if(void 0!==xt){nf("transaction failed: Data returned ",xt,J.path);let Vt=oi(xt);"object"==typeof xt&&null!=xt&&(0,re.r3)(xt,".priority")||(Vt=Vt.updatePriority(Xe.getPriority()));const sr=J.currentWriteId,uo=Ia(l),Vs=Yf(Vt,Xe,uo);J.currentOutputSnapshotRaw=Vt,J.currentOutputSnapshotResolved=Vs,J.currentWriteId=Ic(l),R.splice(R.indexOf(sr),1),y=y.concat($f(l.serverSyncTree_,J.path,Vs,J.currentWriteId,J.applyLocally)),y=y.concat(il(l.serverSyncTree_,sr,!0))}else Re=!0,Be="nodata",y=y.concat(il(l.serverSyncTree_,J.currentWriteId,!0))}sa(l.eventQueue_,u,y),y=[],Re&&(o[K].status=2,setTimeout(o[K].unwatcher,Math.floor(0)),o[K].onComplete&&h.push("nodata"===Be?()=>o[K].onComplete(null,!1,o[K].currentInputSnapshot):()=>o[K].onComplete(new Error(Be),!1,null)))}ih(l,l.transactionQueueTree_);for(let K=0;K<h.length;K++)ii(h[K]);Vl(l,l.transactionQueueTree_)}(l,yg(l,u),h),h}function dd(l,o){let u,h=l.transactionQueueTree_;for(u=Bn(o);null!==u&&void 0===Bu(h);)h=sd(h,u),u=Bn(o=ir(o));return h}function yg(l,o){const u=[];return Go(l,o,u),u.sort((h,y)=>h.order-y.order),u}function Go(l,o,u){const h=Bu(o);if(h)for(let y=0;y<h.length;y++)u.push(h[y]);od(o,y=>{Go(l,y,u)})}function ih(l,o){const u=Bu(o);if(u){let h=0;for(let y=0;y<u.length;y++)2!==u[y].status&&(u[h]=u[y],h++);u.length=h,eh(o,u.length>0?u:void 0)}od(o,h=>{ih(l,h)})}function op(l,o){const u=ad(dd(l,o)),h=sd(l.transactionQueueTree_,o);return function a_(l,o,u){let h=u?l:l.parent;for(;null!==h;){if(o(h))return!0;h=h.parent}}(h,y=>{sh(l,y)}),sh(l,h),lg(h,y=>{sh(l,y)}),u}function sh(l,o){const u=Bu(o);if(u){const h=[];let y=[],C=-1;for(let R=0;R<u.length;R++)3===u[R].status||(1===u[R].status?((0,re.hu)(C===R-1,"All SENT items should be at beginning of queue."),C=R,u[R].status=3,u[R].abortReason="set"):((0,re.hu)(0===u[R].status,"Unexpected transaction status in abort"),u[R].unwatcher(),y=y.concat(il(l.serverSyncTree_,u[R].currentWriteId,!0)),u[R].onComplete&&h.push(u[R].onComplete.bind(null,new Error("set"),!1,null))));-1===C?eh(o,void 0):u.length=C+1,sa(l.eventQueue_,ad(o),y);for(let R=0;R<h.length;R++)ii(h[R])}}const lf=function(l,o){const u=c_(l),h=u.namespace;return"firebase.com"===u.domain&&Ns(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!h||"undefined"===h)&&"localhost"!==u.domain&&Ns("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Dr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Xt(u.host,u.secure,h,"ws"===u.scheme||"wss"===u.scheme,o,"",h!==u.subdomain),path:new Gn(u.pathString)}},c_=function(l){let o="",u="",h="",y="",C="",R=!0,K="https",J=443;if("string"==typeof l){let se=l.indexOf("//");se>=0&&(K=l.substring(0,se-1),l=l.substring(se+2));let Re=l.indexOf("/");-1===Re&&(Re=l.length);let Be=l.indexOf("?");-1===Be&&(Be=l.length),o=l.substring(0,Math.min(Re,Be)),Re<Be&&(y=function ap(l){let o="";const u=l.split("/");for(let h=0;h<u.length;h++)if(u[h].length>0){let y=u[h];try{y=decodeURIComponent(y.replace(/\+/g," "))}catch(C){}o+="/"+y}return o}(l.substring(Re,Be)));const Xe=function up(l){const o={};"?"===l.charAt(0)&&(l=l.substring(1));for(const u of l.split("&")){if(0===u.length)continue;const h=u.split("=");2===h.length?o[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):Dr(`Invalid query segment '${u}' in query '${l}'`)}return o}(l.substring(Math.min(l.length,Be)));se=o.indexOf(":"),se>=0?(R="https"===K||"wss"===K,J=parseInt(o.substring(se+1),10)):se=o.length;const xt=o.slice(0,se);if("localhost"===xt.toLowerCase())u="localhost";else if(xt.split(".").length<=2)u=xt;else{const Vt=o.indexOf(".");h=o.substring(0,Vt).toLowerCase(),u=o.substring(Vt+1),C=h}"ns"in Xe&&(C=Xe.ns)}return{host:o,port:J,domain:u,subdomain:h,secure:R,scheme:K,pathString:y,namespace:C}};class wm{constructor(o,u,h,y){this.eventType=o,this.eventRegistration=u,this.snapshot=h,this.prevName=y}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,re.Pz)(this.snapshot.exportVal())}}class lp{constructor(o,u,h){this.eventRegistration=o,this.error=u,this.path=h}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class cf{constructor(o,u){this.snapshotCallback=o,this.cancelCallback=u}onValue(o,u){this.snapshotCallback.call(null,o,u)}onCancel(o){return(0,re.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class d_{constructor(o,u){this._repo=o,this._path=u}cancel(){const o=new re.BH;return mg(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){Ho("OnDisconnect.remove",this._path);const o=new re.BH;return af(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){Ho("OnDisconnect.set",this._path),cl("OnDisconnect.set",o,this._path,!1);const u=new re.BH;return af(this._repo,this._path,o,u.wrapCallback(()=>{})),u.promise}setWithPriority(o,u){Ho("OnDisconnect.setWithPriority",this._path),cl("OnDisconnect.setWithPriority",o,this._path,!1),ud("OnDisconnect.setWithPriority",u,!1);const h=new re.BH;return function ym(l,o,u,h,y){const C=oi(u,h);l.server_.onDisconnectPut(o.toString(),C.val(!0),(R,K)=>{"ok"===R&&Ea(l.onDisconnect_,o,C),Ca(0,y,R,K)})}(this._repo,this._path,o,u,h.wrapCallback(()=>{})),h.promise}update(o){Ho("OnDisconnect.update",this._path),hm("OnDisconnect.update",o,this._path,!1);const u=new re.BH;return function ip(l,o,u,h){if((0,re.xb)(u))return Hr("onDisconnect().update() called with empty data.  Don't do anything."),void Ca(0,h,"ok",void 0);l.server_.onDisconnectMerge(o.toString(),u,(y,C)=>{"ok"===y&&vs(u,(R,K)=>{const J=oi(K);Ea(l.onDisconnect_,Qr(o,R),J)}),Ca(0,h,y,C)})}(this._repo,this._path,o,u.wrapCallback(()=>{})),u.promise}}class oa{constructor(o,u,h,y){this._repo=o,this._path=u,this._queryParams=h,this._orderByCalled=y}get key(){return Wn(this._path)?null:Jl(this._path)}get ref(){return new yu(this._repo,this._path)}get _queryIdentifier(){const o=es(this._queryParams),u=Yu(o);return"{}"===u?"default":u}get _queryObject(){return es(this._queryParams)}isEqual(o){if(!((o=(0,re.m9)(o))instanceof oa))return!1;const u=this._repo===o._repo,h=Rf(this._path,o._path);return u&&h&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Qa(l){let o="";for(let u=l.pieceNum_;u<l.pieces_.length;u++)""!==l.pieces_[u]&&(o+="/"+encodeURIComponent(String(l.pieces_[u])));return o||"/"}(this._path)}}function cp(l,o){if(!0===l._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function Ul(l){let o=null,u=null;if(l.hasStart()&&(o=l.getIndexStartValue()),l.hasEnd()&&(u=l.getIndexEndValue()),l.getIndex()===Xa){const h="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",y="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(l.hasStart()){if(l.getIndexStartName()!==Ps)throw new Error(h);if("string"!=typeof o)throw new Error(y)}if(l.hasEnd()){if(l.getIndexEndName()!==cs)throw new Error(h);if("string"!=typeof u)throw new Error(y)}}else if(l.getIndex()===nr){if(null!=o&&!tf(o)||null!=u&&!tf(u))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,re.hu)(l.getIndex()instanceof Vd||l.getIndex()===vo,"unknown index type."),null!=o&&"object"==typeof o||null!=u&&"object"==typeof u)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function dp(l){if(l.hasStart()&&l.hasEnd()&&l.hasLimit()&&!l.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class yu extends oa{constructor(o,u){super(o,u,new m,!1)}get parent(){const o=Ah(this._path);return null===o?null:new yu(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class hl{constructor(o,u,h){this._node=o,this.ref=u,this._index=h}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const u=new Gn(o),h=bc(this.ref,o);return new hl(this._node.getChild(u),h,nr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(h,y)=>o(new hl(y,bc(this.ref,h),nr)))}hasChild(o){const u=new Gn(o);return!this._node.getChild(u).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Em(l,o){return(l=(0,re.m9)(l))._checkNotDeleted("ref"),void 0!==o?bc(l._root,o):l._root}function vg(l,o){(l=(0,re.m9)(l))._checkNotDeleted("refFromURL");const u=lf(o,l._repo.repoInfo_.nodeAdmin);vc("refFromURL",u);const h=u.repoInfo;return!l._repo.repoInfo_.isCustomHost()&&h.host!==l._repo.repoInfo_.host&&Ns("refFromURL: Host name does not match the current database: (found "+h.host+" but expected "+l._repo.repoInfo_.host+")"),Em(l,u.path.toString())}function bc(l,o){return null===Bn((l=(0,re.m9)(l))._path)?(u=o,u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),_u("child","path",u,!1)):_u("child","path",o,!1),new yu(l._repo,Qr(l._path,o));var u}function hp(l,o){l=(0,re.m9)(l),Ho("set",l._path),cl("set",o,l._path,!1);const u=new re.BH;return sf(l._repo,l._path,o,null,u.wrapCallback(()=>{})),u.promise}function bm(l,o){hm("update",o,l._path,!1);const u=new re.BH;return function nh(l,o,u,h){Ll(l,"update",{path:o.toString(),value:u});let y=!0;const C=Ia(l),R={};if(vs(u,(K,J)=>{y=!1,R[K]=ag(Qr(o,K),oi(J),l.serverSyncTree_,C)}),y)Hr("update() called with empty data.  Don't do anything."),Ca(0,h,"ok",void 0);else{const K=Ic(l),J=function i_(l,o,u,h){!function Kp(l,o,u,h){(0,re.hu)(h>l.lastWriteId,"Stacking an older merge on top of newer ones"),l.allWrites.push({path:o,children:u,writeId:h,visible:!0}),l.visibleWrites=Wd(l.visibleWrites,o,u),l.lastWriteId=h}(l.pendingWriteTree_,o,u,h);const y=Jr.fromObject(u);return _c(l,new Hd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,y))}(l.serverSyncTree_,o,R,K);rf(l.eventQueue_,J),l.server_.merge(o.toString(),u,(se,Re)=>{const Be="ok"===se;Be||Dr("update at "+o+" failed: "+se);const Xe=il(l.serverSyncTree_,K,!Be),xt=Xe.length>0?Cc(l,o):o;sa(l.eventQueue_,xt,Xe),Ca(0,h,se,Re)}),vs(u,se=>{const Re=op(l,Qr(o,se));Cc(l,Re)}),sa(l.eventQueue_,o,[])}}(l._repo,l._path,o,u.wrapCallback(()=>{})),u.promise}class pp{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,u){const h=u._queryParams.getIndex();return new wm("value",this,new hl(o.snapshotNode,new yu(u._repo,u._path),h))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,u){return this.callbackContext.hasCancelCallback?new lp(this,o,u):null}matches(o){return o instanceof pp&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class hd{constructor(o,u){this.eventType=o,this.callbackContext=u}respondsTo(o){let u="children_added"===o?"child_added":o;return u="children_removed"===u?"child_removed":u,this.eventType===u}createCancelEvent(o,u){return this.callbackContext.hasCancelCallback?new lp(this,o,u):null}createEvent(o,u){(0,re.hu)(null!=o.childName,"Child events should have a childName.");const h=bc(new yu(u._repo,u._path),o.childName),y=u._queryParams.getIndex();return new wm(o.type,this,new hl(o.snapshotNode,h,y),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof hd&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Dc(l,o,u,h,y){let C;if("object"==typeof h&&(C=void 0,y=h),"function"==typeof h&&(C=h),y&&y.onlyOnce){const J=u,se=(Re,Be)=>{cd(l._repo,l,K),J(Re,Be)};se.userCallback=u.userCallback,se.context=u.context,u=se}const R=new cf(u,C||void 0),K="value"===o?new pp(R):new hd(o,R);return function l_(l,o,u){let h;h=".info"===Bn(o._path)?ol(l.infoSyncTree_,o,u):ol(l.serverSyncTree_,o,u),ep(l.eventQueue_,o._path,h)}(l._repo,l,K),()=>cd(l._repo,l,K)}function Eg(l,o,u,h){return Dc(l,"value",o,u,h)}function oh(l,o,u,h){return Dc(l,"child_added",o,u,h)}function Dm(l,o,u,h){return Dc(l,"child_changed",o,u,h)}function gp(l,o,u,h){return Dc(l,"child_moved",o,u,h)}function Tm(l,o,u,h){return Dc(l,"child_removed",o,u,h)}function mp(l,o,u){let h=null;const y=u?new cf(u):null;"value"===o?h=new pp(y):o&&(h=new hd(o,y)),cd(l._repo,l,h)}class ju{}class _p extends ju{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){cl("endAt",this._value,o._path,!0);const u=Dt(o._queryParams,this._value,this._key);if(dp(u),Ul(u),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oa(o._repo,o._path,u,o._orderByCalled)}}class Tc extends ju{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){cl("endBefore",this._value,o._path,!1);const u=function Lt(l,o,u){let h,y;return l.index_===Xa?("string"==typeof o&&(o=Ud(o)),y=Dt(l,o,u)):(h=null==u?Ps:Ud(u),y=Dt(l,o,h)),y.endBeforeSet_=!0,y}(o._queryParams,this._value,this._key);if(dp(u),Ul(u),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oa(o._repo,o._path,u,o._orderByCalled)}}class fd extends ju{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){cl("startAt",this._value,o._path,!0);const u=Ce(o._queryParams,this._value,this._key);if(dp(u),Ul(u),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new oa(o._repo,o._path,u,o._orderByCalled)}}class h_ extends ju{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){cl("startAfter",this._value,o._path,!1);const u=function nt(l,o,u){let h;if(l.index_===Xa)"string"==typeof o&&(o=Sl(o)),h=Ce(l,o,u);else{let y;y=null==u?cs:Sl(u),h=Ce(l,o,y)}return h.startAfterSet_=!0,h}(o._queryParams,this._value,this._key);if(dp(u),Ul(u),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new oa(o._repo,o._path,u,o._orderByCalled)}}class Eo extends ju{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new oa(o._repo,o._path,function G(l,o){const u=l.copy();return u.limitSet_=!0,u.limit_=o,u.viewFrom_="l",u}(o._queryParams,this._limit),o._orderByCalled)}}class aa extends ju{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new oa(o._repo,o._path,function ee(l,o){const u=l.copy();return u.limitSet_=!0,u.limit_=o,u.viewFrom_="r",u}(o._queryParams,this._limit),o._orderByCalled)}}class yp extends ju{constructor(o){super(),this._path=o}_apply(o){cp(o,"orderByChild");const u=new Gn(this._path);if(Wn(u))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const h=new Vd(u),y=gn(o._queryParams,h);return Ul(y),new oa(o._repo,o._path,y,!0)}}class hf extends ju{_apply(o){cp(o,"orderByKey");const u=gn(o._queryParams,Xa);return Ul(u),new oa(o._repo,o._path,u,!0)}}class Sc extends ju{_apply(o){cp(o,"orderByPriority");const u=gn(o._queryParams,nr);return Ul(u),new oa(o._repo,o._path,u,!0)}}class Ac extends ju{_apply(o){cp(o,"orderByValue");const u=gn(o._queryParams,vo);return Ul(u),new oa(o._repo,o._path,u,!0)}}class xc extends ju{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){if(cl("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new _p(this._value,this._key)._apply(new fd(this._value,this._key)._apply(o))}}function Io(l,...o){let u=(0,re.m9)(l);for(const h of o)u=h._apply(u);return u}(function X_(l){(0,re.hu)(!Zd,"__referenceConstructor has already been defined"),Zd=l})(yu),function om(l){(0,re.hu)(!nd,"__referenceConstructor has already been defined"),nd=l}(yu);const vp={};function bg(l,o,u,h,y){let C=h||l.options.databaseURL;void 0===C&&(l.options.projectId||Ns("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hr("Using default host for project ",l.options.projectId),C=`${l.options.projectId}-default-rtdb.firebaseio.com`);let J,se,R=lf(C,y),K=R.repoInfo;"undefined"!=typeof process&&process.env&&(se=process.env.FIREBASE_DATABASE_EMULATOR_HOST),se?(J=!0,C=`http://${se}?ns=${K.namespace}`,R=lf(C,y),K=R.repoInfo):J=!R.repoInfo.secure;const Re=y&&J?new Gr(Gr.OWNER):new ko(l.name,l.options,o);vc("Invalid Firebase Database URL",R),Wn(R.path)||Ns("Database URL must point to the root of a Firebase Database (not including a child path).");const Be=function Ip(l,o,u,h){let y=vp[o.name];y||(y={},vp[o.name]=y);let C=y[l.toURLString()];return C&&Ns("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),C=new pm(l,false,u,h),y[l.toURLString()]=C,C}(K,l,Re,new wl(l.name,u));return new Sm(Be,l)}class Sm{constructor(o,u){this._repoInternal=o,this.app=u,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function np(l,o,u){if(l.stats_=xu(l.repoInfo_),l.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)l.server_=new ao(l.repoInfo_,(h,y,C,R)=>{Ec(l,h,y,C,R)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>rp(l,!0),0);else{if(null!=u){if("object"!=typeof u)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,re.Pz)(u)}catch(h){throw new Error("Invalid authOverride provided: "+h)}}l.persistentConnection_=new xr(l.repoInfo_,o,(h,y,C,R)=>{Ec(l,h,y,C,R)},h=>{rp(l,h)},h=>{!function gm(l,o){vs(o,(u,h)=>{ld(l,u,h)})}(l,h)},l.authTokenProvider_,l.appCheckProvider_,u),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(h=>{l.server_.refreshAuthToken(h)}),l.appCheckProvider_.addTokenChangeListener(h=>{l.server_.refreshAppCheckToken(h.token)}),l.statsReporter_=function oo(l,o){const u=l.toString();return ds[u]||(ds[u]=o()),ds[u]}(l.repoInfo_,()=>new jo(l.stats_,l.server_)),l.infoData_=new Kc,l.infoSyncTree_=new Hi({startListening:(h,y,C,R)=>{let K=[];const J=l.infoData_.getNode(h._path);return J.isEmpty()||(K=Yh(l.infoSyncTree_,h._path,J),setTimeout(()=>{R("ok")},0)),K},stopListening:()=>{}}),ld(l,"connected",!1),l.serverSyncTree_=new Hi({startListening:(h,y,C,R)=>(l.server_.listen(h,C,y,(K,J)=>{const se=R(K,J);sa(l.eventQueue_,h._path,se)}),[]),stopListening:(h,y)=>{l.server_.unlisten(h,y)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yu(this._repo,Tr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Ep(l,o){const u=vp[o];(!u||u[l.key]!==l)&&Ns(`Database ${o}(${l.repoInfo_}) has already been deleted.`),vm(l),delete u[l.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&Ns("Cannot call "+o+" on a deleted database.")}}function bp(){Yl.IS_TRANSPORT_INITIALIZED&&Dr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Am(){bp(),Jo.forceDisallow()}function xm(){bp(),Ai.forceDisallow(),Jo.forceAllow()}function p_(l,o){Ih(l,o)}const g_={".sv":"timestamp"};class Pm{constructor(o,u){this.committed=o,this.snapshot=u}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}xr.prototype.simpleListen=function(l,o){this.sendRequest("q",{p:l},o)},xr.prototype.echo=function(l,o){this.sendRequest("echo",{d:l},o)},function Nm(l){Ji(Kr.SDK_VERSION),(0,Kr._registerComponent)(new li.wA("database",(o,{instanceIdentifier:u})=>bg(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),u),"PUBLIC").setMultipleInstances(!0)),(0,Kr.registerVersion)(vl,"0.13.2",l),(0,Kr.registerVersion)(vl,"0.13.2","esm2017")}();const m_=new un.Yd("@firebase/database-compat"),Ag=function(l){m_.warn("FIREBASE WARNING: "+l)};class _d{constructor(o){this._delegate=o}cancel(o){(0,re.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,re.Wj)("OnDisconnect.cancel","onComplete",o,!0);const u=this._delegate.cancel();return o&&u.then(()=>o(null),h=>o(h)),u}remove(o){(0,re.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,re.Wj)("OnDisconnect.remove","onComplete",o,!0);const u=this._delegate.remove();return o&&u.then(()=>o(null),h=>o(h)),u}set(o,u){(0,re.Dv)("OnDisconnect.set",1,2,arguments.length),(0,re.Wj)("OnDisconnect.set","onComplete",u,!0);const h=this._delegate.set(o);return u&&h.then(()=>u(null),y=>u(y)),h}setWithPriority(o,u,h){(0,re.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,re.Wj)("OnDisconnect.setWithPriority","onComplete",h,!0);const y=this._delegate.setWithPriority(o,u);return h&&y.then(()=>h(null),C=>h(C)),y}update(o,u){if((0,re.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let C=0;C<o.length;++C)y[""+C]=o[C];o=y,Ag("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,re.Wj)("OnDisconnect.update","onComplete",u,!0);const h=this._delegate.update(o);return u&&h.then(()=>u(null),y=>u(y)),h}}class Fm{constructor(o,u){this.committed=o,this.snapshot=u}toJSON(){return(0,re.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Rc{constructor(o,u){this._database=o,this._delegate=u}val(){return(0,re.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,re.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,re.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,re.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,re.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),_u("DataSnapshot.child","path",o,!1),new Rc(this._database,this._delegate.child(o))}hasChild(o){return(0,re.Dv)("DataSnapshot.hasChild",1,1,arguments.length),_u("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,re.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,re.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,re.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(u=>o(new Rc(this._database,u)))}hasChildren(){return(0,re.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,re.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,re.Dv)("DataSnapshot.ref",0,0,arguments.length),new ou(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Es{constructor(o,u){this.database=o,this._delegate=u}on(o,u,h,y){var C;(0,re.Dv)("Query.on",2,4,arguments.length),(0,re.Wj)("Query.on","callback",u,!1);const R=Es.getCancelAndContextArgs_("Query.on",h,y),K=(se,Re)=>{u.call(R.context,new Rc(this.database,se),Re)};K.userCallback=u,K.context=R.context;const J=null===(C=R.cancel)||void 0===C?void 0:C.bind(R.context);switch(o){case"value":return Eg(this._delegate,K,J),u;case"child_added":return oh(this._delegate,K,J),u;case"child_removed":return Tm(this._delegate,K,J),u;case"child_changed":return Dm(this._delegate,K,J),u;case"child_moved":return gp(this._delegate,K,J),u;default:throw new Error((0,re.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,u,h){if((0,re.Dv)("Query.off",0,3,arguments.length),function(l,o,u){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,re.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,re.Wj)("Query.off","callback",u,!0),(0,re.lb)("Query.off","context",h,!0),u){const y=()=>{};y.userCallback=u,y.context=h,mp(this._delegate,o,y)}else mp(this._delegate,o)}get(){return function wg(l){return mm((l=(0,re.m9)(l))._repo,l).then(o=>new hl(o,new yu(l._repo,l._path),l._queryParams.getIndex()))}(this._delegate).then(o=>new Rc(this.database,o))}once(o,u,h,y){(0,re.Dv)("Query.once",1,4,arguments.length),(0,re.Wj)("Query.once","callback",u,!0);const C=Es.getCancelAndContextArgs_("Query.once",h,y),R=new re.BH,K=(se,Re)=>{const Be=new Rc(this.database,se);u&&u.call(C.context,Be,Re),R.resolve(Be)};K.userCallback=u,K.context=C.context;const J=se=>{C.cancel&&C.cancel.call(C.context,se),R.reject(se)};switch(o){case"value":Eg(this._delegate,K,J,{onlyOnce:!0});break;case"child_added":oh(this._delegate,K,J,{onlyOnce:!0});break;case"child_removed":Tm(this._delegate,K,J,{onlyOnce:!0});break;case"child_changed":Dm(this._delegate,K,J,{onlyOnce:!0});break;case"child_moved":gp(this._delegate,K,J,{onlyOnce:!0});break;default:throw new Error((0,re.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return R.promise}limitToFirst(o){return(0,re.Dv)("Query.limitToFirst",1,1,arguments.length),new Es(this.database,Io(this._delegate,function pd(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Eo(l)}(o)))}limitToLast(o){return(0,re.Dv)("Query.limitToLast",1,1,arguments.length),new Es(this.database,Io(this._delegate,function Bl(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new aa(l)}(o)))}orderByChild(o){return(0,re.Dv)("Query.orderByChild",1,1,arguments.length),new Es(this.database,Io(this._delegate,function vu(l){if("$key"===l)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===l)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===l)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return _u("orderByChild","path",l,!1),new yp(l)}(o)))}orderByKey(){return(0,re.Dv)("Query.orderByKey",0,0,arguments.length),new Es(this.database,Io(this._delegate,function lh(){return new hf}()))}orderByPriority(){return(0,re.Dv)("Query.orderByPriority",0,0,arguments.length),new Es(this.database,Io(this._delegate,function ch(){return new Sc}()))}orderByValue(){return(0,re.Dv)("Query.orderByValue",0,0,arguments.length),new Es(this.database,Io(this._delegate,function dh(){return new Ac}()))}startAt(o=null,u){return(0,re.Dv)("Query.startAt",0,2,arguments.length),new Es(this.database,Io(this._delegate,function Ig(l=null,o){return dl("startAt","key",o,!0),new fd(l,o)}(o,u)))}startAfter(o=null,u){return(0,re.Dv)("Query.startAfter",0,2,arguments.length),new Es(this.database,Io(this._delegate,function df(l,o){return dl("startAfter","key",o,!0),new h_(l,o)}(o,u)))}endAt(o=null,u){return(0,re.Dv)("Query.endAt",0,2,arguments.length),new Es(this.database,Io(this._delegate,function ah(l,o){return dl("endAt","key",o,!0),new _p(l,o)}(o,u)))}endBefore(o=null,u){return(0,re.Dv)("Query.endBefore",0,2,arguments.length),new Es(this.database,Io(this._delegate,function uh(l,o){return dl("endBefore","key",o,!0),new Tc(l,o)}(o,u)))}equalTo(o,u){return(0,re.Dv)("Query.equalTo",1,2,arguments.length),new Es(this.database,Io(this._delegate,function gd(l,o){return dl("equalTo","key",o,!0),new xc(l,o)}(o,u)))}toString(){return(0,re.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,re.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,re.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Es))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,u,h){const y={cancel:void 0,context:void 0};if(u&&h)y.cancel=u,(0,re.Wj)(o,"cancel",y.cancel,!0),y.context=h,(0,re.lb)(o,"context",y.context,!0);else if(u)if("object"==typeof u&&null!==u)y.context=u;else{if("function"!=typeof u)throw new Error((0,re.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");y.cancel=u}return y}get ref(){return new ou(this.database,new yu(this._delegate._repo,this._delegate._path))}}class ou extends Es{constructor(o,u){super(o,new oa(u._repo,u._path,new m,!1)),this.database=o,this._delegate=u}getKey(){return(0,re.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,re.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new ou(this.database,bc(this._delegate,o))}getParent(){(0,re.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new ou(this.database,o):null}getRoot(){return(0,re.Dv)("Reference.root",0,0,arguments.length),new ou(this.database,this._delegate.root)}set(o,u){(0,re.Dv)("Reference.set",1,2,arguments.length),(0,re.Wj)("Reference.set","onComplete",u,!0);const h=hp(this._delegate,o);return u&&h.then(()=>u(null),y=>u(y)),h}update(o,u){if((0,re.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let C=0;C<o.length;++C)y[""+C]=o[C];o=y,Ag("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ho("Reference.update",this._delegate._path),(0,re.Wj)("Reference.update","onComplete",u,!0);const h=bm(this._delegate,o);return u&&h.then(()=>u(null),y=>u(y)),h}setWithPriority(o,u,h){(0,re.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,re.Wj)("Reference.setWithPriority","onComplete",h,!0);const y=function fp(l,o,u){if(Ho("setWithPriority",l._path),cl("setWithPriority",o,l._path,!1),ud("setWithPriority",u,!1),".length"===l.key||".keys"===l.key)throw"setWithPriority failed: "+l.key+" is a read-only object.";const h=new re.BH;return sf(l._repo,l._path,o,u,h.wrapCallback(()=>{})),h.promise}(this._delegate,o,u);return h&&y.then(()=>h(null),C=>h(C)),y}remove(o){(0,re.Dv)("Reference.remove",0,1,arguments.length),(0,re.Wj)("Reference.remove","onComplete",o,!0);const u=function Im(l){return Ho("remove",l._path),hp(l,null)}(this._delegate);return o&&u.then(()=>o(null),h=>o(h)),u}transaction(o,u,h){(0,re.Dv)("Reference.transaction",1,3,arguments.length),(0,re.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,re.Wj)("Reference.transaction","onComplete",u,!0),function(l,o,u,h){if(void 0!==u&&"boolean"!=typeof u)throw new Error((0,re.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,h);const y=function Om(l,o,u){var h;if(l=(0,re.m9)(l),Ho("Reference.transaction",l._path),".length"===l.key||".keys"===l.key)throw"Reference.transaction failed: "+l.key+" is a read-only object.";const y=null===(h=null==u?void 0:u.applyLocally)||void 0===h||h,C=new re.BH,K=Eg(l,()=>{});return function sp(l,o,u,h,y,C){Ll(l,"transaction on "+o);const R={path:o,update:u,onComplete:h,status:null,order:Tu(),applyLocally:C,retryCount:0,unwatcher:y,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},K=uf(l,o,void 0);R.currentInputSnapshot=K;const J=R.update(K.val());if(void 0===J)R.unwatcher(),R.currentOutputSnapshotRaw=null,R.currentOutputSnapshotResolved=null,R.onComplete&&R.onComplete(null,!1,R.currentInputSnapshot);else{nf("transaction failed: Data returned ",J,R.path),R.status=0;const se=sd(l.transactionQueueTree_,o),Re=Bu(se)||[];let Be;Re.push(R),eh(se,Re),"object"==typeof J&&null!==J&&(0,re.r3)(J,".priority")?(Be=(0,re.DV)(J,".priority"),(0,re.hu)(tf(Be),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Be=(Qd(l.serverSyncTree_,o)||xn.EMPTY_NODE).getPriority().val();const Xe=Ia(l),xt=oi(J,Be),Vt=Yf(xt,K,Xe);R.currentOutputSnapshotRaw=xt,R.currentOutputSnapshotResolved=Vt,R.currentWriteId=Ic(l);const jn=$f(l.serverSyncTree_,o,Vt,R.currentWriteId,R.applyLocally);sa(l.eventQueue_,o,jn),Vl(l,l.transactionQueueTree_)}}(l._repo,l._path,o,(J,se,Re)=>{let Be=null;J?C.reject(J):(Be=new hl(Re,new yu(l._repo,l._path),nr),C.resolve(new Pm(se,Be)))},K,y),C.promise}(this._delegate,o,{applyLocally:h}).then(C=>new Fm(C.committed,new Rc(this.database,C.snapshot)));return u&&y.then(C=>u(null,C.committed,C.snapshot),C=>u(C,!1,null)),y}setPriority(o,u){(0,re.Dv)("Reference.setPriority",1,2,arguments.length),(0,re.Wj)("Reference.setPriority","onComplete",u,!0);const h=function Cm(l,o){l=(0,re.m9)(l),Ho("setPriority",l._path),ud("setPriority",o,!1);const u=new re.BH;return sf(l._repo,Qr(l._path,".priority"),o,null,u.wrapCallback(()=>{})),u.promise}(this._delegate,o);return u&&h.then(()=>u(null),y=>u(y)),h}push(o,u){(0,re.Dv)("Reference.push",0,2,arguments.length),(0,re.Wj)("Reference.push","onComplete",u,!0);const h=function su(l,o){l=(0,re.m9)(l),Ho("push",l._path),cl("push",o,l._path,!0);const u=gg(l._repo),h=zc(u),y=bc(l,h),C=bc(l,h);let R;return R=null!=o?hp(C,o).then(()=>C):Promise.resolve(C),y.then=R.then.bind(R),y.catch=R.then.bind(R,void 0),y}(this._delegate,o),y=h.then(R=>new ou(this.database,R));u&&y.then(()=>u(null),R=>u(R));const C=new ou(this.database,h);return C.then=y.then.bind(y),C.catch=y.catch.bind(y,void 0),C}onDisconnect(){return Ho("Reference.onDisconnect",this._delegate._path),new _d(new d_(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class yd{constructor(o,u){this._delegate=o,this.app=u,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Am,forceLongPolling:xm}}useEmulator(o,u,h={}){!function Mm(l,o,u,h={}){(l=(0,re.m9)(l))._checkNotDeleted("useEmulator"),l._instanceStarted&&Ns("Cannot call useEmulator() after instance has already been initialized.");const y=l._repoInternal;let C;if(y.repoInfo_.nodeAdmin)h.mockUserToken&&Ns('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),C=new Gr(Gr.OWNER);else if(h.mockUserToken){const R="string"==typeof h.mockUserToken?h.mockUserToken:(0,re.Sg)(h.mockUserToken,l.app.options.projectId);C=new Gr(R)}!function wp(l,o,u,h){l.repoInfo_=new Xt(`${o}:${u}`,!1,l.repoInfo_.namespace,l.repoInfo_.webSocketOnly,l.repoInfo_.nodeAdmin,l.repoInfo_.persistenceKey,l.repoInfo_.includeNamespaceInQueryParams),h&&(l.authTokenProvider_=h)}(y,o,u,C)}(this._delegate,o,u,h)}ref(o){if((0,re.Dv)("database.ref",0,1,arguments.length),o instanceof ou){const u=vg(this._delegate,o.toString());return new ou(this,u)}{const u=Em(this._delegate,o);return new ou(this,u)}}refFromURL(o){(0,re.Dv)("database.refFromURL",1,1,arguments.length);const h=vg(this._delegate,o);return new ou(this,h)}goOffline(){return(0,re.Dv)("database.goOffline",0,0,arguments.length),function ff(l){(l=(0,re.m9)(l))._checkNotDeleted("goOffline"),vm(l._repo)}(this._delegate)}goOnline(){return(0,re.Dv)("database.goOnline",0,0,arguments.length),function f_(l){(l=(0,re.m9)(l))._checkNotDeleted("goOnline"),function _g(l){l.persistentConnection_&&l.persistentConnection_.resume(pg)}(l._repo)}(this._delegate)}}yd.ServerValue={TIMESTAMP:function Dg(){return g_}(),increment:l=>function Tg(l){return{".sv":{increment:l}}}(l)};var Rg=Object.freeze({__proto__:null,initStandalone:function y_({app:l,url:o,version:u,customAuthImpl:h,namespace:y,nodeAdmin:C=!1}){Ji(u);const R=new li.zt("auth-internal",new li.H0("database-standalone"));return R.setComponent(new li.wA("auth-internal",()=>h,"PRIVATE")),{instance:new yd(bg(l,R,void 0,o,C),l),namespace:y}}});const Tp=yd.ServerValue;function Mg(l){return null==l}function Sp(l){return"function"==typeof l.set}function Ng(l,o){return Sp(o)?o:l.ref(o)}function Pg(l,o){if(function Lm(l){return"string"==typeof l}(l))return o.stringCase();if(Sp(l))return o.firebaseCase();if(function w_(l){return"function"==typeof l.exportVal}(l))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof l)}function vd(l,o,u="on",h=us.z){return new Ei.y(y=>{let C=null;return C=l[u](o,(R,K)=>{h.schedule(()=>{y.next({snapshot:R,prevKey:K})}),"once"===u&&h.schedule(()=>y.complete())},R=>{h.schedule(()=>y.error(R))}),"on"===u?{unsubscribe(){null!=C&&l.off(o,C)}}:{unsubscribe(){}}}).pipe((0,Tn.U)(y=>{const{snapshot:C,prevKey:R}=y;let K=null;return C.exists()&&(K=C.key),{type:o,payload:C,prevKey:R,key:K}}),(0,hr.B)())}function mr(l,o){const u=l.length;for(let h=0;h<u;h++)if(l[h].payload.key===o)return h;return-1}function xp(l,o){const{payload:u,prevKey:h,key:y}=o,C=mr(l,y),R=function Og(l,o){if(Mg(o))return 0;{const u=mr(l,o);return-1===u?l.length:u+1}}(l,h);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let K=null;o.payload.forEach(J=>{const se={payload:J,type:"value",prevKey:K,key:J.key};return K=J.key,l=[...l,se],!1})}return l;case"child_added":if(C>-1){const K=l[C-1];(K&&K.key||null)!==h&&(l=l.filter(J=>J.payload.key!==u.key)).splice(R,0,o)}else{if(null==h)return[o,...l];(l=l.slice()).splice(R,0,o)}return l;case"child_removed":return l.filter(K=>K.payload.key!==u.key);case"child_changed":return l.map(K=>K.payload.key===y?o:K);case"child_moved":if(C>-1){const K=l.splice(C,1)[0];return(l=l.slice()).splice(R,0,K),l}return l;default:return l}}function pf(l){return(Mg(l)||0===l.length)&&(l=["child_added","child_removed","child_changed","child_moved"]),l}function Rp(l,o,u){return function Ap(l,o,u){return vd(l,"value","once",u).pipe((0,gt.w)(h=>{const y=[(0,bs.of)(h)];return o.forEach(C=>y.push(vd(l,C,"on",u))),(0,Gt.T)(...y).pipe((0,Hn.R)(xp,[]))}),(0,so.x)())}(l,o=pf(o),u)}function Gi(l,o,u){const h=(o=pf(o)).map(y=>vd(l,y,"on",u));return(0,Gt.T)(...h)}function Mp(l,o){return function(h,y){return Pg(h,{stringCase:()=>l.child(h)[o](y),firebaseCase:()=>h[o](y),snapshotCase:()=>h.ref[o](y)})}}function fh(l){return function(u){return u?Pg(u,{stringCase:()=>l.child(u).remove(),firebaseCase:()=>u.remove(),snapshotCase:()=>u.ref.remove()}):l.remove()}}function ph(l,o){return function(){return vd(l,"value","on",o)}}!function v_(l){l.INTERNAL.registerComponent(new li.wA("database-compat",(o,{instanceIdentifier:u})=>{const h=o.getProvider("app-compat").getImmediate(),y=o.getProvider("database").getImmediate({identifier:u});return new yd(y,h)},"PUBLIC").setServiceProps({Reference:ou,Query:Es,Database:yd,DataSnapshot:Rc,enableLogging:p_,INTERNAL:Rg,ServerValue:Tp}).setMultipleInstances(!0)),l.registerVersion("@firebase/database-compat","0.2.2")}(Sn.Z);const gf=new ne.OlP("angularfire2.realtimeDatabaseURL"),ny=new ne.OlP("angularfire2.database.use-emulator");let E_=(()=>{class l{constructor(u,h,y,C,R,K,J,se,Re,Be,Xe,xt,Vt,jn,sr){this.schedulers=K;const uo=J,Vs=(0,Cr.on)(u,R,h);se&&(0,rr.nw)(Vs,R,Re,Xe,xt,Vt,Be,jn),this.database=(0,Cr.cc)(`${Vs.name}.database.${y}`,"AngularFireDatabase",Vs.name,()=>{const Mi=R.runOutsideAngular(()=>Vs.database(y||void 0));return uo&&Mi.useEmulator(...uo),Mi},[uo])}list(u,h){const y=this.schedulers.ngZone.runOutsideAngular(()=>Ng(this.database,u));let C=y;return h&&(C=h(y)),function Vm(l,o){const u=o.schedulers.outsideAngular,h=o.schedulers.ngZone.run(()=>l.ref);return{query:l,update:Mp(h,"update"),set:Mp(h,"set"),push:y=>h.push(y),remove:fh(h),snapshotChanges:y=>Rp(l,y,u).pipe(At.iC),stateChanges:y=>Gi(l,y,u).pipe(At.iC),auditTrail:y=>function ba(l,o,u){return function kg(l,o,u){return function Oa(l,o){return vd(l,"value","on",o).pipe((0,Tn.U)(u=>{let h;return u.payload.forEach(y=>(h=y.key,!1)),{data:u,lastKeyToLoad:h}}))}(l,u).pipe(function No(...l){const o=(0,an.jO)(l);return(0,Vr.e)((u,h)=>{const y=l.length,C=new Array(y);let R=l.map(()=>!1),K=!1;for(let J=0;J<y;J++)(0,Qo.Xf)(l[J]).subscribe((0,cr.x)(h,se=>{C[J]=se,!K&&!R[J]&&(R[J]=!0,(K=R.every(Ha.y))&&(R=null))},va.Z));u.subscribe((0,cr.x)(h,J=>{if(K){const se=[J,...C];h.next(o?o(...se):se)}}))})}(o),(0,Tn.U)(([y,C])=>{const R=y.lastKeyToLoad,K=C.map(J=>J.key);return{actions:C,lastKeyToLoad:R,loadedKeys:K}}),function yl(l){return(0,Vr.e)((o,u)=>{let h=!1,y=0;o.subscribe((0,cr.x)(u,C=>(h||(h=!l(C,y++)))&&u.next(C)))})}(y=>-1===y.loadedKeys.indexOf(y.lastKeyToLoad)),(0,Tn.U)(y=>y.actions))}(l,Gi(l,o).pipe((0,Hn.R)((y,C)=>[...y,C],[])),u)}(l,y,u).pipe(At.iC),valueChanges:(y,C)=>Rp(l,y,u).pipe((0,Tn.U)(K=>K.map(J=>C&&C.idField?Object.assign(Object.assign({},J.payload.val()),{[C.idField]:J.key}):J.payload.val())),At.iC)}}(C,this)}object(u){return function Np(l,o){return{query:l,snapshotChanges:()=>ph(l,o.schedulers.outsideAngular)().pipe(At.iC),update:u=>l.ref.update(u),set:u=>l.ref.set(u),remove:()=>l.ref.remove(),valueChanges:()=>ph(l,o.schedulers.outsideAngular)().pipe(At.iC,(0,Tn.U)(h=>h.payload.exists()?h.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Ng(this.database,u)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return l.\u0275fac=function(u){return new(u||l)(ne.LFG(Cr.Dh),ne.LFG(Cr.xv,8),ne.LFG(gf,8),ne.LFG(ne.Lbi),ne.LFG(ne.R0b),ne.LFG(At.HU),ne.LFG(ny,8),ne.LFG(rr.zQ,8),ne.LFG(rr.Qv,8),ne.LFG(rr.L6,8),ne.LFG(rr._Q,8),ne.LFG(rr.rT,8),ne.LFG(rr.lh,8),ne.LFG(rr.f7,8),ne.LFG(Pr.nm,8))},l.\u0275prov=ne.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),Wi=(()=>{class l{constructor(){Mo.Z.registerVersion("angularfire",At.q4.full,"rtdb-compat")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({providers:[E_]}),l})();const Um=[{path:"auth",children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",loadChildren:()=>Promise.all([$.e(592),$.e(31)]).then($.bind($,9031)).then(l=>l.LoginModule)},{path:"register",loadChildren:()=>Promise.all([$.e(592),$.e(128)]).then($.bind($,7128)).then(l=>l.RegisterModule)}]}],I_={apiKey:"AIzaSyAg8NwlLXjVcTMW0QqEeYODtdoSckv2bYQ",authDomain:"fitnessapp-a65a1.firebaseapp.com",projectId:"fitnessapp-a65a1",storageBucket:"fitnessapp-a65a1.appspot.com",messagingSenderId:"441862111873",appId:"1:441862111873:web:70acd7dd3732c3b4ce0380",measurementId:"G-1FSQ30KPB9"};let zs=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=ne.oAB({type:l}),l.\u0275inj=ne.cJS({imports:[[w.ez,ui.Bz.forChild(Um),Cr.hO.initializeApp(I_),rr.ww,Un.yb,Ft,Wi,Ni.m.forRoot()]]}),l})(),Pp=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=ne.oAB({type:l,bootstrap:[Ir]}),l.\u0275inj=ne.cJS({providers:[],imports:[[Er,vn,zs]]}),l})();(0,ne.G48)(),Lr().bootstrapModule(Pp).catch(l=>console.error(l))},5867:(St,je,$)=>{$.d(je,{Mq:()=>w.getApp,C6:()=>w.getApps});var w=$(9681);(0,w.registerVersion)("firebase","9.8.4","app")},127:(St,je,$)=>{$.d(je,{Z:()=>w.Z});var w=$(3942);w.Z.registerVersion("firebase","9.8.4","app-compat")},3677:(St,je,$)=>{$.r(je);var w=$(5861),ne=$(3942),te=$(2090),xe=$(9681),Ee=$(655),ye=$(1877),Le=$(4859);const ot=function wt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},It=function st(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ye=new te.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new ye.Yd("@firebase/auth");function Tt(E,...p){Ie.logLevel<=ye.in.ERROR&&Ie.error(`Auth (${xe.SDK_VERSION}): ${E}`,...p)}function rt(E,...p){throw ft(E,...p)}function Qe(E,...p){return ft(E,...p)}function He(E,p,m){const T=Object.assign(Object.assign({},It()),{[p]:m});return new te.LL("auth","Firebase",T).create(p,{appName:E.name})}function qe(E,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&rt(E,"argument-error"),He(E,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ft(E,...p){if("string"!=typeof E){const m=p[0],T=[...p.slice(1)];return T[0]&&(T[0].appName=E.name),E._errorFactory.create(m,...T)}return Ye.create(E,...p)}function oe(E,p,...m){if(!E)throw ft(p,...m)}function et(E){const p="INTERNAL ASSERTION FAILED: "+E;throw Tt(p),new Error(p)}function he(E,p){E||et(p)}const De=new Map;function Me(E){he(E instanceof Function,"Expected a class definition");let p=De.get(E);return p?(he(p instanceof E,"Instance stored in cache mismatched with class"),p):(p=new E,De.set(E,p),p)}function pt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function bt(){return"http:"===$t()||"https:"===$t()}function $t(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class en{constructor(p,m){this.shortDelay=p,this.longDelay=m,he(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,te.uI)()||(0,te.b$)()}get(){return function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,te.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zt(E,p){he(E.emulator,"Emulator should always be set here");const{url:m}=E.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Qt{static initialize(p,m,T){this.fetchImpl=p,m&&(this.headersImpl=m),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void et("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void et("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void et("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},bn=new en(3e4,6e4);function nn(E,p){return E.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:E.tenantId}):p}function cn(E,p,m,T){return pr.apply(this,arguments)}function pr(){return(pr=(0,w.Z)(function*(E,p,m,T,G={}){return or(E,G,(0,w.Z)(function*(){let ee={},Ce={};T&&("GET"===p?Ce=T:ee={body:JSON.stringify(T)});const nt=(0,te.xO)(Object.assign({key:E.config.apiKey},Ce)).slice(1),Dt=yield E._getAdditionalHeaders();return Dt["Content-Type"]="application/json",E.languageCode&&(Dt["X-Firebase-Locale"]=E.languageCode),Qt.fetch()(zn(E,E.config.apiHost,m,nt),Object.assign({method:p,headers:Dt,referrerPolicy:"no-referrer"},ee))}))})).apply(this,arguments)}function or(E,p,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,w.Z)(function*(E,p,m){E._canInitEmulator=!1;const T=Object.assign(Object.assign({},Yt),p);try{const G=new Er(E),ee=yield Promise.race([m(),G.promise]);G.clearNetworkTimeout();const Ce=yield ee.json();if("needConfirmation"in Ce)throw Zn(E,"account-exists-with-different-credential",Ce);if(ee.ok&&!("errorMessage"in Ce))return Ce;{const nt=ee.ok?Ce.errorMessage:Ce.error.message,[Dt,Lt]=nt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Dt)throw Zn(E,"credential-already-in-use",Ce);if("EMAIL_EXISTS"===Dt)throw Zn(E,"email-already-in-use",Ce);if("USER_DISABLED"===Dt)throw Zn(E,"user-disabled",Ce);const gn=T[Dt]||Dt.toLowerCase().replace(/[_\s]+/g,"-");if(Lt)throw He(E,gn,Lt);rt(E,gn)}}catch(G){if(G instanceof te.ZR)throw G;rt(E,"network-request-failed")}})).apply(this,arguments)}function gr(E,p,m,T){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,w.Z)(function*(E,p,m,T,G={}){const ee=yield cn(E,p,m,T,G);return"mfaPendingCredential"in ee&&rt(E,"multi-factor-auth-required",{_serverResponse:ee}),ee})).apply(this,arguments)}function zn(E,p,m,T){const G=`${p}${m}?${T}`;return E.config.emulator?Zt(E.config,G):`${E.config.apiScheme}://${G}`}class Er{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,T)=>{this.timer=setTimeout(()=>T(Qe(this.auth,"network-request-failed")),bn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zn(E,p,m){const T={appName:E.name};m.email&&(T.email=m.email),m.phoneNumber&&(T.phoneNumber=m.phoneNumber);const G=Qe(E,p,T);return G.customData._tokenResponse=m,G}function Ln(){return(Ln=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function wn(E,p){return pn.apply(this,arguments)}function pn(){return(pn=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function as(E,p){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Xr(E){if(E)try{const p=new Date(Number(E));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function _r(){return(_r=(0,w.Z)(function*(E,p=!1){const m=(0,te.m9)(E),T=yield m.getIdToken(p),G=jt(T);oe(G&&G.exp&&G.auth_time&&G.iat,m.auth,"internal-error");const ee="object"==typeof G.firebase?G.firebase:void 0,Ce=null==ee?void 0:ee.sign_in_provider;return{claims:G,token:T,authTime:Xr(Rt(G.auth_time)),issuedAtTime:Xr(Rt(G.iat)),expirationTime:Xr(Rt(G.exp)),signInProvider:Ce||null,signInSecondFactor:(null==ee?void 0:ee.sign_in_second_factor)||null}})).apply(this,arguments)}function Rt(E){return 1e3*Number(E)}function jt(E){var p;const[m,T,G]=E.split(".");if(void 0===m||void 0===T||void 0===G)return Tt("JWT malformed, contained fewer than 3 sections"),null;try{const ee=(0,te.tV)(T);return ee?JSON.parse(ee):(Tt("Failed to decode base64 JWT payload"),null)}catch(ee){return Tt("Caught error parsing JWT payload as JSON",null===(p=ee)||void 0===p?void 0:p.toString()),null}}function Rr(E,p){return qi.apply(this,arguments)}function qi(){return(qi=(0,w.Z)(function*(E,p,m=!1){if(m)return p;try{return yield p}catch(T){throw T instanceof te.ZR&&Dn(T)&&E.auth.currentUser===E&&(yield E.auth.signOut()),T}})).apply(this,arguments)}function Dn({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Is{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const G=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,G)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const T=this.getInterval(p);this.timerId=setTimeout((0,w.Z)(function*(){yield m.iteration()}),T)}iteration(){var p=this;return(0,w.Z)(function*(){var m;try{yield p.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===(null===(m=T)||void 0===m?void 0:m.code)&&p.schedule(!0))}p.schedule()})()}}class wi{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ur(E){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,w.Z)(function*(E){var p;const m=E.auth,T=yield E.getIdToken(),G=yield Rr(E,as(m,{idToken:T}));oe(null==G?void 0:G.users.length,m,"internal-error");const ee=G.users[0];E._notifyReloadListener(ee);const Ce=(null===(p=ee.providerUserInfo)||void 0===p?void 0:p.length)?Se(ee.providerUserInfo):[],nt=ke(E.providerData,Ce),gn=!!E.isAnonymous&&!(E.email&&ee.passwordHash||(null==nt?void 0:nt.length)),ln={uid:ee.localId,displayName:ee.displayName||null,photoURL:ee.photoUrl||null,email:ee.email||null,emailVerified:ee.emailVerified||!1,phoneNumber:ee.phoneNumber||null,tenantId:ee.tenantId||null,providerData:nt,metadata:new wi(ee.createdAt,ee.lastLoginAt),isAnonymous:gn};Object.assign(E,ln)})).apply(this,arguments)}function pe(){return(pe=(0,w.Z)(function*(E){const p=(0,te.m9)(E);yield ur(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ke(E,p){return[...E.filter(T=>!p.some(G=>G.providerId===T.providerId)),...p]}function Se(E){return E.map(p=>{var{providerId:m}=p,T=(0,Ee._T)(p,["providerId"]);return{providerId:m,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function Ke(){return(Ke=(0,w.Z)(function*(E,p){const m=yield or(E,{},(0,w.Z)(function*(){const T=(0,te.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:G,apiKey:ee}=E.config,Ce=zn(E,G,"/v1/token",`key=${ee}`),nt=yield E._getAdditionalHeaders();return nt["Content-Type"]="application/x-www-form-urlencoded",Qt.fetch()(Ce,{method:"POST",headers:nt,body:T})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){oe(p.idToken,"internal-error"),oe(void 0!==p.idToken,"internal-error"),oe(void 0!==p.refreshToken,"internal-error");const m="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function Wt(E){const p=jt(E);return oe(p,"internal-error"),oe(void 0!==p.exp,"internal-error"),oe(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var T=this;return(0,w.Z)(function*(){return oe(!T.accessToken||T.refreshToken,p,"user-token-expired"),m||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(p,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var T=this;return(0,w.Z)(function*(){const{accessToken:G,refreshToken:ee,expiresIn:Ce}=yield function le(E,p){return Ke.apply(this,arguments)}(p,m);T.updateTokensAndExpiration(G,ee,Number(Ce))})()}updateTokensAndExpiration(p,m,T){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(p,m){const{refreshToken:T,accessToken:G,expirationTime:ee}=m,Ce=new vt;return T&&(oe("string"==typeof T,"internal-error",{appName:p}),Ce.refreshToken=T),G&&(oe("string"==typeof G,"internal-error",{appName:p}),Ce.accessToken=G),ee&&(oe("number"==typeof ee,"internal-error",{appName:p}),Ce.expirationTime=ee),Ce}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return et("not implemented")}}function Pt(E,p){oe("string"==typeof E||void 0===E,"internal-error",{appName:p})}class tn{constructor(p){var{uid:m,auth:T,stsTokenManager:G}=p,ee=(0,Ee._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Is(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=T,this.stsTokenManager=G,this.accessToken=G.accessToken,this.displayName=ee.displayName||null,this.email=ee.email||null,this.emailVerified=ee.emailVerified||!1,this.phoneNumber=ee.phoneNumber||null,this.photoURL=ee.photoURL||null,this.isAnonymous=ee.isAnonymous||!1,this.tenantId=ee.tenantId||null,this.providerData=ee.providerData?[...ee.providerData]:[],this.metadata=new wi(ee.createdAt||void 0,ee.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,w.Z)(function*(){const T=yield Rr(m,m.stsTokenManager.getToken(m.auth,p));return oe(T,m.auth,"internal-error"),m.accessToken!==T&&(m.accessToken=T,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),T})()}getIdTokenResult(p){return function vi(E){return _r.apply(this,arguments)}(this,p)}reload(){return function Te(E){return pe.apply(this,arguments)}(this)}_assign(p){this!==p&&(oe(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new tn(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var T=this;return(0,w.Z)(function*(){let G=!1;p.idToken&&p.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(p),G=!0),m&&(yield ur(T)),yield T.auth._persistUserIfCurrent(T),G&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var p=this;return(0,w.Z)(function*(){const m=yield p.getIdToken();return yield Rr(p,function Ht(E,p){return Ln.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var T,G,ee,Ce,nt,Dt,Lt,gn;const ln=null!==(T=m.displayName)&&void 0!==T?T:void 0,es=null!==(G=m.email)&&void 0!==G?G:void 0,ao=null!==(ee=m.phoneNumber)&&void 0!==ee?ee:void 0,Kc=null!==(Ce=m.photoURL)&&void 0!==Ce?Ce:void 0,qc=null!==(nt=m.tenantId)&&void 0!==nt?nt:void 0,Ea=null!==(Dt=m._redirectEventId)&&void 0!==Dt?Dt:void 0,oc=null!==(Lt=m.createdAt)&&void 0!==Lt?Lt:void 0,mu=null!==(gn=m.lastLoginAt)&&void 0!==gn?gn:void 0,{uid:rl,emailVerified:Bd,isAnonymous:Ph,providerData:Oh,stsTokenManager:kh}=m;oe(rl&&kh,p,"internal-error");const jo=vt.fromJSON(this.name,kh);oe("string"==typeof rl,p,"internal-error"),Pt(ln,p.name),Pt(es,p.name),oe("boolean"==typeof Bd,p,"internal-error"),oe("boolean"==typeof Ph,p,"internal-error"),Pt(ao,p.name),Pt(Kc,p.name),Pt(qc,p.name),Pt(Ea,p.name),Pt(oc,p.name),Pt(mu,p.name);const ra=new tn({uid:rl,auth:p,email:es,emailVerified:Bd,displayName:ln,isAnonymous:Ph,photoURL:Kc,phoneNumber:ao,tenantId:qc,stsTokenManager:jo,createdAt:oc,lastLoginAt:mu});return Oh&&Array.isArray(Oh)&&(ra.providerData=Oh.map(jd=>Object.assign({},jd))),Ea&&(ra._redirectEventId=Ea),ra}static _fromIdTokenResponse(p,m,T=!1){return(0,w.Z)(function*(){const G=new vt;G.updateFromServerResponse(m);const ee=new tn({uid:m.localId,auth:p,stsTokenManager:G,isAnonymous:T});return yield ur(ee),ee})()}}const Qn=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(m,T){var G=this;return(0,w.Z)(function*(){G.storage[m]=T})()}_get(m){var T=this;return(0,w.Z)(function*(){const G=T.storage[m];return void 0===G?null:G})()}_remove(m){var T=this;return(0,w.Z)(function*(){delete T.storage[m]})()}_addListener(m,T){}_removeListener(m,T){}}return E.type="NONE",E})();function yn(E,p,m){return`firebase:${E}:${p}:${m}`}class lr{constructor(p,m,T){this.persistence=p,this.auth=m,this.userKey=T;const{config:G,name:ee}=this.auth;this.fullUserKey=yn(this.userKey,G.apiKey,ee),this.fullPersistenceKey=yn("persistence",G.apiKey,ee),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,w.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?tn._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,w.Z)(function*(){if(m.persistence===p)return;const T=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,T?m.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,T="authUser"){return(0,w.Z)(function*(){if(!m.length)return new lr(Me(Qn),p,T);const G=(yield Promise.all(m.map(function(){var Lt=(0,w.Z)(function*(gn){if(yield gn._isAvailable())return gn});return function(gn){return Lt.apply(this,arguments)}}()))).filter(Lt=>Lt);let ee=G[0]||Me(Qn);const Ce=yn(T,p.config.apiKey,p.name);let nt=null;for(const Lt of m)try{const gn=yield Lt._get(Ce);if(gn){const ln=tn._fromJSON(p,gn);Lt!==ee&&(nt=ln),ee=Lt;break}}catch(gn){}const Dt=G.filter(Lt=>Lt._shouldAllowMigration);return ee._shouldAllowMigration&&Dt.length?(ee=Dt[0],nt&&(yield ee._set(Ce,nt.toJSON())),yield Promise.all(m.map(function(){var Lt=(0,w.Z)(function*(gn){if(gn!==ee)try{yield gn._remove(Ce)}catch(ln){}});return function(gn){return Lt.apply(this,arguments)}}())),new lr(ee,p,T)):new lr(ee,p,T)})()}}function Cs(E){const p=E.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ir(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(ui(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(Cr(p))return"Blackberry";if(rr(p))return"Webos";if(ts(p))return"Safari";if((p.includes("chrome/")||vn(p))&&!p.includes("edge/"))return"Chrome";if(Ni(p))return"Android";{const T=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==T?void 0:T.length))return T[1]}return"Other"}function ui(E=(0,te.z$)()){return/firefox\//i.test(E)}function ts(E=(0,te.z$)()){const p=E.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function vn(E=(0,te.z$)()){return/crios\//i.test(E)}function Ir(E=(0,te.z$)()){return/iemobile/i.test(E)}function Ni(E=(0,te.z$)()){return/android/i.test(E)}function Cr(E=(0,te.z$)()){return/blackberry/i.test(E)}function rr(E=(0,te.z$)()){return/webos/i.test(E)}function Ei(E=(0,te.z$)()){return/iphone|ipad|ipod/i.test(E)}function Vr(E=(0,te.z$)()){return Ei(E)||Ni(E)||rr(E)||Cr(E)||/windows phone/i.test(E)||Ir(E)}function ps(E,p=[]){let m;switch(E){case"Browser":m=Cs((0,te.z$)());break;case"Worker":m=`${Cs((0,te.z$)())}-${E}`;break;default:m=E}const T=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${xe.SDK_VERSION}/${T}`}class Tn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const T=ee=>new Promise((Ce,nt)=>{try{Ce(p(ee))}catch(Dt){nt(Dt)}});T.onAbort=m,this.queue.push(T);const G=this.queue.length-1;return()=>{this.queue[G]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,w.Z)(function*(){var T;if(m.auth.currentUser===p)return;const G=[];try{for(const ee of m.queue)yield ee(p),ee.onAbort&&G.push(ee.onAbort)}catch(ee){G.reverse();for(const Ce of G)try{Ce()}catch(nt){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(T=ee)||void 0===T?void 0:T.message})}})()}}class gt{constructor(p,m,T){this.app=p,this.heartbeatServiceProvider=m,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sn(this),this.idTokenSubscription=new Sn(this),this.beforeStateQueue=new Tn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(p,m){var T=this;return m&&(this._popupRedirectResolver=Me(m)),this._initializationPromise=this.queue((0,w.Z)(function*(){var G,ee;if(!T._deleted&&(T.persistenceManager=yield lr.create(T,p),!T._deleted)){if(null===(G=T._popupRedirectResolver)||void 0===G?void 0:G._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch(Ce){}yield T.initializeCurrentUser(m),T.lastNotifiedUid=(null===(ee=T.currentUser)||void 0===ee?void 0:ee.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,w.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,w.Z)(function*(){var T;const G=yield m.assertedPersistence.getCurrentUser();let ee=G,Ce=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const nt=null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId,Dt=null==ee?void 0:ee._redirectEventId,Lt=yield m.tryRedirectSignIn(p);(!nt||nt===Dt)&&(null==Lt?void 0:Lt.user)&&(ee=Lt.user,Ce=!0)}if(!ee)return m.directlySetCurrentUser(null);if(!ee._redirectEventId){if(Ce)try{yield m.beforeStateQueue.runMiddleware(ee)}catch(nt){ee=G,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(nt))}return ee?m.reloadAndSetCurrentUserOrClear(ee):m.directlySetCurrentUser(null)}return oe(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===ee._redirectEventId?m.directlySetCurrentUser(ee):m.reloadAndSetCurrentUserOrClear(ee)})()}tryRedirectSignIn(p){var m=this;return(0,w.Z)(function*(){let T=null;try{T=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch(G){yield m._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,w.Z)(function*(){var T;try{yield ur(p)}catch(G){if("auth/network-request-failed"!==(null===(T=G)||void 0===T?void 0:T.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function tt(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var p=this;return(0,w.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,w.Z)(function*(){const T=p?(0,te.m9)(p):null;return T&&oe(T.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(T&&T._clone(m))})()}_updateCurrentUser(p,m=!1){var T=this;return(0,w.Z)(function*(){if(!T._deleted)return p&&oe(T.tenantId===p.tenantId,T,"tenant-id-mismatch"),m||(yield T.beforeStateQueue.runMiddleware(p)),T.queue((0,w.Z)(function*(){yield T.directlySetCurrentUser(p),T.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,w.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,w.Z)(function*(){yield m.assertedPersistence.setPersistence(Me(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new te.LL("auth","Firebase",p())}onAuthStateChanged(p,m,T){return this.registerStateListener(this.authStateSubscription,p,m,T)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,T){return this.registerStateListener(this.idTokenSubscription,p,m,T)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var T=this;return(0,w.Z)(function*(){const G=yield T.getOrInitRedirectPersistenceManager(m);return null===p?G.removeCurrentUser():G.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,w.Z)(function*(){if(!m.redirectPersistenceManager){const T=p&&Me(p)||m._popupRedirectResolver;oe(T,m,"argument-error"),m.redirectPersistenceManager=yield lr.create(m,[Me(T._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,w.Z)(function*(){var T,G;return m._isInitialized&&(yield m.queue((0,w.Z)(function*(){}))),(null===(T=m._currentUser)||void 0===T?void 0:T._redirectEventId)===p?m._currentUser:(null===(G=m.redirectUser)||void 0===G?void 0:G._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,w.Z)(function*(){if(p===m.currentUser)return m.queue((0,w.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,T,G){if(this._deleted)return()=>{};const ee="function"==typeof m?m:m.next.bind(m),Ce=this._isInitialized?Promise.resolve():this._initializationPromise;return oe(Ce,this,"internal-error"),Ce.then(()=>ee(this.currentUser)),"function"==typeof m?p.addObserver(m,T,G):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,w.Z)(function*(){m.currentUser&&m.currentUser!==p&&(m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh()),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=ps(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,w.Z)(function*(){var m;const T={"X-Client-Version":p.clientVersion};p.app.options.appId&&(T["X-Firebase-gmpid"]=p.app.options.appId);const G=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return G&&(T["X-Firebase-Client"]=G),T})()}}function At(E){return(0,te.m9)(E)}class Sn{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,te.ne)(m=>this.observer=m)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Kr(E){const p=E.indexOf(":");return p<0?"":E.substr(0,p+1)}function li(E){if(!E)return null;const p=Number(E);return isNaN(p)?null:p}class Oi{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return et("not implemented")}_getIdTokenResponse(p){return et("not implemented")}_linkToIdToken(p,m){return et("not implemented")}_getReauthenticationResolver(p){return et("not implemented")}}function yr(E,p){return dn.apply(this,arguments)}function dn(){return(dn=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:resetPassword",nn(E,p))})).apply(this,arguments)}function qn(E,p){return ns.apply(this,arguments)}function ns(){return(ns=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Ds(E,p){return ki.apply(this,arguments)}function ki(){return(ki=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:update",nn(E,p))})).apply(this,arguments)}function Mr(){return(Mr=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signInWithPassword",nn(E,p))})).apply(this,arguments)}function ei(E,p){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:sendOobCode",nn(E,p))})).apply(this,arguments)}function kn(E,p){return bo.apply(this,arguments)}function bo(){return(bo=(0,w.Z)(function*(E,p){return ei(E,p)})).apply(this,arguments)}function Ii(E,p){return ci.apply(this,arguments)}function ci(){return(ci=(0,w.Z)(function*(E,p){return ei(E,p)})).apply(this,arguments)}function Fi(E,p){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,w.Z)(function*(E,p){return ei(E,p)})).apply(this,arguments)}function ka(E,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,w.Z)(function*(E,p){return ei(E,p)})).apply(this,arguments)}function Do(){return(Do=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signInWithEmailLink",nn(E,p))})).apply(this,arguments)}function lo(){return(lo=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signInWithEmailLink",nn(E,p))})).apply(this,arguments)}class dr extends Oi{constructor(p,m,T,G=null){super("password",T),this._email=p,this._password=m,this._tenantId=G}static _fromEmailAndPassword(p,m){return new dr(p,m,"password")}static _fromEmailAndCode(p,m,T=null){return new dr(p,m,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,w.Z)(function*(){switch(m.signInMethod){case"password":return function Sr(E,p){return Mr.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function bi(E,p){return Do.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:rt(p,"internal-error")}})()}_linkToIdToken(p,m){var T=this;return(0,w.Z)(function*(){switch(T.signInMethod){case"password":return qn(p,{idToken:m,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function Ts(E,p){return lo.apply(this,arguments)}(p,{idToken:m,email:T._email,oobCode:T._password});default:rt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function vr(E,p){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signInWithIdp",nn(E,p))})).apply(this,arguments)}class Fe extends Oi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Fe(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):rt("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:T,signInMethod:G}=m,ee=(0,Ee._T)(m,["providerId","signInMethod"]);if(!T||!G)return null;const Ce=new Fe(T,G);return Ce.idToken=ee.idToken||void 0,Ce.accessToken=ee.accessToken||void 0,Ce.secret=ee.secret,Ce.nonce=ee.nonce,Ce.pendingToken=ee.pendingToken||null,Ce}_getIdTokenResponse(p){return vr(p,this.buildRequest())}_linkToIdToken(p,m){const T=this.buildRequest();return T.idToken=m,vr(p,T)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,vr(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,te.xO)(m)}return p}}function ut(E,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:sendVerificationCode",nn(E,p))})).apply(this,arguments)}function Mn(){return(Mn=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signInWithPhoneNumber",nn(E,p))})).apply(this,arguments)}function Nn(){return(Nn=(0,w.Z)(function*(E,p){const m=yield gr(E,"POST","/v1/accounts:signInWithPhoneNumber",nn(E,p));if(m.temporaryProof)throw Zn(E,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Zi={USER_NOT_FOUND:"user-not-found"};function To(){return(To=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signInWithPhoneNumber",nn(E,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Zi)})).apply(this,arguments)}class qr extends Oi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new qr({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new qr({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function Nt(E,p){return Mn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function ti(E,p){return Nn.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function ni(E,p){return To.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:T,verificationCode:G}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:T,code:G}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:T,phoneNumber:G,temporaryProof:ee}=p;return T||m||G||ee?new qr({verificationId:m,verificationCode:T,phoneNumber:G,temporaryProof:ee}):null}}class Bs{constructor(p){var m,T,G,ee,Ce,nt;const Dt=(0,te.zd)((0,te.pd)(p)),Lt=null!==(m=Dt.apiKey)&&void 0!==m?m:null,gn=null!==(T=Dt.oobCode)&&void 0!==T?T:null,ln=function ls(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(G=Dt.mode)&&void 0!==G?G:null);oe(Lt&&gn&&ln,"argument-error"),this.apiKey=Lt,this.operation=ln,this.code=gn,this.continueUrl=null!==(ee=Dt.continueUrl)&&void 0!==ee?ee:null,this.languageCode=null!==(Ce=Dt.languageCode)&&void 0!==Ce?Ce:null,this.tenantId=null!==(nt=Dt.tenantId)&&void 0!==nt?nt:null}static parseLink(p){const m=function rs(E){const p=(0,te.zd)((0,te.pd)(E)).link,m=p?(0,te.zd)((0,te.pd)(p)).deep_link_id:null,T=(0,te.zd)((0,te.pd)(E)).deep_link_id;return(T?(0,te.zd)((0,te.pd)(T)).link:null)||T||m||p||E}(p);try{return new Bs(m)}catch(T){return null}}}let Fa=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(m,T){return dr._fromEmailAndPassword(m,T)}static credentialWithLink(m,T){const G=Bs.parseLink(T);return oe(G,"argument-error"),dr._fromEmailAndCode(m,G.code,G.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class Zr{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Ss extends Zr{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class gs extends Ss{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return oe("providerId"in m&&"signInMethod"in m,"argument-error"),Fe._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return oe(p.idToken||p.accessToken,"argument-error"),Fe._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return gs.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return gs.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:T,oauthTokenSecret:G,pendingToken:ee,nonce:Ce,providerId:nt}=p;if(!T&&!G&&!m&&!ee||!nt)return null;try{return new gs(nt)._credential({idToken:m,accessToken:T,nonce:Ce,pendingToken:ee})}catch(Dt){return null}}}let Ys=(()=>{class E extends Ss{constructor(){super("facebook.com")}static credential(m){return Fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(T){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),da=(()=>{class E extends Ss{constructor(){super("google.com"),this.addScope("profile")}static credential(m,T){return Fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:T})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:T,oauthAccessToken:G}=m;if(!T&&!G)return null;try{return E.credential(T,G)}catch(ee){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),js=(()=>{class E extends Ss{constructor(){super("github.com")}static credential(m){return Fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return E.credential(m.oauthAccessToken)}catch(T){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Br extends Oi{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return vr(p,this.buildRequest())}_linkToIdToken(p,m){const T=this.buildRequest();return T.idToken=m,vr(p,T)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,vr(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:T,signInMethod:G,pendingToken:ee}=m;return T&&G&&ee&&T===G?new Br(T,ee):null}static _create(p,m){return new Br(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class di extends Zr{constructor(p){oe(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return di.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return di.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=Br.fromJSON(p);return oe(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:T}=p;if(!m||!T)return null;try{return Br._create(T,m)}catch(G){return null}}}let So=(()=>{class E extends Ss{constructor(){super("twitter.com")}static credential(m,T){return Fe._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:T})}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:T,oauthTokenSecret:G}=m;if(!T||!G)return null;try{return E.credential(T,G)}catch(ee){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function jr(E,p){return As.apply(this,arguments)}function As(){return(As=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signUp",nn(E,p))})).apply(this,arguments)}class hi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,T,G=!1){return(0,w.Z)(function*(){const ee=yield tn._fromIdTokenResponse(p,T,G),Ce=ha(T);return new hi({user:ee,providerId:Ce,_tokenResponse:T,operationType:m})})()}static _forOperation(p,m,T){return(0,w.Z)(function*(){yield p._updateTokensIfNecessary(T,!0);const G=ha(T);return new hi({user:p,providerId:G,_tokenResponse:T,operationType:m})})()}}function ha(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function Li(){return(Li=(0,w.Z)(function*(E){var p;const m=At(E);if(yield m._initializationPromise,null===(p=m.currentUser)||void 0===p?void 0:p.isAnonymous)return new hi({user:m.currentUser,providerId:null,operationType:"signIn"});const T=yield jr(m,{returnSecureToken:!0}),G=yield hi._fromIdTokenResponse(m,"signIn",T,!0);return yield m._updateCurrentUser(G.user),G})).apply(this,arguments)}class Yi extends te.ZR{constructor(p,m,T,G){var ee;super(m.code,m.message),this.operationType=T,this.user=G,Object.setPrototypeOf(this,Yi.prototype),this.customData={appName:p.name,tenantId:null!==(ee=p.tenantId)&&void 0!==ee?ee:void 0,_serverResponse:m.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(p,m,T,G){return new Yi(p,m,T,G)}}function xs(E,p,m,T){return("reauthenticate"===p?m._getReauthenticationResolver(E):m._getIdTokenResponse(E)).catch(ee=>{throw"auth/multi-factor-auth-required"===ee.code?Yi._fromErrorAndOperation(E,ee,p,T):ee})}function Rs(E){return new Set(E.map(({providerId:p})=>p).filter(p=>!!p))}function Vn(){return(Vn=(0,w.Z)(function*(E,p){const m=(0,te.m9)(E);yield V(!0,m,p);const{providerUserInfo:T}=yield wn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),G=Rs(T||[]);return m.providerData=m.providerData.filter(ee=>G.has(ee.providerId)),G.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function L(E,p){return Z.apply(this,arguments)}function Z(){return(Z=(0,w.Z)(function*(E,p,m=!1){const T=yield Rr(E,p._linkToIdToken(E.auth,yield E.getIdToken()),m);return hi._forOperation(E,"link",T)})).apply(this,arguments)}function V(E,p,m){return X.apply(this,arguments)}function X(){return(X=(0,w.Z)(function*(E,p,m){yield ur(p);const G=!1===E?"provider-already-linked":"no-such-provider";oe(Rs(p.providerData).has(m)===E,p.auth,G)})).apply(this,arguments)}function ge(E,p){return Je.apply(this,arguments)}function Je(){return(Je=(0,w.Z)(function*(E,p,m=!1){var T;const{auth:G}=E,ee="reauthenticate";try{const Ce=yield Rr(E,xs(G,ee,p,E),m);oe(Ce.idToken,G,"internal-error");const nt=jt(Ce.idToken);oe(nt,G,"internal-error");const{sub:Dt}=nt;return oe(E.uid===Dt,G,"user-mismatch"),hi._forOperation(E,ee,Ce)}catch(Ce){throw"auth/user-not-found"===(null===(T=Ce)||void 0===T?void 0:T.code)&&rt(G,"user-mismatch"),Ce}})).apply(this,arguments)}function lt(E,p){return zt.apply(this,arguments)}function zt(){return(zt=(0,w.Z)(function*(E,p,m=!1){const T="signIn",G=yield xs(E,T,p),ee=yield hi._fromIdTokenResponse(E,T,G);return m||(yield E._updateCurrentUser(ee.user)),ee})).apply(this,arguments)}function rn(E,p){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,w.Z)(function*(E,p){return lt(At(E),p)})).apply(this,arguments)}function En(E,p){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,w.Z)(function*(E,p){const m=(0,te.m9)(E);return yield V(!1,m,p.providerId),L(m,p)})).apply(this,arguments)}function Nr(E,p){return On.apply(this,arguments)}function On(){return(On=(0,w.Z)(function*(E,p){return ge((0,te.m9)(E),p)})).apply(this,arguments)}function $n(E,p){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,w.Z)(function*(E,p){return gr(E,"POST","/v1/accounts:signInWithCustomToken",nn(E,p))})).apply(this,arguments)}function Kt(){return(Kt=(0,w.Z)(function*(E,p){const m=At(E),T=yield $n(m,{token:p,returnSecureToken:!0}),G=yield hi._fromIdTokenResponse(m,"signIn",T);return yield m._updateCurrentUser(G.user),G})).apply(this,arguments)}class Bi{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Xs._fromServerResponse(p,m):rt(p,"internal-error")}}class Xs extends Bi{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Xs(m)}}function co(E,p,m){var T;oe((null===(T=m.url)||void 0===T?void 0:T.length)>0,E,"invalid-continue-uri"),oe(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(oe(m.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(oe(m.android.packageName.length>0,E,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function B(){return(B=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E),G={requestType:"PASSWORD_RESET",email:p};m&&co(T,G,m),yield Ii(T,G)})).apply(this,arguments)}function O(){return(O=(0,w.Z)(function*(E,p,m){yield yr((0,te.m9)(E),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Ve(){return(Ve=(0,w.Z)(function*(E,p){yield Ds((0,te.m9)(E),{oobCode:p})})).apply(this,arguments)}function kt(E,p){return on.apply(this,arguments)}function on(){return(on=(0,w.Z)(function*(E,p){const m=(0,te.m9)(E),T=yield yr(m,{oobCode:p}),G=T.requestType;switch(oe(G,m,"internal-error"),G){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":oe(T.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":oe(T.mfaInfo,m,"internal-error");default:oe(T.email,m,"internal-error")}let ee=null;return T.mfaInfo&&(ee=Bi._fromServerResponse(At(m),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:ee},operation:G}})).apply(this,arguments)}function fi(){return(fi=(0,w.Z)(function*(E,p){const{data:m}=yield kt((0,te.m9)(E),p);return m.email})).apply(this,arguments)}function fo(){return(fo=(0,w.Z)(function*(E,p,m){const T=At(E),G=yield jr(T,{returnSecureToken:!0,email:p,password:m}),ee=yield hi._fromIdTokenResponse(T,"signIn",G);return yield T._updateCurrentUser(ee.user),ee})).apply(this,arguments)}function pl(){return(pl=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E),G={requestType:"EMAIL_SIGNIN",email:p};oe(m.handleCodeInApp,T,"argument-error"),m&&co(T,G,m),yield Fi(T,G)})).apply(this,arguments)}function gi(){return(gi=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E),G=Fa.credentialWithLink(p,m||pt());return oe(G._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),rn(T,G)})).apply(this,arguments)}function _s(E,p){return La.apply(this,arguments)}function La(){return(La=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:createAuthUri",nn(E,p))})).apply(this,arguments)}function Ms(){return(Ms=(0,w.Z)(function*(E,p){const T={identifier:p,continueUri:bt()?pt():"http://localhost"},{signinMethods:G}=yield _s((0,te.m9)(E),T);return G||[]})).apply(this,arguments)}function ri(){return(ri=(0,w.Z)(function*(E,p){const m=(0,te.m9)(E),G={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};p&&co(m.auth,G,p);const{email:ee}=yield kn(m.auth,G);ee!==E.email&&(yield E.reload())})).apply(this,arguments)}function zu(){return(zu=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E),ee={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:p};m&&co(T.auth,ee,m);const{email:Ce}=yield ka(T.auth,ee);Ce!==E.email&&(yield E.reload())})).apply(this,arguments)}function Eu(E,p){return uu.apply(this,arguments)}function uu(){return(uu=(0,w.Z)(function*(E,p){return cn(E,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Iu(){return(Iu=(0,w.Z)(function*(E,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const T=(0,te.m9)(E),ee={idToken:yield T.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},Ce=yield Rr(T,Eu(T.auth,ee));T.displayName=Ce.displayName||null,T.photoURL=Ce.photoUrl||null;const nt=T.providerData.find(({providerId:Dt})=>"password"===Dt);nt&&(nt.displayName=T.displayName,nt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Ce)})).apply(this,arguments)}function Ko(E,p,m){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,w.Z)(function*(E,p,m){const{auth:T}=E,ee={idToken:yield E.getIdToken(),returnSecureToken:!0};p&&(ee.email=p),m&&(ee.password=m);const Ce=yield Rr(E,qn(T,ee));yield E._updateTokensIfNecessary(Ce,!0)})).apply(this,arguments)}class fa{constructor(p,m,T={}){this.isNewUser=p,this.providerId=m,this.profile=T}}class Cu extends fa{constructor(p,m,T,G){super(p,m,T),this.username=G}}class Ta extends fa{constructor(p,m){super(p,"facebook.com",m)}}class Sa extends Cu{constructor(p,m){super(p,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Wl extends fa{constructor(p,m){super(p,"google.com",m)}}class Di extends Cu{constructor(p,m,T){super(p,"twitter.com",m,T)}}function xo(E){const{user:p,_tokenResponse:m}=E;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function qo(E){var p,m;if(!E)return null;const{providerId:T}=E,G=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},ee=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!T&&(null==E?void 0:E.idToken)){const Ce=null===(m=null===(p=jt(E.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(Ce)return new fa(ee,"anonymous"!==Ce&&"custom"!==Ce?Ce:null)}if(!T)return null;switch(T){case"facebook.com":return new Ta(ee,G);case"github.com":return new Sa(ee,G);case"google.com":return new Wl(ee,G);case"twitter.com":return new Di(ee,G,E.screenName||null);case"custom":case"anonymous":return new fa(ee,null);default:return new fa(ee,T,G)}}(m)}class eo{constructor(p,m){this.type=p,this.credential=m}static _fromIdtoken(p){return new eo("enroll",p)}static _fromMfaPendingCredential(p){return new eo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,T;if(null==p?void 0:p.multiFactorSession){if(null===(m=p.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return eo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null===(T=p.multiFactorSession)||void 0===T?void 0:T.idToken)return eo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class xa{constructor(p,m,T){this.session=p,this.hints=m,this.signInResolver=T}static _fromError(p,m){const T=At(p),G=m.customData._serverResponse,ee=(G.mfaInfo||[]).map(nt=>Bi._fromServerResponse(T,nt));oe(G.mfaPendingCredential,T,"internal-error");const Ce=eo._fromMfaPendingCredential(G.mfaPendingCredential);return new xa(Ce,ee,function(){var nt=(0,w.Z)(function*(Dt){const Lt=yield Dt._process(T,Ce);delete G.mfaInfo,delete G.mfaPendingCredential;const gn=Object.assign(Object.assign({},G),{idToken:Lt.idToken,refreshToken:Lt.refreshToken});switch(m.operationType){case"signIn":const ln=yield hi._fromIdTokenResponse(T,m.operationType,gn);return yield T._updateCurrentUser(ln.user),ln;case"reauthenticate":return oe(m.user,T,"internal-error"),hi._forOperation(m.user,m.operationType,gn);default:rt(T,"internal-error")}});return function(Dt){return nt.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,w.Z)(function*(){return m.signInResolver(p)})()}}function zl(E,p){return cn(E,"POST","/v2/accounts/mfaEnrollment:start",nn(E,p))}class ja{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(T=>Bi._fromServerResponse(p.auth,T)))})}static _fromUser(p){return new ja(p)}getSession(){var p=this;return(0,w.Z)(function*(){return eo._fromIdtoken(yield p.user.getIdToken())})()}enroll(p,m){var T=this;return(0,w.Z)(function*(){const G=p,ee=yield T.getSession(),Ce=yield Rr(T.user,G._process(T.user.auth,ee,m));return yield T.user._updateTokensIfNecessary(Ce),T.user.reload()})()}unenroll(p){var m=this;return(0,w.Z)(function*(){var T;const G="string"==typeof p?p:p.uid,ee=yield m.user.getIdToken(),Ce=yield Rr(m.user,function to(E,p){return cn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",nn(E,p))}(m.user.auth,{idToken:ee,mfaEnrollmentId:G}));m.enrolledFactors=m.enrolledFactors.filter(({uid:nt})=>nt!==G),yield m.user._updateTokensIfNecessary(Ce);try{yield m.user.reload()}catch(nt){if("auth/user-token-expired"!==(null===(T=nt)||void 0===T?void 0:T.code))throw nt}})()}}const Ro=new WeakMap,ga="__sak";class du{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ga,"1"),this.storage.removeItem(ga),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ku=(()=>{class E extends du{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,T)=>this.onStorageEvent(m,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function no(){const E=(0,te.z$)();return ts(E)||Ei(E)}()&&function cr(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Vr(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const T of Object.keys(this.listeners)){const G=this.storage.getItem(T),ee=this.localCache[T];G!==ee&&m(T,ee,G)}}onStorageEvent(m,T=!1){if(!m.key)return void this.forAllChangedKeys((nt,Dt,Lt)=>{this.notifyListeners(nt,Lt)});const G=m.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const nt=this.storage.getItem(G);if(m.newValue!==nt)null!==m.newValue?this.storage.setItem(G,m.newValue):this.storage.removeItem(G);else if(this.localCache[G]===m.newValue&&!T)return}const ee=()=>{const nt=this.storage.getItem(G);!T&&this.localCache[G]===nt||this.notifyListeners(G,nt)},Ce=this.storage.getItem(G);!function us(){return(0,te.w1)()&&10===document.documentMode}()||Ce===m.newValue||m.newValue===m.oldValue?ee():setTimeout(ee,10)}notifyListeners(m,T){this.localCache[m]=T;const G=this.listeners[m];if(G)for(const ee of Array.from(G))ee(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,T,G)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:T,newValue:G}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,T){var G=()=>super._set,ee=this;return(0,w.Z)(function*(){yield G().call(ee,m,T),ee.localCache[m]=JSON.stringify(T)})()}_get(m){var T=()=>super._get,G=this;return(0,w.Z)(function*(){const ee=yield T().call(G,m);return G.localCache[m]=JSON.stringify(ee),ee})()}_remove(m){var T=()=>super._remove,G=this;return(0,w.Z)(function*(){yield T().call(G,m),delete G.localCache[m]})()}}return E.type="LOCAL",E})(),ro=(()=>{class E extends du{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,T){}_removeListener(m,T){}}return E.type="SESSION",E})();let ql=(()=>{class E{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const T=this.receivers.find(ee=>ee.isListeningto(m));if(T)return T;const G=new E(m);return this.receivers.push(G),G}isListeningto(m){return this.eventTarget===m}handleEvent(m){var T=this;return(0,w.Z)(function*(){const G=m,{eventId:ee,eventType:Ce,data:nt}=G.data,Dt=T.handlersMap[Ce];if(!(null==Dt?void 0:Dt.size))return;G.ports[0].postMessage({status:"ack",eventId:ee,eventType:Ce});const Lt=Array.from(Dt).map(function(){var ln=(0,w.Z)(function*(es){return es(G.origin,nt)});return function(es){return ln.apply(this,arguments)}}()),gn=yield function _l(E){return Promise.all(E.map(function(){var p=(0,w.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(T){return{fulfilled:!1,reason:T}}});return function(m){return p.apply(this,arguments)}}()))}(Lt);G.ports[0].postMessage({status:"done",eventId:ee,eventType:Ce,response:gn})})()}_subscribe(m,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(T)}_unsubscribe(m,T){this.handlersMap[m]&&T&&this.handlersMap[m].delete(T),(!T||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function Hs(E="",p=10){let m="";for(let T=0;T<p;T++)m+=Math.floor(10*Math.random());return E+m}class qu{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,T=50){var G=this;return(0,w.Z)(function*(){const ee="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ee)throw new Error("connection_unavailable");let Ce,nt;return new Promise((Dt,Lt)=>{const gn=Hs("",20);ee.port1.start();const ln=setTimeout(()=>{Lt(new Error("unsupported_event"))},T);nt={messageChannel:ee,onMessage(es){const ao=es;if(ao.data.eventId===gn)switch(ao.data.status){case"ack":clearTimeout(ln),Ce=setTimeout(()=>{Lt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ce),Dt(ao.data.response);break;default:clearTimeout(ln),clearTimeout(Ce),Lt(new Error("invalid_response"))}}},G.handlers.add(nt),ee.port1.addEventListener("message",nt.onMessage),G.target.postMessage({eventType:p,eventId:gn,data:m},[ee.port2])}).finally(()=>{nt&&G.removeMessageHandler(nt)})})()}}function Ar(){return window}function Yo(){return void 0!==Ar().WorkerGlobalScope&&"function"==typeof Ar().importScripts}function ma(){return(ma=(0,w.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Zl="firebaseLocalStorageDb",Pr="firebaseLocalStorage",Mo="fbase_key";class ya{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function S(E,p){return E.transaction([Pr],p?"readwrite":"readonly").objectStore(Pr)}function b(){const E=indexedDB.open(Zl,1);return new Promise((p,m)=>{E.addEventListener("error",()=>{m(E.error)}),E.addEventListener("upgradeneeded",()=>{const T=E.result;try{T.createObjectStore(Pr,{keyPath:Mo})}catch(G){m(G)}}),E.addEventListener("success",(0,w.Z)(function*(){const T=E.result;T.objectStoreNames.contains(Pr)?p(T):(T.close(),yield function D(){const E=indexedDB.deleteDatabase(Zl);return new ya(E).toPromise()}(),p(yield b()))}))})}function M(E,p,m){return N.apply(this,arguments)}function N(){return(N=(0,w.Z)(function*(E,p,m){const T=S(E,!0).put({[Mo]:p,value:m});return new ya(T).toPromise()})).apply(this,arguments)}function ae(){return(ae=(0,w.Z)(function*(E,p){const m=S(E,!1).get(p),T=yield new ya(m).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function _e(E,p){const m=S(E,!0).delete(p);return new ya(m).toPromise()}const Gt=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,w.Z)(function*(){return m.db||(m.db=yield b()),m.db})()}_withRetries(m){var T=this;return(0,w.Z)(function*(){let G=0;for(;;)try{const ee=yield T._openDb();return yield m(ee)}catch(ee){if(G++>3)throw ee;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,w.Z)(function*(){return Yo()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,w.Z)(function*(){m.receiver=ql._getInstance(function bu(){return Yo()?self:null}()),m.receiver._subscribe("keyChanged",function(){var T=(0,w.Z)(function*(G,ee){return{keyProcessed:(yield m._poll()).includes(ee.key)}});return function(G,ee){return T.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var T=(0,w.Z)(function*(G,ee){return["keyChanged"]});return function(G,ee){return T.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,w.Z)(function*(){var T,G;if(m.activeServiceWorker=yield function ji(){return ma.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new qu(m.activeServiceWorker);const ee=yield m.sender._send("ping",{},800);!ee||(null===(T=ee[0])||void 0===T?void 0:T.fulfilled)&&(null===(G=ee[0])||void 0===G?void 0:G.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var T=this;return(0,w.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function _a(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:m},T.serviceWorkerReceiverAvailable?800:50)}catch(G){}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const m=yield b();return yield M(m,ga,"1"),yield _e(m,ga),!0}catch(m){}return!1})()}_withPendingWrite(m){var T=this;return(0,w.Z)(function*(){T.pendingWrites++;try{yield m()}finally{T.pendingWrites--}})()}_set(m,T){var G=this;return(0,w.Z)(function*(){return G._withPendingWrite((0,w.Z)(function*(){return yield G._withRetries(ee=>M(ee,m,T)),G.localCache[m]=T,G.notifyServiceWorker(m)}))})()}_get(m){var T=this;return(0,w.Z)(function*(){const G=yield T._withRetries(ee=>function W(E,p){return ae.apply(this,arguments)}(ee,m));return T.localCache[m]=G,G})()}_remove(m){var T=this;return(0,w.Z)(function*(){return T._withPendingWrite((0,w.Z)(function*(){return yield T._withRetries(G=>_e(G,m)),delete T.localCache[m],T.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,w.Z)(function*(){const T=yield m._withRetries(Ce=>{const nt=S(Ce,!1).getAll();return new ya(nt).toPromise()});if(!T)return[];if(0!==m.pendingWrites)return[];const G=[],ee=new Set;for(const{fbase_key:Ce,value:nt}of T)ee.add(Ce),JSON.stringify(m.localCache[Ce])!==JSON.stringify(nt)&&(m.notifyListeners(Ce,nt),G.push(Ce));for(const Ce of Object.keys(m.localCache))m.localCache[Ce]&&!ee.has(Ce)&&(m.notifyListeners(Ce,null),G.push(Ce));return G})()}notifyListeners(m,T){this.localCache[m]=T;const G=this.listeners[m];if(G)for(const ee of Array.from(G))ee(T)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function hr(E,p){return cn(E,"POST","/v2/accounts/mfaSignIn:start",nn(E,p))}function Qo(){return(Qo=(0,w.Z)(function*(E){return(yield cn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function va(E){return new Promise((p,m)=>{const T=document.createElement("script");T.setAttribute("src",E),T.onload=p,T.onerror=G=>{const ee=Qe("internal-error");ee.customData=G,m(ee)},T.type="text/javascript",T.charset="UTF-8",function Ha(){var E,p;return null!==(p=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==p?p:document}().appendChild(T)})}function an(E){return`__${E}${Math.floor(1e6*Math.random())}`}const $r=1e12;class un{constructor(p){this.auth=p,this.counter=$r,this._widgets=new Map}render(p,m){const T=this.counter;return this._widgets.set(T,new vl(p,this.auth.name,m||{})),this.counter++,T}reset(p){var m;const T=p||$r;null===(m=this._widgets.get(T))||void 0===m||m.delete(),this._widgets.delete(T)}getResponse(p){var m;return(null===(m=this._widgets.get(p||$r))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,w.Z)(function*(){var T;return null===(T=m._widgets.get(p||$r))||void 0===T||T.execute(),""})()}}class vl{constructor(p,m,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const G="string"==typeof p?document.getElementById(p):p;oe(G,"argument-error",{appName:m}),this.container=G,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Jn(E){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<E;T++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch(T){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(T){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _i=an("rcb"),Ji=new en(3e4,6e4);class Sd{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ar().grecaptcha}load(p,m=""){return oe(function Oc(E){return E.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Ar().grecaptcha):new Promise((T,G)=>{const ee=Ar().setTimeout(()=>{G(Qe(p,"network-request-failed"))},Ji.get());Ar()[_i]=()=>{Ar().clearTimeout(ee),delete Ar()[_i];const nt=Ar().grecaptcha;if(!nt)return void G(Qe(p,"internal-error"));const Dt=nt.render;nt.render=(Lt,gn)=>{const ln=Dt(Lt,gn);return this.counter++,ln},this.hostLanguage=m,T(nt)},va(`https://www.google.com/recaptcha/api.js??${(0,te.xO)({onload:_i,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(ee),G(Qe(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){return!!Ar().grecaptcha&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Po{load(p){return(0,w.Z)(function*(){return new un(p)})()}clearedOneInstance(){}}const Du="recaptcha",Ga={theme:"light",type:"image"};class Tu{constructor(p,m=Object.assign({},Ga),T){this.parameters=m,this.type=Du,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=At(T),this.isInvisible="invisible"===this.parameters.size,oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const G="string"==typeof p?document.getElementById(p):p;oe(G,this.auth,"argument-error"),this.container=G,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Po:new Sd,this.validateStartingState()}verify(){var p=this;return(0,w.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),T=p.getAssertedRecaptcha();return T.getResponse(m)||new Promise(ee=>{const Ce=nt=>{!nt||(p.tokenChangeListeners.delete(Ce),ee(nt))};p.tokenChangeListeners.add(Ce),p.isInvisible&&T.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){oe(!this.parameters.sitekey,this.auth,"argument-error"),oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(T=>T(m)),"function"==typeof p)p(m);else if("string"==typeof p){const T=Ar()[p];"function"==typeof T&&T(m)}}}assertNotDestroyed(){oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,w.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const T=document.createElement("div");m.appendChild(T),m=T}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,w.Z)(function*(){oe(bt()&&!Yo(),p.auth,"internal-error"),yield function Ad(){let E=null;return new Promise(p=>{"complete"!==document.readyState?(E=()=>p(),window.addEventListener("load",E)):p()}).catch(p=>{throw E&&window.removeEventListener("load",E),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function so(E){return Qo.apply(this,arguments)}(p.auth);oe(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xn{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=qr._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Wa(){return(Wa=(0,w.Z)(function*(E,p,m){const T=At(E),G=yield Ns(T,p,(0,te.m9)(m));return new Xn(G,ee=>rn(T,ee))})).apply(this,arguments)}function Hr(){return(Hr=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E);yield V(!1,T,"phone");const G=yield Ns(T.auth,p,(0,te.m9)(m));return new Xn(G,ee=>En(T,ee))})).apply(this,arguments)}function $e(){return($e=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E),G=yield Ns(T.auth,p,(0,te.m9)(m));return new Xn(G,ee=>Nr(T,ee))})).apply(this,arguments)}function Ns(E,p,m){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,w.Z)(function*(E,p,m){var T;const G=yield m.verify();try{let ee;if(oe("string"==typeof G,E,"argument-error"),oe(m.type===Du,E,"argument-error"),ee="string"==typeof p?{phoneNumber:p}:p,"session"in ee){const Ce=ee.session;if("phoneNumber"in ee)return oe("enroll"===Ce.type,E,"internal-error"),(yield zl(E,{idToken:Ce.credential,phoneEnrollmentInfo:{phoneNumber:ee.phoneNumber,recaptchaToken:G}})).phoneSessionInfo.sessionInfo;{oe("signin"===Ce.type,E,"internal-error");const nt=(null===(T=ee.multiFactorHint)||void 0===T?void 0:T.uid)||ee.multiFactorUid;return oe(nt,E,"missing-multi-factor-info"),(yield hr(E,{mfaPendingCredential:Ce.credential,mfaEnrollmentId:nt,phoneSignInInfo:{recaptchaToken:G}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ce}=yield ut(E,{phoneNumber:ee.phoneNumber,recaptchaToken:G});return Ce}}finally{m._reset()}})).apply(this,arguments)}function Oo(){return(Oo=(0,w.Z)(function*(E,p){yield L((0,te.m9)(E),p)})).apply(this,arguments)}let mo=(()=>{class E{constructor(m){this.providerId=E.PROVIDER_ID,this.auth=At(m)}verifyPhoneNumber(m,T){return Ns(this.auth,m,(0,te.m9)(T))}static credential(m,T){return qr._fromVerification(m,T)}static credentialFromResult(m){return E.credentialFromTaggedObject(m)}static credentialFromError(m){return E.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:T,temporaryProof:G}=m;return T&&G?qr._fromTokenResponse(T,G):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function Ps(E,p){return p?Me(p):(oe(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class cs extends Oi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return vr(p,this._buildIdpRequest())}_linkToIdToken(p,m){return vr(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return vr(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function za(E){return lt(E.auth,new cs(E),E.bypassAuthState)}function Zu(E){const{auth:p,user:m}=E;return oe(m,p,"internal-error"),ge(m,new cs(E),E.bypassAuthState)}function Gs(E){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,w.Z)(function*(E){const{auth:p,user:m}=E;return oe(m,p,"internal-error"),L(m,new cs(E),E.bypassAuthState)})).apply(this,arguments)}class ss{constructor(p,m,T,G,ee=!1){this.auth=p,this.resolver=T,this.user=G,this.bypassAuthState=ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,w.Z)(function*(T,G){p.pendingPromise={resolve:T,reject:G};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ee){p.reject(ee)}});return function(T,G){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,w.Z)(function*(){const{urlResponse:T,sessionId:G,postBody:ee,tenantId:Ce,error:nt,type:Dt}=p;if(nt)return void m.reject(nt);const Lt={auth:m.auth,requestUri:T,sessionId:G,tenantId:Ce||void 0,postBody:ee||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Dt)(Lt))}catch(gn){m.reject(gn)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return za;case"linkViaPopup":case"linkViaRedirect":return Gs;case"reauthViaPopup":case"reauthViaRedirect":return Zu;default:rt(this.auth,"internal-error")}}resolve(p){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vs=new en(2e3,1e4);function qa(){return(qa=(0,w.Z)(function*(E,p,m){const T=At(E);qe(E,p,Zr);const G=Ps(T,m);return new Au(T,"signInViaPopup",p,G).executeNotNull()})).apply(this,arguments)}function Qu(){return(Qu=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E);qe(T.auth,p,Zr);const G=Ps(T.auth,m);return new Au(T.auth,"reauthViaPopup",p,G,T).executeNotNull()})).apply(this,arguments)}function er(){return(er=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E);qe(T.auth,p,Zr);const G=Ps(T.auth,m);return new Au(T.auth,"linkViaPopup",p,G,T).executeNotNull()})).apply(this,arguments)}let Au=(()=>{class E extends ss{constructor(m,T,G,ee,Ce){super(m,T,ee,Ce),this.provider=G,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var m=this;return(0,w.Z)(function*(){const T=yield m.execute();return oe(T,m.auth,"internal-error"),T})()}onExecution(){var m=this;return(0,w.Z)(function*(){he(1===m.filter.length,"Popup operations only handle one event");const T=Hs();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],T),m.authWindow.associatedEvent=T,m.resolver._originValidation(m.auth).catch(G=>{m.reject(G)}),m.resolver._isIframeWebStorageSupported(m.auth,G=>{G||m.reject(Qe(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const m=()=>{var T,G;this.pollId=(null===(G=null===(T=this.authWindow)||void 0===T?void 0:T.window)||void 0===G?void 0:G.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,vs.get())};m()}}return E.currentPopupAction=null,E})();const ii=new Map;class Up extends ss{constructor(p,m,T=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,T),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,w.Z)(function*(){let T=ii.get(m.auth._key());if(!T){try{const ee=(yield function Fr(E,p){return wl.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;T=()=>Promise.resolve(ee)}catch(G){T=()=>Promise.reject(G)}ii.set(m.auth._key(),T)}return m.bypassAuthState||ii.set(m.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,T=this;return(0,w.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(T,p);if("unknown"!==p.type){if(p.eventId){const G=yield T.auth._redirectUserForId(p.eventId);if(G)return T.user=G,m().call(T,p);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function wl(){return(wl=(0,w.Z)(function*(E,p){const m=ce(p),T=Q(E);if(!(yield T._isAvailable()))return!1;const G="true"===(yield T._get(m));return yield T._remove(m),G})).apply(this,arguments)}function ko(E,p){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,w.Z)(function*(E,p){return Q(E)._set(ce(p),"true")})).apply(this,arguments)}function U(E,p){ii.set(E._key(),p)}function Q(E){return Me(E._redirectPersistence)}function ce(E){return yn("pendingRedirect",E.config.apiKey,E.name)}function ht(){return(ht=(0,w.Z)(function*(E,p,m){const T=At(E);qe(E,p,Zr);const G=Ps(T,m);return yield ko(G,T),G._openRedirect(T,p,"signInViaRedirect")})).apply(this,arguments)}function mn(){return(mn=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E);qe(T.auth,p,Zr);const G=Ps(T.auth,m);yield ko(G,T.auth);const ee=yield xu(T);return G._openRedirect(T.auth,p,"reauthViaRedirect",ee)})).apply(this,arguments)}function Wr(){return(Wr=(0,w.Z)(function*(E,p,m){const T=(0,te.m9)(E);qe(T.auth,p,Zr);const G=Ps(T.auth,m);yield V(!1,T,p.providerId),yield ko(G,T.auth);const ee=yield xu(T);return G._openRedirect(T.auth,p,"linkViaRedirect",ee)})).apply(this,arguments)}function Fo(){return(Fo=(0,w.Z)(function*(E,p){return yield At(E)._initializationPromise,_o(E,p,!1)})).apply(this,arguments)}function _o(E,p){return ds.apply(this,arguments)}function ds(){return(ds=(0,w.Z)(function*(E,p,m=!1){const T=At(E),G=Ps(T,p),Ce=yield new Up(T,G,m).execute();return Ce&&!m&&(delete Ce.user._redirectEventId,yield T._persistUserIfCurrent(Ce.user),yield T._setRedirectUser(null,p)),Ce})).apply(this,arguments)}function xu(E){return oo.apply(this,arguments)}function oo(){return(oo=(0,w.Z)(function*(E){const p=Hs(`${E.uid}:::`);return E._redirectEventId=p,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),p})).apply(this,arguments)}class yo{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(p,T)&&(m=!0,this.sendToConsumer(p,T),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function kc(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mu(E);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var T;if(p.error&&!Mu(p)){const G=(null===(T=p.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";m.onError(Qe(this.auth,G))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const T=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&T}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ra(p))}saveEventToCache(p){this.cachedEventUids.add(Ra(p)),this.lastProcessedEventTime=Date.now()}}function Ra(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(p=>p).join("-")}function Mu({type:E,error:p}){return"unknown"===E&&"auth/no-auth-event"===(null==p?void 0:p.code)}function El(E){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,w.Z)(function*(E,p={}){return cn(E,"GET","/v1/projects",p)})).apply(this,arguments)}const Il=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Lc=/^https?/;function Ch(){return(Ch=(0,w.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:p}=yield El(E);for(const m of p)try{if(Ws(m))return}catch(T){}rt(E,"unauthorized-domain")})).apply(this,arguments)}function Ws(E){const p=pt(),{protocol:m,hostname:T}=new URL(p);if(E.startsWith("chrome-extension://")){const Ce=new URL(E);return""===Ce.hostname&&""===T?"chrome-extension:"===m&&E.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&Ce.hostname===T}if(!Lc.test(m))return!1;if(Il.test(E))return T===E;const G=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+G+"|"+G+")$","i").test(T)}const bf=new en(3e4,6e4);function si(){const E=Ar().___jsl;if(null==E?void 0:E.H)for(const p of Object.keys(E.H))if(E.H[p].r=E.H[p].r||[],E.H[p].L=E.H[p].L||[],E.H[p].r=[...E.H[p].L],E.CP)for(let m=0;m<E.CP.length;m++)E.CP[m]=null}let Vc=null;function Cl(E){return Vc=Vc||function Df(E){return new Promise((p,m)=>{var T,G,ee;function Ce(){si(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{si(),m(Qe(E,"network-request-failed"))},timeout:bf.get()})}if(null===(G=null===(T=Ar().gapi)||void 0===T?void 0:T.iframes)||void 0===G?void 0:G.Iframe)p(gapi.iframes.getContext());else{if(!(null===(ee=Ar().gapi)||void 0===ee?void 0:ee.load)){const nt=an("iframefcb");return Ar()[nt]=()=>{gapi.load?Ce():m(Qe(E,"network-request-failed"))},va(`https://apis.google.com/js/api.js?onload=${nt}`).catch(Dt=>m(Dt))}Ce()}}).catch(p=>{throw Vc=null,p})}(E),Vc}const xd=new en(5e3,15e3),Rd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Md(E){const p=E.config;oe(p.authDomain,E,"auth-domain-config-required");const m=p.emulator?Zt(p,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,T={apiKey:p.apiKey,appName:E.name,v:xe.SDK_VERSION},G=Tf.get(E.config.apiHost);G&&(T.eid=G);const ee=E._getFrameworks();return ee.length&&(T.fw=ee.join(",")),`${m}?${(0,te.xO)(T).slice(1)}`}function Yl(){return Yl=(0,w.Z)(function*(E){const p=yield Cl(E),m=Ar().gapi;return oe(m,E,"internal-error"),p.open({where:document.body,url:Md(E),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rd,dontclear:!0},T=>new Promise(function(){var G=(0,w.Z)(function*(ee,Ce){yield T.restyle({setHideOnLeave:!1});const nt=Qe(E,"network-request-failed"),Dt=Ar().setTimeout(()=>{Ce(nt)},xd.get());function Lt(){Ar().clearTimeout(Dt),ee(T)}T.ping(Lt).then(Lt,()=>{Ce(nt)})});return function(ee,Ce){return G.apply(this,arguments)}}()))}),Yl.apply(this,arguments)}const Sf={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Th{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function Ou(E,p,m,T,G,ee){oe(E.config.authDomain,E,"auth-domain-config-required"),oe(E.config.apiKey,E,"invalid-api-key");const Ce={apiKey:E.config.apiKey,appName:E.name,authType:m,redirectUrl:T,v:xe.SDK_VERSION,eventId:G};if(p instanceof Zr){p.setDefaultLanguage(E.languageCode),Ce.providerId=p.providerId||"",(0,te.xb)(p.getCustomParameters())||(Ce.customParameters=JSON.stringify(p.getCustomParameters()));for(const[Dt,Lt]of Object.entries(ee||{}))Ce[Dt]=Lt}if(p instanceof Ss){const Dt=p.getScopes().filter(Lt=>""!==Lt);Dt.length>0&&(Ce.scopes=Dt.join(","))}E.tenantId&&(Ce.tid=E.tenantId);const nt=Ce;for(const Dt of Object.keys(nt))void 0===nt[Dt]&&delete nt[Dt];return`${function Sh({config:E}){return E.emulator?Zt(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,te.xO)(nt).slice(1)}`}const Ya="webStorageSupport";class Uc extends class $p{constructor(p){this.factorId=p}_process(p,m,T){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,T);case"signin":return this._finalizeSignIn(p,m.credential);default:return et("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Uc(p)}_finalizeEnroll(p,m,T){return function pa(E,p){return cn(E,"POST","/v2/accounts/mfaEnrollment:finalize",nn(E,p))}(p,{idToken:m,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Hn(E,p){return cn(E,"POST","/v2/accounts/mfaSignIn:finalize",nn(E,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Dl=(()=>{class E{constructor(){}static assertion(m){return Uc._fromCredential(m)}}return E.FACTOR_ID="phone",E})();var Bc="@firebase/auth";class Gn{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,w.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(T=>{var G;p((null===(G=T)||void 0===G?void 0:G.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ir(){return window}function Ma(){return(Ma=(0,w.Z)(function*(E,p,m){var T;const{BuildInfo:G}=ir();he(p.sessionId,"AuthEvent did not contain a session ID");const ee=yield Xo(p.sessionId),Ce={};return Ei()?Ce.ibi=G.packageName:Ni()?Ce.apn=G.packageName:rt(E,"operation-not-supported-in-this-environment"),G.displayName&&(Ce.appDisplayName=G.displayName),Ce.sessionId=ee,Ou(E,m,p.type,void 0,null!==(T=p.eventId)&&void 0!==T?T:void 0,Ce)})).apply(this,arguments)}function Qr(){return(Qr=(0,w.Z)(function*(E){const{BuildInfo:p}=ir(),m={};Ei()?m.iosBundleId=p.packageName:Ni()?m.androidPackageName=p.packageName:rt(E,"operation-not-supported-in-this-environment"),yield El(E,m)})).apply(this,arguments)}function jc(){return(jc=(0,w.Z)(function*(E,p,m){const{cordova:T}=ir();let G=()=>{};try{yield new Promise((ee,Ce)=>{let nt=null;function Dt(){var ln;ee();const es=null===(ln=T.plugins.browsertab)||void 0===ln?void 0:ln.close;"function"==typeof es&&es(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function Lt(){nt||(nt=window.setTimeout(()=>{Ce(Qe(E,"redirect-cancelled-by-user"))},2e3))}function gn(){"visible"===(null==document?void 0:document.visibilityState)&&Lt()}p.addPassiveListener(Dt),document.addEventListener("resume",Lt,!1),Ni()&&document.addEventListener("visibilitychange",gn,!1),G=()=>{p.removePassiveListener(Dt),document.removeEventListener("resume",Lt,!1),document.removeEventListener("visibilitychange",gn,!1),nt&&window.clearTimeout(nt)}})}finally{G()}})).apply(this,arguments)}function Xo(E){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,w.Z)(function*(E){const p=el(E),m=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(m)).map(G=>G.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function el(E){if(he(/[0-9a-zA-Z]+/.test(E),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(E);const p=new ArrayBuffer(E.length),m=new Uint8Array(p);for(let T=0;T<E.length;T++)m[T]=E.charCodeAt(T);return m}!function Bn(E){(0,xe._registerComponent)(new Le.wA("auth",(p,{options:m})=>{const T=p.getProvider("app").getImmediate(),G=p.getProvider("heartbeat"),{apiKey:ee,authDomain:Ce}=T.options;return((nt,Dt)=>{oe(ee&&!ee.includes(":"),"invalid-api-key",{appName:nt.name}),oe(!(null==Ce?void 0:Ce.includes(":")),"argument-error",{appName:nt.name});const Lt={apiKey:ee,authDomain:Ce,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ps(E)},gn=new gt(nt,Dt,Lt);return function Ge(E,p){const m=(null==p?void 0:p.persistence)||[],T=(Array.isArray(m)?m:[m]).map(Me);(null==p?void 0:p.errorMap)&&E._updateErrorMap(p.errorMap),E._initializeWithPersistence(T,null==p?void 0:p.popupRedirectResolver)}(gn,m),gn})(T,G)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,T)=>{p.getProvider("auth-internal").initialize()})),(0,xe._registerComponent)(new Le.wA("auth-internal",p=>{const m=At(p.getProvider("auth").getImmediate());return new Gn(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,xe.registerVersion)(Bc,"0.20.4",function Tr(E){switch(E){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(E)),(0,xe.registerVersion)(Bc,"0.20.4","esm2017")}("Browser");class Mf extends yo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(p)),super.onEvent(p)}initialized(){var p=this;return(0,w.Z)(function*(){yield p.initPromise})()}}function Ja(E){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,w.Z)(function*(E){const p=yield tc()._get(xh(E));return p&&(yield tc()._remove(xh(E))),p})).apply(this,arguments)}function Tl(){const E=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const T=Math.floor(Math.random()*p.length);E.push(p.charAt(T))}return E.join("")}function tc(){return Me(Ku)}function xh(E){return yn("authEvent",E.config.apiKey,E.name)}function xr(E){if(!(null==E?void 0:E.includes("?")))return{};const[p,...m]=E.split("?");return(0,te.zd)(m.join("?"))}function kd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Qe("no-auth-event")}}function Ls(){var E;return(null===(E=null==self?void 0:self.location)||void 0===E?void 0:E.protocol)||null}function tl(E=(0,te.z$)()){return!("file:"!==Ls()&&"ionic:"!==Ls()&&"capacitor:"!==Ls()||!E.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hc(){try{const E=self.localStorage,p=Hs();if(E)return E.setItem(p,"1"),E.removeItem(p),!function fr(E=(0,te.z$)()){return function Vo(){return(0,te.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Xi(E=(0,te.z$)()){return/Edge\/\d+/.test(E)}(E)}()||(0,te.hl)()}catch(E){return $i()&&(0,te.hl)()}return!1}function $i(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Uo(){return(function Hp(){return"http:"===Ls()||"https:"===Ls()}()||(0,te.ru)()||tl())&&!function Fu(){return(0,te.b$)()||(0,te.UG)()}()&&Hc()&&!$i()}function Gc(){return tl()&&"undefined"!=typeof document}function Fd(){return(Fd=(0,w.Z)(function*(){return!!Gc()&&new Promise(E=>{const p=setTimeout(()=>{E(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),E(!0)})})})).apply(this,arguments)}const nr={LOCAL:"local",NONE:"none",SESSION:"session"},Bo=oe,Rh="persistence";function Wc(E){return nl.apply(this,arguments)}function nl(){return(nl=(0,w.Z)(function*(E){yield E._initializationPromise;const p=rc(),m=yn(Rh,E.config.apiKey,E.name);p&&p.setItem(m,E._getPersistence())})).apply(this,arguments)}function rc(){var E;try{return(null===(E=function nc(){return"undefined"!=typeof window?window:null}())||void 0===E?void 0:E.sessionStorage)||null}catch(p){return null}}const xn=oe;class na{constructor(){this.browserResolver=Me(class jp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ro,this._completeRedirectFn=_o,this._overrideRedirectResult=U}_openPopup(p,m,T,G){var ee=this;return(0,w.Z)(function*(){var Ce;he(null===(Ce=ee.eventManagers[p._key()])||void 0===Ce?void 0:Ce.manager,"_initialize() not called before _openPopup()");const nt=Ou(p,m,T,pt(),G);return function Bp(E,p,m,T=500,G=600){const ee=Math.max((window.screen.availHeight-G)/2,0).toString(),Ce=Math.max((window.screen.availWidth-T)/2,0).toString();let nt="";const Dt=Object.assign(Object.assign({},Sf),{width:T.toString(),height:G.toString(),top:ee,left:Ce}),Lt=(0,te.z$)().toLowerCase();m&&(nt=vn(Lt)?"_blank":m),ui(Lt)&&(p=p||"http://localhost",Dt.scrollbars="yes");const gn=Object.entries(Dt).reduce((es,[ao,Kc])=>`${es}${ao}=${Kc},`,"");if(function Pi(E=(0,te.z$)()){var p;return Ei(E)&&!!(null===(p=window.navigator)||void 0===p?void 0:p.standalone)}(Lt)&&"_self"!==nt)return function Nu(E,p){const m=document.createElement("a");m.href=E,m.target=p;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(T)}(p||"",nt),new Th(null);const ln=window.open(p||"",nt,gn);oe(ln,E,"popup-blocked");try{ln.focus()}catch(es){}return new Th(ln)}(p,nt,Hs())})()}_openRedirect(p,m,T,G){var ee=this;return(0,w.Z)(function*(){return yield ee._originValidation(p),function io(E){Ar().location.href=E}(Ou(p,m,T,pt(),G)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:G,promise:ee}=this.eventManagers[m];return G?Promise.resolve(G):(he(ee,"If manager is not set, promise should be"),ee)}const T=this.initAndGetManager(p);return this.eventManagers[m]={promise:T},T.catch(()=>{delete this.eventManagers[m]}),T}initAndGetManager(p){var m=this;return(0,w.Z)(function*(){const T=yield function Ai(E){return Yl.apply(this,arguments)}(p),G=new yo(p);return T.register("authEvent",ee=>(oe(null==ee?void 0:ee.authEvent,p,"invalid-auth-event"),{status:G.onEvent(ee.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:G},m.iframes[p._key()]=T,G})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(Ya,{type:Ya},G=>{var ee;const Ce=null===(ee=null==G?void 0:G[0])||void 0===ee?void 0:ee[Ya];void 0!==Ce&&m(!!Ce),rt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Cf(E){return Ch.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return Vr()||ts()||Ei()}}),this.cordovaResolver=Me(class Od{constructor(){this._redirectPersistence=ro,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=_o,this._overrideRedirectResult=U}_initialize(p){var m=this;return(0,w.Z)(function*(){const T=p._key();let G=m.eventManagers.get(T);return G||(G=new Mf(p),m.eventManagers.set(T,G),m.attachCallbackListeners(p,G)),G})()}_openPopup(p){rt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,m,T,G){var ee=this;return(0,w.Z)(function*(){!function Rf(E){var p,m,T,G,ee,Ce,nt,Dt,Lt,gn;const ln=ir();oe("function"==typeof(null===(p=null==ln?void 0:ln.universalLinks)||void 0===p?void 0:p.subscribe),E,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(void 0!==(null===(m=null==ln?void 0:ln.BuildInfo)||void 0===m?void 0:m.packageName),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(ee=null===(G=null===(T=null==ln?void 0:ln.cordova)||void 0===T?void 0:T.plugins)||void 0===G?void 0:G.browsertab)||void 0===ee?void 0:ee.openUrl),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(Dt=null===(nt=null===(Ce=null==ln?void 0:ln.cordova)||void 0===Ce?void 0:Ce.plugins)||void 0===nt?void 0:nt.browsertab)||void 0===Dt?void 0:Dt.isAvailable),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(gn=null===(Lt=null==ln?void 0:ln.cordova)||void 0===Lt?void 0:Lt.InAppBrowser)||void 0===gn?void 0:gn.open),E,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const Ce=yield ee._initialize(p);yield Ce.initialized(),Ce.resetRedirect(),function k(){ii.clear()}(),yield ee._originValidation(p);const nt=function ea(E,p,m=null){return{type:p,eventId:m,urlResponse:null,sessionId:Tl(),postBody:null,tenantId:E.tenantId,error:Qe(E,"no-auth-event")}}(p,T,G);yield function Nd(E,p){return tc()._set(xh(E),p)}(p,nt);const Dt=yield function Qa(E,p,m){return Ma.apply(this,arguments)}(p,nt,m),Lt=yield function Wn(E){const{cordova:p}=ir();return new Promise(m=>{p.plugins.browsertab.isAvailable(T=>{let G=null;T?p.plugins.browsertab.openUrl(E):G=p.InAppBrowser.open(E,function bs(E=(0,te.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}()?"_blank":"_system","location=yes"),m(G)})})}(Dt);return function Lo(E,p,m){return jc.apply(this,arguments)}(p,Ce,Lt)})()}_isIframeWebStorageSupported(p,m){throw new Error("Method not implemented.")}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ah(E){return Qr.apply(this,arguments)}(p)),this.originValidationPromises[m]}attachCallbackListeners(p,m){const{universalLinks:T,handleOpenURL:G,BuildInfo:ee}=ir(),Ce=setTimeout((0,w.Z)(function*(){yield Ja(p),m.onEvent(kd())}),500),nt=function(){var gn=(0,w.Z)(function*(ln){clearTimeout(Ce);const es=yield Ja(p);let ao=null;es&&(null==ln?void 0:ln.url)&&(ao=function Nf(E,p){var m,T;const G=function $c(E){const p=xr(E),m=p.link?decodeURIComponent(p.link):void 0,T=xr(m).link,G=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return xr(G).link||G||T||m||E}(p);if(G.includes("/__/auth/callback")){const ee=xr(G),Ce=ee.firebaseError?function xi(E){try{return JSON.parse(E)}catch(p){return null}}(decodeURIComponent(ee.firebaseError)):null,nt=null===(T=null===(m=null==Ce?void 0:Ce.code)||void 0===m?void 0:m.split("auth/"))||void 0===T?void 0:T[1],Dt=nt?Qe(nt):null;return Dt?{type:E.type,eventId:E.eventId,tenantId:E.tenantId,error:Dt,urlResponse:null,sessionId:null,postBody:null}:{type:E.type,eventId:E.eventId,tenantId:E.tenantId,sessionId:E.sessionId,urlResponse:G,postBody:null}}return null}(es,ln.url)),m.onEvent(ao||kd())});return function(es){return gn.apply(this,arguments)}}();void 0!==T&&"function"==typeof T.subscribe&&T.subscribe(null,nt);const Dt=G,Lt=`${ee.packageName.toLowerCase()}://`;ir().handleOpenURL=function(){var gn=(0,w.Z)(function*(ln){if(ln.toLowerCase().startsWith(Lt)&&nt({url:ln}),"function"==typeof Dt)try{Dt(ln)}catch(es){console.error(es)}});return function(ln){return gn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ro,this._completeRedirectFn=_o,this._overrideRedirectResult=U}_initialize(p){var m=this;return(0,w.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,m,T,G){var ee=this;return(0,w.Z)(function*(){return yield ee.selectUnderlyingResolver(),ee.assertedUnderlyingResolver._openPopup(p,m,T,G)})()}_openRedirect(p,m,T,G){var ee=this;return(0,w.Z)(function*(){return yield ee.selectUnderlyingResolver(),ee.assertedUnderlyingResolver._openRedirect(p,m,T,G)})()}_isIframeWebStorageSupported(p,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,m)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Gc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,w.Z)(function*(){if(p.underlyingResolver)return;const m=yield function ta(){return Fd.apply(this,arguments)}();p.underlyingResolver=m?p.cordovaResolver:p.browserResolver})()}}function fu(E){return E.unwrap()}function oi(E){return Mh(E)}function Mh(E){const{_tokenResponse:p}=E instanceof te.ZR?E.customData:E;if(!p)return null;if(!(E instanceof te.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return mo.credentialFromResult(E);const m=p.providerId;if(!m||"password"===m)return null;let T;switch(m){case"google.com":T=da;break;case"facebook.com":T=Ys;break;case"github.com":T=js;break;case"twitter.com":T=So;break;default:const{oauthIdToken:G,oauthAccessToken:ee,oauthTokenSecret:Ce,pendingToken:nt,nonce:Dt}=p;return ee||Ce||G||nt?nt?m.startsWith("saml.")?Br._create(m,nt):Fe._fromParams({providerId:m,signInMethod:m,pendingToken:nt,idToken:G,accessToken:ee}):new gs(m).credential({idToken:G,accessToken:ee,rawNonce:Dt}):null}return E instanceof te.ZR?T.credentialFromError(E):T.credentialFromResult(E)}function vo(E,p){return p.catch(m=>{throw m instanceof te.ZR&&function Vd(E,p){var m,T;const G=null===(m=p.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(T=p)||void 0===T?void 0:T.code))p.resolver=new Nh(E,function ar(E,p){var m;const T=(0,te.m9)(E),G=p;return oe(p.customData.operationType,T,"argument-error"),oe(null===(m=G.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,T,"argument-error"),xa._fromError(T,G)}(E,p));else if(G){const ee=Mh(p),Ce=p;ee&&(Ce.credential=ee,Ce.tenantId=G.tenantId||void 0,Ce.email=G.email||void 0,Ce.phoneNumber=G.phoneNumber||void 0)}}(E,m),m}).then(m=>{const G=m.user;return{operationType:m.operationType,credential:oi(m),additionalUserInfo:xo(m),user:pu.getOrCreate(G)}})}function Vu(E,p){return ic.apply(this,arguments)}function ic(){return(ic=(0,w.Z)(function*(E,p){const m=yield p;return{verificationId:m.verificationId,confirm:T=>vo(E,m.confirm(T))}})).apply(this,arguments)}class Nh{constructor(p,m){this.resolver=m,this.auth=function Ld(E){return E.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return vo(fu(this.auth),this.resolver.resolveSignIn(p))}}class pu{constructor(p){this._delegate=p,this.multiFactor=function cu(E){const p=(0,te.m9)(E);return Ro.has(p)||Ro.set(p,ja._fromUser(p)),Ro.get(p)}(p)}static getOrCreate(p){return pu.USER_MAP.has(p)||pu.USER_MAP.set(p,new pu(p)),pu.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var m=this;return(0,w.Z)(function*(){return vo(m.auth,En(m._delegate,p))})()}linkWithPhoneNumber(p,m){var T=this;return(0,w.Z)(function*(){return Vu(T.auth,function Ih(E,p,m){return Hr.apply(this,arguments)}(T._delegate,p,m))})()}linkWithPopup(p){var m=this;return(0,w.Z)(function*(){return vo(m.auth,function Os(E,p,m){return er.apply(this,arguments)}(m._delegate,p,na))})()}linkWithRedirect(p){var m=this;return(0,w.Z)(function*(){return yield Wc(At(m.auth)),function An(E,p,m){return function Xt(E,p,m){return Wr.apply(this,arguments)}(E,p,m)}(m._delegate,p,na)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var m=this;return(0,w.Z)(function*(){return vo(m.auth,Nr(m._delegate,p))})()}reauthenticateWithPhoneNumber(p,m){return Vu(this.auth,function ys(E,p,m){return $e.apply(this,arguments)}(this._delegate,p,m))}reauthenticateWithPopup(p){return vo(this.auth,function Si(E,p,m){return Qu.apply(this,arguments)}(this._delegate,p,na))}reauthenticateWithRedirect(p){var m=this;return(0,w.Z)(function*(){return yield Wc(At(m.auth)),function Et(E,p,m){return function hn(E,p,m){return mn.apply(this,arguments)}(E,p,m)}(m._delegate,p,na)})()}sendEmailVerification(p){return function $s(E,p){return ri.apply(this,arguments)}(this._delegate,p)}unlink(p){var m=this;return(0,w.Z)(function*(){return yield function Js(E,p){return Vn.apply(this,arguments)}(m._delegate,p),m})()}updateEmail(p){return function gl(E,p){return Ko((0,te.m9)(E),p,null)}(this._delegate,p)}updatePassword(p){return function Va(E,p){return Ko((0,te.m9)(E),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Su(E,p){return Oo.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Ao(E,p){return Iu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,m){return function Wu(E,p,m){return zu.apply(this,arguments)}(this._delegate,p,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}pu.USER_MAP=new WeakMap;const zc=oe;let Sl=(()=>{class E{constructor(m,T){if(this.app=m,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:G}=m.options;zc(G,"invalid-api-key",{appName:m.name}),zc(G,"invalid-api-key",{appName:m.name});const ee="undefined"!=typeof window?na:void 0;this._delegate=T.initialize({options:{persistence:Of(G,m.name),popupRedirectResolver:ee}}),this._delegate._updateErrorMap(ot),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?pu.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,T){!function br(E,p,m){const T=At(E);oe(T._canInitEmulator,T,"emulator-config-failed"),oe(/^https?:\/\//.test(p),T,"invalid-emulator-scheme");const G=!!(null==m?void 0:m.disableWarnings),ee=Kr(p),{host:Ce,port:nt}=function re(E){const p=Kr(E),m=/(\/\/)?([^?#/]+)/.exec(E.substr(p.length));if(!m)return{host:"",port:null};const T=m[2].split("@").pop()||"",G=/^(\[[^\]]+\])(:|$)/.exec(T);if(G){const ee=G[1];return{host:ee,port:li(T.substr(ee.length+1))}}{const[ee,Ce]=T.split(":");return{host:ee,port:li(Ce)}}}(p);T.config.emulator={url:`${ee}//${Ce}${null===nt?"":`:${nt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Ce,port:nt,protocol:ee.replace(":",""),options:Object.freeze({disableWarnings:G})}),G||function Kn(){function E(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}(this._delegate,m,T)}applyActionCode(m){return function H(E,p){return Ve.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return kt(this._delegate,m)}confirmPasswordReset(m,T){return function F(E,p,m){return O.apply(this,arguments)}(this._delegate,m,T)}createUserWithEmailAndPassword(m,T){var G=this;return(0,w.Z)(function*(){return vo(G._delegate,function Qi(E,p,m){return fo.apply(this,arguments)}(G._delegate,m,T))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function go(E,p){return Ms.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function pi(E,p){const m=Bs.parseLink(p);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,w.Z)(function*(){zc(Uo(),m._delegate,"operation-not-supported-in-this-environment");const T=yield function ws(E,p){return Fo.apply(this,arguments)}(m._delegate,na);return T?vo(m._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Xa(E,p){At(E)._logFramework(p)}(this._delegate,m)}onAuthStateChanged(m,T,G){const{next:ee,error:Ce,complete:nt}=Ud(m,T,G);return this._delegate.onAuthStateChanged(ee,Ce,nt)}onIdTokenChanged(m,T,G){const{next:ee,error:Ce,complete:nt}=Ud(m,T,G);return this._delegate.onIdTokenChanged(ee,Ce,nt)}sendSignInLinkToEmail(m,T){return function Gl(E,p,m){return pl.apply(this,arguments)}(this._delegate,m,T)}sendPasswordResetEmail(m,T){return function ho(E,p,m){return B.apply(this,arguments)}(this._delegate,m,T||void 0)}setPersistence(m){var T=this;return(0,w.Z)(function*(){let G;switch(function Lu(E,p){Bo(Object.values(nr).includes(p),E,"invalid-persistence-type"),(0,te.b$)()?Bo(p!==nr.SESSION,E,"unsupported-persistence-type"):(0,te.UG)()?Bo(p===nr.NONE,E,"unsupported-persistence-type"):$i()?Bo(p===nr.NONE||p===nr.LOCAL&&(0,te.hl)(),E,"unsupported-persistence-type"):Bo(p===nr.NONE||Hc(),E,"unsupported-persistence-type")}(T._delegate,m),m){case nr.SESSION:G=ro;break;case nr.LOCAL:G=(yield Me(Gt)._isAvailable())?Gt:Ku;break;case nr.NONE:G=Qn;break;default:return rt("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(G)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return vo(this._delegate,function ms(E){return Li.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return vo(this._delegate,rn(this._delegate,m))}signInWithCustomToken(m){return vo(this._delegate,function Ui(E,p){return Kt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,T){return vo(this._delegate,function po(E,p,m){return rn((0,te.m9)(E),Fa.credential(p,m))}(this._delegate,m,T))}signInWithEmailLink(m,T){return vo(this._delegate,function zo(E,p,m){return gi.apply(this,arguments)}(this._delegate,m,T))}signInWithPhoneNumber(m,T){return Vu(this._delegate,function wa(E,p,m){return Wa.apply(this,arguments)}(this._delegate,m,T))}signInWithPopup(m){var T=this;return(0,w.Z)(function*(){return zc(Uo(),T._delegate,"operation-not-supported-in-this-environment"),vo(T._delegate,function Ka(E,p,m){return qa.apply(this,arguments)}(T._delegate,m,na))})()}signInWithRedirect(m){var T=this;return(0,w.Z)(function*(){return zc(Uo(),T._delegate,"operation-not-supported-in-this-environment"),yield Wc(T._delegate),function Oe(E,p,m){return function We(E,p,m){return ht.apply(this,arguments)}(E,p,m)}(T._delegate,m,na)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Yr(E,p){return fi.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return E.Persistence=nr,E})();function Ud(E,p,m){let T=E;"function"!=typeof E&&({next:T,error:p,complete:m}=E);const G=T;return{next:Ce=>G(Ce&&pu.getOrCreate(Ce)),error:p,complete:m}}function Of(E,p){const m=function In(E,p){const m=rc();if(!m)return[];const T=yn(Rh,E,p);switch(m.getItem(T)){case nr.NONE:return[Qn];case nr.LOCAL:return[Gt,ro];case nr.SESSION:return[ro];default:return[]}}(E,p);if("undefined"!=typeof self&&!m.includes(Gt)&&m.push(Gt),"undefined"!=typeof window)for(const T of[Ku,ro])m.includes(T)||m.push(T);return m.includes(Qn)||m.push(Qn),m}class Ri{constructor(){this.providerId="phone",this._delegate=new mo(fu(ne.Z.auth()))}static credential(p,m){return mo.credential(p,m)}verifyPhoneNumber(p,m){return this._delegate.verifyPhoneNumber(p,m)}unwrap(){return this._delegate}}Ri.PHONE_SIGN_IN_METHOD=mo.PHONE_SIGN_IN_METHOD,Ri.PROVIDER_ID=mo.PROVIDER_ID;const Al=oe;class sc{constructor(p,m,T=ne.Z.app()){var G;Al(null===(G=T.options)||void 0===G?void 0:G.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new Tu(p,m,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function hs(E){E.INTERNAL.registerComponent(new Le.wA("auth-compat",p=>{const m=p.getProvider("app-compat").getImmediate(),T=p.getProvider("auth");return new Sl(m,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fa,FacebookAuthProvider:Ys,GithubAuthProvider:js,GoogleAuthProvider:da,OAuthProvider:gs,SAMLAuthProvider:di,PhoneAuthProvider:Ri,PhoneMultiFactorGenerator:Dl,RecaptchaVerifier:sc,TwitterAuthProvider:So,Auth:Sl,AuthCredential:Oi,Error:te.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),E.registerVersion("@firebase/auth-compat","0.2.17")}(ne.Z)},8306:(St,je,$)=>{$.d(je,{y:()=>fe});var w=$(930),ne=$(727),te=$(8822),xe=$(4671);var Le=$(2416),we=$(576),Ne=$(2806);let fe=(()=>{class st{constructor(It){It&&(this._subscribe=It)}lift(It){const Ye=new st;return Ye.source=this,Ye.operator=It,Ye}subscribe(It,Ye,at){const Ie=function wt(st){return st&&st instanceof w.Lv||function Pe(st){return st&&(0,we.m)(st.next)&&(0,we.m)(st.error)&&(0,we.m)(st.complete)}(st)&&(0,ne.Nn)(st)}(It)?It:new w.Hp(It,Ye,at);return(0,Ne.x)(()=>{const{operator:Tt,source:rt}=this;Ie.add(Tt?Tt.call(Ie,rt):rt?this._subscribe(Ie):this._trySubscribe(Ie))}),Ie}_trySubscribe(It){try{return this._subscribe(It)}catch(Ye){It.error(Ye)}}forEach(It,Ye){return new(Ye=de(Ye))((at,Ie)=>{const Tt=new w.Hp({next:rt=>{try{It(rt)}catch(Qe){Ie(Qe),Tt.unsubscribe()}},error:Ie,complete:at});this.subscribe(Tt)})}_subscribe(It){var Ye;return null===(Ye=this.source)||void 0===Ye?void 0:Ye.subscribe(It)}[te.L](){return this}pipe(...It){return function ye(st){return 0===st.length?xe.y:1===st.length?st[0]:function(It){return st.reduce((Ye,at)=>at(Ye),It)}}(It)(this)}toPromise(It){return new(It=de(It))((Ye,at)=>{let Ie;this.subscribe(Tt=>Ie=Tt,Tt=>at(Tt),()=>Ye(Ie))})}}return st.create=ot=>new st(ot),st})();function de(st){var ot;return null!==(ot=null!=st?st:Le.v.Promise)&&void 0!==ot?ot:Promise}},7579:(St,je,$)=>{$.d(je,{x:()=>Le});var w=$(8306),ne=$(727);const xe=(0,$(3888).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ee=$(8737),ye=$(2806);let Le=(()=>{class Ne extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(de){const Pe=new we(this,this);return Pe.operator=de,Pe}_throwIfClosed(){if(this.closed)throw new xe}next(de){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Pe of this.currentObservers)Pe.next(de)}})}error(de){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=de;const{observers:Pe}=this;for(;Pe.length;)Pe.shift().error(de)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:de}=this;for(;de.length;)de.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var de;return(null===(de=this.observers)||void 0===de?void 0:de.length)>0}_trySubscribe(de){return this._throwIfClosed(),super._trySubscribe(de)}_subscribe(de){return this._throwIfClosed(),this._checkFinalizedStatuses(de),this._innerSubscribe(de)}_innerSubscribe(de){const{hasError:Pe,isStopped:wt,observers:st}=this;return Pe||wt?ne.Lc:(this.currentObservers=null,st.push(de),new ne.w0(()=>{this.currentObservers=null,(0,Ee.P)(st,de)}))}_checkFinalizedStatuses(de){const{hasError:Pe,thrownError:wt,isStopped:st}=this;Pe?de.error(wt):st&&de.complete()}asObservable(){const de=new w.y;return de.source=this,de}}return Ne.create=(fe,de)=>new we(fe,de),Ne})();class we extends Le{constructor(fe,de){super(),this.destination=fe,this.source=de}next(fe){var de,Pe;null===(Pe=null===(de=this.destination)||void 0===de?void 0:de.next)||void 0===Pe||Pe.call(de,fe)}error(fe){var de,Pe;null===(Pe=null===(de=this.destination)||void 0===de?void 0:de.error)||void 0===Pe||Pe.call(de,fe)}complete(){var fe,de;null===(de=null===(fe=this.destination)||void 0===fe?void 0:fe.complete)||void 0===de||de.call(fe)}_subscribe(fe){var de,Pe;return null!==(Pe=null===(de=this.source)||void 0===de?void 0:de.subscribe(fe))&&void 0!==Pe?Pe:ne.Lc}}},930:(St,je,$)=>{$.d(je,{Hp:()=>It,Lv:()=>Pe});var w=$(576),ne=$(727),te=$(2416),xe=$(7849),Ee=$(5032);const ye=Ne("C",void 0,void 0);function Ne(rt,Qe,He){return{kind:rt,value:Qe,error:He}}var fe=$(3410),de=$(2806);class Pe extends ne.w0{constructor(Qe){super(),this.isStopped=!1,Qe?(this.destination=Qe,(0,ne.Nn)(Qe)&&Qe.add(this)):this.destination=Tt}static create(Qe,He,qe){return new It(Qe,He,qe)}next(Qe){this.isStopped?Ie(function we(rt){return Ne("N",rt,void 0)}(Qe),this):this._next(Qe)}error(Qe){this.isStopped?Ie(function Le(rt){return Ne("E",void 0,rt)}(Qe),this):(this.isStopped=!0,this._error(Qe))}complete(){this.isStopped?Ie(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Qe){this.destination.next(Qe)}_error(Qe){try{this.destination.error(Qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const wt=Function.prototype.bind;function st(rt,Qe){return wt.call(rt,Qe)}class ot{constructor(Qe){this.partialObserver=Qe}next(Qe){const{partialObserver:He}=this;if(He.next)try{He.next(Qe)}catch(qe){Ye(qe)}}error(Qe){const{partialObserver:He}=this;if(He.error)try{He.error(Qe)}catch(qe){Ye(qe)}else Ye(Qe)}complete(){const{partialObserver:Qe}=this;if(Qe.complete)try{Qe.complete()}catch(He){Ye(He)}}}class It extends Pe{constructor(Qe,He,qe){let ft;if(super(),(0,w.m)(Qe)||!Qe)ft={next:null!=Qe?Qe:void 0,error:null!=He?He:void 0,complete:null!=qe?qe:void 0};else{let oe;this&&te.v.useDeprecatedNextContext?(oe=Object.create(Qe),oe.unsubscribe=()=>this.unsubscribe(),ft={next:Qe.next&&st(Qe.next,oe),error:Qe.error&&st(Qe.error,oe),complete:Qe.complete&&st(Qe.complete,oe)}):ft=Qe}this.destination=new ot(ft)}}function Ye(rt){te.v.useDeprecatedSynchronousErrorHandling?(0,de.O)(rt):(0,xe.h)(rt)}function Ie(rt,Qe){const{onStoppedNotification:He}=te.v;He&&fe.z.setTimeout(()=>He(rt,Qe))}const Tt={closed:!0,next:Ee.Z,error:function at(rt){throw rt},complete:Ee.Z}},727:(St,je,$)=>{$.d(je,{Lc:()=>ye,w0:()=>Ee,Nn:()=>Le});var w=$(576);const te=(0,$(3888).d)(Ne=>function(de){Ne(this),this.message=de?`${de.length} errors occurred during unsubscription:\n${de.map((Pe,wt)=>`${wt+1}) ${Pe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=de});var xe=$(8737);class Ee{constructor(fe){this.initialTeardown=fe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let fe;if(!this.closed){this.closed=!0;const{_parentage:de}=this;if(de)if(this._parentage=null,Array.isArray(de))for(const st of de)st.remove(this);else de.remove(this);const{initialTeardown:Pe}=this;if((0,w.m)(Pe))try{Pe()}catch(st){fe=st instanceof te?st.errors:[st]}const{_finalizers:wt}=this;if(wt){this._finalizers=null;for(const st of wt)try{we(st)}catch(ot){fe=null!=fe?fe:[],ot instanceof te?fe=[...fe,...ot.errors]:fe.push(ot)}}if(fe)throw new te(fe)}}add(fe){var de;if(fe&&fe!==this)if(this.closed)we(fe);else{if(fe instanceof Ee){if(fe.closed||fe._hasParent(this))return;fe._addParent(this)}(this._finalizers=null!==(de=this._finalizers)&&void 0!==de?de:[]).push(fe)}}_hasParent(fe){const{_parentage:de}=this;return de===fe||Array.isArray(de)&&de.includes(fe)}_addParent(fe){const{_parentage:de}=this;this._parentage=Array.isArray(de)?(de.push(fe),de):de?[de,fe]:fe}_removeParent(fe){const{_parentage:de}=this;de===fe?this._parentage=null:Array.isArray(de)&&(0,xe.P)(de,fe)}remove(fe){const{_finalizers:de}=this;de&&(0,xe.P)(de,fe),fe instanceof Ee&&fe._removeParent(this)}}Ee.EMPTY=(()=>{const Ne=new Ee;return Ne.closed=!0,Ne})();const ye=Ee.EMPTY;function Le(Ne){return Ne instanceof Ee||Ne&&"closed"in Ne&&(0,w.m)(Ne.remove)&&(0,w.m)(Ne.add)&&(0,w.m)(Ne.unsubscribe)}function we(Ne){(0,w.m)(Ne)?Ne():Ne.unsubscribe()}},2416:(St,je,$)=>{$.d(je,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(St,je,$)=>{$.d(je,{z:()=>Ee});var w=$(8189),te=$(7669),xe=$(8996);function Ee(...ye){return function ne(){return(0,w.J)(1)}()((0,xe.D)(ye,(0,te.yG)(ye)))}},515:(St,je,$)=>{$.d(je,{E:()=>ne});const ne=new($(8306).y)(Ee=>Ee.complete())},8996:(St,je,$)=>{$.d(je,{D:()=>Qe});var w=$(8421),ne=$(5363),te=$(9468),ye=$(8306),we=$(2202),Ne=$(576),fe=$(9672);function Pe(He,qe){if(!He)throw new Error("Iterable cannot be null");return new ye.y(ft=>{(0,fe.f)(ft,qe,()=>{const oe=He[Symbol.asyncIterator]();(0,fe.f)(ft,qe,()=>{oe.next().then(et=>{et.done?ft.complete():ft.next(et.value)})},0,!0)})})}var wt=$(3670),st=$(8239),ot=$(1144),It=$(6495),Ye=$(2206),at=$(4532),Ie=$(3260);function Qe(He,qe){return qe?function rt(He,qe){if(null!=He){if((0,wt.c)(He))return function xe(He,qe){return(0,w.Xf)(He).pipe((0,te.R)(qe),(0,ne.Q)(qe))}(He,qe);if((0,ot.z)(He))return function Le(He,qe){return new ye.y(ft=>{let oe=0;return qe.schedule(function(){oe===He.length?ft.complete():(ft.next(He[oe++]),ft.closed||this.schedule())})})}(He,qe);if((0,st.t)(He))return function Ee(He,qe){return(0,w.Xf)(He).pipe((0,te.R)(qe),(0,ne.Q)(qe))}(He,qe);if((0,Ye.D)(He))return Pe(He,qe);if((0,It.T)(He))return function de(He,qe){return new ye.y(ft=>{let oe;return(0,fe.f)(ft,qe,()=>{oe=He[we.h](),(0,fe.f)(ft,qe,()=>{let et,he;try{({value:et,done:he}=oe.next())}catch(De){return void ft.error(De)}he?ft.complete():ft.next(et)},0,!0)}),()=>(0,Ne.m)(null==oe?void 0:oe.return)&&oe.return()})}(He,qe);if((0,Ie.L)(He))return function Tt(He,qe){return Pe((0,Ie.Q)(He),qe)}(He,qe)}throw(0,at.z)(He)}(He,qe):(0,w.Xf)(He)}},8421:(St,je,$)=>{$.d(je,{Xf:()=>wt});var w=$(655),ne=$(1144),te=$(8239),xe=$(8306),Ee=$(3670),ye=$(2206),Le=$(4532),we=$(6495),Ne=$(3260),fe=$(576),de=$(7849),Pe=$(8822);function wt(rt){if(rt instanceof xe.y)return rt;if(null!=rt){if((0,Ee.c)(rt))return function st(rt){return new xe.y(Qe=>{const He=rt[Pe.L]();if((0,fe.m)(He.subscribe))return He.subscribe(Qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(rt);if((0,ne.z)(rt))return function ot(rt){return new xe.y(Qe=>{for(let He=0;He<rt.length&&!Qe.closed;He++)Qe.next(rt[He]);Qe.complete()})}(rt);if((0,te.t)(rt))return function It(rt){return new xe.y(Qe=>{rt.then(He=>{Qe.closed||(Qe.next(He),Qe.complete())},He=>Qe.error(He)).then(null,de.h)})}(rt);if((0,ye.D)(rt))return at(rt);if((0,we.T)(rt))return function Ye(rt){return new xe.y(Qe=>{for(const He of rt)if(Qe.next(He),Qe.closed)return;Qe.complete()})}(rt);if((0,Ne.L)(rt))return function Ie(rt){return at((0,Ne.Q)(rt))}(rt)}throw(0,Le.z)(rt)}function at(rt){return new xe.y(Qe=>{(function Tt(rt,Qe){var He,qe,ft,oe;return(0,w.mG)(this,void 0,void 0,function*(){try{for(He=(0,w.KL)(rt);!(qe=yield He.next()).done;)if(Qe.next(qe.value),Qe.closed)return}catch(et){ft={error:et}}finally{try{qe&&!qe.done&&(oe=He.return)&&(yield oe.call(He))}finally{if(ft)throw ft.error}}Qe.complete()})})(rt,Qe).catch(He=>Qe.error(He))})}},6451:(St,je,$)=>{$.d(je,{T:()=>ye});var w=$(8189),ne=$(8421),te=$(515),xe=$(7669),Ee=$(8996);function ye(...Le){const we=(0,xe.yG)(Le),Ne=(0,xe._6)(Le,1/0),fe=Le;return fe.length?1===fe.length?(0,ne.Xf)(fe[0]):(0,w.J)(Ne)((0,Ee.D)(fe,we)):te.E}},9646:(St,je,$)=>{$.d(je,{of:()=>te});var w=$(7669),ne=$(8996);function te(...xe){const Ee=(0,w.yG)(xe);return(0,ne.D)(xe,Ee)}},5403:(St,je,$)=>{$.d(je,{x:()=>ne});var w=$(930);function ne(xe,Ee,ye,Le,we){return new te(xe,Ee,ye,Le,we)}class te extends w.Lv{constructor(Ee,ye,Le,we,Ne,fe){super(Ee),this.onFinalize=Ne,this.shouldUnsubscribe=fe,this._next=ye?function(de){try{ye(de)}catch(Pe){Ee.error(Pe)}}:super._next,this._error=we?function(de){try{we(de)}catch(Pe){Ee.error(Pe)}finally{this.unsubscribe()}}:super._error,this._complete=Le?function(){try{Le()}catch(de){Ee.error(de)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(Ee=this.onFinalize)||void 0===Ee||Ee.call(this))}}}},6590:(St,je,$)=>{$.d(je,{d:()=>te});var w=$(4482),ne=$(5403);function te(xe){return(0,w.e)((Ee,ye)=>{let Le=!1;Ee.subscribe((0,ne.x)(ye,we=>{Le=!0,ye.next(we)},()=>{Le||ye.next(xe),ye.complete()}))})}},1884:(St,je,$)=>{$.d(je,{x:()=>xe});var w=$(4671),ne=$(4482),te=$(5403);function xe(ye,Le=w.y){return ye=null!=ye?ye:Ee,(0,ne.e)((we,Ne)=>{let fe,de=!0;we.subscribe((0,te.x)(Ne,Pe=>{const wt=Le(Pe);(de||!ye(fe,wt))&&(de=!1,fe=wt,Ne.next(Pe))}))})}function Ee(ye,Le){return ye===Le}},9300:(St,je,$)=>{$.d(je,{h:()=>te});var w=$(4482),ne=$(5403);function te(xe,Ee){return(0,w.e)((ye,Le)=>{let we=0;ye.subscribe((0,ne.x)(Le,Ne=>xe.call(Ee,Ne,we++)&&Le.next(Ne)))})}},590:(St,je,$)=>{$.d(je,{P:()=>Le});var w=$(6805),ne=$(9300),te=$(5698),xe=$(6590),Ee=$(8068),ye=$(4671);function Le(we,Ne){const fe=arguments.length>=2;return de=>de.pipe(we?(0,ne.h)((Pe,wt)=>we(Pe,wt,de)):ye.y,(0,te.q)(1),fe?(0,xe.d)(Ne):(0,Ee.T)(()=>new w.K))}},4004:(St,je,$)=>{$.d(je,{U:()=>te});var w=$(4482),ne=$(5403);function te(xe,Ee){return(0,w.e)((ye,Le)=>{let we=0;ye.subscribe((0,ne.x)(Le,Ne=>{Le.next(xe.call(Ee,Ne,we++))}))})}},8189:(St,je,$)=>{$.d(je,{J:()=>te});var w=$(5577),ne=$(4671);function te(xe=1/0){return(0,w.z)(ne.y,xe)}},5577:(St,je,$)=>{$.d(je,{z:()=>we});var w=$(4004),ne=$(8421),te=$(4482),xe=$(9672),Ee=$(5403),Le=$(576);function we(Ne,fe,de=1/0){return(0,Le.m)(fe)?we((Pe,wt)=>(0,w.U)((st,ot)=>fe(Pe,st,wt,ot))((0,ne.Xf)(Ne(Pe,wt))),de):("number"==typeof fe&&(de=fe),(0,te.e)((Pe,wt)=>function ye(Ne,fe,de,Pe,wt,st,ot,It){const Ye=[];let at=0,Ie=0,Tt=!1;const rt=()=>{Tt&&!Ye.length&&!at&&fe.complete()},Qe=qe=>at<Pe?He(qe):Ye.push(qe),He=qe=>{st&&fe.next(qe),at++;let ft=!1;(0,ne.Xf)(de(qe,Ie++)).subscribe((0,Ee.x)(fe,oe=>{null==wt||wt(oe),st?Qe(oe):fe.next(oe)},()=>{ft=!0},void 0,()=>{if(ft)try{for(at--;Ye.length&&at<Pe;){const oe=Ye.shift();ot?(0,xe.f)(fe,ot,()=>He(oe)):He(oe)}rt()}catch(oe){fe.error(oe)}}))};return Ne.subscribe((0,Ee.x)(fe,Qe,()=>{Tt=!0,rt()})),()=>{null==It||It()}}(Pe,wt,Ne,de)))}},5363:(St,je,$)=>{$.d(je,{Q:()=>xe});var w=$(9672),ne=$(4482),te=$(5403);function xe(Ee,ye=0){return(0,ne.e)((Le,we)=>{Le.subscribe((0,te.x)(we,Ne=>(0,w.f)(we,Ee,()=>we.next(Ne),ye),()=>(0,w.f)(we,Ee,()=>we.complete(),ye),Ne=>(0,w.f)(we,Ee,()=>we.error(Ne),ye)))})}},5026:(St,je,$)=>{$.d(je,{R:()=>xe});var w=$(4482),ne=$(5403);function te(Ee,ye,Le,we,Ne){return(fe,de)=>{let Pe=Le,wt=ye,st=0;fe.subscribe((0,ne.x)(de,ot=>{const It=st++;wt=Pe?Ee(wt,ot,It):(Pe=!0,ot),we&&de.next(wt)},Ne&&(()=>{Pe&&de.next(wt),de.complete()})))}}function xe(Ee,ye){return(0,w.e)(te(Ee,ye,arguments.length>=2,!0))}},3099:(St,je,$)=>{$.d(je,{B:()=>ye});var w=$(8996),ne=$(5698),te=$(7579),xe=$(930),Ee=$(4482);function ye(we={}){const{connector:Ne=(()=>new te.x),resetOnError:fe=!0,resetOnComplete:de=!0,resetOnRefCountZero:Pe=!0}=we;return wt=>{let st=null,ot=null,It=null,Ye=0,at=!1,Ie=!1;const Tt=()=>{null==ot||ot.unsubscribe(),ot=null},rt=()=>{Tt(),st=It=null,at=Ie=!1},Qe=()=>{const He=st;rt(),null==He||He.unsubscribe()};return(0,Ee.e)((He,qe)=>{Ye++,!Ie&&!at&&Tt();const ft=It=null!=It?It:Ne();qe.add(()=>{Ye--,0===Ye&&!Ie&&!at&&(ot=Le(Qe,Pe))}),ft.subscribe(qe),st||(st=new xe.Hp({next:oe=>ft.next(oe),error:oe=>{Ie=!0,Tt(),ot=Le(rt,fe,oe),ft.error(oe)},complete:()=>{at=!0,Tt(),ot=Le(rt,de),ft.complete()}}),(0,w.D)(He).subscribe(st))})(wt)}}function Le(we,Ne,...fe){return!0===Ne?(we(),null):!1===Ne?null:Ne(...fe).pipe((0,ne.q)(1)).subscribe(()=>we())}},8675:(St,je,$)=>{$.d(je,{O:()=>xe});var w=$(7272),ne=$(7669),te=$(4482);function xe(...Ee){const ye=(0,ne.yG)(Ee);return(0,te.e)((Le,we)=>{(ye?(0,w.z)(Ee,Le,ye):(0,w.z)(Ee,Le)).subscribe(we)})}},9468:(St,je,$)=>{$.d(je,{R:()=>ne});var w=$(4482);function ne(te,xe=0){return(0,w.e)((Ee,ye)=>{ye.add(te.schedule(()=>Ee.subscribe(ye),xe))})}},3900:(St,je,$)=>{$.d(je,{w:()=>xe});var w=$(8421),ne=$(4482),te=$(5403);function xe(Ee,ye){return(0,ne.e)((Le,we)=>{let Ne=null,fe=0,de=!1;const Pe=()=>de&&!Ne&&we.complete();Le.subscribe((0,te.x)(we,wt=>{null==Ne||Ne.unsubscribe();let st=0;const ot=fe++;(0,w.Xf)(Ee(wt,ot)).subscribe(Ne=(0,te.x)(we,It=>we.next(ye?ye(wt,It,ot,st++):It),()=>{Ne=null,Pe()}))},()=>{de=!0,Pe()}))})}},5698:(St,je,$)=>{$.d(je,{q:()=>xe});var w=$(515),ne=$(4482),te=$(5403);function xe(Ee){return Ee<=0?()=>w.E:(0,ne.e)((ye,Le)=>{let we=0;ye.subscribe((0,te.x)(Le,Ne=>{++we<=Ee&&(Le.next(Ne),Ee<=we&&Le.complete())}))})}},8505:(St,je,$)=>{$.d(je,{b:()=>Ee});var w=$(576),ne=$(4482),te=$(5403),xe=$(4671);function Ee(ye,Le,we){const Ne=(0,w.m)(ye)||Le||we?{next:ye,error:Le,complete:we}:ye;return Ne?(0,ne.e)((fe,de)=>{var Pe;null===(Pe=Ne.subscribe)||void 0===Pe||Pe.call(Ne);let wt=!0;fe.subscribe((0,te.x)(de,st=>{var ot;null===(ot=Ne.next)||void 0===ot||ot.call(Ne,st),de.next(st)},()=>{var st;wt=!1,null===(st=Ne.complete)||void 0===st||st.call(Ne),de.complete()},st=>{var ot;wt=!1,null===(ot=Ne.error)||void 0===ot||ot.call(Ne,st),de.error(st)},()=>{var st,ot;wt&&(null===(st=Ne.unsubscribe)||void 0===st||st.call(Ne)),null===(ot=Ne.finalize)||void 0===ot||ot.call(Ne)}))}):xe.y}},8068:(St,je,$)=>{$.d(je,{T:()=>xe});var w=$(6805),ne=$(4482),te=$(5403);function xe(ye=Ee){return(0,ne.e)((Le,we)=>{let Ne=!1;Le.subscribe((0,te.x)(we,fe=>{Ne=!0,we.next(fe)},()=>Ne?we.complete():we.error(ye())))})}function Ee(){return new w.K}},4408:(St,je,$)=>{$.d(je,{o:()=>Ee});var w=$(727);class ne extends w.w0{constructor(Le,we){super()}schedule(Le,we=0){return this}}const te={setInterval(ye,Le,...we){const{delegate:Ne}=te;return(null==Ne?void 0:Ne.setInterval)?Ne.setInterval(ye,Le,...we):setInterval(ye,Le,...we)},clearInterval(ye){const{delegate:Le}=te;return((null==Le?void 0:Le.clearInterval)||clearInterval)(ye)},delegate:void 0};var xe=$(8737);class Ee extends ne{constructor(Le,we){super(Le,we),this.scheduler=Le,this.work=we,this.pending=!1}schedule(Le,we=0){if(this.closed)return this;this.state=Le;const Ne=this.id,fe=this.scheduler;return null!=Ne&&(this.id=this.recycleAsyncId(fe,Ne,we)),this.pending=!0,this.delay=we,this.id=this.id||this.requestAsyncId(fe,this.id,we),this}requestAsyncId(Le,we,Ne=0){return te.setInterval(Le.flush.bind(Le,this),Ne)}recycleAsyncId(Le,we,Ne=0){if(null!=Ne&&this.delay===Ne&&!1===this.pending)return we;te.clearInterval(we)}execute(Le,we){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ne=this._execute(Le,we);if(Ne)return Ne;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,we){let fe,Ne=!1;try{this.work(Le)}catch(de){Ne=!0,fe=de||new Error("Scheduled action threw falsy error")}if(Ne)return this.unsubscribe(),fe}unsubscribe(){if(!this.closed){const{id:Le,scheduler:we}=this,{actions:Ne}=we;this.work=this.state=this.scheduler=null,this.pending=!1,(0,xe.P)(Ne,this),null!=Le&&(this.id=this.recycleAsyncId(we,Le,null)),this.delay=null,super.unsubscribe()}}}},7565:(St,je,$)=>{$.d(je,{v:()=>te});var w=$(6063);class ne{constructor(Ee,ye=ne.now){this.schedulerActionCtor=Ee,this.now=ye}schedule(Ee,ye=0,Le){return new this.schedulerActionCtor(this,Ee).schedule(Le,ye)}}ne.now=w.l.now;class te extends ne{constructor(Ee,ye=ne.now){super(Ee,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Ee){const{actions:ye}=this;if(this._active)return void ye.push(Ee);let Le;this._active=!0;do{if(Le=Ee.execute(Ee.state,Ee.delay))break}while(Ee=ye.shift());if(this._active=!1,Le){for(;Ee=ye.shift();)Ee.unsubscribe();throw Le}}}},4986:(St,je,$)=>{$.d(je,{z:()=>te});var w=$(4408);const te=new($(7565).v)(w.o)},6063:(St,je,$)=>{$.d(je,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},3410:(St,je,$)=>{$.d(je,{z:()=>w});const w={setTimeout(ne,te,...xe){const{delegate:Ee}=w;return(null==Ee?void 0:Ee.setTimeout)?Ee.setTimeout(ne,te,...xe):setTimeout(ne,te,...xe)},clearTimeout(ne){const{delegate:te}=w;return((null==te?void 0:te.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},2202:(St,je,$)=>{$.d(je,{h:()=>ne});const ne=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(St,je,$)=>{$.d(je,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(St,je,$)=>{$.d(je,{K:()=>ne});const ne=(0,$(3888).d)(te=>function(){te(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(St,je,$)=>{$.d(je,{_6:()=>ye,jO:()=>xe,yG:()=>Ee});var w=$(576);function te(Le){return Le[Le.length-1]}function xe(Le){return(0,w.m)(te(Le))?Le.pop():void 0}function Ee(Le){return function ne(Le){return Le&&(0,w.m)(Le.schedule)}(te(Le))?Le.pop():void 0}function ye(Le,we){return"number"==typeof te(Le)?Le.pop():we}},4742:(St,je,$)=>{$.d(je,{D:()=>Ee});const{isArray:w}=Array,{getPrototypeOf:ne,prototype:te,keys:xe}=Object;function Ee(Le){if(1===Le.length){const we=Le[0];if(w(we))return{args:we,keys:null};if(function ye(Le){return Le&&"object"==typeof Le&&ne(Le)===te}(we)){const Ne=xe(we);return{args:Ne.map(fe=>we[fe]),keys:Ne}}}return{args:Le,keys:null}}},8737:(St,je,$)=>{function w(ne,te){if(ne){const xe=ne.indexOf(te);0<=xe&&ne.splice(xe,1)}}$.d(je,{P:()=>w})},3888:(St,je,$)=>{function w(ne){const xe=ne(Ee=>{Error.call(Ee),Ee.stack=(new Error).stack});return xe.prototype=Object.create(Error.prototype),xe.prototype.constructor=xe,xe}$.d(je,{d:()=>w})},1810:(St,je,$)=>{function w(ne,te){return ne.reduce((xe,Ee,ye)=>(xe[Ee]=te[ye],xe),{})}$.d(je,{n:()=>w})},2806:(St,je,$)=>{$.d(je,{x:()=>te,O:()=>xe});var w=$(2416);let ne=null;function te(Ee){if(w.v.useDeprecatedSynchronousErrorHandling){const ye=!ne;if(ye&&(ne={errorThrown:!1,error:null}),Ee(),ye){const{errorThrown:Le,error:we}=ne;if(ne=null,Le)throw we}}else Ee()}function xe(Ee){w.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=Ee)}},9672:(St,je,$)=>{function w(ne,te,xe,Ee=0,ye=!1){const Le=te.schedule(function(){xe(),ye?ne.add(this.schedule(null,Ee)):this.unsubscribe()},Ee);if(ne.add(Le),!ye)return Le}$.d(je,{f:()=>w})},4671:(St,je,$)=>{function w(ne){return ne}$.d(je,{y:()=>w})},1144:(St,je,$)=>{$.d(je,{z:()=>w});const w=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(St,je,$)=>{$.d(je,{D:()=>ne});var w=$(576);function ne(te){return Symbol.asyncIterator&&(0,w.m)(null==te?void 0:te[Symbol.asyncIterator])}},576:(St,je,$)=>{function w(ne){return"function"==typeof ne}$.d(je,{m:()=>w})},3670:(St,je,$)=>{$.d(je,{c:()=>te});var w=$(8822),ne=$(576);function te(xe){return(0,ne.m)(xe[w.L])}},6495:(St,je,$)=>{$.d(je,{T:()=>te});var w=$(2202),ne=$(576);function te(xe){return(0,ne.m)(null==xe?void 0:xe[w.h])}},8239:(St,je,$)=>{$.d(je,{t:()=>ne});var w=$(576);function ne(te){return(0,w.m)(null==te?void 0:te.then)}},3260:(St,je,$)=>{$.d(je,{Q:()=>te,L:()=>xe});var w=$(655),ne=$(576);function te(Ee){return(0,w.FC)(this,arguments,function*(){const Le=Ee.getReader();try{for(;;){const{value:we,done:Ne}=yield(0,w.qq)(Le.read());if(Ne)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(we)}}finally{Le.releaseLock()}})}function xe(Ee){return(0,ne.m)(null==Ee?void 0:Ee.getReader)}},4482:(St,je,$)=>{$.d(je,{A:()=>ne,e:()=>te});var w=$(576);function ne(xe){return(0,w.m)(null==xe?void 0:xe.lift)}function te(xe){return Ee=>{if(ne(Ee))return Ee.lift(function(ye){try{return xe(ye,this)}catch(Le){this.error(Le)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(St,je,$)=>{$.d(je,{Z:()=>xe});var w=$(4004);const{isArray:ne}=Array;function xe(Ee){return(0,w.U)(ye=>function te(Ee,ye){return ne(ye)?Ee(...ye):Ee(ye)}(Ee,ye))}},5032:(St,je,$)=>{function w(){}$.d(je,{Z:()=>w})},7849:(St,je,$)=>{$.d(je,{h:()=>te});var w=$(2416),ne=$(3410);function te(xe){ne.z.setTimeout(()=>{const{onUnhandledError:Ee}=w.v;if(!Ee)throw xe;Ee(xe)})}},4532:(St,je,$)=>{function w(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}$.d(je,{z:()=>w})},655:(St,je,$)=>{function xe(he,De){var Me={};for(var ze in he)Object.prototype.hasOwnProperty.call(he,ze)&&De.indexOf(ze)<0&&(Me[ze]=he[ze]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var Ge=0;for(ze=Object.getOwnPropertySymbols(he);Ge<ze.length;Ge++)De.indexOf(ze[Ge])<0&&Object.prototype.propertyIsEnumerable.call(he,ze[Ge])&&(Me[ze[Ge]]=he[ze[Ge]])}return Me}function we(he,De,Me,ze){return new(Me||(Me=Promise))(function(pt,bt){function $t(en){try{tt(ze.next(en))}catch(Zt){bt(Zt)}}function Bt(en){try{tt(ze.throw(en))}catch(Zt){bt(Zt)}}function tt(en){en.done?pt(en.value):function Ge(pt){return pt instanceof Me?pt:new Me(function(bt){bt(pt)})}(en.value).then($t,Bt)}tt((ze=ze.apply(he,De||[])).next())})}function Ye(he){return this instanceof Ye?(this.v=he,this):new Ye(he)}function at(he,De,Me){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ge,ze=Me.apply(he,De||[]),pt=[];return Ge={},bt("next"),bt("throw"),bt("return"),Ge[Symbol.asyncIterator]=function(){return this},Ge;function bt(Qt){ze[Qt]&&(Ge[Qt]=function(Yt){return new Promise(function(bn,nn){pt.push([Qt,Yt,bn,nn])>1||$t(Qt,Yt)})})}function $t(Qt,Yt){try{!function Bt(Qt){Qt.value instanceof Ye?Promise.resolve(Qt.value.v).then(tt,en):Zt(pt[0][2],Qt)}(ze[Qt](Yt))}catch(bn){Zt(pt[0][3],bn)}}function tt(Qt){$t("next",Qt)}function en(Qt){$t("throw",Qt)}function Zt(Qt,Yt){Qt(Yt),pt.shift(),pt.length&&$t(pt[0][0],pt[0][1])}}function Tt(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Me,De=he[Symbol.asyncIterator];return De?De.call(he):(he=function Pe(he){var De="function"==typeof Symbol&&Symbol.iterator,Me=De&&he[De],ze=0;if(Me)return Me.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&ze>=he.length&&(he=void 0),{value:he&&he[ze++],done:!he}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),Me={},ze("next"),ze("throw"),ze("return"),Me[Symbol.asyncIterator]=function(){return this},Me);function ze(pt){Me[pt]=he[pt]&&function(bt){return new Promise(function($t,Bt){!function Ge(pt,bt,$t,Bt){Promise.resolve(Bt).then(function(tt){pt({value:tt,done:$t})},bt)}($t,Bt,(bt=he[pt](bt)).done,bt.value)})}}}$.d(je,{_T:()=>xe,mG:()=>we,qq:()=>Ye,FC:()=>at,KL:()=>Tt})},9808:(St,je,$)=>{$.d(je,{mr:()=>Ie,ez:()=>is,K0:()=>Le,Do:()=>rt,V_:()=>fe,Ye:()=>Qe,S$:()=>Ye,O5:()=>Ur,b0:()=>Tt,lw:()=>we,EM:()=>Li,JF:()=>Vn,PM:()=>As,w_:()=>ye,bD:()=>Br,q:()=>te,Mx:()=>qn,HT:()=>Ee});var w=$(5e3);let ne=null;function te(){return ne}function Ee(L){ne||(ne=L)}class ye{}const Le=new w.OlP("DocumentToken");let we=(()=>{class L{historyGo(V){throw new Error("Not implemented")}}return L.\u0275fac=function(V){return new(V||L)},L.\u0275prov=w.Yz7({token:L,factory:function(){return function Ne(){return(0,w.LFG)(de)}()},providedIn:"platform"}),L})();const fe=new w.OlP("Location Initialized");let de=(()=>{class L extends we{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return te().getBaseHref(this._doc)}onPopState(V){const X=te().getGlobalEventTarget(this._doc,"window");return X.addEventListener("popstate",V,!1),()=>X.removeEventListener("popstate",V)}onHashChange(V){const X=te().getGlobalEventTarget(this._doc,"window");return X.addEventListener("hashchange",V,!1),()=>X.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,X,ge){Pe()?this._history.pushState(V,X,ge):this.location.hash=ge}replaceState(V,X,ge){Pe()?this._history.replaceState(V,X,ge):this.location.hash=ge}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return L.\u0275fac=function(V){return new(V||L)(w.LFG(Le))},L.\u0275prov=w.Yz7({token:L,factory:function(){return function wt(){return new de((0,w.LFG)(Le))}()},providedIn:"platform"}),L})();function Pe(){return!!window.history.pushState}function st(L,Z){if(0==L.length)return Z;if(0==Z.length)return L;let V=0;return L.endsWith("/")&&V++,Z.startsWith("/")&&V++,2==V?L+Z.substring(1):1==V?L+Z:L+"/"+Z}function ot(L){const Z=L.match(/#|\?|$/),V=Z&&Z.index||L.length;return L.slice(0,V-("/"===L[V-1]?1:0))+L.slice(V)}function It(L){return L&&"?"!==L[0]?"?"+L:L}let Ye=(()=>{class L{historyGo(V){throw new Error("Not implemented")}}return L.\u0275fac=function(V){return new(V||L)},L.\u0275prov=w.Yz7({token:L,factory:function(){return function at(L){const Z=(0,w.LFG)(Le).location;return new Tt((0,w.LFG)(we),Z&&Z.origin||"")}()},providedIn:"root"}),L})();const Ie=new w.OlP("appBaseHref");let Tt=(()=>{class L extends Ye{constructor(V,X){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==X&&(X=this._platformLocation.getBaseHrefFromDOM()),null==X)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=X}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return st(this._baseHref,V)}path(V=!1){const X=this._platformLocation.pathname+It(this._platformLocation.search),ge=this._platformLocation.hash;return ge&&V?`${X}${ge}`:X}pushState(V,X,ge,Je){const lt=this.prepareExternalUrl(ge+It(Je));this._platformLocation.pushState(V,X,lt)}replaceState(V,X,ge,Je){const lt=this.prepareExternalUrl(ge+It(Je));this._platformLocation.replaceState(V,X,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var X,ge;null===(ge=(X=this._platformLocation).historyGo)||void 0===ge||ge.call(X,V)}}return L.\u0275fac=function(V){return new(V||L)(w.LFG(we),w.LFG(Ie,8))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})(),rt=(()=>{class L extends Ye{constructor(V,X){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=X&&(this._baseHref=X)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let X=this._platformLocation.hash;return null==X&&(X="#"),X.length>0?X.substring(1):X}prepareExternalUrl(V){const X=st(this._baseHref,V);return X.length>0?"#"+X:X}pushState(V,X,ge,Je){let lt=this.prepareExternalUrl(ge+It(Je));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.pushState(V,X,lt)}replaceState(V,X,ge,Je){let lt=this.prepareExternalUrl(ge+It(Je));0==lt.length&&(lt=this._platformLocation.pathname),this._platformLocation.replaceState(V,X,lt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var X,ge;null===(ge=(X=this._platformLocation).historyGo)||void 0===ge||ge.call(X,V)}}return L.\u0275fac=function(V){return new(V||L)(w.LFG(we),w.LFG(Ie,8))},L.\u0275prov=w.Yz7({token:L,factory:L.\u0275fac}),L})(),Qe=(()=>{class L{constructor(V,X){this._subject=new w.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const ge=this._platformStrategy.getBaseHref();this._platformLocation=X,this._baseHref=ot(ft(ge)),this._platformStrategy.onPopState(Je=>{this._subject.emit({url:this.path(!0),pop:!0,state:Je.state,type:Je.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,X=""){return this.path()==this.normalize(V+It(X))}normalize(V){return L.stripTrailingSlash(function qe(L,Z){return L&&Z.startsWith(L)?Z.substring(L.length):Z}(this._baseHref,ft(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,X="",ge=null){this._platformStrategy.pushState(ge,"",V,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+It(X)),ge)}replaceState(V,X="",ge=null){this._platformStrategy.replaceState(ge,"",V,X),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+It(X)),ge)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var X,ge;null===(ge=(X=this._platformStrategy).historyGo)||void 0===ge||ge.call(X,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(X=>{this._notifyUrlChangeListeners(X.url,X.state)}))}_notifyUrlChangeListeners(V="",X){this._urlChangeListeners.forEach(ge=>ge(V,X))}subscribe(V,X,ge){return this._subject.subscribe({next:V,error:X,complete:ge})}}return L.normalizeQueryParams=It,L.joinWithSlash=st,L.stripTrailingSlash=ot,L.\u0275fac=function(V){return new(V||L)(w.LFG(Ye),w.LFG(we))},L.\u0275prov=w.Yz7({token:L,factory:function(){return function He(){return new Qe((0,w.LFG)(Ye),(0,w.LFG)(we))}()},providedIn:"root"}),L})();function ft(L){return L.replace(/\/index.html$/,"")}function qn(L,Z){Z=encodeURIComponent(Z);for(const V of L.split(";")){const X=V.indexOf("="),[ge,Je]=-1==X?[V,""]:[V.slice(0,X),V.slice(X+1)];if(ge.trim()===Z)return decodeURIComponent(Je)}return null}let Ur=(()=>{class L{constructor(V,X){this._viewContainer=V,this._context=new kn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=X}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){bo("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){bo("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,X){return!0}}return L.\u0275fac=function(V){return new(V||L)(w.Y36(w.s_b),w.Y36(w.Rgc))},L.\u0275dir=w.lG2({type:L,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),L})();class kn{constructor(){this.$implicit=null,this.ngIf=null}}function bo(L,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${L} must be a TemplateRef, but received '${(0,w.AaK)(Z)}'.`)}let is=(()=>{class L{}return L.\u0275fac=function(V){return new(V||L)},L.\u0275mod=w.oAB({type:L}),L.\u0275inj=w.cJS({}),L})();const Br="browser";function As(L){return"server"===L}let Li=(()=>{class L{}return L.\u0275prov=(0,w.Yz7)({token:L,providedIn:"root",factory:()=>new Yi((0,w.LFG)(Le),window)}),L})();class Yi{constructor(Z,V){this.document=Z,this.window=V,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const V=function Rs(L,Z){const V=L.getElementById(Z)||L.getElementsByName(Z)[0];if(V)return V;if("function"==typeof L.createTreeWalker&&L.body&&(L.body.createShadowRoot||L.body.attachShadow)){const X=L.createTreeWalker(L.body,NodeFilter.SHOW_ELEMENT);let ge=X.currentNode;for(;ge;){const Je=ge.shadowRoot;if(Je){const lt=Je.getElementById(Z)||Je.querySelector(`[name="${Z}"]`);if(lt)return lt}ge=X.nextNode()}}return null}(this.document,Z);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Z)}}scrollToElement(Z){const V=Z.getBoundingClientRect(),X=V.left+this.window.pageXOffset,ge=V.top+this.window.pageYOffset,Je=this.offset();this.window.scrollTo(X-Je[0],ge-Je[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=xs(this.window.history)||xs(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch(Z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Z){return!1}}}function xs(L){return Object.getOwnPropertyDescriptor(L,"scrollRestoration")}class Vn{}},5e3:(St,je,$)=>{$.d(je,{deG:()=>Ji,tb:()=>gw,AFp:()=>dw,ip1:()=>cw,CZH:()=>Bv,hGG:()=>aC,z2F:()=>Kv,sBO:()=>WI,Sil:()=>DI,_Vd:()=>Fy,EJc:()=>CI,SBq:()=>K_,qLn:()=>oi,vpe:()=>Eh,tBr:()=>_o,XFs:()=>Ht,OlP:()=>_i,zs3:()=>Go,ZZ4:()=>Xv,aQg:()=>e0,soG:()=>$v,YKP:()=>A0,h0i:()=>Ym,PXZ:()=>LI,R0b:()=>bd,FiY:()=>ds,Lbi:()=>pw,g9A:()=>fw,Qsj:()=>gE,FYo:()=>C0,JOm:()=>G,tp0:()=>oo,Rgc:()=>Q_,dDg:()=>vw,q4F:()=>D0,GfV:()=>b0,s_b:()=>Uy,ifc:()=>Rt,eFA:()=>Iw,G48:()=>GI,Gpc:()=>de,X6Q:()=>HI,_c5:()=>oC,VLi:()=>OI,c2e:()=>mw,zSh:()=>sf,wAp:()=>_n,vHH:()=>ot,cg1:()=>Km,kL8:()=>Cy,dqk:()=>Dn,sIi:()=>fd,CqO:()=>l,QGY:()=>Pp,F4k:()=>C_,RDi:()=>xs,AaK:()=>we,qOj:()=>Dc,TTD:()=>gs,_Bn:()=>w0,xp6:()=>tm,uIk:()=>hf,ekj:()=>A_,Suo:()=>H0,Xpm:()=>Pt,lG2:()=>ts,Yz7:()=>Yt,cJS:()=>nn,oAB:()=>lr,Yjl:()=>vn,Y36:()=>Oa,_UZ:()=>gf,qZA:()=>Np,TgZ:()=>ph,n5z:()=>so,LFG:()=>Et,$8M:()=>Ha,$Z:()=>kg,NdJ:()=>o,CRH:()=>G0,oxw:()=>K,Hsn:()=>Re,F$t:()=>se,Q6J:()=>Mp,iGM:()=>$0,LSH:()=>hu,YNc:()=>xm,_uU:()=>dy,Oqu:()=>Hm});var w=$(7579),ne=$(727),te=$(8306),xe=$(6451),Ee=$(3099);function ye(n){for(let r in n)if(n[r]===ye)return r;throw Error("Could not find renamed property on target object.")}function Le(n,r){for(const a in r)r.hasOwnProperty(a)&&!n.hasOwnProperty(a)&&(n[a]=r[a])}function we(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(we).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const a=r.indexOf("\n");return-1===a?r:r.substring(0,a)}function Ne(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const fe=ye({__forward_ref__:ye});function de(n){return n.__forward_ref__=de,n.toString=function(){return we(this())},n}function Pe(n){return wt(n)?n():n}function wt(n){return"function"==typeof n&&n.hasOwnProperty(fe)&&n.__forward_ref__===de}class ot extends Error{constructor(r,a){super(function It(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,a)),this.code=r}}function Ye(n){return"string"==typeof n?n:null==n?"":String(n)}function at(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Ye(n)}function Qe(n,r){const a=r?` in ${r}`:"";throw new ot(-201,`No provider for ${at(n)} found${a}`)}function Bt(n,r){null==n&&function tt(n,r,a,c){throw new Error(`ASSERTION ERROR: ${n}`+(null==c?"":` [Expected=> ${a} ${c} ${r} <=Actual]`))}(r,n,null,"!=")}function Yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function nn(n){return{providers:n.providers||[],imports:n.imports||[]}}function cn(n){return pr(n,Lr)||pr(n,Er)}function pr(n,r){return n.hasOwnProperty(r)?n[r]:null}function gr(n){return n&&(n.hasOwnProperty(zn)||n.hasOwnProperty(Zn))?n[zn]:null}const Lr=ye({\u0275prov:ye}),zn=ye({\u0275inj:ye}),Er=ye({ngInjectableDef:ye}),Zn=ye({ngInjectorDef:ye});var Ht=(()=>((Ht=Ht||{})[Ht.Default=0]="Default",Ht[Ht.Host=1]="Host",Ht[Ht.Self=2]="Self",Ht[Ht.SkipSelf=4]="SkipSelf",Ht[Ht.Optional=8]="Optional",Ht))();let Ln;function pn(n){const r=Ln;return Ln=n,r}function as(n,r,a){const c=cn(n);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&Ht.Optional?null:void 0!==r?r:void Qe(we(n),"Injector")}function Xr(n){return{toString:n}.toString()}var kr=(()=>((kr=kr||{})[kr.OnPush=0]="OnPush",kr[kr.Default=1]="Default",kr))(),Rt=(()=>{return(n=Rt||(Rt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Rt;var n})();const jt="undefined"!=typeof globalThis&&globalThis,Wt="undefined"!=typeof window&&window,Rr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Dn=jt||"undefined"!=typeof global&&global||Wt||Rr,ur={},Jt=[],Te=ye({\u0275cmp:ye}),pe=ye({\u0275dir:ye}),ke=ye({\u0275pipe:ye}),Se=ye({\u0275mod:ye}),le=ye({\u0275fac:ye}),Ke=ye({__NG_ELEMENT_ID__:ye});let vt=0;function Pt(n){return Xr(()=>{const a={},c={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===kr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||Jt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Rt.Emulated,id:"c",styles:n.styles||Jt,_:null,setInput:null,schemas:n.schemas||null,tView:null},f=n.directives,_=n.features,I=n.pipes;return c.id+=vt++,c.inputs=ui(n.inputs,a),c.outputs=ui(n.outputs),_&&_.forEach(A=>A(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Yn):null,c.pipeDefs=I?()=>("function"==typeof I?I():I).map(Qn):null,c})}function Yn(n){return Ir(n)||function Ni(n){return n[pe]||null}(n)}function Qn(n){return function Cr(n){return n[ke]||null}(n)}const yn={};function lr(n){return Xr(()=>{const r={type:n.type,bootstrap:n.bootstrap||Jt,declarations:n.declarations||Jt,imports:n.imports||Jt,exports:n.exports||Jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(yn[n.id]=n.type),r})}function ui(n,r){if(null==n)return ur;const a={};for(const c in n)if(n.hasOwnProperty(c)){let f=n[c],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),a[f]=c,r&&(r[f]=_)}return a}const ts=Pt;function vn(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ir(n){return n[Te]||null}function rr(n,r){const a=n[Se]||null;if(!a&&!0===r)throw new Error(`Type ${we(n)} does not have '\u0275mod' property.`);return a}function ci(n){return Array.isArray(n)&&"object"==typeof n[1]}function Fi(n){return Array.isArray(n)&&!0===n[1]}function Zs(n){return 0!=(8&n.flags)}function ka(n){return 2==(2&n.flags)}function Ci(n){return 1==(1&n.flags)}function bi(n){return null!==n.template}function Do(n){return 0!=(512&n[2])}function Zr(n,r){return n.hasOwnProperty(le)?n[le]:null}class Ss{constructor(r,a,c){this.previousValue=r,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function gs(){return Ys}function Ys(n){return n.type.prototype.ngOnChanges&&(n.setInput=js),da}function da(){const n=Br(this),r=null==n?void 0:n.current;if(r){const a=n.previous;if(a===ur)n.previous=r;else for(let c in r)a[c]=r[c];n.current=null,this.ngOnChanges(r)}}function js(n,r,a,c){const f=Br(n)||function Qs(n,r){return n[is]=r}(n,{previous:ur,current:null}),_=f.current||(f.current={}),I=f.previous,A=this.declaredInputs[a],P=I[A];_[A]=new Ss(P&&P.currentValue,r,I===ur),n[c]=r}gs.ngInherit=!0;const is="__ngSimpleChanges__";function Br(n){return n[is]||null}let Yi;function xs(n){Yi=n}function Vn(n){return!!n.listen}const L={createRenderer:(n,r)=>function Rs(){return void 0!==Yi?Yi:"undefined"!=typeof document?document:void 0}()};function V(n){for(;Array.isArray(n);)n=n[0];return n}function Je(n,r){return V(r[n])}function lt(n,r){return V(r[n.index])}function rn(n,r){return n.data[r]}function En(n,r){const a=r[n];return ci(a)?a:a[0]}function Pn(n){return 4==(4&n[2])}function Nr(n){return 128==(128&n[2])}function $n(n,r){return null==r?null:n[r]}function Vi(n){n[18]=0}function Ui(n,r){n[5]+=r;let a=n,c=n[3];for(;null!==c&&(1===r&&1===a[5]||-1===r&&0===a[5]);)c[5]+=r,a=c,c=c[3]}const Kt={lFrame:qo(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function B(){return Kt.bindingsEnabled}function H(){return Kt.lFrame.lView}function Ve(){return Kt.lFrame.tView}function on(){let n=Yr();for(;null!==n&&64===n.type;)n=n.parent;return n}function Yr(){return Kt.lFrame.currentTNode}function Qi(n,r){const a=Kt.lFrame;a.currentTNode=n,a.isParent=r}function fo(){return Kt.lFrame.isParent}function po(){Kt.lFrame.isParent=!1}function pi(){return Kt.isInCheckNoChangesMode}function zo(n){Kt.isInCheckNoChangesMode=n}function go(){return Kt.lFrame.bindingIndex++}function Wu(n,r){const a=Kt.lFrame;a.bindingIndex=a.bindingRootIndex=n,Eu(r)}function Eu(n){Kt.lFrame.currentDirectiveIndex=n}function Ao(){return Kt.lFrame.currentQueryIndex}function Iu(n){Kt.lFrame.currentQueryIndex=n}function gl(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Va(n,r,a){if(a&Ht.SkipSelf){let f=r,_=n;for(;!(f=f.parent,null!==f||a&Ht.Host||(f=gl(_),null===f||(_=_[15],10&f.type))););if(null===f)return!1;r=f,n=_}const c=Kt.lFrame=Ua();return c.currentTNode=r,c.lView=n,!0}function Ko(n){const r=Ua(),a=n[1];Kt.lFrame=r,r.currentTNode=a.firstChild,r.lView=n,r.tView=a,r.contextLView=n,r.bindingIndex=a.bindingStartIndex,r.inI18n=!1}function Ua(){const n=Kt.lFrame,r=null===n?null:n.child;return null===r?qo(n):r}function qo(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function fa(){const n=Kt.lFrame;return Kt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Cu=fa;function Ta(){const n=fa();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Di(){return Kt.lFrame.selectedIndex}function xo(n){Kt.lFrame.selectedIndex=n}function mi(){const n=Kt.lFrame;return rn(n.tView,n.selectedIndex)}function lu(n,r){for(let a=r.directiveStart,c=r.directiveEnd;a<c;a++){const _=n.data[a].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:A,ngAfterViewInit:P,ngAfterViewChecked:z,ngOnDestroy:Y}=_;I&&(n.contentHooks||(n.contentHooks=[])).push(-a,I),A&&((n.contentHooks||(n.contentHooks=[])).push(a,A),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(a,A)),P&&(n.viewHooks||(n.viewHooks=[])).push(-a,P),z&&((n.viewHooks||(n.viewHooks=[])).push(a,z),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(a,z)),null!=Y&&(n.destroyHooks||(n.destroyHooks=[])).push(a,Y)}}function Zo(n,r,a){ar(n,r,3,a)}function eo(n,r,a,c){(3&n[2])===a&&ar(n,r,a,c)}function xa(n,r){let a=n[2];(3&a)===r&&(a&=2047,a+=1,n[2]=a)}function ar(n,r,a,c){const _=null!=c?c:-1,I=r.length-1;let A=0;for(let P=void 0!==c?65535&n[18]:0;P<I;P++)if("number"==typeof r[P+1]){if(A=r[P],null!=c&&A>=c)break}else r[P]<0&&(n[18]+=65536),(A<_||-1==_)&&(zl(n,a,r,P),n[18]=(4294901760&n[18])+P+2),P++}function zl(n,r,a,c){const f=a[c]<0,_=a[c+1],A=n[f?-a[c]:a[c]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{_.call(A)}finally{}}}else try{_.call(A)}finally{}}class to{constructor(r,a,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Ti(n,r,a){const c=Vn(n);let f=0;for(;f<a.length;){const _=a[f];if("number"==typeof _){if(0!==_)break;f++;const I=a[f++],A=a[f++],P=a[f++];c?n.setAttribute(r,A,P,I):r.setAttributeNS(I,A,P)}else{const I=_,A=a[++f];$a(I)?c&&n.setProperty(r,I,A):c?n.setAttribute(r,I,A):r.setAttribute(I,A),f++}}return f}function Ku(n){return 3===n||4===n||6===n}function $a(n){return 64===n.charCodeAt(0)}function ro(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let a=-1;for(let c=0;c<r.length;c++){const f=r[c];"number"==typeof f?a=f:0===a||_l(n,a,f,null,-1===a||2===a?r[++c]:null)}}return n}function _l(n,r,a,c,f){let _=0,I=n.length;if(-1===r)I=-1;else for(;_<n.length;){const A=n[_++];if("number"==typeof A){if(A===r){I=-1;break}if(A>r){I=_-1;break}}}for(;_<n.length;){const A=n[_];if("number"==typeof A)break;if(A===a){if(null===c)return void(null!==f&&(n[_+1]=f));if(c===n[_+1])return void(n[_+2]=f)}_++,null!==c&&_++,null!==f&&_++}-1!==I&&(n.splice(I,0,r),_=I+1),n.splice(_++,0,a),null!==c&&n.splice(_++,0,c),null!==f&&n.splice(_++,0,f)}function ql(n){return-1!==n}function Hs(n){return 32767&n}function Ar(n,r){let a=function qu(n){return n>>16}(n),c=r;for(;a>0;)c=c[15],a--;return c}let io=!0;function Yo(n){const r=io;return io=n,r}let bu=0;function mt(n,r){const a=Mo(n,r);if(-1!==a)return a;const c=r[1];c.firstCreatePass&&(n.injectorIndex=r.length,Pr(c.data,n),Pr(r,null),Pr(c.blueprint,null));const f=ya(n,r),_=n.injectorIndex;if(ql(f)){const I=Hs(f),A=Ar(f,r),P=A[1].data;for(let z=0;z<8;z++)r[_+z]=A[I+z]|P[I+z]}return r[_+8]=f,_}function Pr(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Mo(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ya(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let a=0,c=null,f=r;for(;null!==f;){const _=f[1],I=_.type;if(c=2===I?_.declTNode:1===I?f[6]:null,null===c)return-1;if(a++,f=f[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function S(n,r,a){!function Zl(n,r,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Ke)&&(c=a[Ke]),null==c&&(c=a[Ke]=bu++);const f=255&c;r.data[n+(f>>5)]|=1<<f}(n,r,a)}function b(n,r,a){if(a&Ht.Optional)return n;Qe(r,"NodeInjector")}function M(n,r,a,c){if(a&Ht.Optional&&void 0===c&&(c=null),0==(a&(Ht.Self|Ht.Host))){const f=n[9],_=pn(void 0);try{return f?f.get(r,c,a&Ht.Optional):as(r,c,a&Ht.Optional)}finally{pn(_)}}return b(c,r,a)}function N(n,r,a,c=Ht.Default,f){if(null!==n){const _=function Un(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(Ke)?n[Ke]:void 0;return"number"==typeof r?r>=0?255&r:ae:r}(a);if("function"==typeof _){if(!Va(r,n,c))return c&Ht.Host?b(f,a,c):M(r,a,c,f);try{const I=_(c);if(null!=I||c&Ht.Optional)return I;Qe(a)}finally{Cu()}}else if("number"==typeof _){let I=null,A=Mo(n,r),P=-1,z=c&Ht.Host?r[16][6]:null;for((-1===A||c&Ht.SkipSelf)&&(P=-1===A?ya(n,r):r[A+8],-1!==P&&hr(c,!1)?(I=r[1],A=Hs(P),r=Ar(P,r)):A=-1);-1!==A;){const Y=r[1];if(Gt(_,A,Y.data)){const ue=_e(A,r,a,I,c,z);if(ue!==W)return ue}P=r[A+8],-1!==P&&hr(c,r[1].data[A+8]===z)&&Gt(_,A,r)?(I=Y,A=Hs(P),r=Ar(P,r)):A=-1}}}return M(r,a,c,f)}const W={};function ae(){return new Hn(on(),H())}function _e(n,r,a,c,f,_){const I=r[1],A=I.data[n+8],Y=it(A,I,a,null==c?ka(A)&&io:c!=I&&0!=(3&A.type),f&Ht.Host&&_===A);return null!==Y?Ft(r,I,Y,A):W}function it(n,r,a,c,f){const _=n.providerIndexes,I=r.data,A=1048575&_,P=n.directiveStart,Y=_>>20,ve=f?A+Y:n.directiveEnd;for(let Ue=c?A:A+Y;Ue<ve;Ue++){const ct=I[Ue];if(Ue<P&&a===ct||Ue>=P&&ct.type===a)return Ue}if(f){const Ue=I[P];if(Ue&&bi(Ue)&&Ue.type===a)return P}return null}function Ft(n,r,a,c){let f=n[a];const _=r.data;if(function ja(n){return n instanceof to}(f)){const I=f;I.resolving&&function Ie(n,r){const a=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new ot(-200,`Circular dependency in DI detected for ${n}${a}`)}(at(_[a]));const A=Yo(I.canSeeViewProviders);I.resolving=!0;const P=I.injectImpl?pn(I.injectImpl):null;Va(n,c,Ht.Default);try{f=n[a]=I.factory(void 0,_,n,c),r.firstCreatePass&&a>=c.directiveStart&&function Pc(n,r,a){const{ngOnChanges:c,ngOnInit:f,ngDoCheck:_}=r.type.prototype;if(c){const I=Ys(r);(a.preOrderHooks||(a.preOrderHooks=[])).push(n,I),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,I)}f&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-n,f),_&&((a.preOrderHooks||(a.preOrderHooks=[])).push(n,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(n,_))}(a,_[a],r)}finally{null!==P&&pn(P),Yo(A),I.resolving=!1,Cu()}}return f}function Gt(n,r,a){return!!(a[r+(n>>5)]&1<<n)}function hr(n,r){return!(n&Ht.Self||n&Ht.Host&&r)}class Hn{constructor(r,a){this._tNode=r,this._lView=a}get(r,a,c){return N(this._tNode,this._lView,r,c,a)}}function so(n){return Xr(()=>{const r=n.prototype.constructor,a=r[le]||Qo(r),c=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==c;){const _=f[le]||Qo(f);if(_&&_!==a)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function Qo(n){return wt(n)?()=>{const r=Qo(Pe(n));return r&&r()}:Zr(n)}function Ha(n){return function D(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const a=n.attrs;if(a){const c=a.length;let f=0;for(;f<c;){const _=a[f];if(Ku(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<c&&"string"==typeof a[f];)f++;else{if(_===r)return a[f+1];f+=2}}}return null}(on(),n)}const an="__parameters__";function un(n,r,a){return Xr(()=>{const c=function $r(n){return function(...a){if(n){const c=n(...a);for(const f in c)this[f]=c[f]}}}(r);function f(..._){if(this instanceof f)return c.apply(this,_),this;const I=new f(..._);return A.annotation=I,A;function A(P,z,Y){const ue=P.hasOwnProperty(an)?P[an]:Object.defineProperty(P,an,{value:[]})[an];for(;ue.length<=Y;)ue.push(null);return(ue[Y]=ue[Y]||[]).push(I),P}}return a&&(f.prototype=Object.create(a.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class _i{constructor(r,a){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Yt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ji=new _i("AnalyzeForEntryComponents");function ys(n,r){void 0===r&&(r=n);for(let a=0;a<n.length;a++){let c=n[a];Array.isArray(c)?(r===n&&(r=n.slice(0,a)),ys(c,r)):r!==n&&r.push(c)}return r}function $e(n,r){n.forEach(a=>Array.isArray(a)?$e(a,r):r(a))}function Ns(n,r,a){r>=n.length?n.push(a):n.splice(r,0,a)}function Dr(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function Su(n,r){const a=[];for(let c=0;c<n;c++)a.push(r);return a}function Gs(n,r,a){let c=ss(n,r);return c>=0?n[1|c]=a:(c=~c,function Ps(n,r,a,c){let f=n.length;if(f==r)n.push(a,c);else if(1===f)n.push(c,n[0]),n[0]=a;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=a,n[r+1]=c}}(n,c,r,a)),c}function Yu(n,r){const a=ss(n,r);if(a>=0)return n[1|a]}function ss(n,r){return function Ka(n,r,a){let c=0,f=n.length>>a;for(;f!==c;){const _=c+(f-c>>1),I=n[_<<a];if(r===I)return _<<a;I>r?f=_:c=_+1}return~(f<<a)}(n,r,1)}const Fr={},wl="__NG_DI_FLAG__",ko="ngTempTokenPath",k=/\n/gm,Q="__source",ce=ye({provide:String,useValue:ye});let Oe;function We(n){const r=Oe;return Oe=n,r}function ht(n,r=Ht.Default){if(void 0===Oe)throw new ot(203,"");return null===Oe?as(n,void 0,r):Oe.get(n,r&Ht.Optional?null:void 0,r)}function Et(n,r=Ht.Default){return(function wn(){return Ln}()||ht)(Pe(n),r)}const mn=Et;function An(n){const r=[];for(let a=0;a<n.length;a++){const c=Pe(n[a]);if(Array.isArray(c)){if(0===c.length)throw new ot(900,"");let f,_=Ht.Default;for(let I=0;I<c.length;I++){const A=c[I],P=Wr(A);"number"==typeof P?-1===P?f=A.token:_|=P:f=A}r.push(Et(f,_))}else r.push(Et(c))}return r}function Xt(n,r){return n[wl]=r,n.prototype[wl]=r,n}function Wr(n){return n[wl]}const _o=Xt(un("Inject",n=>({token:n})),-1),ds=Xt(un("Optional"),8),oo=Xt(un("SkipSelf"),4);class xf{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Pu(n){return n instanceof xf?n.changingThisBreaksApplicationSecurity:n}const Tr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Xu=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var xr=(()=>((xr=xr||{})[xr.NONE=0]="NONE",xr[xr.HTML=1]="HTML",xr[xr.STYLE=2]="STYLE",xr[xr.SCRIPT=3]="SCRIPT",xr[xr.URL=4]="URL",xr[xr.RESOURCE_URL=5]="RESOURCE_URL",xr))();function hu(n){const r=function Fu(){const n=H();return n&&n[12]}();return r?r.sanitize(xr.URL,n)||"":function Ou(n,r){const a=function Sh(n){return n instanceof xf&&n.getTypeName()||null}(n);if(null!=a&&a!==r){if("ResourceURL"===a&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===r}(n,"URL")?Pu(n):function ir(n){return(n=String(n)).match(Tr)||n.match(Xu)?n:"unsafe:"+n}(Ye(n))}const Hc="__ngContext__";function $i(n,r){n[Hc]=r}function Gc(n){const r=function Uo(n){return n[Hc]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function na(n){return n.ngOriginalError}function Ld(n,...r){n.error(...r)}class oi{constructor(){this._console=console}handleError(r){const a=this._findOriginalError(r),c=function fu(n){return n&&n.ngErrorLogger||Ld}(r);c(this._console,"ERROR",r),a&&c(this._console,"ORIGINAL ERROR",a)}_findOriginalError(r){let a=r&&na(r);for(;a&&na(a);)a=na(a);return a||null}}const Of=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Dn))();function hs(n){return n instanceof Function?n():n}var G=(()=>((G=G||{})[G.Important=1]="Important",G[G.DashCase=2]="DashCase",G))();function Ce(n,r){return undefined(n,r)}function Lt(n){const r=n[3];return Fi(r)?r[3]:r}function es(n){return Kc(n[13])}function ao(n){return Kc(n[4])}function Kc(n){for(;null!==n&&!Fi(n);)n=n[4];return n}function Ea(n,r,a,c,f){if(null!=c){let _,I=!1;Fi(c)?_=c:ci(c)&&(I=!0,c=c[0]);const A=V(c);0===n&&null!==a?null==f?Gd(r,a,A):Yc(r,a,A,f||null,!0):1===n&&null!==a?Yc(r,a,A,f||null,!0):2===n?function Wp(n,r,a){const c=Qc(n,r);c&&function Xm(n,r,a,c){Vn(n)?n.removeChild(r,a,c):r.removeChild(a)}(n,c,r,a)}(r,A,I):3===n&&r.destroyNode(A),null!=_&&function Uh(n,r,a,c,f){const _=a[7];_!==V(a)&&Ea(r,n,c,_,f);for(let A=10;A<a.length;A++){const P=a[A];yi(P[1],P,n,r,c,_)}}(r,n,_,a,f)}}function Bd(n,r,a){if(Vn(n))return n.createElement(r,a);{const c=null!==a?function Li(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(a):null;return null===c?n.createElement(r):n.createElementNS(c,r)}}function eu(n,r){const a=n[9],c=a.indexOf(r),f=r[3];1024&r[2]&&(r[2]&=-1025,Ui(f,-1)),a.splice(c,1)}function $d(n,r){if(n.length<=10)return;const a=10+r,c=n[a];if(c){const f=c[17];null!==f&&f!==n&&eu(f,c),r>0&&(n[a-1][4]=c[4]);const _=Dr(n,10+r);!function Ph(n,r){yi(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const I=_[19];null!==I&&I.detachView(_[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function ac(n,r){if(!(256&r[2])){const a=r[11];Vn(a)&&a.destroyNode&&yi(n,r,a,3,null,null),function jo(n){let r=n[13];if(!r)return uc(n[1],n);for(;r;){let a=null;if(ci(r))a=r[13];else{const c=r[10];c&&(a=c)}if(!a){for(;r&&!r[4]&&r!==n;)ci(r)&&uc(r[1],r),r=r[3];null===r&&(r=n),ci(r)&&uc(r[1],r),a=r&&r[4]}r=a}}(r)}}function uc(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Hd(n,r){let a;if(null!=n&&null!=(a=n.destroyHooks))for(let c=0;c<a.length;c+=2){const f=r[a[c]];if(!(f instanceof to)){const _=a[c+1];if(Array.isArray(_))for(let I=0;I<_.length;I+=2){const A=f[_[I]],P=_[I+1];try{P.call(A)}finally{}}else try{_.call(f)}finally{}}}}(n,r),function Zc(n,r){const a=n.cleanup,c=r[7];let f=-1;if(null!==a)for(let _=0;_<a.length-1;_+=2)if("string"==typeof a[_]){const I=a[_+1],A="function"==typeof I?I(r):V(r[I]),P=c[f=a[_+2]],z=a[_+3];"boolean"==typeof z?A.removeEventListener(a[_],P,z):z>=0?c[f=z]():c[f=-z].unsubscribe(),_+=2}else{const I=c[f=a[_+1]];a[_].call(I)}if(null!==c){for(let _=f+1;_<c.length;_++)c[_]();r[7]=null}}(n,r),1===r[1].type&&Vn(r[11])&&r[11].destroy();const a=r[17];if(null!==a&&Fi(r[3])){a!==r[3]&&eu(a,r);const c=r[19];null!==c&&c.detachView(n)}}}function xl(n,r,a){return function Kg(n,r,a){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return a[0];if(2&c.flags){const f=n.data[c.directiveStart].encapsulation;if(f===Rt.None||f===Rt.Emulated)return null}return lt(c,a)}(n,r.parent,a)}function Yc(n,r,a,c,f){Vn(n)?n.insertBefore(r,a,c,f):r.insertBefore(a,c,f)}function Gd(n,r,a){Vn(n)?n.appendChild(r,a):r.appendChild(a)}function qg(n,r,a,c,f){null!==c?Yc(n,r,a,c,f):Gd(n,r,a)}function Qc(n,r){return Vn(n)?n.parentNode(r):r.parentNode}function Gp(n,r,a){return lc(n,r,a)}let lc=function Lh(n,r,a){return 40&n.type?lt(n,a):null};function Jr(n,r,a,c){const f=xl(n,c,r),_=r[11],A=Gp(c.parent||r[6],c,r);if(null!=f)if(Array.isArray(a))for(let P=0;P<a.length;P++)qg(_,f,a[P],A,!1);else qg(_,f,a,A,!1)}function Na(n,r){if(null!==r){const a=r.type;if(3&a)return lt(r,n);if(4&a)return Wd(-1,n[r.index]);if(8&a){const c=r.child;if(null!==c)return Na(n,c);{const f=n[r.index];return Fi(f)?Wd(-1,f):V(f)}}if(32&a)return Ce(r,n)()||V(n[r.index]);{const c=Jc(n,r);return null!==c?Array.isArray(c)?c[0]:Na(Lt(n[16]),c):Na(n,r.next)}}return null}function Jc(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Wd(n,r){const a=10+n+1;if(a<r.length){const c=r[a],f=c[1].firstChild;if(null!==f)return Na(c,f)}return r[7]}function Xc(n,r,a,c,f,_,I){for(;null!=a;){const A=c[a.index],P=a.type;if(I&&0===r&&(A&&$i(V(A),c),a.flags|=4),64!=(64&a.flags))if(8&P)Xc(n,r,a.child,c,f,_,!1),Ea(r,n,f,A,_);else if(32&P){const z=Ce(a,c);let Y;for(;Y=z();)Ea(r,n,f,Y,_);Ea(r,n,f,A,_)}else 16&P?Uu(n,r,c,a,f,_):Ea(r,n,f,A,_);a=I?a.projectionNext:a.next}}function yi(n,r,a,c,f,_){Xc(a,c,n.firstChild,r,f,_,!1)}function Uu(n,r,a,c,f,_){const I=a[16],P=I[6].projection[c.projection];if(Array.isArray(P))for(let z=0;z<P.length;z++)Ea(r,n,f,P[z],_);else Xc(n,r,P,I[3],f,_,!0)}function Ff(n,r,a){Vn(n)?n.setAttribute(r,"style",a):r.style.cssText=a}function zd(n,r,a){Vn(n)?""===a?n.removeAttribute(r,"class"):n.setAttribute(r,"class",a):r.className=a}function zp(n,r,a){let c=n.length;for(;;){const f=n.indexOf(r,a);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const _=r.length;if(f+_===c||n.charCodeAt(f+_)<=32)return f}a=f+1}}const cc="ng-template";function ed(n,r,a){let c=0;for(;c<n.length;){let f=n[c++];if(a&&"class"===f){if(f=n[c],-1!==zp(f.toLowerCase(),r,0))return!0}else if(1===f){for(;c<n.length&&"string"==typeof(f=n[c++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function dc(n){return 4===n.type&&n.value!==cc}function Bh(n,r,a){return r===(4!==n.type||a?n.value:cc)}function Yg(n,r,a){let c=4;const f=n.attrs||[],_=function e_(n){for(let r=0;r<n.length;r++)if(Ku(n[r]))return r;return n.length}(f);let I=!1;for(let A=0;A<r.length;A++){const P=r[A];if("number"!=typeof P){if(!I)if(4&c){if(c=2|1&c,""!==P&&!Bh(n,P,a)||""===P&&1===r.length){if(Pa(c))return!1;I=!0}}else{const z=8&c?P:r[++A];if(8&c&&null!==n.attrs){if(!ed(n.attrs,z,a)){if(Pa(c))return!1;I=!0}continue}const ue=Lf(8&c?"class":P,f,dc(n),a);if(-1===ue){if(Pa(c))return!1;I=!0;continue}if(""!==z){let ve;ve=ue>_?"":f[ue+1].toLowerCase();const Ue=8&c?ve:null;if(Ue&&-1!==zp(Ue,z,0)||2&c&&z!==ve){if(Pa(c))return!1;I=!0}}}}else{if(!I&&!Pa(c)&&!Pa(P))return!1;if(I&&Pa(P))continue;I=!1,c=P|1&c}}return Pa(c)||I}function Pa(n){return 0==(1&n)}function Lf(n,r,a,c){if(null===r)return-1;let f=0;if(c||!a){let _=!1;for(;f<r.length;){const I=r[f];if(I===n)return f;if(3===I||6===I)_=!0;else{if(1===I||2===I){let A=r[++f];for(;"string"==typeof A;)A=r[++f];continue}if(4===I)break;if(0===I){f+=4;continue}}f+=_?1:2}return-1}return function Jg(n,r){let a=n.indexOf(4);if(a>-1)for(a++;a<n.length;){const c=n[a];if("number"==typeof c)return-1;if(c===r)return a;a++}return-1}(r,n)}function qp(n,r,a=!1){for(let c=0;c<r.length;c++)if(Yg(n,r[c],a))return!0;return!1}function Xg(n,r){e:for(let a=0;a<r.length;a++){const c=r[a];if(n.length===c.length){for(let f=0;f<n.length;f++)if(n[f]!==c[f])continue e;return!0}}return!1}function jh(n,r){return n?":not("+r.trim()+")":r}function hc(n){let r=n[0],a=1,c=2,f="",_=!1;for(;a<n.length;){let I=n[a];if("string"==typeof I)if(2&c){const A=n[++a];f+="["+I+(A.length>0?'="'+A+'"':"")+"]"}else 8&c?f+="."+I:4&c&&(f+=" "+I);else""!==f&&!Pa(I)&&(r+=jh(_,f),f=""),c=I,_=_||!Pa(c);a++}return""!==f&&(r+=jh(_,f)),r}const Rn={};function tm(n){Vf(Ve(),H(),Di()+n,pi())}function Vf(n,r,a,c){if(!c)if(3==(3&r[2])){const _=n.preOrderCheckHooks;null!==_&&Zo(r,_,a)}else{const _=n.preOrderHooks;null!==_&&eo(r,_,0,a)}xo(a)}function Ml(n,r){return n<<17|r<<2}function $o(n){return n>>17&32767}function $h(n){return 2|n}function Nl(n){return(131068&n)>>2}function Hh(n,r){return-131069&n|r<<2}function Qp(n){return 1|n}function sg(n,r){const a=n.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c],_=a[c+1];if(-1!==_){const I=n.data[_];Iu(f),I.contentQueries(2,r[_],_)}}}function gc(n,r,a,c,f,_,I,A,P,z){const Y=r.blueprint.slice();return Y[0]=f,Y[2]=140|c,Vi(Y),Y[3]=Y[15]=n,Y[8]=a,Y[10]=I||n&&n[10],Y[11]=A||n&&n[11],Y[12]=P||n&&n[12]||null,Y[9]=z||n&&n[9]||null,Y[6]=_,Y[16]=2==r.type?n[16]:Y,Y}function rd(n,r,a,c,f){let _=n.data[r];if(null===_)_=function Yd(n,r,a,c,f){const _=Yr(),I=fo(),P=n.data[r]=function ul(n,r,a,c,f,_){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?_:_&&_.parent,a,r,c,f);return null===n.firstChild&&(n.firstChild=P),null!==_&&(I?null==_.child&&null!==P.parent&&(_.child=P):null===_.next&&(_.next=P)),P}(n,r,a,c,f),function $s(){return Kt.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=a,_.value=c,_.attrs=f;const I=function fi(){const n=Kt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();_.injectorIndex=null===I?-1:I.injectorIndex}return Qi(_,!0),_}function mc(n,r,a,c){if(0===a)return-1;const f=r.length;for(let _=0;_<a;_++)r.push(c),n.blueprint.push(c),n.data.push(null);return f}function sl(n,r,a){Ko(r);try{const c=n.viewQuery;null!==c&&sa(1,c,a);const f=n.template;null!==f&&Gf(n,r,f,1,a),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&sg(n,r),n.staticViewQueries&&sa(2,n.viewQuery,a);const _=n.components;null!==_&&function Hf(n,r){for(let a=0;a<r.length;a++)hm(n,r[a])}(r,_)}catch(c){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),c}finally{r[2]&=-5,Ta()}}function ol(n,r,a,c){const f=r[2];if(256==(256&f))return;Ko(r);const _=pi();try{Vi(r),function La(n){return Kt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==a&&Gf(n,r,a,2,c);const I=3==(3&f);if(!_)if(I){const z=n.preOrderCheckHooks;null!==z&&Zo(r,z,null)}else{const z=n.preOrderHooks;null!==z&&eo(r,z,0,null),xa(r,0)}if(function cl(n){for(let r=es(n);null!==r;r=ao(r)){if(!r[2])continue;const a=r[9];for(let c=0;c<a.length;c++){const f=a[c],_=f[3];0==(1024&f[2])&&Ui(_,1),f[2]|=1024}}}(r),function tf(n){for(let r=es(n);null!==r;r=ao(r))for(let a=10;a<r.length;a++){const c=r[a],f=c[1];Nr(c)&&ol(f,c,f.template,c[8])}}(r),null!==n.contentQueries&&sg(n,r),!_)if(I){const z=n.contentCheckHooks;null!==z&&Zo(r,z)}else{const z=n.contentHooks;null!==z&&eo(r,z,1),xa(r,1)}!function Yh(n,r){const a=n.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const f=a[c];if(f<0)xo(~f);else{const _=f,I=a[++c],A=a[++c];Wu(I,_),A(2,r[_])}}}finally{xo(-1)}}(n,r);const A=n.components;null!==A&&function s_(n,r){for(let a=0;a<r.length;a++)nf(n,r[a])}(r,A);const P=n.viewQuery;if(null!==P&&sa(2,P,c),!_)if(I){const z=n.viewCheckHooks;null!==z&&Zo(r,z)}else{const z=n.viewHooks;null!==z&&eo(r,z,2),xa(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),_||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Ui(r[3],-1))}finally{Ta()}}function Qd(n,r,a,c){const f=r[10],_=!pi(),I=Pn(r);try{_&&!I&&f.begin&&f.begin(),I&&sl(n,r,c),ol(n,r,a,c)}finally{_&&!I&&f.end&&f.end()}}function Gf(n,r,a,c,f){const _=Di(),I=2&c;try{xo(-1),I&&r.length>20&&Vf(n,r,20,pi()),a(c,f)}finally{xo(_)}}function Wf(n,r,a){!B()||(function Bu(n,r,a,c){const f=a.directiveStart,_=a.directiveEnd;n.firstCreatePass||mt(a,r),$i(c,r);const I=a.initialInputs;for(let A=f;A<_;A++){const P=n.data[A],z=bi(P);z&&u_(r,a,P);const Y=Ft(r,n,A,a);$i(Y,r),null!==I&&th(0,A-f,Y,P,0,I),z&&(En(a.index,r)[8]=Y)}}(n,r,a,lt(a,r)),128==(128&a.flags)&&function eh(n,r,a){const c=a.directiveStart,f=a.directiveEnd,I=a.index,A=function zu(){return Kt.lFrame.currentDirectiveIndex}();try{xo(I);for(let P=c;P<f;P++){const z=n.data[P],Y=r[P];Eu(P),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&ef(z,Y)}}finally{xo(-1),Eu(A)}}(n,r,a))}function Qh(n,r,a=lt){const c=r.localNames;if(null!==c){let f=r.index+1;for(let _=0;_<c.length;_+=2){const I=c[_+1],A=-1===I?a(r,n):n[I];n[f++]=A}}}function zf(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=al(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function al(n,r,a,c,f,_,I,A,P,z){const Y=20+c,ue=Y+f,ve=function Kf(n,r){const a=[];for(let c=0;c<r;c++)a.push(c<n?null:Rn);return a}(Y,ue),Ue="function"==typeof z?z():z;return ve[1]={type:n,blueprint:ve,template:a,queries:null,viewQuery:A,declTNode:r,data:ve.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:ue,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:P,consts:Ue,incompleteFirstPass:!1}}function um(n,r,a,c){const f=pg(r);null===a?f.push(c):(f.push(a),n.firstCreatePass&&tp(n).push(c,f.length-1))}function id(n,r,a){for(let c in n)if(n.hasOwnProperty(c)){const f=n[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(r,f):a[c]=[r,f]}return a}function Jd(n,r,a,c){let f=!1;if(B()){const _=function ug(n,r,a){const c=n.directiveRegistry;let f=null;if(c)for(let _=0;_<c.length;_++){const I=c[_];qp(a,I.selectors,!1)&&(f||(f=[]),S(mt(a,r),n,I.type),bi(I)?(od(n,a),f.unshift(I)):f.push(I))}return f}(n,r,a),I=null===c?null:{"":-1};if(null!==_){f=!0,ad(a,n.data.length,_.length);for(let Y=0;Y<_.length;Y++){const ue=_[Y];ue.providersResolver&&ue.providersResolver(ue)}let A=!1,P=!1,z=mc(n,r,_.length,null);for(let Y=0;Y<_.length;Y++){const ue=_[Y];a.mergedAttrs=ro(a.mergedAttrs,ue.hostAttrs),Qf(n,a,r,z,ue),a_(z,ue,I),null!==ue.contentQueries&&(a.flags|=8),(null!==ue.hostBindings||null!==ue.hostAttrs||0!==ue.hostVars)&&(a.flags|=128);const ve=ue.type.prototype;!A&&(ve.ngOnChanges||ve.ngOnInit||ve.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(a.index),A=!0),!P&&(ve.ngOnChanges||ve.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(a.index),P=!0),z++}!function og(n,r){const c=r.directiveEnd,f=n.data,_=r.attrs,I=[];let A=null,P=null;for(let z=r.directiveStart;z<c;z++){const Y=f[z],ue=Y.inputs,ve=null===_||dc(r)?null:yc(ue,_);I.push(ve),A=id(ue,z,A),P=id(Y.outputs,z,P)}null!==A&&(A.hasOwnProperty("class")&&(r.flags|=16),A.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=A,r.outputs=P}(n,a)}I&&function lg(n,r,a){if(r){const c=n.localNames=[];for(let f=0;f<r.length;f+=2){const _=a[r[f+1]];if(null==_)throw new ot(-301,!1);c.push(r[f],_)}}}(a,c,I)}return a.mergedAttrs=ro(a.mergedAttrs,a.attrs),f}function Xd(n,r,a,c,f,_){const I=_.hostBindings;if(I){let A=n.hostBindingOpCodes;null===A&&(A=n.hostBindingOpCodes=[]);const P=~r.index;(function sd(n){let r=n.length;for(;r>0;){const a=n[--r];if("number"==typeof a&&a<0)return a}return 0})(A)!=P&&A.push(P),A.push(c,f,I)}}function ef(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function od(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function a_(n,r,a){if(a){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)a[r.exportAs[c]]=n;bi(r)&&(a[""]=n)}}function ad(n,r,a){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+a,n.providerIndexes=r}function Qf(n,r,a,c,f){n.data[c]=f;const _=f.factory||(f.factory=Zr(f.type)),I=new to(_,bi(f),null);n.blueprint[c]=I,a[c]=I,Xd(n,r,0,c,mc(n,a,f.hostVars,Rn),f)}function u_(n,r,a){const c=lt(r,n),f=zf(a),_=n[10],I=dl(n,gc(n,f,null,a.onPush?64:16,c,r,_,_.createRenderer(c,a),null,null));n[r.index]=I}function ll(n,r,a,c,f,_){const I=lt(n,r);!function Jf(n,r,a,c,f,_,I){if(null==_)Vn(n)?n.removeAttribute(r,f,a):r.removeAttribute(f);else{const A=null==I?Ye(_):I(_,c||"",f);Vn(n)?n.setAttribute(r,f,A,a):a?r.setAttributeNS(a,f,A):r.setAttribute(f,A)}}(r[11],I,_,n.value,a,c,f)}function th(n,r,a,c,f,_){const I=_[r];if(null!==I){const A=c.setInput;for(let P=0;P<I.length;){const z=I[P++],Y=I[P++],ue=I[P++];null!==A?c.setInput(a,ue,z,Y):a[Y]=ue}}}function yc(n,r){let a=null,c=0;for(;c<r.length;){const f=r[c];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===a&&(a=[]),a.push(f,n[f],r[c+1])),c+=2}else c+=2;else c+=4}return a}function dg(n,r,a,c){return new Array(n,!0,!1,r,null,0,c,a,null,null)}function nf(n,r){const a=En(r,n);if(Nr(a)){const c=a[1];80&a[2]?ol(c,a,c.template,a[8]):a[5]>0&&hg(a)}}function hg(n){for(let c=es(n);null!==c;c=ao(c))for(let f=10;f<c.length;f++){const _=c[f];if(1024&_[2]){const I=_[1];ol(I,_,I.template,_[8])}else _[5]>0&&hg(_)}const a=n[1].components;if(null!==a)for(let c=0;c<a.length;c++){const f=En(a[c],n);Nr(f)&&f[5]>0&&hg(f)}}function hm(n,r){const a=En(r,n),c=a[1];(function ud(n,r){for(let a=r.length;a<n.blueprint.length;a++)r.push(n.blueprint[a])})(c,a),sl(c,a,a[8])}function dl(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function _u(n){for(;n;){n[2]|=64;const r=Lt(n);if(Do(n)&&!r)return n;n=r}return null}function vc(n,r,a){const c=r[10];c.begin&&c.begin();try{ol(n,r,n.template,a)}catch(f){throw np(r,f),f}finally{c.end&&c.end()}}function Xf(n){!function Ho(n){for(let r=0;r<n.components.length;r++){const a=n.components[r],c=Gc(a),f=c[1];Qd(f,c,f.template,a)}}(n[8])}function sa(n,r,a){Iu(0),r(n,a)}const fm=(()=>Promise.resolve(null))();function pg(n){return n[7]||(n[7]=[])}function tp(n){return n.cleanup||(n.cleanup=[])}function np(n,r){const a=n[9],c=a?a.get(oi,null):null;c&&c.handleError(r)}function gg(n,r,a,c,f){for(let _=0;_<a.length;){const I=a[_++],A=a[_++],P=r[I],z=n.data[I];null!==z.setInput?z.setInput(P,f,c,A):P[A]=f}}function Ia(n,r,a){const c=Je(r,n);!function mu(n,r,a){Vn(n)?n.setValue(r,a):r.textContent=a}(n[11],c,a)}function Ec(n,r,a){let c=a?n.styles:null,f=a?n.classes:null,_=0;if(null!==r)for(let I=0;I<r.length;I++){const A=r[I];"number"==typeof A?_=A:1==_?f=Ne(f,A):2==_&&(c=Ne(c,A+": "+r[++I]+";"))}a?n.styles=c:n.stylesWithoutHost=c,a?n.classes=f:n.classesWithoutHost=f}const Ic=new _i("INJECTOR",-1);class mm{get(r,a=Fr){if(a===Fr){const c=new Error(`NullInjectorError: No provider for ${we(r)}!`);throw c.name="NullInjectorError",c}return a}}const sf=new _i("Set Injector scope."),nh={},_m={};let mg;function af(){return void 0===mg&&(mg=new mm),mg}function ym(n,r=null,a=null,c){const f=ip(n,r,a,c);return f._resolveInjectorDefTypes(),f}function ip(n,r=null,a=null,c){return new l_(n,a,r||af(),c)}class l_{constructor(r,a,c,f=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];a&&$e(a,A=>this.processProvider(A,r,a)),$e([r],A=>this.processInjectorType(A,[],_)),this.records.set(Ic,Ca(void 0,this));const I=this.records.get(sf);this.scope=null!=I?I.value:null,this.source=f||("object"==typeof r?null:we(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,a=Fr,c=Ht.Default){this.assertNotDestroyed();const f=We(this),_=pn(void 0);try{if(!(c&Ht.SkipSelf)){let A=this.records.get(r);if(void 0===A){const P=function yg(n){return"function"==typeof n||"object"==typeof n&&n instanceof _i}(r)&&cn(r);A=P&&this.injectableDefInScope(P)?Ca(cd(r),nh):null,this.records.set(r,A)}if(null!=A)return this.hydrate(r,A)}return(c&Ht.Self?af():this.parent).get(r,a=c&Ht.Optional&&a===Fr?null:a)}catch(I){if("NullInjectorError"===I.name){if((I[ko]=I[ko]||[]).unshift(we(r)),f)throw I;return function ws(n,r,a,c){const f=n[ko];throw r[Q]&&f.unshift(r[Q]),n.message=function Fo(n,r,a,c=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let f=we(r);if(Array.isArray(r))f=r.map(we).join(" -> ");else if("object"==typeof r){let _=[];for(let I in r)if(r.hasOwnProperty(I)){let A=r[I];_.push(I+":"+("string"==typeof A?JSON.stringify(A):we(A)))}f=`{${_.join(", ")}}`}return`${a}${c?"("+c+")":""}[${f}]: ${n.replace(k,"\n  ")}`}("\n"+n.message,f,a,c),n.ngTokenPath=f,n[ko]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{pn(_),We(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((c,f)=>r.push(we(f))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ot(205,!1)}processInjectorType(r,a,c){if(!(r=Pe(r)))return!1;let f=gr(r);const _=null==f&&r.ngModule||void 0,I=void 0===_?r:_,A=-1!==c.indexOf(I);if(void 0!==_&&(f=gr(_)),null==f)return!1;if(null!=f.imports&&!A){let Y;c.push(I);try{$e(f.imports,ue=>{this.processInjectorType(ue,a,c)&&(void 0===Y&&(Y=[]),Y.push(ue))})}finally{}if(void 0!==Y)for(let ue=0;ue<Y.length;ue++){const{ngModule:ve,providers:Ue}=Y[ue];$e(Ue,ct=>this.processProvider(ct,ve,Ue||Jt))}}this.injectorDefTypes.add(I);const P=Zr(I)||(()=>new I);this.records.set(I,Ca(P,nh));const z=f.providers;if(null!=z&&!A){const Y=r;$e(z,ue=>this.processProvider(ue,Y,z))}return void 0!==_&&void 0!==r.providers}processProvider(r,a,c){let f=iu(r=Pe(r))?r:Pe(r&&r.provide);const _=function _g(n,r,a){return sp(n)?Ca(void 0,n.useValue):Ca(Ll(n),nh)}(r);if(iu(r)||!0!==r.multi)this.records.get(f);else{let I=this.records.get(f);I||(I=Ca(void 0,nh,!0),I.factory=()=>An(I.multi),this.records.set(f,I)),f=r,I.multi.push(r)}this.records.set(f,_)}hydrate(r,a){return a.value===nh&&(a.value=_m,a.value=a.factory()),"object"==typeof a.value&&a.value&&function dd(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(r){if(!r.providedIn)return!1;const a=Pe(r.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function cd(n){const r=cn(n),a=null!==r?r.factory:Zr(n);if(null!==a)return a;if(n instanceof _i)throw new ot(204,!1);if(n instanceof Function)return function vm(n){const r=n.length;if(r>0)throw Su(r,"?"),new ot(204,!1);const a=function or(n){const r=n&&(n[Lr]||n[Er]);if(r){const a=function wr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),r}return null}(n);return null!==a?()=>a.factory(n):()=>new n}(n);throw new ot(204,!1)}function Ll(n,r,a){let c;if(iu(n)){const f=Pe(n);return Zr(f)||cd(f)}if(sp(n))c=()=>Pe(n.useValue);else if(function Vl(n){return!(!n||!n.useFactory)}(n))c=()=>n.useFactory(...An(n.deps||[]));else if(function uf(n){return!(!n||!n.useExisting)}(n))c=()=>Et(Pe(n.useExisting));else{const f=Pe(n&&(n.useClass||n.provide));if(!function rh(n){return!!n.deps}(n))return Zr(f)||cd(f);c=()=>new f(...An(n.deps))}return c}function Ca(n,r,a=!1){return{factory:n,value:r,multi:a?[]:void 0}}function sp(n){return null!==n&&"object"==typeof n&&ce in n}function iu(n){return"function"==typeof n}let Go=(()=>{class n{static create(a,c){var f;if(Array.isArray(a))return ym({name:""},c,a,"");{const _=null!==(f=a.name)&&void 0!==f?f:"";return ym({name:_},a.parent,a.providers,_)}}}return n.THROW_IF_NOT_FOUND=Fr,n.NULL=new mm,n.\u0275prov=Yt({token:n,providedIn:"any",factory:()=>Et(Ic)}),n.__NG_ELEMENT_ID__=-1,n})();function wg(n,r){lu(Gc(n)[1],on())}function Dc(n){let r=function hd(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),a=!0;const c=[n];for(;r;){let f;if(bi(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ot(903,"");f=r.\u0275dir}if(f){if(a){c.push(f);const I=n;I.inputs=oh(n.inputs),I.declaredInputs=oh(n.declaredInputs),I.outputs=oh(n.outputs);const A=f.hostBindings;A&&Tm(n,A);const P=f.viewQuery,z=f.contentQueries;if(P&&Dm(n,P),z&&gp(n,z),Le(n.inputs,f.inputs),Le(n.declaredInputs,f.declaredInputs),Le(n.outputs,f.outputs),bi(f)&&f.data.animation){const Y=n.data;Y.animation=(Y.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let I=0;I<_.length;I++){const A=_[I];A&&A.ngInherit&&A(n),A===Dc&&(a=!1)}}r=Object.getPrototypeOf(r)}!function Eg(n){let r=0,a=null;for(let c=n.length-1;c>=0;c--){const f=n[c];f.hostVars=r+=f.hostVars,f.hostAttrs=ro(f.hostAttrs,a=ro(a,f.hostAttrs))}}(c)}function oh(n){return n===ur?{}:n===Jt?[]:n}function Dm(n,r){const a=n.viewQuery;n.viewQuery=a?(c,f)=>{r(c,f),a(c,f)}:r}function gp(n,r){const a=n.contentQueries;n.contentQueries=a?(c,f,_)=>{r(c,f,_),a(c,f,_)}:r}function Tm(n,r){const a=n.hostBindings;n.hostBindings=a?(c,f)=>{r(c,f),a(c,f)}:r}let ah=null;function Tc(){if(!ah){const n=Dn.Symbol;if(n&&n.iterator)ah=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<r.length;++a){const c=r[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(ah=c)}}}return ah}function fd(n){return!!df(n)&&(Array.isArray(n)||!(n instanceof Map)&&Tc()in n)}function df(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function aa(n,r,a){return!Object.is(n[r],a)&&(n[r]=a,!0)}function hf(n,r,a,c){const f=H();return aa(f,go(),r)&&(Ve(),ll(mi(),f,n,r,a,c)),hf}function xm(n,r,a,c,f,_,I,A){const P=H(),z=Ve(),Y=n+20,ue=z.firstCreatePass?function Am(n,r,a,c,f,_,I,A,P){const z=r.consts,Y=rd(r,n,4,I||null,$n(z,A));Jd(r,a,Y,$n(z,P)),lu(r,Y);const ue=Y.tViews=al(2,Y,c,f,_,r.directiveRegistry,r.pipeRegistry,null,r.schemas,z);return null!==r.queries&&(r.queries.template(r,Y),ue.queries=r.queries.embeddedTView(Y)),Y}(Y,z,P,r,a,c,f,_,I):z.data[Y];Qi(ue,!1);const ve=P[11].createComment("");Jr(z,P,ve,ue),$i(ve,P),dl(P,P[Y]=dg(ve,P,ve,ue)),Ci(ue)&&Wf(z,P,ue),null!=I&&Qh(P,ue,A)}function Oa(n,r=Ht.Default){const a=H();return null===a?Et(n,r):N(on(),a,Pe(n),r)}function kg(){throw new Error("invalid")}function Mp(n,r,a){const c=H();return aa(c,go(),r)&&function ia(n,r,a,c,f,_,I,A){const P=lt(r,a);let Y,z=r.inputs;!A&&null!=z&&(Y=z[c])?(gg(n,a,Y,c,f),ka(r)&&function Zf(n,r){const a=En(r,n);16&a[2]||(a[2]|=64)}(a,r.index)):3&r.type&&(c=function qf(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(c),f=null!=I?I(f,r.value||"",c):f,Vn(_)?_.setProperty(P,c,f):$a(c)||(P.setProperty?P.setProperty(c,f):P[c]=f))}(Ve(),mi(),c,n,r,c[11],a,!1),Mp}function fh(n,r,a,c,f){const I=f?"class":"style";gg(n,a,r.inputs[I],I,c)}function ph(n,r,a,c){const f=H(),_=Ve(),I=20+n,A=f[11],P=f[I]=Bd(A,r,function Aa(){return Kt.lFrame.currentNamespace}()),z=_.firstCreatePass?function Vm(n,r,a,c,f,_,I){const A=r.consts,z=rd(r,n,2,f,$n(A,_));return Jd(r,a,z,$n(A,I)),null!==z.attrs&&Ec(z,z.attrs,!1),null!==z.mergedAttrs&&Ec(z,z.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,z),z}(I,_,f,0,r,a,c):_.data[I];Qi(z,!0);const Y=z.mergedAttrs;null!==Y&&Ti(A,P,Y);const ue=z.classes;null!==ue&&zd(A,P,ue);const ve=z.styles;return null!==ve&&Ff(A,P,ve),64!=(64&z.flags)&&Jr(_,f,P,z),0===function Xs(){return Kt.lFrame.elementDepthCount}()&&$i(P,f),function co(){Kt.lFrame.elementDepthCount++}(),Ci(z)&&(Wf(_,f,z),function _c(n,r,a){if(Zs(r)){const f=r.directiveEnd;for(let _=r.directiveStart;_<f;_++){const I=n.data[_];I.contentQueries&&I.contentQueries(1,a[_],_)}}}(_,z,f)),null!==c&&Qh(f,z),ph}function Np(){let n=on();fo()?po():(n=n.parent,Qi(n,!1));const r=n;!function ho(){Kt.lFrame.elementDepthCount--}();const a=Ve();return a.firstCreatePass&&(lu(a,n),Zs(n)&&a.queries.elementEnd(n)),null!=r.classesWithoutHost&&function du(n){return 0!=(16&n.flags)}(r)&&fh(a,r,H(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function no(n){return 0!=(32&n.flags)}(r)&&fh(a,r,H(),r.stylesWithoutHost,!1),Np}function gf(n,r,a,c){return ph(n,r,a,c),Np(),gf}function Pp(n){return!!n&&"function"==typeof n.then}function C_(n){return!!n&&"function"==typeof n.subscribe}const l=C_;function o(n,r,a,c){const f=H(),_=Ve(),I=on();return function y(n,r,a,c,f,_,I,A){const P=Ci(c),Y=n.firstCreatePass&&tp(n),ue=r[8],ve=pg(r);let Ue=!0;if(3&c.type||A){const Ut=lt(c,r),sn=A?A(Ut):Ut,_t=ve.length,Cn=A?Or=>A(V(Or[c.index])):c.index;if(Vn(a)){let Or=null;if(!A&&P&&(Or=function h(n,r,a,c){const f=n.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const I=f[_];if(I===a&&f[_+1]===c){const A=r[7],P=f[_+2];return A.length>P?A[P]:null}"string"==typeof I&&(_+=2)}return null}(n,r,f,c.index)),null!==Or)(Or.__ngLastListenerFn__||Or).__ngNextListenerFn__=_,Or.__ngLastListenerFn__=_,Ue=!1;else{_=R(c,r,ue,_,!1);const zi=a.listen(sn,f,_);ve.push(_,zi),Y&&Y.push(f,Cn,_t,_t+1)}}else _=R(c,r,ue,_,!0),sn.addEventListener(f,_,I),ve.push(_),Y&&Y.push(f,Cn,_t,I)}else _=R(c,r,ue,_,!1);const ct=c.outputs;let Mt;if(Ue&&null!==ct&&(Mt=ct[f])){const Ut=Mt.length;if(Ut)for(let sn=0;sn<Ut;sn+=2){const Hl=r[Mt[sn]][Mt[sn+1]].subscribe(_),zg=ve.length;ve.push(_,Hl),Y&&Y.push(f,c.index,zg,-(zg+1))}}}(_,f,f[11],I,n,r,!!a,c),o}function C(n,r,a,c){try{return!1!==a(c)}catch(f){return np(n,f),!1}}function R(n,r,a,c,f){return function _(I){if(I===Function)return c;const A=2&n.flags?En(n.index,r):r;0==(32&r[2])&&_u(A);let P=C(r,0,c,I),z=_.__ngNextListenerFn__;for(;z;)P=C(r,0,z,I)&&P,z=z.__ngNextListenerFn__;return f&&!1===P&&(I.preventDefault(),I.returnValue=!1),P}}function K(n=1){return function Sa(n){return(Kt.lFrame.contextLView=function Wl(n,r){for(;n>0;)r=r[15],n--;return r}(n,Kt.lFrame.contextLView))[8]}(n)}function J(n,r){let a=null;const c=function Qg(n){const r=n.attrs;if(null!=r){const a=r.indexOf(5);if(0==(1&a))return r[a+1]}return null}(n);for(let f=0;f<r.length;f++){const _=r[f];if("*"!==_){if(null===c?qp(n,_,!0):Xg(c,_))return f}else a=f}return a}function se(n){const r=H()[16][6];if(!r.projection){const c=r.projection=Su(n?n.length:1,null),f=c.slice();let _=r.child;for(;null!==_;){const I=n?J(_,n):0;null!==I&&(f[I]?f[I].projectionNext=_:c[I]=_,f[I]=_),_=_.next}}}function Re(n,r=0,a){const c=H(),f=Ve(),_=rd(f,20+n,16,null,a||null);null===_.projection&&(_.projection=r),po(),64!=(64&_.flags)&&function kf(n,r,a){Uu(r[11],0,r,a,xl(n,a,r),Gp(a.parent||r[6],a,r))}(f,c,_)}function Ed(n,r,a,c,f){const _=n[a+1],I=null===r;let A=c?$o(_):Nl(_),P=!1;for(;0!==A&&(!1===P||I);){const Y=n[A+1];mf(n[A],r)&&(P=!0,n[A+1]=c?Qp(Y):$h(Y)),A=c?$o(Y):Nl(Y)}P&&(n[a+1]=c?$h(_):Qp(_))}function mf(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&ss(n,r)>=0}function A_(n,r){return function ua(n,r,a,c){const f=H(),_=Ve(),I=function Ms(n){const r=Kt.lFrame,a=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,a}(2);_.firstUpdatePass&&function R_(n,r,a,c){const f=n.data;if(null===f[a+1]){const _=f[Di()],I=function x_(n,r){return r>=n.expandoStartIndex}(n,a);(function cy(n,r){return 0!=(n.flags&(r?16:32))})(_,c)&&null===r&&!I&&(r=!1),r=function Lg(n,r,a,c){const f=function uu(n){const r=Kt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let _=c?r.residualClasses:r.residualStyles;if(null===f)0===(c?r.classBindings:r.styleBindings)&&(a=Vg(a=M_(null,n,r,a,c),r.attrs,c),_=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==f)if(a=M_(f,n,r,a,c),null===_){let P=function mh(n,r,a){const c=a?r.classBindings:r.styleBindings;if(0!==Nl(c))return n[$o(c)]}(n,r,c);void 0!==P&&Array.isArray(P)&&(P=M_(null,n,r,P[1],c),P=Vg(P,r.attrs,c),function qy(n,r,a,c){n[$o(a?r.classBindings:r.styleBindings)]=c}(n,r,c,P))}else _=function Zy(n,r,a){let c;const f=r.directiveEnd;for(let _=1+r.directiveStylingLast;_<f;_++)c=Vg(c,n[_].hostAttrs,a);return Vg(c,r.attrs,a)}(n,r,c)}return void 0!==_&&(c?r.residualClasses=_:r.residualStyles=_),a}(f,_,r,c),function jl(n,r,a,c,f,_){let I=_?r.classBindings:r.styleBindings,A=$o(I),P=Nl(I);n[c]=a;let Y,z=!1;if(Array.isArray(a)){const ue=a;Y=ue[1],(null===Y||ss(ue,Y)>0)&&(z=!0)}else Y=a;if(f)if(0!==P){const ve=$o(n[A+1]);n[c+1]=Ml(ve,A),0!==ve&&(n[ve+1]=Hh(n[ve+1],c)),n[A+1]=function Yp(n,r){return 131071&n|r<<17}(n[A+1],c)}else n[c+1]=Ml(A,0),0!==A&&(n[A+1]=Hh(n[A+1],c)),A=c;else n[c+1]=Ml(P,0),0===A?A=c:n[P+1]=Hh(n[P+1],c),P=c;z&&(n[c+1]=$h(n[c+1])),Ed(n,Y,c,!0),Ed(n,Y,c,!1),function wd(n,r,a,c,f){const _=f?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof r&&ss(_,r)>=0&&(a[c+1]=Qp(a[c+1]))}(r,Y,n,c,_),I=Ml(A,P),_?r.classBindings=I:r.styleBindings=I}(f,_,r,a,I,c)}}(_,n,I,c),r!==Rn&&aa(f,I,r)&&function N_(n,r,a,c,f,_,I,A){if(!(3&r.type))return;const P=n.data,z=P[A+1];$m(function Gh(n){return 1==(1&n)}(z)?uy(P,r,a,f,Nl(z),I):void 0)||($m(_)||function fc(n){return 2==(2&n)}(z)&&(_=uy(P,null,a,f,A,I)),function tu(n,r,a,c,f){const _=Vn(n);if(r)f?_?n.addClass(a,c):a.classList.add(c):_?n.removeClass(a,c):a.classList.remove(c);else{let I=-1===c.indexOf("-")?void 0:G.DashCase;if(null==f)_?n.removeStyle(a,c,I):a.style.removeProperty(c);else{const A="string"==typeof f&&f.endsWith("!important");A&&(f=f.slice(0,-10),I|=G.Important),_?n.setStyle(a,c,f,I):a.style.setProperty(c,f,A?"important":"")}}}(c,I,Je(Di(),a),f,_))}(_,_.data[Di()],f,f[11],n,f[I+1]=function ly(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=we(Pu(n)))),n}(r,a),c,I)}(n,r,null,!0),A_}function M_(n,r,a,c,f){let _=null;const I=a.directiveEnd;let A=a.directiveStylingLast;for(-1===A?A=a.directiveStart:A++;A<I&&(_=r[A],c=Vg(c,_.hostAttrs,f),_!==n);)A++;return null!==n&&(a.directiveStylingLast=A),c}function Vg(n,r,a){const c=a?1:2;let f=-1;if(null!==r)for(let _=0;_<r.length;_++){const I=r[_];"number"==typeof I?f=I:f===c&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Gs(n,I,!!a||r[++_]))}return void 0===n?null:n}function uy(n,r,a,c,f,_){const I=null===r;let A;for(;f>0;){const P=n[f],z=Array.isArray(P),Y=z?P[1]:P,ue=null===Y;let ve=a[f+1];ve===Rn&&(ve=ue?Jt:void 0);let Ue=ue?Yu(ve,c):Y===c?ve:void 0;if(z&&!$m(Ue)&&(Ue=Yu(P,c)),$m(Ue)&&(A=Ue,I))return A;const ct=n[f+1];f=I?$o(ct):Nl(ct)}if(null!==r){let P=_?r.residualClasses:r.residualStyles;null!=P&&(A=Yu(P,c))}return A}function $m(n){return void 0!==n}function dy(n,r=""){const a=H(),c=Ve(),f=n+20,_=c.firstCreatePass?rd(c,f,1,r,null):c.data[f],I=a[f]=function oc(n,r){return Vn(n)?n.createText(r):n.createTextNode(r)}(a[11],r);Jr(c,a,I,_),Qi(_,!1)}function Hm(n){return Gm("",n,""),Hm}function Gm(n,r,a){const c=H(),f=function Sc(n,r,a,c){return aa(n,go(),a)?r+Ye(a)+c:Rn}(c,n,r,a);return f!==Rn&&Ia(c,Di(),f),Gm}const _h=void 0;var U_=["en",[["a","p"],["AM","PM"],_h],[["AM","PM"],_h,_h],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_h,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_h,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_h,"{1} 'at' {0}",_h],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Bg(n){const a=Math.floor(Math.abs(n)),c=n.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Fp={};function Km(n){const r=function fl(n){return n.toLowerCase().replace(/_/g,"-")}(n);let a=j_(r);if(a)return a;const c=r.split("-")[0];if(a=j_(c),a)return a;if("en"===c)return U_;throw new Error(`Missing locale data for the locale "${n}".`)}function Cy(n){return Km(n)[_n.PluralCase]}function j_(n){return n in Fp||(Fp[n]=Dn.ng&&Dn.ng.common&&Dn.ng.common.locales&&Dn.ng.common.locales[n]),Fp[n]}var _n=(()=>((_n=_n||{})[_n.LocaleId=0]="LocaleId",_n[_n.DayPeriodsFormat=1]="DayPeriodsFormat",_n[_n.DayPeriodsStandalone=2]="DayPeriodsStandalone",_n[_n.DaysFormat=3]="DaysFormat",_n[_n.DaysStandalone=4]="DaysStandalone",_n[_n.MonthsFormat=5]="MonthsFormat",_n[_n.MonthsStandalone=6]="MonthsStandalone",_n[_n.Eras=7]="Eras",_n[_n.FirstDayOfWeek=8]="FirstDayOfWeek",_n[_n.WeekendRange=9]="WeekendRange",_n[_n.DateFormat=10]="DateFormat",_n[_n.TimeFormat=11]="TimeFormat",_n[_n.DateTimeFormat=12]="DateTimeFormat",_n[_n.NumberSymbols=13]="NumberSymbols",_n[_n.NumberFormats=14]="NumberFormats",_n[_n.CurrencyCode=15]="CurrencyCode",_n[_n.CurrencySymbol=16]="CurrencySymbol",_n[_n.CurrencyName=17]="CurrencyName",_n[_n.Currencies=18]="Currencies",_n[_n.Directionality=19]="Directionality",_n[_n.PluralCase=20]="PluralCase",_n[_n.ExtraData=21]="ExtraData",_n))();const jg="en-US";let wf=jg;function wv(n,r,a,c,f){if(n=Pe(n),Array.isArray(n))for(let _=0;_<n.length;_++)wv(n[_],r,a,c,f);else{const _=Ve(),I=H();let A=iu(n)?n:Pe(n.provide),P=Ll(n);const z=on(),Y=1048575&z.providerIndexes,ue=z.directiveStart,ve=z.providerIndexes>>20;if(iu(n)||!n.multi){const Ue=new to(P,f,Oa),ct=Iv(A,r,f?Y:Y+ve,ue);-1===ct?(S(mt(z,I),_,A),Ev(_,n,r.length),r.push(A),z.directiveStart++,z.directiveEnd++,f&&(z.providerIndexes+=1048576),a.push(Ue),I.push(Ue)):(a[ct]=Ue,I[ct]=Ue)}else{const Ue=Iv(A,r,Y+ve,ue),ct=Iv(A,r,Y,Y+ve),Mt=Ue>=0&&a[Ue],Ut=ct>=0&&a[ct];if(f&&!Ut||!f&&!Mt){S(mt(z,I),_,A);const sn=function lE(n,r,a,c,f){const _=new to(n,a,Oa);return _.multi=[],_.index=r,_.componentProviders=0,v0(_,f,c&&!a),_}(f?uE:aE,a.length,f,c,P);!f&&Ut&&(a[ct].providerFactory=sn),Ev(_,n,r.length,0),r.push(A),z.directiveStart++,z.directiveEnd++,f&&(z.providerIndexes+=1048576),a.push(sn),I.push(sn)}else Ev(_,n,Ue>-1?Ue:ct,v0(a[f?ct:Ue],P,!f&&c));!f&&c&&Ut&&a[ct].componentProviders++}}}function Ev(n,r,a,c){const f=iu(r),_=function Cc(n){return!!n.useClass}(r);if(f||_){const P=(_?Pe(r.useClass):r).prototype.ngOnDestroy;if(P){const z=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const Y=z.indexOf(a);-1===Y?z.push(a,[c,P]):z[Y+1].push(c,P)}else z.push(a,P)}}}function v0(n,r,a){return a&&n.componentProviders++,n.multi.push(r)-1}function Iv(n,r,a,c){for(let f=a;f<c;f++)if(r[f]===n)return f;return-1}function aE(n,r,a,c){return Cv(this.multi,[])}function uE(n,r,a,c){const f=this.multi;let _;if(this.providerFactory){const I=this.providerFactory.componentProviders,A=Ft(a,a[1],this.providerFactory.index,c);_=A.slice(0,I),Cv(f,_);for(let P=I;P<A.length;P++)_.push(A[P])}else _=[],Cv(f,_);return _}function Cv(n,r){for(let a=0;a<n.length;a++)r.push((0,n[a])());return r}function w0(n,r=[]){return a=>{a.providersResolver=(c,f)=>function oE(n,r,a){const c=Ve();if(c.firstCreatePass){const f=bi(n);wv(a,c.data,c.blueprint,f,!0),wv(r,c.data,c.blueprint,f,!1)}}(c,f?f(n):n,r)}}class E0{}class hE{resolveComponentFactory(r){throw function dE(n){const r=Error(`No component factory found for ${we(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Fy=(()=>{class n{}return n.NULL=new hE,n})();function fE(){return Zm(on(),H())}function Zm(n,r){return new K_(lt(n,r))}let K_=(()=>{class n{constructor(a){this.nativeElement=a}}return n.__NG_ELEMENT_ID__=fE,n})();function pE(n){return n instanceof K_?n.nativeElement:n}class C0{}let gE=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function _E(){const n=H(),a=En(on().index,n);return function mE(n){return n[11]}(ci(a)?a:n)}(),n})(),yE=(()=>{class n{}return n.\u0275prov=Yt({token:n,providedIn:"root",factory:()=>null}),n})();class b0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const D0=new b0("13.2.7"),bv={};function Ly(n,r,a,c,f=!1){for(;null!==a;){const _=r[a.index];if(null!==_&&c.push(V(_)),Fi(_))for(let A=10;A<_.length;A++){const P=_[A],z=P[1].firstChild;null!==z&&Ly(P[1],P,z,c)}const I=a.type;if(8&I)Ly(n,r,a.child,c);else if(32&I){const A=Ce(a,r);let P;for(;P=A();)c.push(P)}else if(16&I){const A=Jc(r,a);if(Array.isArray(A))c.push(...A);else{const P=Lt(r[16]);Ly(P[1],P,A,c,!0)}}a=f?a.projectionNext:a.next}return c}class q_{constructor(r,a){this._lView=r,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,a=r[1];return Ly(a,r,a.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Fi(r)){const a=r[8],c=a?a.indexOf(this):-1;c>-1&&($d(r,c),Dr(a,c))}this._attachedToViewContainer=!1}ac(this._lView[1],this._lView)}onDestroy(r){um(this._lView[1],this._lView,null,r)}markForCheck(){_u(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){vc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function rf(n,r,a){zo(!0);try{vc(n,r,a)}finally{zo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ot(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kh(n,r){yi(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ot(902,"");this._appRef=r}}class vE extends q_{constructor(r){super(r),this._view=r}detectChanges(){Xf(this._view)}checkNoChanges(){!function ep(n){zo(!0);try{Xf(n)}finally{zo(!1)}}(this._view)}get context(){return null}}class T0 extends Fy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const a=Ir(r);return new Dv(a,this.ngModule)}}function S0(n){const r=[];for(let a in n)n.hasOwnProperty(a)&&r.push({propName:n[a],templateName:a});return r}class Dv extends E0{constructor(r,a){super(),this.componentDef=r,this.ngModule=a,this.componentType=r.type,this.selector=function Rl(n){return n.map(hc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return S0(this.componentDef.inputs)}get outputs(){return S0(this.componentDef.outputs)}create(r,a,c,f){const _=(f=f||this.ngModule)?function EE(n,r){return{get:(a,c,f)=>{const _=n.get(a,bv,f);return _!==bv||c===bv?_:r.get(a,c,f)}}}(r,f.injector):r,I=_.get(C0,L),A=_.get(yE,null),P=I.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",Y=c?function Xh(n,r,a){if(Vn(n))return n.selectRootElement(r,a===Rt.ShadowDom);let c="string"==typeof r?n.querySelector(r):r;return c.textContent="",c}(P,c,this.componentDef.encapsulation):Bd(I.createRenderer(null,this.componentDef),z,function wE(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(z)),ue=this.componentDef.onPush?576:528,ve=function bm(n,r){return{components:[],scheduler:n||Of,clean:fm,playerHandler:r||null,flags:0}}(),Ue=al(0,null,null,1,0,null,null,null,null,null),ct=gc(null,Ue,ve,ue,null,null,I,P,A,_);let Mt,Ut;Ko(ct);try{const sn=function Cm(n,r,a,c,f,_){const I=a[1];a[20]=n;const P=rd(I,20,2,"#host",null),z=P.mergedAttrs=r.hostAttrs;null!==z&&(Ec(P,z,!0),null!==n&&(Ti(f,n,z),null!==P.classes&&zd(f,n,P.classes),null!==P.styles&&Ff(f,n,P.styles)));const Y=c.createRenderer(n,r),ue=gc(a,zf(r),null,r.onPush?64:16,a[20],P,c,Y,_||null,null);return I.firstCreatePass&&(S(mt(P,a),I,r.type),od(I,P),ad(P,a.length,1)),dl(a,ue),a[20]=ue}(Y,this.componentDef,ct,I,P);if(Y)if(c)Ti(P,Y,["ng-version",D0.full]);else{const{attrs:_t,classes:Cn}=function em(n){const r=[],a=[];let c=1,f=2;for(;c<n.length;){let _=n[c];if("string"==typeof _)2===f?""!==_&&r.push(_,n[++c]):8===f&&a.push(_);else{if(!Pa(f))break;f=_}c++}return{attrs:r,classes:a}}(this.componentDef.selectors[0]);_t&&Ti(P,Y,_t),Cn&&Cn.length>0&&zd(P,Y,Cn.join(" "))}if(Ut=rn(Ue,20),void 0!==a){const _t=Ut.projection=[];for(let Cn=0;Cn<this.ngContentSelectors.length;Cn++){const Or=a[Cn];_t.push(null!=Or?Array.from(Or):null)}}Mt=function fp(n,r,a,c,f){const _=a[1],I=function Yf(n,r,a){const c=on();n.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Qf(n,c,r,mc(n,r,1,null),a));const f=Ft(r,n,c.directiveStart,c);$i(f,r);const _=lt(c,r);return _&&$i(_,r),f}(_,a,r);if(c.components.push(I),n[8]=I,f&&f.forEach(P=>P(I,r)),r.contentQueries){const P=on();r.contentQueries(1,I,P.directiveStart)}const A=on();return!_.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(xo(A.index),Xd(a[1],A,0,A.directiveStart,A.directiveEnd,r),ef(r,I)),I}(sn,this.componentDef,ct,ve,[wg]),sl(Ue,ct,null)}finally{Ta()}return new CE(this.componentType,Mt,Zm(Ut,ct),ct,Ut)}}class CE extends class cE{}{constructor(r,a,c,f,_){super(),this.location=c,this._rootLView=f,this._tNode=_,this.instance=a,this.hostView=this.changeDetectorRef=new vE(f),this.componentType=r}get injector(){return new Hn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Ym{}class A0{}const Qm=new Map;class M0 extends Ym{constructor(r,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new T0(this);const c=rr(r);this._bootstrapComponents=hs(c.bootstrap),this._r3Injector=ip(r,a,[{provide:Ym,useValue:this},{provide:Fy,useValue:this.componentFactoryResolver}],we(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,a=Go.THROW_IF_NOT_FOUND,c=Ht.Default){return r===Go||r===Ym||r===Ic?this:this._r3Injector.get(r,a,c)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Tv extends A0{constructor(r){super(),this.moduleType=r,null!==rr(r)&&function DE(n){const r=new Set;!function a(c){const f=rr(c,!0),_=f.id;null!==_&&(function x0(n,r,a){if(r&&r!==a)throw new Error(`Duplicate module registered for ${n} - ${we(r)} vs ${we(r.name)}`)}(_,Qm.get(_),c),Qm.set(_,c));const I=hs(f.imports);for(const A of I)r.has(A)||(r.add(A),a(A))}(n)}(r)}create(r){return new M0(this.moduleType,r)}}function Sv(n){return r=>{setTimeout(n,void 0,r)}}const Eh=class HE extends w.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,a,c){var f,_,I;let A=r,P=a||(()=>null),z=c;if(r&&"object"==typeof r){const ue=r;A=null===(f=ue.next)||void 0===f?void 0:f.bind(ue),P=null===(_=ue.error)||void 0===_?void 0:_.bind(ue),z=null===(I=ue.complete)||void 0===I?void 0:I.bind(ue)}this.__isAsync&&(P=Sv(P),A&&(A=Sv(A)),z&&(z=Sv(z)));const Y=super.subscribe({next:A,error:P,complete:z});return r instanceof ne.w0&&r.add(Y),Y}};function GE(){return this._results[Tc()]()}class Av{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Tc(),c=Av.prototype;c[a]||(c[a]=GE)}get changes(){return this._changes||(this._changes=new Eh)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,a){return this._results.reduce(r,a)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,a){const c=this;c.dirty=!1;const f=ys(r);(this._changesDetected=!function Hr(n,r,a){if(n.length!==r.length)return!1;for(let c=0;c<n.length;c++){let f=n[c],_=r[c];if(a&&(f=a(f),_=a(_)),_!==f)return!1}return!0}(c._results,f,a))&&(c._results=f,c.length=f.length,c.last=f[this.length-1],c.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Q_=(()=>{class n{}return n.__NG_ELEMENT_ID__=KE,n})();const WE=Q_,zE=class extends WE{constructor(r,a,c){super(),this._declarationLView=r,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(r){const a=this._declarationTContainer.tViews,c=gc(this._declarationLView,a,r,16,null,a.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(c[19]=_.createEmbeddedView(a)),sl(a,c,r),new q_(c)}};function KE(){return Vy(on(),H())}function Vy(n,r){return 4&n.type?new zE(r,n,Zm(n,r)):null}let Uy=(()=>{class n{}return n.__NG_ELEMENT_ID__=qE,n})();function qE(){return U0(on(),H())}const ZE=Uy,L0=class extends ZE{constructor(r,a,c){super(),this._lContainer=r,this._hostTNode=a,this._hostLView=c}get element(){return Zm(this._hostTNode,this._hostLView)}get injector(){return new Hn(this._hostTNode,this._hostLView)}get parentInjector(){const r=ya(this._hostTNode,this._hostLView);if(ql(r)){const a=Ar(r,this._hostLView),c=Hs(r);return new Hn(a[1].data[c+8],a)}return new Hn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const a=V0(this._lContainer);return null!==a&&a[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,a,c){const f=r.createEmbeddedView(a||{});return this.insert(f,c),f}createComponent(r,a,c,f,_){const I=r&&!function Wa(n){return"function"==typeof n}(r);let A;if(I)A=a;else{const ue=a||{};A=ue.index,c=ue.injector,f=ue.projectableNodes,_=ue.ngModuleRef}const P=I?r:new Dv(Ir(r)),z=c||this.parentInjector;if(!_&&null==P.ngModule){const ve=(I?z:this.parentInjector).get(Ym,null);ve&&(_=ve)}const Y=P.create(z,f,void 0,_);return this.insert(Y.hostView,A),Y}insert(r,a){const c=r._lView,f=c[1];if(function On(n){return Fi(n[3])}(c)){const Y=this.indexOf(r);if(-1!==Y)this.detach(Y);else{const ue=c[3],ve=new L0(ue,ue[6],ue[3]);ve.detach(ve.indexOf(r))}}const _=this._adjustIndex(a),I=this._lContainer;!function ra(n,r,a,c){const f=10+c,_=a.length;c>0&&(a[f-1][4]=r),c<_-10?(r[4]=a[f],Ns(a,10+c,r)):(a.push(r),r[4]=null),r[3]=a;const I=r[17];null!==I&&a!==I&&function jd(n,r){const a=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===a?n[9]=[r]:a.push(r)}(I,r);const A=r[19];null!==A&&A.insertView(n),r[2]|=128}(f,c,I,_);const A=Wd(_,I),P=c[11],z=Qc(P,I[7]);return null!==z&&function Oh(n,r,a,c,f,_){c[0]=f,c[6]=r,yi(n,c,a,1,f,_)}(f,I[6],P,c,z,A),r.attachToViewContainerRef(),Ns(xv(I),_,r),r}move(r,a){return this.insert(r,a)}indexOf(r){const a=V0(this._lContainer);return null!==a?a.indexOf(r):-1}remove(r){const a=this._adjustIndex(r,-1),c=$d(this._lContainer,a);c&&(Dr(xv(this._lContainer),a),ac(c[1],c))}detach(r){const a=this._adjustIndex(r,-1),c=$d(this._lContainer,a);return c&&null!=Dr(xv(this._lContainer),a)?new q_(c):null}_adjustIndex(r,a=0){return null==r?this.length+a:r}};function V0(n){return n[8]}function xv(n){return n[8]||(n[8]=[])}function U0(n,r){let a;const c=r[n.index];if(Fi(c))a=c;else{let f;if(8&n.type)f=V(c);else{const _=r[11];f=_.createComment("");const I=lt(n,r);Yc(_,Qc(_,I),f,function Fh(n,r){return Vn(n)?n.nextSibling(r):r.nextSibling}(_,I),!1)}r[n.index]=a=dg(c,r,f,n),dl(r,a)}return new L0(a,n,r)}class Rv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Rv(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const a=r.queries;if(null!==a){const c=null!==r.contentQueries?r.contentQueries[0]:a.length,f=[];for(let _=0;_<c;_++){const I=a.getByIndex(_);f.push(this.queries[I.indexInDeclarationView].clone())}return new Mv(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let a=0;a<this.queries.length;a++)null!==K0(r,a).matches&&this.queries[a].setDirty()}}class B0{constructor(r,a,c=null){this.predicate=r,this.flags=a,this.read=c}}class Nv{constructor(r=[]){this.queries=r}elementStart(r,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,a)}elementEnd(r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(r)}embeddedTView(r){let a=null;for(let c=0;c<this.length;c++){const f=null!==a?a.length:0,_=this.getByIndex(c).embeddedTView(r,f);_&&(_.indexInDeclarationView=c,null!==a?a.push(_):a=[_])}return null!==a?new Nv(a):null}template(r,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,a)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Pv{constructor(r,a=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(r,a){this.isApplyingToNode(a)&&this.matchTNode(r,a)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,a){this.elementStart(r,a)}embeddedTView(r,a){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,a),new Pv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let f=0;f<c.length;f++){const _=c[f];this.matchTNodeWithReadOption(r,a,JE(a,_)),this.matchTNodeWithReadOption(r,a,it(a,r,_,!1,!1))}else c===Q_?4&a.type&&this.matchTNodeWithReadOption(r,a,-1):this.matchTNodeWithReadOption(r,a,it(a,r,c,!1,!1))}matchTNodeWithReadOption(r,a,c){if(null!==c){const f=this.metadata.read;if(null!==f)if(f===K_||f===Uy||f===Q_&&4&a.type)this.addMatch(a.index,-2);else{const _=it(a,r,f,!1,!1);null!==_&&this.addMatch(a.index,_)}else this.addMatch(a.index,c)}}addMatch(r,a){null===this.matches?this.matches=[r,a]:this.matches.push(r,a)}}function JE(n,r){const a=n.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===r)return a[c+1];return null}function eI(n,r,a,c){return-1===a?function XE(n,r){return 11&n.type?Zm(n,r):4&n.type?Vy(n,r):null}(r,n):-2===a?function tI(n,r,a){return a===K_?Zm(r,n):a===Q_?Vy(r,n):a===Uy?U0(r,n):void 0}(n,r,c):Ft(n,n[1],a,r)}function j0(n,r,a,c){const f=r[19].queries[c];if(null===f.matches){const _=n.data,I=a.matches,A=[];for(let P=0;P<I.length;P+=2){const z=I[P];A.push(z<0?null:eI(r,_[z],I[P+1],a.metadata.read))}f.matches=A}return f.matches}function Ov(n,r,a,c){const f=n.queries.getByIndex(a),_=f.matches;if(null!==_){const I=j0(n,r,f,a);for(let A=0;A<_.length;A+=2){const P=_[A];if(P>0)c.push(I[A/2]);else{const z=_[A+1],Y=r[-P];for(let ue=10;ue<Y.length;ue++){const ve=Y[ue];ve[17]===ve[3]&&Ov(ve[1],ve,z,c)}if(null!==Y[9]){const ue=Y[9];for(let ve=0;ve<ue.length;ve++){const Ue=ue[ve];Ov(Ue[1],Ue,z,c)}}}}}return c}function $0(n){const r=H(),a=Ve(),c=Ao();Iu(c+1);const f=K0(a,c);if(n.dirty&&Pn(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const _=f.crossesNgTemplate?Ov(a,r,c,[]):j0(a,r,f,c);n.reset(_,pE),n.notifyOnChanges()}return!0}return!1}function H0(n,r,a,c){const f=Ve();if(f.firstCreatePass){const _=on();(function z0(n,r,a){null===n.queries&&(n.queries=new Nv),n.queries.track(new Pv(r,a))})(f,new B0(r,a,c),_.index),function iI(n,r){const a=n.contentQueries||(n.contentQueries=[]);r!==(a.length?a[a.length-1]:-1)&&a.push(n.queries.length-1,r)}(f,n),2==(2&a)&&(f.staticContentQueries=!0)}!function W0(n,r,a){const c=new Av(4==(4&a));um(n,r,c,c.destroy),null===r[19]&&(r[19]=new Mv),r[19].queries.push(new Rv(c))}(f,H(),a)}function G0(){return function rI(n,r){return n[19].queries[r].queryList}(H(),Ao())}function K0(n,r){return n.queries.getByIndex(r)}function $y(...n){}const cw=new _i("Application Initializer");let Bv=(()=>{class n{constructor(a){this.appInits=a,this.resolve=$y,this.reject=$y,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,f)=>{this.resolve=c,this.reject=f})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(Pp(_))a.push(_);else if(l(_)){const I=new Promise((A,P)=>{_.subscribe({complete:A,error:P})});a.push(I)}}Promise.all(a).then(()=>{c()}).catch(f=>{this.reject(f)}),0===a.length&&c(),this.initialized=!0}}return n.\u0275fac=function(a){return new(a||n)(Et(cw,8))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const dw=new _i("AppId",{providedIn:"root",factory:function hw(){return`${jv()}${jv()}${jv()}`}});function jv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fw=new _i("Platform Initializer"),pw=new _i("Platform ID"),gw=new _i("appBootstrapListener");let mw=(()=>{class n{log(a){console.log(a)}warn(a){console.warn(a)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})();const $v=new _i("LocaleId",{providedIn:"root",factory:()=>mn($v,Ht.Optional|Ht.SkipSelf)||function II(){return"undefined"!=typeof $localize&&$localize.locale||jg}()}),CI=new _i("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class bI{constructor(r,a){this.ngModuleFactory=r,this.componentFactories=a}}let DI=(()=>{class n{compileModuleSync(a){return new Tv(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),_=hs(rr(a).declarations).reduce((I,A)=>{const P=Ir(A);return P&&I.push(new Dv(P)),I},[]);return new bI(c,_)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SI=(()=>Promise.resolve(0))();function Hv(n){"undefined"==typeof Zone?SI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class bd{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Eh(!1),this.onMicrotaskEmpty=new Eh(!1),this.onStable=new Eh(!1),this.onError=new Eh(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!c&&a,f.shouldCoalesceRunChangeDetection=c,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function AI(){let n=Dn.requestAnimationFrame,r=Dn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const a=n[Zone.__symbol__("OriginalDelegate")];a&&(n=a);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function MI(n){const r=()=>{!function RI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Dn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Wv(n),n.isCheckStableRunning=!0,Gv(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Wv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,f,_,I,A)=>{try{return _w(n),a.invokeTask(f,_,I,A)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&r(),yw(n)}},onInvoke:(a,c,f,_,I,A,P)=>{try{return _w(n),a.invoke(f,_,I,A,P)}finally{n.shouldCoalesceRunChangeDetection&&r(),yw(n)}},onHasTask:(a,c,f,_)=>{a.hasTask(f,_),c===f&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,Wv(n),Gv(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(a,c,f,_)=>(a.handleError(f,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!bd.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(bd.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,a,c){return this._inner.run(r,a,c)}runTask(r,a,c,f){const _=this._inner,I=_.scheduleEventTask("NgZoneEvent: "+f,r,xI,$y,$y);try{return _.runTask(I,a,c)}finally{_.cancelTask(I)}}runGuarded(r,a,c){return this._inner.runGuarded(r,a,c)}runOutsideAngular(r){return this._outer.run(r)}}const xI={};function Gv(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Wv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function _w(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function yw(n){n._nesting--,Gv(n)}class NI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Eh,this.onMicrotaskEmpty=new Eh,this.onStable=new Eh,this.onError=new Eh}run(r,a,c){return r.apply(a,c)}runGuarded(r,a,c){return r.apply(a,c)}runOutsideAngular(r){return r()}runTask(r,a,c,f){return r.apply(a,c)}}let vw=(()=>{class n{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{bd.assertNotInAngularZone(),Hv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,f){let _=-1;c&&c>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==_),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:_,updateCb:f})}whenStable(a,c,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,c,f){return[]}}return n.\u0275fac=function(a){return new(a||n)(Et(bd))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})(),ww=(()=>{class n{constructor(){this._applications=new Map,zv.addToWindow(this)}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return zv.findTestabilityInTree(this,a,c)}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})();class PI{addToWindow(r){}findTestabilityInTree(r,a,c){return null}}function OI(n){zv=n}let Dd,zv=new PI;const Ew=new _i("AllowMultipleToken");class LI{constructor(r,a){this.name=r,this.token=a}}function Iw(n,r,a=[]){const c=`Platform: ${r}`,f=new _i(c);return(_=[])=>{let I=Cw();if(!I||I.injector.get(Ew,!1))if(n)n(a.concat(_).concat({provide:f,useValue:!0}));else{const A=a.concat(_).concat({provide:f,useValue:!0},{provide:sf,useValue:"platform"});!function VI(n){if(Dd&&!Dd.destroyed&&!Dd.injector.get(Ew,!1))throw new ot(400,"");Dd=n.get(bw);const r=n.get(fw,null);r&&r.forEach(a=>a())}(Go.create({providers:A,name:c}))}return function UI(n){const r=Cw();if(!r)throw new ot(401,"");return r}()}}function Cw(){return Dd&&!Dd.destroyed?Dd:null}let bw=(()=>{class n{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const A=function BI(n,r){let a;return a="noop"===n?new NI:("zone.js"===n?void 0:n)||new bd({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),a}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),P=[{provide:bd,useValue:A}];return A.run(()=>{const z=Go.create({providers:P,parent:this.injector,name:a.moduleType.name}),Y=a.create(z),ue=Y.injector.get(oi,null);if(!ue)throw new ot(402,"");return A.runOutsideAngular(()=>{const ve=A.onError.subscribe({next:Ue=>{ue.handleError(Ue)}});Y.onDestroy(()=>{qv(this._modules,Y),ve.unsubscribe()})}),function jI(n,r,a){try{const c=a();return Pp(c)?c.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):c}catch(c){throw r.runOutsideAngular(()=>n.handleError(c)),c}}(ue,A,()=>{const ve=Y.injector.get(Bv);return ve.runInitializers(),ve.donePromise.then(()=>(function Ef(n){Bt(n,"Expected localeId to be defined"),"string"==typeof n&&(wf=n.toLowerCase().replace(/_/g,"-"))}(Y.injector.get($v,jg)||jg),this._moduleDoBootstrap(Y),Y))})})}bootstrapModule(a,c=[]){const f=Dw({},c);return function kI(n,r,a){const c=new Tv(a);return Promise.resolve(c)}(0,0,a).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(a){const c=a.injector.get(Kv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(f=>c.bootstrap(f));else{if(!a.instance.ngDoBootstrap)throw new ot(403,"");a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ot(404,"");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(a){return new(a||n)(Et(Go))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})();function Dw(n,r){return Array.isArray(r)?r.reduce(Dw,n):Object.assign(Object.assign({},n),r)}let Kv=(()=>{class n{constructor(a,c,f,_,I){this._zone=a,this._injector=c,this._exceptionHandler=f,this._componentFactoryResolver=_,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const A=new te.y(z=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{z.next(this._stable),z.complete()})}),P=new te.y(z=>{let Y;this._zone.runOutsideAngular(()=>{Y=this._zone.onStable.subscribe(()=>{bd.assertNotInAngularZone(),Hv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,z.next(!0))})})});const ue=this._zone.onUnstable.subscribe(()=>{bd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{z.next(!1)}))});return()=>{Y.unsubscribe(),ue.unsubscribe()}});this.isStable=(0,xe.T)(A,P.pipe((0,Ee.B)()))}bootstrap(a,c){if(!this._initStatus.done)throw new ot(405,"");let f;f=a instanceof E0?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(f.componentType);const _=function FI(n){return n.isBoundToModule}(f)?void 0:this._injector.get(Ym),A=f.create(Go.NULL,[],c||f.selector,_),P=A.location.nativeElement,z=A.injector.get(vw,null),Y=z&&A.injector.get(ww);return z&&Y&&Y.registerApplication(P,z),A.onDestroy(()=>{this.detachView(A.hostView),qv(this.components,A),Y&&Y.unregisterApplication(P)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new ot(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;qv(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(gw,[]).concat(this._bootstrapListeners).forEach(f=>f(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(a){return new(a||n)(Et(bd),Et(Go),Et(oi),Et(Fy),Et(Bv))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qv(n,r){const a=n.indexOf(r);a>-1&&n.splice(a,1)}let Sw=!0,Aw=!1;function HI(){return Aw=!0,Sw}function GI(){if(Aw)throw new Error("Cannot enable prod mode after platform setup.");Sw=!1}let WI=(()=>{class n{}return n.__NG_ELEMENT_ID__=zI,n})();function zI(n){return function KI(n,r,a){if(ka(n)&&!a){const c=En(n.index,r);return new q_(c,c)}return 47&n.type?new q_(r[16],r):null}(on(),H(),16==(16&n))}class Nw{constructor(){}supports(r){return fd(r)}create(r){return new XI(r)}}const JI=(n,r)=>r;class XI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||JI}forEachItem(r){let a;for(a=this._itHead;null!==a;a=a._next)r(a)}forEachOperation(r){let a=this._itHead,c=this._removalsHead,f=0,_=null;for(;a||c;){const I=!c||a&&a.currentIndex<Ow(c,f,_)?a:c,A=Ow(I,f,_),P=I.currentIndex;if(I===c)f--,c=c._nextRemoved;else if(a=a._next,null==I.previousIndex)f++;else{_||(_=[]);const z=A-f,Y=P-f;if(z!=Y){for(let ve=0;ve<z;ve++){const Ue=ve<_.length?_[ve]:_[ve]=0,ct=Ue+ve;Y<=ct&&ct<z&&(_[ve]=Ue+1)}_[I.previousIndex]=Y-z}}A!==P&&r(I,A,P)}}forEachPreviousItem(r){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachMovedItem(r){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}forEachIdentityChange(r){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)r(a)}diff(r){if(null==r&&(r=[]),!fd(r))throw new ot(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,_,I,a=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let A=0;A<this.length;A++)_=r[A],I=this._trackByFn(A,_),null!==a&&Object.is(a.trackById,I)?(c&&(a=this._verifyReinsertion(a,_,I,A)),Object.is(a.item,_)||this._addIdentityChange(a,_)):(a=this._mismatch(a,_,I,A),c=!0),a=a._next}else f=0,function h_(n,r){if(Array.isArray(n))for(let a=0;a<n.length;a++)r(n[a]);else{const a=n[Tc()]();let c;for(;!(c=a.next()).done;)r(c.value)}}(r,A=>{I=this._trackByFn(f,A),null!==a&&Object.is(a.trackById,I)?(c&&(a=this._verifyReinsertion(a,A,I,f)),Object.is(a.item,A)||this._addIdentityChange(a,A)):(a=this._mismatch(a,A,I,f),c=!0),a=a._next,f++}),this.length=f;return this._truncate(a),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,a,c,f){let _;return null===r?_=this._itTail:(_=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._reinsertAfter(r,_,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,f))?(Object.is(r.item,a)||this._addIdentityChange(r,a),this._moveAfter(r,_,f)):r=this._addAfter(new eC(a,c),_,f),r}_verifyReinsertion(r,a,c,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==_?r=this._reinsertAfter(_,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const a=r._next;this._addToRemovals(this._unlink(r)),r=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,_=r._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(r,a,c),this._addToMoves(r,c),r}_moveAfter(r,a,c){return this._unlink(r),this._insertAfter(r,a,c),this._addToMoves(r,c),r}_addAfter(r,a,c){return this._insertAfter(r,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,a,c){const f=null===a?this._itHead:a._next;return r._next=f,r._prev=a,null===f?this._itTail=r:f._prev=r,null===a?this._itHead=r:a._next=r,null===this._linkedRecords&&(this._linkedRecords=new Pw),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const a=r._prev,c=r._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,r}_addToMoves(r,a){return r.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Pw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,a){return r.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class eC{constructor(r,a){this.item=r,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const a=r._prevDup,c=r._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Pw{constructor(){this.map=new Map}put(r){const a=r.trackById;let c=this.map.get(a);c||(c=new tC,this.map.set(a,c)),c.add(r)}get(r,a){const f=this.map.get(r);return f?f.get(r,a):null}remove(r){const a=r.trackById;return this.map.get(a).remove(r)&&this.map.delete(a),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ow(n,r,a){const c=n.previousIndex;if(null===c)return c;let f=0;return a&&c<a.length&&(f=a[c]),c+r+f}class kw{constructor(){}supports(r){return r instanceof Map||df(r)}create(){return new nC}}class nC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let a;for(a=this._mapHead;null!==a;a=a._next)r(a)}forEachPreviousItem(r){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)r(a)}forEachChangedItem(r){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)r(a)}forEachAddedItem(r){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)r(a)}forEachRemovedItem(r){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)r(a)}diff(r){if(r){if(!(r instanceof Map||df(r)))throw new ot(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,f)=>{if(a&&a.key===f)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const _=this._getOrCreateRecordForKey(f,c);a=this._insertBeforeOrAppend(a,_)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,a){if(r){const c=r._prev;return a._next=r,a._prev=c,r._prev=a,c&&(c._next=a),r===this._mapHead&&(this._mapHead=a),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(r,a){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,a);const _=f._prev,I=f._next;return _&&(_._next=I),I&&(I._prev=_),f._next=null,f._prev=null,f}const c=new rC(r);return this._records.set(r,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,a){Object.is(a,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=a,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,a){r instanceof Map?r.forEach(a):Object.keys(r).forEach(c=>a(r[c],c))}}class rC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Fw(){return new Xv([new Nw])}let Xv=(()=>{class n{constructor(a){this.factories=a}static create(a,c){if(null!=c){const f=c.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:c=>n.create(a,c||Fw()),deps:[[n,new oo,new ds]]}}find(a){const c=this.factories.find(f=>f.supports(a));if(null!=c)return c;throw new ot(901,"")}}return n.\u0275prov=Yt({token:n,providedIn:"root",factory:Fw}),n})();function Lw(){return new e0([new kw])}let e0=(()=>{class n{constructor(a){this.factories=a}static create(a,c){if(c){const f=c.factories.slice();a=a.concat(f)}return new n(a)}static extend(a){return{provide:n,useFactory:c=>n.create(a,c||Lw()),deps:[[n,new oo,new ds]]}}find(a){const c=this.factories.find(_=>_.supports(a));if(c)return c;throw new ot(901,"")}}return n.\u0275prov=Yt({token:n,providedIn:"root",factory:Lw}),n})();const oC=Iw(null,"core",[{provide:pw,useValue:"unknown"},{provide:bw,deps:[Go]},{provide:ww,deps:[]},{provide:mw,deps:[]}]);let aC=(()=>{class n{constructor(a){}}return n.\u0275fac=function(a){return new(a||n)(Et(Kv))},n.\u0275mod=lr({type:n}),n.\u0275inj=nn({}),n})()},2382:(St,je,$)=>{$.d(je,{Fj:()=>rt,qu:()=>co,u:()=>Ys,sg:()=>rs,JJ:()=>kr,JL:()=>vi,UX:()=>Bi,kI:()=>et,_Y:()=>Ae});var w=$(5e3),ne=$(9808),te=$(8306),xe=$(4742),Ee=$(8421),ye=$(7669),Le=$(5403),we=$(3268),Ne=$(1810),de=$(8996),Pe=$(4004);let wt=(()=>{class B{constructor(O,H){this._renderer=O,this._elementRef=H,this.onChange=Ve=>{},this.onTouched=()=>{}}setProperty(O,H){this._renderer.setProperty(this._elementRef.nativeElement,O,H)}registerOnTouched(O){this.onTouched=O}registerOnChange(O){this.onChange=O}setDisabledState(O){this.setProperty("disabled",O)}}return B.\u0275fac=function(O){return new(O||B)(w.Y36(w.Qsj),w.Y36(w.SBq))},B.\u0275dir=w.lG2({type:B}),B})(),st=(()=>{class B extends wt{}return B.\u0275fac=function(){let F;return function(H){return(F||(F=w.n5z(B)))(H||B)}}(),B.\u0275dir=w.lG2({type:B,features:[w.qOj]}),B})();const ot=new w.OlP("NgValueAccessor"),at={provide:ot,useExisting:(0,w.Gpc)(()=>rt),multi:!0},Tt=new w.OlP("CompositionEventMode");let rt=(()=>{class B extends wt{constructor(O,H,Ve){super(O,H),this._compositionMode=Ve,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ie(){const B=(0,ne.q)()?(0,ne.q)().getUserAgent():"";return/android (\d+)/.test(B.toLowerCase())}())}writeValue(O){this.setProperty("value",null==O?"":O)}_handleInput(O){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(O)}_compositionStart(){this._composing=!0}_compositionEnd(O){this._composing=!1,this._compositionMode&&this.onChange(O)}}return B.\u0275fac=function(O){return new(O||B)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Tt,8))},B.\u0275dir=w.lG2({type:B,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(O,H){1&O&&w.NdJ("input",function(kt){return H._handleInput(kt.target.value)})("blur",function(){return H.onTouched()})("compositionstart",function(){return H._compositionStart()})("compositionend",function(kt){return H._compositionEnd(kt.target.value)})},features:[w._Bn([at]),w.qOj]}),B})();function Qe(B){return null==B||0===B.length}function He(B){return null!=B&&"number"==typeof B.length}const qe=new w.OlP("NgValidators"),ft=new w.OlP("NgAsyncValidators"),oe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class et{static min(F){return function he(B){return F=>{if(Qe(F.value)||Qe(B))return null;const O=parseFloat(F.value);return!isNaN(O)&&O<B?{min:{min:B,actual:F.value}}:null}}(F)}static max(F){return function De(B){return F=>{if(Qe(F.value)||Qe(B))return null;const O=parseFloat(F.value);return!isNaN(O)&&O>B?{max:{max:B,actual:F.value}}:null}}(F)}static required(F){return function Me(B){return Qe(B.value)?{required:!0}:null}(F)}static requiredTrue(F){return function ze(B){return!0===B.value?null:{required:!0}}(F)}static email(F){return function Ge(B){return Qe(B.value)||oe.test(B.value)?null:{email:!0}}(F)}static minLength(F){return function pt(B){return F=>Qe(F.value)||!He(F.value)?null:F.value.length<B?{minlength:{requiredLength:B,actualLength:F.value.length}}:null}(F)}static maxLength(F){return function bt(B){return F=>He(F.value)&&F.value.length>B?{maxlength:{requiredLength:B,actualLength:F.value.length}}:null}(F)}static pattern(F){return function $t(B){if(!B)return Bt;let F,O;return"string"==typeof B?(O="","^"!==B.charAt(0)&&(O+="^"),O+=B,"$"!==B.charAt(B.length-1)&&(O+="$"),F=new RegExp(O)):(O=B.toString(),F=B),H=>{if(Qe(H.value))return null;const Ve=H.value;return F.test(Ve)?null:{pattern:{requiredPattern:O,actualValue:Ve}}}}(F)}static nullValidator(F){return null}static compose(F){return nn(F)}static composeAsync(F){return pr(F)}}function Bt(B){return null}function tt(B){return null!=B}function en(B){const F=(0,w.QGY)(B)?(0,de.D)(B):B;return(0,w.CqO)(F),F}function Zt(B){let F={};return B.forEach(O=>{F=null!=O?Object.assign(Object.assign({},F),O):F}),0===Object.keys(F).length?null:F}function Qt(B,F){return F.map(O=>O(B))}function bn(B){return B.map(F=>function Yt(B){return!B.validate}(F)?F:O=>F.validate(O))}function nn(B){if(!B)return null;const F=B.filter(tt);return 0==F.length?null:function(O){return Zt(Qt(O,F))}}function cn(B){return null!=B?nn(bn(B)):null}function pr(B){if(!B)return null;const F=B.filter(tt);return 0==F.length?null:function(O){return function fe(...B){const F=(0,ye.jO)(B),{args:O,keys:H}=(0,xe.D)(B),Ve=new te.y(kt=>{const{length:on}=O;if(!on)return void kt.complete();const Yr=new Array(on);let fi=on,Qi=on;for(let fo=0;fo<on;fo++){let po=!1;(0,Ee.Xf)(O[fo]).subscribe((0,Le.x)(kt,Gl=>{po||(po=!0,Qi--),Yr[fo]=Gl},()=>fi--,void 0,()=>{(!fi||!po)&&(Qi||kt.next(H?(0,Ne.n)(H,Yr):Yr),kt.complete())}))}});return F?Ve.pipe((0,we.Z)(F)):Ve}(Qt(O,F).map(en)).pipe((0,Pe.U)(Zt))}}function or(B){return null!=B?pr(bn(B)):null}function wr(B,F){return null===B?[F]:Array.isArray(B)?[...B,F]:[B,F]}function gr(B){return B._rawValidators}function Lr(B){return B._rawAsyncValidators}function zn(B){return B?Array.isArray(B)?B:[B]:[]}function Er(B,F){return Array.isArray(B)?B.includes(F):B===F}function Zn(B,F){const O=zn(F);return zn(B).forEach(Ve=>{Er(O,Ve)||O.push(Ve)}),O}function Ht(B,F){return zn(F).filter(O=>!Er(B,O))}class Ln{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=cn(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=or(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F){this.control&&this.control.reset(F)}hasError(F,O){return!!this.control&&this.control.hasError(F,O)}getError(F,O){return this.control?this.control.getError(F,O):null}}class wn extends Ln{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pn extends Ln{get formDirective(){return null}get path(){return null}}class as{constructor(F){this._cd=F}is(F){var O,H,Ve;return"submitted"===F?!!(null===(O=this._cd)||void 0===O?void 0:O.submitted):!!(null===(Ve=null===(H=this._cd)||void 0===H?void 0:H.control)||void 0===Ve?void 0:Ve[F])}}let kr=(()=>{class B extends as{constructor(O){super(O)}}return B.\u0275fac=function(O){return new(O||B)(w.Y36(wn,2))},B.\u0275dir=w.lG2({type:B,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(O,H){2&O&&w.ekj("ng-untouched",H.is("untouched"))("ng-touched",H.is("touched"))("ng-pristine",H.is("pristine"))("ng-dirty",H.is("dirty"))("ng-valid",H.is("valid"))("ng-invalid",H.is("invalid"))("ng-pending",H.is("pending"))},features:[w.qOj]}),B})(),vi=(()=>{class B extends as{constructor(O){super(O)}}return B.\u0275fac=function(O){return new(O||B)(w.Y36(pn,10))},B.\u0275dir=w.lG2({type:B,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(O,H){2&O&&w.ekj("ng-untouched",H.is("untouched"))("ng-touched",H.is("touched"))("ng-pristine",H.is("pristine"))("ng-dirty",H.is("dirty"))("ng-valid",H.is("valid"))("ng-invalid",H.is("invalid"))("ng-pending",H.is("pending"))("ng-submitted",H.is("submitted"))},features:[w.qOj]}),B})();function vt(B,F){Qn(B,F),F.valueAccessor.writeValue(B.value),function lr(B,F){F.valueAccessor.registerOnChange(O=>{B._pendingValue=O,B._pendingChange=!0,B._pendingDirty=!0,"change"===B.updateOn&&ui(B,F)})}(B,F),function ts(B,F){const O=(H,Ve)=>{F.valueAccessor.writeValue(H),Ve&&F.viewToModelUpdate(H)};B.registerOnChange(O),F._registerOnDestroy(()=>{B._unregisterOnChange(O)})}(B,F),function Cs(B,F){F.valueAccessor.registerOnTouched(()=>{B._pendingTouched=!0,"blur"===B.updateOn&&B._pendingChange&&ui(B,F),"submit"!==B.updateOn&&B.markAsTouched()})}(B,F),function Yn(B,F){if(F.valueAccessor.setDisabledState){const O=H=>{F.valueAccessor.setDisabledState(H)};B.registerOnDisabledChange(O),F._registerOnDestroy(()=>{B._unregisterOnDisabledChange(O)})}}(B,F)}function Pt(B,F,O=!0){const H=()=>{};F.valueAccessor&&(F.valueAccessor.registerOnChange(H),F.valueAccessor.registerOnTouched(H)),yn(B,F),B&&(F._invokeOnDestroyCallbacks(),B._registerOnCollectionChange(()=>{}))}function tn(B,F){B.forEach(O=>{O.registerOnValidatorChange&&O.registerOnValidatorChange(F)})}function Qn(B,F){const O=gr(B);null!==F.validator?B.setValidators(wr(O,F.validator)):"function"==typeof O&&B.setValidators([O]);const H=Lr(B);null!==F.asyncValidator?B.setAsyncValidators(wr(H,F.asyncValidator)):"function"==typeof H&&B.setAsyncValidators([H]);const Ve=()=>B.updateValueAndValidity();tn(F._rawValidators,Ve),tn(F._rawAsyncValidators,Ve)}function yn(B,F){let O=!1;if(null!==B){if(null!==F.validator){const Ve=gr(B);if(Array.isArray(Ve)&&Ve.length>0){const kt=Ve.filter(on=>on!==F.validator);kt.length!==Ve.length&&(O=!0,B.setValidators(kt))}}if(null!==F.asyncValidator){const Ve=Lr(B);if(Array.isArray(Ve)&&Ve.length>0){const kt=Ve.filter(on=>on!==F.asyncValidator);kt.length!==Ve.length&&(O=!0,B.setAsyncValidators(kt))}}}const H=()=>{};return tn(F._rawValidators,H),tn(F._rawAsyncValidators,H),O}function ui(B,F){B._pendingDirty&&B.markAsDirty(),B.setValue(B._pendingValue,{emitModelToViewChange:!1}),F.viewToModelUpdate(B._pendingValue),B._pendingChange=!1}function cr(B,F){const O=B.indexOf(F);O>-1&&B.splice(O,1)}const gt="VALID",At="INVALID",Sn="PENDING",br="DISABLED";function re(B){return(yr(B)?B.validators:B)||null}function li(B){return Array.isArray(B)?cn(B):B||null}function Kn(B,F){return(yr(F)?F.asyncValidators:B)||null}function Oi(B){return Array.isArray(B)?or(B):B||null}function yr(B){return null!=B&&!Array.isArray(B)&&"object"==typeof B}const dn=B=>B instanceof ei,qn=B=>B instanceof Ur,ns=B=>B instanceof kn;function Ds(B){return dn(B)?B.value:B.getRawValue()}function ki(B,F){const O=qn(B),H=B.controls;if(!(O?Object.keys(H):H).length)throw new w.vHH(1e3,"");if(!H[F])throw new w.vHH(1001,"")}function Sr(B,F){qn(B),B._forEachChild((H,Ve)=>{if(void 0===F[Ve])throw new w.vHH(1002,"")})}class Mr{constructor(F,O){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=F,this._rawAsyncValidators=O,this._composedValidatorFn=li(this._rawValidators),this._composedAsyncValidatorFn=Oi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(F){this._rawValidators=this._composedValidatorFn=F}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(F){this._rawAsyncValidators=this._composedAsyncValidatorFn=F}get parent(){return this._parent}get valid(){return this.status===gt}get invalid(){return this.status===At}get pending(){return this.status==Sn}get disabled(){return this.status===br}get enabled(){return this.status!==br}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(F){this._rawValidators=F,this._composedValidatorFn=li(F)}setAsyncValidators(F){this._rawAsyncValidators=F,this._composedAsyncValidatorFn=Oi(F)}addValidators(F){this.setValidators(Zn(F,this._rawValidators))}addAsyncValidators(F){this.setAsyncValidators(Zn(F,this._rawAsyncValidators))}removeValidators(F){this.setValidators(Ht(F,this._rawValidators))}removeAsyncValidators(F){this.setAsyncValidators(Ht(F,this._rawAsyncValidators))}hasValidator(F){return Er(this._rawValidators,F)}hasAsyncValidator(F){return Er(this._rawAsyncValidators,F)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(F={}){this.touched=!0,this._parent&&!F.onlySelf&&this._parent.markAsTouched(F)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(F=>F.markAllAsTouched())}markAsUntouched(F={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(O=>{O.markAsUntouched({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}markAsDirty(F={}){this.pristine=!1,this._parent&&!F.onlySelf&&this._parent.markAsDirty(F)}markAsPristine(F={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(O=>{O.markAsPristine({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}markAsPending(F={}){this.status=Sn,!1!==F.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!F.onlySelf&&this._parent.markAsPending(F)}disable(F={}){const O=this._parentMarkedDirty(F.onlySelf);this.status=br,this.errors=null,this._forEachChild(H=>{H.disable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this._updateValue(),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:O})),this._onDisabledChange.forEach(H=>H(!0))}enable(F={}){const O=this._parentMarkedDirty(F.onlySelf);this.status=gt,this._forEachChild(H=>{H.enable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:O})),this._onDisabledChange.forEach(H=>H(!1))}_updateAncestors(F){this._parent&&!F.onlySelf&&(this._parent.updateValueAndValidity(F),F.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(F){this._parent=F}updateValueAndValidity(F={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gt||this.status===Sn)&&this._runAsyncValidator(F.emitEvent)),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!F.onlySelf&&this._parent.updateValueAndValidity(F)}_updateTreeValidity(F={emitEvent:!0}){this._forEachChild(O=>O._updateTreeValidity(F)),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?br:gt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(F){if(this.asyncValidator){this.status=Sn,this._hasOwnPendingAsyncValidator=!0;const O=en(this.asyncValidator(this));this._asyncValidationSubscription=O.subscribe(H=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(H,{emitEvent:F})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(F,O={}){this.errors=F,this._updateControlsErrors(!1!==O.emitEvent)}get(F){return function Kr(B,F,O){if(null==F||(Array.isArray(F)||(F=F.split(O)),Array.isArray(F)&&0===F.length))return null;let H=B;return F.forEach(Ve=>{H=qn(H)?H.controls.hasOwnProperty(Ve)?H.controls[Ve]:null:ns(H)&&H.at(Ve)||null}),H}(this,F,".")}getError(F,O){const H=O?this.get(O):this;return H&&H.errors?H.errors[F]:null}hasError(F,O){return!!this.getError(F,O)}get root(){let F=this;for(;F._parent;)F=F._parent;return F}_updateControlsErrors(F){this.status=this._calculateStatus(),F&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(F)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?br:this.errors?At:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sn)?Sn:this._anyControlsHaveStatus(At)?At:gt}_anyControlsHaveStatus(F){return this._anyControls(O=>O.status===F)}_anyControlsDirty(){return this._anyControls(F=>F.dirty)}_anyControlsTouched(){return this._anyControls(F=>F.touched)}_updatePristine(F={}){this.pristine=!this._anyControlsDirty(),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}_updateTouched(F={}){this.touched=this._anyControlsTouched(),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}_isBoxedValue(F){return"object"==typeof F&&null!==F&&2===Object.keys(F).length&&"value"in F&&"disabled"in F}_registerOnCollectionChange(F){this._onCollectionChange=F}_setUpdateStrategy(F){yr(F)&&null!=F.updateOn&&(this._updateOn=F.updateOn)}_parentMarkedDirty(F){return!F&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ei extends Mr{constructor(F=null,O,H){super(re(O),Kn(H,O)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(F),this._setUpdateStrategy(O),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yr(O)&&O.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(F)?F.value:F)}setValue(F,O={}){this.value=this._pendingValue=F,this._onChange.length&&!1!==O.emitModelToViewChange&&this._onChange.forEach(H=>H(this.value,!1!==O.emitViewToModelChange)),this.updateValueAndValidity(O)}patchValue(F,O={}){this.setValue(F,O)}reset(F=this.defaultValue,O={}){this._applyFormState(F),this.markAsPristine(O),this.markAsUntouched(O),this.setValue(this.value,O),this._pendingChange=!1}_updateValue(){}_anyControls(F){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(F){this._onChange.push(F)}_unregisterOnChange(F){cr(this._onChange,F)}registerOnDisabledChange(F){this._onDisabledChange.push(F)}_unregisterOnDisabledChange(F){cr(this._onDisabledChange,F)}_forEachChild(F){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(F){this._isBoxedValue(F)?(this.value=this._pendingValue=F.value,F.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=F}}class Ur extends Mr{constructor(F,O,H){super(re(O),Kn(H,O)),this.controls=F,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(F,O){return this.controls[F]?this.controls[F]:(this.controls[F]=O,O.setParent(this),O._registerOnCollectionChange(this._onCollectionChange),O)}addControl(F,O,H={}){this.registerControl(F,O),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}removeControl(F,O={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}setControl(F,O,H={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],O&&this.registerControl(F,O),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}contains(F){return this.controls.hasOwnProperty(F)&&this.controls[F].enabled}setValue(F,O={}){Sr(this,F),Object.keys(F).forEach(H=>{ki(this,H),this.controls[H].setValue(F[H],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(F,O={}){null!=F&&(Object.keys(F).forEach(H=>{this.controls[H]&&this.controls[H].patchValue(F[H],{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(F={},O={}){this._forEachChild((H,Ve)=>{H.reset(F[Ve],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this._reduceChildren({},(F,O,H)=>(F[H]=Ds(O),F))}_syncPendingControls(){let F=this._reduceChildren(!1,(O,H)=>!!H._syncPendingControls()||O);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){Object.keys(this.controls).forEach(O=>{const H=this.controls[O];H&&F(H,O)})}_setUpControls(){this._forEachChild(F=>{F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(F){for(const O of Object.keys(this.controls)){const H=this.controls[O];if(this.contains(O)&&F(H))return!0}return!1}_reduceValue(){return this._reduceChildren({},(F,O,H)=>((O.enabled||this.disabled)&&(F[H]=O.value),F))}_reduceChildren(F,O){let H=F;return this._forEachChild((Ve,kt)=>{H=O(H,Ve,kt)}),H}_allControlsDisabled(){for(const F of Object.keys(this.controls))if(this.controls[F].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class kn extends Mr{constructor(F,O,H){super(re(O),Kn(H,O)),this.controls=F,this._initObservables(),this._setUpdateStrategy(O),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(F){return this.controls[F]}push(F,O={}){this.controls.push(F),this._registerControl(F),this.updateValueAndValidity({emitEvent:O.emitEvent}),this._onCollectionChange()}insert(F,O,H={}){this.controls.splice(F,0,O),this._registerControl(O),this.updateValueAndValidity({emitEvent:H.emitEvent})}removeAt(F,O={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),this.updateValueAndValidity({emitEvent:O.emitEvent})}setControl(F,O,H={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),O&&(this.controls.splice(F,0,O),this._registerControl(O)),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(F,O={}){Sr(this,F),F.forEach((H,Ve)=>{ki(this,Ve),this.at(Ve).setValue(H,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O)}patchValue(F,O={}){null!=F&&(F.forEach((H,Ve)=>{this.at(Ve)&&this.at(Ve).patchValue(H,{onlySelf:!0,emitEvent:O.emitEvent})}),this.updateValueAndValidity(O))}reset(F=[],O={}){this._forEachChild((H,Ve)=>{H.reset(F[Ve],{onlySelf:!0,emitEvent:O.emitEvent})}),this._updatePristine(O),this._updateTouched(O),this.updateValueAndValidity(O)}getRawValue(){return this.controls.map(F=>Ds(F))}clear(F={}){this.controls.length<1||(this._forEachChild(O=>O._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:F.emitEvent}))}_syncPendingControls(){let F=this.controls.reduce((O,H)=>!!H._syncPendingControls()||O,!1);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){this.controls.forEach((O,H)=>{F(O,H)})}_updateValue(){this.value=this.controls.filter(F=>F.enabled||this.disabled).map(F=>F.value)}_anyControls(F){return this.controls.some(O=>O.enabled&&F(O))}_setUpControls(){this._forEachChild(F=>this._registerControl(F))}_allControlsDisabled(){for(const F of this.controls)if(F.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(F){F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)}}let Ae=(()=>{class B{}return B.\u0275fac=function(O){return new(O||B)},B.\u0275dir=w.lG2({type:B,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),B})(),Nt=(()=>{class B{}return B.\u0275fac=function(O){return new(O||B)},B.\u0275mod=w.oAB({type:B}),B.\u0275inj=w.cJS({}),B})();const ni=new w.OlP("NgModelWithFormControlWarning"),ls={provide:pn,useExisting:(0,w.Gpc)(()=>rs)};let rs=(()=>{class B extends pn{constructor(O,H){super(),this.validators=O,this.asyncValidators=H,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(O),this._setAsyncValidators(H)}ngOnChanges(O){this._checkFormPresent(),O.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(yn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(O){const H=this.form.get(O.path);return vt(H,O),H.updateValueAndValidity({emitEvent:!1}),this.directives.push(O),H}getControl(O){return this.form.get(O.path)}removeControl(O){Pt(O.control||null,O,!1),cr(this.directives,O)}addFormGroup(O){this._setUpFormContainer(O)}removeFormGroup(O){this._cleanUpFormContainer(O)}getFormGroup(O){return this.form.get(O.path)}addFormArray(O){this._setUpFormContainer(O)}removeFormArray(O){this._cleanUpFormContainer(O)}getFormArray(O){return this.form.get(O.path)}updateModel(O,H){this.form.get(O.path).setValue(H)}onSubmit(O){return this.submitted=!0,function us(B,F){B._syncPendingControls(),F.forEach(O=>{const H=O.control;"submit"===H.updateOn&&H._pendingChange&&(O.viewToModelUpdate(H._pendingValue),H._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(O),!1}onReset(){this.resetForm()}resetForm(O){this.form.reset(O),this.submitted=!1}_updateDomValue(){this.directives.forEach(O=>{const H=O.control,Ve=this.form.get(O.path);H!==Ve&&(Pt(H||null,O),dn(Ve)&&(vt(Ve,O),O.control=Ve))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(O){const H=this.form.get(O.path);(function vn(B,F){Qn(B,F)})(H,O),H.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(O){if(this.form){const H=this.form.get(O.path);H&&function Ir(B,F){return yn(B,F)}(H,O)&&H.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Qn(this.form,this),this._oldForm&&yn(this._oldForm,this)}_checkFormPresent(){}}return B.\u0275fac=function(O){return new(O||B)(w.Y36(qe,10),w.Y36(ft,10))},B.\u0275dir=w.lG2({type:B,selectors:[["","formGroup",""]],hostBindings:function(O,H){1&O&&w.NdJ("submit",function(kt){return H.onSubmit(kt)})("reset",function(){return H.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([ls]),w.qOj,w.TTD]}),B})();const gs={provide:wn,useExisting:(0,w.Gpc)(()=>Ys)};let Ys=(()=>{class B extends wn{constructor(O,H,Ve,kt,on){super(),this._ngModelWarningConfig=on,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=O,this._setValidators(H),this._setAsyncValidators(Ve),this.valueAccessor=function Vr(B,F){if(!F)return null;let O,H,Ve;return Array.isArray(F),F.forEach(kt=>{kt.constructor===rt?O=kt:function Pi(B){return Object.getPrototypeOf(B.constructor)===st}(kt)?H=kt:Ve=kt}),Ve||H||O||null}(0,kt)}set isDisabled(O){}ngOnChanges(O){this._added||this._setUpControl(),function bs(B,F){if(!B.hasOwnProperty("model"))return!1;const O=B.model;return!!O.isFirstChange()||!Object.is(F,O.currentValue)}(O,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(O){this.viewModel=O,this.update.emit(O)}get path(){return function Ke(B,F){return[...F.path,B]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return B._ngModelWarningSentOnce=!1,B.\u0275fac=function(O){return new(O||B)(w.Y36(pn,13),w.Y36(qe,10),w.Y36(ft,10),w.Y36(ot,10),w.Y36(ni,8))},B.\u0275dir=w.lG2({type:B,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([gs]),w.qOj,w.TTD]}),B})(),Ui=(()=>{class B{}return B.\u0275fac=function(O){return new(O||B)},B.\u0275mod=w.oAB({type:B}),B.\u0275inj=w.cJS({imports:[[Nt]]}),B})(),Bi=(()=>{class B{static withConfig(O){return{ngModule:B,providers:[{provide:ni,useValue:O.warnOnNgModelWithFormControl}]}}}return B.\u0275fac=function(O){return new(O||B)},B.\u0275mod=w.oAB({type:B}),B.\u0275inj=w.cJS({imports:[Ui]}),B})(),co=(()=>{class B{group(O,H=null){const Ve=this._reduceControls(O);let Yr,kt=null,on=null;return null!=H&&(function Xs(B){return void 0!==B.asyncValidators||void 0!==B.validators||void 0!==B.updateOn}(H)?(kt=null!=H.validators?H.validators:null,on=null!=H.asyncValidators?H.asyncValidators:null,Yr=null!=H.updateOn?H.updateOn:void 0):(kt=null!=H.validator?H.validator:null,on=null!=H.asyncValidator?H.asyncValidator:null)),new Ur(Ve,{asyncValidators:on,updateOn:Yr,validators:kt})}control(O,H,Ve){return new ei(O,H,Ve)}array(O,H,Ve){const kt=O.map(on=>this._createControl(on));return new kn(kt,H,Ve)}_reduceControls(O){const H={};return Object.keys(O).forEach(Ve=>{H[Ve]=this._createControl(O[Ve])}),H}_createControl(O){return dn(O)||qn(O)||ns(O)?O:Array.isArray(O)?this.control(O[0],O.length>1?O[1]:null,O.length>2?O[2]:null):this.control(O)}}return B.\u0275fac=function(O){return new(O||B)},B.\u0275prov=w.Yz7({token:B,factory:B.\u0275fac,providedIn:Bi}),B})()},5839:(St,je,$)=>{$.d(je,{F0:()=>ar,yS:()=>ja,Bz:()=>Hs,lC:()=>Li});var w=$(5e3),ne=$(7579);class te extends ne.x{constructor(D){super(),this._value=D}get value(){return this.getValue()}_subscribe(D){const b=super._subscribe(D);return!b.closed&&D.next(this._value),b}getValue(){const{hasError:D,thrownError:b,_value:M}=this;if(D)throw b;return this._throwIfClosed(),M}next(D){super.next(this._value=D)}}var xe=$(8306),Ee=$(4742),ye=$(8996),Le=$(4671),we=$(3268),Ne=$(7669),fe=$(1810),de=$(5403),Pe=$(9672);function ot(S,D,b){S?(0,Pe.f)(b,S,D):D()}var It=$(576);function Ye(S,D){const b=(0,It.m)(S)?S:()=>S,M=N=>N.error(b());return new xe.y(D?N=>D.schedule(M,0,N):M)}var at=$(8421);function Ie(S){return new xe.y(D=>{(0,at.Xf)(S()).subscribe(D)})}var Tt=$(727),rt=$(4482);function Qe(){return(0,rt.e)((S,D)=>{let b=null;S._refCount++;const M=(0,de.x)(D,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(b=null);const N=S._connection,W=b;b=null,N&&(!W||N===W)&&N.unsubscribe(),D.unsubscribe()});S.subscribe(M),M.closed||(b=S.connect())})}class He extends xe.y{constructor(D,b){super(),this.source=D,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,rt.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,null==D||D.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new Tt.w0;const b=this.getSubject();D.add(this.source.subscribe((0,de.x)(b,void 0,()=>{this._teardown(),b.complete()},M=>{this._teardown(),b.error(M)},()=>this._teardown()))),D.closed&&(this._connection=null,D=Tt.w0.EMPTY)}return D}refCount(){return Qe()(this)}}var qe=$(9646),ft=$(6805),oe=$(7272),et=$(515);function he(S){return(0,rt.e)((D,b)=>{let W,M=null,N=!1;M=D.subscribe((0,de.x)(b,void 0,void 0,ae=>{W=(0,at.Xf)(S(ae,he(S)(D))),M?(M.unsubscribe(),M=null,W.subscribe(b)):N=!0})),N&&(M.unsubscribe(),M=null,W.subscribe(b))})}var De=$(5577);function Me(S,D){return(0,It.m)(D)?(0,De.z)(S,D,1):(0,De.z)(S,1)}var ze=$(9300);function Ge(S){return S<=0?()=>et.E:(0,rt.e)((D,b)=>{let M=[];D.subscribe((0,de.x)(b,N=>{M.push(N),S<M.length&&M.shift()},()=>{for(const N of M)b.next(N);b.complete()},void 0,()=>{M=null}))})}var pt=$(8068),bt=$(6590),tt=$(4004),en=$(3900),Zt=$(5698),Qt=$(8675),Yt=$(5026),bn=$(590),nn=$(8505),cn=$(8189),pr=$(9808);class or{constructor(D,b){this.id=D,this.url=b}}class wr extends or{constructor(D,b,M="imperative",N=null){super(D,b),this.navigationTrigger=M,this.restoredState=N}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gr extends or{constructor(D,b,M){super(D,b),this.urlAfterRedirects=M}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lr extends or{constructor(D,b,M){super(D,b),this.reason=M}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zn extends or{constructor(D,b,M){super(D,b),this.error=M}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Er extends or{constructor(D,b,M,N){super(D,b),this.urlAfterRedirects=M,this.state=N}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zn extends or{constructor(D,b,M,N){super(D,b),this.urlAfterRedirects=M,this.state=N}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ht extends or{constructor(D,b,M,N,W){super(D,b),this.urlAfterRedirects=M,this.state=N,this.shouldActivate=W}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ln extends or{constructor(D,b,M,N){super(D,b),this.urlAfterRedirects=M,this.state=N}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wn extends or{constructor(D,b,M,N){super(D,b),this.urlAfterRedirects=M,this.state=N}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pn{constructor(D){this.route=D}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class as{constructor(D){this.route=D}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ki{constructor(D){this.snapshot=D}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xr{constructor(D){this.snapshot=D}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kr{constructor(D){this.snapshot=D}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vi{constructor(D){this.snapshot=D}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class _r{constructor(D,b,M){this.routerEvent=D,this.position=b,this.anchor=M}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Rt="primary";class jt{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const b=this.params[D];return Array.isArray(b)?b[0]:b}return null}getAll(D){if(this.has(D)){const b=this.params[D];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Wt(S){return new jt(S)}const Rr="ngNavigationCancelingError";function qi(S){const D=Error("NavigationCancelingError: "+S);return D[Rr]=!0,D}function Is(S,D,b){const M=b.path.split("/");if(M.length>S.length||"full"===b.pathMatch&&(D.hasChildren()||M.length<S.length))return null;const N={};for(let W=0;W<M.length;W++){const ae=M[W],_e=S[W];if(ae.startsWith(":"))N[ae.substring(1)]=_e;else if(ae!==_e.path)return null}return{consumed:S.slice(0,M.length),posParams:N}}function ur(S,D){const b=S?Object.keys(S):void 0,M=D?Object.keys(D):void 0;if(!b||!M||b.length!=M.length)return!1;let N;for(let W=0;W<b.length;W++)if(N=b[W],!Jt(S[N],D[N]))return!1;return!0}function Jt(S,D){if(Array.isArray(S)&&Array.isArray(D)){if(S.length!==D.length)return!1;const b=[...S].sort(),M=[...D].sort();return b.every((N,W)=>M[W]===N)}return S===D}function Te(S){return Array.prototype.concat.apply([],S)}function pe(S){return S.length>0?S[S.length-1]:null}function Se(S,D){for(const b in S)S.hasOwnProperty(b)&&D(S[b],b)}function le(S){return(0,w.CqO)(S)?S:(0,w.QGY)(S)?(0,ye.D)(Promise.resolve(S)):(0,qe.of)(S)}const vt={exact:function Qn(S,D,b){if(!Cr(S.segments,D.segments)||!ui(S.segments,D.segments,b)||S.numberOfChildren!==D.numberOfChildren)return!1;for(const M in D.children)if(!S.children[M]||!Qn(S.children[M],D.children[M],b))return!1;return!0},subset:lr},Pt={exact:function Yn(S,D){return ur(S,D)},subset:function yn(S,D){return Object.keys(D).length<=Object.keys(S).length&&Object.keys(D).every(b=>Jt(S[b],D[b]))},ignored:()=>!0};function tn(S,D,b){return vt[b.paths](S.root,D.root,b.matrixParams)&&Pt[b.queryParams](S.queryParams,D.queryParams)&&!("exact"===b.fragment&&S.fragment!==D.fragment)}function lr(S,D,b){return Cs(S,D,D.segments,b)}function Cs(S,D,b,M){if(S.segments.length>b.length){const N=S.segments.slice(0,b.length);return!(!Cr(N,b)||D.hasChildren()||!ui(N,b,M))}if(S.segments.length===b.length){if(!Cr(S.segments,b)||!ui(S.segments,b,M))return!1;for(const N in D.children)if(!S.children[N]||!lr(S.children[N],D.children[N],M))return!1;return!0}{const N=b.slice(0,S.segments.length),W=b.slice(S.segments.length);return!!(Cr(S.segments,N)&&ui(S.segments,N,M)&&S.children[Rt])&&Cs(S.children[Rt],D,W,M)}}function ui(S,D,b){return D.every((M,N)=>Pt[b](S[N].parameters,M.parameters))}class ts{constructor(D,b,M){this.root=D,this.queryParams=b,this.fragment=M}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return Pi.serialize(this)}}class vn{constructor(D,b){this.segments=D,this.children=b,this.parent=null,Se(b,(M,N)=>M.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return us(this)}}class Ir{constructor(D,b){this.path=D,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Wt(this.parameters)),this._parameterMap}toString(){return br(this)}}function Cr(S,D){return S.length===D.length&&S.every((b,M)=>b.path===D[M].path)}class Ei{}class bs{parse(D){const b=new ns(D);return new ts(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(D){const b=`/${Vr(D.root,!0)}`,M=function re(S){const D=Object.keys(S).map(b=>{const M=S[b];return Array.isArray(M)?M.map(N=>`${ps(b)}=${ps(N)}`).join("&"):`${ps(b)}=${ps(M)}`}).filter(b=>!!b);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${b}${M}${"string"==typeof D.fragment?`#${function Tn(S){return encodeURI(S)}(D.fragment)}`:""}`}}const Pi=new bs;function us(S){return S.segments.map(D=>br(D)).join("/")}function Vr(S,D){if(!S.hasChildren())return us(S);if(D){const b=S.children[Rt]?Vr(S.children[Rt],!1):"",M=[];return Se(S.children,(N,W)=>{W!==Rt&&M.push(`${W}:${Vr(N,!1)}`)}),M.length>0?`${b}(${M.join("//")})`:b}{const b=function rr(S,D){let b=[];return Se(S.children,(M,N)=>{N===Rt&&(b=b.concat(D(M,N)))}),Se(S.children,(M,N)=>{N!==Rt&&(b=b.concat(D(M,N)))}),b}(S,(M,N)=>N===Rt?[Vr(S.children[Rt],!1)]:[`${N}:${Vr(M,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Rt]?`${us(S)}/${b[0]}`:`${us(S)}/(${b.join("//")})`}}function cr(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ps(S){return cr(S).replace(/%3B/gi,";")}function gt(S){return cr(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function At(S){return decodeURIComponent(S)}function Sn(S){return At(S.replace(/\+/g,"%20"))}function br(S){return`${gt(S.path)}${function Kr(S){return Object.keys(S).map(D=>`;${gt(D)}=${gt(S[D])}`).join("")}(S.parameters)}`}const li=/^[^\/()?;=#]+/;function Kn(S){const D=S.match(li);return D?D[0]:""}const Oi=/^[^=?&#]+/,dn=/^[^&#]+/;class ns{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vn([],{}):new vn([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let M={};return this.peekStartsWith("(")&&(M=this.parseParens(!1)),(D.length>0||Object.keys(b).length>0)&&(M[Rt]=new vn(D,b)),M}parseSegment(){const D=Kn(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(D),new Ir(At(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const b=Kn(this.remaining);if(!b)return;this.capture(b);let M="";if(this.consumeOptional("=")){const N=Kn(this.remaining);N&&(M=N,this.capture(M))}D[At(b)]=At(M)}parseQueryParam(D){const b=function yr(S){const D=S.match(Oi);return D?D[0]:""}(this.remaining);if(!b)return;this.capture(b);let M="";if(this.consumeOptional("=")){const ae=function qn(S){const D=S.match(dn);return D?D[0]:""}(this.remaining);ae&&(M=ae,this.capture(M))}const N=Sn(b),W=Sn(M);if(D.hasOwnProperty(N)){let ae=D[N];Array.isArray(ae)||(ae=[ae],D[N]=ae),ae.push(W)}else D[N]=W}parseParens(D){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const M=Kn(this.remaining),N=this.remaining[M.length];if("/"!==N&&")"!==N&&";"!==N)throw new Error(`Cannot parse url '${this.url}'`);let W;M.indexOf(":")>-1?(W=M.substr(0,M.indexOf(":")),this.capture(W),this.capture(":")):D&&(W=Rt);const ae=this.parseChildren();b[W]=1===Object.keys(ae).length?ae[Rt]:new vn([],ae),this.consumeOptional("//")}return b}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new Error(`Expected "${D}".`)}}class Ds{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const b=this.pathFromRoot(D);return b.length>1?b[b.length-2]:null}children(D){const b=ki(D,this._root);return b?b.children.map(M=>M.value):[]}firstChild(D){const b=ki(D,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(D){const b=Sr(D,this._root);return b.length<2?[]:b[b.length-2].children.map(N=>N.value).filter(N=>N!==D)}pathFromRoot(D){return Sr(D,this._root).map(b=>b.value)}}function ki(S,D){if(S===D.value)return D;for(const b of D.children){const M=ki(S,b);if(M)return M}return null}function Sr(S,D){if(S===D.value)return[D];for(const b of D.children){const M=Sr(S,b);if(M.length)return M.unshift(D),M}return[]}class Mr{constructor(D,b){this.value=D,this.children=b}toString(){return`TreeNode(${this.value})`}}function ei(S){const D={};return S&&S.children.forEach(b=>D[b.value.outlet]=b),D}class Ur extends Ds{constructor(D,b){super(D),this.snapshot=b,Ci(this,D)}toString(){return this.snapshot.toString()}}function kn(S,D){const b=function bo(S,D){const ae=new Zs([],{},{},"",{},Rt,D,null,S.root,-1,{});return new ka("",new Mr(ae,[]))}(S,D),M=new te([new Ir("",{})]),N=new te({}),W=new te({}),ae=new te({}),_e=new te(""),it=new Ii(M,N,ae,_e,W,Rt,D,b.root);return it.snapshot=b.root,new Ur(new Mr(it,[]),b)}class Ii{constructor(D,b,M,N,W,ae,_e,it){this.url=D,this.params=b,this.queryParams=M,this.fragment=N,this.data=W,this.outlet=ae,this.component=_e,this._futureSnapshot=it}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,tt.U)(D=>Wt(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,tt.U)(D=>Wt(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ci(S,D="emptyOnly"){const b=S.pathFromRoot;let M=0;if("always"!==D)for(M=b.length-1;M>=1;){const N=b[M],W=b[M-1];if(N.routeConfig&&""===N.routeConfig.path)M--;else{if(W.component)break;M--}}return function Fi(S){return S.reduce((D,b)=>({params:Object.assign(Object.assign({},D.params),b.params),data:Object.assign(Object.assign({},D.data),b.data),resolve:Object.assign(Object.assign({},D.resolve),b._resolvedData)}),{params:{},data:{},resolve:{}})}(b.slice(M))}class Zs{constructor(D,b,M,N,W,ae,_e,it,Ft,Un,Gt){this.url=D,this.params=b,this.queryParams=M,this.fragment=N,this.data=W,this.outlet=ae,this.component=_e,this.routeConfig=it,this._urlSegment=Ft,this._lastPathIndex=Un,this._resolve=Gt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(M=>M.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ka extends Ds{constructor(D,b){super(b),this.url=D,Ci(this,b)}toString(){return bi(this._root)}}function Ci(S,D){D.value._routerState=S,D.children.forEach(b=>Ci(S,b))}function bi(S){const D=S.children.length>0?` { ${S.children.map(bi).join(", ")} } `:"";return`${S.value}${D}`}function Do(S){if(S.snapshot){const D=S.snapshot,b=S._futureSnapshot;S.snapshot=b,ur(D.queryParams,b.queryParams)||S.queryParams.next(b.queryParams),D.fragment!==b.fragment&&S.fragment.next(b.fragment),ur(D.params,b.params)||S.params.next(b.params),function wi(S,D){if(S.length!==D.length)return!1;for(let b=0;b<S.length;++b)if(!ur(S[b],D[b]))return!1;return!0}(D.url,b.url)||S.url.next(b.url),ur(D.data,b.data)||S.data.next(b.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function Ts(S,D){const b=ur(S.params,D.params)&&function Ni(S,D){return Cr(S,D)&&S.every((b,M)=>ur(b.parameters,D[M].parameters))}(S.url,D.url);return b&&!(!S.parent!=!D.parent)&&(!S.parent||Ts(S.parent,D.parent))}function dr(S,D,b){if(b&&S.shouldReuseRoute(D.value,b.value.snapshot)){const M=b.value;M._futureSnapshot=D.value;const N=function vr(S,D,b){return D.children.map(M=>{for(const N of b.children)if(S.shouldReuseRoute(M.value,N.value.snapshot))return dr(S,M,N);return dr(S,M)})}(S,D,b);return new Mr(M,N)}{if(S.shouldAttach(D.value)){const W=S.retrieve(D.value);if(null!==W){const ae=W.route;return ae.value._futureSnapshot=D.value,ae.children=D.children.map(_e=>dr(S,_e)),ae}}const M=function Ae(S){return new Ii(new te(S.url),new te(S.params),new te(S.queryParams),new te(S.fragment),new te(S.data),S.outlet,S.component,S)}(D.value),N=D.children.map(W=>dr(S,W));return new Mr(M,N)}}function Fe(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function ut(S){return"object"==typeof S&&null!=S&&S.outlets}function Ct(S,D,b,M,N){let W={};if(M&&Se(M,(_e,it)=>{W[it]=Array.isArray(_e)?_e.map(Ft=>`${Ft}`):`${_e}`}),S===D)return new ts(b,W,N);const ae=Nt(S,D,b);return new ts(ae,W,N)}function Nt(S,D,b){const M={};return Se(S.children,(N,W)=>{M[W]=N===D?b:Nt(N,D,b)}),new vn(S.segments,M)}class Mn{constructor(D,b,M){if(this.isAbsolute=D,this.numberOfDoubleDots=b,this.commands=M,D&&M.length>0&&Fe(M[0]))throw new Error("Root segment cannot have matrix parameters");const N=M.find(ut);if(N&&N!==pe(M))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nn{constructor(D,b,M){this.segmentGroup=D,this.processChildren=b,this.index=M}}function qr(S,D,b){if(S||(S=new vn([],{})),0===S.segments.length&&S.hasChildren())return ls(S,D,b);const M=function rs(S,D,b){let M=0,N=D;const W={match:!1,pathIndex:0,commandIndex:0};for(;N<S.segments.length;){if(M>=b.length)return W;const ae=S.segments[N],_e=b[M];if(ut(_e))break;const it=`${_e}`,Ft=M<b.length-1?b[M+1]:null;if(N>0&&void 0===it)break;if(it&&Ft&&"object"==typeof Ft&&void 0===Ft.outlets){if(!Zr(it,Ft,ae))return W;M+=2}else{if(!Zr(it,{},ae))return W;M++}N++}return{match:!0,pathIndex:N,commandIndex:M}}(S,D,b),N=b.slice(M.commandIndex);if(M.match&&M.pathIndex<S.segments.length){const W=new vn(S.segments.slice(0,M.pathIndex),{});return W.children[Rt]=new vn(S.segments.slice(M.pathIndex),S.children),ls(W,0,N)}return M.match&&0===N.length?new vn(S.segments,{}):M.match&&!S.hasChildren()?Bs(S,D,b):M.match?ls(S,0,N):Bs(S,D,b)}function ls(S,D,b){if(0===b.length)return new vn(S.segments,{});{const M=function To(S){return ut(S[0])?S[0].outlets:{[Rt]:S}}(b),N={};return Se(M,(W,ae)=>{"string"==typeof W&&(W=[W]),null!==W&&(N[ae]=qr(S.children[ae],D,W))}),Se(S.children,(W,ae)=>{void 0===M[ae]&&(N[ae]=W)}),new vn(S.segments,N)}}function Bs(S,D,b){const M=S.segments.slice(0,D);let N=0;for(;N<b.length;){const W=b[N];if(ut(W)){const it=ca(W.outlets);return new vn(M,it)}if(0===N&&Fe(b[0])){M.push(new Ir(S.segments[D].path,Fa(b[0]))),N++;continue}const ae=ut(W)?W.outlets[Rt]:`${W}`,_e=N<b.length-1?b[N+1]:null;ae&&_e&&Fe(_e)?(M.push(new Ir(ae,Fa(_e))),N+=2):(M.push(new Ir(ae,{})),N++)}return new vn(M,{})}function ca(S){const D={};return Se(S,(b,M)=>{"string"==typeof b&&(b=[b]),null!==b&&(D[M]=Bs(new vn([],{}),0,b))}),D}function Fa(S){const D={};return Se(S,(b,M)=>D[M]=`${b}`),D}function Zr(S,D,b){return S==b.path&&ur(D,b.parameters)}class gs{constructor(D,b,M,N){this.routeReuseStrategy=D,this.futureState=b,this.currState=M,this.forwardEvent=N}activate(D){const b=this.futureState._root,M=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,M,D),Do(this.futureState.root),this.activateChildRoutes(b,M,D)}deactivateChildRoutes(D,b,M){const N=ei(b);D.children.forEach(W=>{const ae=W.value.outlet;this.deactivateRoutes(W,N[ae],M),delete N[ae]}),Se(N,(W,ae)=>{this.deactivateRouteAndItsChildren(W,M)})}deactivateRoutes(D,b,M){const N=D.value,W=b?b.value:null;if(N===W)if(N.component){const ae=M.getContext(N.outlet);ae&&this.deactivateChildRoutes(D,b,ae.children)}else this.deactivateChildRoutes(D,b,M);else W&&this.deactivateRouteAndItsChildren(b,M)}deactivateRouteAndItsChildren(D,b){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,b):this.deactivateRouteAndOutlet(D,b)}detachAndStoreRouteSubtree(D,b){const M=b.getContext(D.value.outlet),N=M&&D.value.component?M.children:b,W=ei(D);for(const ae of Object.keys(W))this.deactivateRouteAndItsChildren(W[ae],N);if(M&&M.outlet){const ae=M.outlet.detach(),_e=M.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:ae,route:D,contexts:_e})}}deactivateRouteAndOutlet(D,b){const M=b.getContext(D.value.outlet),N=M&&D.value.component?M.children:b,W=ei(D);for(const ae of Object.keys(W))this.deactivateRouteAndItsChildren(W[ae],N);M&&M.outlet&&(M.outlet.deactivate(),M.children.onOutletDeactivated(),M.attachRef=null,M.resolver=null,M.route=null)}activateChildRoutes(D,b,M){const N=ei(b);D.children.forEach(W=>{this.activateRoutes(W,N[W.value.outlet],M),this.forwardEvent(new vi(W.value.snapshot))}),D.children.length&&this.forwardEvent(new Xr(D.value.snapshot))}activateRoutes(D,b,M){const N=D.value,W=b?b.value:null;if(Do(N),N===W)if(N.component){const ae=M.getOrCreateContext(N.outlet);this.activateChildRoutes(D,b,ae.children)}else this.activateChildRoutes(D,b,M);else if(N.component){const ae=M.getOrCreateContext(N.outlet);if(this.routeReuseStrategy.shouldAttach(N.snapshot)){const _e=this.routeReuseStrategy.retrieve(N.snapshot);this.routeReuseStrategy.store(N.snapshot,null),ae.children.onOutletReAttached(_e.contexts),ae.attachRef=_e.componentRef,ae.route=_e.route.value,ae.outlet&&ae.outlet.attach(_e.componentRef,_e.route.value),Do(_e.route.value),this.activateChildRoutes(D,null,ae.children)}else{const _e=function Ys(S){for(let D=S.parent;D;D=D.parent){const b=D.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig;if(b&&b.component)return null}return null}(N.snapshot),it=_e?_e.module.componentFactoryResolver:null;ae.attachRef=null,ae.route=N,ae.resolver=it,ae.outlet&&ae.outlet.activateWith(N,it),this.activateChildRoutes(D,null,ae.children)}}else this.activateChildRoutes(D,null,M)}}class da{constructor(D,b){this.routes=D,this.module=b}}function js(S){return"function"==typeof S}function Br(S){return S instanceof ts}const As=Symbol("INITIAL_VALUE");function hi(){return(0,en.w)(S=>function wt(...S){const D=(0,Ne.yG)(S),b=(0,Ne.jO)(S),{args:M,keys:N}=(0,Ee.D)(S);if(0===M.length)return(0,ye.D)([],D);const W=new xe.y(function st(S,D,b=Le.y){return M=>{ot(D,()=>{const{length:N}=S,W=new Array(N);let ae=N,_e=N;for(let it=0;it<N;it++)ot(D,()=>{const Ft=(0,ye.D)(S[it],D);let Un=!1;Ft.subscribe((0,de.x)(M,Gt=>{W[it]=Gt,Un||(Un=!0,_e--),_e||M.next(b(W.slice()))},()=>{--ae||M.complete()}))},M)},M)}}(M,D,N?ae=>(0,fe.n)(N,ae):Le.y));return b?W.pipe((0,we.Z)(b)):W}(S.map(D=>D.pipe((0,Zt.q)(1),(0,Qt.O)(As)))).pipe((0,Yt.R)((D,b)=>{let M=!1;return b.reduce((N,W,ae)=>N!==As?N:(W===As&&(M=!0),M||!1!==W&&ae!==b.length-1&&!Br(W)?N:W),D)},As),(0,ze.h)(D=>D!==As),(0,tt.U)(D=>Br(D)?D:!0===D),(0,Zt.q)(1)))}class ha{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ms,this.attachRef=null}}class ms{constructor(){this.contexts=new Map}onChildOutletCreated(D,b){const M=this.getOrCreateContext(D);M.outlet=b,this.contexts.set(D,M)}onChildOutletDestroyed(D){const b=this.getContext(D);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let b=this.getContext(D);return b||(b=new ha,this.contexts.set(D,b)),b}getContext(D){return this.contexts.get(D)||null}}let Li=(()=>{class S{constructor(b,M,N,W,ae){this.parentContexts=b,this.location=M,this.resolver=N,this.changeDetector=ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.name=W||Rt,b.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const b=this.parentContexts.getContext(this.name);b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,M){this.activated=b,this._activatedRoute=M,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,M){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;const ae=(M=M||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),_e=this.parentContexts.getOrCreateContext(this.name).children,it=new Yi(b,_e,this.location.injector);this.activated=this.location.createComponent(ae,this.location.length,it),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(b){return new(b||S)(w.Y36(ms),w.Y36(w.s_b),w.Y36(w._Vd),w.$8M("name"),w.Y36(w.sBO))},S.\u0275dir=w.lG2({type:S,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),S})();class Yi{constructor(D,b,M){this.route=D,this.childContexts=b,this.parent=M}get(D,b){return D===Ii?this.route:D===ms?this.childContexts:this.parent.get(D,b)}}let xs=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275cmp=w.Xpm({type:S,selectors:[["ng-component"]],decls:1,vars:0,template:function(b,M){1&b&&w._UZ(0,"router-outlet")},directives:[Li],encapsulation:2}),S})();function Rs(S,D=""){for(let b=0;b<S.length;b++){const M=S[b];Js(M,Vn(D,M))}}function Js(S,D){S.children&&Rs(S.children,D)}function Vn(S,D){return D?S||D.path?S&&!D.path?`${S}/`:!S&&D.path?D.path:`${S}/${D.path}`:"":S}function L(S){const D=S.children&&S.children.map(L),b=D?Object.assign(Object.assign({},S),{children:D}):Object.assign({},S);return!b.component&&(D||b.loadChildren)&&b.outlet&&b.outlet!==Rt&&(b.component=xs),b}function Z(S){return S.outlet||Rt}function V(S,D){const b=S.filter(M=>Z(M)===D);return b.push(...S.filter(M=>Z(M)!==D)),b}const X={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ge(S,D,b){var M;if(""===D.path)return"full"===D.pathMatch&&(S.hasChildren()||b.length>0)?Object.assign({},X):{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const W=(D.matcher||Is)(b,S,D);if(!W)return Object.assign({},X);const ae={};Se(W.posParams,(it,Ft)=>{ae[Ft]=it.path});const _e=W.consumed.length>0?Object.assign(Object.assign({},ae),W.consumed[W.consumed.length-1].parameters):ae;return{matched:!0,consumedSegments:W.consumed,remainingSegments:b.slice(W.consumed.length),parameters:_e,positionalParamSegments:null!==(M=W.posParams)&&void 0!==M?M:{}}}function Je(S,D,b,M,N="corrected"){if(b.length>0&&function rn(S,D,b){return b.some(M=>En(S,D,M)&&Z(M)!==Rt)}(S,b,M)){const ae=new vn(D,function zt(S,D,b,M){const N={};N[Rt]=M,M._sourceSegment=S,M._segmentIndexShift=D.length;for(const W of b)if(""===W.path&&Z(W)!==Rt){const ae=new vn([],{});ae._sourceSegment=S,ae._segmentIndexShift=D.length,N[Z(W)]=ae}return N}(S,D,M,new vn(b,S.children)));return ae._sourceSegment=S,ae._segmentIndexShift=D.length,{segmentGroup:ae,slicedSegments:[]}}if(0===b.length&&function Fn(S,D,b){return b.some(M=>En(S,D,M))}(S,b,M)){const ae=new vn(S.segments,function lt(S,D,b,M,N,W){const ae={};for(const _e of M)if(En(S,b,_e)&&!N[Z(_e)]){const it=new vn([],{});it._sourceSegment=S,it._segmentIndexShift="legacy"===W?S.segments.length:D.length,ae[Z(_e)]=it}return Object.assign(Object.assign({},N),ae)}(S,D,b,M,S.children,N));return ae._sourceSegment=S,ae._segmentIndexShift=D.length,{segmentGroup:ae,slicedSegments:b}}const W=new vn(S.segments,S.children);return W._sourceSegment=S,W._segmentIndexShift=D.length,{segmentGroup:W,slicedSegments:b}}function En(S,D,b){return(!(S.hasChildren()||D.length>0)||"full"!==b.pathMatch)&&""===b.path}function Pn(S,D,b,M){return!!(Z(S)===M||M!==Rt&&En(D,b,S))&&("**"===S.path||ge(D,S,b).matched)}function Nr(S,D,b){return 0===D.length&&!S.children[b]}class On{constructor(D){this.segmentGroup=D||null}}class $n{constructor(D){this.urlTree=D}}function Vi(S){return Ye(new On(S))}function Ui(S){return Ye(new $n(S))}class co{constructor(D,b,M,N,W){this.configLoader=b,this.urlSerializer=M,this.urlTree=N,this.config=W,this.allowRedirects=!0,this.ngModule=D.get(w.h0i)}apply(){const D=Je(this.urlTree.root,[],[],this.config).segmentGroup,b=new vn(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,b,Rt).pipe((0,tt.U)(W=>this.createUrlTree(B(W),this.urlTree.queryParams,this.urlTree.fragment))).pipe(he(W=>{if(W instanceof $n)return this.allowRedirects=!1,this.match(W.urlTree);throw W instanceof On?this.noMatchError(W):W}))}match(D){return this.expandSegmentGroup(this.ngModule,this.config,D.root,Rt).pipe((0,tt.U)(N=>this.createUrlTree(B(N),D.queryParams,D.fragment))).pipe(he(N=>{throw N instanceof On?this.noMatchError(N):N}))}noMatchError(D){return new Error(`Cannot match any routes. URL Segment: '${D.segmentGroup}'`)}createUrlTree(D,b,M){const N=D.segments.length>0?new vn([],{[Rt]:D}):D;return new ts(N,b,M)}expandSegmentGroup(D,b,M,N){return 0===M.segments.length&&M.hasChildren()?this.expandChildren(D,b,M).pipe((0,tt.U)(W=>new vn([],W))):this.expandSegment(D,M,b,M.segments,N,!0)}expandChildren(D,b,M){const N=[];for(const W of Object.keys(M.children))"primary"===W?N.unshift(W):N.push(W);return(0,ye.D)(N).pipe(Me(W=>{const ae=M.children[W],_e=V(b,W);return this.expandSegmentGroup(D,_e,ae,W).pipe((0,tt.U)(it=>({segment:it,outlet:W})))}),(0,Yt.R)((W,ae)=>(W[ae.outlet]=ae.segment,W),{}),function $t(S,D){const b=arguments.length>=2;return M=>M.pipe(S?(0,ze.h)((N,W)=>S(N,W,M)):Le.y,Ge(1),b?(0,bt.d)(D):(0,pt.T)(()=>new ft.K))}())}expandSegment(D,b,M,N,W,ae){return(0,ye.D)(M).pipe(Me(_e=>this.expandSegmentAgainstRoute(D,b,M,_e,N,W,ae).pipe(he(Ft=>{if(Ft instanceof On)return(0,qe.of)(null);throw Ft}))),(0,bn.P)(_e=>!!_e),he((_e,it)=>{if(_e instanceof ft.K||"EmptyError"===_e.name)return Nr(b,N,W)?(0,qe.of)(new vn([],{})):Vi(b);throw _e}))}expandSegmentAgainstRoute(D,b,M,N,W,ae,_e){return Pn(N,b,W,ae)?void 0===N.redirectTo?this.matchSegmentAgainstRoute(D,b,N,W,ae):_e&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,b,M,N,W,ae):Vi(b):Vi(b)}expandSegmentAgainstRouteUsingRedirect(D,b,M,N,W,ae){return"**"===N.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,M,N,ae):this.expandRegularSegmentAgainstRouteUsingRedirect(D,b,M,N,W,ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,b,M,N){const W=this.applyRedirectCommands([],M.redirectTo,{});return M.redirectTo.startsWith("/")?Ui(W):this.lineralizeSegments(M,W).pipe((0,De.z)(ae=>{const _e=new vn(ae,{});return this.expandSegment(D,_e,b,ae,N,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,b,M,N,W,ae){const{matched:_e,consumedSegments:it,remainingSegments:Ft,positionalParamSegments:Un}=ge(b,N,W);if(!_e)return Vi(b);const Gt=this.applyRedirectCommands(it,N.redirectTo,Un);return N.redirectTo.startsWith("/")?Ui(Gt):this.lineralizeSegments(N,Gt).pipe((0,De.z)(hr=>this.expandSegment(D,b,M,hr.concat(Ft),ae,!1)))}matchSegmentAgainstRoute(D,b,M,N,W){if("**"===M.path)return M.loadChildren?(M._loadedConfig?(0,qe.of)(M._loadedConfig):this.configLoader.load(D.injector,M)).pipe((0,tt.U)(Gt=>(M._loadedConfig=Gt,new vn(N,{})))):(0,qe.of)(new vn(N,{}));const{matched:ae,consumedSegments:_e,remainingSegments:it}=ge(b,M,N);return ae?this.getChildConfig(D,M,N).pipe((0,De.z)(Un=>{const Gt=Un.module,hr=Un.routes,{segmentGroup:Hn,slicedSegments:so}=Je(b,_e,it,hr),Qo=new vn(Hn.segments,Hn.children);if(0===so.length&&Qo.hasChildren())return this.expandChildren(Gt,hr,Qo).pipe((0,tt.U)(No=>new vn(_e,No)));if(0===hr.length&&0===so.length)return(0,qe.of)(new vn(_e,{}));const Ha=Z(M)===W;return this.expandSegment(Gt,Qo,hr,so,Ha?Rt:W,!0).pipe((0,tt.U)(an=>new vn(_e.concat(an.segments),an.children)))})):Vi(b)}getChildConfig(D,b,M){return b.children?(0,qe.of)(new da(b.children,D)):b.loadChildren?void 0!==b._loadedConfig?(0,qe.of)(b._loadedConfig):this.runCanLoadGuards(D.injector,b,M).pipe((0,De.z)(N=>N?this.configLoader.load(D.injector,b).pipe((0,tt.U)(W=>(b._loadedConfig=W,W))):function Bi(S){return Ye(qi(`Cannot load children because the guard of the route "path: '${S.path}'" returned false`))}(b))):(0,qe.of)(new da([],D))}runCanLoadGuards(D,b,M){const N=b.canLoad;if(!N||0===N.length)return(0,qe.of)(!0);const W=N.map(ae=>{const _e=D.get(ae);let it;if(function Qs(S){return S&&js(S.canLoad)}(_e))it=_e.canLoad(b,M);else{if(!js(_e))throw new Error("Invalid CanLoad guard");it=_e(b,M)}return le(it)});return(0,qe.of)(W).pipe(hi(),(0,nn.b)(ae=>{if(!Br(ae))return;const _e=qi(`Redirecting to "${this.urlSerializer.serialize(ae)}"`);throw _e.url=ae,_e}),(0,tt.U)(ae=>!0===ae))}lineralizeSegments(D,b){let M=[],N=b.root;for(;;){if(M=M.concat(N.segments),0===N.numberOfChildren)return(0,qe.of)(M);if(N.numberOfChildren>1||!N.children[Rt])return Ye(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D.redirectTo}'`));N=N.children[Rt]}}applyRedirectCommands(D,b,M){return this.applyRedirectCreatreUrlTree(b,this.urlSerializer.parse(b),D,M)}applyRedirectCreatreUrlTree(D,b,M,N){const W=this.createSegmentGroup(D,b.root,M,N);return new ts(W,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(D,b){const M={};return Se(D,(N,W)=>{if("string"==typeof N&&N.startsWith(":")){const _e=N.substring(1);M[W]=b[_e]}else M[W]=N}),M}createSegmentGroup(D,b,M,N){const W=this.createSegments(D,b.segments,M,N);let ae={};return Se(b.children,(_e,it)=>{ae[it]=this.createSegmentGroup(D,_e,M,N)}),new vn(W,ae)}createSegments(D,b,M,N){return b.map(W=>W.path.startsWith(":")?this.findPosParam(D,W,N):this.findOrReturn(W,M))}findPosParam(D,b,M){const N=M[b.path.substring(1)];if(!N)throw new Error(`Cannot redirect to '${D}'. Cannot find '${b.path}'.`);return N}findOrReturn(D,b){let M=0;for(const N of b){if(N.path===D.path)return b.splice(M),N;M++}return D}}function B(S){const D={};for(const M of Object.keys(S.children)){const W=B(S.children[M]);(W.segments.length>0||W.hasChildren())&&(D[M]=W)}return function ho(S){if(1===S.numberOfChildren&&S.children[Rt]){const D=S.children[Rt];return new vn(S.segments.concat(D.segments),D.children)}return S}(new vn(S.segments,D))}class O{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class H{constructor(D,b){this.component=D,this.route=b}}function Ve(S,D,b){const M=S._root;return fi(M,D?D._root:null,b,[M.value])}function on(S,D,b){const M=function Yr(S){if(!S)return null;for(let D=S.parent;D;D=D.parent){const b=D.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig}return null}(D);return(M?M.module.injector:b).get(S)}function fi(S,D,b,M,N={canDeactivateChecks:[],canActivateChecks:[]}){const W=ei(D);return S.children.forEach(ae=>{(function Qi(S,D,b,M,N={canDeactivateChecks:[],canActivateChecks:[]}){const W=S.value,ae=D?D.value:null,_e=b?b.getContext(S.value.outlet):null;if(ae&&W.routeConfig===ae.routeConfig){const it=function fo(S,D,b){if("function"==typeof b)return b(S,D);switch(b){case"pathParamsChange":return!Cr(S.url,D.url);case"pathParamsOrQueryParamsChange":return!Cr(S.url,D.url)||!ur(S.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ts(S,D)||!ur(S.queryParams,D.queryParams);default:return!Ts(S,D)}}(ae,W,W.routeConfig.runGuardsAndResolvers);it?N.canActivateChecks.push(new O(M)):(W.data=ae.data,W._resolvedData=ae._resolvedData),fi(S,D,W.component?_e?_e.children:null:b,M,N),it&&_e&&_e.outlet&&_e.outlet.isActivated&&N.canDeactivateChecks.push(new H(_e.outlet.component,ae))}else ae&&po(D,_e,N),N.canActivateChecks.push(new O(M)),fi(S,null,W.component?_e?_e.children:null:b,M,N)})(ae,W[ae.value.outlet],b,M.concat([ae.value]),N),delete W[ae.value.outlet]}),Se(W,(ae,_e)=>po(ae,b.getContext(_e),N)),N}function po(S,D,b){const M=ei(S),N=S.value;Se(M,(W,ae)=>{po(W,N.component?D?D.children.getContext(ae):null:D,b)}),b.canDeactivateChecks.push(new H(N.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,N))}class Ms{}function $s(S){return new xe.y(D=>D.error(S))}class Wu{constructor(D,b,M,N,W,ae){this.rootComponentType=D,this.config=b,this.urlTree=M,this.url=N,this.paramsInheritanceStrategy=W,this.relativeLinkResolution=ae}recognize(){const D=Je(this.urlTree.root,[],[],this.config.filter(ae=>void 0===ae.redirectTo),this.relativeLinkResolution).segmentGroup,b=this.processSegmentGroup(this.config,D,Rt);if(null===b)return null;const M=new Zs([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Rt,this.rootComponentType,null,this.urlTree.root,-1,{}),N=new Mr(M,b),W=new ka(this.url,N);return this.inheritParamsAndData(W._root),W}inheritParamsAndData(D){const b=D.value,M=ci(b,this.paramsInheritanceStrategy);b.params=Object.freeze(M.params),b.data=Object.freeze(M.data),D.children.forEach(N=>this.inheritParamsAndData(N))}processSegmentGroup(D,b,M){return 0===b.segments.length&&b.hasChildren()?this.processChildren(D,b):this.processSegment(D,b,b.segments,M)}processChildren(D,b){const M=[];for(const W of Object.keys(b.children)){const ae=b.children[W],_e=V(D,W),it=this.processSegmentGroup(_e,ae,W);if(null===it)return null;M.push(...it)}const N=Ao(M);return function zu(S){S.sort((D,b)=>D.value.outlet===Rt?-1:b.value.outlet===Rt?1:D.value.outlet.localeCompare(b.value.outlet))}(N),N}processSegment(D,b,M,N){for(const W of D){const ae=this.processSegmentAgainstRoute(W,b,M,N);if(null!==ae)return ae}return Nr(b,M,N)?[]:null}processSegmentAgainstRoute(D,b,M,N){if(D.redirectTo||!Pn(D,b,M,N))return null;let W,ae=[],_e=[];if("**"===D.path){const Hn=M.length>0?pe(M).parameters:{};W=new Zs(M,Hn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(D),Z(D),D.component,D,gl(b),Va(b)+M.length,Ua(D))}else{const Hn=ge(b,D,M);if(!Hn.matched)return null;ae=Hn.consumedSegments,_e=Hn.remainingSegments,W=new Zs(ae,Hn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(D),Z(D),D.component,D,gl(b),Va(b)+ae.length,Ua(D))}const it=function Eu(S){return S.children?S.children:S.loadChildren?S._loadedConfig.routes:[]}(D),{segmentGroup:Ft,slicedSegments:Un}=Je(b,ae,_e,it.filter(Hn=>void 0===Hn.redirectTo),this.relativeLinkResolution);if(0===Un.length&&Ft.hasChildren()){const Hn=this.processChildren(it,Ft);return null===Hn?null:[new Mr(W,Hn)]}if(0===it.length&&0===Un.length)return[new Mr(W,[])];const Gt=Z(D)===N,hr=this.processSegment(it,Ft,Un,Gt?Rt:N);return null===hr?null:[new Mr(W,hr)]}}function uu(S){const D=S.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function Ao(S){const D=[],b=new Set;for(const M of S){if(!uu(M)){D.push(M);continue}const N=D.find(W=>M.value.routeConfig===W.value.routeConfig);void 0!==N?(N.children.push(...M.children),b.add(N)):D.push(M)}for(const M of b){const N=Ao(M.children);D.push(new Mr(M.value,N))}return D.filter(M=>!b.has(M))}function gl(S){let D=S;for(;D._sourceSegment;)D=D._sourceSegment;return D}function Va(S){let D=S,b=D._segmentIndexShift?D._segmentIndexShift:0;for(;D._sourceSegment;)D=D._sourceSegment,b+=D._segmentIndexShift?D._segmentIndexShift:0;return b-1}function Ko(S){return S.data||{}}function Ua(S){return S.resolve||{}}function Sa(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}function Di(S){return(0,en.w)(D=>{const b=S(D);return b?(0,ye.D)(b).pipe((0,tt.U)(()=>D)):(0,qe.of)(D)})}class Mc extends class mi{shouldDetach(D){return!1}store(D,b){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,b){return D.routeConfig===b.routeConfig}}{}const Ba=new w.OlP("ROUTES");class Nc{constructor(D,b,M,N){this.injector=D,this.compiler=b,this.onLoadStartListener=M,this.onLoadEndListener=N}load(D,b){if(b._loader$)return b._loader$;this.onLoadStartListener&&this.onLoadStartListener(b);const N=this.loadModuleFactory(b.loadChildren).pipe((0,tt.U)(W=>{this.onLoadEndListener&&this.onLoadEndListener(b);const ae=W.create(D);return new da(Te(ae.injector.get(Ba,void 0,w.XFs.Self|w.XFs.Optional)).map(L),ae)}),he(W=>{throw b._loader$=void 0,W}));return b._loader$=new He(N,()=>new ne.x).pipe(Qe()),b._loader$}loadModuleFactory(D){return le(D()).pipe((0,De.z)(b=>b instanceof w.YKP?(0,qe.of)(b):(0,ye.D)(this.compiler.compileModuleAsync(b))))}}class Aa{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,b){return D}}function Pc(S){throw S}function lu(S,D,b){return D.parse("/")}function Zo(S,D){return(0,qe.of)(null)}const eo={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ar=(()=>{class S{constructor(b,M,N,W,ae,_e,it){this.rootComponentType=b,this.urlSerializer=M,this.rootContexts=N,this.location=W,this.config=it,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ne.x,this.errorHandler=Pc,this.malformedUriErrorHandler=lu,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Zo,afterPreactivation:Zo},this.urlHandlingStrategy=new Aa,this.routeReuseStrategy=new Mc,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ae.get(w.h0i),this.console=ae.get(w.c2e);const Gt=ae.get(w.R0b);this.isNgZoneEnabled=Gt instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(it),this.currentUrlTree=function Ke(){return new ts(new vn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Nc(ae,_e,hr=>this.triggerEvent(new pn(hr)),hr=>this.triggerEvent(new as(hr))),this.routerState=kn(this.currentUrlTree,this.rootComponentType),this.transitions=new te({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}setupNavigations(b){const M=this.events;return b.pipe((0,ze.h)(N=>0!==N.id),(0,tt.U)(N=>Object.assign(Object.assign({},N),{extractedUrl:this.urlHandlingStrategy.extract(N.rawUrl)})),(0,en.w)(N=>{let W=!1,ae=!1;return(0,qe.of)(N).pipe((0,nn.b)(_e=>{this.currentNavigation={id:_e.id,initialUrl:_e.currentRawUrl,extractedUrl:_e.extractedUrl,trigger:_e.source,extras:_e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,en.w)(_e=>{const it=this.browserUrlTree.toString(),Ft=!this.navigated||_e.extractedUrl.toString()!==it||it!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Ft)&&this.urlHandlingStrategy.shouldProcessUrl(_e.rawUrl))return pa(_e.source)&&(this.browserUrlTree=_e.extractedUrl),(0,qe.of)(_e).pipe((0,en.w)(Gt=>{const hr=this.transitions.getValue();return M.next(new wr(Gt.id,this.serializeUrl(Gt.extractedUrl),Gt.source,Gt.restoredState)),hr!==this.transitions.getValue()?et.E:Promise.resolve(Gt)}),function F(S,D,b,M){return(0,en.w)(N=>function Xs(S,D,b,M,N){return new co(S,D,b,M,N).apply()}(S,D,b,N.extractedUrl,M).pipe((0,tt.U)(W=>Object.assign(Object.assign({},N),{urlAfterRedirects:W}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,nn.b)(Gt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Gt.urlAfterRedirects})}),function qo(S,D,b,M,N){return(0,De.z)(W=>function ri(S,D,b,M,N="emptyOnly",W="legacy"){try{const ae=new Wu(S,D,b,M,N,W).recognize();return null===ae?$s(new Ms):(0,qe.of)(ae)}catch(ae){return $s(ae)}}(S,D,W.urlAfterRedirects,b(W.urlAfterRedirects),M,N).pipe((0,tt.U)(ae=>Object.assign(Object.assign({},W),{targetSnapshot:ae}))))}(this.rootComponentType,this.config,Gt=>this.serializeUrl(Gt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,nn.b)(Gt=>{if("eager"===this.urlUpdateStrategy){if(!Gt.extras.skipLocationChange){const Hn=this.urlHandlingStrategy.merge(Gt.urlAfterRedirects,Gt.rawUrl);this.setBrowserUrl(Hn,Gt)}this.browserUrlTree=Gt.urlAfterRedirects}const hr=new Er(Gt.id,this.serializeUrl(Gt.extractedUrl),this.serializeUrl(Gt.urlAfterRedirects),Gt.targetSnapshot);M.next(hr)}));if(Ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:hr,extractedUrl:Hn,source:so,restoredState:Qo,extras:Ha}=_e,va=new wr(hr,this.serializeUrl(Hn),so,Qo);M.next(va);const an=kn(Hn,this.rootComponentType).snapshot;return(0,qe.of)(Object.assign(Object.assign({},_e),{targetSnapshot:an,urlAfterRedirects:Hn,extras:Object.assign(Object.assign({},Ha),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_e.rawUrl,_e.resolve(null),et.E}),Di(_e=>{const{targetSnapshot:it,id:Ft,extractedUrl:Un,rawUrl:Gt,extras:{skipLocationChange:hr,replaceUrl:Hn}}=_e;return this.hooks.beforePreactivation(it,{navigationId:Ft,appliedUrlTree:Un,rawUrlTree:Gt,skipLocationChange:!!hr,replaceUrl:!!Hn})}),(0,nn.b)(_e=>{const it=new Zn(_e.id,this.serializeUrl(_e.extractedUrl),this.serializeUrl(_e.urlAfterRedirects),_e.targetSnapshot);this.triggerEvent(it)}),(0,tt.U)(_e=>Object.assign(Object.assign({},_e),{guards:Ve(_e.targetSnapshot,_e.currentSnapshot,this.rootContexts)})),function Gl(S,D){return(0,De.z)(b=>{const{targetSnapshot:M,currentSnapshot:N,guards:{canActivateChecks:W,canDeactivateChecks:ae}}=b;return 0===ae.length&&0===W.length?(0,qe.of)(Object.assign(Object.assign({},b),{guardsResult:!0})):function pl(S,D,b,M){return(0,ye.D)(S).pipe((0,De.z)(N=>function go(S,D,b,M,N){const W=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!W||0===W.length)return(0,qe.of)(!0);const ae=W.map(_e=>{const it=on(_e,D,N);let Ft;if(function jr(S){return S&&js(S.canDeactivate)}(it))Ft=le(it.canDeactivate(S,D,b,M));else{if(!js(it))throw new Error("Invalid CanDeactivate guard");Ft=le(it(S,D,b,M))}return Ft.pipe((0,bn.P)())});return(0,qe.of)(ae).pipe(hi())}(N.component,N.route,b,D,M)),(0,bn.P)(N=>!0!==N,!0))}(ae,M,N,S).pipe((0,De.z)(_e=>_e&&function is(S){return"boolean"==typeof S}(_e)?function pi(S,D,b,M){return(0,ye.D)(D).pipe(Me(N=>(0,oe.z)(function gi(S,D){return null!==S&&D&&D(new Ki(S)),(0,qe.of)(!0)}(N.route.parent,M),function zo(S,D){return null!==S&&D&&D(new kr(S)),(0,qe.of)(!0)}(N.route,M),function La(S,D,b){const M=D[D.length-1],W=D.slice(0,D.length-1).reverse().map(ae=>function kt(S){const D=S.routeConfig?S.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:S,guards:D}:null}(ae)).filter(ae=>null!==ae).map(ae=>Ie(()=>{const _e=ae.guards.map(it=>{const Ft=on(it,ae.node,b);let Un;if(function So(S){return S&&js(S.canActivateChild)}(Ft))Un=le(Ft.canActivateChild(M,S));else{if(!js(Ft))throw new Error("Invalid CanActivateChild guard");Un=le(Ft(M,S))}return Un.pipe((0,bn.P)())});return(0,qe.of)(_e).pipe(hi())}));return(0,qe.of)(W).pipe(hi())}(S,N.path,b),function _s(S,D,b){const M=D.routeConfig?D.routeConfig.canActivate:null;if(!M||0===M.length)return(0,qe.of)(!0);const N=M.map(W=>Ie(()=>{const ae=on(W,D,b);let _e;if(function di(S){return S&&js(S.canActivate)}(ae))_e=le(ae.canActivate(D,S));else{if(!js(ae))throw new Error("Invalid CanActivate guard");_e=le(ae(D,S))}return _e.pipe((0,bn.P)())}));return(0,qe.of)(N).pipe(hi())}(S,N.route,b))),(0,bn.P)(N=>!0!==N,!0))}(M,W,S,D):(0,qe.of)(_e)),(0,tt.U)(_e=>Object.assign(Object.assign({},b),{guardsResult:_e})))})}(this.ngModule.injector,_e=>this.triggerEvent(_e)),(0,nn.b)(_e=>{if(Br(_e.guardsResult)){const Ft=qi(`Redirecting to "${this.serializeUrl(_e.guardsResult)}"`);throw Ft.url=_e.guardsResult,Ft}const it=new Ht(_e.id,this.serializeUrl(_e.extractedUrl),this.serializeUrl(_e.urlAfterRedirects),_e.targetSnapshot,!!_e.guardsResult);this.triggerEvent(it)}),(0,ze.h)(_e=>!!_e.guardsResult||(this.restoreHistory(_e),this.cancelNavigationTransition(_e,""),!1)),Di(_e=>{if(_e.guards.canActivateChecks.length)return(0,qe.of)(_e).pipe((0,nn.b)(it=>{const Ft=new Ln(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot);this.triggerEvent(Ft)}),(0,en.w)(it=>{let Ft=!1;return(0,qe.of)(it).pipe(function fa(S,D){return(0,De.z)(b=>{const{targetSnapshot:M,guards:{canActivateChecks:N}}=b;if(!N.length)return(0,qe.of)(b);let W=0;return(0,ye.D)(N).pipe(Me(ae=>function Cu(S,D,b,M){return function Ta(S,D,b,M){const N=Sa(S);if(0===N.length)return(0,qe.of)({});const W={};return(0,ye.D)(N).pipe((0,De.z)(ae=>function Wl(S,D,b,M){const N=on(S,D,M);return le(N.resolve?N.resolve(D,b):N(D,b))}(S[ae],D,b,M).pipe((0,nn.b)(_e=>{W[ae]=_e}))),Ge(1),(0,De.z)(()=>Sa(W).length===N.length?(0,qe.of)(W):et.E))}(S._resolve,S,D,M).pipe((0,tt.U)(W=>(S._resolvedData=W,S.data=Object.assign(Object.assign({},S.data),ci(S,b).resolve),null)))}(ae.route,M,S,D)),(0,nn.b)(()=>W++),Ge(1),(0,De.z)(ae=>W===N.length?(0,qe.of)(b):et.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,nn.b)({next:()=>Ft=!0,complete:()=>{Ft||(this.restoreHistory(it),this.cancelNavigationTransition(it,"At least one route resolver didn't emit any value."))}}))}),(0,nn.b)(it=>{const Ft=new wn(it.id,this.serializeUrl(it.extractedUrl),this.serializeUrl(it.urlAfterRedirects),it.targetSnapshot);this.triggerEvent(Ft)}))}),Di(_e=>{const{targetSnapshot:it,id:Ft,extractedUrl:Un,rawUrl:Gt,extras:{skipLocationChange:hr,replaceUrl:Hn}}=_e;return this.hooks.afterPreactivation(it,{navigationId:Ft,appliedUrlTree:Un,rawUrlTree:Gt,skipLocationChange:!!hr,replaceUrl:!!Hn})}),(0,tt.U)(_e=>{const it=function lo(S,D,b){const M=dr(S,D._root,b?b._root:void 0);return new Ur(M,D)}(this.routeReuseStrategy,_e.targetSnapshot,_e.currentRouterState);return Object.assign(Object.assign({},_e),{targetRouterState:it})}),(0,nn.b)(_e=>{this.currentUrlTree=_e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_e.urlAfterRedirects,_e.rawUrl),this.routerState=_e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_e),this.browserUrlTree=_e.urlAfterRedirects)}),((S,D,b)=>(0,tt.U)(M=>(new gs(D,M.targetRouterState,M.currentRouterState,b).activate(S),M)))(this.rootContexts,this.routeReuseStrategy,_e=>this.triggerEvent(_e)),(0,nn.b)({next(){W=!0},complete(){W=!0}}),function Bt(S){return(0,rt.e)((D,b)=>{try{D.subscribe(b)}finally{b.add(S)}})}(()=>{var _e;W||ae||this.cancelNavigationTransition(N,`Navigation ID ${N.id} is not equal to the current navigation id ${this.navigationId}`),(null===(_e=this.currentNavigation)||void 0===_e?void 0:_e.id)===N.id&&(this.currentNavigation=null)}),he(_e=>{if(ae=!0,function Dn(S){return S&&S[Rr]}(_e)){const it=Br(_e.url);it||(this.navigated=!0,this.restoreHistory(N,!0));const Ft=new Lr(N.id,this.serializeUrl(N.extractedUrl),_e.message);M.next(Ft),it?setTimeout(()=>{const Un=this.urlHandlingStrategy.merge(_e.url,this.rawUrlTree),Gt={skipLocationChange:N.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||pa(N.source)};this.scheduleNavigation(Un,"imperative",null,Gt,{resolve:N.resolve,reject:N.reject,promise:N.promise})},0):N.resolve(!1)}else{this.restoreHistory(N,!0);const it=new zn(N.id,this.serializeUrl(N.extractedUrl),_e);M.next(it);try{N.resolve(this.errorHandler(_e))}catch(Ft){N.reject(Ft)}}return et.E}))}))}resetRootComponentType(b){this.rootComponentType=b,this.routerState.root.component=this.rootComponentType}setTransition(b){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),b))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const M="popstate"===b.type?"popstate":"hashchange";"popstate"===M&&setTimeout(()=>{var N;const W={replaceUrl:!0},ae=(null===(N=b.state)||void 0===N?void 0:N.navigationId)?b.state:null;if(ae){const it=Object.assign({},ae);delete it.navigationId,delete it.\u0275routerPageId,0!==Object.keys(it).length&&(W.state=it)}const _e=this.parseUrl(b.url);this.scheduleNavigation(_e,M,ae,W)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(b){this.events.next(b)}resetConfig(b){Rs(b),this.config=b.map(L),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,M={}){const{relativeTo:N,queryParams:W,fragment:ae,queryParamsHandling:_e,preserveFragment:it}=M,Ft=N||this.routerState.root,Un=it?this.currentUrlTree.fragment:ae;let Gt=null;switch(_e){case"merge":Gt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),W);break;case"preserve":Gt=this.currentUrlTree.queryParams;break;default:Gt=W||null}return null!==Gt&&(Gt=this.removeEmptyProps(Gt)),function be(S,D,b,M,N){if(0===b.length)return Ct(D.root,D.root,D.root,M,N);const W=function ti(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new Mn(!0,0,S);let D=0,b=!1;const M=S.reduce((N,W,ae)=>{if("object"==typeof W&&null!=W){if(W.outlets){const _e={};return Se(W.outlets,(it,Ft)=>{_e[Ft]="string"==typeof it?it.split("/"):it}),[...N,{outlets:_e}]}if(W.segmentPath)return[...N,W.segmentPath]}return"string"!=typeof W?[...N,W]:0===ae?(W.split("/").forEach((_e,it)=>{0==it&&"."===_e||(0==it&&""===_e?b=!0:".."===_e?D++:""!=_e&&N.push(_e))}),N):[...N,W]},[]);return new Mn(b,D,M)}(b);if(W.toRoot())return Ct(D.root,D.root,new vn([],{}),M,N);const ae=function Zi(S,D,b){if(S.isAbsolute)return new Nn(D.root,!0,0);if(-1===b.snapshot._lastPathIndex){const W=b.snapshot._urlSegment;return new Nn(W,W===D.root,0)}const M=Fe(S.commands[0])?0:1;return function ni(S,D,b){let M=S,N=D,W=b;for(;W>N;){if(W-=N,M=M.parent,!M)throw new Error("Invalid number of '../'");N=M.segments.length}return new Nn(M,!1,N-W)}(b.snapshot._urlSegment,b.snapshot._lastPathIndex+M,S.numberOfDoubleDots)}(W,D,S),_e=ae.processChildren?ls(ae.segmentGroup,ae.index,W.commands):qr(ae.segmentGroup,ae.index,W.commands);return Ct(D.root,ae.segmentGroup,_e,M,N)}(Ft,this.currentUrlTree,b,Gt,null!=Un?Un:null)}navigateByUrl(b,M={skipLocationChange:!1}){const N=Br(b)?b:this.parseUrl(b),W=this.urlHandlingStrategy.merge(N,this.rawUrlTree);return this.scheduleNavigation(W,"imperative",null,M)}navigate(b,M={skipLocationChange:!1}){return function zl(S){for(let D=0;D<S.length;D++){const b=S[D];if(null==b)throw new Error(`The requested path contains ${b} segment at index ${D}`)}}(b),this.navigateByUrl(this.createUrlTree(b,M),M)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let M;try{M=this.urlSerializer.parse(b)}catch(N){M=this.malformedUriErrorHandler(N,this.urlSerializer,b)}return M}isActive(b,M){let N;if(N=!0===M?Object.assign({},eo):!1===M?Object.assign({},xa):M,Br(b))return tn(this.currentUrlTree,b,N);const W=this.parseUrl(b);return tn(this.currentUrlTree,W,N)}removeEmptyProps(b){return Object.keys(b).reduce((M,N)=>{const W=b[N];return null!=W&&(M[N]=W),M},{})}processNavigations(){this.navigations.subscribe(b=>{this.navigated=!0,this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId,this.events.next(new gr(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,b.resolve(!0)},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}scheduleNavigation(b,M,N,W,ae){var _e,it;if(this.disposed)return Promise.resolve(!1);let Ft,Un,Gt;ae?(Ft=ae.resolve,Un=ae.reject,Gt=ae.promise):Gt=new Promise((so,Qo)=>{Ft=so,Un=Qo});const hr=++this.navigationId;let Hn;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(N=this.location.getState()),Hn=N&&N.\u0275routerPageId?N.\u0275routerPageId:W.replaceUrl||W.skipLocationChange?null!==(_e=this.browserPageId)&&void 0!==_e?_e:0:(null!==(it=this.browserPageId)&&void 0!==it?it:0)+1):Hn=0,this.setTransition({id:hr,targetPageId:Hn,source:M,restoredState:N,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:b,extras:W,resolve:Ft,reject:Un,promise:Gt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Gt.catch(so=>Promise.reject(so))}setBrowserUrl(b,M){const N=this.urlSerializer.serialize(b),W=Object.assign(Object.assign({},M.extras.state),this.generateNgRouterState(M.id,M.targetPageId));this.location.isCurrentPathEqualTo(N)||M.extras.replaceUrl?this.location.replaceState(N,"",W):this.location.go(N,"",W)}restoreHistory(b,M=!1){var N,W;if("computed"===this.canceledNavigationResolution){const ae=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(N=this.currentNavigation)||void 0===N?void 0:N.finalUrl)||0===ae?this.currentUrlTree===(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)&&0===ae&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ae)}else"replace"===this.canceledNavigationResolution&&(M&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(b,M){const N=new Lr(b.id,this.serializeUrl(b.extractedUrl),M);this.triggerEvent(N),b.resolve(!1)}generateNgRouterState(b,M){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:M}:{navigationId:b}}}return S.\u0275fac=function(b){w.$Z()},S.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac}),S})();function pa(S){return"imperative"!==S}let ja=(()=>{class S{constructor(b,M,N){this.router=b,this.route=M,this.locationStrategy=N,this.commands=null,this.href=null,this.onChanges=new ne.x,this.subscription=b.events.subscribe(W=>{W instanceof gr&&this.updateTargetUrlAndHref()})}set routerLink(b){this.commands=null!=b?Array.isArray(b)?b:[b]:null}ngOnChanges(b){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(b,M,N,W,ae){if(0!==b||M||N||W||ae||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const _e={skipLocationChange:Ro(this.skipLocationChange),replaceUrl:Ro(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_e),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ro(this.preserveFragment)})}}return S.\u0275fac=function(b){return new(b||S)(w.Y36(ar),w.Y36(Ii),w.Y36(pr.S$))},S.\u0275dir=w.lG2({type:S,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(b,M){1&b&&w.NdJ("click",function(W){return M.onClick(W.button,W.ctrlKey,W.shiftKey,W.altKey,W.metaKey)}),2&b&&w.uIk("target",M.target)("href",M.href,w.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[w.TTD]}),S})();function Ro(S){return""===S||!!S}class du{}class ml{preload(D,b){return(0,qe.of)(null)}}let Kl=(()=>{class S{constructor(b,M,N,W){this.router=b,this.injector=N,this.preloadingStrategy=W,this.loader=new Nc(N,M,it=>b.triggerEvent(new pn(it)),it=>b.triggerEvent(new as(it)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,ze.h)(b=>b instanceof gr),Me(()=>this.preload())).subscribe(()=>{})}preload(){const b=this.injector.get(w.h0i);return this.processRoutes(b,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,M){const N=[];for(const W of M)if(W.loadChildren&&!W.canLoad&&W._loadedConfig){const ae=W._loadedConfig;N.push(this.processRoutes(ae.module,ae.routes))}else W.loadChildren&&!W.canLoad?N.push(this.preloadConfig(b,W)):W.children&&N.push(this.processRoutes(b,W.children));return(0,ye.D)(N).pipe((0,cn.J)(),(0,tt.U)(W=>{}))}preloadConfig(b,M){return this.preloadingStrategy.preload(M,()=>(M._loadedConfig?(0,qe.of)(M._loadedConfig):this.loader.load(b.injector,M)).pipe((0,De.z)(W=>(M._loadedConfig=W,this.processRoutes(W.module,W.routes)))))}}return S.\u0275fac=function(b){return new(b||S)(w.LFG(ar),w.LFG(w.Sil),w.LFG(w.zs3),w.LFG(du))},S.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac}),S})(),Ti=(()=>{class S{constructor(b,M,N={}){this.router=b,this.viewportScroller=M,this.options=N,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},N.scrollPositionRestoration=N.scrollPositionRestoration||"disabled",N.anchorScrolling=N.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(b=>{b instanceof wr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof gr&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.router.parseUrl(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(b=>{b instanceof _r&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,M){this.router.triggerEvent(new _r(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,M))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return S.\u0275fac=function(b){w.$Z()},S.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac}),S})();const $a=new w.OlP("ROUTER_CONFIGURATION"),ro=new w.OlP("ROUTER_FORROOT_GUARD"),_l=[pr.Ye,{provide:Ei,useClass:bs},{provide:ar,useFactory:function ji(S,D,b,M,N,W,ae={},_e,it){const Ft=new ar(null,S,D,b,M,N,Te(W));return _e&&(Ft.urlHandlingStrategy=_e),it&&(Ft.routeReuseStrategy=it),function ma(S,D){S.errorHandler&&(D.errorHandler=S.errorHandler),S.malformedUriErrorHandler&&(D.malformedUriErrorHandler=S.malformedUriErrorHandler),S.onSameUrlNavigation&&(D.onSameUrlNavigation=S.onSameUrlNavigation),S.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=S.paramsInheritanceStrategy),S.relativeLinkResolution&&(D.relativeLinkResolution=S.relativeLinkResolution),S.urlUpdateStrategy&&(D.urlUpdateStrategy=S.urlUpdateStrategy),S.canceledNavigationResolution&&(D.canceledNavigationResolution=S.canceledNavigationResolution)}(ae,Ft),ae.enableTracing&&Ft.events.subscribe(Un=>{var Gt,hr;null===(Gt=console.group)||void 0===Gt||Gt.call(console,`Router Event: ${Un.constructor.name}`),console.log(Un.toString()),console.log(Un),null===(hr=console.groupEnd)||void 0===hr||hr.call(console)}),Ft},deps:[Ei,ms,pr.Ye,w.zs3,w.Sil,Ba,$a,[class Td{},new w.FiY],[class xo{},new w.FiY]]},ms,{provide:Ii,useFactory:function _a(S){return S.routerState.root},deps:[ar]},Kl,ml,class no{preload(D,b){return b().pipe(he(()=>(0,qe.of)(null)))}},{provide:$a,useValue:{enableTracing:!1}}];function ql(){return new w.PXZ("Router",ar)}let Hs=(()=>{class S{constructor(b,M){}static forRoot(b,M){return{ngModule:S,providers:[_l,Yo(b),{provide:ro,useFactory:io,deps:[[ar,new w.FiY,new w.tp0]]},{provide:$a,useValue:M||{}},{provide:pr.S$,useFactory:Ar,deps:[pr.lw,[new w.tBr(pr.mr),new w.FiY],$a]},{provide:Ti,useFactory:qu,deps:[ar,pr.EM,$a]},{provide:du,useExisting:M&&M.preloadingStrategy?M.preloadingStrategy:ml},{provide:w.PXZ,multi:!0,useFactory:ql},[bu,{provide:w.ip1,multi:!0,useFactory:Zl,deps:[bu]},{provide:Pr,useFactory:mt,deps:[bu]},{provide:w.tb,multi:!0,useExisting:Pr}]]}}static forChild(b){return{ngModule:S,providers:[Yo(b)]}}}return S.\u0275fac=function(b){return new(b||S)(w.LFG(ro,8),w.LFG(ar,8))},S.\u0275mod=w.oAB({type:S}),S.\u0275inj=w.cJS({}),S})();function qu(S,D,b){return b.scrollOffset&&D.setOffset(b.scrollOffset),new Ti(S,D,b)}function Ar(S,D,b={}){return b.useHash?new pr.Do(S,D):new pr.b0(S,D)}function io(S){return"guarded"}function Yo(S){return[{provide:w.deG,multi:!0,useValue:S},{provide:Ba,multi:!0,useValue:S}]}let bu=(()=>{class S{constructor(b){this.injector=b,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ne.x}appInitializer(){return this.injector.get(pr.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let M=null;const N=new Promise(_e=>M=_e),W=this.injector.get(ar),ae=this.injector.get($a);return"disabled"===ae.initialNavigation?(W.setUpLocationChangeListener(),M(!0)):"enabled"===ae.initialNavigation||"enabledBlocking"===ae.initialNavigation?(W.hooks.afterPreactivation=()=>this.initNavigation?(0,qe.of)(null):(this.initNavigation=!0,M(!0),this.resultOfPreactivationDone),W.initialNavigation()):M(!0),N})}bootstrapListener(b){const M=this.injector.get($a),N=this.injector.get(Kl),W=this.injector.get(Ti),ae=this.injector.get(ar),_e=this.injector.get(w.z2F);b===_e.components[0]&&(("enabledNonBlocking"===M.initialNavigation||void 0===M.initialNavigation)&&ae.initialNavigation(),N.setUpPreloading(),W.init(),ae.resetRootComponentType(_e.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return S.\u0275fac=function(b){return new(b||S)(w.LFG(w.zs3))},S.\u0275prov=w.Yz7({token:S,factory:S.\u0275fac}),S})();function Zl(S){return S.appInitializer.bind(S)}function mt(S){return S.bootstrapListener.bind(S)}const Pr=new w.OlP("Router Initializer")},3942:(St,je,$)=>{$.d(je,{Z:()=>ot});var w=$(2090),ne=$(4859),te=$(9681),xe=$(1877);class Ee{constructor(Ye,at){this._delegate=Ye,this.firebase=at,(0,te._addComponent)(Ye,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=Ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ye){this._delegate.automaticDataCollectionEnabled=Ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ye=>{this._delegate.checkDestroyed(),Ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,te.deleteApp)(this._delegate)))}_getService(Ye,at=te._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const Tt=this._delegate.container.getProvider(Ye);return!Tt.isInitialized()&&"EXPLICIT"===(null===(Ie=Tt.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&Tt.initialize(),Tt.getImmediate({identifier:at})}_removeServiceInstance(Ye,at=te._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ye).clearInstance(at)}_addComponent(Ye){(0,te._addComponent)(this._delegate,Ye)}_addOrOverwriteComponent(Ye){(0,te._addOrOverwriteComponent)(this._delegate,Ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Le=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),fe=function Ne(){const It=function we(It){const Ye={},at={__esModule:!0,initializeApp:function rt(ft,oe={}){const et=te.initializeApp(ft,oe);if((0,w.r3)(Ye,et.name))return Ye[et.name];const he=new It(et,at);return Ye[et.name]=he,he},app:Tt,registerVersion:te.registerVersion,setLogLevel:te.setLogLevel,onLog:te.onLog,apps:null,SDK_VERSION:te.SDK_VERSION,INTERNAL:{registerComponent:function He(ft){const oe=ft.name,et=oe.replace("-compat","");if(te._registerComponent(ft)&&"PUBLIC"===ft.type){const he=(De=Tt())=>{if("function"!=typeof De[et])throw Le.create("invalid-app-argument",{appName:oe});return De[et]()};void 0!==ft.serviceProps&&(0,w.ZB)(he,ft.serviceProps),at[et]=he,It.prototype[et]=function(...De){return this._getService.bind(this,oe).apply(this,ft.multipleInstances?De:[])}}return"PUBLIC"===ft.type?at[et]:null},removeApp:function Ie(ft){delete Ye[ft]},useAsService:function qe(ft,oe){return"serverAuth"===oe?null:oe},modularAPIs:te}};function Tt(ft){if(!(0,w.r3)(Ye,ft=ft||te._DEFAULT_ENTRY_NAME))throw Le.create("no-app",{appName:ft});return Ye[ft]}return at.default=at,Object.defineProperty(at,"apps",{get:function Qe(){return Object.keys(Ye).map(ft=>Ye[ft])}}),Tt.App=It,at}(Ee);return It.INTERNAL=Object.assign(Object.assign({},It.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function Ye(at){(0,w.ZB)(It,at)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),It}(),de=new xe.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const It=self.firebase.SDK_VERSION;It&&It.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ot=fe;!function st(It){(0,te.registerVersion)("@firebase/app-compat","0.1.28",It)}()},9681:(St,je,$)=>{$.r(je),$.d(je,{FirebaseError:()=>xe.ZR,SDK_VERSION:()=>Lr,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>Qt,_addOrOverwriteComponent:()=>Yt,_apps:()=>en,_clearComponents:()=>pr,_components:()=>Zt,_getProvider:()=>nn,_registerComponent:()=>bn,_removeServiceInstance:()=>cn,deleteApp:()=>Ht,getApp:()=>Er,getApps:()=>Zn,initializeApp:()=>zn,onLog:()=>pn,registerVersion:()=>wn,setLogLevel:()=>as});var w=$(5861),ne=$(4859),te=$(1877),xe=$(2090),Ee=$(8766);class ye{constructor(le){this.container=le}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function Le(Se){const le=Se.getComponent();return"VERSION"===(null==le?void 0:le.type)}(Ke)){const vt=Ke.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(Ke=>Ke).join(" ")}}const we="@firebase/app",fe=new te.Yd("@firebase/app"),Bt="[DEFAULT]",tt={[we]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,Zt=new Map;function Qt(Se,le){try{Se.container.addComponent(le)}catch(Ke){fe.debug(`Component ${le.name} failed to register with FirebaseApp ${Se.name}`,Ke)}}function Yt(Se,le){Se.container.addOrOverwriteComponent(le)}function bn(Se){const le=Se.name;if(Zt.has(le))return fe.debug(`There were multiple attempts to register component ${le}.`),!1;Zt.set(le,Se);for(const Ke of en.values())Qt(Ke,Se);return!0}function nn(Se,le){const Ke=Se.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),Se.container.getProvider(le)}function cn(Se,le,Ke=Bt){nn(Se,le).clearInstance(Ke)}function pr(){Zt.clear()}const wr=new xe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class gr{constructor(le,Ke,vt){this._isDeleted=!1,this._options=Object.assign({},le),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this.checkDestroyed(),this._automaticDataCollectionEnabled=le}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(le){this._isDeleted=le}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const Lr="9.8.4";function zn(Se,le={}){"object"!=typeof le&&(le={name:le});const Ke=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},le),vt=Ke.name;if("string"!=typeof vt||!vt)throw wr.create("bad-app-name",{appName:String(vt)});const Pt=en.get(vt);if(Pt){if((0,xe.vZ)(Se,Pt.options)&&(0,xe.vZ)(Ke,Pt.config))return Pt;throw wr.create("duplicate-app",{appName:vt})}const tn=new ne.H0(vt);for(const Qn of Zt.values())tn.addComponent(Qn);const Yn=new gr(Se,Ke,tn);return en.set(vt,Yn),Yn}function Er(Se=Bt){const le=en.get(Se);if(!le)throw wr.create("no-app",{appName:Se});return le}function Zn(){return Array.from(en.values())}function Ht(Se){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,w.Z)(function*(Se){const le=Se.name;en.has(le)&&(en.delete(le),yield Promise.all(Se.container.getProviders().map(Ke=>Ke.delete())),Se.isDeleted=!0)})).apply(this,arguments)}function wn(Se,le,Ke){var vt;let Pt=null!==(vt=tt[Se])&&void 0!==vt?vt:Se;Ke&&(Pt+=`-${Ke}`);const tn=Pt.match(/\s|\//),Yn=le.match(/\s|\//);if(tn||Yn){const Qn=[`Unable to register library "${Pt}" with version "${le}":`];return tn&&Qn.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),tn&&Yn&&Qn.push("and"),Yn&&Qn.push(`version name "${le}" contains illegal characters (whitespace or "/")`),void fe.warn(Qn.join(" "))}bn(new ne.wA(`${Pt}-version`,()=>({library:Pt,version:le}),"VERSION"))}function pn(Se,le){if(null!==Se&&"function"!=typeof Se)throw wr.create("invalid-log-argument");(0,te.Am)(Se,le)}function as(Se){(0,te.Ub)(Se)}const kr="firebase-heartbeat-store";let vi=null;function _r(){return vi||(vi=(0,Ee.X3)("firebase-heartbeat-database",1,{upgrade:(Se,le)=>{0===le&&Se.createObjectStore(kr)}}).catch(Se=>{throw wr.create("storage-open",{originalErrorMessage:Se.message})})),vi}function jt(){return(jt=(0,w.Z)(function*(Se){var le;try{return(yield _r()).transaction(kr).objectStore(kr).get(qi(Se))}catch(Ke){throw wr.create("storage-get",{originalErrorMessage:null===(le=Ke)||void 0===le?void 0:le.message})}})).apply(this,arguments)}function Wt(Se,le){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,w.Z)(function*(Se,le){var Ke;try{const Pt=(yield _r()).transaction(kr,"readwrite");return yield Pt.objectStore(kr).put(le,qi(Se)),Pt.done}catch(vt){throw wr.create("storage-set",{originalErrorMessage:null===(Ke=vt)||void 0===Ke?void 0:Ke.message})}})).apply(this,arguments)}function qi(Se){return`${Se.name}!${Se.options.appId}`}class wi{constructor(le){this.container=le,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new Te(Ke),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var le=this;return(0,w.Z)(function*(){const vt=le.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=ur();if(null===le._heartbeatsCache&&(le._heartbeatsCache=yield le._heartbeatsCachePromise),le._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!le._heartbeatsCache.heartbeats.some(tn=>tn.date===Pt))return le._heartbeatsCache.heartbeats.push({date:Pt,agent:vt}),le._heartbeatsCache.heartbeats=le._heartbeatsCache.heartbeats.filter(tn=>{const Yn=new Date(tn.date).valueOf();return Date.now()-Yn<=2592e6}),le._storage.overwrite(le._heartbeatsCache)})()}getHeartbeatsHeader(){var le=this;return(0,w.Z)(function*(){if(null===le._heartbeatsCache&&(yield le._heartbeatsCachePromise),null===le._heartbeatsCache||0===le._heartbeatsCache.heartbeats.length)return"";const Ke=ur(),{heartbeatsToSend:vt,unsentEntries:Pt}=function Jt(Se,le=1024){const Ke=[];let vt=Se.slice();for(const Pt of Se){const tn=Ke.find(Yn=>Yn.agent===Pt.agent);if(tn){if(tn.dates.push(Pt.date),pe(Ke)>le){tn.dates.pop();break}}else if(Ke.push({agent:Pt.agent,dates:[Pt.date]}),pe(Ke)>le){Ke.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:vt}}(le._heartbeatsCache.heartbeats),tn=(0,xe.L)(JSON.stringify({version:2,heartbeats:vt}));return le._heartbeatsCache.lastSentHeartbeatDate=Ke,Pt.length>0?(le._heartbeatsCache.heartbeats=Pt,yield le._storage.overwrite(le._heartbeatsCache)):(le._heartbeatsCache.heartbeats=[],le._storage.overwrite(le._heartbeatsCache)),tn})()}}function ur(){return(new Date).toISOString().substring(0,10)}class Te{constructor(le){this.app=le,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,xe.hl)()&&(0,xe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var le=this;return(0,w.Z)(function*(){return(yield le._canUseIndexedDBPromise)&&(yield function Rt(Se){return jt.apply(this,arguments)}(le.app))||{heartbeats:[]}})()}overwrite(le){var Ke=this;return(0,w.Z)(function*(){var vt;if(yield Ke._canUseIndexedDBPromise){const tn=yield Ke.read();return Wt(Ke.app,{lastSentHeartbeatDate:null!==(vt=le.lastSentHeartbeatDate)&&void 0!==vt?vt:tn.lastSentHeartbeatDate,heartbeats:le.heartbeats})}})()}add(le){var Ke=this;return(0,w.Z)(function*(){var vt;if(yield Ke._canUseIndexedDBPromise){const tn=yield Ke.read();return Wt(Ke.app,{lastSentHeartbeatDate:null!==(vt=le.lastSentHeartbeatDate)&&void 0!==vt?vt:tn.lastSentHeartbeatDate,heartbeats:[...tn.heartbeats,...le.heartbeats]})}})()}}function pe(Se){return(0,xe.L)(JSON.stringify({version:2,heartbeats:Se})).length}!function ke(Se){bn(new ne.wA("platform-logger",le=>new ye(le),"PRIVATE")),bn(new ne.wA("heartbeat",le=>new wi(le),"PRIVATE")),wn(we,"0.7.27",Se),wn(we,"0.7.27","esm2017"),wn("fire-js","")}("")},4859:(St,je,$)=>{$.d(je,{wA:()=>te,H0:()=>we,zt:()=>Ee});var w=$(5861),ne=$(2090);class te{constructor(fe,de,Pe){this.name=fe,this.instanceFactory=de,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(fe){return this.instantiationMode=fe,this}setMultipleInstances(fe){return this.multipleInstances=fe,this}setServiceProps(fe){return this.serviceProps=fe,this}setInstanceCreatedCallback(fe){return this.onInstanceCreated=fe,this}}const xe="[DEFAULT]";class Ee{constructor(fe,de){this.name=fe,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(fe){const de=this.normalizeInstanceIdentifier(fe);if(!this.instancesDeferred.has(de)){const Pe=new ne.BH;if(this.instancesDeferred.set(de,Pe),this.isInitialized(de)||this.shouldAutoInitialize())try{const wt=this.getOrInitializeService({instanceIdentifier:de});wt&&Pe.resolve(wt)}catch(wt){}}return this.instancesDeferred.get(de).promise}getImmediate(fe){var de;const Pe=this.normalizeInstanceIdentifier(null==fe?void 0:fe.identifier),wt=null!==(de=null==fe?void 0:fe.optional)&&void 0!==de&&de;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(wt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(st){if(wt)return null;throw st}}getComponent(){return this.component}setComponent(fe){if(fe.name!==this.name)throw Error(`Mismatching Component ${fe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=fe,this.shouldAutoInitialize()){if(function Le(Ne){return"EAGER"===Ne.instantiationMode}(fe))try{this.getOrInitializeService({instanceIdentifier:xe})}catch(de){}for(const[de,Pe]of this.instancesDeferred.entries()){const wt=this.normalizeInstanceIdentifier(de);try{const st=this.getOrInitializeService({instanceIdentifier:wt});Pe.resolve(st)}catch(st){}}}}clearInstance(fe=xe){this.instancesDeferred.delete(fe),this.instancesOptions.delete(fe),this.instances.delete(fe)}delete(){var fe=this;return(0,w.Z)(function*(){const de=Array.from(fe.instances.values());yield Promise.all([...de.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...de.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(fe=xe){return this.instances.has(fe)}getOptions(fe=xe){return this.instancesOptions.get(fe)||{}}initialize(fe={}){const{options:de={}}=fe,Pe=this.normalizeInstanceIdentifier(fe.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const wt=this.getOrInitializeService({instanceIdentifier:Pe,options:de});for(const[st,ot]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(st)&&ot.resolve(wt);return wt}onInit(fe,de){var Pe;const wt=this.normalizeInstanceIdentifier(de),st=null!==(Pe=this.onInitCallbacks.get(wt))&&void 0!==Pe?Pe:new Set;st.add(fe),this.onInitCallbacks.set(wt,st);const ot=this.instances.get(wt);return ot&&fe(ot,wt),()=>{st.delete(fe)}}invokeOnInitCallbacks(fe,de){const Pe=this.onInitCallbacks.get(de);if(Pe)for(const wt of Pe)try{wt(fe,de)}catch(st){}}getOrInitializeService({instanceIdentifier:fe,options:de={}}){let Pe=this.instances.get(fe);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=fe,Ne===xe?void 0:Ne),options:de}),this.instances.set(fe,Pe),this.instancesOptions.set(fe,de),this.invokeOnInitCallbacks(Pe,fe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,fe,Pe)}catch(wt){}var Ne;return Pe||null}normalizeInstanceIdentifier(fe=xe){return this.component?this.component.multipleInstances?fe:xe:fe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class we{constructor(fe){this.name=fe,this.providers=new Map}addComponent(fe){const de=this.getProvider(fe.name);if(de.isComponentSet())throw new Error(`Component ${fe.name} has already been registered with ${this.name}`);de.setComponent(fe)}addOrOverwriteComponent(fe){this.getProvider(fe.name).isComponentSet()&&this.providers.delete(fe.name),this.addComponent(fe)}getProvider(fe){if(this.providers.has(fe))return this.providers.get(fe);const de=new Ee(fe,this);return this.providers.set(fe,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(St,je,$)=>{$.d(je,{in:()=>ne,Yd:()=>Le,Ub:()=>we,Am:()=>Ne});const w=[];var ne=(()=>{return(fe=ne||(ne={}))[fe.DEBUG=0]="DEBUG",fe[fe.VERBOSE=1]="VERBOSE",fe[fe.INFO=2]="INFO",fe[fe.WARN=3]="WARN",fe[fe.ERROR=4]="ERROR",fe[fe.SILENT=5]="SILENT",ne;var fe})();const te={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},xe=ne.INFO,Ee={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ye=(fe,de,...Pe)=>{if(de<fe.logLevel)return;const wt=(new Date).toISOString(),st=Ee[de];if(!st)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[st](`[${wt}]  ${fe.name}:`,...Pe)};class Le{constructor(de){this.name=de,this._logLevel=xe,this._logHandler=ye,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in ne))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?te[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...de),this._logHandler(this,ne.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...de),this._logHandler(this,ne.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...de),this._logHandler(this,ne.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...de),this._logHandler(this,ne.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...de),this._logHandler(this,ne.ERROR,...de)}}function we(fe){w.forEach(de=>{de.setLogLevel(fe)})}function Ne(fe,de){for(const Pe of w){let wt=null;de&&de.level&&(wt=te[de.level]),Pe.userLogHandler=null===fe?null:(st,ot,...It)=>{const Ye=It.map(at=>{if(null==at)return null;if("string"==typeof at)return at;if("number"==typeof at||"boolean"==typeof at)return at.toString();if(at instanceof Error)return at.message;try{return JSON.stringify(at)}catch(Ie){return null}}).filter(at=>at).join(" ");ot>=(null!=wt?wt:st.logLevel)&&fe({level:ne[ot].toLowerCase(),message:Ye,args:It,type:st.name})}}}},8766:(St,je,$)=>{$.d(je,{Lj:()=>rt,X3:()=>Tt});var w=$(5861);let te,xe;const Le=new WeakMap,we=new WeakMap,Ne=new WeakMap,fe=new WeakMap,de=new WeakMap;let st={get(oe,et,he){if(oe instanceof IDBTransaction){if("done"===et)return we.get(oe);if("objectStoreNames"===et)return oe.objectStoreNames||Ne.get(oe);if("store"===et)return he.objectStoreNames[1]?void 0:he.objectStore(he.objectStoreNames[0])}return at(oe[et])},set:(oe,et,he)=>(oe[et]=he,!0),has:(oe,et)=>oe instanceof IDBTransaction&&("done"===et||"store"===et)||et in oe};function Ye(oe){return"function"==typeof oe?function It(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return xe||(xe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...et){return oe.apply(Ie(this),et),at(Le.get(this))}:function(...et){return at(oe.apply(Ie(this),et))}:function(et,...he){const De=oe.call(Ie(this),et,...he);return Ne.set(De,et.sort?et.sort():[et]),at(De)}}(oe):(oe instanceof IDBTransaction&&function wt(oe){if(we.has(oe))return;const et=new Promise((he,De)=>{const Me=()=>{oe.removeEventListener("complete",ze),oe.removeEventListener("error",Ge),oe.removeEventListener("abort",Ge)},ze=()=>{he(),Me()},Ge=()=>{De(oe.error||new DOMException("AbortError","AbortError")),Me()};oe.addEventListener("complete",ze),oe.addEventListener("error",Ge),oe.addEventListener("abort",Ge)});we.set(oe,et)}(oe),((oe,et)=>et.some(he=>oe instanceof he))(oe,function Ee(){return te||(te=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,st):oe)}function at(oe){if(oe instanceof IDBRequest)return function Pe(oe){const et=new Promise((he,De)=>{const Me=()=>{oe.removeEventListener("success",ze),oe.removeEventListener("error",Ge)},ze=()=>{he(at(oe.result)),Me()},Ge=()=>{De(oe.error),Me()};oe.addEventListener("success",ze),oe.addEventListener("error",Ge)});return et.then(he=>{he instanceof IDBCursor&&Le.set(he,oe)}).catch(()=>{}),de.set(et,oe),et}(oe);if(fe.has(oe))return fe.get(oe);const et=Ye(oe);return et!==oe&&(fe.set(oe,et),de.set(et,oe)),et}const Ie=oe=>de.get(oe);function Tt(oe,et,{blocked:he,upgrade:De,blocking:Me,terminated:ze}={}){const Ge=indexedDB.open(oe,et),pt=at(Ge);return De&&Ge.addEventListener("upgradeneeded",bt=>{De(at(Ge.result),bt.oldVersion,bt.newVersion,at(Ge.transaction))}),he&&Ge.addEventListener("blocked",()=>he()),pt.then(bt=>{ze&&bt.addEventListener("close",()=>ze()),Me&&bt.addEventListener("versionchange",()=>Me())}).catch(()=>{}),pt}function rt(oe,{blocked:et}={}){const he=indexedDB.deleteDatabase(oe);return et&&he.addEventListener("blocked",()=>et()),at(he).then(()=>{})}const Qe=["get","getKey","getAll","getAllKeys","count"],He=["put","add","delete","clear"],qe=new Map;function ft(oe,et){if(!(oe instanceof IDBDatabase)||et in oe||"string"!=typeof et)return;if(qe.get(et))return qe.get(et);const he=et.replace(/FromIndex$/,""),De=et!==he,Me=He.includes(he);if(!(he in(De?IDBIndex:IDBObjectStore).prototype)||!Me&&!Qe.includes(he))return;const ze=function(){var Ge=(0,w.Z)(function*(pt,...bt){const $t=this.transaction(pt,Me?"readwrite":"readonly");let Bt=$t.store;return De&&(Bt=Bt.index(bt.shift())),(yield Promise.all([Bt[he](...bt),Me&&$t.done]))[0]});return function(bt){return Ge.apply(this,arguments)}}();return qe.set(et,ze),ze}!function ot(oe){st=oe(st)}(oe=>jw(Bw({},oe),{get:(et,he,De)=>ft(et,he)||oe.get(et,he,De),has:(et,he)=>!!ft(et,he)||oe.has(et,he)}))},5861:(St,je,$)=>{function w(te,xe,Ee,ye,Le,we,Ne){try{var fe=te[we](Ne),de=fe.value}catch(Pe){return void Ee(Pe)}fe.done?xe(de):Promise.resolve(de).then(ye,Le)}function ne(te){return function(){var xe=this,Ee=arguments;return new Promise(function(ye,Le){var we=te.apply(xe,Ee);function Ne(de){w(we,ye,Le,Ne,fe,"next",de)}function fe(de){w(we,ye,Le,Ne,fe,"throw",de)}Ne(void 0)})}}$.d(je,{Z:()=>ne})}},St=>{St(St.s=4759)}]);