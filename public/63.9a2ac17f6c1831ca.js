"use strict";(self.webpackChunkfirebaseapp=self.webpackChunkfirebaseapp||[]).push([[63],{3063:(Q,u,l)=>{l.r(u),l.d(u,{MealsModule:()=>O});var c=l(441),a=l(2382),s=l(9808),p=l(5861),e=l(5e3),d=l(4847),f=l(7078),g=l(307);function v(n,i){1&n&&(e.TgZ(0,"div"),e._uU(1," No meals, add a new meal to start "),e.qZA())}function h(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"list-item",8),e.NdJ("remove",function(r){return e.CHM(t),e.oxw(2).remove(r)}),e.qZA()}2&n&&e.Q6J("item",i.$implicit)}function M(n,i){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,v,2,0,"div",6),e.YNc(2,h,1,1,"list-item",7),e.qZA()),2&n){const t=i.ngIf;e.xp6(1),e.Q6J("ngIf",!t),e.xp6(1),e.Q6J("ngForOf",t)}}function x(n,i){1&n&&e._UZ(0,"div",9)}let b=(()=>{class n{constructor(t,o){this.mealService=t,this.store=o}ngOnInit(){this.meals$=this.store.select("meals"),this.subscription=this.mealService.meals$.subscribe(),console.log(this.meals$),this.mealService.meals$.subscribe()}ngOnDestroy(){this.subscription.unsubscribe()}remove(t){var o=this;return(0,p.Z)(function*(){yield o.mealService.removeMeal(t)})()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.Q),e.Y36(f.y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-meals"]],decls:10,vars:4,consts:[[1,"container"],[1,"row"],[1,"col-md-4","offset-md-4"],["routerLink","/meals/new",1,"btn","btn-primary"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[3,"item","remove",4,"ngFor","ngForOf"],[3,"item","remove"],[1,"skeleton-1pi0n81px78"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),e._uU(4,"Create New"),e.qZA(),e._UZ(5,"hr"),e.YNc(6,M,3,2,"div",4),e.ALo(7,"async"),e.YNc(8,x,1,0,"ng-template",null,5,e.W1O),e.qZA()()()),2&t){const r=e.MAs(9);e.xp6(6),e.Q6J("ngIf",e.lcZ(7,2,o.meals$))("ngIfElse",r)}},directives:[c.yS,s.O5,s.sg,g.G],pipes:[s.Ov],styles:[""]}),n})();var C=l(3900);function Z(n,i){1&n&&(e.TgZ(0,"div",13),e._uU(1,"Workout is required"),e.qZA())}function T(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"label",14),e._UZ(1,"input",15),e.TgZ(2,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw().addIngredient()}),e._UZ(3,"i",17),e.qZA(),e.TgZ(4,"button",18),e.NdJ("click",function(){const m=e.CHM(t).index;return e.oxw().removeIngredient(m)}),e._UZ(5,"i",19),e.qZA()()}if(2&n){const t=i.index;e.xp6(1),e.Q6J("formControlName",t)}}function y(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().createMeal()}),e._uU(1,"Create Meal"),e.qZA()}}function F(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateMeal()}),e._uU(1,"Save Meal"),e.qZA()}}function I(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",24)(1,"div",25)(2,"div",26),e._uU(3," Are you sure you want to delete this? "),e.qZA(),e.TgZ(4,"button",27),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).removeMeal()}),e._uU(5,"Yes"),e.qZA(),e.TgZ(6,"button",28),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).toggle()}),e._uU(7,"No"),e.qZA()()()}}function A(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.YNc(1,I,8,0,"div",22),e.TgZ(2,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggle()}),e._uU(3,"Delete"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.toggled)}}const N=function(){return["../"]};let k=(()=>{class n{constructor(t){this.fb=t,this.toggled=!1,this.exists=!1,this.mealFrom=new e.vpe,this.update=new e.vpe,this.create=new e.vpe,this.remove=new e.vpe,this.form=this.fb.group({name:["",a.kI.required],ingredients:this.fb.array([""])})}ngOnChanges(t){if(this.meal&&this.meal.name){this.exists=!0,this.emptyIngredients();const o=this.meal;if(this.form.patchValue(o),console.log(this.meal),o.ingredients)for(const r of o.ingredients)this.ingredients.push(new a.NI(r))}}emptyIngredients(){for(;this.ingredients.controls.length;)this.ingredients.removeAt(0)}addIngredient(){this.ingredients.push(new a.NI(""))}removeIngredient(t){this.ingredients.removeAt(t)}get ingredients(){return this.form.get("ingredients")}get required(){var t,o;return(null===(t=this.form.get("name"))||void 0===t?void 0:t.hasError("required"))&&(null===(o=this.form.get("name"))||void 0===o?void 0:o.touched)}createMeal(){this.form.valid&&this.mealFrom.emit(this.form.value)}removeMeal(){this.remove.emit(this.form.value)}updateMeal(){this.form.valid&&this.update.emit(this.form.value)}toggle(){this.toggled=!this.toggled}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(a.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["meal-form"]],inputs:{meal:"meal"},outputs:{mealFrom:"mealFrom",update:"update",create:"create",remove:"remove"},features:[e.TTD],decls:16,vars:8,consts:[[1,"my-4"],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","formControlName","name","placeholder","e.g English Breakfast",1,"form-control","my-3"],["class","alert alert-danger",4,"ngIf"],["formArrayName","ingredients",1,"form-group","my-4"],["class","d-flex my-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-between"],[1,"d-flex","align-items-center"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm",2,"margin-left","2px",3,"routerLink"],["class","d-flex",4,"ngIf"],[1,"alert","alert-danger"],[1,"d-flex","my-4"],["type","text",1,"form-control",3,"formControlName"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"bi-plus"],[1,"btn","btn-danger",3,"click"],[1,"bi-trash"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"d-flex"],["class","position-relative",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"position-relative"],[1,"position-absolute","top-100","start-0","alert","alert-info",2,"width","24vw"],[1,"mb-1"],["type","button",1,"btn","btn-danger","me-1","btn-sm",3,"click"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),e._uU(4,"Meal Name"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,Z,2,0,"div",5),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,T,6,1,"label",7),e.qZA(),e.TgZ(9,"div",8)(10,"div",9),e.YNc(11,y,2,0,"button",10),e.YNc(12,F,2,0,"button",10),e.TgZ(13,"button",11),e._uU(14,"Cancel"),e.qZA()(),e.YNc(15,A,4,1,"div",12),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngIf",o.required),e.xp6(2),e.Q6J("ngForOf",o.ingredients.controls),e.xp6(3),e.Q6J("ngIf",!o.exists),e.xp6(1),e.Q6J("ngIf",o.exists),e.xp6(1),e.Q6J("routerLink",e.DdM(7,N)),e.xp6(2),e.Q6J("ngIf",o.exists))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,s.O5,a.CE,s.sg,c.rH],styles:[""],changeDetection:0}),n})();function J(n,i){if(1&n&&(e.TgZ(0,"div",6),e._UZ(1,"i",7),e._uU(2),e.qZA()),2&n){const t=i.ngIf;e.xp6(2),e.hij(" ",t.name?"Edit":"Create"," meal ")}}function w(n,i){1&n&&(e.TgZ(0,"div",8)(1,"h4",9),e._uU(2,"Loading..."),e.qZA()())}function U(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"meal-form",10),e.NdJ("mealFrom",function(r){return e.CHM(t),e.oxw().addMeal(r)})("create",function(r){return e.CHM(t),e.oxw().addMeal(r)})("update",function(r){return e.CHM(t),e.oxw().updateMeal(r)})("remove",function(r){return e.CHM(t),e.oxw().removeMeal(r)}),e.qZA()()}if(2&n){const t=i.ngIf;e.xp6(1),e.Q6J("meal",t)}}function Y(n,i){1&n&&e._UZ(0,"div",11)}let _=(()=>{class n{constructor(t,o,r){this.mealService=t,this.router=o,this.route=r}ngOnDestroy(){}ngOnInit(){this.subscription=this.mealService.meals$.subscribe(),this.meal$=this.route.params.pipe((0,C.w)(t=>this.mealService.getMeal(t.id))),console.log(this.meal$)}addMeal(t){var o=this;return(0,p.Z)(function*(){yield o.mealService.addMeal(t),o.backToMeal()})()}removeMeal(t){var o=this;return(0,p.Z)(function*(){yield o.mealService.removeMeal(t),o.backToMeal()})()}updateMeal(t){var o=this;return(0,p.Z)(function*(){const r=o.route.snapshot.params.id;yield o.mealService.updateMeal(r,t),o.backToMeal()})()}backToMeal(){this.router.navigate(["/meals"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.Q),e.Y36(c.F0),e.Y36(c.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-meal"]],decls:10,vars:8,consts:[[1,"row"],[1,"col-md-4","offset-md-4"],["class","py-3 my-3 bg-light px-3 rounded-1",4,"ngIf","ngIfElse"],["title",""],[4,"ngIf","ngIfElse"],["loading",""],[1,"py-3","my-3","bg-light","px-3","rounded-1"],[1,"bi-heart-fill","text-danger"],[1,"bg-light","py-3","px-3","rounded-1"],[1,"text-dark"],[3,"meal","mealFrom","create","update","remove"],[1,"skeleton-1pi0n81px78","w-100"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,J,3,1,"div",2),e.ALo(3,"async"),e.YNc(4,w,3,0,"ng-template",null,3,e.W1O),e.YNc(6,U,2,1,"div",4),e.ALo(7,"async"),e.YNc(8,Y,1,0,"ng-template",null,5,e.W1O),e.qZA()()),2&t){const r=e.MAs(5),m=e.MAs(9);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,4,o.meal$))("ngIfElse",r),e.xp6(4),e.Q6J("ngIf",e.lcZ(7,6,o.meal$))("ngIfElse",m)}},directives:[s.O5,k],pipes:[s.Ov],styles:[""]}),n})();var q=l(4774);const E=[{path:"",component:b},{path:"new",component:_},{path:":id",component:_}];let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.ez,a.UX,c.Bz.forChild(E),q.m.forRoot()]]}),n})()}}]);