"use strict";var lC=Object.defineProperty,cC=Object.defineProperties,dC=Object.getOwnPropertyDescriptors,HE=Object.getOwnPropertySymbols,hC=Object.prototype.hasOwnProperty,fC=Object.prototype.propertyIsEnumerable,GE=(Ot,We,B)=>We in Ot?lC(Ot,We,{enumerable:!0,configurable:!0,writable:!0,value:B}):Ot[We]=B,WE=(Ot,We)=>{for(var B in We||(We={}))hC.call(We,B)&&GE(Ot,B,We[B]);if(HE)for(var B of HE(We))fC.call(We,B)&&GE(Ot,B,We[B]);return Ot},zE=(Ot,We)=>cC(Ot,dC(We));(self.webpackChunkfirebaseapp=self.webpackChunkfirebaseapp||[]).push([[179],{440:(Ot,We,B)=>{B.d(We,{nm:()=>bn});var _=B(5813);B(5e3),B(5867);var ht=B(5861),W=B(9681),Ge=B(4859),Et=B(2090),Ct=B(1877);const ue=new Map,lt={activated:!1,tokenObservers:[]},ge={initialized:!1,enabled:!1};function Fe(Ie){return ue.get(Ie)||lt}function Be(Ie,ve){ue.set(Ie,ve)}function Qe(){return ge}class nn{constructor(ve,je,st,Mt,Gt){if(this.operation=ve,this.retryPolicy=je,this.getWaitDuration=st,this.lowerBound=Mt,this.upperBound=Gt,this.pending=null,this.nextErrorWaitInterval=Mt,Mt>Gt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ve){var je=this;return(0,ht.Z)(function*(){je.stop();try{je.pending=new Et.BH,yield function un(Ie){return new Promise(ve=>{setTimeout(ve,Ie)})}(je.getNextRun(ve)),je.pending.resolve(),yield je.pending.promise,je.pending=new Et.BH,yield je.operation(),je.pending.resolve(),yield je.pending.promise,je.process(!0).catch(()=>{})}catch(st){je.retryPolicy(st)?je.process(!1).catch(()=>{}):je.stop()}})()}getNextRun(ve){if(ve)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),je}}}const Yt=new Et.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vt(Ie){if(!Fe(Ie).activated)throw Yt.create("use-before-activation",{appName:Ie.name})}function sr(Ie,ve){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,ht.Z)(function*({url:Ie,body:ve},je){var st,Mt;const Gt={"Content-Type":"application/json"},Zn=je.getImmediate({optional:!0});if(Zn){const $r=yield Zn.getHeartbeatsHeader();$r&&(Gt["X-Firebase-Client"]=$r)}const ai={method:"POST",body:JSON.stringify(ve),headers:Gt};let gn,Dn;try{gn=yield fetch(Ie,ai)}catch($r){throw Yt.create("fetch-network-error",{originalErrorMessage:null===(st=$r)||void 0===st?void 0:st.message})}if(200!==gn.status)throw Yt.create("fetch-status-error",{httpStatus:gn.status});try{Dn=yield gn.json()}catch($r){throw Yt.create("fetch-parse-error",{originalErrorMessage:null===(Mt=$r)||void 0===Mt?void 0:Mt.message})}const jr=Dn.ttl.match(/^([\d.]+)(s)$/);if(!jr||!jr[2]||isNaN(Number(jr[1])))throw Yt.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Dn.ttl}`});const yo=1e3*Number(jr[1]),Vi=Date.now();return{token:Dn.token,expireTimeMillis:Vi+yo,issuedAtTimeMillis:Vi}})).apply(this,arguments)}function Bn(Ie,ve){const{projectId:je,appId:st,apiKey:Mt}=Ie.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${je}/apps/${st}:exchangeDebugToken?key=${Mt}`,body:{debug_token:ve}}}const Qt="firebase-app-check-store";let rn=null;function yn(){return rn||(rn=new Promise((Ie,ve)=>{var je;try{const st=indexedDB.open("firebase-app-check-database",1);st.onsuccess=Mt=>{Ie(Mt.target.result)},st.onerror=Mt=>{var Gt;ve(Yt.create("storage-open",{originalErrorMessage:null===(Gt=Mt.target.error)||void 0===Gt?void 0:Gt.message}))},st.onupgradeneeded=Mt=>{0===Mt.oldVersion&&Mt.target.result.createObjectStore(Qt,{keyPath:"compositeKey"})}}catch(st){ve(Yt.create("storage-open",{originalErrorMessage:null===(je=st)||void 0===je?void 0:je.message}))}}),rn)}function vr(){return(vr=(0,ht.Z)(function*(Ie,ve){const st=(yield yn()).transaction(Qt,"readwrite"),Gt=st.objectStore(Qt).put({compositeKey:Ie,value:ve});return new Promise((Zn,ai)=>{Gt.onsuccess=gn=>{Zn()},st.onerror=gn=>{var Dn;ai(Yt.create("storage-set",{originalErrorMessage:null===(Dn=gn.target.error)||void 0===Dn?void 0:Dn.message}))}})})).apply(this,arguments)}const br=new Ct.Yd("@firebase/app-check");function vi(Ie,ve){return(0,Et.hl)()?function di(Ie,ve){return function hi(Ie,ve){return vr.apply(this,arguments)}(function an(Ie){return`${Ie.options.appId}-${Ie.name}`}(Ie),ve)}(Ie,ve).catch(je=>{br.warn(`Failed to write token to IndexedDB. Error: ${je}`)}):Promise.resolve()}function fn(){return Qe().enabled}function Oe(){return ye.apply(this,arguments)}function ye(){return(ye=(0,ht.Z)(function*(){const Ie=Qe();if(Ie.enabled&&Ie.token)return Ie.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ke={error:"UNKNOWN_ERROR"};function pe(Ie){return Et.US.encodeString(JSON.stringify(Ie),!1)}function qe(Ie){return St.apply(this,arguments)}function St(){return(St=(0,ht.Z)(function*(Ie,ve=!1){const je=Ie.app;Vt(je);const st=Fe(je);let Gt,Mt=st.token;if(!Mt){const gn=yield st.cachedTokenPromise;gn&&rr(gn)&&(Mt=gn)}if(!ve&&Mt&&rr(Mt))return{token:Mt.token};let ai,Zn=!1;if(fn()){st.exchangeTokenPromise||(st.exchangeTokenPromise=sr(Bn(je,yield Oe()),Ie.heartbeatServiceProvider).then(Dn=>(st.exchangeTokenPromise=void 0,Dn)),Zn=!0);const gn=yield st.exchangeTokenPromise;return yield vi(je,gn),Be(je,Object.assign(Object.assign({},st),{token:gn})),{token:gn.token}}try{st.exchangeTokenPromise||(st.exchangeTokenPromise=st.provider.getToken().then(gn=>(st.exchangeTokenPromise=void 0,gn)),Zn=!0),Mt=yield st.exchangeTokenPromise}catch(gn){"appCheck/throttled"===gn.code?br.warn(gn.message):br.error(gn),Gt=gn}return Mt?(ai={token:Mt.token},Be(je,Object.assign(Object.assign({},st),{token:Mt})),yield vi(je,Mt)):ai=zi(Gt),Zn&&hn(je,ai),ai})).apply(this,arguments)}function pn(Ie,ve){const je=Fe(Ie),st=je.tokenObservers.filter(Mt=>Mt.next!==ve);0===st.length&&je.tokenRefresher&&je.tokenRefresher.isRunning()&&je.tokenRefresher.stop(),Be(Ie,Object.assign(Object.assign({},je),{tokenObservers:st}))}function or(Ie){const{app:ve}=Ie,je=Fe(ve);let st=je.tokenRefresher;st||(st=function ar(Ie){const{app:ve}=Ie;return new nn((0,ht.Z)(function*(){let st;if(st=Fe(ve).token?yield qe(Ie,!0):yield qe(Ie),st.error)throw st.error}),()=>!0,()=>{const je=Fe(ve);if(je.token){let st=je.token.issuedAtTimeMillis+.5*(je.token.expireTimeMillis-je.token.issuedAtTimeMillis)+3e5;return st=Math.min(st,je.token.expireTimeMillis-3e5),Math.max(0,st-Date.now())}return 0},3e4,96e4)}(Ie),Be(ve,Object.assign(Object.assign({},je),{tokenRefresher:st}))),!st.isRunning()&&je.isTokenAutoRefreshEnabled&&st.start()}function hn(Ie,ve){const je=Fe(Ie).tokenObservers;for(const st of je)try{"EXTERNAL"===st.type&&null!=ve.error?st.error(ve.error):st.next(ve)}catch(Mt){}}function rr(Ie){return Ie.expireTimeMillis-Date.now()>0}function zi(Ie){return{token:pe(ke),error:Ie}}class qr{constructor(ve,je){this.app=ve,this.heartbeatServiceProvider=je}_delete(){const{tokenObservers:ve}=Fe(this.app);for(const je of ve)pn(this.app,je.next);return Promise.resolve()}}const de="app-check-internal";!function ze(){(0,W._registerComponent)(new Ge.wA("app-check",Ie=>function wi(Ie,ve){return new qr(Ie,ve)}(Ie.getProvider("app").getImmediate(),Ie.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Ie,ve,je)=>{Ie.getProvider(de).initialize()})),(0,W._registerComponent)(new Ge.wA(de,Ie=>function In(Ie){return{getToken:ve=>qe(Ie,ve),addTokenListener:ve=>function $t(Ie,ve,je,st){const{app:Mt}=Ie,Gt=Fe(Mt),Zn={next:je,error:st,type:ve};if(Be(Mt,Object.assign(Object.assign({},Gt),{tokenObservers:[...Gt.tokenObservers,Zn]})),Gt.token&&rr(Gt.token)){const ai=Gt.token;Promise.resolve().then(()=>{je({token:ai.token}),or(Ie)}).catch(()=>{})}Gt.cachedTokenPromise.then(()=>or(Ie))}(Ie,"INTERNAL",ve),removeTokenListener:ve=>pn(Ie.app,ve)}}(Ie.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,W.registerVersion)("@firebase/app-check","0.5.10")}();class bn{constructor(){return(0,_.vb)("app-check")}}"undefined"!=typeof window&&window},1205:(Ot,We,B)=>{B.d(We,{zQ:()=>Ze,ww:()=>wt,rT:()=>ge,f7:()=>Be,L6:()=>ue,_Q:()=>lt,lh:()=>Fe,Qv:()=>Ct,nw:()=>Qe});var _=B(5e3),te=B(7579),ie=B(9646),Se=B(8306),De=B(8996),Re=B(6451),Ve=B(6063);class Me extends te.x{constructor(en=1/0,Wt=1/0,it=Ve.l){super(),this._bufferSize=en,this._windowTime=Wt,this._timestampProvider=it,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Wt===1/0,this._bufferSize=Math.max(1,en),this._windowTime=Math.max(1,Wt)}next(en){const{isStopped:Wt,_buffer:it,_infiniteTimeWindow:nn,_timestampProvider:un,_windowTime:Bt}=this;Wt||(it.push(en),!nn&&it.push(un.now()+Bt)),this._trimBuffer(),super.next(en)}_subscribe(en){this._throwIfClosed(),this._trimBuffer();const Wt=this._innerSubscribe(en),{_infiniteTimeWindow:it,_buffer:nn}=this,un=nn.slice();for(let Bt=0;Bt<un.length&&!en.closed;Bt+=it?1:2)en.next(un[Bt]);return this._checkFinalizedStatuses(en),Wt}_trimBuffer(){const{_bufferSize:en,_timestampProvider:Wt,_buffer:it,_infiniteTimeWindow:nn}=this,un=(nn?1:2)*en;if(en<1/0&&un<it.length&&it.splice(0,it.length-un),!nn){const Bt=Wt.now();let Yt=0;for(let Mn=1;Mn<it.length&&it[Mn]<=Bt;Mn+=2)Yt=Mn;Yt&&it.splice(0,Yt+1)}}}var Ue=B(3099);function ce(Nt,en,Wt){let it,nn=!1;return Nt&&"object"==typeof Nt?({bufferSize:it=1/0,windowTime:en=1/0,refCount:nn=!1,scheduler:Wt}=Nt):it=null!=Nt?Nt:1/0,(0,Ue.B)({connector:()=>new Me(it,en,Wt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:nn})}var oe=B(3900),Ne=B(576);function Tt(Nt,en){return(0,Ne.m)(en)?(0,oe.w)(()=>Nt,en):(0,oe.w)(()=>Nt)}var at=B(5363),Xe=B(4004),gt=B(590),tt=B(9468),pt=B(9300),xe=B(5813),kt=B(2011),ht=B(9808),W=B(440),Ge=B(127);const Ct=new _.OlP("angularfire2.auth.use-emulator"),ue=new _.OlP("angularfire2.auth.settings"),lt=new _.OlP("angularfire2.auth.tenant-id"),ge=new _.OlP("angularfire2.auth.langugage-code"),Fe=new _.OlP("angularfire2.auth.use-device-language"),Be=new _.OlP("angularfire.auth.persistence"),Qe=(Nt,en,Wt,it,nn,un,Bt,Yt)=>(0,kt.cc)(`${Nt.name}.auth`,"AngularFireAuth",Nt.name,()=>{const Mn=en.runOutsideAngular(()=>Nt.auth());if(Wt&&Mn.useEmulator(...Wt),it&&(Mn.tenantId=it),Mn.languageCode=nn,un&&Mn.useDeviceLanguage(),Bt)for(const[Vt,tn]of Object.entries(Bt))Mn.settings[Vt]=tn;return Yt&&Mn.setPersistence(Yt),Mn},[Wt,it,nn,un,Bt,Yt]);let Ze=(()=>{class Nt{constructor(Wt,it,nn,un,Bt,Yt,Mn,Vt,tn,Cr,sr,Pr){const Xn=new te.x,fr=(0,ie.of)(void 0).pipe((0,at.Q)(Bt.outsideAngular),(0,oe.w)(()=>un.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,3677)))),(0,Xe.U)(()=>(0,kt.on)(Wt,un,it)),(0,Xe.U)(Bn=>Qe(Bn,un,Yt,Vt,tn,Cr,Mn,sr)),ce({bufferSize:1,refCount:!1}));if((0,ht.PM)(nn))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ie.of)(null);else{fr.pipe((0,gt.P)()).subscribe();const Sr=fr.pipe((0,oe.w)(kn=>kn.getRedirectResult().then(rn=>rn,()=>null)),xe.iC,ce({bufferSize:1,refCount:!1})),Yn=fr.pipe((0,oe.w)(kn=>new Se.y(rn=>({unsubscribe:un.runOutsideAngular(()=>kn.onAuthStateChanged(yn=>rn.next(yn),yn=>rn.error(yn),()=>rn.complete()))})))),Qt=fr.pipe((0,oe.w)(kn=>new Se.y(rn=>({unsubscribe:un.runOutsideAngular(()=>kn.onIdTokenChanged(yn=>rn.next(yn),yn=>rn.error(yn),()=>rn.complete()))}))));this.authState=Sr.pipe(Tt(Yn),(0,tt.R)(Bt.outsideAngular),(0,at.Q)(Bt.insideAngular)),this.user=Sr.pipe(Tt(Qt),(0,tt.R)(Bt.outsideAngular),(0,at.Q)(Bt.insideAngular)),this.idToken=this.user.pipe((0,oe.w)(kn=>kn?(0,De.D)(kn.getIdToken()):(0,ie.of)(null))),this.idTokenResult=this.user.pipe((0,oe.w)(kn=>kn?(0,De.D)(kn.getIdTokenResult()):(0,ie.of)(null))),this.credential=(0,Re.T)(Sr,Xn,this.authState.pipe((0,pt.h)(kn=>!kn))).pipe((0,Xe.U)(kn=>(null==kn?void 0:kn.user)?kn:null),(0,tt.R)(Bt.outsideAngular),(0,at.Q)(Bt.insideAngular))}return(0,kt.pX)(this,fr,un,{spy:{apply:(Bn,Sr,Yn)=>{(Bn.startsWith("signIn")||Bn.startsWith("createUser"))&&Yn.then(Qt=>Xn.next(Qt))}}})}}return Nt.\u0275fac=function(Wt){return new(Wt||Nt)(_.LFG(kt.Dh),_.LFG(kt.xv,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(xe.HU),_.LFG(Ct,8),_.LFG(ue,8),_.LFG(lt,8),_.LFG(ge,8),_.LFG(Fe,8),_.LFG(Be,8),_.LFG(W.nm,8))},Nt.\u0275prov=_.Yz7({token:Nt,factory:Nt.\u0275fac,providedIn:"any"}),Nt})(),wt=(()=>{class Nt{constructor(){Ge.Z.registerVersion("angularfire",xe.q4.full,"auth-compat")}}return Nt.\u0275fac=function(Wt){return new(Wt||Nt)},Nt.\u0275mod=_.oAB({type:Nt}),Nt.\u0275inj=_.cJS({providers:[Ze]}),Nt})()},1903:(Ot,We,B)=>{B.d(We,{KQ:()=>Fu,JS:()=>sd});var _=B(5e3),te=B(4986),ie=B(8306),Se=B(9646),De=B(6451),Re=B(4482),Ve=B(5403),Ue=B(4004),ce=B(3099),oe=B(3900),Ne=B(5026),Tt=B(1884),at=B(1365),Xe=B(5813),gt=B(2011),pt=(B(3677),B(3942)),xe=B(4859),kt=B(5861),ht=B(9681),W=B(2090),Ge=B(1877);const Et="@firebase/database";let ue="";function lt(d){ue=d}class ge{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,l){null==l?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,W.Pz)(l))}get(u){const l=this.domStorage_.getItem(this.prefixedName_(u));return null==l?null:(0,W.cI)(l)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Fe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,l){null==l?delete this.cache_[u]:this.cache_[u]=l}get(u){return(0,W.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const Be=function(d){try{if("undefined"!=typeof window&&void 0!==window[d]){const u=window[d];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new ge(u)}}catch(u){}return new Fe},Qe=Be("localStorage"),Ze=Be("sessionStorage"),wt=new Ge.Yd("@firebase/database"),Nt=function(){let d=1;return function(){return d++}}(),en=function(d){const u=(0,W.dS)(d),l=new W.gQ;l.update(u);const g=l.digest();return W.US.encodeByteArray(g)},Wt=function(...d){let u="";for(let l=0;l<d.length;l++){const g=d[l];Array.isArray(g)||g&&"object"==typeof g&&"number"==typeof g.length?u+=Wt.apply(null,g):u+="object"==typeof g?(0,W.Pz)(g):g,u+=" "}return u};let it=null,nn=!0;const un=function(d,u){(0,W.hu)(!u||!0===d||!1===d,"Can't turn on custom loggers persistently."),!0===d?(wt.logLevel=Ge.in.VERBOSE,it=wt.log.bind(wt),u&&Ze.set("logging_enabled",!0)):"function"==typeof d?it=d:(it=null,Ze.remove("logging_enabled"))},Bt=function(...d){if(!0===nn&&(nn=!1,null===it&&!0===Ze.get("logging_enabled")&&un(!0)),it){const u=Wt.apply(null,d);it(u)}},Yt=function(d){return function(...u){Bt(d,...u)}},Mn=function(...d){const u="FIREBASE INTERNAL ERROR: "+Wt(...d);wt.error(u)},Vt=function(...d){const u=`FIREBASE FATAL ERROR: ${Wt(...d)}`;throw wt.error(u),new Error(u)},tn=function(...d){const u="FIREBASE WARNING: "+Wt(...d);wt.warn(u)},sr=function(d){return"number"==typeof d&&(d!=d||d===Number.POSITIVE_INFINITY||d===Number.NEGATIVE_INFINITY)},Xn="[MIN_NAME]",fr="[MAX_NAME]",Bn=function(d,u){if(d===u)return 0;if(d===Xn||u===fr)return-1;if(u===Xn||d===fr)return 1;{const l=Lt(d),g=Lt(u);return null!==l?null!==g?l-g==0?d.length-u.length:l-g:-1:null!==g?1:d<u?-1:1}},Sr=function(d,u){return d===u?0:d<u?-1:1},Yn=function(d,u){if(u&&d in u)return u[d];throw new Error("Missing required key ("+d+") in object: "+(0,W.Pz)(u))},Qt=function(d){if("object"!=typeof d||null===d)return(0,W.Pz)(d);const u=[];for(const g in d)u.push(g);u.sort();let l="{";for(let g=0;g<u.length;g++)0!==g&&(l+=","),l+=(0,W.Pz)(u[g]),l+=":",l+=Qt(d[u[g]]);return l+="}",l},kn=function(d,u){const l=d.length;if(l<=u)return[d];const g=[];for(let C=0;C<l;C+=u)g.push(d.substring(C,C+u>l?l:C+u));return g};function rn(d,u){for(const l in d)d.hasOwnProperty(l)&&u(l,d[l])}const yn=function(d){(0,W.hu)(!sr(d),"Invalid JSON number");const g=1023;let C,M,$,ee,le;0===d?(M=0,$=0,C=1/d==-1/0?1:0):(C=d<0,(d=Math.abs(d))>=Math.pow(2,1-g)?(ee=Math.min(Math.floor(Math.log(d)/Math.LN2),g),M=ee+g,$=Math.round(d*Math.pow(2,52-ee)-Math.pow(2,52))):(M=0,$=Math.round(d/Math.pow(2,-1074))));const Ee=[];for(le=52;le;le-=1)Ee.push($%2?1:0),$=Math.floor($/2);for(le=11;le;le-=1)Ee.push(M%2?1:0),M=Math.floor(M/2);Ee.push(C?1:0),Ee.reverse();const rt=Ee.join("");let ut="";for(le=0;le<64;le+=8){let Dt=parseInt(rt.substr(le,8),2).toString(16);1===Dt.length&&(Dt="0"+Dt),ut+=Dt}return ut.toLowerCase()},zr=new RegExp("^-?(0*)\\d{1,10}$"),hi=-2147483648,vr=2147483647,Lt=function(d){if(zr.test(d)){const u=Number(d);if(u>=hi&&u<=vr)return u}return null},qt=function(d){try{d()}catch(u){setTimeout(()=>{throw tn("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},br=function(d,u){const l=setTimeout(d,u);return"object"==typeof l&&l.unref&&l.unref(),l};class Si{constructor(u,l){this.appName_=u,this.appCheckProvider=l,this.appCheck=null==l?void 0:l.getImmediate({optional:!0}),this.appCheck||null==l||l.get().then(g=>this.appCheck=g)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((l,g)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(l,g):l(null)},0)})}addTokenChangeListener(u){var l;null===(l=this.appCheckProvider)||void 0===l||l.get().then(g=>g.addTokenListener(u))}notifyForInvalidToken(){tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class wn{constructor(u,l,g){this.appName_=u,this.firebaseOptions_=l,this.authProvider_=g,this.auth_=null,this.auth_=g.getImmediate({optional:!0}),this.auth_||g.onInit(C=>this.auth_=C)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(l=>l&&"auth/token-not-initialized"===l.code?(Bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(l)):new Promise((l,g)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(l,g):l(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(l=>l.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(l=>l.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tn(u)}}let vi=(()=>{class d{constructor(l){this.accessToken=l}getToken(l){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(l){l(this.accessToken)}removeTokenChangeListener(l){}notifyForInvalidToken(){}}return d.OWNER="owner",d})();const He=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,St="websocket",$t="long_polling";class pn{constructor(u,l,g,C,M=!1,$="",ee=!1){this.secure=l,this.namespace=g,this.webSocketOnly=C,this.nodeAdmin=M,this.persistenceKey=$,this.includeNamespaceInQueryParams=ee,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Qe.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&Qe.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ar(d,u,l){let g;if((0,W.hu)("string"==typeof u,"typeof type must == string"),(0,W.hu)("object"==typeof l,"typeof params must == object"),u===St)g=(d.secure?"wss://":"ws://")+d.internalHost+"/.ws?";else{if(u!==$t)throw new Error("Unknown connection type: "+u);g=(d.secure?"https://":"http://")+d.internalHost+"/.lp?"}(function or(d){return d.host!==d.internalHost||d.isCustomHost()||d.includeNamespaceInQueryParams})(d)&&(l.ns=d.namespace);const C=[];return rn(l,(M,$)=>{C.push(M+"="+$)}),g+C.join("&")}class hn{constructor(){this.counters_={}}incrementCounter(u,l=1){(0,W.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=l}get(){return(0,W.p$)(this.counters_)}}const rr={},zi={};function qr(d){const u=d.toString();return rr[u]||(rr[u]=new hn),rr[u]}class In{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,l){this.closeAfterResponse=u,this.onClose=l,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,l){for(this.pendingResponses[u]=l;this.pendingResponses[this.currentResponseNum];){const g=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let C=0;C<g.length;++C)g[C]&&qt(()=>{this.onMessage_(g[C])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ur{constructor(u,l,g,C,M,$,ee){this.connId=u,this.repoInfo=l,this.applicationId=g,this.appCheckToken=C,this.authToken=M,this.transportSessionId=$,this.lastSessionId=ee,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Yt(u),this.stats_=qr(l),this.urlFn=le=>(this.appCheckToken&&(le.ac=this.appCheckToken),ar(l,$t,le))}open(u,l){this.curSegmentNum=0,this.onDisconnect_=l,this.myPacketOrderer=new In(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(d){if((0,W.Yr)()||"complete"===document.readyState)d();else{let u=!1;const l=function(){document.body?u||(u=!0,d()):setTimeout(l,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",l,!1),window.addEventListener("load",l,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&l()}),window.attachEvent("onload",l))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Li((...M)=>{const[$,ee,le,Ee,rt]=M;if(this.incrementIncomingBytes_(M),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===$)this.id=ee,this.password=le;else{if("close"!==$)throw new Error("Unrecognized command received: "+$);ee?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ee,()=>{this.onClosed_()})):this.onClosed_()}},(...M)=>{const[$,ee]=M;this.incrementIncomingBytes_(M),this.myPacketOrderer.handleResponse($,ee)},()=>{this.onClosed_()},this.urlFn);const g={start:"t"};g.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(g.cb=this.scriptTagHolder.uniqueCallbackIdentifier),g.v="5",this.transportSessionId&&(g.s=this.transportSessionId),this.lastSessionId&&(g.ls=this.lastSessionId),this.applicationId&&(g.p=this.applicationId),this.appCheckToken&&(g.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&He.test(location.hostname)&&(g.r="f");const C=this.urlFn(g);this.log_("Connecting via long-poll to "+C),this.scriptTagHolder.addTag(C,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ur.forceAllow_=!0}static forceDisallow(){ur.forceDisallow_=!0}static isAvailable(){return!((0,W.Yr)()||!ur.forceAllow_&&(ur.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const l=(0,W.Pz)(u);this.bytesSent+=l.length,this.stats_.incrementCounter("bytes_sent",l.length);const g=(0,W.h$)(l),C=kn(g,1840);for(let M=0;M<C.length;M++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,C.length,C[M]),this.curSegmentNum++}addDisconnectPingFrame(u,l){if((0,W.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const g={dframe:"t"};g.id=u,g.pw=l,this.myDisconnFrame.src=this.urlFn(g),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const l=(0,W.Pz)(u).length;this.bytesReceived+=l,this.stats_.incrementCounter("bytes_received",l)}}class Li{constructor(u,l,g,C){if(this.onDisconnect=g,this.urlFn=C,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,W.Yr)())this.commandCB=u,this.onMessageCB=l;else{this.uniqueCallbackIdentifier=Nt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=l,this.myIFrame=Li.createIFrame_();let M="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(M='<script>document.domain="'+document.domain+'";<\/script>');const $="<html><body>"+M+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write($),this.myIFrame.doc.close()}catch(ee){Bt("frame writing exception"),ee.stack&&Bt(ee.stack),Bt(ee)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Bt("No IE domain setting required")}catch(l){const g=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+g+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,l){for(this.myID=u,this.myPW=l,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let l=this.urlFn(u),g="",C=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+g.length<=1870;){const $=this.pendingSegs.shift();g=g+"&seg"+C+"="+$.seg+"&ts"+C+"="+$.ts+"&d"+C+"="+$.d,C++}return l+=g,this.addLongPollTag_(l,this.currentSerial),!0}return!1}enqueueSegment(u,l,g){this.pendingSegs.push({seg:u,ts:l,d:g}),this.alive&&this.newRequest_()}addLongPollTag_(u,l){this.outstandingRequests.add(l);const g=()=>{this.outstandingRequests.delete(l),this.newRequest_()},C=setTimeout(g,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(C),g()})}addTag(u,l){(0,W.Yr)()?this.doNodeLongPoll(u,l):setTimeout(()=>{try{if(!this.sendNewPolls)return;const g=this.myIFrame.doc.createElement("script");g.type="text/javascript",g.async=!0,g.src=u,g.onload=g.onreadystatechange=function(){const C=g.readyState;(!C||"loaded"===C||"complete"===C)&&(g.onload=g.onreadystatechange=null,g.parentNode&&g.parentNode.removeChild(g),l())},g.onerror=()=>{Bt("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(g)}catch(g){}},Math.floor(1))}}let gr=null;"undefined"!=typeof MozWebSocket?gr=MozWebSocket:"undefined"!=typeof WebSocket&&(gr=WebSocket);let En=(()=>{class d{constructor(l,g,C,M,$,ee,le){this.connId=l,this.applicationId=C,this.appCheckToken=M,this.authToken=$,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Yt(this.connId),this.stats_=qr(g),this.connURL=d.connectionURL_(g,ee,le,M,C),this.nodeAdmin=g.nodeAdmin}static connectionURL_(l,g,C,M,$){const ee={v:"5"};return!(0,W.Yr)()&&"undefined"!=typeof location&&location.hostname&&He.test(location.hostname)&&(ee.r="f"),g&&(ee.s=g),C&&(ee.ls=C),M&&(ee.ac=M),$&&(ee.p=$),ar(l,St,ee)}open(l,g){this.onDisconnect=g,this.onMessage=l,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Qe.set("previous_websocket_failure",!0);try{let C;if((0,W.Yr)()){const $={headers:{"User-Agent":`Firebase/5/${ue}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&($.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&($.headers["X-Firebase-AppCheck"]=this.appCheckToken);const ee=process.env,le=0===this.connURL.indexOf("wss://")?ee.HTTPS_PROXY||ee.https_proxy:ee.HTTP_PROXY||ee.http_proxy;le&&($.proxy={origin:le})}this.mySock=new gr(this.connURL,[],C)}catch(C){this.log_("Error instantiating WebSocket.");const M=C.message||C.data;return M&&this.log_(M),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=C=>{this.handleIncomingFrame(C)},this.mySock.onerror=C=>{this.log_("WebSocket error.  Closing connection.");const M=C.message||C.data;M&&this.log_(M),this.onClosed_()}}start(){}static forceDisallow(){d.forceDisallow_=!0}static isAvailable(){let l=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const C=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);C&&C.length>1&&parseFloat(C[1])<4.4&&(l=!0)}return!l&&null!==gr&&!d.forceDisallow_}static previouslyFailed(){return Qe.isInMemoryStorage||!0===Qe.get("previous_websocket_failure")}markConnectionHealthy(){Qe.remove("previous_websocket_failure")}appendFrame_(l){if(this.frames.push(l),this.frames.length===this.totalFrames){const g=this.frames.join("");this.frames=null;const C=(0,W.cI)(g);this.onMessage(C)}}handleNewFrameCount_(l){this.totalFrames=l,this.frames=[]}extractFrameCount_(l){if((0,W.hu)(null===this.frames,"We already have a frame buffer"),l.length<=6){const g=Number(l);if(!isNaN(g))return this.handleNewFrameCount_(g),null}return this.handleNewFrameCount_(1),l}handleIncomingFrame(l){if(null===this.mySock)return;const g=l.data;if(this.bytesReceived+=g.length,this.stats_.incrementCounter("bytes_received",g.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(g);else{const C=this.extractFrameCount_(g);null!==C&&this.appendFrame_(C)}}send(l){this.resetKeepAlive();const g=(0,W.Pz)(l);this.bytesSent+=g.length,this.stats_.incrementCounter("bytes_sent",g.length);const C=kn(g,16384);C.length>1&&this.sendString_(String(C.length));for(let M=0;M<C.length;M++)this.sendString_(C[M])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(l){try{this.mySock.send(l)}catch(g){this.log_("Exception thrown from WebSocket.send():",g.message||g.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return d.responsesRequiredToBeHealthy=2,d.healthyTimeout=3e4,d})(),Ce=(()=>{class d{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[ur,En]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(l){const g=En&&En.isAvailable();let C=g&&!En.previouslyFailed();if(l.webSocketOnly&&(g||tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),C=!0),C)this.transports_=[En];else{const M=this.transports_=[];for(const $ of d.ALL_TRANSPORTS)$&&$.isAvailable()&&M.push($);d.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return d.globalTransportInitialized_=!1,d})();class Ci{constructor(u,l,g,C,M,$,ee,le,Ee,rt){this.id=u,this.repoInfo_=l,this.applicationId_=g,this.appCheckToken_=C,this.authToken_=M,this.onMessage_=$,this.onReady_=ee,this.onDisconnect_=le,this.onKill_=Ee,this.lastSessionId=rt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Yt("c:"+this.id+":"),this.transportManager_=new Ce(l),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.conn_),g=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(l,g)},Math.floor(0));const C=u.healthyTimeout||0;C>0&&(this.healthyTimeout_=br(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(C)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return l=>{u===this.conn_?this.onConnectionLost_(l):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return l=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(l):u===this.secondaryConn_?this.onSecondaryMessageReceived_(l):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const l=u.t;"a"===l?this.upgradeIfSecondaryHealthy_():"r"===l?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===l&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const l=Yn("t",u),g=Yn("d",u);if("c"===l)this.onSecondaryControl_(g);else{if("d"!==l)throw new Error("Unknown protocol layer: "+l);this.pendingDataMessages.push(g)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const l=Yn("t",u),g=Yn("d",u);"c"===l?this.onControl_(g):"d"===l&&this.onDataMessage_(g)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const l=Yn("t",u);if("d"in u){const g=u.d;if("h"===l)this.onHandshake_(g);else if("n"===l){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let C=0;C<this.pendingDataMessages.length;++C)this.onDataMessage_(this.pendingDataMessages[C]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===l?this.onConnectionShutdown_(g):"r"===l?this.onReset_(g):"e"===l?Mn("Server Error: "+g):"o"===l?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Mn("Unknown control packet command: "+l)}}onHandshake_(u){const l=u.ts,g=u.v,C=u.h;this.sessionId=u.s,this.repoInfo_.host=C,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,l),"5"!==g&&tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const l=this.connReceiver_(this.secondaryConn_),g=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(l,g),br(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,l){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(l,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):br(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Qe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class is{put(u,l,g,C){}merge(u,l,g,C){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,l,g){}onDisconnectMerge(u,l,g){}onDisconnectCancel(u,l){}reportStats(u){}}class to{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,W.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...l){if(Array.isArray(this.listeners_[u])){const g=[...this.listeners_[u]];for(let C=0;C<g.length;C++)g[C].callback.apply(g[C].context,l)}}on(u,l,g){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:l,context:g});const C=this.getInitialEvent(u);C&&l.apply(g,C)}off(u,l,g){this.validateEventType_(u);const C=this.listeners_[u]||[];for(let M=0;M<C.length;M++)if(C[M].callback===l&&(!g||g===C[M].context))return void C.splice(M,1)}validateEventType_(u){(0,W.hu)(this.allowedEvents_.find(l=>l===u),"Unknown event: "+u)}}class ss extends to{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,W.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ss}getInitialEvent(u){return(0,W.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class qn{constructor(u,l){if(void 0===l){this.pieces_=u.split("/");let g=0;for(let C=0;C<this.pieces_.length;C++)this.pieces_[C].length>0&&(this.pieces_[g]=this.pieces_[C],g++);this.pieces_.length=g,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=l}toString(){let u="";for(let l=this.pieceNum_;l<this.pieces_.length;l++)""!==this.pieces_[l]&&(u+="/"+this.pieces_[l]);return u||"/"}}function Ie(){return new qn("")}function ve(d){return d.pieceNum_>=d.pieces_.length?null:d.pieces_[d.pieceNum_]}function je(d){return d.pieces_.length-d.pieceNum_}function st(d){let u=d.pieceNum_;return u<d.pieces_.length&&u++,new qn(d.pieces_,u)}function Mt(d){return d.pieceNum_<d.pieces_.length?d.pieces_[d.pieces_.length-1]:null}function Zn(d,u=0){return d.pieces_.slice(d.pieceNum_+u)}function ai(d){if(d.pieceNum_>=d.pieces_.length)return null;const u=[];for(let l=d.pieceNum_;l<d.pieces_.length-1;l++)u.push(d.pieces_[l]);return new qn(u,0)}function gn(d,u){const l=[];for(let g=d.pieceNum_;g<d.pieces_.length;g++)l.push(d.pieces_[g]);if(u instanceof qn)for(let g=u.pieceNum_;g<u.pieces_.length;g++)l.push(u.pieces_[g]);else{const g=u.split("/");for(let C=0;C<g.length;C++)g[C].length>0&&l.push(g[C])}return new qn(l,0)}function Dn(d){return d.pieceNum_>=d.pieces_.length}function jr(d,u){const l=ve(d),g=ve(u);if(null===l)return u;if(l===g)return jr(st(d),st(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+d+")")}function yo(d,u){const l=Zn(d,0),g=Zn(u,0);for(let C=0;C<l.length&&C<g.length;C++){const M=Bn(l[C],g[C]);if(0!==M)return M}return l.length===g.length?0:l.length<g.length?-1:1}function Vi(d,u){if(je(d)!==je(u))return!1;for(let l=d.pieceNum_,g=u.pieceNum_;l<=d.pieces_.length;l++,g++)if(d.pieces_[l]!==u.pieces_[g])return!1;return!0}function $r(d,u){let l=d.pieceNum_,g=u.pieceNum_;if(je(d)>je(u))return!1;for(;l<d.pieces_.length;){if(d.pieces_[l]!==u.pieces_[g])return!1;++l,++g}return!0}class _s{constructor(u,l){this.errorPrefix_=l,this.parts_=Zn(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let g=0;g<this.parts_.length;g++)this.byteLength_+=(0,W.ug)(this.parts_[g]);Ro(this)}}function Ro(d){if(d.byteLength_>768)throw new Error(d.errorPrefix_+"has a key path longer than 768 bytes ("+d.byteLength_+").");if(d.parts_.length>32)throw new Error(d.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Or(d))}function Or(d){return 0===d.parts_.length?"":"in property '"+d.parts_.join(".")+"'"}class Ki extends to{constructor(){let u,l;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(l="visibilitychange",u="hidden"):void 0!==document.mozHidden?(l="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(l="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(l="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,l&&document.addEventListener(l,()=>{const g=!document[u];g!==this.visible_&&(this.visible_=g,this.trigger("visible",g))},!1)}static getInstance(){return new Ki}getInitialEvent(u){return(0,W.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Ri=1e3;let ui,os=(()=>{class d extends is{constructor(l,g,C,M,$,ee,le,Ee){if(super(),this.repoInfo_=l,this.applicationId_=g,this.onDataUpdate_=C,this.onConnectStatus_=M,this.onServerInfoUpdate_=$,this.authTokenProvider_=ee,this.appCheckTokenProvider_=le,this.authOverride_=Ee,this.id=d.nextPersistentConnectionId_++,this.log_=Yt("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ri,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Ee&&!(0,W.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ki.getInstance().on("visible",this.onVisible_,this),-1===l.host.indexOf("fblocal")&&ss.getInstance().on("online",this.onOnline_,this)}sendRequest(l,g,C){const M=++this.requestNumber_,$={r:M,a:l,b:g};this.log_((0,W.Pz)($)),(0,W.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest($),C&&(this.requestCBHash_[M]=C)}get(l){this.initConnection_();const g=new W.BH,M={action:"g",request:{p:l._path.toString(),q:l._queryObject},onComplete:ee=>{const le=ee.d;"ok"===ee.s?g.resolve(le):g.reject(le)}};this.outstandingGets_.push(M),this.outstandingGetCount_++;const $=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const ee=this.outstandingGets_[$];void 0===ee||M!==ee||(delete this.outstandingGets_[$],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+$+" timed out on connection"),g.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_($),g.promise}listen(l,g,C,M){this.initConnection_();const $=l._queryIdentifier,ee=l._path.toString();this.log_("Listen called for "+ee+" "+$),this.listens.has(ee)||this.listens.set(ee,new Map),(0,W.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,W.hu)(!this.listens.get(ee).has($),"listen() called twice for same path/queryId.");const le={onComplete:M,hashFn:g,query:l,tag:C};this.listens.get(ee).set($,le),this.connected_&&this.sendListen_(le)}sendGet_(l){const g=this.outstandingGets_[l];this.sendRequest("g",g.request,C=>{delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),g.onComplete&&g.onComplete(C)})}sendListen_(l){const g=l.query,C=g._path.toString(),M=g._queryIdentifier;this.log_("Listen on "+C+" for "+M);const $={p:C};l.tag&&($.q=g._queryObject,$.t=l.tag),$.h=l.hashFn(),this.sendRequest("q",$,le=>{const Ee=le.d,rt=le.s;d.warnOnListenWarnings_(Ee,g),(this.listens.get(C)&&this.listens.get(C).get(M))===l&&(this.log_("listen response",le),"ok"!==rt&&this.removeListen_(C,M),l.onComplete&&l.onComplete(rt,Ee))})}static warnOnListenWarnings_(l,g){if(l&&"object"==typeof l&&(0,W.r3)(l,"w")){const C=(0,W.DV)(l,"w");if(Array.isArray(C)&&~C.indexOf("no_index")){const M='".indexOn": "'+g._queryParams.getIndex().toString()+'"',$=g._path.toString();tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${M} at ${$} to your security rules for better performance.`)}}}refreshAuthToken(l){this.authToken_=l,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(l)}reduceReconnectDelayIfAdminCredential_(l){(l&&40===l.length||(0,W.GJ)(l))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(l){this.appCheckToken_=l,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const l=this.authToken_,g=(0,W.w9)(l)?"auth":"gauth",C={cred:l};null===this.authOverride_?C.noauth=!0:"object"==typeof this.authOverride_&&(C.authvar=this.authOverride_),this.sendRequest(g,C,M=>{const $=M.s,ee=M.d||"error";this.authToken_===l&&("ok"===$?this.invalidAuthTokenCount_=0:this.onAuthRevoked_($,ee))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},l=>{const g=l.s,C=l.d||"error";"ok"===g?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(g,C)})}unlisten(l,g){const C=l._path.toString(),M=l._queryIdentifier;this.log_("Unlisten called for "+C+" "+M),(0,W.hu)(l._queryParams.isDefault()||!l._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(C,M)&&this.connected_&&this.sendUnlisten_(C,M,l._queryObject,g)}sendUnlisten_(l,g,C,M){this.log_("Unlisten on "+l+" for "+g);const $={p:l};M&&($.q=C,$.t=M),this.sendRequest("n",$)}onDisconnectPut(l,g,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",l,g,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"o",data:g,onComplete:C})}onDisconnectMerge(l,g,C){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",l,g,C):this.onDisconnectRequestQueue_.push({pathString:l,action:"om",data:g,onComplete:C})}onDisconnectCancel(l,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",l,null,g):this.onDisconnectRequestQueue_.push({pathString:l,action:"oc",data:null,onComplete:g})}sendOnDisconnect_(l,g,C,M){const $={p:g,d:C};this.log_("onDisconnect "+l,$),this.sendRequest(l,$,ee=>{M&&setTimeout(()=>{M(ee.s,ee.d)},Math.floor(0))})}put(l,g,C,M){this.putInternal("p",l,g,C,M)}merge(l,g,C,M){this.putInternal("m",l,g,C,M)}putInternal(l,g,C,M,$){this.initConnection_();const ee={p:g,d:C};void 0!==$&&(ee.h=$),this.outstandingPuts_.push({action:l,request:ee,onComplete:M}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+g)}sendPut_(l){const g=this.outstandingPuts_[l].action,C=this.outstandingPuts_[l].request,M=this.outstandingPuts_[l].onComplete;this.outstandingPuts_[l].queued=this.connected_,this.sendRequest(g,C,$=>{this.log_(g+" response",$),delete this.outstandingPuts_[l],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),M&&M($.s,$.d)})}reportStats(l){if(this.connected_){const g={c:l};this.log_("reportStats",g),this.sendRequest("s",g,C=>{"ok"!==C.s&&this.log_("reportStats","Error sending stats: "+C.d)})}}onDataMessage_(l){if("r"in l){this.log_("from server: "+(0,W.Pz)(l));const g=l.r,C=this.requestCBHash_[g];C&&(delete this.requestCBHash_[g],C(l.b))}else{if("error"in l)throw"A server-side error has occurred: "+l.error;"a"in l&&this.onDataPush_(l.a,l.b)}}onDataPush_(l,g){this.log_("handleServerMessage",l,g),"d"===l?this.onDataUpdate_(g.p,g.d,!1,g.t):"m"===l?this.onDataUpdate_(g.p,g.d,!0,g.t):"c"===l?this.onListenRevoked_(g.p,g.q):"ac"===l?this.onAuthRevoked_(g.s,g.d):"apc"===l?this.onAppCheckRevoked_(g.s,g.d):"sd"===l?this.onSecurityDebugPacket_(g):Mn("Unrecognized action received from server: "+(0,W.Pz)(l)+"\nAre you using the latest client?")}onReady_(l,g){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(l),this.lastSessionId=g,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(l){(0,W.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(l))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(l){l&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ri,this.realtime_||this.scheduleConnect_(0)),this.visible_=l}onOnline_(l){l?(this.log_("Browser went online."),this.reconnectDelay_=Ri,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ri),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const l=(new Date).getTime()-this.lastConnectionAttemptTime_;let g=Math.max(0,this.reconnectDelay_-l);g=Math.random()*g,this.log_("Trying to reconnect in "+g+"ms"),this.scheduleConnect_(g),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var l=this;return(0,kt.Z)(function*(){if(l.shouldReconnect_()){l.log_("Making a connection attempt"),l.lastConnectionAttemptTime_=(new Date).getTime(),l.lastConnectionEstablishedTime_=null;const g=l.onDataMessage_.bind(l),C=l.onReady_.bind(l),M=l.onRealtimeDisconnect_.bind(l),$=l.id+":"+d.nextConnectionId_++,ee=l.lastSessionId;let le=!1,Ee=null;const rt=function(){Ee?Ee.close():(le=!0,M())};l.realtime_={close:rt,sendRequest:function(mn){(0,W.hu)(Ee,"sendRequest call when we're not connected not allowed."),Ee.sendRequest(mn)}};const Dt=l.forceTokenRefresh_;l.forceTokenRefresh_=!1;try{const[mn,Vn]=yield Promise.all([l.authTokenProvider_.getToken(Dt),l.appCheckTokenProvider_.getToken(Dt)]);le?Bt("getToken() completed but was canceled"):(Bt("getToken() completed. Creating connection."),l.authToken_=mn&&mn.accessToken,l.appCheckToken_=Vn&&Vn.token,Ee=new Ci($,l.repoInfo_,l.applicationId_,l.appCheckToken_,l.authToken_,g,C,M,_i=>{tn(_i+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},ee))}catch(mn){l.log_("Failed to get token: "+mn),le||(l.repoInfo_.nodeAdmin&&tn(mn),rt())}}})()}interrupt(l){Bt("Interrupting connection for reason: "+l),this.interruptReasons_[l]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(l){Bt("Resuming connection for reason: "+l),delete this.interruptReasons_[l],(0,W.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ri,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(l){const g=l-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:g})}cancelSentTransactions_(){for(let l=0;l<this.outstandingPuts_.length;l++){const g=this.outstandingPuts_[l];g&&"h"in g.request&&g.queued&&(g.onComplete&&g.onComplete("disconnect"),delete this.outstandingPuts_[l],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(l,g){let C;C=g?g.map($=>Qt($)).join("$"):"default";const M=this.removeListen_(l,C);M&&M.onComplete&&M.onComplete("permission_denied")}removeListen_(l,g){const C=new qn(l).toString();let M;if(this.listens.has(C)){const $=this.listens.get(C);M=$.get(g),$.delete(g),0===$.size&&this.listens.delete(C)}else M=void 0;return M}onAuthRevoked_(l,g){Bt("Auth token revoked: "+l+"/"+g),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===l||"permission_denied"===l)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(l,g){Bt("App check token revoked: "+l+"/"+g),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===l||"permission_denied"===l)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(l){this.securityDebugCallback_?this.securityDebugCallback_(l):"msg"in l&&console.log("FIREBASE: "+l.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const l of this.listens.values())for(const g of l.values())this.sendListen_(g);for(let l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){const l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(let l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)}sendConnectStats_(){const l={};let g="js";(0,W.Yr)()&&(g=this.repoInfo_.nodeAdmin?"admin_node":"node"),l["sdk."+g+"."+ue.replace(/\./g,"-")]=1,(0,W.uI)()?l["framework.cordova"]=1:(0,W.b$)()&&(l["framework.reactnative"]=1),this.reportStats(l)}shouldReconnect_(){const l=ss.getInstance().currentlyOnline();return(0,W.xb)(this.interruptReasons_)&&l}}return d.nextPersistentConnectionId_=0,d.nextConnectionId_=0,d})();class _n{constructor(u,l){this.name=u,this.node=l}static Wrap(u,l){return new _n(u,l)}}class as{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,l){const g=new _n(Xn,u),C=new _n(Xn,l);return 0!==this.compare(g,C)}minPost(){return _n.MIN}}class Eo extends as{static get __EMPTY_NODE(){return ui}static set __EMPTY_NODE(u){ui=u}compare(u,l){return Bn(u.name,l.name)}isDefinedOn(u){throw(0,W.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,l){return!1}minPost(){return _n.MIN}maxPost(){return new _n(fr,ui)}makePost(u,l){return(0,W.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new _n(u,ui)}toString(){return".key"}}const ti=new Eo;class Ms{constructor(u,l,g,C,M=null){this.isReverse_=C,this.resultGenerator_=M,this.nodeStack_=[];let $=1;for(;!u.isEmpty();)if(u=u,$=l?g(u.key,l):1,C&&($*=-1),$<0)u=this.isReverse_?u.left:u.right;else{if(0===$){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let l,u=this.nodeStack_.pop();if(l=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return l}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let U,ni=(()=>{class d{constructor(l,g,C,M,$){this.key=l,this.value=g,this.color=null!=C?C:d.RED,this.left=null!=M?M:Jr.EMPTY_NODE,this.right=null!=$?$:Jr.EMPTY_NODE}copy(l,g,C,M,$){return new d(null!=l?l:this.key,null!=g?g:this.value,null!=C?C:this.color,null!=M?M:this.left,null!=$?$:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(l){return this.left.inorderTraversal(l)||!!l(this.key,this.value)||this.right.inorderTraversal(l)}reverseTraversal(l){return this.right.reverseTraversal(l)||l(this.key,this.value)||this.left.reverseTraversal(l)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(l,g,C){let M=this;const $=C(l,M.key);return M=$<0?M.copy(null,null,null,M.left.insert(l,g,C),null):0===$?M.copy(null,g,null,null,null):M.copy(null,null,null,null,M.right.insert(l,g,C)),M.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jr.EMPTY_NODE;let l=this;return!l.left.isRed_()&&!l.left.left.isRed_()&&(l=l.moveRedLeft_()),l=l.copy(null,null,null,l.left.removeMin_(),null),l.fixUp_()}remove(l,g){let C,M;if(C=this,g(l,C.key)<0)!C.left.isEmpty()&&!C.left.isRed_()&&!C.left.left.isRed_()&&(C=C.moveRedLeft_()),C=C.copy(null,null,null,C.left.remove(l,g),null);else{if(C.left.isRed_()&&(C=C.rotateRight_()),!C.right.isEmpty()&&!C.right.isRed_()&&!C.right.left.isRed_()&&(C=C.moveRedRight_()),0===g(l,C.key)){if(C.right.isEmpty())return Jr.EMPTY_NODE;M=C.right.min_(),C=C.copy(M.key,M.value,null,null,C.right.removeMin_())}C=C.copy(null,null,null,null,C.right.remove(l,g))}return C.fixUp_()}isRed_(){return this.color}fixUp_(){let l=this;return l.right.isRed_()&&!l.left.isRed_()&&(l=l.rotateLeft_()),l.left.isRed_()&&l.left.left.isRed_()&&(l=l.rotateRight_()),l.left.isRed_()&&l.right.isRed_()&&(l=l.colorFlip_()),l}moveRedLeft_(){let l=this.colorFlip_();return l.right.left.isRed_()&&(l=l.copy(null,null,null,null,l.right.rotateRight_()),l=l.rotateLeft_(),l=l.colorFlip_()),l}moveRedRight_(){let l=this.colorFlip_();return l.left.left.isRed_()&&(l=l.rotateRight_(),l=l.colorFlip_()),l}rotateLeft_(){const l=this.copy(null,null,d.RED,null,this.right.left);return this.right.copy(null,null,this.color,l,null)}rotateRight_(){const l=this.copy(null,null,d.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,l)}colorFlip_(){const l=this.left.copy(null,null,!this.left.color,null,null),g=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,l,g)}checkMaxDepth_(){const l=this.check_();return Math.pow(2,l)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const l=this.left.check_();if(l!==this.right.check_())throw new Error("Black depths differ");return l+(this.isRed_()?0:1)}}return d.RED=!0,d.BLACK=!1,d})();class Jr{constructor(u,l=Jr.EMPTY_NODE){this.comparator_=u,this.root_=l}insert(u,l){return new Jr(this.comparator_,this.root_.insert(u,l,this.comparator_).copy(null,null,ni.BLACK,null,null))}remove(u){return new Jr(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,ni.BLACK,null,null))}get(u){let l,g=this.root_;for(;!g.isEmpty();){if(l=this.comparator_(u,g.key),0===l)return g.value;l<0?g=g.left:l>0&&(g=g.right)}return null}getPredecessorKey(u){let l,g=this.root_,C=null;for(;!g.isEmpty();){if(l=this.comparator_(u,g.key),0===l){if(g.left.isEmpty())return C?C.key:null;for(g=g.left;!g.right.isEmpty();)g=g.right;return g.key}l<0?g=g.left:l>0&&(C=g,g=g.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Ms(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,l){return new Ms(this.root_,u,this.comparator_,!1,l)}getReverseIteratorFrom(u,l){return new Ms(this.root_,u,this.comparator_,!0,l)}getReverseIterator(u){return new Ms(this.root_,null,this.comparator_,!0,u)}}function ro(d,u){return Bn(d.name,u.name)}function tr(d,u){return Bn(d,u)}Jr.EMPTY_NODE=new class Es{copy(u,l,g,C,M){return this}insert(u,l,g){return new ni(u,l,null)}remove(u,l){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const V=function(d){return"number"==typeof d?"number:"+yn(d):"string:"+d},ne=function(d){if(d.isLeafNode()){const u=d.val();(0,W.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,W.r3)(u,".sv"),"Priority must be a string or number.")}else(0,W.hu)(d===U||d.isEmpty(),"priority of unexpected type.");(0,W.hu)(d===U||d.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let _e,mt,ln,et=(()=>{class d{constructor(l,g=d.__childrenNodeConstructor.EMPTY_NODE){this.value_=l,this.priorityNode_=g,this.lazyHash_=null,(0,W.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ne(this.priorityNode_)}static set __childrenNodeConstructor(l){_e=l}static get __childrenNodeConstructor(){return _e}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(l){return new d(this.value_,l)}getImmediateChild(l){return".priority"===l?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}getChild(l){return Dn(l)?this:".priority"===ve(l)?this.priorityNode_:d.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(l,g){return null}updateImmediateChild(l,g){return".priority"===l?this.updatePriority(g):g.isEmpty()&&".priority"!==l?this:d.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(l,g).updatePriority(this.priorityNode_)}updateChild(l,g){const C=ve(l);return null===C?g:g.isEmpty()&&".priority"!==C?this:((0,W.hu)(".priority"!==C||1===je(l),".priority must be the last token in a path"),this.updateImmediateChild(C,d.__childrenNodeConstructor.EMPTY_NODE.updateChild(st(l),g)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(l,g){return!1}val(l){return l&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let l="";this.priorityNode_.isEmpty()||(l+="priority:"+V(this.priorityNode_.val())+":");const g=typeof this.value_;l+=g+":",l+="number"===g?yn(this.value_):this.value_,this.lazyHash_=en(l)}return this.lazyHash_}getValue(){return this.value_}compareTo(l){return l===d.__childrenNodeConstructor.EMPTY_NODE?1:l instanceof d.__childrenNodeConstructor?-1:((0,W.hu)(l.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(l))}compareToLeafNode_(l){const g=typeof l.value_,C=typeof this.value_,M=d.VALUE_TYPE_ORDER.indexOf(g),$=d.VALUE_TYPE_ORDER.indexOf(C);return(0,W.hu)(M>=0,"Unknown leaf type: "+g),(0,W.hu)($>=0,"Unknown leaf type: "+C),M===$?"object"===C?0:this.value_<l.value_?-1:this.value_===l.value_?0:1:$-M}withIndex(){return this}isIndexed(){return!0}equals(l){if(l===this)return!0;if(l.isLeafNode()){const g=l;return this.value_===g.value_&&this.priorityNode_.equals(g.priorityNode_)}return!1}}return d.VALUE_TYPE_ORDER=["object","boolean","number","string"],d})();const cn=new class jn extends as{compare(u,l){const g=u.node.getPriority(),C=l.node.getPriority(),M=g.compareTo(C);return 0===M?Bn(u.name,l.name):M}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,l){return!u.getPriority().equals(l.getPriority())}minPost(){return _n.MIN}maxPost(){return new _n(fr,new et("[PRIORITY-POST]",ln))}makePost(u,l){const g=mt(u);return new _n(l,new et("[PRIORITY-POST]",g))}toString(){return".priority"}},Xr=Math.log(2);class Ar{constructor(u){this.count=parseInt(Math.log(u+1)/Xr,10),this.current_=this.count-1;const C=(M=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&C}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const kr=function(d,u,l,g){d.sort(u);const C=function(le,Ee){const rt=Ee-le;let ut,Dt;if(0===rt)return null;if(1===rt)return ut=d[le],Dt=l?l(ut):ut,new ni(Dt,ut.node,ni.BLACK,null,null);{const mn=parseInt(rt/2,10)+le,Vn=C(le,mn),_i=C(mn+1,Ee);return ut=d[mn],Dt=l?l(ut):ut,new ni(Dt,ut.node,ni.BLACK,Vn,_i)}},ee=function(le){let Ee=null,rt=null,ut=d.length;const Dt=function(Vn,_i){const Ds=ut-Vn,Ql=ut;ut-=Vn;const La=C(Ds+1,Ql),Pl=d[Ds],rl=l?l(Pl):Pl;mn(new ni(rl,Pl.node,_i,null,La))},mn=function(Vn){Ee?(Ee.left=Vn,Ee=Vn):(rt=Vn,Ee=Vn)};for(let Vn=0;Vn<le.count;++Vn){const _i=le.nextBitIsOne(),Ds=Math.pow(2,le.count-(Vn+1));_i?Dt(Ds,ni.BLACK):(Dt(Ds,ni.BLACK),Dt(Ds,ni.RED))}return rt}(new Ar(d.length));return new Jr(g||u,ee)};let Ui;const Hr={};class Jt{constructor(u,l){this.indexes_=u,this.indexSet_=l}static get Default(){return(0,W.hu)(Hr&&cn,"ChildrenNode.ts has not been loaded"),Ui=Ui||new Jt({".priority":Hr},{".priority":cn}),Ui}get(u){const l=(0,W.DV)(this.indexes_,u);if(!l)throw new Error("No index defined for "+u);return l instanceof Jr?l:null}hasIndex(u){return(0,W.r3)(this.indexSet_,u.toString())}addIndex(u,l){(0,W.hu)(u!==ti,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const g=[];let C=!1;const M=l.getIterator(_n.Wrap);let ee,$=M.getNext();for(;$;)C=C||u.isDefinedOn($.node),g.push($),$=M.getNext();ee=C?kr(g,u.getCompare()):Hr;const le=u.toString(),Ee=Object.assign({},this.indexSet_);Ee[le]=u;const rt=Object.assign({},this.indexes_);return rt[le]=ee,new Jt(rt,Ee)}addToIndexes(u,l){const g=(0,W.UI)(this.indexes_,(C,M)=>{const $=(0,W.DV)(this.indexSet_,M);if((0,W.hu)($,"Missing index implementation for "+M),C===Hr){if($.isDefinedOn(u.node)){const ee=[],le=l.getIterator(_n.Wrap);let Ee=le.getNext();for(;Ee;)Ee.name!==u.name&&ee.push(Ee),Ee=le.getNext();return ee.push(u),kr(ee,$.getCompare())}return Hr}{const ee=l.get(u.name);let le=C;return ee&&(le=le.remove(new _n(u.name,ee))),le.insert(u,u.node)}});return new Jt(g,this.indexSet_)}removeFromIndexes(u,l){const g=(0,W.UI)(this.indexes_,C=>{if(C===Hr)return C;{const M=l.get(u.name);return M?C.remove(new _n(u.name,M)):C}});return new Jt(g,this.indexSet_)}}let qi,Nn=(()=>{class d{constructor(l,g,C){this.children_=l,this.priorityNode_=g,this.indexMap_=C,this.lazyHash_=null,this.priorityNode_&&ne(this.priorityNode_),this.children_.isEmpty()&&(0,W.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return qi||(qi=new d(new Jr(tr),null,Jt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||qi}updatePriority(l){return this.children_.isEmpty()?this:new d(this.children_,l,this.indexMap_)}getImmediateChild(l){if(".priority"===l)return this.getPriority();{const g=this.children_.get(l);return null===g?qi:g}}getChild(l){const g=ve(l);return null===g?this:this.getImmediateChild(g).getChild(st(l))}hasChild(l){return null!==this.children_.get(l)}updateImmediateChild(l,g){if((0,W.hu)(g,"We should always be passing snapshot nodes"),".priority"===l)return this.updatePriority(g);{const C=new _n(l,g);let M,$;g.isEmpty()?(M=this.children_.remove(l),$=this.indexMap_.removeFromIndexes(C,this.children_)):(M=this.children_.insert(l,g),$=this.indexMap_.addToIndexes(C,this.children_));const ee=M.isEmpty()?qi:this.priorityNode_;return new d(M,ee,$)}}updateChild(l,g){const C=ve(l);if(null===C)return g;{(0,W.hu)(".priority"!==ve(l)||1===je(l),".priority must be the last token in a path");const M=this.getImmediateChild(C).updateChild(st(l),g);return this.updateImmediateChild(C,M)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(l){if(this.isEmpty())return null;const g={};let C=0,M=0,$=!0;if(this.forEachChild(cn,(ee,le)=>{g[ee]=le.val(l),C++,$&&d.INTEGER_REGEXP_.test(ee)?M=Math.max(M,Number(ee)):$=!1}),!l&&$&&M<2*C){const ee=[];for(const le in g)ee[le]=g[le];return ee}return l&&!this.getPriority().isEmpty()&&(g[".priority"]=this.getPriority().val()),g}hash(){if(null===this.lazyHash_){let l="";this.getPriority().isEmpty()||(l+="priority:"+V(this.getPriority().val())+":"),this.forEachChild(cn,(g,C)=>{const M=C.hash();""!==M&&(l+=":"+g+":"+M)}),this.lazyHash_=""===l?"":en(l)}return this.lazyHash_}getPredecessorChildName(l,g,C){const M=this.resolveIndex_(C);if(M){const $=M.getPredecessorKey(new _n(l,g));return $?$.name:null}return this.children_.getPredecessorKey(l)}getFirstChildName(l){const g=this.resolveIndex_(l);if(g){const C=g.minKey();return C&&C.name}return this.children_.minKey()}getFirstChild(l){const g=this.getFirstChildName(l);return g?new _n(g,this.children_.get(g)):null}getLastChildName(l){const g=this.resolveIndex_(l);if(g){const C=g.maxKey();return C&&C.name}return this.children_.maxKey()}getLastChild(l){const g=this.getLastChildName(l);return g?new _n(g,this.children_.get(g)):null}forEachChild(l,g){const C=this.resolveIndex_(l);return C?C.inorderTraversal(M=>g(M.name,M.node)):this.children_.inorderTraversal(g)}getIterator(l){return this.getIteratorFrom(l.minPost(),l)}getIteratorFrom(l,g){const C=this.resolveIndex_(g);if(C)return C.getIteratorFrom(l,M=>M);{const M=this.children_.getIteratorFrom(l.name,_n.Wrap);let $=M.peek();for(;null!=$&&g.compare($,l)<0;)M.getNext(),$=M.peek();return M}}getReverseIterator(l){return this.getReverseIteratorFrom(l.maxPost(),l)}getReverseIteratorFrom(l,g){const C=this.resolveIndex_(g);if(C)return C.getReverseIteratorFrom(l,M=>M);{const M=this.children_.getReverseIteratorFrom(l.name,_n.Wrap);let $=M.peek();for(;null!=$&&g.compare($,l)>0;)M.getNext(),$=M.peek();return M}}compareTo(l){return this.isEmpty()?l.isEmpty()?0:-1:l.isLeafNode()||l.isEmpty()?1:l===ds?-1:0}withIndex(l){if(l===ti||this.indexMap_.hasIndex(l))return this;{const g=this.indexMap_.addIndex(l,this.children_);return new d(this.children_,this.priorityNode_,g)}}isIndexed(l){return l===ti||this.indexMap_.hasIndex(l)}equals(l){if(l===this)return!0;if(l.isLeafNode())return!1;{const g=l;if(this.getPriority().equals(g.getPriority())){if(this.children_.count()===g.children_.count()){const C=this.getIterator(cn),M=g.getIterator(cn);let $=C.getNext(),ee=M.getNext();for(;$&&ee;){if($.name!==ee.name||!$.node.equals(ee.node))return!1;$=C.getNext(),ee=M.getNext()}return null===$&&null===ee}return!1}return!1}}resolveIndex_(l){return l===ti?null:this.indexMap_.get(l.toString())}}return d.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,d})();const ds=new class io extends Nn{constructor(){super(new Jr(tr),Nn.EMPTY_NODE,Jt.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return Nn.EMPTY_NODE}isEmpty(){return!1}};function L(d,u=null){if(null===d)return Nn.EMPTY_NODE;if("object"==typeof d&&".priority"in d&&(u=d[".priority"]),(0,W.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof d&&".value"in d&&null!==d[".value"]&&(d=d[".value"]),"object"!=typeof d||".sv"in d)return new et(d,L(u));if(d instanceof Array){let l=Nn.EMPTY_NODE;return rn(d,(g,C)=>{if((0,W.r3)(d,g)&&"."!==g.substring(0,1)){const M=L(C);(M.isLeafNode()||!M.isEmpty())&&(l=l.updateImmediateChild(g,M))}}),l.updatePriority(L(u))}{const l=[];let g=!1;if(rn(d,($,ee)=>{if("."!==$.substring(0,1)){const le=L(ee);le.isEmpty()||(g=g||!le.getPriority().isEmpty(),l.push(new _n($,le)))}}),0===l.length)return Nn.EMPTY_NODE;const M=kr(l,ro,$=>$.name,tr);if(g){const $=kr(l,cn.getCompare());return new Nn(M,L(u),new Jt({".priority":$},{".priority":cn}))}return new Nn(M,L(u),Jt.Default)}}Object.defineProperties(_n,{MIN:{value:new _n(Xn,Nn.EMPTY_NODE)},MAX:{value:new _n(fr,ds)}}),Eo.__EMPTY_NODE=Nn.EMPTY_NODE,et.__childrenNodeConstructor=Nn,function Q(d){U=d}(ds),function ir(d){ln=d}(ds),function Sn(d){mt=d}(L);class k extends as{constructor(u){super(),this.indexPath_=u,(0,W.hu)(!Dn(u)&&".priority"!==ve(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,l){const g=this.extractChild(u.node),C=this.extractChild(l.node),M=g.compareTo(C);return 0===M?Bn(u.name,l.name):M}makePost(u,l){const g=L(u),C=Nn.EMPTY_NODE.updateChild(this.indexPath_,g);return new _n(l,C)}maxPost(){const u=Nn.EMPTY_NODE.updateChild(this.indexPath_,ds);return new _n(fr,u)}toString(){return Zn(this.indexPath_,0).join("/")}}const R=new class E extends as{compare(u,l){const g=u.node.compareTo(l.node);return 0===g?Bn(u.name,l.name):g}isDefinedOn(u){return!0}indexedValueChanged(u,l){return!u.equals(l)}minPost(){return _n.MIN}maxPost(){return _n.MAX}makePost(u,l){const g=L(u);return new _n(l,g)}toString(){return".value"}},Y="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yt=function(){let d=0;const u=[];return function(l){const g=l===d;let C;d=l;const M=new Array(8);for(C=7;C>=0;C--)M[C]=Y.charAt(l%64),l=Math.floor(l/64);(0,W.hu)(0===l,"Cannot push at time == 0");let $=M.join("");if(g){for(C=11;C>=0&&63===u[C];C--)u[C]=0;u[C]++}else for(C=0;C<12;C++)u[C]=Math.floor(64*Math.random());for(C=0;C<12;C++)$+=Y.charAt(u[C]);return(0,W.hu)(20===$.length,"nextPushId: Length should be 20."),$}}(),Kt=function(d){if(d===""+vr)return"-";const u=Lt(d);if(null!=u)return""+(u+1);const l=new Array(d.length);for(let $=0;$<l.length;$++)l[$]=d.charAt($);if(l.length<786)return l.push("-"),l.join("");let g=l.length-1;for(;g>=0&&"z"===l[g];)g--;if(-1===g)return fr;const M=Y.charAt(Y.indexOf(l[g])+1);return l[g]=M,l.slice(0,g+1).join("")},Ut=function(d){if(d===""+hi)return Xn;const u=Lt(d);if(null!=u)return""+(u-1);const l=new Array(d.length);for(let g=0;g<l.length;g++)l[g]=d.charAt(g);return"-"===l[l.length-1]?1===l.length?""+vr:(delete l[l.length-1],l.join("")):(l[l.length-1]=Y.charAt(Y.indexOf(l[l.length-1])-1),l.join("")+"z".repeat(786-l.length))};function $n(d){return{type:"value",snapshotNode:d}}function Qn(d,u){return{type:"child_added",snapshotNode:u,childName:d}}function xr(d,u){return{type:"child_removed",snapshotNode:u,childName:d}}function Ir(d,u,l){return{type:"child_changed",snapshotNode:u,childName:d,oldSnap:l}}class Fr{constructor(u){this.index_=u}updateChild(u,l,g,C,M,$){(0,W.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ee=u.getImmediateChild(l);return ee.getChild(C).equals(g.getChild(C))&&ee.isEmpty()===g.isEmpty()||(null!=$&&(g.isEmpty()?u.hasChild(l)?$.trackChildChange(xr(l,ee)):(0,W.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ee.isEmpty()?$.trackChildChange(Qn(l,g)):$.trackChildChange(Ir(l,g,ee))),u.isLeafNode()&&g.isEmpty())?u:u.updateImmediateChild(l,g).withIndex(this.index_)}updateFullNode(u,l,g){return null!=g&&(u.isLeafNode()||u.forEachChild(cn,(C,M)=>{l.hasChild(C)||g.trackChildChange(xr(C,M))}),l.isLeafNode()||l.forEachChild(cn,(C,M)=>{if(u.hasChild(C)){const $=u.getImmediateChild(C);$.equals(M)||g.trackChildChange(Ir(C,M,$))}else g.trackChildChange(Qn(C,M))})),l.withIndex(this.index_)}updatePriority(u,l){return u.isEmpty()?Nn.EMPTY_NODE:u.updatePriority(l)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Mi{constructor(u){this.indexedFilter_=new Fr(u.getIndex()),this.index_=u.getIndex(),this.startPost_=Mi.getStartPost_(u),this.endPost_=Mi.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,l,g,C,M,$){return this.matches(new _n(l,g))||(g=Nn.EMPTY_NODE),this.indexedFilter_.updateChild(u,l,g,C,M,$)}updateFullNode(u,l,g){l.isLeafNode()&&(l=Nn.EMPTY_NODE);let C=l.withIndex(this.index_);C=C.updatePriority(Nn.EMPTY_NODE);const M=this;return l.forEachChild(cn,($,ee)=>{M.matches(new _n($,ee))||(C=C.updateImmediateChild($,Nn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,C,g)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const l=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),l)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const l=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),l)}return u.getIndex().maxPost()}}class Lr{constructor(u){this.rangedFilter_=new Mi(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,l,g,C,M,$){return this.rangedFilter_.matches(new _n(l,g))||(g=Nn.EMPTY_NODE),u.getImmediateChild(l).equals(g)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,l,g,C,M,$):this.fullLimitUpdateChild_(u,l,g,M,$)}updateFullNode(u,l,g){let C;if(l.isLeafNode()||l.isEmpty())C=Nn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<l.numChildren()&&l.isIndexed(this.index_)){let M;C=Nn.EMPTY_NODE.withIndex(this.index_),M=this.reverse_?l.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let $=0;for(;M.hasNext()&&$<this.limit_;){const ee=M.getNext();let le;if(le=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ee)<=0:this.index_.compare(ee,this.rangedFilter_.getEndPost())<=0,!le)break;C=C.updateImmediateChild(ee.name,ee.node),$++}}else{let M,$,ee,le;if(C=l.withIndex(this.index_),C=C.updatePriority(Nn.EMPTY_NODE),this.reverse_){le=C.getReverseIterator(this.index_),M=this.rangedFilter_.getEndPost(),$=this.rangedFilter_.getStartPost();const ut=this.index_.getCompare();ee=(Dt,mn)=>ut(mn,Dt)}else le=C.getIterator(this.index_),M=this.rangedFilter_.getStartPost(),$=this.rangedFilter_.getEndPost(),ee=this.index_.getCompare();let Ee=0,rt=!1;for(;le.hasNext();){const ut=le.getNext();!rt&&ee(M,ut)<=0&&(rt=!0),rt&&Ee<this.limit_&&ee(ut,$)<=0?Ee++:C=C.updateImmediateChild(ut.name,Nn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,C,g)}updatePriority(u,l){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,l,g,C,M){let $;if(this.reverse_){const ut=this.index_.getCompare();$=(Dt,mn)=>ut(mn,Dt)}else $=this.index_.getCompare();const ee=u;(0,W.hu)(ee.numChildren()===this.limit_,"");const le=new _n(l,g),Ee=this.reverse_?ee.getFirstChild(this.index_):ee.getLastChild(this.index_),rt=this.rangedFilter_.matches(le);if(ee.hasChild(l)){const ut=ee.getImmediateChild(l);let Dt=C.getChildAfterChild(this.index_,Ee,this.reverse_);for(;null!=Dt&&(Dt.name===l||ee.hasChild(Dt.name));)Dt=C.getChildAfterChild(this.index_,Dt,this.reverse_);const mn=null==Dt?1:$(Dt,le);if(rt&&!g.isEmpty()&&mn>=0)return null!=M&&M.trackChildChange(Ir(l,g,ut)),ee.updateImmediateChild(l,g);{null!=M&&M.trackChildChange(xr(l,ut));const _i=ee.updateImmediateChild(l,Nn.EMPTY_NODE);return null!=Dt&&this.rangedFilter_.matches(Dt)?(null!=M&&M.trackChildChange(Qn(Dt.name,Dt.node)),_i.updateImmediateChild(Dt.name,Dt.node)):_i}}return g.isEmpty()?u:rt&&$(Ee,le)>=0?(null!=M&&(M.trackChildChange(xr(Ee.name,Ee.node)),M.trackChildChange(Qn(l,g))),ee.updateImmediateChild(l,g).updateImmediateChild(Ee.name,Nn.EMPTY_NODE)):u}}class ri{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=cn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,W.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Xn}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,W.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,W.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===cn}copy(){const u=new ri;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function so(d,u,l){const g=d.copy();return g.startSet_=!0,void 0===u&&(u=null),g.indexStartValue_=u,null!=l?(g.startNameSet_=!0,g.indexStartName_=l):(g.startNameSet_=!1,g.indexStartName_=""),g}function Mo(d,u,l){const g=d.copy();return g.endSet_=!0,void 0===u&&(u=null),g.indexEndValue_=u,void 0!==l?(g.endNameSet_=!0,g.indexEndName_=l):(g.endNameSet_=!1,g.indexEndName_=""),g}function Io(d,u){const l=d.copy();return l.index_=u,l}function mu(d){const u={};if(d.isDefault())return u;let l;return d.index_===cn?l="$priority":d.index_===R?l="$value":d.index_===ti?l="$key":((0,W.hu)(d.index_ instanceof k,"Unrecognized index type!"),l=d.index_.toString()),u.orderBy=(0,W.Pz)(l),d.startSet_&&(u.startAt=(0,W.Pz)(d.indexStartValue_),d.startNameSet_&&(u.startAt+=","+(0,W.Pz)(d.indexStartName_))),d.endSet_&&(u.endAt=(0,W.Pz)(d.indexEndValue_),d.endNameSet_&&(u.endAt+=","+(0,W.Pz)(d.indexEndName_))),d.limitSet_&&(d.isViewFromLeft()?u.limitToFirst=d.limit_:u.limitToLast=d.limit_),u}function Da(d){const u={};if(d.startSet_&&(u.sp=d.indexStartValue_,d.startNameSet_&&(u.sn=d.indexStartName_)),d.endSet_&&(u.ep=d.indexEndValue_,d.endNameSet_&&(u.en=d.indexEndName_)),d.limitSet_){u.l=d.limit_;let l=d.viewFrom_;""===l&&(l=d.isViewFromLeft()?"l":"r"),u.vf=l}return d.index_!==cn&&(u.i=d.index_.toString()),u}class oo extends is{constructor(u,l,g,C){super(),this.repoInfo_=u,this.onDataUpdate_=l,this.authTokenProvider_=g,this.appCheckTokenProvider_=C,this.log_=Yt("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,l){return void 0!==l?"tag$"+l:((0,W.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,l,g,C){const M=u._path.toString();this.log_("Listen called for "+M+" "+u._queryIdentifier);const $=oo.getListenId_(u,g),ee={};this.listens_[$]=ee;const le=mu(u._queryParams);this.restRequest_(M+".json",le,(Ee,rt)=>{let ut=rt;if(404===Ee&&(ut=null,Ee=null),null===Ee&&this.onDataUpdate_(M,ut,!1,g),(0,W.DV)(this.listens_,$)===ee){let Dt;Dt=Ee?401===Ee?"permission_denied":"rest_error:"+Ee:"ok",C(Dt,null)}})}unlisten(u,l){const g=oo.getListenId_(u,l);delete this.listens_[g]}get(u){const l=mu(u._queryParams),g=u._path.toString(),C=new W.BH;return this.restRequest_(g+".json",l,(M,$)=>{let ee=$;404===M&&(ee=null,M=null),null===M?(this.onDataUpdate_(g,ee,!1,null),C.resolve(ee)):C.reject(new Error(ee))}),C.promise}refreshAuthToken(u){}restRequest_(u,l={},g){return l.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([C,M])=>{C&&C.accessToken&&(l.auth=C.accessToken),M&&M.token&&(l.ac=M.token);const $=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,W.xO)(l);this.log_("Sending REST request for "+$);const ee=new XMLHttpRequest;ee.onreadystatechange=()=>{if(g&&4===ee.readyState){this.log_("REST Response for "+$+" received. status:",ee.status,"response:",ee.responseText);let le=null;if(ee.status>=200&&ee.status<300){try{le=(0,W.cI)(ee.responseText)}catch(Ee){tn("Failed to parse JSON response for "+$+": "+ee.responseText)}g(null,le)}else 401!==ee.status&&404!==ee.status&&tn("Got unsuccessful REST response for "+$+" Status: "+ee.status),g(ee.status);g=null}},ee.open("GET",$,!0),ee.send()})}}class Ta{constructor(){this.rootNode_=Nn.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,l){this.rootNode_=this.rootNode_.updateChild(u,l)}}function ao(){return{value:null,children:new Map}}function uo(d,u,l){if(Dn(u))d.value=l,d.children.clear();else if(null!==d.value)d.value=d.value.updateChild(u,l);else{const g=ve(u);d.children.has(g)||d.children.set(g,ao()),uo(d.children.get(g),u=st(u),l)}}function nu(d,u){if(Dn(u))return d.value=null,d.children.clear(),!0;if(null!==d.value){if(d.value.isLeafNode())return!1;{const l=d.value;return d.value=null,l.forEachChild(cn,(g,C)=>{uo(d,new qn(g),C)}),nu(d,u)}}if(d.children.size>0){const l=ve(u);return u=st(u),d.children.has(l)&&nu(d.children.get(l),u)&&d.children.delete(l),0===d.children.size}return!0}function Qo(d,u,l){null!==d.value?l(u,d.value):function da(d,u){d.children.forEach((l,g)=>{u(g,l)})}(d,(g,C)=>{Qo(C,new qn(u.toString()+"/"+g),l)})}class al{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),l=Object.assign({},u);return this.last_&&rn(this.last_,(g,C)=>{l[g]=l[g]-C}),this.last_=u,l}}class Fl{constructor(u,l){this.server_=l,this.statsToReport_={},this.statsListener_=new al(u);const g=1e4+2e4*Math.random();br(this.reportStats_.bind(this),Math.floor(g))}reportStats_(){const u=this.statsListener_.get(),l={};let g=!1;rn(u,(C,M)=>{M>0&&(0,W.r3)(this.statsToReport_,C)&&(l[C]=M,g=!0)}),g&&this.server_.reportStats(l),br(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hs=(()=>{return(d=hs||(hs={}))[d.OVERWRITE=0]="OVERWRITE",d[d.MERGE=1]="MERGE",d[d.ACK_USER_WRITE=2]="ACK_USER_WRITE",d[d.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",hs;var d})();function Jo(d){return{fromUser:!1,fromServer:!0,queryId:d,tagged:!0}}class yu{constructor(u,l,g){this.path=u,this.affectedTree=l,this.revert=g,this.type=hs.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(Dn(this.path)){if(null!=this.affectedTree.value)return(0,W.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const l=this.affectedTree.subtree(new qn(u));return new yu(Ie(),l,this.revert)}}return(0,W.hu)(ve(this.path)===u,"operationForChild called for unrelated child."),new yu(st(this.path),this.affectedTree,this.revert)}}class ha{constructor(u,l){this.source=u,this.path=l,this.type=hs.LISTEN_COMPLETE}operationForChild(u){return Dn(this.path)?new ha(this.source,Ie()):new ha(this.source,st(this.path))}}class Vs{constructor(u,l,g){this.source=u,this.path=l,this.snap=g,this.type=hs.OVERWRITE}operationForChild(u){return Dn(this.path)?new Vs(this.source,Ie(),this.snap.getImmediateChild(u)):new Vs(this.source,st(this.path),this.snap)}}class ws{constructor(u,l,g){this.source=u,this.path=l,this.children=g,this.type=hs.MERGE}operationForChild(u){if(Dn(this.path)){const l=this.children.subtree(new qn(u));return l.isEmpty()?null:l.value?new Vs(this.source,Ie(),l.value):new ws(this.source,Ie(),l)}return(0,W.hu)(ve(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new ws(this.source,st(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ks{constructor(u,l,g){this.node_=u,this.fullyInitialized_=l,this.filtered_=g}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(Dn(u))return this.isFullyInitialized()&&!this.filtered_;const l=ve(u);return this.isCompleteForChild(l)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class Rr{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function qs(d,u,l,g,C,M){const $=g.filter(ee=>ee.type===l);$.sort((ee,le)=>function Sa(d,u,l){if(null==u.childName||null==l.childName)throw(0,W.g5)("Should only compare child_ events.");const g=new _n(u.childName,u.snapshotNode),C=new _n(l.childName,l.snapshotNode);return d.index_.compare(g,C)}(d,ee,le)),$.forEach(ee=>{const le=function Zs(d,u,l){return"value"===u.type||"child_removed"===u.type||(u.prevName=l.getPredecessorChildName(u.childName,u.snapshotNode,d.index_)),u}(d,ee,M);C.forEach(Ee=>{Ee.respondsTo(ee.type)&&u.push(Ee.createEvent(le,d.query_))})})}function Ys(d,u){return{eventCache:d,serverCache:u}}function Oo(d,u,l,g){return Ys(new Ks(u,l,g),d.serverCache)}function $o(d,u,l,g){return Ys(d.eventCache,new Ks(u,l,g))}function Xo(d){return d.eventCache.isFullyInitialized()?d.eventCache.getNode():null}function us(d){return d.serverCache.isFullyInitialized()?d.serverCache.getNode():null}let _u;class zn{constructor(u,l=(()=>(_u||(_u=new Jr(Sr)),_u))()){this.value=u,this.children=l}static fromObject(u){let l=new zn(null);return rn(u,(g,C)=>{l=l.set(new qn(g),C)}),l}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,l){if(null!=this.value&&l(this.value))return{path:Ie(),value:this.value};if(Dn(u))return null;{const g=ve(u),C=this.children.get(g);if(null!==C){const M=C.findRootMostMatchingPathAndValue(st(u),l);return null!=M?{path:gn(new qn(g),M.path),value:M.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(Dn(u))return this;{const l=ve(u),g=this.children.get(l);return null!==g?g.subtree(st(u)):new zn(null)}}set(u,l){if(Dn(u))return new zn(l,this.children);{const g=ve(u),M=(this.children.get(g)||new zn(null)).set(st(u),l),$=this.children.insert(g,M);return new zn(this.value,$)}}remove(u){if(Dn(u))return this.children.isEmpty()?new zn(null):new zn(null,this.children);{const l=ve(u),g=this.children.get(l);if(g){const C=g.remove(st(u));let M;return M=C.isEmpty()?this.children.remove(l):this.children.insert(l,C),null===this.value&&M.isEmpty()?new zn(null):new zn(this.value,M)}return this}}get(u){if(Dn(u))return this.value;{const l=ve(u),g=this.children.get(l);return g?g.get(st(u)):null}}setTree(u,l){if(Dn(u))return l;{const g=ve(u),M=(this.children.get(g)||new zn(null)).setTree(st(u),l);let $;return $=M.isEmpty()?this.children.remove(g):this.children.insert(g,M),new zn(this.value,$)}}fold(u){return this.fold_(Ie(),u)}fold_(u,l){const g={};return this.children.inorderTraversal((C,M)=>{g[C]=M.fold_(gn(u,C),l)}),l(u,this.value,g)}findOnPath(u,l){return this.findOnPath_(u,Ie(),l)}findOnPath_(u,l,g){const C=!!this.value&&g(l,this.value);if(C)return C;if(Dn(u))return null;{const M=ve(u),$=this.children.get(M);return $?$.findOnPath_(st(u),gn(l,M),g):null}}foreachOnPath(u,l){return this.foreachOnPath_(u,Ie(),l)}foreachOnPath_(u,l,g){if(Dn(u))return this;{this.value&&g(l,this.value);const C=ve(u),M=this.children.get(C);return M?M.foreachOnPath_(st(u),gn(l,C),g):new zn(null)}}foreach(u){this.foreach_(Ie(),u)}foreach_(u,l){this.children.inorderTraversal((g,C)=>{C.foreach_(gn(u,g),l)}),this.value&&l(u,this.value)}foreachChild(u){this.children.inorderTraversal((l,g)=>{g.value&&u(l,g.value)})}}class Qs{constructor(u){this.writeTree_=u}static empty(){return new Qs(new zn(null))}}function Co(d,u,l){if(Dn(u))return new Qs(new zn(l));{const g=d.writeTree_.findRootMostValueAndPath(u);if(null!=g){const C=g.path;let M=g.value;const $=jr(C,u);return M=M.updateChild($,l),new Qs(d.writeTree_.set(C,M))}{const C=new zn(l),M=d.writeTree_.setTree(u,C);return new Qs(M)}}}function Ns(d,u,l){let g=d;return rn(l,(C,M)=>{g=Co(g,gn(u,C),M)}),g}function vu(d,u){if(Dn(u))return Qs.empty();{const l=d.writeTree_.setTree(u,new zn(null));return new Qs(l)}}function Eu(d,u){return null!=Is(d,u)}function Is(d,u){const l=d.writeTree_.findRootMostValueAndPath(u);return null!=l?d.writeTree_.get(l.path).getChild(jr(l.path,u)):null}function wu(d){const u=[],l=d.writeTree_.value;return null!=l?l.isLeafNode()||l.forEachChild(cn,(g,C)=>{u.push(new _n(g,C))}):d.writeTree_.children.inorderTraversal((g,C)=>{null!=C.value&&u.push(new _n(g,C.value))}),u}function Mr(d,u){if(Dn(u))return d;{const l=Is(d,u);return new Qs(null!=l?new zn(l):d.writeTree_.subtree(u))}}function Aa(d){return d.writeTree_.isEmpty()}function Js(d,u){return Ji(Ie(),d.writeTree_,u)}function Ji(d,u,l){if(null!=u.value)return l.updateChild(d,u.value);{let g=null;return u.children.inorderTraversal((C,M)=>{".priority"===C?((0,W.hu)(null!==M.value,"Priority writes must always be leaf nodes"),g=M.value):l=Ji(gn(d,C),M,l)}),!l.getChild(d).isEmpty()&&null!==g&&(l=l.updateChild(gn(d,".priority"),g)),l}}function bo(d,u){return ko(u,d)}function gi(d,u){if(d.snap)return $r(d.path,u);for(const l in d.children)if(d.children.hasOwnProperty(l)&&$r(gn(d.path,l),u))return!0;return!1}function ta(d){return d.visible}function S(d,u,l){let g=Qs.empty();for(let C=0;C<d.length;++C){const M=d[C];if(u(M)){const $=M.path;let ee;if(M.snap)$r(l,$)?(ee=jr(l,$),g=Co(g,ee,M.snap)):$r($,l)&&(ee=jr($,l),g=Co(g,Ie(),M.snap.getChild(ee)));else{if(!M.children)throw(0,W.g5)("WriteRecord should have .snap or .children");if($r(l,$))ee=jr(l,$),g=Ns(g,ee,M.children);else if($r($,l))if(ee=jr($,l),Dn(ee))g=Ns(g,Ie(),M.children);else{const le=(0,W.DV)(M.children,ve(ee));if(le){const Ee=le.getChild(st(ee));g=Co(g,Ie(),Ee)}}}}}return g}function D(d,u,l,g,C){if(g||C){const M=Mr(d.visibleWrites,u);return!C&&Aa(M)?l:C||null!=l||Eu(M,Ie())?Js(S(d.allWrites,function(Ee){return(Ee.visible||C)&&(!g||!~g.indexOf(Ee.writeId))&&($r(Ee.path,u)||$r(u,Ee.path))},u),l||Nn.EMPTY_NODE):null}{const M=Is(d.visibleWrites,u);if(null!=M)return M;{const $=Mr(d.visibleWrites,u);return Aa($)?l:null!=l||Eu($,Ie())?Js($,l||Nn.EMPTY_NODE):null}}}function ft(d,u,l,g){return D(d.writeTree,d.treePath,u,l,g)}function Xt(d,u){return function b(d,u,l){let g=Nn.EMPTY_NODE;const C=Is(d.visibleWrites,u);if(C)return C.isLeafNode()||C.forEachChild(cn,(M,$)=>{g=g.updateImmediateChild(M,$)}),g;if(l){const M=Mr(d.visibleWrites,u);return l.forEachChild(cn,($,ee)=>{const le=Js(Mr(M,new qn($)),ee);g=g.updateImmediateChild($,le)}),wu(M).forEach($=>{g=g.updateImmediateChild($.name,$.node)}),g}return wu(Mr(d.visibleWrites,u)).forEach($=>{g=g.updateImmediateChild($.name,$.node)}),g}(d.writeTree,d.treePath,u)}function dr(d,u,l,g){return function N(d,u,l,g,C){(0,W.hu)(g||C,"Either existingEventSnap or existingServerSnap must exist");const M=gn(u,l);if(Eu(d.visibleWrites,M))return null;{const $=Mr(d.visibleWrites,M);return Aa($)?C.getChild(l):Js($,C.getChild(l))}}(d.writeTree,d.treePath,u,l,g)}function dn(d,u){return function K(d,u){return Is(d.visibleWrites,u)}(d.writeTree,gn(d.treePath,u))}function mr(d,u,l){return function P(d,u,l,g){const C=gn(u,l),M=Is(d.visibleWrites,C);return null!=M?M:g.isCompleteForChild(l)?Js(Mr(d.visibleWrites,C),g.getNode().getImmediateChild(l)):null}(d.writeTree,d.treePath,u,l)}function Xs(d,u){return ko(gn(d.treePath,u),d.writeTree)}function ko(d,u){return{treePath:d,writeTree:u}}class xa{constructor(){this.changeMap=new Map}trackChildChange(u){const l=u.type,g=u.childName;(0,W.hu)("child_added"===l||"child_changed"===l||"child_removed"===l,"Only child changes supported for tracking"),(0,W.hu)(".priority"!==g,"Only non-priority child changes can be tracked.");const C=this.changeMap.get(g);if(C){const M=C.type;if("child_added"===l&&"child_removed"===M)this.changeMap.set(g,Ir(g,u.snapshotNode,C.snapshotNode));else if("child_removed"===l&&"child_added"===M)this.changeMap.delete(g);else if("child_removed"===l&&"child_changed"===M)this.changeMap.set(g,xr(g,C.oldSnap));else if("child_changed"===l&&"child_added"===M)this.changeMap.set(g,Qn(g,u.snapshotNode));else{if("child_changed"!==l||"child_changed"!==M)throw(0,W.g5)("Illegal combination of changes: "+u+" occurred after "+C);this.changeMap.set(g,Ir(g,u.snapshotNode,C.oldSnap))}}else this.changeMap.set(g,u)}getChanges(){return Array.from(this.changeMap.values())}}const Rn=new class na{getCompleteChild(u){return null}getChildAfterChild(u,l,g){return null}};class lo{constructor(u,l,g=null){this.writes_=u,this.viewCache_=l,this.optCompleteServerCache_=g}getCompleteChild(u){const l=this.viewCache_.eventCache;if(l.isCompleteForChild(u))return l.getNode().getImmediateChild(u);{const g=null!=this.optCompleteServerCache_?new Ks(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mr(this.writes_,u,g)}}getChildAfterChild(u,l,g){const C=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:us(this.viewCache_),M=function Vr(d,u,l,g,C,M){return function he(d,u,l,g,C,M,$){let ee;const le=Mr(d.visibleWrites,u),Ee=Is(le,Ie());if(null!=Ee)ee=Ee;else{if(null==l)return[];ee=Js(le,l)}if(ee=ee.withIndex($),ee.isEmpty()||ee.isLeafNode())return[];{const rt=[],ut=$.getCompare(),Dt=M?ee.getReverseIteratorFrom(g,$):ee.getIteratorFrom(g,$);let mn=Dt.getNext();for(;mn&&rt.length<C;)0!==ut(mn,g)&&rt.push(mn),mn=Dt.getNext();return rt}}(d.writeTree,d.treePath,u,l,g,C,M)}(this.writes_,C,l,1,g,u);return 0===M.length?null:M[0]}}function Tr(d,u,l,g,C,M){const $=u.eventCache;if(null!=dn(g,l))return u;{let ee,le;if(Dn(l))if((0,W.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const Ee=us(u),ut=Xt(g,Ee instanceof Nn?Ee:Nn.EMPTY_NODE);ee=d.filter.updateFullNode(u.eventCache.getNode(),ut,M)}else{const Ee=ft(g,us(u));ee=d.filter.updateFullNode(u.eventCache.getNode(),Ee,M)}else{const Ee=ve(l);if(".priority"===Ee){(0,W.hu)(1===je(l),"Can't have a priority with additional path components");const rt=$.getNode();le=u.serverCache.getNode();const ut=dr(g,l,rt,le);ee=null!=ut?d.filter.updatePriority(rt,ut):$.getNode()}else{const rt=st(l);let ut;if($.isCompleteForChild(Ee)){le=u.serverCache.getNode();const Dt=dr(g,l,$.getNode(),le);ut=null!=Dt?$.getNode().getImmediateChild(Ee).updateChild(rt,Dt):$.getNode().getImmediateChild(Ee)}else ut=mr(g,Ee,u.serverCache);ee=null!=ut?d.filter.updateChild($.getNode(),Ee,ut,rt,C,M):$.getNode()}}return Oo(u,ee,$.isFullyInitialized()||Dn(l),d.filter.filtersNodes())}}function Ni(d,u,l,g,C,M,$,ee){const le=u.serverCache;let Ee;const rt=$?d.filter:d.filter.getIndexedFilter();if(Dn(l))Ee=rt.updateFullNode(le.getNode(),g,null);else if(rt.filtersNodes()&&!le.isFiltered()){const mn=le.getNode().updateChild(l,g);Ee=rt.updateFullNode(le.getNode(),mn,null)}else{const mn=ve(l);if(!le.isCompleteForPath(l)&&je(l)>1)return u;const Vn=st(l),Ds=le.getNode().getImmediateChild(mn).updateChild(Vn,g);Ee=".priority"===mn?rt.updatePriority(le.getNode(),Ds):rt.updateChild(le.getNode(),mn,Ds,Vn,Rn,null)}const ut=$o(u,Ee,le.isFullyInitialized()||Dn(l),rt.filtersNodes());return Tr(d,ut,l,C,new lo(C,ut,M),ee)}function Xi(d,u,l,g,C,M,$){const ee=u.eventCache;let le,Ee;const rt=new lo(C,u,M);if(Dn(l))Ee=d.filter.updateFullNode(u.eventCache.getNode(),g,$),le=Oo(u,Ee,!0,d.filter.filtersNodes());else{const ut=ve(l);if(".priority"===ut)Ee=d.filter.updatePriority(u.eventCache.getNode(),g),le=Oo(u,Ee,ee.isFullyInitialized(),ee.isFiltered());else{const Dt=st(l),mn=ee.getNode().getImmediateChild(ut);let Vn;if(Dn(Dt))Vn=g;else{const _i=rt.getCompleteChild(ut);Vn=null!=_i?".priority"===Mt(Dt)&&_i.getChild(ai(Dt)).isEmpty()?_i:_i.updateChild(Dt,g):Nn.EMPTY_NODE}le=mn.equals(Vn)?u:Oo(u,d.filter.updateChild(ee.getNode(),ut,Vn,Dt,rt,$),ee.isFullyInitialized(),d.filter.filtersNodes())}}return le}function Zt(d,u){return d.eventCache.isCompleteForChild(u)}function Ll(d,u,l){return l.foreach((g,C)=>{u=u.updateChild(g,C)}),u}function Ra(d,u,l,g,C,M,$,ee){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let Ee,le=u;Ee=Dn(l)?g:new zn(null).setTree(l,g);const rt=u.serverCache.getNode();return Ee.children.inorderTraversal((ut,Dt)=>{if(rt.hasChild(ut)){const Vn=Ll(0,u.serverCache.getNode().getImmediateChild(ut),Dt);le=Ni(d,le,new qn(ut),Vn,C,M,$,ee)}}),Ee.children.inorderTraversal((ut,Dt)=>{const mn=!u.serverCache.isCompleteForChild(ut)&&void 0===Dt.value;if(!rt.hasChild(ut)&&!mn){const _i=Ll(0,u.serverCache.getNode().getImmediateChild(ut),Dt);le=Ni(d,le,new qn(ut),_i,C,M,$,ee)}}),le}class Bc{constructor(u,l){this.query_=u,this.eventRegistrations_=[];const g=this.query_._queryParams,C=new Fr(g.getIndex()),M=function zs(d){return d.loadsAllData()?new Fr(d.getIndex()):d.hasLimit()?new Lr(d):new Mi(d)}(g);this.processor_=function $u(d){return{filter:d}}(M);const $=l.serverCache,ee=l.eventCache,le=C.updateFullNode(Nn.EMPTY_NODE,$.getNode(),null),Ee=M.updateFullNode(Nn.EMPTY_NODE,ee.getNode(),null),rt=new Ks(le,$.isFullyInitialized(),C.filtersNodes()),ut=new Ks(Ee,ee.isFullyInitialized(),M.filtersNodes());this.viewCache_=Ys(ut,rt),this.eventGenerator_=new Rr(this.query_)}get query(){return this.query_}}function Ba(d,u){const l=us(d.viewCache_);return l&&(d.query._queryParams.loadsAllData()||!Dn(u)&&!l.getImmediateChild(ve(u)).isEmpty())?l.getChild(u):null}function jc(d){return 0===d.eventRegistrations_.length}function co(d,u,l){const g=[];if(l){(0,W.hu)(null==u,"A cancel should cancel all event registrations.");const C=d.query._path;d.eventRegistrations_.forEach(M=>{const $=M.createCancelEvent(l,C);$&&g.push($)})}if(u){let C=[];for(let M=0;M<d.eventRegistrations_.length;++M){const $=d.eventRegistrations_[M];if($.matches(u)){if(u.hasAnyCallback()){C=C.concat(d.eventRegistrations_.slice(M+1));break}}else C.push($)}d.eventRegistrations_=C}else d.eventRegistrations_=[];return g}function Je(d,u,l,g){u.type===hs.MERGE&&null!==u.source.queryId&&((0,W.hu)(us(d.viewCache_),"We should always have a full cache before handling merges"),(0,W.hu)(Xo(d.viewCache_),"Missing event cache, even though we have a server cache"));const C=d.viewCache_,M=function Fn(d,u,l,g,C){const M=new xa;let $,ee;if(l.type===hs.OVERWRITE){const Ee=l;Ee.source.fromUser?$=Xi(d,u,Ee.path,Ee.snap,g,C,M):((0,W.hu)(Ee.source.fromServer,"Unknown source."),ee=Ee.source.tagged||u.serverCache.isFiltered()&&!Dn(Ee.path),$=Ni(d,u,Ee.path,Ee.snap,g,C,ee,M))}else if(l.type===hs.MERGE){const Ee=l;Ee.source.fromUser?$=function sc(d,u,l,g,C,M,$){let ee=u;return g.foreach((le,Ee)=>{const rt=gn(l,le);Zt(u,ve(rt))&&(ee=Xi(d,ee,rt,Ee,C,M,$))}),g.foreach((le,Ee)=>{const rt=gn(l,le);Zt(u,ve(rt))||(ee=Xi(d,ee,rt,Ee,C,M,$))}),ee}(d,u,Ee.path,Ee.children,g,C,M):((0,W.hu)(Ee.source.fromServer,"Unknown source."),ee=Ee.source.tagged||u.serverCache.isFiltered(),$=Ra(d,u,Ee.path,Ee.children,g,C,ee,M))}else if(l.type===hs.ACK_USER_WRITE){const Ee=l;$=Ee.revert?function Iu(d,u,l,g,C,M){let $;if(null!=dn(g,l))return u;{const ee=new lo(g,u,C),le=u.eventCache.getNode();let Ee;if(Dn(l)||".priority"===ve(l)){let rt;if(u.serverCache.isFullyInitialized())rt=ft(g,us(u));else{const ut=u.serverCache.getNode();(0,W.hu)(ut instanceof Nn,"serverChildren would be complete if leaf node"),rt=Xt(g,ut)}rt=rt,Ee=d.filter.updateFullNode(le,rt,M)}else{const rt=ve(l);let ut=mr(g,rt,u.serverCache);null==ut&&u.serverCache.isCompleteForChild(rt)&&(ut=le.getImmediateChild(rt)),Ee=null!=ut?d.filter.updateChild(le,rt,ut,st(l),ee,M):u.eventCache.getNode().hasChild(rt)?d.filter.updateChild(le,rt,Nn.EMPTY_NODE,st(l),ee,M):le,Ee.isEmpty()&&u.serverCache.isFullyInitialized()&&($=ft(g,us(u)),$.isLeafNode()&&(Ee=d.filter.updateFullNode(Ee,$,M)))}return $=u.serverCache.isFullyInitialized()||null!=dn(g,Ie()),Oo(u,Ee,$,d.filter.filtersNodes())}}(d,u,Ee.path,g,C,M):function Hu(d,u,l,g,C,M,$){if(null!=dn(C,l))return u;const ee=u.serverCache.isFiltered(),le=u.serverCache;if(null!=g.value){if(Dn(l)&&le.isFullyInitialized()||le.isCompleteForPath(l))return Ni(d,u,l,le.getNode().getChild(l),C,M,ee,$);if(Dn(l)){let Ee=new zn(null);return le.getNode().forEachChild(ti,(rt,ut)=>{Ee=Ee.set(new qn(rt),ut)}),Ra(d,u,l,Ee,C,M,ee,$)}return u}{let Ee=new zn(null);return g.foreach((rt,ut)=>{const Dt=gn(l,rt);le.isCompleteForPath(Dt)&&(Ee=Ee.set(rt,le.getNode().getChild(Dt)))}),Ra(d,u,l,Ee,C,M,ee,$)}}(d,u,Ee.path,Ee.affectedTree,g,C,M)}else{if(l.type!==hs.LISTEN_COMPLETE)throw(0,W.g5)("Unknown operation type: "+l.type);$=function fl(d,u,l,g,C){const M=u.serverCache;return Tr(d,$o(u,M.getNode(),M.isFullyInitialized()||Dn(l),M.isFiltered()),l,g,Rn,C)}(d,u,l.path,g,M)}const le=M.getChanges();return function hl(d,u,l){const g=u.eventCache;if(g.isFullyInitialized()){const C=g.getNode().isLeafNode()||g.getNode().isEmpty(),M=Xo(d);(l.length>0||!d.eventCache.isFullyInitialized()||C&&!g.getNode().equals(M)||!g.getNode().getPriority().equals(M.getPriority()))&&l.push($n(Xo(u)))}}(u,$,le),{viewCache:$,changes:le}}(d.processor_,C,u,l,g);return function mi(d,u){(0,W.hu)(u.eventCache.getNode().isIndexed(d.filter.getIndex()),"Event snap not indexed"),(0,W.hu)(u.serverCache.getNode().isIndexed(d.filter.getIndex()),"Server snap not indexed")}(d.processor_,M.viewCache),(0,W.hu)(M.viewCache.serverCache.isFullyInitialized()||!C.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),d.viewCache_=M.viewCache,Us(d,M.changes,M.viewCache.eventCache.getNode(),null)}function Us(d,u,l,g){return function ju(d,u,l,g){const C=[],M=[];return u.forEach($=>{"child_changed"===$.type&&d.index_.indexedValueChanged($.oldSnap,$.snapshotNode)&&M.push(function nr(d,u){return{type:"child_moved",snapshotNode:u,childName:d}}($.childName,$.snapshotNode))}),qs(d,C,"child_removed",u,g,l),qs(d,C,"child_added",u,g,l),qs(d,C,"child_moved",M,g,l),qs(d,C,"child_changed",u,g,l),qs(d,C,"value",u,g,l),C}(d.eventGenerator_,u,l,g?[g]:d.eventRegistrations_)}let pa,ps;class ra{constructor(){this.views=new Map}}function Wu(d,u,l,g){const C=u.source.queryId;if(null!==C){const M=d.views.get(C);return(0,W.hu)(null!=M,"SyncTree gave us an op for an invalid query."),Je(M,u,l,g)}{let M=[];for(const $ of d.views.values())M=M.concat(Je($,u,l,g));return M}}function $a(d,u,l,g,C){const $=d.views.get(u._queryIdentifier);if(!$){let ee=ft(l,C?g:null),le=!1;ee?le=!0:g instanceof Nn?(ee=Xt(l,g),le=!1):(ee=Nn.EMPTY_NODE,le=!1);const Ee=Ys(new Ks(ee,le,!1),new Ks(g,C,!1));return new Bc(u,Ee)}return $}function fs(d){const u=[];for(const l of d.views.values())l.query._queryParams.loadsAllData()||u.push(l);return u}function Ha(d,u){let l=null;for(const g of d.views.values())l=l||Ba(g,u);return l}function Na(d,u){return u._queryParams.loadsAllData()?Pa(d):d.views.get(u._queryIdentifier)}function ma(d,u){return null!=Na(d,u)}function ii(d){return null!=Pa(d)}function Pa(d){for(const u of d.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let To=1;class ls{constructor(u){this.listenProvider_=u,this.syncPointTree_=new zn(null),this.pendingWriteTree_=function Te(){return{visibleWrites:Qs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function $c(d,u,l,g,C){return function ea(d,u,l,g,C){(0,W.hu)(g>d.lastWriteId,"Stacking an older write on top of newer ones"),void 0===C&&(C=!0),d.allWrites.push({path:u,snap:l,writeId:g,visible:C}),C&&(d.visibleWrites=Co(d.visibleWrites,u,l)),d.lastWriteId=g}(d.pendingWriteTree_,u,l,g,C),C?Kn(d,new Vs({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,l)):[]}function Wo(d,u,l=!1){const g=function dl(d,u){for(let l=0;l<d.allWrites.length;l++){const g=d.allWrites[l];if(g.writeId===u)return g}return null}(d.pendingWriteTree_,u);if(function At(d,u){const l=d.allWrites.findIndex(ee=>ee.writeId===u);(0,W.hu)(l>=0,"removeWrite called with nonexistent writeId.");const g=d.allWrites[l];d.allWrites.splice(l,1);let C=g.visible,M=!1,$=d.allWrites.length-1;for(;C&&$>=0;){const ee=d.allWrites[$];ee.visible&&($>=l&&gi(ee,g.path)?C=!1:$r(g.path,ee.path)&&(M=!0)),$--}return!!C&&(M?(function Ho(d){d.visibleWrites=S(d.allWrites,ta,Ie()),d.lastWriteId=d.allWrites.length>0?d.allWrites[d.allWrites.length-1].writeId:-1}(d),!0):(g.snap?d.visibleWrites=vu(d.visibleWrites,g.path):rn(g.children,le=>{d.visibleWrites=vu(d.visibleWrites,gn(g.path,le))}),!0))}(d.pendingWriteTree_,u)){let M=new zn(null);return null!=g.snap?M=M.set(Ie(),!0):rn(g.children,$=>{M=M.set(new qn($),!0)}),Kn(d,new yu(g.path,M,l))}return[]}function Bs(d,u,l){return Kn(d,new Vs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,l))}function X(d,u,l,g){const C=u._path,M=d.syncPointTree_.get(C);let $=[];if(M&&("default"===u._queryIdentifier||ma(M,u))){const ee=function pl(d,u,l,g){const C=u._queryIdentifier,M=[];let $=[];const ee=ii(d);if("default"===C)for(const[le,Ee]of d.views.entries())$=$.concat(co(Ee,l,g)),jc(Ee)&&(d.views.delete(le),Ee.query._queryParams.loadsAllData()||M.push(Ee.query));else{const le=d.views.get(C);le&&($=$.concat(co(le,l,g)),jc(le)&&(d.views.delete(C),le.query._queryParams.loadsAllData()||M.push(le.query)))}return ee&&!ii(d)&&M.push(new(function Ma(){return(0,W.hu)(pa,"Reference.ts has not been loaded"),pa}())(u._repo,u._path)),{removed:M,events:$}}(M,u,l,g);(function ga(d){return 0===d.views.size})(M)&&(d.syncPointTree_=d.syncPointTree_.remove(C));const le=ee.removed;$=ee.events;const Ee=-1!==le.findIndex(ut=>ut._queryParams.loadsAllData()),rt=d.syncPointTree_.findOnPath(C,(ut,Dt)=>ii(Dt));if(Ee&&!rt){const ut=d.syncPointTree_.subtree(C);if(!ut.isEmpty()){const Dt=function su(d){return d.fold((u,l,g)=>{if(l&&ii(l))return[Pa(l)];{let C=[];return l&&(C=fs(l)),rn(g,(M,$)=>{C=C.concat($)}),C}})}(ut);for(let mn=0;mn<Dt.length;++mn){const Vn=Dt[mn],_i=Vn.query,Ds=Ps(d,Vn);d.listenProvider_.startListening(Hs(_i),js(d,_i),Ds.hashFn,Ds.onComplete)}}}!rt&&le.length>0&&!g&&(Ee?d.listenProvider_.stopListening(Hs(u),null):le.forEach(ut=>{const Dt=d.queryToTagMap.get(ho(ut));d.listenProvider_.stopListening(Hs(ut),Dt)})),function ya(d,u){for(let l=0;l<u.length;++l){const g=u[l];if(!g._queryParams.loadsAllData()){const C=ho(g),M=d.queryToTagMap.get(C);d.queryToTagMap.delete(C),d.tagToQueryMap.delete(M)}}}(d,le)}return $}function $e(d,u,l,g){const C=Cs(d,g);if(null!=C){const M=iu(C),$=M.path,ee=M.queryId,le=jr($,u);return $s(d,$,new Vs(Jo(ee),le,l))}return[]}function bt(d,u){const l=d._path;let g=null,C=!1;u.syncPointTree_.foreachOnPath(l,(Ee,rt)=>{const ut=jr(Ee,l);g=g||Ha(rt,ut),C=C||ii(rt)});let $,M=u.syncPointTree_.get(l);M?(C=C||ii(M),g=g||Ha(M,Ie())):(M=new ra,u.syncPointTree_=u.syncPointTree_.set(l,M)),null!=g?$=!0:($=!1,g=Nn.EMPTY_NODE,u.syncPointTree_.subtree(l).foreachChild((rt,ut)=>{const Dt=Ha(ut,Ie());Dt&&(g=g.updateImmediateChild(rt,Dt))}));const ee=ma(M,d);if(!ee&&!d._queryParams.loadsAllData()){const Ee=ho(d);(0,W.hu)(!u.queryToTagMap.has(Ee),"View does not exist, but we have a tag");const rt=function ou(){return To++}();u.queryToTagMap.set(Ee,rt),u.tagToQueryMap.set(rt,Ee)}return{syncPoint:M,writesCache:bo(u.pendingWriteTree_,l),serverCache:g,serverCacheComplete:$,foundAncestorDefaultView:C,viewAlreadyExists:ee}}function Pt(d,u,l){const{syncPoint:g,serverCache:C,writesCache:M,serverCacheComplete:$,viewAlreadyExists:ee,foundAncestorDefaultView:le}=bt(u,d);let Ee=function Go(d,u,l,g,C,M){const $=$a(d,u,g,C,M);return d.views.has(u._queryIdentifier)||d.views.set(u._queryIdentifier,$),function fa(d,u){d.eventRegistrations_.push(u)}($,l),function ja(d,u){const l=d.viewCache_.eventCache,g=[];return l.getNode().isLeafNode()||l.getNode().forEachChild(cn,(M,$)=>{g.push(Qn(M,$))}),l.isFullyInitialized()&&g.push($n(l.getNode())),Us(d,g,l.getNode(),u)}($,l)}(g,u,l,M,C,$);if(!ee&&!le){const rt=Na(g,u);Ee=Ee.concat(function Vl(d,u,l){const g=u._path,C=js(d,u),M=Ps(d,l),$=d.listenProvider_.startListening(Hs(u),C,M.hashFn,M.onComplete),ee=d.syncPointTree_.subtree(g);if(C)(0,W.hu)(!ii(ee.value),"If we're adding a query, it shouldn't be shadowed");else{const le=ee.fold((Ee,rt,ut)=>{if(!Dn(Ee)&&rt&&ii(rt))return[Pa(rt).query];{let Dt=[];return rt&&(Dt=Dt.concat(fs(rt).map(mn=>mn.query))),rn(ut,(mn,Vn)=>{Dt=Dt.concat(Vn)}),Dt}});for(let Ee=0;Ee<le.length;++Ee){const rt=le[Ee];d.listenProvider_.stopListening(Hs(rt),js(d,rt))}}return $}(d,u,rt))}return Ee}function Pn(d,u,l){const C=d.pendingWriteTree_,M=d.syncPointTree_.findOnPath(u,($,ee)=>{const Ee=Ha(ee,jr($,u));if(Ee)return Ee});return D(C,u,M,l,!0)}function Kn(d,u){return Cn(u,d.syncPointTree_,null,bo(d.pendingWriteTree_,Ie()))}function Cn(d,u,l,g){if(Dn(d.path))return yi(d,u,l,g);{const C=u.get(Ie());null==l&&null!=C&&(l=Ha(C,Ie()));let M=[];const $=ve(d.path),ee=d.operationForChild($),le=u.children.get($);if(le&&ee){const Ee=l?l.getImmediateChild($):null,rt=Xs(g,$);M=M.concat(Cn(ee,le,Ee,rt))}return C&&(M=M.concat(Wu(C,d,g,l))),M}}function yi(d,u,l,g){const C=u.get(Ie());null==l&&null!=C&&(l=Ha(C,Ie()));let M=[];return u.children.inorderTraversal(($,ee)=>{const le=l?l.getImmediateChild($):null,Ee=Xs(g,$),rt=d.operationForChild($);rt&&(M=M.concat(yi(rt,ee,le,Ee)))}),C&&(M=M.concat(Wu(C,d,g,l))),M}function Ps(d,u){const l=u.query,g=js(d,l);return{hashFn:()=>(function Gr(d){return d.viewCache_.serverCache.getNode()}(u)||Nn.EMPTY_NODE).hash(),onComplete:C=>{if("ok"===C)return g?function j(d,u,l){const g=Cs(d,l);if(g){const C=iu(g),M=C.path,$=C.queryId,ee=jr(M,u);return $s(d,M,new ha(Jo($),ee))}return[]}(d,l._path,g):function F(d,u){return Kn(d,new ha({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(d,l._path);{const M=function oi(d,u){let l="Unknown Error";"too_big"===d?l="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===d?l="Client doesn't have permission to access the desired data.":"unavailable"===d&&(l="The service is unavailable");const g=new Error(d+" at "+u._path.toString()+": "+l);return g.code=d.toUpperCase(),g}(C,l);return X(d,l,null,M)}}}}function js(d,u){const l=ho(u);return d.queryToTagMap.get(l)}function ho(d){return d._path.toString()+"$"+d._queryIdentifier}function Cs(d,u){return d.tagToQueryMap.get(u)}function iu(d){const u=d.indexOf("$");return(0,W.hu)(-1!==u&&u<d.length-1,"Bad queryKey."),{queryId:d.substr(u+1),path:new qn(d.substr(0,u))}}function $s(d,u,l){const g=d.syncPointTree_.get(u);return(0,W.hu)(g,"Missing sync point for query tag that we're tracking"),Wu(g,l,bo(d.pendingWriteTree_,u),null)}function Hs(d){return d._queryParams.loadsAllData()&&!d._queryParams.isDefault()?new(function zu(){return(0,W.hu)(ps,"Reference.ts has not been loaded"),ps}())(d._repo,d._path):d}class Cu{constructor(u){this.node_=u}getImmediateChild(u){const l=this.node_.getImmediateChild(u);return new Cu(l)}node(){return this.node_}}class gl{constructor(u,l){this.syncTree_=u,this.path_=l}getImmediateChild(u){const l=gn(this.path_,u);return new gl(this.syncTree_,l)}node(){return Pn(this.syncTree_,this.path_)}}const yl=function(d,u,l){return d&&"object"==typeof d?((0,W.hu)(".sv"in d,"Unexpected leaf node or priority contents"),"string"==typeof d[".sv"]?wd(d[".sv"],u,l):"object"==typeof d[".sv"]?Hc(d[".sv"],u):void(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2))):d},wd=function(d,u,l){if("timestamp"===d)return l.timestamp;(0,W.hu)(!1,"Unexpected server value: "+d)},Hc=function(d,u,l){d.hasOwnProperty("increment")||(0,W.hu)(!1,"Unexpected server value: "+JSON.stringify(d,null,2));const g=d.increment;"number"!=typeof g&&(0,W.hu)(!1,"Unexpected increment value: "+g);const C=u.node();if((0,W.hu)(null!=C,"Expected ChildrenNode.EMPTY_NODE for nulls"),!C.isLeafNode())return g;const $=C.getValue();return"number"!=typeof $?g:$+g},Gs=function(d,u,l,g){return Ti(u,new gl(l,d),g)},oc=function(d,u,l){return Ti(d,new Cu(u),l)};function Ti(d,u,l){const g=d.getPriority().val(),C=yl(g,u.getImmediateChild(".priority"),l);let M;if(d.isLeafNode()){const $=d,ee=yl($.getValue(),u,l);return ee!==$.getValue()||C!==$.getPriority().val()?new et(ee,L(C)):d}{const $=d;return M=$,C!==$.getPriority().val()&&(M=M.updatePriority(new et(C))),$.forEachChild(cn,(ee,le)=>{const Ee=Ti(le,u.getImmediateChild(ee),l);Ee!==le&&(M=M.updateImmediateChild(ee,Ee))}),M}}class Gc{constructor(u="",l=null,g={children:{},childCount:0}){this.name=u,this.parent=l,this.node=g}}function bu(d,u){let l=u instanceof qn?u:new qn(u),g=d,C=ve(l);for(;null!==C;){const M=(0,W.DV)(g.node.children,C)||{children:{},childCount:0};g=new Gc(C,g,M),l=st(l),C=ve(l)}return g}function ia(d){return d.node.value}function _l(d,u){d.node.value=u,qu(d)}function Du(d){return d.node.childCount>0}function Ku(d,u){rn(d.node.children,(l,g)=>{u(new Gc(l,d,g))})}function Wc(d,u,l,g){l&&!g&&u(d),Ku(d,C=>{Wc(C,u,!0,g)}),l&&g&&u(d)}function es(d){return new qn(null===d.parent?d.name:es(d.parent)+"/"+d.name)}function qu(d){null!==d.parent&&function Id(d,u,l){const g=function au(d){return void 0===ia(d)&&!Du(d)}(l),C=(0,W.r3)(d.node.children,u);g&&C?(delete d.node.children[u],d.node.childCount--,qu(d)):!g&&!C&&(d.node.children[u]=l.node,d.node.childCount++,qu(d))}(d.parent,d.name,d)}const Cd=/[\[\].#$\/\u0000-\u001F\u007F]/,zc=/[\[\].#$\u0000-\u001F\u007F]/,ac=10485760,uc=function(d){return"string"==typeof d&&0!==d.length&&!Cd.test(d)},Kc=function(d){return"string"==typeof d&&0!==d.length&&!zc.test(d)},_a=function(d){return null===d||"string"==typeof d||"number"==typeof d&&!sr(d)||d&&"object"==typeof d&&(0,W.r3)(d,".sv")},Fo=function(d,u,l,g){g&&void 0===u||va((0,W.gK)(d,"value"),u,l)},va=function(d,u,l){const g=l instanceof qn?new _s(l,d):l;if(void 0===u)throw new Error(d+"contains undefined "+Or(g));if("function"==typeof u)throw new Error(d+"contains a function "+Or(g)+" with contents = "+u.toString());if(sr(u))throw new Error(d+"contains "+u.toString()+" "+Or(g));if("string"==typeof u&&u.length>ac/3&&(0,W.ug)(u)>ac)throw new Error(d+"contains a string greater than "+ac+" utf8 bytes "+Or(g)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let C=!1,M=!1;if(rn(u,($,ee)=>{if(".value"===$)C=!0;else if(".priority"!==$&&".sv"!==$&&(M=!0,!uc($)))throw new Error(d+" contains an invalid key ("+$+") "+Or(g)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function vs(d,u){d.parts_.length>0&&(d.byteLength_+=1),d.parts_.push(u),d.byteLength_+=(0,W.ug)(u),Ro(d)})(g,$),va(d,ee,g),function _o(d){const u=d.parts_.pop();d.byteLength_-=(0,W.ug)(u),d.parts_.length>0&&(d.byteLength_-=1)}(g)}),C&&M)throw new Error(d+' contains ".value" child '+Or(g)+" in addition to actual children.")}},qc=function(d,u,l,g){if(g&&void 0===u)return;const C=(0,W.gK)(d,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(C+" must be an object containing the children to replace.");const M=[];rn(u,($,ee)=>{const le=new qn($);if(va(C,ee,gn(l,le)),".priority"===Mt(le)&&!_a(ee))throw new Error(C+"contains an invalid value for '"+le.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");M.push(le)}),function(d,u){let l,g;for(l=0;l<u.length;l++){g=u[l];const M=Zn(g);for(let $=0;$<M.length;$++)if((".priority"!==M[$]||$!==M.length-1)&&!uc(M[$]))throw new Error(d+"contains an invalid key ("+M[$]+") in path "+g.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(yo);let C=null;for(l=0;l<u.length;l++){if(g=u[l],null!==C&&$r(C,g))throw new Error(d+"contains a path "+C.toString()+" that is ancestor of another path "+g.toString());C=g}}(C,M)},Ea=function(d,u,l){if(!l||void 0!==u){if(sr(u))throw new Error((0,W.gK)(d,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!_a(u))throw new Error((0,W.gK)(d,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ul=function(d,u,l,g){if(!(g&&void 0===l||uc(l)))throw new Error((0,W.gK)(d,u)+'was an invalid key = "'+l+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Ga=function(d,u,l,g){if(!(g&&void 0===l||Kc(l)))throw new Error((0,W.gK)(d,u)+'was an invalid path = "'+l+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Lo=function(d,u){if(".info"===ve(u))throw new Error(d+" failed = Can't modify data under /.info/")},Bl=function(d,u){const l=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!uc(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==l.length&&!function(d){return d&&(d=d.replace(/^\/*\.info(\/|$)/,"/")),Kc(d)}(l))throw new Error((0,W.gK)(d,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class lc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Wa(d,u){let l=null;for(let g=0;g<u.length;g++){const C=u[g],M=C.getPath();null!==l&&!Vi(M,l.path)&&(d.eventLists_.push(l),l=null),null===l&&(l={events:[],path:M}),l.events.push(C)}l&&d.eventLists_.push(l)}function sa(d,u,l){Wa(d,l),jl(d,g=>Vi(g,u))}function oa(d,u,l){Wa(d,l),jl(d,g=>$r(g,u)||$r(u,g))}function jl(d,u){d.recursionDepth_++;let l=!0;for(let g=0;g<d.eventLists_.length;g++){const C=d.eventLists_[g];C&&(u(C.path)?(dh(d.eventLists_[g]),d.eventLists_[g]=null):l=!1)}l&&(d.eventLists_=[]),d.recursionDepth_--}function dh(d){for(let u=0;u<d.events.length;u++){const l=d.events[u];if(null!==l){d.events[u]=null;const g=l.getEventRunner();it&&Bt("event: "+l.toString()),qt(g)}}}const aa="repo_interrupt";class Oa{constructor(u,l,g,C){this.repoInfo_=u,this.forceRestClient_=l,this.authTokenProvider_=g,this.appCheckProvider_=C,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new lc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ao(),this.transactionQueueTree_=new Gc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Zc(d){const l=d.infoData_.getNode(new qn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+l}function uu(d){return function(d){return(d=d||{}).timestamp=d.timestamp||(new Date).getTime(),d}({timestamp:Zc(d)})}function dc(d,u,l,g,C){d.dataUpdateCount++;const M=new qn(u);l=d.interceptServerDataCallback_?d.interceptServerDataCallback_(u,l):l;let $=[];if(C)if(g){const le=(0,W.UI)(l,Ee=>L(Ee));$=function nt(d,u,l,g){const C=Cs(d,g);if(C){const M=iu(C),$=M.path,ee=M.queryId,le=jr($,u),Ee=zn.fromObject(l);return $s(d,$,new ws(Jo(ee),le,Ee))}return[]}(d.serverSyncTree_,M,le,C)}else{const le=L(l);$=$e(d.serverSyncTree_,M,le,C)}else if(g){const le=(0,W.UI)(l,Ee=>L(Ee));$=function Yi(d,u,l){const g=zn.fromObject(l);return Kn(d,new ws({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,g))}(d.serverSyncTree_,M,le)}else{const le=L(l);$=Bs(d.serverSyncTree_,M,le)}let ee=M;$.length>0&&(ee=Ru(d,M)),oa(d.eventQueue_,ee,$)}function bd(d,u){Dd(d,"connected",u),!1===u&&function hh(d){li(d,"onDisconnectEvents");const u=uu(d),l=ao();Qo(d.onDisconnect_,Ie(),(C,M)=>{const $=Gs(C,M,d.serverSyncTree_,u);uo(l,C,$)});let g=[];Qo(l,Ie(),(C,M)=>{g=g.concat(Bs(d.serverSyncTree_,C,M));const $=Xc(d,C);Ru(d,$)}),d.onDisconnect_=ao(),oa(d.eventQueue_,Ie(),g)}(d)}function Dd(d,u,l){const g=new qn("/.info/"+u),C=L(l);d.infoData_.updateSnapshot(g,C);const M=Bs(d.infoSyncTree_,g,C);oa(d.eventQueue_,g,M)}function vl(d){return d.nextWriteId_++}function El(d,u){const l=function Hn(d,u){const l=u._path;let g=null;d.syncPointTree_.foreachOnPath(l,(Ee,rt)=>{const ut=jr(Ee,l);g=g||Ha(rt,ut)});let C=d.syncPointTree_.get(l);C?g=g||Ha(C,Ie()):(C=new ra,d.syncPointTree_=d.syncPointTree_.set(l,C));const M=null!=g,$=M?new Ks(g,!0,!1):null;return function Gu(d){return Xo(d.viewCache_)}($a(C,u,bo(d.pendingWriteTree_,u._path),M?$.getNode():Nn.EMPTY_NODE,M))}(d.serverSyncTree_,u);return null!=l?Promise.resolve(l):d.server_.get(u).then(g=>{const C=L(g).withIndex(u._queryParams.getIndex());if(u._queryParams.loadsAllData())Bs(d.serverSyncTree_,u._path,C);else{const $=function me(d,u){const{syncPoint:l,serverCache:g,writesCache:C,serverCacheComplete:M}=bt(u,d),$=$a(l,u,C,g,M);return l.views.has(u._queryIdentifier)||l.views.set(u._queryIdentifier,$),u._queryParams.loadsAllData()?null:js(d,u)}(d.serverSyncTree_,u);$e(d.serverSyncTree_,u._path,C,$)}return X(d.serverSyncTree_,u,null).length>0&&li(d,"unexpected cancel events in repoGetValue"),C},g=>(li(d,"get for query "+(0,W.Pz)(u)+" failed: "+g),Promise.reject(new Error(g))))}function za(d,u,l,g,C){li(d,"set",{path:u.toString(),value:l,priority:g});const M=uu(d),$=L(l,g),ee=Pn(d.serverSyncTree_,u),le=oc($,ee,M),Ee=vl(d),rt=$c(d.serverSyncTree_,u,le,Ee,!0);Wa(d.eventQueue_,rt),d.server_.put(u.toString(),$.val(!0),(Dt,mn)=>{const Vn="ok"===Dt;Vn||tn("set at "+u+" failed: "+Dt);const _i=Wo(d.serverSyncTree_,Ee,!Vn);oa(d.eventQueue_,u,_i),ka(0,C,Dt,mn)});const ut=Xc(d,u);Ru(d,ut),oa(d.eventQueue_,ut,[])}function Au(d,u,l){d.server_.onDisconnectCancel(u.toString(),(g,C)=>{"ok"===g&&nu(d.onDisconnect_,u),ka(0,l,g,C)})}function Yc(d,u,l,g){const C=L(l);d.server_.onDisconnectPut(u.toString(),C.val(!0),(M,$)=>{"ok"===M&&uo(d.onDisconnect_,u,C),ka(0,g,M,$)})}function xu(d,u,l){let g;g=".info"===ve(u._path)?X(d.infoSyncTree_,u,l):X(d.serverSyncTree_,u,l),sa(d.eventQueue_,u._path,g)}function Yu(d){d.persistentConnection_&&d.persistentConnection_.interrupt(aa)}function li(d,...u){let l="";d.persistentConnection_&&(l=d.persistentConnection_.id+":"),Bt(l,...u)}function ka(d,u,l,g){u&&qt(()=>{if("ok"===l)u(null);else{const C=(l||"error").toUpperCase();let M=C;g&&(M+=": "+g);const $=new Error(M);$.code=C,u($)}})}function fc(d,u,l){return Pn(d.serverSyncTree_,u,l)||Nn.EMPTY_NODE}function pc(d,u=d.transactionQueueTree_){if(u||lu(d,u),ia(u)){const l=Ka(d,u);(0,W.hu)(l.length>0,"Sending zero length transaction queue"),l.every(C=>0===C.status)&&function Qu(d,u,l){const g=l.map(Ee=>Ee.currentWriteId),C=fc(d,u,g);let M=C;const $=C.hash();for(let Ee=0;Ee<l.length;Ee++){const rt=l[Ee];(0,W.hu)(0===rt.status,"tryToSendTransactionQueue_: items in queue should all be run."),rt.status=1,rt.retryCount++;const ut=jr(u,rt.path);M=M.updateChild(ut,rt.currentOutputSnapshotRaw)}const ee=M.val(!0),le=u;d.server_.put(le.toString(),ee,Ee=>{li(d,"transaction put response",{path:le.toString(),status:Ee});let rt=[];if("ok"===Ee){const ut=[];for(let Dt=0;Dt<l.length;Dt++)l[Dt].status=2,rt=rt.concat(Wo(d.serverSyncTree_,l[Dt].currentWriteId)),l[Dt].onComplete&&ut.push(()=>l[Dt].onComplete(null,!0,l[Dt].currentOutputSnapshotResolved)),l[Dt].unwatcher();lu(d,bu(d.transactionQueueTree_,u)),pc(d,d.transactionQueueTree_),oa(d.eventQueue_,u,rt);for(let Dt=0;Dt<ut.length;Dt++)qt(ut[Dt])}else{if("datastale"===Ee)for(let ut=0;ut<l.length;ut++)l[ut].status=3===l[ut].status?4:0;else{tn("transaction at "+le.toString()+" failed: "+Ee);for(let ut=0;ut<l.length;ut++)l[ut].status=4,l[ut].abortReason=Ee}Ru(d,u)}},$)}(d,es(u),l)}else Du(u)&&Ku(u,l=>{pc(d,l)})}function Ru(d,u){const l=Ju(d,u),g=es(l);return function Sd(d,u,l){if(0===u.length)return;const g=[];let C=[];const $=u.filter(ee=>0===ee.status).map(ee=>ee.currentWriteId);for(let ee=0;ee<u.length;ee++){const le=u[ee],Ee=jr(l,le.path);let ut,rt=!1;if((0,W.hu)(null!==Ee,"rerunTransactionsUnderNode_: relativePath should not be null."),4===le.status)rt=!0,ut=le.abortReason,C=C.concat(Wo(d.serverSyncTree_,le.currentWriteId,!0));else if(0===le.status)if(le.retryCount>=25)rt=!0,ut="maxretry",C=C.concat(Wo(d.serverSyncTree_,le.currentWriteId,!0));else{const Dt=fc(d,le.path,$);le.currentInputSnapshot=Dt;const mn=u[ee].update(Dt.val());if(void 0!==mn){va("transaction failed: Data returned ",mn,le.path);let Vn=L(mn);"object"==typeof mn&&null!=mn&&(0,W.r3)(mn,".priority")||(Vn=Vn.updatePriority(Dt.getPriority()));const Ds=le.currentWriteId,Ql=uu(d),La=oc(Vn,Dt,Ql);le.currentOutputSnapshotRaw=Vn,le.currentOutputSnapshotResolved=La,le.currentWriteId=vl(d),$.splice($.indexOf(Ds),1),C=C.concat($c(d.serverSyncTree_,le.path,La,le.currentWriteId,le.applyLocally)),C=C.concat(Wo(d.serverSyncTree_,Ds,!0))}else rt=!0,ut="nodata",C=C.concat(Wo(d.serverSyncTree_,le.currentWriteId,!0))}oa(d.eventQueue_,l,C),C=[],rt&&(u[ee].status=2,setTimeout(u[ee].unwatcher,Math.floor(0)),u[ee].onComplete&&g.push("nodata"===ut?()=>u[ee].onComplete(null,!1,u[ee].currentInputSnapshot):()=>u[ee].onComplete(new Error(ut),!1,null)))}lu(d,d.transactionQueueTree_);for(let ee=0;ee<g.length;ee++)qt(g[ee]);pc(d,d.transactionQueueTree_)}(d,Ka(d,l),g),g}function Ju(d,u){let l,g=d.transactionQueueTree_;for(l=ve(u);null!==l&&void 0===ia(g);)g=bu(g,l),l=ve(u=st(u));return g}function Ka(d,u){const l=[];return Jc(d,u,l),l.sort((g,C)=>g.order-C.order),l}function Jc(d,u,l){const g=ia(u);if(g)for(let C=0;C<g.length;C++)l.push(g[C]);Ku(u,C=>{Jc(d,C,l)})}function lu(d,u){const l=ia(u);if(l){let g=0;for(let C=0;C<l.length;C++)2!==l[C].status&&(l[g]=l[C],g++);l.length=g,_l(u,l.length>0?l:void 0)}Ku(u,g=>{lu(d,g)})}function Xc(d,u){const l=es(Ju(d,u)),g=bu(d.transactionQueueTree_,u);return function lh(d,u,l){let g=l?d:d.parent;for(;null!==g;){if(u(g))return!0;g=g.parent}}(g,C=>{Mu(d,C)}),Mu(d,g),Wc(g,C=>{Mu(d,C)}),l}function Mu(d,u){const l=ia(u);if(l){const g=[];let C=[],M=-1;for(let $=0;$<l.length;$++)3===l[$].status||(1===l[$].status?((0,W.hu)(M===$-1,"All SENT items should be at beginning of queue."),M=$,l[$].status=3,l[$].abortReason="set"):((0,W.hu)(0===l[$].status,"Unexpected transaction status in abort"),l[$].unwatcher(),C=C.concat(Wo(d.serverSyncTree_,l[$].currentWriteId,!0)),l[$].onComplete&&g.push(l[$].onComplete.bind(null,new Error("set"),!1,null))));-1===M?_l(u,void 0):l.length=M+1,oa(d.eventQueue_,es(u),C);for(let $=0;$<g.length;$++)qt(g[$])}}const ts=function(d,u){const l=Wr(d),g=l.namespace;return"firebase.com"===l.domain&&Vt(l.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!g||"undefined"===g)&&"localhost"!==l.domain&&Vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),l.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new pn(l.host,l.secure,g,"ws"===l.scheme||"wss"===l.scheme,u,"",g!==l.subdomain),path:new qn(l.pathString)}},Wr=function(d){let u="",l="",g="",C="",M="",$=!0,ee="https",le=443;if("string"==typeof d){let Ee=d.indexOf("//");Ee>=0&&(ee=d.substring(0,Ee-1),d=d.substring(Ee+2));let rt=d.indexOf("/");-1===rt&&(rt=d.length);let ut=d.indexOf("?");-1===ut&&(ut=d.length),u=d.substring(0,Math.min(rt,ut)),rt<ut&&(C=function Xu(d){let u="";const l=d.split("/");for(let g=0;g<l.length;g++)if(l[g].length>0){let C=l[g];try{C=decodeURIComponent(C.replace(/\+/g," "))}catch(M){}u+="/"+C}return u}(d.substring(rt,ut)));const Dt=function Vo(d){const u={};"?"===d.charAt(0)&&(d=d.substring(1));for(const l of d.split("&")){if(0===l.length)continue;const g=l.split("=");2===g.length?u[decodeURIComponent(g[0])]=decodeURIComponent(g[1]):tn(`Invalid query segment '${l}' in query '${d}'`)}return u}(d.substring(Math.min(d.length,ut)));Ee=u.indexOf(":"),Ee>=0?($="https"===ee||"wss"===ee,le=parseInt(u.substring(Ee+1),10)):Ee=u.length;const mn=u.slice(0,Ee);if("localhost"===mn.toLowerCase())l="localhost";else if(mn.split(".").length<=2)l=mn;else{const Vn=u.indexOf(".");g=u.substring(0,Vn).toLowerCase(),l=u.substring(Vn+1),M=g}"ns"in Dt&&(M=Dt.ns)}return{host:u,port:le,domain:l,subdomain:g,secure:$,scheme:ee,pathString:C,namespace:M}};class Hl{constructor(u,l,g,C){this.eventType=u,this.eventRegistration=l,this.snapshot=g,this.prevName=C}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,W.Pz)(this.snapshot.exportVal())}}class Os{constructor(u,l,g){this.eventRegistration=u,this.error=l,this.path=g}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Uo{constructor(u,l){this.snapshotCallback=u,this.cancelCallback=l}onValue(u,l){this.snapshotCallback.call(null,u,l)}onCancel(u){return(0,W.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class Gl{constructor(u,l){this._repo=u,this._path=l}cancel(){const u=new W.BH;return Au(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){Lo("OnDisconnect.remove",this._path);const u=new W.BH;return Yc(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){Lo("OnDisconnect.set",this._path),Fo("OnDisconnect.set",u,this._path,!1);const l=new W.BH;return Yc(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}setWithPriority(u,l){Lo("OnDisconnect.setWithPriority",this._path),Fo("OnDisconnect.setWithPriority",u,this._path,!1),Ea("OnDisconnect.setWithPriority",l,!1);const g=new W.BH;return function Zu(d,u,l,g,C){const M=L(l,g);d.server_.onDisconnectPut(u.toString(),M.val(!0),($,ee)=>{"ok"===$&&uo(d.onDisconnect_,u,M),ka(0,C,$,ee)})}(this._repo,this._path,u,l,g.wrapCallback(()=>{})),g.promise}update(u){Lo("OnDisconnect.update",this._path),qc("OnDisconnect.update",u,this._path,!1);const l=new W.BH;return function hc(d,u,l,g){if((0,W.xb)(l))return Bt("onDisconnect().update() called with empty data.  Don't do anything."),void ka(0,g,"ok",void 0);d.server_.onDisconnectMerge(u.toString(),l,(C,M)=>{"ok"===C&&rn(l,($,ee)=>{const le=L(ee);uo(d.onDisconnect_,gn(u,$),le)}),ka(0,g,C,M)})}(this._repo,this._path,u,l.wrapCallback(()=>{})),l.promise}}class Pi{constructor(u,l,g,C){this._repo=u,this._path=l,this._queryParams=g,this._orderByCalled=C}get key(){return Dn(this._path)?null:Mt(this._path)}get ref(){return new Gi(this._repo,this._path)}get _queryIdentifier(){const u=Da(this._queryParams),l=Qt(u);return"{}"===l?"default":l}get _queryObject(){return Da(this._queryParams)}isEqual(u){if(!((u=(0,W.m9)(u))instanceof Pi))return!1;const l=this._repo===u._repo,g=Vi(this._path,u._path);return l&&g&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Gt(d){let u="";for(let l=d.pieceNum_;l<d.pieces_.length;l++)""!==d.pieces_[l]&&(u+="/"+encodeURIComponent(String(d.pieces_[l])));return u||"/"}(this._path)}}function el(d,u){if(!0===d._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function ua(d){let u=null,l=null;if(d.hasStart()&&(u=d.getIndexStartValue()),d.hasEnd()&&(l=d.getIndexEndValue()),d.getIndex()===ti){const g="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",C="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(d.hasStart()){if(d.getIndexStartName()!==Xn)throw new Error(g);if("string"!=typeof u)throw new Error(C)}if(d.hasEnd()){if(d.getIndexEndName()!==fr)throw new Error(g);if("string"!=typeof l)throw new Error(C)}}else if(d.getIndex()===cn){if(null!=u&&!_a(u)||null!=l&&!_a(l))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,W.hu)(d.getIndex()instanceof k||d.getIndex()===R,"unknown index type."),null!=u&&"object"==typeof u||null!=l&&"object"==typeof l)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fo(d){if(d.hasStart()&&d.hasEnd()&&d.hasLimit()&&!d.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Gi extends Pi{constructor(u,l){super(u,l,new ri,!1)}get parent(){const u=ai(this._path);return null===u?null:new Gi(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class cu{constructor(u,l,g){this._node=u,this.ref=l,this._index=g}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const l=new qn(u),g=du(this.ref,u);return new cu(this._node.getChild(l),g,cn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(g,C)=>u(new cu(C,du(this.ref,g),cn)))}hasChild(u){const l=new qn(u);return!this._node.getChild(l).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function tl(d,u){return(d=(0,W.m9)(d))._checkNotDeleted("ref"),void 0!==u?du(d._root,u):d._root}function gc(d,u){(d=(0,W.m9)(d))._checkNotDeleted("refFromURL");const l=ts(u,d._repo.repoInfo_.nodeAdmin);Bl("refFromURL",l);const g=l.repoInfo;return!d._repo.repoInfo_.isCustomHost()&&g.host!==d._repo.repoInfo_.host&&Vt("refFromURL: Host name does not match the current database: (found "+g.host+" but expected "+d._repo.repoInfo_.host+")"),tl(d,l.path.toString())}function du(d,u){return null===ve((d=(0,W.m9)(d))._path)?(l=u,l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Ga("child","path",l,!1)):Ga("child","path",u,!1),new Gi(d._repo,gn(d._path,u));var l}function So(d,u){d=(0,W.m9)(d),Lo("set",d._path),Fo("set",u,d._path,!1);const l=new W.BH;return za(d._repo,d._path,u,null,l.wrapCallback(()=>{})),l.promise}function Wl(d,u){qc("update",u,d._path,!1);const l=new W.BH;return function wl(d,u,l,g){li(d,"update",{path:u.toString(),value:l});let C=!0;const M=uu(d),$={};if(rn(l,(ee,le)=>{C=!1,$[ee]=Gs(gn(u,ee),L(le),d.serverSyncTree_,M)}),C)Bt("update() called with empty data.  Don't do anything."),ka(0,g,"ok",void 0);else{const ee=vl(d),le=function $i(d,u,l,g){!function ru(d,u,l,g){(0,W.hu)(g>d.lastWriteId,"Stacking an older merge on top of newer ones"),d.allWrites.push({path:u,children:l,writeId:g,visible:!0}),d.visibleWrites=Ns(d.visibleWrites,u,l),d.lastWriteId=g}(d.pendingWriteTree_,u,l,g);const C=zn.fromObject(l);return Kn(d,new ws({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,C))}(d.serverSyncTree_,u,$,ee);Wa(d.eventQueue_,le),d.server_.merge(u.toString(),l,(Ee,rt)=>{const ut="ok"===Ee;ut||tn("update at "+u+" failed: "+Ee);const Dt=Wo(d.serverSyncTree_,ee,!ut),mn=Dt.length>0?Ru(d,u):u;oa(d.eventQueue_,mn,Dt),ka(0,g,Ee,rt)}),rn(l,Ee=>{const rt=Xc(d,gn(u,Ee));Ru(d,rt)}),oa(d.eventQueue_,u,[])}}(d._repo,d._path,u,l.wrapCallback(()=>{})),l.promise}class Cl{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,l){const g=l._queryParams.getIndex();return new Hl("value",this,new cu(u.snapshotNode,new Gi(l._repo,l._path),g))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new Os(this,u,l):null}matches(u){return u instanceof Cl&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class po{constructor(u,l){this.eventType=u,this.callbackContext=l}respondsTo(u){let l="children_added"===u?"child_added":u;return l="children_removed"===l?"child_removed":l,this.eventType===l}createCancelEvent(u,l){return this.callbackContext.hasCancelCallback?new Os(this,u,l):null}createEvent(u,l){(0,W.hu)(null!=u.childName,"Child events should have a childName.");const g=du(new Gi(l._repo,l._path),u.childName),C=l._queryParams.getIndex();return new Hl(u.type,this,new cu(u.snapshotNode,g,C),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof po&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Nu(d,u,l,g,C){let M;if("object"==typeof g&&(M=void 0,C=g),"function"==typeof g&&(M=g),C&&C.onlyOnce){const le=l,Ee=(rt,ut)=>{xu(d._repo,d,ee),le(rt,ut)};Ee.userCallback=l.userCallback,Ee.context=l.context,l=Ee}const $=new Uo(l,M||void 0),ee="value"===u?new Cl($):new po(u,$);return function Td(d,u,l){let g;g=".info"===ve(u._path)?Pt(d.infoSyncTree_,u,l):Pt(d.serverSyncTree_,u,l),sa(d.eventQueue_,u._path,g)}(d._repo,d,ee),()=>xu(d._repo,d,ee)}function bl(d,u,l,g){return Nu(d,"value",u,l,g)}function ed(d,u,l,g){return Nu(d,"child_added",u,l,g)}function qa(d,u,l,g){return Nu(d,"child_changed",u,l,g)}function Dl(d,u,l,g){return Nu(d,"child_moved",u,l,g)}function nl(d,u,l,g){return Nu(d,"child_removed",u,l,g)}function _c(d,u,l){let g=null;const C=l?new Uo(l):null;"value"===u?g=new Cl(C):u&&(g=new po(u,C)),xu(d._repo,d,g)}class Fa{}class bs extends Fa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Fo("endAt",this._value,u._path,!0);const l=Mo(u._queryParams,this._value,this._key);if(fo(l),ua(l),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pi(u._repo,u._path,l,u._orderByCalled)}}class Rd extends Fa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Fo("endBefore",this._value,u._path,!1);const l=function No(d,u,l){let g,C;return d.index_===ti?("string"==typeof u&&(u=Ut(u)),C=Mo(d,u,l)):(g=null==l?Xn:Ut(l),C=Mo(d,u,g)),C.endBeforeSet_=!0,C}(u._queryParams,this._value,this._key);if(fo(l),ua(l),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Pi(u._repo,u._path,l,u._orderByCalled)}}class ks extends Fa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Fo("startAt",this._value,u._path,!0);const l=so(u._queryParams,this._value,this._key);if(fo(l),ua(l),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Pi(u._repo,u._path,l,u._orderByCalled)}}class f extends Fa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){Fo("startAfter",this._value,u._path,!1);const l=function wo(d,u,l){let g;if(d.index_===ti)"string"==typeof u&&(u=Kt(u)),g=so(d,u,l);else{let C;C=null==l?fr:Kt(l),g=so(d,u,C)}return g.startAfterSet_=!0,g}(u._queryParams,this._value,this._key);if(fo(l),ua(l),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Pi(u._repo,u._path,l,u._orderByCalled)}}class T extends Fa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pi(u._repo,u._path,function lr(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="l",l}(u._queryParams,this._limit),u._orderByCalled)}}class re extends Fa{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Pi(u._repo,u._path,function Bi(d,u){const l=d.copy();return l.limitSet_=!0,l.limit_=u,l.viewFrom_="r",l}(u._queryParams,this._limit),u._orderByCalled)}}class dt extends Fa{constructor(u){super(),this._path=u}_apply(u){el(u,"orderByChild");const l=new qn(this._path);if(Dn(l))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const g=new k(l),C=Io(u._queryParams,g);return ua(C),new Pi(u._repo,u._path,C,!0)}}class sn extends Fa{_apply(u){el(u,"orderByKey");const l=Io(u._queryParams,ti);return ua(l),new Pi(u._repo,u._path,l,!0)}}class On extends Fa{_apply(u){el(u,"orderByPriority");const l=Io(u._queryParams,cn);return ua(l),new Pi(u._repo,u._path,l,!0)}}class zo extends Fa{_apply(u){el(u,"orderByValue");const l=Io(u._queryParams,R);return ua(l),new Pi(u._repo,u._path,l,!0)}}class Md extends Fa{constructor(u,l){super(),this._value=u,this._key=l}_apply(u){if(Fo("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new bs(this._value,this._key)._apply(new ks(this._value,this._key)._apply(u))}}function Ko(d,...u){let l=(0,W.m9)(d);for(const g of u)l=g._apply(l);return l}(function Do(d){(0,W.hu)(!pa,"__referenceConstructor has already been defined"),pa=d})(Gi),function Nr(d){(0,W.hu)(!ps,"__referenceConstructor has already been defined"),ps=d}(Gi);const Ya={};function vc(d,u,l,g,C){let M=g||d.options.databaseURL;void 0===M&&(d.options.projectId||Vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bt("Using default host for project ",d.options.projectId),M=`${d.options.projectId}-default-rtdb.firebaseio.com`);let le,Ee,$=ts(M,C),ee=$.repoInfo;"undefined"!=typeof process&&process.env&&(Ee=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Ee?(le=!0,M=`http://${Ee}?ns=${ee.namespace}`,$=ts(M,C),ee=$.repoInfo):le=!$.repoInfo.secure;const rt=C&&le?new vi(vi.OWNER):new wn(d.name,d.options,u);Bl("Invalid Firebase Database URL",$),Dn($.path)||Vt("Database URL must point to the root of a Firebase Database (not including a child path).");const ut=function Bo(d,u,l,g){let C=Ya[u.name];C||(C={},Ya[u.name]=C);let M=C[d.toURLString()];return M&&Vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),M=new Oa(d,false,l,g),C[d.toURLString()]=M,M}(ee,d,rt,new Si(d.name,l));return new Pd(ut,d)}class Pd{constructor(u,l){this._repoInternal=u,this.app=l,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Su(d,u,l){if(d.stats_=qr(d.repoInfo_),d.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)d.server_=new oo(d.repoInfo_,(g,C,M,$)=>{dc(d,g,C,M,$)},d.authTokenProvider_,d.appCheckProvider_),setTimeout(()=>bd(d,!0),0);else{if(null!=l){if("object"!=typeof l)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,W.Pz)(l)}catch(g){throw new Error("Invalid authOverride provided: "+g)}}d.persistentConnection_=new os(d.repoInfo_,u,(g,C,M,$)=>{dc(d,g,C,M,$)},g=>{bd(d,g)},g=>{!function $l(d,u){rn(u,(l,g)=>{Dd(d,l,g)})}(d,g)},d.authTokenProvider_,d.appCheckProvider_,l),d.server_=d.persistentConnection_}d.authTokenProvider_.addTokenChangeListener(g=>{d.server_.refreshAuthToken(g)}),d.appCheckProvider_.addTokenChangeListener(g=>{d.server_.refreshAppCheckToken(g.token)}),d.statsReporter_=function wi(d,u){const l=d.toString();return zi[l]||(zi[l]=u()),zi[l]}(d.repoInfo_,()=>new Fl(d.stats_,d.server_)),d.infoData_=new Ta,d.infoSyncTree_=new ls({startListening:(g,C,M,$)=>{let ee=[];const le=d.infoData_.getNode(g._path);return le.isEmpty()||(ee=Bs(d.infoSyncTree_,g._path,le),setTimeout(()=>{$("ok")},0)),ee},stopListening:()=>{}}),Dd(d,"connected",!1),d.serverSyncTree_=new ls({startListening:(g,C,M,$)=>(d.server_.listen(g,M,C,(ee,le)=>{const Ee=$(ee,le);oa(d.eventQueue_,g._path,Ee)}),[]),stopListening:(g,C)=>{d.server_.unlisten(g,C)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Gi(this._repo,Ie())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function nd(d,u){const l=Ya[u];(!l||l[d.key]!==d)&&Vt(`Database ${u}(${d.repoInfo_}) has already been deleted.`),Yu(d),delete l[d.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Vt("Cannot call "+u+" on a deleted database.")}}function Qa(){Ce.IS_TRANSPORT_INITIALIZED&&tn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Od(){Qa(),ur.forceDisallow()}function id(){Qa(),En.forceDisallow(),ur.forceAllow()}function nf(d,u){un(d,u)}const rf={".sv":"timestamp"};class kd{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}os.prototype.simpleListen=function(d,u){this.sendRequest("q",{p:d},u)},os.prototype.echo=function(d,u){this.sendRequest("echo",{d},u)},function ql(d){lt(ht.SDK_VERSION),(0,ht._registerComponent)(new xe.wA("database",(u,{instanceIdentifier:l})=>vc(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),l),"PUBLIC").setMultipleInstances(!0)),(0,ht.registerVersion)(Et,"0.13.2",d),(0,ht.registerVersion)(Et,"0.13.2","esm2017")}();const uf=new Ge.Yd("@firebase/database-compat"),Ec=function(d){uf.warn("FIREBASE WARNING: "+d)};class Ld{constructor(u){this._delegate=u}cancel(u){(0,W.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,W.Wj)("OnDisconnect.cancel","onComplete",u,!0);const l=this._delegate.cancel();return u&&l.then(()=>u(null),g=>u(g)),l}remove(u){(0,W.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,W.Wj)("OnDisconnect.remove","onComplete",u,!0);const l=this._delegate.remove();return u&&l.then(()=>u(null),g=>u(g)),l}set(u,l){(0,W.Dv)("OnDisconnect.set",1,2,arguments.length),(0,W.Wj)("OnDisconnect.set","onComplete",l,!0);const g=this._delegate.set(u);return l&&g.then(()=>l(null),C=>l(C)),g}setWithPriority(u,l,g){(0,W.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,W.Wj)("OnDisconnect.setWithPriority","onComplete",g,!0);const C=this._delegate.setWithPriority(u,l);return g&&C.then(()=>g(null),M=>g(M)),C}update(u,l){if((0,W.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const C={};for(let M=0;M<u.length;++M)C[""+M]=u[M];u=C,Ec("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,W.Wj)("OnDisconnect.update","onComplete",l,!0);const g=this._delegate.update(u);return l&&g.then(()=>l(null),C=>l(C)),g}}class lf{constructor(u,l){this.committed=u,this.snapshot=l}toJSON(){return(0,W.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ja{constructor(u,l){this._database=u,this._delegate=l}val(){return(0,W.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,W.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,W.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,W.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,W.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),Ga("DataSnapshot.child","path",u,!1),new Ja(this._database,this._delegate.child(u))}hasChild(u){return(0,W.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Ga("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,W.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,W.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,W.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(l=>u(new Ja(this._database,l)))}hasChildren(){return(0,W.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,W.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,W.Dv)("DataSnapshot.ref",0,0,arguments.length),new la(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ur{constructor(u,l){this.database=u,this._delegate=l}on(u,l,g,C){var M;(0,W.Dv)("Query.on",2,4,arguments.length),(0,W.Wj)("Query.on","callback",l,!1);const $=Ur.getCancelAndContextArgs_("Query.on",g,C),ee=(Ee,rt)=>{l.call($.context,new Ja(this.database,Ee),rt)};ee.userCallback=l,ee.context=$.context;const le=null===(M=$.cancel)||void 0===M?void 0:M.bind($.context);switch(u){case"value":return bl(this._delegate,ee,le),l;case"child_added":return ed(this._delegate,ee,le),l;case"child_removed":return nl(this._delegate,ee,le),l;case"child_changed":return qa(this._delegate,ee,le),l;case"child_moved":return Dl(this._delegate,ee,le),l;default:throw new Error((0,W.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,l,g){if((0,W.Dv)("Query.off",0,3,arguments.length),function(d,u,l){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,W.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,W.Wj)("Query.off","callback",l,!0),(0,W.lb)("Query.off","context",g,!0),l){const C=()=>{};C.userCallback=l,C.context=g,_c(this._delegate,u,C)}else _c(this._delegate,u)}get(){return function xd(d){return El((d=(0,W.m9)(d))._repo,d).then(u=>new cu(u,new Gi(d._repo,d._path),d._queryParams.getIndex()))}(this._delegate).then(u=>new Ja(this.database,u))}once(u,l,g,C){(0,W.Dv)("Query.once",1,4,arguments.length),(0,W.Wj)("Query.once","callback",l,!0);const M=Ur.getCancelAndContextArgs_("Query.once",g,C),$=new W.BH,ee=(Ee,rt)=>{const ut=new Ja(this.database,Ee);l&&l.call(M.context,ut,rt),$.resolve(ut)};ee.userCallback=l,ee.context=M.context;const le=Ee=>{M.cancel&&M.cancel.call(M.context,Ee),$.reject(Ee)};switch(u){case"value":bl(this._delegate,ee,le,{onlyOnce:!0});break;case"child_added":ed(this._delegate,ee,le,{onlyOnce:!0});break;case"child_removed":nl(this._delegate,ee,le,{onlyOnce:!0});break;case"child_changed":qa(this._delegate,ee,le,{onlyOnce:!0});break;case"child_moved":Dl(this._delegate,ee,le,{onlyOnce:!0});break;default:throw new Error((0,W.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return $.promise}limitToFirst(u){return(0,W.Dv)("Query.limitToFirst",1,1,arguments.length),new Ur(this.database,Ko(this._delegate,function z(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new T(d)}(u)))}limitToLast(u){return(0,W.Dv)("Query.limitToLast",1,1,arguments.length),new Ur(this.database,Ko(this._delegate,function Le(d){if("number"!=typeof d||Math.floor(d)!==d||d<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new re(d)}(u)))}orderByChild(u){return(0,W.Dv)("Query.orderByChild",1,1,arguments.length),new Ur(this.database,Ko(this._delegate,function Ft(d){if("$key"===d)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===d)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===d)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ga("orderByChild","path",d,!1),new dt(d)}(u)))}orderByKey(){return(0,W.Dv)("Query.orderByKey",0,0,arguments.length),new Ur(this.database,Ko(this._delegate,function Gn(){return new sn}()))}orderByPriority(){return(0,W.Dv)("Query.orderByPriority",0,0,arguments.length),new Ur(this.database,Ko(this._delegate,function gs(){return new On}()))}orderByValue(){return(0,W.Dv)("Query.orderByValue",0,0,arguments.length),new Ur(this.database,Ko(this._delegate,function zl(){return new zo}()))}startAt(u=null,l){return(0,W.Dv)("Query.startAt",0,2,arguments.length),new Ur(this.database,Ko(this._delegate,function w(d=null,u){return Ul("startAt","key",u,!0),new ks(d,u)}(u,l)))}startAfter(u=null,l){return(0,W.Dv)("Query.startAfter",0,2,arguments.length),new Ur(this.database,Ko(this._delegate,function m(d,u){return Ul("startAfter","key",u,!0),new f(d,u)}(u,l)))}endAt(u=null,l){return(0,W.Dv)("Query.endAt",0,2,arguments.length),new Ur(this.database,Ko(this._delegate,function td(d,u){return Ul("endAt","key",u,!0),new bs(d,u)}(u,l)))}endBefore(u=null,l){return(0,W.Dv)("Query.endBefore",0,2,arguments.length),new Ur(this.database,Ko(this._delegate,function Za(d,u){return Ul("endBefore","key",u,!0),new Rd(d,u)}(u,l)))}equalTo(u,l){return(0,W.Dv)("Query.equalTo",1,2,arguments.length),new Ur(this.database,Ko(this._delegate,function Pu(d,u){return Ul("equalTo","key",u,!0),new Md(d,u)}(u,l)))}toString(){return(0,W.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,W.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,W.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof Ur))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,l,g){const C={cancel:void 0,context:void 0};if(l&&g)C.cancel=l,(0,W.Wj)(u,"cancel",C.cancel,!0),C.context=g,(0,W.lb)(u,"context",C.context,!0);else if(l)if("object"==typeof l&&null!==l)C.context=l;else{if("function"!=typeof l)throw new Error((0,W.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");C.cancel=l}return C}get ref(){return new la(this.database,new Gi(this._delegate._repo,this._delegate._path))}}class la extends Ur{constructor(u,l){super(u,new Pi(l._repo,l._path,new ri,!1)),this.database=u,this._delegate=l}getKey(){return(0,W.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,W.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new la(this.database,du(this._delegate,u))}getParent(){(0,W.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new la(this.database,u):null}getRoot(){return(0,W.Dv)("Reference.root",0,0,arguments.length),new la(this.database,this._delegate.root)}set(u,l){(0,W.Dv)("Reference.set",1,2,arguments.length),(0,W.Wj)("Reference.set","onComplete",l,!0);const g=So(this._delegate,u);return l&&g.then(()=>l(null),C=>l(C)),g}update(u,l){if((0,W.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const C={};for(let M=0;M<u.length;++M)C[""+M]=u[M];u=C,Ec("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Lo("Reference.update",this._delegate._path),(0,W.Wj)("Reference.update","onComplete",l,!0);const g=Wl(this._delegate,u);return l&&g.then(()=>l(null),C=>l(C)),g}setWithPriority(u,l,g){(0,W.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,W.Wj)("Reference.setWithPriority","onComplete",g,!0);const C=function yc(d,u,l){if(Lo("setWithPriority",d._path),Fo("setWithPriority",u,d._path,!1),Ea("setWithPriority",l,!1),".length"===d.key||".keys"===d.key)throw"setWithPriority failed: "+d.key+" is a read-only object.";const g=new W.BH;return za(d._repo,d._path,u,l,g.wrapCallback(()=>{})),g.promise}(this._delegate,u,l);return g&&C.then(()=>g(null),M=>g(M)),C}remove(u){(0,W.Dv)("Reference.remove",0,1,arguments.length),(0,W.Wj)("Reference.remove","onComplete",u,!0);const l=function mc(d){return Lo("remove",d._path),So(d,null)}(this._delegate);return u&&l.then(()=>u(null),g=>u(g)),l}transaction(u,l,g){(0,W.Dv)("Reference.transaction",1,3,arguments.length),(0,W.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,W.Wj)("Reference.transaction","onComplete",l,!0),function(d,u,l,g){if(void 0!==l&&"boolean"!=typeof l)throw new Error((0,W.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,g);const C=function vp(d,u,l){var g;if(d=(0,W.m9)(d),Lo("Reference.transaction",d._path),".length"===d.key||".keys"===d.key)throw"Reference.transaction failed: "+d.key+" is a read-only object.";const C=null===(g=null==l?void 0:l.applyLocally)||void 0===g||g,M=new W.BH,ee=bl(d,()=>{});return function Hi(d,u,l,g,C,M){li(d,"transaction on "+u);const $={path:u,update:l,onComplete:g,status:null,order:Nt(),applyLocally:M,retryCount:0,unwatcher:C,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ee=fc(d,u,void 0);$.currentInputSnapshot=ee;const le=$.update(ee.val());if(void 0===le)$.unwatcher(),$.currentOutputSnapshotRaw=null,$.currentOutputSnapshotResolved=null,$.onComplete&&$.onComplete(null,!1,$.currentInputSnapshot);else{va("transaction failed: Data returned ",le,$.path),$.status=0;const Ee=bu(d.transactionQueueTree_,u),rt=ia(Ee)||[];let ut;rt.push($),_l(Ee,rt),"object"==typeof le&&null!==le&&(0,W.r3)(le,".priority")?(ut=(0,W.DV)(le,".priority"),(0,W.hu)(_a(ut),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):ut=(Pn(d.serverSyncTree_,u)||Nn.EMPTY_NODE).getPriority().val();const Dt=uu(d),mn=L(le,ut),Vn=oc(mn,ee,Dt);$.currentOutputSnapshotRaw=mn,$.currentOutputSnapshotResolved=Vn,$.currentWriteId=vl(d);const _i=$c(d.serverSyncTree_,u,Vn,$.currentWriteId,$.applyLocally);oa(d.eventQueue_,u,_i),pc(d,d.transactionQueueTree_)}}(d._repo,d._path,u,(le,Ee,rt)=>{let ut=null;le?M.reject(le):(ut=new cu(rt,new Gi(d._repo,d._path),cn),M.resolve(new kd(Ee,ut)))},ee,C),M.promise}(this._delegate,u,{applyLocally:g}).then(M=>new lf(M.committed,new Ja(this.database,M.snapshot)));return l&&C.then(M=>l(null,M.committed,M.snapshot),M=>l(M,!1,null)),C}setPriority(u,l){(0,W.Dv)("Reference.setPriority",1,2,arguments.length),(0,W.Wj)("Reference.setPriority","onComplete",l,!0);const g=function Il(d,u){d=(0,W.m9)(d),Lo("setPriority",d._path),Ea("setPriority",u,!1);const l=new W.BH;return za(d._repo,gn(d._path,".priority"),u,null,l.wrapCallback(()=>{})),l.promise}(this._delegate,u);return l&&g.then(()=>l(null),C=>l(C)),g}push(u,l){(0,W.Dv)("Reference.push",0,2,arguments.length),(0,W.Wj)("Reference.push","onComplete",l,!0);const g=function Ad(d,u){d=(0,W.m9)(d),Lo("push",d._path),Fo("push",u,d._path,!0);const l=Zc(d._repo),g=yt(l),C=du(d,g),M=du(d,g);let $;return $=null!=u?So(M,u).then(()=>M):Promise.resolve(M),C.then=$.then.bind($),C.catch=$.then.bind($,void 0),C}(this._delegate,u),C=g.then($=>new la(this.database,$));l&&C.then(()=>l(null),$=>l($));const M=new la(this.database,g);return M.then=C.then.bind(C),M.catch=C.catch.bind(C,void 0),M}onDisconnect(){return Lo("Reference.onDisconnect",this._delegate._path),new Ld(new Gl(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Tl{constructor(u,l){this._delegate=u,this.app=l,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Od,forceLongPolling:id}}useEmulator(u,l,g={}){!function mp(d,u,l,g={}){(d=(0,W.m9)(d))._checkNotDeleted("useEmulator"),d._instanceStarted&&Vt("Cannot call useEmulator() after instance has already been initialized.");const C=d._repoInternal;let M;if(C.repoInfo_.nodeAdmin)g.mockUserToken&&Vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),M=new vi(vi.OWNER);else if(g.mockUserToken){const $="string"==typeof g.mockUserToken?g.mockUserToken:(0,W.Sg)(g.mockUserToken,d.app.options.projectId);M=new vi($)}!function Nd(d,u,l,g){d.repoInfo_=new pn(`${u}:${l}`,!1,d.repoInfo_.namespace,d.repoInfo_.webSocketOnly,d.repoInfo_.nodeAdmin,d.repoInfo_.persistenceKey,d.repoInfo_.includeNamespaceInQueryParams),g&&(d.authTokenProvider_=g)}(C,u,l,M)}(this._delegate,u,l,g)}ref(u){if((0,W.Dv)("database.ref",0,1,arguments.length),u instanceof la){const l=gc(this._delegate,u.toString());return new la(this,l)}{const l=tl(this._delegate,u);return new la(this,l)}}refFromURL(u){(0,W.Dv)("database.refFromURL",1,1,arguments.length);const g=gc(this._delegate,u);return new la(this,g)}goOffline(){return(0,W.Dv)("database.goOffline",0,0,arguments.length),function yp(d){(d=(0,W.m9)(d))._checkNotDeleted("goOffline"),Yu(d._repo)}(this._delegate)}goOnline(){return(0,W.Dv)("database.goOnline",0,0,arguments.length),function tf(d){(d=(0,W.m9)(d))._checkNotDeleted("goOnline"),function Qc(d){d.persistentConnection_&&d.persistentConnection_.resume(aa)}(d._repo)}(this._delegate)}}Tl.ServerValue={TIMESTAMP:function sf(){return rf}(),increment:d=>function _p(d){return{".sv":{increment:d}}}(d)};var Sl=Object.freeze({__proto__:null,initStandalone:function mh({app:d,url:u,version:l,customAuthImpl:g,namespace:C,nodeAdmin:M=!1}){lt(l);const $=new xe.zt("auth-internal",new xe.H0("database-standalone"));return $.setComponent(new xe.wA("auth-internal",()=>g,"PRIVATE")),{instance:new Tl(vc(d,$,void 0,u,M),d),namespace:C}}});const yh=Tl.ServerValue;!function _h(d){d.INTERNAL.registerComponent(new xe.wA("database-compat",(u,{instanceIdentifier:l})=>{const g=u.getProvider("app-compat").getImmediate(),C=u.getProvider("database").getImmediate({identifier:l});return new Tl(C,g)},"PUBLIC").setServiceProps({Reference:la,Query:Ur,Database:Tl,DataSnapshot:Ja,enableLogging:nf,INTERNAL:Sl,ServerValue:yh}).setMultipleInstances(!0)),d.registerVersion("@firebase/database-compat","0.2.2")}(pt.Z);var ku=B(1205),vh=B(440),Al=B(127);function wc(d){return null==d}function Eh(d){return"function"==typeof d.set}function wa(d,u){return Eh(u)?u:d.ref(u)}function Vd(d,u){if(function Zl(d){return"string"==typeof d}(d))return u.stringCase();if(Eh(d))return u.firebaseCase();if(function xl(d){return"function"==typeof d.exportVal}(d))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof d)}function Yl(d,u,l="on",g=te.z){return new ie.y(C=>{let M=null;return M=d[l](u,($,ee)=>{g.schedule(()=>{C.next({snapshot:$,prevKey:ee})}),"once"===l&&g.schedule(()=>C.complete())},$=>{g.schedule(()=>C.error($))}),"on"===l?{unsubscribe(){null!=M&&d.off(u,M)}}:{unsubscribe(){}}}).pipe((0,Ue.U)(C=>{const{snapshot:M,prevKey:$}=C;let ee=null;return M.exists()&&(ee=M.key),{type:u,payload:M,prevKey:$,key:ee}}),(0,ce.B)())}function df(d,u){const l=d.length;for(let g=0;g<l;g++)if(d[g].payload.key===u)return g;return-1}function ff(d,u){const{payload:l,prevKey:g,key:C}=u,M=df(d,C),$=function hf(d,u){if(wc(u))return 0;{const l=df(d,u);return-1===l?d.length:l+1}}(d,g);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let ee=null;u.payload.forEach(le=>{const Ee={payload:le,type:"value",prevKey:ee,key:le.key};return ee=le.key,d=[...d,Ee],!1})}return d;case"child_added":if(M>-1){const ee=d[M-1];(ee&&ee.key||null)!==g&&(d=d.filter(le=>le.payload.key!==l.key)).splice($,0,u)}else{if(null==g)return[u,...d];(d=d.slice()).splice($,0,u)}return d;case"child_removed":return d.filter(ee=>ee.payload.key!==l.key);case"child_changed":return d.map(ee=>ee.payload.key===C?u:ee);case"child_moved":if(M>-1){const ee=d.splice(M,1)[0];return(d=d.slice()).splice($,0,ee),d}return d;default:return d}}function Ic(d){return(wc(d)||0===d.length)&&(d=["child_added","child_removed","child_changed","child_moved"]),d}function Cc(d,u,l){return function cf(d,u,l){return Yl(d,"value","once",l).pipe((0,oe.w)(g=>{const C=[(0,Se.of)(g)];return u.forEach(M=>C.push(Yl(d,M,"on",l))),(0,De.T)(...C).pipe((0,Ne.R)(ff,[]))}),(0,Tt.x)())}(d,u=Ic(u),l)}function Rl(d,u,l){const g=(u=Ic(u)).map(C=>Yl(d,C,"on",l));return(0,De.T)(...g)}function wh(d,u){return function(g,C){return Vd(g,{stringCase:()=>d.child(g)[u](C),firebaseCase:()=>g[u](C),snapshotCase:()=>g.ref[u](C)})}}function gf(d){return function(l){return l?Vd(l,{stringCase:()=>d.child(l).remove(),firebaseCase:()=>l.remove(),snapshotCase:()=>l.ref.remove()}):d.remove()}}function Ao(d,u){return function(){return Yl(d,"value","on",u)}}const mf=new _.OlP("angularfire2.realtimeDatabaseURL"),Ih=new _.OlP("angularfire2.database.use-emulator");let Fu=(()=>{class d{constructor(l,g,C,M,$,ee,le,Ee,rt,ut,Dt,mn,Vn,_i,Ds){this.schedulers=ee;const Ql=le,La=(0,gt.on)(l,$,g);Ee&&(0,ku.nw)(La,$,rt,Dt,mn,Vn,ut,_i),this.database=(0,gt.cc)(`${La.name}.database.${C}`,"AngularFireDatabase",La.name,()=>{const Pl=$.runOutsideAngular(()=>La.database(C||void 0));return Ql&&Pl.useEmulator(...Ql),Pl},[Ql])}list(l,g){const C=this.schedulers.ngZone.runOutsideAngular(()=>wa(this.database,l));let M=C;return g&&(M=g(C)),function Ml(d,u){const l=u.schedulers.outsideAngular,g=u.schedulers.ngZone.run(()=>d.ref);return{query:d,update:wh(g,"update"),set:wh(g,"set"),push:C=>g.push(C),remove:gf(g),snapshotChanges:C=>Cc(d,C,l).pipe(Xe.iC),stateChanges:C=>Rl(d,C,l).pipe(Xe.iC),auditTrail:C=>function Ip(d,u,l){return function pf(d,u,l){return function hr(d,u){return Yl(d,"value","on",u).pipe((0,Ue.U)(l=>{let g;return l.payload.forEach(C=>(g=C.key,!1)),{data:l,lastKeyToLoad:g}}))}(d,l).pipe((0,at.M)(u),(0,Ue.U)(([C,M])=>{const $=C.lastKeyToLoad,ee=M.map(le=>le.key);return{actions:M,lastKeyToLoad:$,loadedKeys:ee}}),function Me(d){return(0,Re.e)((u,l)=>{let g=!1,C=0;u.subscribe((0,Ve.x)(l,M=>(g||(g=!d(M,C++)))&&l.next(M)))})}(C=>-1===C.loadedKeys.indexOf(C.lastKeyToLoad)),(0,Ue.U)(C=>C.actions))}(d,Rl(d,u).pipe((0,Ne.R)((C,M)=>[...C,M],[])),l)}(d,C,l).pipe(Xe.iC),valueChanges:(C,M)=>Cc(d,C,l).pipe((0,Ue.U)(ee=>ee.map(le=>M&&M.idField?Object.assign(Object.assign({},le.payload.val()),{[M.idField]:le.key}):le.payload.val())),Xe.iC)}}(M,this)}object(l){return function Nl(d,u){return{query:d,snapshotChanges:()=>Ao(d,u.schedulers.outsideAngular)().pipe(Xe.iC),update:l=>d.ref.update(l),set:l=>d.ref.set(l),remove:()=>d.ref.remove(),valueChanges:()=>Ao(d,u.schedulers.outsideAngular)().pipe(Xe.iC,(0,Ue.U)(g=>g.payload.exists()?g.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>wa(this.database,l)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return d.\u0275fac=function(l){return new(l||d)(_.LFG(gt.Dh),_.LFG(gt.xv,8),_.LFG(mf,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Xe.HU),_.LFG(Ih,8),_.LFG(ku.zQ,8),_.LFG(ku.Qv,8),_.LFG(ku.L6,8),_.LFG(ku._Q,8),_.LFG(ku.rT,8),_.LFG(ku.lh,8),_.LFG(ku.f7,8),_.LFG(vh.nm,8))},d.\u0275prov=_.Yz7({token:d,factory:d.\u0275fac,providedIn:"any"}),d})(),sd=(()=>{class d{constructor(){Al.Z.registerVersion("angularfire",Xe.q4.full,"rtdb-compat")}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275mod=_.oAB({type:d}),d.\u0275inj=_.cJS({providers:[Fu]}),d})()},7407:(Ot,We,B)=>{B.d(We,{ST:()=>Kg,yb:()=>av});var _=B(5e3),te=B(4986),ie=B(8306),Se=B(8996),De=B(9646),Re=B(5813),Ve=B(4482),Me=B(5403);function Ue(){return(0,Ve.e)((i,e)=>{let t,s=!1;i.subscribe((0,Me.x)(e,c=>{const p=t;t=c,s&&e.next([p,c]),s=!0}))})}var ue,ce=B(8675),oe=B(4004),Ne=B(5026),Tt=B(1884),at=B(9300),Xe=B(2011),gt=B(9808),pt=(B(3677),B(3942)),xe=B(5861),kt=B(9681),ht=B(4859),W=B(1877),Ge=B(2090),Et="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ct={},lt=lt||{},ge=Et||self;function Fe(){}function Be(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Qe(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var wt="closure_uid_"+(1e9*Math.random()>>>0),Nt=0;function en(i,e,t){return i.call.apply(i.bind,arguments)}function Wt(i,e,t){if(!i)throw Error();if(2<arguments.length){var s=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,s),i.apply(e,c)}}return function(){return i.apply(e,arguments)}}function it(i,e,t){return(it=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?en:Wt).apply(null,arguments)}function nn(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var s=t.slice();return s.push.apply(s,arguments),i.apply(this,s)}}function un(i,e){function t(){}t.prototype=e.prototype,i.Z=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Vb=function(s,c,p){for(var v=Array(arguments.length-2),x=2;x<arguments.length;x++)v[x-2]=arguments[x];return e.prototype[c].apply(s,v)}}function Bt(){this.s=this.s,this.o=this.o}var Mn={};Bt.prototype.s=!1,Bt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Ze(i){return Object.prototype.hasOwnProperty.call(i,wt)&&i[wt]||(i[wt]=++Nt)}(this);delete Mn[i]}},Bt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1},tn=Array.prototype.forEach?function(i,e,t){Array.prototype.forEach.call(i,e,t)}:function(i,e,t){const s=i.length,c="string"==typeof i?i.split(""):i;for(let p=0;p<s;p++)p in c&&e.call(t,c[p],p,i)};function sr(i){return Array.prototype.concat.apply([],arguments)}function Pr(i){const e=i.length;if(0<e){const t=Array(e);for(let s=0;s<e;s++)t[s]=i[s];return t}return[]}function Xn(i){return/^[\s\xa0]*$/.test(i)}var Yn,fr=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Bn(i,e){return-1!=i.indexOf(e)}function Sr(i,e){return i<e?-1:i>e?1:0}e:{var Qt=ge.navigator;if(Qt){var kn=Qt.userAgent;if(kn){Yn=kn;break e}}Yn=""}function rn(i,e,t){for(const s in i)e.call(t,i[s],s,i)}function yn(i){const e={};for(const t in i)e[t]=i[t];return e}var Wi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function di(i,e){let t,s;for(let c=1;c<arguments.length;c++){for(t in s=arguments[c],s)i[t]=s[t];for(let p=0;p<Wi.length;p++)t=Wi[p],Object.prototype.hasOwnProperty.call(s,t)&&(i[t]=s[t])}}function oi(i){return oi[" "](i),i}oi[" "]=Fe;var wn,i,hi=Bn(Yn,"Opera"),vr=Bn(Yn,"Trident")||Bn(Yn,"MSIE"),Lt=Bn(Yn,"Edge"),qt=Lt||vr,an=Bn(Yn,"Gecko")&&!(Bn(Yn.toLowerCase(),"webkit")&&!Bn(Yn,"Edge"))&&!(Bn(Yn,"Trident")||Bn(Yn,"MSIE"))&&!Bn(Yn,"Edge"),br=Bn(Yn.toLowerCase(),"webkit")&&!Bn(Yn,"Edge");function Si(){var i=ge.document;return i?i.documentMode:void 0}e:{var vi="",Kr=(i=Yn,an?/rv:([^\);]+)(\)|;)/.exec(i):Lt?/Edge\/([\d\.]+)/.exec(i):vr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):br?/WebKit\/(\S+)/.exec(i):hi?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Kr&&(vi=Kr?Kr[1]:""),vr){var pr=Si();if(null!=pr&&pr>parseFloat(vi)){wn=String(pr);break e}}wn=vi}var fn={};var ke=ge.document&&vr&&(Si()||parseInt(wn,10))||void 0,pe=function(){if(!ge.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ge.addEventListener("test",Fe,e),ge.removeEventListener("test",Fe,e)}catch(t){}return i}();function qe(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function St(i,e){if(qe.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,s=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(an){e:{try{oi(e.nodeName);var c=!0;break e}catch(p){}c=!1}c||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,s?(this.clientX=void 0!==s.clientX?s.clientX:s.pageX,this.clientY=void 0!==s.clientY?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:$t[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&St.Z.h.call(this)}}qe.prototype.h=function(){this.defaultPrevented=!0},un(St,qe);var $t={2:"touch",3:"pen",4:"mouse"};St.prototype.h=function(){St.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var pn="closure_listenable_"+(1e6*Math.random()|0),or=0;function ar(i,e,t,s,c){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!s,this.ia=c,this.key=++or,this.ca=this.fa=!1}function hn(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function rr(i){this.src=i,this.g={},this.h=0}function zi(i,e){var t=e.type;if(t in i.g){var p,s=i.g[t],c=Vt(s,e);(p=0<=c)&&Array.prototype.splice.call(s,c,1),p&&(hn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function qr(i,e,t,s){for(var c=0;c<i.length;++c){var p=i[c];if(!p.ca&&p.listener==e&&p.capture==!!t&&p.ia==s)return c}return-1}rr.prototype.add=function(i,e,t,s,c){var p=i.toString();(i=this.g[p])||(i=this.g[p]=[],this.h++);var v=qr(i,e,s,c);return-1<v?(e=i[v],t||(e.fa=!1)):((e=new ar(e,this.src,p,!!s,c)).fa=t,i.push(e)),e};var wi="closure_lm_"+(1e6*Math.random()|0),In={};function Dr(i,e,t,s,c){if(s&&s.once)return Br(i,e,t,s,c);if(Array.isArray(e)){for(var p=0;p<e.length;p++)Dr(i,e[p],t,s,c);return null}return t=Qi(t),i&&i[pn]?i.N(e,t,Qe(s)?!!s.capture:!!s,c):Ii(i,e,t,!1,s,c)}function Ii(i,e,t,s,c,p){if(!e)throw Error("Invalid event type");var v=Qe(c)?!!c.capture:!!c,x=Er(i);if(x||(i[wi]=x=new rr(i)),(t=x.add(e,t,s,v,p)).proxy)return t;if(s=function ei(){var e=Yr;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=s,s.src=i,s.listener=t,i.addEventListener)pe||(c=v),void 0===c&&(c=!1),i.addEventListener(e.toString(),s,c);else if(i.attachEvent)i.attachEvent(ki(e.toString()),s);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(s)}return t}function Br(i,e,t,s,c){if(Array.isArray(e)){for(var p=0;p<e.length;p++)Br(i,e[p],t,s,c);return null}return t=Qi(t),i&&i[pn]?i.O(e,t,Qe(s)?!!s.capture:!!s,c):Ii(i,e,t,!0,s,c)}function fi(i,e,t,s,c){if(Array.isArray(e))for(var p=0;p<e.length;p++)fi(i,e[p],t,s,c);else s=Qe(s)?!!s.capture:!!s,t=Qi(t),i&&i[pn]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=qr(p=i.g[e],t,s,c))&&(hn(p[t]),Array.prototype.splice.call(p,t,1),0==p.length&&(delete i.g[e],i.h--))):i&&(i=Er(i))&&(e=i.g[e.toString()],i=-1,e&&(i=qr(e,t,s,c)),(t=-1<i?e[i]:null)&&cs(t))}function cs(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[pn])zi(e.i,i);else{var t=i.type,s=i.proxy;e.removeEventListener?e.removeEventListener(t,s,i.capture):e.detachEvent?e.detachEvent(ki(t),s):e.addListener&&e.removeListener&&e.removeListener(s),(t=Er(e))?(zi(t,i),0==t.h&&(t.src=null,e[wi]=null)):hn(i)}}}function ki(i){return i in In?In[i]:In[i]="on"+i}function Yr(i,e){if(i.ca)i=!0;else{e=new St(e,this);var t=i.listener,s=i.ia||i.src;i.fa&&cs(i),i=t.call(s,e)}return i}function Er(i){return(i=i[wi])instanceof rr?i:null}var wr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qi(i){return"function"==typeof i?i:(i[wr]||(i[wr]=function(e){return i.handleEvent(e)}),i[wr])}function er(){Bt.call(this),this.i=new rr(this),this.P=this,this.I=null}function It(i,e){var t,s=i.I;if(s)for(t=[];s;s=s.I)t.push(s);if(i=i.P,s=e.type||e,"string"==typeof e)e=new qe(e,i);else if(e instanceof qe)e.target=e.target||i;else{var c=e;di(e=new qe(s,i),c)}if(c=!0,t)for(var p=t.length-1;0<=p;p--){var v=e.g=t[p];c=Ht(v,s,!0,e)&&c}if(c=Ht(v=e.g=i,s,!0,e)&&c,c=Ht(v,s,!1,e)&&c,t)for(p=0;p<t.length;p++)c=Ht(v=e.g=t[p],s,!1,e)&&c}function Ht(i,e,t,s){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,p=0;p<e.length;++p){var v=e[p];if(v&&!v.ca&&v.capture==t){var x=v.listener,G=v.ia||v.src;v.fa&&zi(i.i,v),c=!1!==x.call(G,s)&&c}}return c&&!s.defaultPrevented}un(er,Bt),er.prototype[pn]=!0,er.prototype.removeEventListener=function(i,e,t,s){fi(this,i,e,t,s)},er.prototype.M=function(){if(er.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],s=0;s<t.length;s++)hn(t[s]);delete i.g[e],i.h--}}this.I=null},er.prototype.N=function(i,e,t,s){return this.i.add(String(i),e,!1,t,s)},er.prototype.O=function(i,e,t,s){return this.i.add(String(i),e,!0,t,s)};var Wn=ge.JSON.stringify;function Qr(){var i=we;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var gr,ur=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Li,i=>i.reset());class Li{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cr(i){ge.setTimeout(()=>{throw i},0)}function Ai(i,e){gr||function En(){var i=ge.Promise.resolve(void 0);gr=function(){i.then(de)}}(),Ce||(gr(),Ce=!0),we.add(i,e)}var Ce=!1,we=new class Fi{constructor(){this.h=this.g=null}add(e,t){const s=ur.get();s.set(e,t),this.h?this.h.next=s:this.g=s,this.h=s}};function de(){for(var i;i=Qr();){try{i.h.call(i.g)}catch(t){cr(t)}var e=ur;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Ce=!1}function ze(i,e){er.call(this),this.h=i||1,this.g=e||ge,this.j=it(this.kb,this),this.l=Date.now()}function ct(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function zt(i,e,t){if("function"==typeof i)t&&(i=it(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=it(i.handleEvent,i)}return 2147483647<Number(e)?-1:ge.setTimeout(i,e||0)}function bn(i){i.g=zt(()=>{i.g=null,i.i&&(i.i=!1,bn(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}un(ze,er),(ue=ze.prototype).da=!1,ue.S=null,ue.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),It(this,"tick"),this.da&&(ct(this),this.start()))}},ue.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ue.M=function(){ze.Z.M.call(this),ct(this),delete this.g};class xn extends Bt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:bn(this)}M(){super.M(),this.g&&(ge.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tn(i){Bt.call(this),this.h=i,this.g={}}un(Tn,Bt);var Fs=[];function Zr(i,e,t,s){Array.isArray(t)||(t&&(Fs[0]=t.toString()),t=Fs);for(var c=0;c<t.length;c++){var p=Dr(e,t[c],s||i.handleEvent,!1,i.h||i);if(!p)break;i.g[p.key]=p}}function pi(i){rn(i.g,function(e,t){this.g.hasOwnProperty(t)&&cs(e)},i),i.g={}}function xi(){this.g=!0}function Ci(i,e,t,s){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function to(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var s=t[i];if(!(2>s.length)){var c=s[1];if(Array.isArray(c)&&!(1>c.length)){var p=c[0];if("noop"!=p&&"stop"!=p&&"close"!=p)for(var v=1;v<c.length;v++)c[v]=""}}}return Wn(t)}catch(x){return e}}(i,t)+(s?" "+s:"")})}Tn.prototype.M=function(){Tn.Z.M.call(this),pi(this)},Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xi.prototype.Aa=function(){this.g=!1},xi.prototype.info=function(){};var ss={},mo=null;function _r(){return mo=mo||new er}function qn(i){qe.call(this,ss.Ma,i)}function Ie(i){const e=_r();It(e,new qn(e,i))}function ve(i,e){qe.call(this,ss.STAT_EVENT,i),this.stat=e}function je(i){const e=_r();It(e,new ve(e,i))}function st(i,e){qe.call(this,ss.Na,i),this.size=e}function Mt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ge.setTimeout(function(){i()},e)}ss.Ma="serverreachability",un(qn,qe),ss.STAT_EVENT="statevent",un(ve,qe),ss.Na="timingevent",un(st,qe);var Gt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Zn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ai(){}function Dn(){}ai.prototype.h=null;var $r,jr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function yo(){qe.call(this,"d")}function Vi(){qe.call(this,"c")}function _s(){}function vs(i,e,t,s){this.l=i,this.j=e,this.m=t,this.X=s||1,this.V=new Tn(this),this.P=Ro,this.W=new ze(i=qt?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _o}function _o(){this.i=null,this.g="",this.h=!1}un(yo,qe),un(Vi,qe),un(_s,ai),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},$r=new _s;var Ro=45e3,Or={},Ki={};function Ri(i,e,t){i.K=1,i.v=et(tr(e)),i.s=t,i.U=!0,xs(i,null)}function xs(i,e){i.F=Date.now(),bi(i),i.A=tr(i.v);var t=i.A,s=i.X;Array.isArray(s)||(s=[String(s)]),io(t.h,"t",s),i.C=0,t=i.l.H,i.h=new _o,i.g=Oo(i.l,t?e:null,!i.s),0<i.O&&(i.L=new xn(it(i.Ia,i,i.g),i.O)),Zr(i.V,i.g,"readystatechange",i.gb),e=i.H?yn(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Ie(1),function Ls(i,e,t,s,c,p){i.info(function(){if(i.g)if(p)for(var v="",x=p.split("&"),G=0;G<x.length;G++){var Z=x[G].split("=");if(1<Z.length){var se=Z[0];Z=Z[1];var be=se.split("_");v=2<=be.length&&"type"==be[1]?v+(se+"=")+Z+"&":v+(se+"=redacted&")}}else v=null;else v=p;return"XMLHTTP REQ ("+s+") [attempt "+c+"]: "+e+"\n"+t+"\n"+v})}(i.j,i.u,i.A,i.m,i.X,i.s)}function vo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Rs(i,e,t){let c,s=!0;for(;!i.I&&i.C<t.length;){if(c=ba(i,t),c==Ki){4==e&&(i.o=4,je(14),s=!1),Ci(i.j,i.m,null,"[Incomplete Response]");break}if(c==Or){i.o=4,je(15),Ci(i.j,i.m,t,"[Invalid Chunk]"),s=!1;break}Ci(i.j,i.m,c,null),as(i,c)}vo(i)&&c!=Ki&&c!=Or&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,je(16),s=!1),i.i=i.i&&s,s?0<t.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ws(e),e.L=!0,je(11))):(Ci(i.j,i.m,t,"[Invalid Chunked Response]"),_n(i),os(i))}function ba(i,e){var t=i.C,s=e.indexOf("\n",t);return-1==s?Ki:(t=Number(e.substring(t,s)),isNaN(t)?Or:(s+=1)+t>e.length?Ki:(e=e.substr(s,t),i.C=s+t,e))}function bi(i){i.Y=Date.now()+i.P,no(i,i.P)}function no(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Mt(it(i.eb,i),e)}function Di(i){i.B&&(ge.clearTimeout(i.B),i.B=null)}function os(i){0==i.l.G||i.I||ju(i.l,i)}function _n(i){Di(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,ct(i.W),pi(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function as(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||ae(t.i,i)))if(t.I=i.N,!i.J&&ae(t.i,i)&&3==t.G){try{var s=t.Ca.g.parse(e)}catch(Z){s=null}if(Array.isArray(s)&&3==s.length){var c=s;if(0==c[0])e:if(t.u)t.ta=c[1],0<t.ta-t.U&&37500>c[2]&&t.N&&0==t.A&&!t.v&&(t.v=Mt(it(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<i.F))break e;Rr(t),Po(t)}Vs(t),je(18)}if(1>=Y(t.i)&&t.ka){try{t.ka()}catch(Z){}t.ka=void 0}}else Zs(t,11)}else if((i.J||t.g==i)&&Rr(t),!Xn(e))for(c=t.Ca.g.parse(e),e=0;e<c.length;e++){let Z=c[e];if(t.U=Z[0],Z=Z[1],2==t.G)if("c"==Z[0]){t.J=Z[1],t.la=Z[2];const se=Z[3];null!=se&&(t.ma=se,t.h.info("VER="+t.ma));const be=Z[4];null!=be&&(t.za=be,t.h.info("SVER="+t.za));const ot=Z[5];null!=ot&&"number"==typeof ot&&0<ot&&(t.K=s=1.5*ot,t.h.info("backChannelRequestTimeoutMs_="+s)),s=t;const vt=i.g;if(vt){const Rt=vt.g?vt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rt){var p=s.i;!p.g&&(Bn(Rt,"spdy")||Bn(Rt,"quic")||Bn(Rt,"h2"))&&(p.j=p.l,p.g=new Set,p.h&&(Ae(p,p.h),p.h=null))}if(s.D){const vn=vt.g?vt.g.getResponseHeader("X-HTTP-Session-Id"):null;vn&&(s.sa=vn,_e(s.F,s.D,vn))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-i.F,t.h.info("Handshake RTT: "+t.O+"ms"));var v=i;if((s=t).oa=Ys(s,s.H?s.la:null,s.W),v.J){Ke(s.i,v);var x=v,G=s.K;G&&x.setTimeout(G),x.B&&(Di(x),bi(x)),s.g=v}else ha(s);0<t.l.length&&hs(t)}else"stop"!=Z[0]&&"close"!=Z[0]||Zs(t,7);else 3==t.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?Zs(t,7):ji(t):"noop"!=Z[0]&&t.j&&t.j.wa(Z),t.A=0)}Ie(4)}catch(Z){}}function Eo(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Be(i)||"string"==typeof i)tn(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var t=i.T();else if(i.R&&"function"==typeof i.R)t=void 0;else if(Be(i)||"string"==typeof i){t=[];for(var s=i.length,c=0;c<s;c++)t.push(c)}else for(c in t=[],s=0,i)t[s++]=c;s=function ui(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Be(i)){for(var e=[],t=i.length,s=0;s<t;s++)e.push(i[s]);return e}for(s in e=[],t=0,i)e[t++]=i[s];return e}(i),c=s.length;for(var p=0;p<c;p++)e.call(void 0,s[p],t&&t[p],i)}}function ti(i,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var s=0;s<t;s+=2)this.set(arguments[s],arguments[s+1])}else if(i)if(i instanceof ti)for(t=i.T(),s=0;s<t.length;s++)this.set(t[s],i.get(t[s]));else for(s in i)this.set(s,i[s])}function Ms(i){if(i.i!=i.g.length){for(var e=0,t=0;e<i.g.length;){var s=i.g[e];ni(i.h,s)&&(i.g[t++]=s),e++}i.g.length=t}if(i.i!=i.g.length){var c={};for(t=e=0;e<i.g.length;)ni(c,s=i.g[e])||(i.g[t++]=s,c[s]=1),e++;i.g.length=t}}function ni(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ue=vs.prototype).setTimeout=function(i){this.P=i},ue.gb=function(i){i=i.target;const e=this.L;e&&3==ao(i)?e.l():this.Ia(i)},ue.Ia=function(i){try{if(i==this.g)e:{const se=ao(this.g);var e=this.g.Da();const be=this.g.ba();if(!(3>se)&&(3!=se||qt||this.g&&(this.h.h||this.g.ga()||uo(this.g)))){this.I||4!=se||7==e||Ie(8==e||0>=be?3:2),Di(this);var t=this.g.ba();this.N=t;t:if(vo(this)){var s=uo(this.g);i="";var c=s.length,p=4==ao(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_n(this),os(this);var v="";break t}this.h.i=new ge.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,i+=this.h.i.decode(s[e],{stream:p&&e==c-1});s.splice(0,c),this.h.g+=i,this.C=0,v=this.h.g}else v=this.g.ga();if(this.i=200==t,function rs(i,e,t,s,c,p,v){i.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+p+" "+v})}(this.j,this.u,this.A,this.m,this.X,se,t),this.i){if(this.$&&!this.J){t:{if(this.g){var x,G=this.g;if((x=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xn(x)){var Z=x;break t}}Z=null}if(!(t=Z)){this.i=!1,this.o=3,je(12),_n(this),os(this);break e}Ci(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,as(this,t)}this.U?(Rs(this,se,v),qt&&this.i&&3==se&&(Zr(this.V,this.W,"tick",this.fb),this.W.start())):(Ci(this.j,this.m,v,null),as(this,v)),4==se&&_n(this),this.i&&!this.I&&(4==se?ju(this.l,this):(this.i=!1,bi(this)))}else 400==t&&0<v.indexOf("Unknown SID")?(this.o=3,je(12)):(this.o=0,je(13)),_n(this),os(this)}}}catch(se){}},ue.fb=function(){if(this.g){var i=ao(this.g),e=this.g.ga();this.C<e.length&&(Di(this),Rs(this,i,e),this.i&&4!=i&&bi(this))}},ue.cancel=function(){this.I=!0,_n(this)},ue.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function is(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ie(3),je(17)),_n(this),this.o=2,os(this)):no(this,this.Y-i)},(ue=ti.prototype).R=function(){Ms(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ue.T=function(){return Ms(this),this.g.concat()},ue.get=function(i,e){return ni(this.h,i)?this.h[i]:e},ue.set=function(i,e){ni(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ue.forEach=function(i,e){for(var t=this.T(),s=0;s<t.length;s++){var c=t[s],p=this.get(c);i.call(e,p,c,this)}};var Es=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ro(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof ro){this.g=void 0!==e?e:i.g,U(this,i.j),this.s=i.s,Q(this,i.i),V(this,i.m),this.l=i.l,e=i.h;var t=new Hr;t.i=e.i,e.g&&(t.g=new ti(e.g),t.h=e.h),ne(this,t),this.o=i.o}else i&&(t=String(i).match(Es))?(this.g=!!e,U(this,t[1]||"",!0),this.s=Sn(t[2]||""),Q(this,t[3]||"",!0),V(this,t[4]),this.l=Sn(t[5]||"",!0),ne(this,t[6]||"",!0),this.o=Sn(t[7]||"")):(this.g=!!e,this.h=new Hr(null,this.g))}function tr(i){return new ro(i)}function U(i,e,t){i.j=t?Sn(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Q(i,e,t){i.i=t?Sn(e,!0):e}function V(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ne(i,e,t){e instanceof Hr?(i.h=e,function H(i,e){e&&!i.j&&(Jt(i),i.i=null,i.g.forEach(function(t,s){var c=s.toLowerCase();s!=c&&(qi(this,s),io(this,c,t))},i)),i.j=e}(i.h,i.g)):(t||(e=ir(e,kr)),i.h=new Hr(e,i.g))}function _e(i,e,t){i.h.set(e,t)}function et(i){return _e(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Sn(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ir(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,jn),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function jn(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ro.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ir(e,cn,!0),":");var t=this.i;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ir(e,cn,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&i.push("/"),i.push(ir(t,"/"==t.charAt(0)?Ar:Xr,!0))),(t=this.h.toString())&&i.push("?",t),(t=this.o)&&i.push("#",ir(t,Ui)),i.join("")};var cn=/[#\/\?@]/g,Xr=/[#\?:]/g,Ar=/[#\?]/g,kr=/[#\?@]/g,Ui=/#/g;function Hr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Jt(i){i.g||(i.g=new ti,i.h=0,i.i&&function Jr(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var s=i[t].indexOf("="),c=null;if(0<=s){var p=i[t].substring(0,s);c=i[t].substring(s+1)}else p=i[t];e(p,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qi(i,e){Jt(i),e=ds(i,e),ni(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,ni((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Ms(i)))}function Nn(i,e){return Jt(i),e=ds(i,e),ni(i.g.h,e)}function io(i,e,t){qi(i,e),0<t.length&&(i.i=null,i.g.set(ds(i,e),Pr(t)),i.h+=t.length)}function ds(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function k(i){this.l=i||E,i=ge.PerformanceNavigationTiming?0<(i=ge.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ge.g&&ge.g.Ea&&ge.g.Ea()&&ge.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ue=Hr.prototype).add=function(i,e){Jt(this),this.i=null,i=ds(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},ue.forEach=function(i,e){Jt(this),this.g.forEach(function(t,s){tn(t,function(c){i.call(e,c,s,this)},this)},this)},ue.T=function(){Jt(this);for(var i=this.g.R(),e=this.g.T(),t=[],s=0;s<e.length;s++)for(var c=i[s],p=0;p<c.length;p++)t.push(e[s]);return t},ue.R=function(i){Jt(this);var e=[];if("string"==typeof i)Nn(this,i)&&(e=sr(e,this.g.get(ds(this,i))));else{i=this.g.R();for(var t=0;t<i.length;t++)e=sr(e,i[t])}return e},ue.set=function(i,e){return Jt(this),this.i=null,Nn(this,i=ds(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ue.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),t=0;t<e.length;t++){var s=e[t],c=encodeURIComponent(String(s));s=this.R(s);for(var p=0;p<s.length;p++){var v=c;""!==s[p]&&(v+="="+encodeURIComponent(String(s[p]))),i.push(v)}}return this.i=i.join("&")};var E=10;function R(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Y(i){return i.h?1:i.g?i.g.size:0}function ae(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ae(i,e){i.g?i.g.add(e):i.h=e}function Ke(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function yt(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Pr(i.i)}function Kt(){}function Ut(){this.g=new Kt}function $n(i,e,t){const s=t||"";try{Eo(i,function(c,p){let v=c;Qe(c)&&(v=Wn(c)),e.push(s+p+"="+encodeURIComponent(v))})}catch(c){throw e.push(s+"type="+encodeURIComponent("_badmap")),c}}function xr(i,e,t,s,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(s)}catch(p){}}function Ir(i){this.l=i.$b||null,this.j=i.ib||!1}function nr(i,e){er.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Fr,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}k.prototype.cancel=function(){if(this.i=yt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Kt.prototype.stringify=function(i){return ge.JSON.stringify(i,void 0)},Kt.prototype.parse=function(i){return ge.JSON.parse(i,void 0)},un(Ir,ai),Ir.prototype.g=function(){return new nr(this.l,this.j)},Ir.prototype.i=function(i){return function(){return i}}({}),un(nr,er);var Fr=0;function Mi(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Lr(i){i.readyState=4,i.l=null,i.j=null,i.A=null,ri(i)}function ri(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ue=nr.prototype).open=function(i,e){if(this.readyState!=Fr)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,ri(this)},ue.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ge).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lr(this)),this.readyState=Fr},ue.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ge.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Mi(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ue.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Lr(this):ri(this),3==this.readyState&&Mi(this)}},ue.Ua=function(i){this.g&&(this.response=this.responseText=i,Lr(this))},ue.Ta=function(i){this.g&&(this.response=i,Lr(this))},ue.ha=function(){this.g&&Lr(this)},ue.setRequestHeader=function(i,e){this.v.append(i,e)},ue.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ue.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var zs=ge.JSON.parse;function lr(i){er.call(this),this.headers=new ti,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Bi,this.K=this.L=!1}un(lr,er);var Bi="",so=/^https?$/i,wo=["POST","PUT"];function No(i){return"content-type"==i.toLowerCase()}function Io(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,mu(i),oo(i)}function mu(i){i.D||(i.D=!0,It(i,"complete"),It(i,"error"))}function Da(i){if(i.h&&void 0!==lt&&(!i.C[1]||4!=ao(i)||2!=i.ba()))if(i.v&&4==ao(i))zt(i.Fa,0,i);else if(It(i,"readystatechange"),4==ao(i)){i.h=!1;try{const x=i.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var s;if(s=0===x){var c=String(i.H).match(Es)[1]||null;if(!c&&ge.self&&ge.self.location){var p=ge.self.location.protocol;c=p.substr(0,p.length-1)}s=!so.test(c?c.toLowerCase():"")}t=s}if(t)It(i,"complete"),It(i,"success");else{i.m=6;try{var v=2<ao(i)?i.g.statusText:""}catch(G){v=""}i.j=v+" ["+i.ba()+"]",mu(i)}}finally{oo(i)}}}function oo(i,e){if(i.g){Ta(i);const t=i.g,s=i.C[0]?Fe:null;i.g=null,i.C=null,e||It(i,"ready");try{t.onreadystatechange=s}catch(c){}}}function Ta(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ge.clearTimeout(i.A),i.A=null)}function ao(i){return i.g?i.g.readyState:0}function uo(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Bi:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Qo(i,e,t){e:{for(s in t){var s=!1;break e}s=!0}s||(t=function nu(i){let e="";return rn(i,function(t,s){e+=s,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):_e(i,e,t))}function da(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function al(i){this.za=0,this.l=[],this.h=new xi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=da("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=da("baseRetryDelayMs",5e3,i),this.$a=da("retryDelaySeedMs",1e4,i),this.Ya=da("forwardChannelMaxRetries",2,i),this.ra=da("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new k(i&&i.concurrentRequestLimit),this.Ca=new Ut,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ji(i){if(Zi(i),3==i.G){var e=i.V++,t=tr(i.F);_e(t,"SID",i.J),_e(t,"RID",e),_e(t,"TYPE","terminate"),Jo(i,t),(e=new vs(i,i.h,e,void 0)).K=2,e.v=et(tr(t)),t=!1,ge.navigator&&ge.navigator.sendBeacon&&(t=ge.navigator.sendBeacon(e.v.toString(),"")),!t&&ge.Image&&((new Image).src=e.v,t=!0),t||(e.g=Oo(e.l,null),e.g.ea(e.v)),e.F=Date.now(),bi(e)}Sa(i)}function Po(i){i.g&&(ws(i),i.g.cancel(),i.g=null)}function Zi(i){Po(i),i.u&&(ge.clearTimeout(i.u),i.u=null),Rr(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ge.clearTimeout(i.m),i.m=null)}function Fl(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&hs(i)}function hs(i){R(i.i)||i.m||(i.m=!0,Ai(i.Ha,i),i.C=0)}function ll(i,e){var t;t=e?e.m:i.V++;const s=tr(i.F);_e(s,"SID",i.J),_e(s,"RID",t),_e(s,"AID",i.U),Jo(i,s),i.o&&i.s&&Qo(s,i.o,i.s),t=new vs(i,i.h,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.l=e.D.concat(i.l)),e=yu(i,t,1e3),t.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Ae(i.i,t),Ri(t,s,e)}function Jo(i,e){i.j&&Eo({},function(t,s){_e(e,s,t)})}function yu(i,e,t){t=Math.min(i.l.length,t);var s=i.j?it(i.j.Oa,i.j,i):null;e:{var c=i.l;let p=-1;for(;;){const v=["count="+t];-1==p?0<t?(p=c[0].h,v.push("ofs="+p)):p=0:v.push("ofs="+p);let x=!0;for(let G=0;G<t;G++){let Z=c[G].h;const se=c[G].g;if(Z-=p,0>Z)p=Math.max(0,c[G].h-100),x=!1;else try{$n(se,v,"req"+Z+"_")}catch(be){s&&s(se)}}if(x){s=v.join("&");break e}}}return i=i.l.splice(0,t),e.D=i,s}function ha(i){i.g||i.u||(i.Y=1,Ai(i.Ga,i),i.A=0)}function Vs(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Mt(it(i.Ga,i),qs(i,i.A)),i.A++,0))}function ws(i){null!=i.B&&(ge.clearTimeout(i.B),i.B=null)}function Ks(i){i.g=new vs(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=tr(i.oa);_e(e,"RID","rpc"),_e(e,"SID",i.J),_e(e,"CI",i.N?"0":"1"),_e(e,"AID",i.U),Jo(i,e),_e(e,"TYPE","xmlhttp"),i.o&&i.s&&Qo(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var t=i.g;i=i.la,t.K=1,t.v=et(tr(e)),t.s=null,t.U=!0,xs(t,i)}function Rr(i){null!=i.v&&(ge.clearTimeout(i.v),i.v=null)}function ju(i,e){var t=null;if(i.g==e){Rr(i),ws(i),i.g=null;var s=2}else{if(!ae(i.i,e))return;t=e.D,Ke(i.i,e),s=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==s){t=e.s?e.s.length:0,e=Date.now()-e.F;var c=i.C;It(s=_r(),new st(s,t,e,c)),hs(i)}else ha(i);else if(3==(c=e.o)||0==c&&0<i.I||!(1==s&&function ul(i,e){return!(Y(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Mt(it(i.Ha,i,e),qs(i,i.C)),i.C++,0)))}(i,e)||2==s&&Vs(i)))switch(t&&0<t.length&&(e=i.i,e.i=e.i.concat(t)),c){case 1:Zs(i,5);break;case 4:Zs(i,10);break;case 3:Zs(i,6);break;default:Zs(i,2)}}function qs(i,e){let t=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(t*=2),t*e}function Zs(i,e){if(i.h.info("Error code "+e),2==e){var t=null;i.j&&(t=null);var s=it(i.jb,i);t||(t=new ro("//www.google.com/images/cleardot.gif"),ge.location&&"http"==ge.location.protocol||U(t,"https"),et(t)),function Qn(i,e){const t=new xi;if(ge.Image){const s=new Image;s.onload=nn(xr,t,s,"TestLoadImage: loaded",!0,e),s.onerror=nn(xr,t,s,"TestLoadImage: error",!1,e),s.onabort=nn(xr,t,s,"TestLoadImage: abort",!1,e),s.ontimeout=nn(xr,t,s,"TestLoadImage: timeout",!1,e),ge.setTimeout(function(){s.ontimeout&&s.ontimeout()},1e4),s.src=i}else e(!1)}(t.toString(),s)}else je(2);i.G=0,i.j&&i.j.va(e),Sa(i),Zi(i)}function Sa(i){i.G=0,i.I=-1,i.j&&((0!=yt(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Pr(i.l),i.l.length=0),i.j.ua())}function Ys(i,e,t){let s=function mt(i){return i instanceof ro?tr(i):new ro(i,void 0)}(t);if(""!=s.i)e&&Q(s,e+"."+s.i),V(s,s.m);else{const c=ge.location;s=function ln(i,e,t,s){var c=new ro(null,void 0);return i&&U(c,i),e&&Q(c,e),t&&V(c,t),s&&(c.l=s),c}(c.protocol,e?e+"."+c.hostname:c.hostname,+c.port,t)}return i.aa&&rn(i.aa,function(c,p){_e(s,p,c)}),t=i.sa,(e=i.D)&&t&&_e(s,e,t),_e(s,"VER",i.ma),Jo(i,s),s}function Oo(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new lr(t&&i.Ba&&!i.qa?new Ir({ib:!0}):i.qa)).L=i.H,e}function $o(){}function Xo(){if(vr&&!(10<=Number(ke)))throw Error("Environmental error: no available transport.")}function us(i,e){er.call(this),this.g=new al(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Xn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new zn(this)}function _u(i){yo.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function cl(){Vi.call(this),this.status=1}function zn(i){this.g=i}(ue=lr.prototype).ea=function(i,e,t,s){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():$r.g(),this.C=function gn(i){return i.h||(i.h=i.i())}(this.u?this.u:$r),this.g.onreadystatechange=it(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(p){return void Io(this,p)}i=t||"";const c=new ti(this.headers);s&&Eo(s,function(p,v){c.set(v,p)}),s=function Cr(i){e:{var e=No;const t=i.length,s="string"==typeof i?i.split(""):i;for(let c=0;c<t;c++)if(c in s&&e.call(void 0,s[c],c,i)){e=c;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(c.T()),t=ge.FormData&&i instanceof ge.FormData,!(0<=Vt(wo,e))||s||t||c.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),c.forEach(function(p,v){this.g.setRequestHeader(v,p)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ta(this),0<this.B&&((this.K=function Mo(i){return vr&&function Oe(){return function zr(i){var e=fn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=fr(String(wn)).split("."),t=fr("9").split("."),s=Math.max(e.length,t.length);for(let v=0;0==i&&v<s;v++){var c=e[v]||"",p=t[v]||"";do{if(c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],p=/(\d*)(\D*)(.*)/.exec(p)||["","","",""],0==c[0].length&&0==p[0].length)break;i=Sr(0==c[1].length?0:parseInt(c[1],10),0==p[1].length?0:parseInt(p[1],10))||Sr(0==c[2].length,0==p[2].length)||Sr(c[2],p[2]),c=c[3],p=p[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=it(this.pa,this)):this.A=zt(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(p){Io(this,p)}},ue.pa=function(){void 0!==lt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,It(this,"timeout"),this.abort(8))},ue.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,It(this,"complete"),It(this,"abort"),oo(this))},ue.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),oo(this,!0)),lr.Z.M.call(this)},ue.Fa=function(){this.s||(this.F||this.v||this.l?Da(this):this.cb())},ue.cb=function(){Da(this)},ue.ba=function(){try{return 2<ao(this)?this.g.status:-1}catch(i){return-1}},ue.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},ue.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),zs(e)}},ue.Da=function(){return this.m},ue.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ue=al.prototype).ma=8,ue.G=1,ue.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},ue.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const c=new vs(this,this.h,i,void 0);let p=this.s;if(this.P&&(p?(p=yn(p),di(p,this.P)):p=this.P),null===this.o&&(c.H=p),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var s=this.l[t];if(void 0===(s="__data__"in s.g&&"string"==typeof(s=s.g.__data__)?s.length:void 0))break;if(4096<(e+=s)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=yu(this,c,e),_e(t=tr(this.F),"RID",i),_e(t,"CVER",22),this.D&&_e(t,"X-HTTP-Session-Id",this.D),Jo(this,t),this.o&&p&&Qo(t,this.o,p),Ae(this.i,c),this.Ra&&_e(t,"TYPE","init"),this.ja?(_e(t,"$req",e),_e(t,"SID","null"),c.$=!0,Ri(c,t,null)):Ri(c,t,e),this.G=2}}else 3==this.G&&(i?ll(this,i):0==this.l.length||R(this.i)||ll(this))},ue.Ga=function(){if(this.u=null,Ks(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Mt(it(this.bb,this),i)}},ue.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,je(10),Po(this),Ks(this))},ue.ab=function(){null!=this.v&&(this.v=null,Po(this),Vs(this),je(19))},ue.jb=function(i){i?(this.h.info("Successfully pinged google.com"),je(2)):(this.h.info("Failed to ping google.com"),je(1))},(ue=$o.prototype).xa=function(){},ue.wa=function(){},ue.va=function(){},ue.ua=function(){},ue.Oa=function(){},Xo.prototype.g=function(i,e){return new us(i,e)},un(us,er),us.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Ai(it(i.hb,i,e))),je(0),i.W=e,i.aa=t||{},i.N=i.X,i.F=Ys(i,null,i.W),hs(i)},us.prototype.close=function(){ji(this.g)},us.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Fl(this.g,e)}else this.v?((e={}).__data__=Wn(i),Fl(this.g,e)):Fl(this.g,i)},us.prototype.M=function(){this.g.j=null,delete this.j,ji(this.g),delete this.g,us.Z.M.call(this)},un(_u,yo),un(cl,Vi),un(zn,$o),zn.prototype.xa=function(){It(this.g,"a")},zn.prototype.wa=function(i){It(this.g,new _u(i))},zn.prototype.va=function(i){It(this.g,new cl(i))},zn.prototype.ua=function(){It(this.g,"b")},Xo.prototype.createWebChannel=Xo.prototype.g,us.prototype.send=us.prototype.u,us.prototype.open=us.prototype.m,us.prototype.close=us.prototype.close,Gt.NO_ERROR=0,Gt.TIMEOUT=8,Gt.HTTP_ERROR=6,Zn.COMPLETE="complete",Dn.EventType=jr,jr.OPEN="a",jr.CLOSE="b",jr.ERROR="c",jr.MESSAGE="d",er.prototype.listen=er.prototype.N,lr.prototype.listenOnce=lr.prototype.O,lr.prototype.getLastError=lr.prototype.La,lr.prototype.getLastErrorCode=lr.prototype.Da,lr.prototype.getStatus=lr.prototype.ba,lr.prototype.getResponseJson=lr.prototype.Qa,lr.prototype.getResponseText=lr.prototype.ga,lr.prototype.send=lr.prototype.ea;var Qs=Ct.createWebChannelTransport=function(){return new Xo},Co=Ct.getStatEventTarget=function(){return _r()},Ns=Ct.ErrorCode=Gt,vu=Ct.EventType=Zn,Eu=Ct.Event=ss,Is=Ct.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},wu=Ct.FetchXmlHttpFactory=Ir,Mr=Ct.WebChannel=Dn,Aa=Ct.XhrIo=lr;const Js="@firebase/firestore";class Ji{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ji.UNAUTHENTICATED=new Ji(null),Ji.GOOGLE_CREDENTIALS=new Ji("google-credentials-uid"),Ji.FIRST_PARTY=new Ji("first-party-uid"),Ji.MOCK_USER=new Ji("mock-user");let bo="9.8.4";const ea=new W.Yd("@firebase/firestore");function ru(){return ea.logLevel}function At(i,...e){if(ea.logLevel<=W.in.DEBUG){const t=e.map(ta);ea.debug(`Firestore (${bo}): ${i}`,...t)}}function gi(i,...e){if(ea.logLevel<=W.in.ERROR){const t=e.map(ta);ea.error(`Firestore (${bo}): ${i}`,...t)}}function Ho(i,...e){if(ea.logLevel<=W.in.WARN){const t=e.map(ta);ea.warn(`Firestore (${bo}): ${i}`,...t)}}function ta(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function S(i="Unexpected state"){const e=`FIRESTORE (${bo}) INTERNAL ASSERTION FAILED: `+i;throw gi(e),new Error(e)}function D(i,e){i||S()}function N(i,e){return i}const P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends Ge.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class he{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Te{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ft{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ji.UNAUTHENTICATED))}shutdown(){}}class Xt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dr{constructor(e){this.t=e,this.currentUser=Ji.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var s=this;let c=this.i;const p=Z=>this.i!==c?(c=this.i,t(Z)):Promise.resolve();let v=new he;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new he,e.enqueueRetryable(()=>p(this.currentUser))};const x=()=>{const Z=v;e.enqueueRetryable((0,xe.Z)(function*(){yield Z.promise,yield p(s.currentUser)}))},G=Z=>{At("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(Z=>G(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?G(Z):(At("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new he)}},0),x()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(At("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(D("string"==typeof s.accessToken),new Te(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return D(null===e||"string"==typeof e),new Ji(e)}}class dn{constructor(e,t,s){this.type="FirstParty",this.user=Ji.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const c=e.auth.getAuthHeaderValueForFirstParty([]);c&&this.headers.set("Authorization",c),s&&this.headers.set("X-Goog-Iam-Authorization-Token",s)}}class Vr{constructor(e,t,s){this.h=e,this.l=t,this.m=s}getToken(){return Promise.resolve(new dn(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ji.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mr{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xs{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const s=p=>{null!=p.error&&At("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${p.error.message}`);const v=p.token!==this.p;return this.p=p.token,At("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(p.token):Promise.resolve()};this.o=p=>{e.enqueueRetryable(()=>s(p))};const c=p=>{At("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=p,this.appCheck.addTokenListener(this.o)};this.g.onInit(p=>c(p)),setTimeout(()=>{if(!this.appCheck){const p=this.g.getImmediate({optional:!0});p?c(p):At("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(D("string"==typeof t.token),this.p=t.token,new mr(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function xa(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}class na{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const c=xa(40);for(let p=0;p<c.length;++p)s.length<20&&c[p]<t&&(s+=e.charAt(c[p]%e.length))}return s}}function Rn(i,e){return i<e?-1:i>e?1:0}function lo(i,e,t){return i.length===e.length&&i.every((s,c)=>t(s,e[c]))}function $u(i){return i+"\0"}class mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mi.fromMillis(Date.now())}static fromDate(e){return mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new mi(t,s)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rn(this.nanoseconds,e.nanoseconds):Rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Fn(e)}static min(){return new Fn(new mi(0,0))}static max(){return new Fn(new mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hl{constructor(e,t,s){void 0===t?t=0:t>e.length&&S(),void 0===s?s=e.length-t:s>e.length-t&&S(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return 0===hl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hl?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let c=0;c<s;c++){const p=e.get(c),v=t.get(c);if(p<v)return-1;if(p>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Tr extends hl{construct(e,t,s){return new Tr(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new K(P.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(c=>c.length>0))}return new Tr(t)}static emptyPath(){return new Tr([])}}const Ni=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xi extends hl{construct(e,t,s){return new Xi(e,t,s)}static isValidIdentifier(e){return Ni.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Xi(["__name__"])}static fromServerFormat(e){const t=[];let s="",c=0;const p=()=>{if(0===s.length)throw new K(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let v=!1;for(;c<e.length;){const x=e[c];if("\\"===x){if(c+1===e.length)throw new K(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const G=e[c+1];if("\\"!==G&&"."!==G&&"`"!==G)throw new K(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=G,c+=2}else"`"===x?(v=!v,c++):"."!==x||v?(s+=x,c++):(p(),c++)}if(p(),v)throw new K(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xi(t)}static emptyPath(){return new Xi([])}}class Zt{constructor(e){this.path=e}static fromPath(e){return new Zt(Tr.fromString(e))}static fromName(e){return new Zt(Tr.fromString(e).popFirst(5))}static empty(){return new Zt(Tr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Tr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Tr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Zt(new Tr(e.slice()))}}class sc{constructor(e,t,s,c){this.indexId=e,this.collectionGroup=t,this.fields=s,this.indexState=c}}function Ll(i){return i.fields.find(e=>2===e.kind)}function Ra(i){return i.fields.filter(e=>2!==e.kind)}sc.UNKNOWN_ID=-1;class Hu{constructor(e,t){this.fieldPath=e,this.kind=t}}class fl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new fl(0,Gr.min())}}function Iu(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,c=Fn.fromTimestamp(1e9===s?new mi(t+1,0):new mi(t,s));return new Gr(c,Zt.empty(),e)}function Bc(i){return new Gr(i.readTime,i.key,-1)}class Gr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Gr(Fn.min(),Zt.empty(),-1)}static max(){return new Gr(Fn.max(),Zt.empty(),-1)}}function Gu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=Zt.comparator(i.documentKey,e.documentKey),0!==t?t:Rn(i.largestBatchId,e.largestBatchId))}const Ba="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function fa(i){return co.apply(this,arguments)}function co(){return co=(0,xe.Z)(function*(i){if(i.code!==P.FAILED_PRECONDITION||i.message!==Ba)throw i;At("LocalStore","Unexpectedly lost primary lease")}),co.apply(this,arguments)}class Je{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&S(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Je((s,c)=>{this.nextCallback=p=>{this.wrapSuccess(e,p).next(s,c)},this.catchCallback=p=>{this.wrapFailure(t,p).next(s,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Je?t:Je.resolve(t)}catch(t){return Je.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Je.reject(t)}static resolve(e){return new Je((t,s)=>{t(e)})}static reject(e){return new Je((t,s)=>{s(e)})}static waitFor(e){return new Je((t,s)=>{let c=0,p=0,v=!1;e.forEach(x=>{++c,x.next(()=>{++p,v&&p===c&&t()},G=>s(G))}),v=!0,p===c&&t()})}static or(e){let t=Je.resolve(!1);for(const s of e)t=t.next(c=>c?Je.resolve(c):s());return t}static forEach(e,t){const s=[];return e.forEach((c,p)=>{s.push(t.call(this,c,p))}),this.waitFor(s)}static mapArray(e,t){return new Je((s,c)=>{const p=e.length,v=new Array(p);let x=0;for(let G=0;G<p;G++){const Z=G;t(e[Z]).next(se=>{v[Z]=se,++x,x===p&&s(v)},se=>c(se))}})}static doWhile(e,t){return new Je((s,c)=>{const p=()=>{!0===e()?t().next(()=>{p()},c):s()};p()})}}class ja{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.T=new he,this.transaction.oncomplete=()=>{this.T.resolve()},this.transaction.onabort=()=>{t.error?this.T.reject(new ra(e,t.error)):this.T.resolve()},this.transaction.onerror=s=>{const c=$a(s.target.error);this.T.reject(new ra(e,c))}}static open(e,t,s,c){try{return new ja(t,e.transaction(c,s))}catch(p){throw new ra(t,p)}}get A(){return this.T.promise}abort(e){e&&this.T.reject(e),this.aborted||(At("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}R(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ma(t)}}class Us{constructor(e,t,s){this.name=e,this.version=t,this.P=s,12.2===Us.v((0,Ge.z$)())&&gi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return At("SimpleDb","Removing database:",e),ga(window.indexedDB.deleteDatabase(e)).toPromise()}static V(){if(!(0,Ge.hl)())return!1;if(Us.S())return!0;const e=(0,Ge.z$)(),t=Us.v(e),s=0<t&&t<10,c=Us.D(e),p=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||s||p)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.C)}static N(e,t){return e.store(t)}static v(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),s=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(s)}static D(e){const t=e.match(/Android ([\d.]+)/i),s=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(s)}k(e){var t=this;return(0,xe.Z)(function*(){return t.db||(At("SimpleDb","Opening database:",t.name),t.db=yield new Promise((s,c)=>{const p=indexedDB.open(t.name,t.version);p.onsuccess=v=>{s(v.target.result)},p.onblocked=()=>{c(new ra(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},p.onerror=v=>{const x=v.target.error;c("VersionError"===x.name?new K(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new K(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new ra(e,x))},p.onupgradeneeded=v=>{At("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.P.O(v.target.result,p.transaction,v.oldVersion,t.version).next(()=>{At("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.M&&(t.db.onversionchange=s=>t.M(s)),t.db})()}F(e){this.M=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,s,c){var p=this;return(0,xe.Z)(function*(){const v="readonly"===t;let x=0;for(;;){++x;try{p.db=yield p.k(e);const G=ja.open(p.db,e,v?"readonly":"readwrite",s),Z=c(G).next(se=>(G.R(),se)).catch(se=>(G.abort(se),Je.reject(se))).toPromise();return Z.catch(()=>{}),yield G.A,Z}catch(G){const Z=G,se="FirebaseError"!==Z.name&&x<3;if(At("SimpleDb","Transaction failed with error:",Z.message,"Retrying:",se),p.close(),!se)return Promise.reject(Z)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class pa{constructor(e){this.$=e,this.B=!1,this.L=null}get isDone(){return this.B}get U(){return this.L}set cursor(e){this.$=e}done(){this.B=!0}q(e){this.L=e}delete(){return ga(this.$.delete())}}class ra extends K{constructor(e,t){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Do(i){return"IndexedDbTransactionError"===i.name}class Ma{constructor(e){this.store=e}put(e,t){let s;return void 0!==t?(At("SimpleDb","PUT",this.store.name,e,t),s=this.store.put(t,e)):(At("SimpleDb","PUT",this.store.name,"<auto-key>",e),s=this.store.put(e)),ga(s)}add(e){return At("SimpleDb","ADD",this.store.name,e,e),ga(this.store.add(e))}get(e){return ga(this.store.get(e)).next(t=>(void 0===t&&(t=null),At("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return At("SimpleDb","DELETE",this.store.name,e),ga(this.store.delete(e))}count(){return At("SimpleDb","COUNT",this.store.name),ga(this.store.count())}K(e,t){const s=this.options(e,t);if(s.index||"function"!=typeof this.store.getAll){const c=this.cursor(s),p=[];return this.G(c,(v,x)=>{p.push(x)}).next(()=>p)}{const c=this.store.getAll(s.range);return new Je((p,v)=>{c.onerror=x=>{v(x.target.error)},c.onsuccess=x=>{p(x.target.result)}})}}j(e,t){const s=this.store.getAll(e,null===t?void 0:t);return new Je((c,p)=>{s.onerror=v=>{p(v.target.error)},s.onsuccess=v=>{c(v.target.result)}})}W(e,t){At("SimpleDb","DELETE ALL",this.store.name);const s=this.options(e,t);s.H=!1;const c=this.cursor(s);return this.G(c,(p,v,x)=>x.delete())}J(e,t){let s;t?s=e:(s={},t=e);const c=this.cursor(s);return this.G(c,t)}Y(e){const t=this.cursor({});return new Je((s,c)=>{t.onerror=p=>{const v=$a(p.target.error);c(v)},t.onsuccess=p=>{const v=p.target.result;v?e(v.primaryKey,v.value).next(x=>{x?v.continue():s()}):s()}})}G(e,t){const s=[];return new Je((c,p)=>{e.onerror=v=>{p(v.target.error)},e.onsuccess=v=>{const x=v.target.result;if(!x)return void c();const G=new pa(x),Z=t(x.primaryKey,x.value,G);if(Z instanceof Je){const se=Z.catch(be=>(G.done(),Je.reject(be)));s.push(se)}G.isDone?c():null===G.U?x.continue():x.continue(G.U)}}).next(()=>Je.waitFor(s))}options(e,t){let s;return void 0!==e&&("string"==typeof e?s=e:t=e),{index:s,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const s=this.store.index(e.index);return e.H?s.openKeyCursor(e.range,t):s.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ga(i){return new Je((e,t)=>{i.onsuccess=s=>{e(s.target.result)},i.onerror=s=>{const c=$a(s.target.error);t(c)}})}let Wu=!1;function $a(i){const e=Us.v((0,Ge.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const s=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wu||(Wu=!0,setTimeout(()=>{throw s},0)),s}}return i}class Go{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}Z(e){var t=this;At("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,xe.Z)(function*(){t.task=null;try{At("IndexBackiller",`Documents written: ${yield t.X.tt()}`)}catch(s){Do(s)?At("IndexBackiller","Ignoring IndexedDB error during index backfill: ",s):yield fa(s)}yield t.Z(1)}))}}class pl{constructor(e,t){this.localStore=e,this.persistence=t}tt(e=50){var t=this;return(0,xe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",s=>t.et(s,e))})()}et(e,t){const s=new Set;let c=t,p=!0;return Je.doWhile(()=>!0===p&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!s.has(v))return At("IndexBackiller",`Processing collection: ${v}`),this.nt(e,v,c).next(x=>{c-=x,s.add(v)});p=!1})).next(()=>t-c)}nt(e,t,s){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,s).next(p=>{const v=p.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.st(c,p)).next(x=>(At("IndexBackiller",`Updating offset: ${x}`),this.localStore.indexManager.updateCollectionGroup(e,t,x))).next(()=>v.size)}))}st(e,t){let s=e;return t.changes.forEach((c,p)=>{const v=Bc(p);Gu(v,s)>0&&(s=v)}),new Gr(s.readTime,s.documentKey,Math.max(t.batchId,e.largestBatchId))}}class fs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.it(s),this.rt=s=>t.writeSequenceNumber(s))}it(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.rt&&this.rt(e),e}}function Ha(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Na(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function ma(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}fs.ot=-1;class ii{constructor(e,t){this.comparator=e,this.root=t||ps.EMPTY}insert(e,t){return new ii(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ps.BLACK,null,null))}remove(e){return new ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ps.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(0===s)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const c=this.comparator(e,s.key);if(0===c)return t+s.left.size;c<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pa(this.root,e,this.comparator,!0)}}class Pa{constructor(e,t,s,c){this.isReverse=c,this.nodeStack=[];let p=1;for(;!e.isEmpty();)if(p=t?s(e.key,t):1,t&&c&&(p*=-1),p<0)e=this.isReverse?e.left:e.right;else{if(0===p){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ps{constructor(e,t,s,c,p){this.key=e,this.value=t,this.color=null!=s?s:ps.RED,this.left=null!=c?c:ps.EMPTY,this.right=null!=p?p:ps.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,c,p){return new ps(null!=e?e:this.key,null!=t?t:this.value,null!=s?s:this.color,null!=c?c:this.left,null!=p?p:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let c=this;const p=s(e,c.key);return c=p<0?c.copy(null,null,null,c.left.insert(e,t,s),null):0===p?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,s)),c.fixUp()}removeMin(){if(this.left.isEmpty())return ps.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return ps.EMPTY;s=c.right.min(),c=c.copy(s.key,s.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ps.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ps.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw S();const e=this.left.check();if(e!==this.right.check())throw S();return e+(this.isRed()?0:1)}}ps.EMPTY=null,ps.RED=!0,ps.BLACK=!1,ps.EMPTY=new class{constructor(){this.size=0}get key(){throw S()}get value(){throw S()}get color(){throw S()}get left(){throw S()}get right(){throw S()}copy(i,e,t,s,c){return this}insert(i,e,t){return new ps(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nr{constructor(e){this.comparator=e,this.data=new ii(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const c=s.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let s;for(s=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zu(this.data.getIterator())}getIteratorFrom(e){return new zu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof Nr)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=s.getNext().key;if(0!==this.comparator(c,p))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nr(this.comparator);return t.data=e,t}}class zu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function To(i){return i.hasNext()?i.getNext():void 0}class ls{constructor(e){this.fields=e,e.sort(Xi.comparator)}static empty(){return new ls([])}unionWith(e){let t=new Nr(Xi.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new ls(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return lo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}class $i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new $i(t)}static fromUint8Array(e){const t=function(s){let c="";for(let p=0;p<s.length;++p)c+=String.fromCharCode(s[p]);return c}(e);return new $i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let s=0;s<e.length;s++)t[s]=e.charCodeAt(s);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$i.EMPTY_BYTE_STRING=new $i("");const Wo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(i){if(D(!!i),"string"==typeof i){let e=0;const t=Wo.exec(i);if(D(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Yi(i.seconds),nanos:Yi(i.nanos)}}function Yi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function F(i){return"string"==typeof i?$i.fromBase64String(i):$i.fromUint8Array(i)}function j(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function X(i){const e=i.mapValue.fields.__previous_value__;return j(e)?X(e):e}function me(i){const e=Bs(i.mapValue.fields.__local_write_time__.timestampValue);return new mi(e.seconds,e.nanos)}class $e{constructor(e,t,s,c,p,v,x,G){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=c,this.ssl=p,this.forceLongPolling=v,this.autoDetectLongPolling=x,this.useFetchStreams=G}}class nt{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new nt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof nt&&e.projectId===this.projectId&&e.database===this.database}}function bt(i){return null==i}function Pt(i){return 0===i&&1/i==-1/0}function Pn(i){return"number"==typeof i&&Number.isInteger(i)&&!Pt(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const Hn={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Kn={nullValue:"NULL_VALUE"};function Cn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?j(i)?4:gl(i)?9007199254740991:10:S()}function yi(i,e){if(i===e)return!0;const t=Cn(i);if(t!==Cn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return me(i).isEqual(me(e));case 3:return function(s,c){if("string"==typeof s.timestampValue&&"string"==typeof c.timestampValue&&s.timestampValue.length===c.timestampValue.length)return s.timestampValue===c.timestampValue;const p=Bs(s.timestampValue),v=Bs(c.timestampValue);return p.seconds===v.seconds&&p.nanos===v.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return c=e,F(i.bytesValue).isEqual(F(c.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(s,c){return Yi(s.geoPointValue.latitude)===Yi(c.geoPointValue.latitude)&&Yi(s.geoPointValue.longitude)===Yi(c.geoPointValue.longitude)}(i,e);case 2:return function(s,c){if("integerValue"in s&&"integerValue"in c)return Yi(s.integerValue)===Yi(c.integerValue);if("doubleValue"in s&&"doubleValue"in c){const p=Yi(s.doubleValue),v=Yi(c.doubleValue);return p===v?Pt(p)===Pt(v):isNaN(p)&&isNaN(v)}return!1}(i,e);case 9:return lo(i.arrayValue.values||[],e.arrayValue.values||[],yi);case 10:return function(s,c){const p=s.mapValue.fields||{},v=c.mapValue.fields||{};if(Ha(p)!==Ha(v))return!1;for(const x in p)if(p.hasOwnProperty(x)&&(void 0===v[x]||!yi(p[x],v[x])))return!1;return!0}(i,e);default:return S()}var c}function Ps(i,e){return void 0!==(i.values||[]).find(t=>yi(t,e))}function js(i,e){if(i===e)return 0;const t=Cn(i),s=Cn(e);if(t!==s)return Rn(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rn(i.booleanValue,e.booleanValue);case 2:return function(c,p){const v=Yi(c.integerValue||c.doubleValue),x=Yi(p.integerValue||p.doubleValue);return v<x?-1:v>x?1:v===x?0:isNaN(v)?isNaN(x)?0:-1:1}(i,e);case 3:return ho(i.timestampValue,e.timestampValue);case 4:return ho(me(i),me(e));case 5:return Rn(i.stringValue,e.stringValue);case 6:return function(c,p){const v=F(c),x=F(p);return v.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(c,p){const v=c.split("/"),x=p.split("/");for(let G=0;G<v.length&&G<x.length;G++){const Z=Rn(v[G],x[G]);if(0!==Z)return Z}return Rn(v.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,p){const v=Rn(Yi(c.latitude),Yi(p.latitude));return 0!==v?v:Rn(Yi(c.longitude),Yi(p.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,p){const v=c.values||[],x=p.values||[];for(let G=0;G<v.length&&G<x.length;++G){const Z=js(v[G],x[G]);if(Z)return Z}return Rn(v.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,p){if(c===Hn.mapValue&&p===Hn.mapValue)return 0;if(c===Hn.mapValue)return 1;if(p===Hn.mapValue)return-1;const v=c.fields||{},x=Object.keys(v),G=p.fields||{},Z=Object.keys(G);x.sort(),Z.sort();for(let se=0;se<x.length&&se<Z.length;++se){const be=Rn(x[se],Z[se]);if(0!==be)return be;const ot=js(v[x[se]],G[Z[se]]);if(0!==ot)return ot}return Rn(x.length,Z.length)}(i.mapValue,e.mapValue);default:throw S()}}function ho(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Rn(i,e);const t=Bs(i),s=Bs(e),c=Rn(t.seconds,s.seconds);return 0!==c?c:Rn(t.nanos,s.nanos)}function Cs(i){return iu(i)}function iu(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const c=Bs(s);return`time(${c.seconds},${c.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?F(i.bytesValue).toBase64():"referenceValue"in i?Zt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(s){let c="[",p=!0;for(const v of s.values||[])p?p=!1:c+=",",c+=iu(v);return c+"]"}(i.arrayValue):"mapValue"in i?function(s){const c=Object.keys(s.fields||{}).sort();let p="{",v=!0;for(const x of c)v?v=!1:p+=",",p+=`${x}:${iu(s.fields[x])}`;return p+"}"}(i.mapValue):S();var e}function $s(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function su(i){return!!i&&"integerValue"in i}function Hs(i){return!!i&&"arrayValue"in i}function ya(i){return!!i&&"nullValue"in i}function ou(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Vl(i){return!!i&&"mapValue"in i}function Cu(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Na(i.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Cu(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cu(i.arrayValue.values[t]);return e}return Object.assign({},i)}function gl(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function ml(i){return"nullValue"in i?Kn:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?$s(nt.empty(),Zt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:S()}function yl(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?$s(nt.empty(),Zt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Hn:S()}function wd(i,e){const t=js(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Hc(i,e){const t=js(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class Gs{constructor(e){this.value=e}static empty(){return new Gs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Vl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cu(t)}setAll(e){let t=Xi.emptyPath(),s={},c=[];e.forEach((v,x)=>{if(!t.isImmediateParentOf(x)){const G=this.getFieldsMap(t);this.applyChanges(G,s,c),s={},c=[],t=x.popLast()}v?s[x.lastSegment()]=Cu(v):c.push(x.lastSegment())});const p=this.getFieldsMap(t);this.applyChanges(p,s,c)}delete(e){const t=this.field(e.popLast());Vl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let c=t.mapValue.fields[e.get(s)];Vl(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,s){Na(t,(c,p)=>e[c]=p);for(const c of s)delete e[c]}clone(){return new Gs(Cu(this.value))}}function oc(i){const e=[];return Na(i.fields,(t,s)=>{const c=new Xi([t]);if(Vl(s)){const p=oc(s.mapValue).fields;if(0===p.length)e.push(c);else for(const v of p)e.push(c.child(v))}else e.push(c)}),new ls(e)}class Ti{constructor(e,t,s,c,p,v){this.key=e,this.documentType=t,this.version=s,this.readTime=c,this.data=p,this.documentState=v}static newInvalidDocument(e){return new Ti(e,0,Fn.min(),Fn.min(),Gs.empty(),0)}static newFoundDocument(e,t,s){return new Ti(e,1,t,Fn.min(),s,0)}static newNoDocument(e,t){return new Ti(e,2,t,Fn.min(),Gs.empty(),0)}static newUnknownDocument(e,t){return new Ti(e,3,t,Fn.min(),Gs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ti(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Gc{constructor(e,t=null,s=[],c=[],p=null,v=null,x=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=c,this.limit=p,this.startAt=v,this.endAt=x,this.ut=null}}function bu(i,e=null,t=[],s=[],c=null,p=null,v=null){return new Gc(i,e,t,s,c,p,v)}function ia(i){const e=N(i);if(null===e.ut){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>{return(c=s).field.canonicalString()+c.op.toString()+Cs(c.value);var c}).join(","),t+="|ob:",t+=e.orderBy.map(s=>{return(c=s).field.canonicalString()+c.dir;var c}).join(","),bt(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>Cs(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>Cs(s)).join(",")),e.ut=t}return e.ut}function Du(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let c=0;c<i.orderBy.length;c++)if(!va(i.orderBy[c],e.orderBy[c]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let c=0;c<i.filters.length;c++)if((t=i.filters[c]).op!==(s=e.filters[c]).op||!t.field.isEqual(s.field)||!yi(t.value,s.value))return!1;var t,s;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!qc(i.startAt,e.startAt)&&qc(i.endAt,e.endAt)}function au(i){return Zt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ku(i,e){return i.filters.filter(t=>t instanceof es&&t.field.isEqual(e))}function Wc(i,e,t){let s=Kn,c=!0;for(const p of Ku(i,e)){let v=Kn,x=!0;switch(p.op){case"<":case"<=":v=ml(p.value);break;case"==":case"in":case">=":v=p.value;break;case">":v=p.value,x=!1;break;case"!=":case"not-in":v=Kn}wd({value:s,inclusive:c},{value:v,inclusive:x})<0&&(s=v,c=x)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];wd({value:s,inclusive:c},{value:v,inclusive:t.inclusive})<0&&(s=v,c=t.inclusive);break}return{value:s,inclusive:c}}function lh(i,e,t){let s=Hn,c=!0;for(const p of Ku(i,e)){let v=Hn,x=!0;switch(p.op){case">=":case">":v=yl(p.value),x=!1;break;case"==":case"in":case"<=":v=p.value;break;case"<":v=p.value,x=!1;break;case"!=":case"not-in":v=Hn}Hc({value:s,inclusive:c},{value:v,inclusive:x})>0&&(s=v,c=x)}if(null!==t)for(let p=0;p<i.orderBy.length;++p)if(i.orderBy[p].field.isEqual(e)){const v=t.position[p];Hc({value:s,inclusive:c},{value:v,inclusive:t.inclusive})>0&&(s=v,c=t.inclusive);break}return{value:s,inclusive:c}}class es extends class{}{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,s):new qu(e,t,s):"array-contains"===t?new ac(e,s):"in"===t?new uc(e,s):"not-in"===t?new Kc(e,s):"array-contains-any"===t?new ch(e,s):new es(e,t,s)}static ct(e,t,s){return"in"===t?new Id(e,s):new Cd(e,s)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(js(t,this.value)):null!==t&&Cn(this.value)===Cn(t)&&this.at(js(t,this.value))}at(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return S()}}ht(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class qu extends es{constructor(e,t,s){super(e,t,s),this.key=Zt.fromName(s.referenceValue)}matches(e){const t=Zt.comparator(e.key,this.key);return this.at(t)}}class Id extends es{constructor(e,t){super(e,"in",t),this.keys=zc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Cd extends es{constructor(e,t){super(e,"not-in",t),this.keys=zc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function zc(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(s=>Zt.fromName(s.referenceValue))}class ac extends es{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hs(t)&&Ps(t.arrayValue,this.value)}}class uc extends es{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ps(this.value.arrayValue,t)}}class Kc extends es{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ps(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ps(this.value.arrayValue,t)}}class ch extends es{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hs(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ps(this.value.arrayValue,s))}}class _a{constructor(e,t){this.position=e,this.inclusive=t}}class Fo{constructor(e,t="asc"){this.field=e,this.dir=t}}function va(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Tu(i,e,t){let s=0;for(let c=0;c<i.position.length;c++){const p=e[c],v=i.position[c];if(s=p.field.isKeyField()?Zt.comparator(Zt.fromName(v.referenceValue),t.key):js(v,t.data.field(p.field)),"desc"===p.dir&&(s*=-1),0!==s)break}return s}function qc(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!yi(i.position[t],e.position[t]))return!1;return!0}class Ea{constructor(e,t=null,s=[],c=[],p=null,v="F",x=null,G=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=c,this.limit=p,this.limitType=v,this.startAt=x,this.endAt=G,this.lt=null,this.ft=null}}function Ul(i,e,t,s,c,p,v,x){return new Ea(i,e,t,s,c,p,v,x)}function Ga(i){return new Ea(i)}function Lo(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Bl(i){for(const e of i.filters)if(e.ht())return e.field;return null}function lc(i){return null!==i.collectionGroup}function Wa(i){const e=N(i);if(null===e.lt){e.lt=[];const t=Bl(e),s=Lo(e);if(null!==t&&null===s)t.isKeyField()||e.lt.push(new Fo(t)),e.lt.push(new Fo(Xi.keyField(),"asc"));else{let c=!1;for(const p of e.explicitOrderBy)e.lt.push(p),p.field.isKeyField()&&(c=!0);if(!c){const p=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new Fo(Xi.keyField(),p))}}}return e.lt}function sa(i){const e=N(i);if(!e.ft)if("F"===e.limitType)e.ft=bu(e.path,e.collectionGroup,Wa(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const p of Wa(e))t.push(new Fo(p.field,"desc"===p.dir?"asc":"desc"));const s=e.endAt?new _a(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new _a(e.startAt.position,e.startAt.inclusive):null;e.ft=bu(e.path,e.collectionGroup,t,e.filters,e.limit,s,c)}return e.ft}function oa(i,e,t){return new Ea(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function jl(i,e){return Du(sa(i),sa(e))&&i.limitType===e.limitType}function dh(i){return`${ia(sa(i))}|lt:${i.limitType}`}function aa(i){return`Query(target=${function _l(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(s=t).field.canonicalString()} ${s.op} ${Cs(s.value)}`;var s}).join(", ")}]`),bt(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(s=t).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Cs(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Cs(t)).join(",")),`Target(${e})`}(sa(i))}; limitType=${i.limitType})`}function cc(i,e){return e.isFoundDocument()&&function(t,s){const c=s.key.path;return null!==t.collectionGroup?s.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):Zt.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(i,e)&&function(t,s){for(const c of t.explicitOrderBy)if(!c.field.isKeyField()&&null===s.data.field(c.field))return!1;return!0}(i,e)&&function(t,s){for(const c of t.filters)if(!c.matches(s))return!1;return!0}(i,e)&&(s=e,!((t=i).startAt&&!function(c,p,v){const x=Tu(c,p,v);return c.inclusive?x<=0:x<0}(t.startAt,Wa(t),s)||t.endAt&&!function(c,p,v){const x=Tu(c,p,v);return c.inclusive?x>=0:x>0}(t.endAt,Wa(t),s)));var t,s}function Oa(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Su(i){return(e,t)=>{let s=!1;for(const c of Wa(i)){const p=Zc(c,e,t);if(0!==p)return p;s=s||c.field.isKeyField()}return 0}}function Zc(i,e,t){const s=i.field.isKeyField()?Zt.comparator(e.key,t.key):function(c,p,v){const x=p.data.field(c),G=v.data.field(c);return null!==x&&null!==G?js(x,G):S()}(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return S()}}function uu(i,e){if(i.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pt(e)?"-0":e}}function dc(i){return{integerValue:""+i}}function bd(i,e){return Pn(e)?dc(e):uu(i,e)}class $l{constructor(){this._=void 0}}function Dd(i,e,t){return i instanceof za?function(s,c){const p={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return c&&(p.fields.__previous_value__=c),{mapValue:p}}(t,e):i instanceof wl?hh(i,e):i instanceof Au?Yc(i,e):function(s,c){const p=El(s,c),v=hc(p)+hc(s._t);return su(p)&&su(s._t)?dc(v):uu(s.wt,v)}(i,e)}function vl(i,e,t){return i instanceof wl?hh(i,e):i instanceof Au?Yc(i,e):t}function El(i,e){return i instanceof Zu?su(t=e)||(s=t)&&"doubleValue"in s?e:{integerValue:0}:null;var s,t}class za extends $l{}class wl extends $l{constructor(e){super(),this.elements=e}}function hh(i,e){const t=Td(e);for(const s of i.elements)t.some(c=>yi(c,s))||t.push(s);return{arrayValue:{values:t}}}class Au extends $l{constructor(e){super(),this.elements=e}}function Yc(i,e){let t=Td(e);for(const s of i.elements)t=t.filter(c=>!yi(c,s));return{arrayValue:{values:t}}}class Zu extends $l{constructor(e,t){super(),this.wt=e,this._t=t}}function hc(i){return Yi(i.integerValue||i.doubleValue)}function Td(i){return Hs(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class xu{constructor(e,t){this.field=e,this.transform=t}}class Qc{constructor(e,t){this.version=e,this.transformResults=t}}class li{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new li}static exists(e){return new li(void 0,e)}static updateTime(e){return new li(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ka(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class Hi{}function fc(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new Mu(i.key,li.none()):new Ju(i.key,i.data,li.none());{const t=i.data,s=Gs.empty();let c=new Nr(Xi.comparator);for(let p of e.fields)if(!c.has(p)){let v=t.field(p);null===v&&p.length>1&&(p=p.popLast(),v=t.field(p)),null===v?s.delete(p):s.set(p,v),c=c.add(p)}return new Ka(i.key,s,new ls(c.toArray()),li.none())}}function pc(i,e,t){i instanceof Ju?function(s,c,p){const v=s.value.clone(),x=lu(s.fieldTransforms,c,p.transformResults);v.setAll(x),c.convertToFoundDocument(p.version,v).setHasCommittedMutations()}(i,e,t):i instanceof Ka?function(s,c,p){if(!ka(s.precondition,c))return void c.convertToUnknownDocument(p.version);const v=lu(s.fieldTransforms,c,p.transformResults),x=c.data;x.setAll(Jc(s)),x.setAll(v),c.convertToFoundDocument(p.version,x).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qu(i,e,t,s){return i instanceof Ju?function(c,p,v,x){if(!ka(c.precondition,p))return v;const G=c.value.clone(),Z=Xc(c.fieldTransforms,x,p);return G.setAll(Z),p.convertToFoundDocument(p.version,G).setHasLocalMutations(),null}(i,e,t,s):i instanceof Ka?function(c,p,v,x){if(!ka(c.precondition,p))return v;const G=Xc(c.fieldTransforms,x,p),Z=p.data;return Z.setAll(Jc(c)),Z.setAll(G),p.convertToFoundDocument(p.version,Z).setHasLocalMutations(),null===v?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(se=>se.field))}(i,e,t,s):(v=t,ka(i.precondition,p=e)?(p.convertToNoDocument(p.version).setHasLocalMutations(),null):v);var p,v}function Ru(i,e){let t=null;for(const s of i.fieldTransforms){const c=e.data.field(s.field),p=El(s.transform,c||null);null!=p&&(null===t&&(t=Gs.empty()),t.set(s.field,p))}return t||null}function Sd(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===s||t&&s&&lo(t,s,(c,p)=>function Yu(i,e){return i.field.isEqual(e.field)&&(s=e.transform,(t=i.transform)instanceof wl&&s instanceof wl||t instanceof Au&&s instanceof Au?lo(t.elements,s.elements,yi):t instanceof Zu&&s instanceof Zu?yi(t._t,s._t):t instanceof za&&s instanceof za);var t,s}(c,p))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,s}class Ju extends Hi{constructor(e,t,s,c=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class Ka extends Hi{constructor(e,t,s,c,p=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=c,this.fieldTransforms=p,this.type=1}getFieldMask(){return this.fieldMask}}function Jc(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}}),e}function lu(i,e,t){const s=new Map;D(i.length===t.length);for(let c=0;c<t.length;c++){const p=i[c],v=p.transform,x=e.data.field(p.field);s.set(p.field,vl(v,x,t[c]))}return s}function Xc(i,e,t){const s=new Map;for(const c of i){const p=c.transform,v=t.data.field(c.field);s.set(c.field,Dd(p,v,e))}return s}class Mu extends Hi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xu extends Hi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vo{constructor(e){this.count=e}}var ts,Wr;function Hl(i){switch(i){default:return S();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function Os(i){if(void 0===i)return gi("GRPC error has no .code"),P.UNKNOWN;switch(i){case ts.OK:return P.OK;case ts.CANCELLED:return P.CANCELLED;case ts.UNKNOWN:return P.UNKNOWN;case ts.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case ts.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case ts.INTERNAL:return P.INTERNAL;case ts.UNAVAILABLE:return P.UNAVAILABLE;case ts.UNAUTHENTICATED:return P.UNAUTHENTICATED;case ts.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case ts.NOT_FOUND:return P.NOT_FOUND;case ts.ALREADY_EXISTS:return P.ALREADY_EXISTS;case ts.PERMISSION_DENIED:return P.PERMISSION_DENIED;case ts.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case ts.ABORTED:return P.ABORTED;case ts.OUT_OF_RANGE:return P.OUT_OF_RANGE;case ts.UNIMPLEMENTED:return P.UNIMPLEMENTED;case ts.DATA_LOSS:return P.DATA_LOSS;default:return S()}}(Wr=ts||(ts={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";class Uo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0!==s)for(const[c,p]of s)if(this.equalsFn(c,e))return p}has(e){return void 0!==this.get(e)}set(e,t){const s=this.mapKeyFn(e),c=this.inner[s];if(void 0===c)return this.inner[s]=[[e,t]],void this.innerSize++;for(let p=0;p<c.length;p++)if(this.equalsFn(c[p][0],e))return void(c[p]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(void 0===s)return!1;for(let c=0;c<s.length;c++)if(this.equalsFn(s[c][0],e))return 1===s.length?delete this.inner[t]:s.splice(c,1),this.innerSize--,!0;return!1}forEach(e){Na(this.inner,(t,s)=>{for(const[c,p]of s)e(c,p)})}isEmpty(){return ma(this.inner)}size(){return this.innerSize}}const Gl=new ii(Zt.comparator);function Pi(){return Gl}const el=new ii(Zt.comparator);function ua(...i){let e=el;for(const t of i)e=e.insert(t.key,t);return e}function fo(i){let e=el;return i.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function Gi(){return tl()}function cu(){return tl()}function tl(){return new Uo(i=>i.toString(),(i,e)=>i.isEqual(e))}const gc=new ii(Zt.comparator),du=new Nr(Zt.comparator);function yr(...i){let e=du;for(const t of i)e=e.add(t);return e}const Ad=new Nr(Rn);function mc(){return Ad}class So{constructor(e,t,s,c,p){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=c,this.resolvedLimboDocuments=p}static createSynthesizedRemoteEventForCurrentChange(e,t){const s=new Map;return s.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t)),new So(Fn.min(),s,mc(),Pi(),yr())}}class Il{constructor(e,t,s,c,p){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=c,this.removedDocuments=p}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Il($i.EMPTY_BYTE_STRING,t,yr(),yr(),yr())}}class yc{constructor(e,t,s,c){this.gt=e,this.removedTargetIds=t,this.key=s,this.yt=c}}class Wl{constructor(e,t){this.targetId=e,this.It=t}}class xd{constructor(e,t,s=$i.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=c}}class Cl{constructor(){this.Tt=0,this.Et=bl(),this.At=$i.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}get current(){return this.Rt}get resumeToken(){return this.At}get Pt(){return 0!==this.Tt}get vt(){return this.bt}Vt(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}St(){let e=yr(),t=yr(),s=yr();return this.Et.forEach((c,p)=>{switch(p){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:s=s.add(c);break;default:S()}}),new Il(this.At,this.Rt,e,t,s)}Dt(){this.bt=!1,this.Et=bl()}Ct(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}xt(e){this.bt=!0,this.Et=this.Et.remove(e)}Nt(){this.Tt+=1}kt(){this.Tt-=1}Ot(){this.bt=!0,this.Rt=!0}}class po{constructor(e){this.Mt=e,this.Ft=new Map,this.$t=Pi(),this.Bt=Nu(),this.Lt=new Nr(Rn)}Ut(e){for(const t of e.gt)e.yt&&e.yt.isFoundDocument()?this.qt(t,e.yt):this.Kt(t,e.key,e.yt);for(const t of e.removedTargetIds)this.Kt(t,e.key,e.yt)}Gt(e){this.forEachTarget(e,t=>{const s=this.Qt(t);switch(e.state){case 0:this.jt(t)&&s.Vt(e.resumeToken);break;case 1:s.kt(),s.Pt||s.Dt(),s.Vt(e.resumeToken);break;case 2:s.kt(),s.Pt||this.removeTarget(t);break;case 3:this.jt(t)&&(s.Ot(),s.Vt(e.resumeToken));break;case 4:this.jt(t)&&(this.Wt(t),s.Vt(e.resumeToken));break;default:S()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((s,c)=>{this.jt(c)&&t(c)})}zt(e){const t=e.targetId,s=e.It.count,c=this.Ht(t);if(c){const p=c.target;if(au(p))if(0===s){const v=new Zt(p.path);this.Kt(t,v,Ti.newNoDocument(v,Fn.min()))}else D(1===s);else this.Jt(t)!==s&&(this.Wt(t),this.Lt=this.Lt.add(t))}}Yt(e){const t=new Map;this.Ft.forEach((p,v)=>{const x=this.Ht(v);if(x){if(p.current&&au(x.target)){const G=new Zt(x.target.path);null!==this.$t.get(G)||this.Xt(v,G)||this.Kt(v,G,Ti.newNoDocument(G,e))}p.vt&&(t.set(v,p.St()),p.Dt())}});let s=yr();this.Bt.forEach((p,v)=>{let x=!0;v.forEachWhile(G=>{const Z=this.Ht(G);return!Z||2===Z.purpose||(x=!1,!1)}),x&&(s=s.add(p))}),this.$t.forEach((p,v)=>v.setReadTime(e));const c=new So(e,t,this.Lt,this.$t,s);return this.$t=Pi(),this.Bt=Nu(),this.Lt=new Nr(Rn),c}qt(e,t){if(!this.jt(e))return;const s=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,s),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}Kt(e,t,s){if(!this.jt(e))return;const c=this.Qt(e);this.Xt(e,t)?c.Ct(t,1):c.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),s&&(this.$t=this.$t.insert(t,s))}removeTarget(e){this.Ft.delete(e)}Jt(e){const t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Nt(e){this.Qt(e).Nt()}Qt(e){let t=this.Ft.get(e);return t||(t=new Cl,this.Ft.set(e,t)),t}Zt(e){let t=this.Bt.get(e);return t||(t=new Nr(Rn),this.Bt=this.Bt.insert(e,t)),t}jt(e){const t=null!==this.Ht(e);return t||At("WatchChangeAggregator","Detected inactive target",e),t}Ht(e){const t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}Wt(e){this.Ft.set(e,new Cl),this.Mt.getRemoteKeysForTarget(e).forEach(t=>{this.Kt(e,t,null)})}Xt(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}function Nu(){return new ii(Zt.comparator)}function bl(){return new ii(Zt.comparator)}const ed={asc:"ASCENDING",desc:"DESCENDING"},qa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Dl{constructor(e,t){this.databaseId=e,this.dt=t}}function nl(i,e){return i.dt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _c(i,e){return i.dt?e.toBase64():e.toUint8Array()}function Fa(i,e){return nl(i,e.toTimestamp())}function bs(i){return D(!!i),Fn.fromTimestamp(function(e){const t=Bs(e);return new mi(t.seconds,t.nanos)}(i))}function td(i,e){return(t=i,new Tr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Rd(i){const e=Tr.fromString(i);return D(nd(e)),e}function Za(i,e){return td(i.databaseId,e.path)}function ks(i,e){const t=Rd(e);if(t.get(1)!==i.databaseId.projectId)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new K(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new Zt(T(t))}function w(i,e){return td(i.databaseId,e)}function f(i){const e=Rd(i);return 4===e.length?Tr.emptyPath():T(e)}function m(i){return new Tr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function T(i){return D(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function z(i,e,t){return{name:Za(i,e),fields:t.value.mapValue.fields}}function re(i,e,t){const s=ks(i,e.name),c=bs(e.updateTime),p=new Gs({mapValue:{fields:e.fields}}),v=Ti.newFoundDocument(s,c,p);return t&&v.setHasCommittedMutations(),t?v.setHasCommittedMutations():v}function Ft(i,e){let t;if(e instanceof Ju)t={update:z(i,e.key,e.value)};else if(e instanceof Mu)t={delete:Za(i,e.key)};else if(e instanceof Ka)t={update:z(i,e.key,e.data),updateMask:vc(e.fieldMask)};else{if(!(e instanceof Xu))return S();t={verify:Za(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(c,p){const v=p.transform;if(v instanceof za)return{fieldPath:p.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof wl)return{fieldPath:p.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof Au)return{fieldPath:p.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof Zu)return{fieldPath:p.field.canonicalString(),increment:v._t};throw S()}(0,s))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:Fa(i,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:S()),t;var c}function sn(i,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?li.updateTime(bs(c.updateTime)):void 0!==c.exists?li.exists(c.exists):li.none():li.none(),s=e.updateTransforms?e.updateTransforms.map(c=>function(p,v){let x=null;"setToServerValue"in v?(D("REQUEST_TIME"===v.setToServerValue),x=new za):"appendMissingElements"in v?x=new wl(v.appendMissingElements.values||[]):"removeAllFromArray"in v?x=new Au(v.removeAllFromArray.values||[]):"increment"in v?x=new Zu(p,v.increment):S();const G=Xi.fromServerFormat(v.fieldPath);return new xu(G,x)}(i,c)):[];var c;if(e.update){const c=ks(i,e.update.name),p=new Gs({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new ls((e.updateMask.fieldPaths||[]).map(Z=>Xi.fromServerFormat(Z)));return new Ka(c,p,v,t,s)}return new Ju(c,p,t,s)}if(e.delete){const c=ks(i,e.delete);return new Mu(c,t)}if(e.verify){const c=ks(i,e.verify);return new Xu(c,t)}return S()}function On(i,e){return{documents:[w(i,e.path)]}}function gs(i,e){const t={structuredQuery:{}},s=e.path;null!==e.collectionGroup?(t.parent=w(i,s),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=w(i,s.popLast()),t.structuredQuery.from=[{collectionId:s.lastSegment()}]);const c=function(G){if(0===G.length)return;const Z=G.map(se=>function(be){if("=="===be.op){if(ou(be.value))return{unaryFilter:{field:Ou(be.field),op:"IS_NAN"}};if(ya(be.value))return{unaryFilter:{field:Ou(be.field),op:"IS_NULL"}}}else if("!="===be.op){if(ou(be.value))return{unaryFilter:{field:Ou(be.field),op:"IS_NOT_NAN"}};if(ya(be.value))return{unaryFilter:{field:Ou(be.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ou(be.field),op:Ko(be.op),value:be.value}}}(se));return 1===Z.length?Z[0]:{compositeFilter:{op:"AND",filters:Z}}}(e.filters);c&&(t.structuredQuery.where=c);const p=function(G){if(0!==G.length)return G.map(Z=>{return{field:Ou((se=Z).field),direction:Pu(se.dir)};var se})}(e.orderBy);p&&(t.structuredQuery.orderBy=p);const v=(Z=e.limit,i.dt||bt(Z)?Z:{value:Z});var Z,x,G;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(t.structuredQuery.endAt={before:!(G=e.endAt).inclusive,values:G.position}),t}function zo(i){let e=f(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let c=null;if(s>0){D(1===s);const se=t.from[0];se.allDescendants?c=se.collectionId:e=e.child(se.collectionId)}let p=[];t.where&&(p=Md(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(se=>{return new Fo(Ya((be=se).field),function(ot){switch(ot){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(be.direction));var be}));let x=null;t.limit&&(x=function(se){let be;return be="object"==typeof se?se.value:se,bt(be)?null:be}(t.limit));let G=null;var se;t.startAt&&(G=new _a((se=t.startAt).values||[],!!se.before));let Z=null;return t.endAt&&(Z=function(se){return new _a(se.values||[],!se.before)}(t.endAt)),Ul(e,c,v,p,x,"F",G,Z)}function Md(i){return i?void 0!==i.unaryFilter?[Nd(i)]:void 0!==i.fieldFilter?[Kl(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Md(e)).reduce((e,t)=>e.concat(t)):S():[]}function Pu(i){return ed[i]}function Ko(i){return qa[i]}function Ou(i){return{fieldPath:i.canonicalString()}}function Ya(i){return Xi.fromServerFormat(i.fieldPath)}function Kl(i){return es.create(Ya(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return S()}}(i.fieldFilter.op),i.fieldFilter.value)}function Nd(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Ya(i.unaryFilter.field);return es.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ya(i.unaryFilter.field);return es.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ya(i.unaryFilter.field);return es.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Ya(i.unaryFilter.field);return es.create(c,"!=",{nullValue:"NULL_VALUE"});default:return S()}}function vc(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nd(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Bo(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Pd(e)),e=rd(i.get(t),e);return Pd(e)}function rd(i,e){let t=e;const s=i.length;for(let c=0;c<s;c++){const p=i.charAt(c);switch(p){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=p}}return t}function Pd(i){return i+"\x01\x01"}function Qa(i){const e=i.length;if(D(e>=2),2===e)return D("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Tr.emptyPath();const t=e-2,s=[];let c="";for(let p=0;p<e;){const v=i.indexOf("\x01",p);switch((v<0||v>t)&&S(),i.charAt(v+1)){case"\x01":const x=i.substring(p,v);let G;0===c.length?G=x:(c+=x,G=c,c=""),s.push(G);break;case"\x10":c+=i.substring(p,v),c+="\0";break;case"\x11":c+=i.substring(p,v+1);break;default:S()}p=v+2}return new Tr(s)}const Od=["userId","batchId"];function id(i,e){return[i,Bo(e)]}function fh(i,e,t){return[i,Bo(e),t]}const mp={},yp=["prefixPath","collectionGroup","readTime","documentId"],tf=["prefixPath","collectionGroup","documentId"],nf=["collectionGroup","readTime","prefixPath","documentId"],ql=["canonicalId","targetId"],rf=["targetId","path"],sf=["path","targetId"],_p=["collectionId","parent"],kd=["indexId","uid"],vp=["uid","sequenceNumber"],Ep=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],wp=["indexId","uid","orderedDocumentKey"],af=["userId","collectionPath","documentId"],ph=["userId","collectionPath","largestBatchId"],uf=["userId","collectionGroup","largestBatchId"],Ec=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fd=[...Ec,"documentOverlays"],gh=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ld=gh,lf=[...Ld,"indexConfiguration","indexState","indexEntries"];class Ja extends jc{constructor(e,t){super(),this.ee=e,this.currentSequenceNumber=t}}function Ur(i,e){const t=N(i);return Us.N(t.ee,e)}class la{constructor(e,t,s,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=c}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const p=this.mutations[c];p.key.isEqual(e.key)&&pc(p,e,s[c])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Qu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Qu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=cu();return this.mutations.forEach(c=>{const p=e.get(c.key),v=p.overlayedDocument;let x=this.applyToLocalView(v,p.mutatedFields);x=t.has(c.key)?null:x;const G=fc(v,x);null!==G&&s.set(c.key,G),v.isValidDocument()||v.convertToNoDocument(Fn.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yr())}isEqual(e){return this.batchId===e.batchId&&lo(this.mutations,e.mutations,(t,s)=>Sd(t,s))&&lo(this.baseMutations,e.baseMutations,(t,s)=>Sd(t,s))}}class Tl{constructor(e,t,s,c){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=c}static from(e,t,s){D(e.mutations.length===s.length);let c=gc;const p=e.mutations;for(let v=0;v<p.length;v++)c=c.insert(p[v].key,s[v].version);return new Tl(e,t,s,c)}}class mh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Sl{constructor(e,t,s,c,p=Fn.min(),v=Fn.min(),x=$i.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=c,this.snapshotVersion=p,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=x}withSequenceNumber(e){return new Sl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Sl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yh{constructor(e){this.ne=e}}function ku(i,e){const t=e.key,s={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:vh(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())s.document={name:Za(c=i.ne,(p=e).key),fields:p.data.value.mapValue.fields,updateTime:nl(c,p.version.toTimestamp())};else if(e.isNoDocument())s.noDocument={path:t.path.toArray(),readTime:Al(e.version)};else{if(!e.isUnknownDocument())return S();s.unknownDocument={path:t.path.toArray(),version:Al(e.version)}}var c,p;return s}function vh(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Al(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zl(i){const e=new mi(i.seconds,i.nanoseconds);return Fn.fromTimestamp(e)}function xl(i,e){const t=(e.baseMutations||[]).map(p=>sn(i.ne,p));for(let p=0;p<e.mutations.length-1;++p){const v=e.mutations[p];p+1<e.mutations.length&&void 0!==e.mutations[p+1].transform&&(v.updateTransforms=e.mutations[p+1].transform.fieldTransforms,e.mutations.splice(p+1,1),++p)}const s=e.mutations.map(p=>sn(i.ne,p)),c=mi.fromMillis(e.localWriteTimeMs);return new la(e.batchId,c,t,s)}function wc(i){const e=Zl(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Zl(i.lastLimboFreeSnapshotVersion):Fn.min();let s;var c;return void 0!==i.query.documents?(D(1===(c=i.query).documents.length),s=sa(Ga(f(c.documents[0])))):s=sa(zo(i.query)),new Sl(s,i.targetId,0,i.lastListenSequenceNumber,e,t,$i.fromBase64String(i.resumeToken))}function Eh(i,e){const t=Al(e.snapshotVersion),s=Al(e.lastLimboFreeSnapshotVersion);let c;c=au(e.target)?On(i.ne,e.target):gs(i.ne,e.target);const p=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ia(e.target),readTime:t,resumeToken:p,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:s,query:c}}function wa(i){const e=zo({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?oa(e,e.limit,"L"):e}function Vd(i,e){return new mh(e.largestBatchId,sn(i.ne,e.overlayMutation))}function Yl(i,e){const t=e.path.lastSegment();return[i,Bo(e.path.popLast()),t]}function cf(i,e,t,s){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:Al(s.readTime),documentKey:Bo(s.documentKey.path),largestBatchId:s.largestBatchId}}class df{getBundleMetadata(e,t){return hf(e).get(t).next(s=>{if(s)return{id:(c=s).bundleId,createTime:Zl(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return hf(e).put({bundleId:(s=t).id,createTime:Al(bs(s.createTime)),version:s.version});var s}getNamedQuery(e,t){return ff(e).get(t).next(s=>{if(s)return{name:(c=s).name,query:wa(c.bundledQuery),readTime:Zl(c.readTime)};var c})}saveNamedQuery(e,t){return ff(e).put({name:(s=t).name,readTime:Al(bs(s.readTime)),bundledQuery:s.bundledQuery});var s}}function hf(i){return Ur(i,"bundles")}function ff(i){return Ur(i,"namedQueries")}class Ic{constructor(e,t){this.wt=e,this.userId=t}static se(e,t){return new Ic(e,t.uid||"")}getOverlay(e,t){return Cc(e).get(Yl(this.userId,t)).next(s=>s?Vd(this.wt,s):null)}getOverlays(e,t){const s=Gi();return Je.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&s.set(c,p)})).next(()=>s)}saveOverlays(e,t,s){const c=[];return s.forEach((p,v)=>{const x=new mh(t,v);c.push(this.ie(e,x))}),Je.waitFor(c)}removeOverlaysForBatchId(e,t,s){const c=new Set;t.forEach(v=>c.add(Bo(v.getCollectionPath())));const p=[];return c.forEach(v=>{const x=IDBKeyRange.bound([this.userId,v,s],[this.userId,v,s+1],!1,!0);p.push(Cc(e).W("collectionPathOverlayIndex",x))}),Je.waitFor(p)}getOverlaysForCollection(e,t,s){const c=Gi(),p=Bo(t),v=IDBKeyRange.bound([this.userId,p,s],[this.userId,p,Number.POSITIVE_INFINITY],!0);return Cc(e).K("collectionPathOverlayIndex",v).next(x=>{for(const G of x){const Z=Vd(this.wt,G);c.set(Z.getKey(),Z)}return c})}getOverlaysForCollectionGroup(e,t,s,c){const p=Gi();let v;const x=IDBKeyRange.bound([this.userId,t,s],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Cc(e).J({index:"collectionGroupOverlayIndex",range:x},(G,Z,se)=>{const be=Vd(this.wt,Z);p.size()<c||be.largestBatchId===v?(p.set(be.getKey(),be),v=be.largestBatchId):se.done()}).next(()=>p)}ie(e,t){return Cc(e).put(function(s,c,p){const[v,x,G]=Yl(c,p.mutation.key);return{userId:c,collectionPath:x,documentId:G,collectionGroup:p.mutation.key.getCollectionGroup(),largestBatchId:p.largestBatchId,overlayMutation:Ft(s.ne,p.mutation)}}(this.wt,this.userId,t))}}function Cc(i){return Ur(i,"documentOverlays")}class Rl{constructor(){}re(e,t){this.oe(e,t),t.ue()}oe(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(Yi(e.integerValue));else if("doubleValue"in e){const s=Yi(e.doubleValue);isNaN(s)?this.ce(t,13):(this.ce(t,15),Pt(s)?t.ae(0):t.ae(s))}else if("timestampValue"in e){const s=e.timestampValue;this.ce(t,20),"string"==typeof s?t.he(s):(t.he(`${s.seconds||""}`),t.ae(s.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(F(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){const s=e.geoPointValue;this.ce(t,45),t.ae(s.latitude||0),t.ae(s.longitude||0)}else"mapValue"in e?gl(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):S()}le(e,t){this.ce(t,25),this.ge(e,t)}ge(e,t){t.he(e)}we(e,t){const s=e.fields||{};this.ce(t,55);for(const c of Object.keys(s))this.le(c,t),this.oe(s[c],t)}me(e,t){const s=e.values||[];this.ce(t,50);for(const c of s)this.oe(c,t)}_e(e,t){this.ce(t,37),Zt.fromName(e).path.forEach(s=>{this.ce(t,60),this.ge(s,t)})}ce(e,t){e.ae(t)}fe(e){e.ae(2)}}function Ip(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function hr(i){const e=64-function(t){let s=0;for(let c=0;c<8;++c){const p=Ip(255&t[c]);if(s+=p,8!==p)break}return s}(i);return Math.ceil(e/8)}Rl.ye=new Rl;class pf{constructor(){this.buffer=new Uint8Array(1024),this.position=0}pe(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ie(s.value),s=t.next();this.Te()}Ee(e){const t=e[Symbol.iterator]();let s=t.next();for(;!s.done;)this.Ae(s.value),s=t.next();this.Re()}be(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ie(s);else if(s<2048)this.Ie(960|s>>>6),this.Ie(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ie(480|s>>>12),this.Ie(128|63&s>>>6),this.Ie(128|63&s);else{const c=t.codePointAt(0);this.Ie(240|c>>>18),this.Ie(128|63&c>>>12),this.Ie(128|63&c>>>6),this.Ie(128|63&c)}}this.Te()}Pe(e){for(const t of e){const s=t.charCodeAt(0);if(s<128)this.Ae(s);else if(s<2048)this.Ae(960|s>>>6),this.Ae(128|63&s);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s);else{const c=t.codePointAt(0);this.Ae(240|c>>>18),this.Ae(128|63&c>>>12),this.Ae(128|63&c>>>6),this.Ae(128|63&c)}}this.Re()}ve(e){const t=this.Ve(e),s=hr(t);this.Se(1+s),this.buffer[this.position++]=255&s;for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=255&t[c]}De(e){const t=this.Ve(e),s=hr(t);this.Se(1+s),this.buffer[this.position++]=~(255&s);for(let c=t.length-s;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}Ce(){this.xe(255),this.xe(255)}Ne(){this.ke(255),this.ke(255)}reset(){this.position=0}seed(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}Oe(){return this.buffer.slice(0,this.position)}Ve(e){const t=function(c){const p=new DataView(new ArrayBuffer(8));return p.setFloat64(0,c,!1),new Uint8Array(p.buffer)}(e),s=0!=(128&t[0]);t[0]^=s?255:128;for(let c=1;c<t.length;++c)t[c]^=s?255:0;return t}Ie(e){const t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}Ae(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}Te(){this.xe(0),this.xe(1)}Re(){this.ke(0),this.ke(1)}xe(e){this.Se(1),this.buffer[this.position++]=e}ke(e){this.Se(1),this.buffer[this.position++]=~e}Se(e){const t=e+this.position;if(t<=this.buffer.length)return;let s=2*this.buffer.length;s<t&&(s=t);const c=new Uint8Array(s);c.set(this.buffer),this.buffer=c}}class wh{constructor(e){this.Me=e}de(e){this.Me.pe(e)}he(e){this.Me.be(e)}ae(e){this.Me.ve(e)}ue(){this.Me.Ce()}}class gf{constructor(e){this.Me=e}de(e){this.Me.Ee(e)}he(e){this.Me.Pe(e)}ae(e){this.Me.De(e)}ue(){this.Me.Ne()}}class Ml{constructor(){this.Me=new pf,this.Fe=new wh(this.Me),this.$e=new gf(this.Me)}seed(e){this.Me.seed(e)}Be(e){return 0===e?this.Fe:this.$e}Oe(){return this.Me.Oe()}reset(){this.Me.reset()}}class Ao{constructor(e,t,s,c){this.indexId=e,this.documentKey=t,this.arrayValue=s,this.directionalValue=c}Le(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,s=new Uint8Array(t);return s.set(this.directionalValue,0),t!==e?s.set([0],this.directionalValue.length):++s[s.length-1],new Ao(this.indexId,this.documentKey,this.arrayValue,s)}}function Nl(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=mf(i.arrayValue,e.arrayValue),0!==t?t:(t=mf(i.directionalValue,e.directionalValue),0!==t?t:Zt.comparator(i.documentKey,e.documentKey)))}function mf(i,e){for(let t=0;t<i.length&&t<e.length;++t){const s=i[t]-e[t];if(0!==s)return s}return i.length-e.length}class Ih{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ue=e.orderBy,this.qe=[];for(const t of e.filters){const s=t;s.ht()?this.Ke=s:this.qe.push(s)}}Ge(e){const t=Ll(e);if(void 0!==t&&!this.Qe(t))return!1;const s=Ra(e);let c=0,p=0;for(;c<s.length&&this.Qe(s[c]);++c);if(c===s.length)return!0;if(void 0!==this.Ke){const v=s[c];if(!this.je(this.Ke,v)||!this.We(this.Ue[p++],v))return!1;++c}for(;c<s.length;++c){const v=s[c];if(p>=this.Ue.length||!this.We(this.Ue[p++],v))return!1}return!0}Qe(e){for(const t of this.qe)if(this.je(t,e))return!0;return!1}je(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}We(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Fu{constructor(){this.ze=new sd}addToCollectionParentIndex(e,t){return this.ze.add(t),Je.resolve()}getCollectionParents(e,t){return Je.resolve(this.ze.getEntries(t))}addFieldIndex(e,t){return Je.resolve()}deleteFieldIndex(e,t){return Je.resolve()}getDocumentsMatchingTarget(e,t){return Je.resolve(null)}getIndexType(e,t){return Je.resolve(0)}getFieldIndexes(e,t){return Je.resolve([])}getNextCollectionGroupToUpdate(e){return Je.resolve(null)}getMinOffset(e,t){return Je.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,t){return Je.resolve(Gr.min())}updateCollectionGroup(e,t,s){return Je.resolve()}updateIndexEntries(e,t){return Je.resolve()}}class sd{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t]||new Nr(Tr.comparator),p=!c.has(s);return this.index[t]=c.add(s),p}has(e){const t=e.lastSegment(),s=e.popLast(),c=this.index[t];return c&&c.has(s)}getEntries(e){return(this.index[e]||new Nr(Tr.comparator)).toArray()}}const d=new Uint8Array(0);class u{constructor(e,t){this.user=e,this.databaseId=t,this.He=new sd,this.Je=new Uo(s=>ia(s),(s,c)=>Du(s,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.He.has(t)){const s=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.He.add(t)});const p={collectionId:s,parent:Bo(c)};return l(e).put(p)}return Je.resolve()}getCollectionParents(e,t){const s=[],c=IDBKeyRange.bound([t,""],[$u(t),""],!1,!0);return l(e).K(c).next(p=>{for(const v of p){if(v.collectionId!==t)break;s.push(Qa(v.parent))}return s})}addFieldIndex(e,t){const s=C(e),c={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(x=>[x.fieldPath.canonicalString(),x.kind])};var v;delete c.indexId;const p=s.add(c);if(t.indexState){const v=M(e);return p.next(x=>{v.put(cf(x,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return p.next()}deleteFieldIndex(e,t){const s=C(e),c=M(e),p=g(e);return s.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>p.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const s=g(e);let c=!0;const p=new Map;return Je.forEach(this.Ye(t),v=>this.Xe(e,v).next(x=>{c&&(c=!!x),p.set(v,x)})).next(()=>{if(c){let v=yr();const x=[];return Je.forEach(p,(G,Z)=>{var se;At("IndexedDbIndexManager",`Using index ${se=G,`id=${se.indexId}|cg=${se.collectionGroup}|f=${se.fields.map(Ei=>`${Ei.fieldPath}:${Ei.kind}`).join(",")}`} to execute ${ia(t)}`);const be=function(Ei,xo){const ys=Ll(xo);if(void 0===ys)return null;for(const Ws of Ku(Ei,ys.fieldPath))switch(Ws.op){case"array-contains-any":return Ws.value.arrayValue.values||[];case"array-contains":return[Ws.value]}return null}(Z,G),ot=function(Ei,xo){const ys=new Map;for(const Ws of Ra(xo))for(const ca of Ku(Ei,Ws.fieldPath))switch(ca.op){case"==":case"in":ys.set(Ws.fieldPath.canonicalString(),ca.value);break;case"not-in":case"!=":return ys.set(Ws.fieldPath.canonicalString(),ca.value),Array.from(ys.values())}return null}(Z,G),vt=function(Ei,xo){const ys=[];let Ws=!0;for(const ca of Ra(xo)){const Qh=0===ca.kind?Wc(Ei,ca.fieldPath,Ei.startAt):lh(Ei,ca.fieldPath,Ei.startAt);ys.push(Qh.value),Ws&&(Ws=Qh.inclusive)}return new _a(ys,Ws)}(Z,G),Rt=function(Ei,xo){const ys=[];let Ws=!0;for(const ca of Ra(xo)){const Qh=0===ca.kind?lh(Ei,ca.fieldPath,Ei.endAt):Wc(Ei,ca.fieldPath,Ei.endAt);ys.push(Qh.value),Ws&&(Ws=Qh.inclusive)}return new _a(ys,Ws)}(Z,G),vn=this.Ze(G,Z,vt),Ln=this.Ze(G,Z,Rt),Oi=this.tn(G,Z,ot),As=this.en(G.indexId,be,vn,vt.inclusive,Ln,Rt.inclusive,Oi);return Je.forEach(As,Ei=>s.j(Ei,t.limit).next(xo=>{xo.forEach(ys=>{const Ws=Zt.fromSegments(ys.documentKey);v.has(Ws)||(v=v.add(Ws),x.push(Ws))})}))}).next(()=>x)}return Je.resolve(null)})}Ye(e){let t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}en(e,t,s,c,p,v,x){const G=(null!=t?t.length:1)*Math.max(s.length,p.length),Z=G/(null!=t?t.length:1),se=[];for(let be=0;be<G;++be){const ot=t?this.nn(t[be/Z]):d,vt=this.sn(e,ot,s[be%Z],c),Rt=this.rn(e,ot,p[be%Z],v),vn=x.map(Ln=>this.sn(e,ot,Ln,!0));se.push(...this.createRange(vt,Rt,vn))}return se}sn(e,t,s,c){const p=new Ao(e,Zt.empty(),t,s);return c?p:p.Le()}rn(e,t,s,c){const p=new Ao(e,Zt.empty(),t,s);return c?p.Le():p}Xe(e,t){const s=new Ih(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(p=>{let v=null;for(const x of p)s.Ge(x)&&(!v||x.fields.length>v.fields.length)&&(v=x);return v})}getIndexType(e,t){let s=2;return Je.forEach(this.Ye(t),c=>this.Xe(e,c).next(p=>{p?0!==s&&p.fields.length<function(v){let x=new Nr(Xi.comparator),G=!1;for(const Z of v.filters){const se=Z;se.field.isKeyField()||("array-contains"===se.op||"array-contains-any"===se.op?G=!0:x=x.add(se.field))}for(const Z of v.orderBy)Z.field.isKeyField()||(x=x.add(Z.field));return x.size+(G?1:0)}(c)&&(s=1):s=0})).next(()=>s)}on(e,t){const s=new Ml;for(const c of Ra(e)){const p=t.data.field(c.fieldPath);if(null==p)return null;const v=s.Be(c.kind);Rl.ye.re(p,v)}return s.Oe()}nn(e){const t=new Ml;return Rl.ye.re(e,t.Be(0)),t.Oe()}un(e,t){const s=new Ml;return Rl.ye.re($s(this.databaseId,t),s.Be(function(c){const p=Ra(c);return 0===p.length?0:p[p.length-1].kind}(e))),s.Oe()}tn(e,t,s){if(null===s)return[];let c=[];c.push(new Ml);let p=0;for(const v of Ra(e)){const x=s[p++];for(const G of c)if(this.cn(t,v.fieldPath)&&Hs(x))c=this.an(c,v,x);else{const Z=G.Be(v.kind);Rl.ye.re(x,Z)}}return this.hn(c)}Ze(e,t,s){return this.tn(e,t,s.position)}hn(e){const t=[];for(let s=0;s<e.length;++s)t[s]=e[s].Oe();return t}an(e,t,s){const c=[...e],p=[];for(const v of s.arrayValue.values||[])for(const x of c){const G=new Ml;G.seed(x.Oe()),Rl.ye.re(v,G.Be(t.kind)),p.push(G)}return p}cn(e,t){return!!e.filters.find(s=>s instanceof es&&s.field.isEqual(t)&&("in"===s.op||"not-in"===s.op))}getFieldIndexes(e,t){const s=C(e),c=M(e);return(t?s.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):s.K()).next(p=>{const v=[];return Je.forEach(p,x=>c.get([x.indexId,this.uid]).next(G=>{v.push(function(Z,se){const be=se?new fl(se.sequenceNumber,new Gr(Zl(se.readTime),new Zt(Qa(se.documentKey)),se.largestBatchId)):fl.empty(),ot=Z.fields.map(([vt,Rt])=>new Hu(Xi.fromServerFormat(vt),Rt));return new sc(Z.indexId,Z.collectionGroup,ot,be)}(x,G))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((s,c)=>{const p=s.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==p?p:Rn(s.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,s){const c=C(e),p=M(e);return this.ln(e).next(v=>c.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(x=>Je.forEach(x,G=>p.put(cf(G.indexId,this.user,v,s)))))}updateIndexEntries(e,t){const s=new Map;return Je.forEach(t,(c,p)=>{const v=s.get(c.collectionGroup);return(v?Je.resolve(v):this.getFieldIndexes(e,c.collectionGroup)).next(x=>(s.set(c.collectionGroup,x),Je.forEach(x,G=>this.fn(e,c,G).next(Z=>{const se=this.dn(p,G);return Z.isEqual(se)?Je.resolve():this._n(e,p,G,Z,se)}))))})}wn(e,t,s,c){return g(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.un(s,t.key),documentKey:t.key.path.toArray()})}mn(e,t,s,c){return g(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.un(s,t.key),t.key.path.toArray()])}fn(e,t,s){const c=g(e);let p=new Nr(Nl);return c.J({index:"documentKeyIndex",range:IDBKeyRange.only([s.indexId,this.uid,this.un(s,t)])},(v,x)=>{p=p.add(new Ao(s.indexId,t,x.arrayValue,x.directionalValue))}).next(()=>p)}dn(e,t){let s=new Nr(Nl);const c=this.on(t,e);if(null==c)return s;const p=Ll(t);if(null!=p){const v=e.data.field(p.fieldPath);if(Hs(v))for(const x of v.arrayValue.values||[])s=s.add(new Ao(t.indexId,e.key,this.nn(x),c))}else s=s.add(new Ao(t.indexId,e.key,d,c));return s}_n(e,t,s,c,p){At("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(x,G,Z,se,be){const ot=x.getIterator(),vt=G.getIterator();let Rt=To(ot),vn=To(vt);for(;Rt||vn;){let Ln=!1,Oi=!1;if(Rt&&vn){const As=Z(Rt,vn);As<0?Oi=!0:As>0&&(Ln=!0)}else null!=Rt?Oi=!0:Ln=!0;Ln?(se(vn),vn=To(vt)):Oi?(be(Rt),Rt=To(ot)):(Rt=To(ot),vn=To(vt))}}(c,p,Nl,x=>{v.push(this.wn(e,t,s,x))},x=>{v.push(this.mn(e,t,s,x))}),Je.waitFor(v)}ln(e){let t=1;return M(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(s,c,p)=>{p.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,s){s=s.sort((v,x)=>Nl(v,x)).filter((v,x,G)=>!x||0!==Nl(v,G[x-1]));const c=[];c.push(e);for(const v of s){const x=Nl(v,e),G=Nl(v,t);if(0===x)c[0]=e.Le();else if(x>0&&G<0)c.push(v),c.push(v.Le());else if(G>0)break}c.push(t);const p=[];for(let v=0;v<c.length;v+=2)p.push(IDBKeyRange.bound([c[v].indexId,this.uid,c[v].arrayValue,c[v].directionalValue,d,[]],[c[v+1].indexId,this.uid,c[v+1].arrayValue,c[v+1].directionalValue,d,[]]));return p}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next($)}getMinOffset(e,t){return Je.mapArray(this.Ye(t),s=>this.Xe(e,s).next(c=>c||S())).next($)}}function l(i){return Ur(i,"collectionParents")}function g(i){return Ur(i,"indexEntries")}function C(i){return Ur(i,"indexConfiguration")}function M(i){return Ur(i,"indexState")}function $(i){D(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let s=1;s<i.length;s++){const c=i[s].indexState.offset;Gu(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new Gr(e.readTime,e.documentKey,t)}const ee={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class le{constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}static withCacheSize(e){return new le(e,le.DEFAULT_COLLECTION_PERCENTILE,le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ee(i,e,t){const s=i.store("mutations"),c=i.store("documentMutations"),p=[],v=IDBKeyRange.only(t.batchId);let x=0;const G=s.J({range:v},(se,be,ot)=>(x++,ot.delete()));p.push(G.next(()=>{D(1===x)}));const Z=[];for(const se of t.mutations){const be=fh(e,se.key.path,t.batchId);p.push(c.delete(be)),Z.push(se.key)}return Je.waitFor(p).next(()=>Z)}function rt(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw S();e=i.noDocument}return JSON.stringify(e).length}le.DEFAULT_COLLECTION_PERCENTILE=10,le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,le.DEFAULT=new le(41943040,le.DEFAULT_COLLECTION_PERCENTILE,le.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),le.DISABLED=new le(-1,0,0);class ut{constructor(e,t,s,c){this.userId=e,this.wt=t,this.indexManager=s,this.referenceDelegate=c,this.gn={}}static se(e,t,s,c){D(""!==e.uid);const p=e.isAuthenticated()?e.uid:"";return new ut(p,t,s,c)}checkEmpty(e){let t=!0;const s=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return mn(e).J({index:"userMutationsIndex",range:s},(c,p,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,s,c){const p=Vn(e),v=mn(e);return v.add({}).next(x=>{D("number"==typeof x);const G=new la(x,t,s,c),Z=function(ot,vt,Rt){const vn=Rt.baseMutations.map(Oi=>Ft(ot.ne,Oi)),Ln=Rt.mutations.map(Oi=>Ft(ot.ne,Oi));return{userId:vt,batchId:Rt.batchId,localWriteTimeMs:Rt.localWriteTime.toMillis(),baseMutations:vn,mutations:Ln}}(this.wt,this.userId,G),se=[];let be=new Nr((ot,vt)=>Rn(ot.canonicalString(),vt.canonicalString()));for(const ot of c){const vt=fh(this.userId,ot.key.path,x);be=be.add(ot.key.path.popLast()),se.push(v.put(Z)),se.push(p.put(vt,mp))}return be.forEach(ot=>{se.push(this.indexManager.addToCollectionParentIndex(e,ot))}),e.addOnCommittedListener(()=>{this.gn[x]=G.keys()}),Je.waitFor(se).next(()=>G)})}lookupMutationBatch(e,t){return mn(e).get(t).next(s=>s?(D(s.userId===this.userId),xl(this.wt,s)):null)}yn(e,t){return this.gn[t]?Je.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next(s=>{if(s){const c=s.keys();return this.gn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const s=t+1,c=IDBKeyRange.lowerBound([this.userId,s]);let p=null;return mn(e).J({index:"userMutationsIndex",range:c},(v,x,G)=>{x.userId===this.userId&&(D(x.batchId>=s),p=xl(this.wt,x)),G.done()}).next(()=>p)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let s=-1;return mn(e).J({index:"userMutationsIndex",range:t,reverse:!0},(c,p,v)=>{s=p.batchId,v.done()}).next(()=>s)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return mn(e).K("userMutationsIndex",t).next(s=>s.map(c=>xl(this.wt,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const s=id(this.userId,t.path),c=IDBKeyRange.lowerBound(s),p=[];return Vn(e).J({range:c},(v,x,G)=>{const[Z,se,be]=v,ot=Qa(se);if(Z===this.userId&&t.path.isEqual(ot))return mn(e).get(be).next(vt=>{if(!vt)throw S();D(vt.userId===this.userId),p.push(xl(this.wt,vt))});G.done()}).next(()=>p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nr(Rn);const c=[];return t.forEach(p=>{const v=id(this.userId,p.path),x=IDBKeyRange.lowerBound(v),G=Vn(e).J({range:x},(Z,se,be)=>{const[ot,vt,Rt]=Z,vn=Qa(vt);ot===this.userId&&p.path.isEqual(vn)?s=s.add(Rt):be.done()});c.push(G)}),Je.waitFor(c).next(()=>this.pn(e,s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1,p=id(this.userId,s),v=IDBKeyRange.lowerBound(p);let x=new Nr(Rn);return Vn(e).J({range:v},(G,Z,se)=>{const[be,ot,vt]=G,Rt=Qa(ot);be===this.userId&&s.isPrefixOf(Rt)?Rt.length===c&&(x=x.add(vt)):se.done()}).next(()=>this.pn(e,x))}pn(e,t){const s=[],c=[];return t.forEach(p=>{c.push(mn(e).get(p).next(v=>{if(null===v)throw S();D(v.userId===this.userId),s.push(xl(this.wt,v))}))}),Je.waitFor(c).next(()=>s)}removeMutationBatch(e,t){return Ee(e.ee,this.userId,t).next(s=>(e.addOnCommittedListener(()=>{this.In(t.batchId)}),Je.forEach(s,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}In(e){delete this.gn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Je.resolve();const s=IDBKeyRange.lowerBound([this.userId]),c=[];return Vn(e).J({range:s},(p,v,x)=>{if(p[0]===this.userId){const G=Qa(p[1]);c.push(G)}else x.done()}).next(()=>{D(0===c.length)})})}containsKey(e,t){return Dt(e,this.userId,t)}Tn(e){return _i(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Dt(i,e,t){const s=id(e,t.path),c=s[1],p=IDBKeyRange.lowerBound(s);let v=!1;return Vn(i).J({range:p,H:!0},(x,G,Z)=>{const[se,be,ot]=x;se===e&&be===c&&(v=!0),Z.done()}).next(()=>v)}function mn(i){return Ur(i,"mutations")}function Vn(i){return Ur(i,"documentMutations")}function _i(i){return Ur(i,"mutationQueues")}class Ds{constructor(e){this.En=e}next(){return this.En+=2,this.En}static An(){return new Ds(0)}static Rn(){return new Ds(-1)}}class Ql{constructor(e,t){this.referenceDelegate=e,this.wt=t}allocateTargetId(e){return this.bn(e).next(t=>{const s=new Ds(t.highestTargetId);return t.highestTargetId=s.next(),this.Pn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.bn(e).next(t=>Fn.fromTimestamp(new mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,s){return this.bn(e).next(c=>(c.highestListenSequenceNumber=t,s&&(c.lastRemoteSnapshotVersion=s.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.Pn(e,c)))}addTargetData(e,t){return this.vn(e,t).next(()=>this.bn(e).next(s=>(s.targetCount+=1,this.Vn(t,s),this.Pn(e,s))))}updateTargetData(e,t){return this.vn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>La(e).delete(t.targetId)).next(()=>this.bn(e)).next(s=>(D(s.targetCount>0),s.targetCount-=1,this.Pn(e,s)))}removeTargets(e,t,s){let c=0;const p=[];return La(e).J((v,x)=>{const G=wc(x);G.sequenceNumber<=t&&null===s.get(G.targetId)&&(c++,p.push(this.removeTargetData(e,G)))}).next(()=>Je.waitFor(p)).next(()=>c)}forEachTarget(e,t){return La(e).J((s,c)=>{const p=wc(c);t(p)})}bn(e){return Pl(e).get("targetGlobalKey").next(t=>(D(null!==t),t))}Pn(e,t){return Pl(e).put("targetGlobalKey",t)}vn(e,t){return La(e).put(Eh(this.wt,t))}Vn(e,t){let s=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,s=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,s=!0),s}getTargetCount(e){return this.bn(e).next(t=>t.targetCount)}getTargetData(e,t){const s=ia(t),c=IDBKeyRange.bound([s,Number.NEGATIVE_INFINITY],[s,Number.POSITIVE_INFINITY]);let p=null;return La(e).J({range:c,index:"queryTargetsIndex"},(v,x,G)=>{const Z=wc(x);Du(t,Z.target)&&(p=Z,G.done())}).next(()=>p)}addMatchingKeys(e,t,s){const c=[],p=rl(e);return t.forEach(v=>{const x=Bo(v.path);c.push(p.put({targetId:s,path:x})),c.push(this.referenceDelegate.addReference(e,s,v))}),Je.waitFor(c)}removeMatchingKeys(e,t,s){const c=rl(e);return Je.forEach(t,p=>{const v=Bo(p.path);return Je.waitFor([c.delete([s,v]),this.referenceDelegate.removeReference(e,s,p)])})}removeMatchingKeysForTargetId(e,t){const s=rl(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return s.delete(c)}getMatchingKeysForTargetId(e,t){const s=IDBKeyRange.bound([t],[t+1],!1,!0),c=rl(e);let p=yr();return c.J({range:s,H:!0},(v,x,G)=>{const Z=Qa(v[1]),se=new Zt(Z);p=p.add(se)}).next(()=>p)}containsKey(e,t){const s=Bo(t.path),c=IDBKeyRange.bound([s],[$u(s)],!1,!0);let p=0;return rl(e).J({index:"documentTargetsIndex",H:!0,range:c},([v,x],G,Z)=>{0!==v&&(p++,Z.done())}).next(()=>p>0)}te(e,t){return La(e).get(t).next(s=>s?wc(s):null)}}function La(i){return Ur(i,"targets")}function Pl(i){return Ur(i,"targetGlobal")}function rl(i){return Ur(i,"targetDocuments")}function em([i,e],[t,s]){const c=Rn(i,t);return 0===c?Rn(e,s):c}class Cp{constructor(e){this.Sn=e,this.buffer=new Nr(em),this.Dn=0}Cn(){return++this.Dn}xn(e){const t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();em(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class e0{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Nn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}stop(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}get started(){return null!==this.Nn}kn(e){var t=this;At("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,xe.Z)(function*(){t.Nn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(s){Do(s)?At("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",s):yield fa(s)}yield t.kn(3e5)}))}}class t0{constructor(e,t){this.On=e,this.params=t}calculateTargetCount(e,t){return this.On.Mn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(0===t)return Je.resolve(fs.ot);const s=new Cp(t);return this.On.forEachTarget(e,c=>s.xn(c.sequenceNumber)).next(()=>this.On.Fn(e,c=>s.xn(c))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.On.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.On.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector","Garbage collection skipped; disabled"),Je.resolve(ee)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(At("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ee):this.$n(e,t))}getCacheSize(e){return this.On.getCacheSize(e)}$n(e,t){let s,c,p,v,x,G,Z;const se=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(be=>(be>this.params.maximumSequenceNumbersToCollect?(At("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${be}`),c=this.params.maximumSequenceNumbersToCollect):c=be,v=Date.now(),this.nthSequenceNumber(e,c))).next(be=>(s=be,x=Date.now(),this.removeTargets(e,s,t))).next(be=>(p=be,G=Date.now(),this.removeOrphanedDocuments(e,s))).next(be=>(Z=Date.now(),ru()<=W.in.DEBUG&&At("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-se}ms\n\tDetermined least recently used ${c} in `+(x-v)+`ms\n\tRemoved ${p} targets in `+(G-x)+`ms\n\tRemoved ${be} documents in `+(Z-G)+`ms\nTotal Duration: ${Z-se}ms`),Je.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:p,documentsRemoved:be})))}}class n0{constructor(e,t){this.db=e,this.garbageCollector=new t0(this,t)}Mn(e){const t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next(s=>t.next(c=>s+c))}Bn(e){let t=0;return this.Fn(e,s=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Fn(e,t){return this.Ln(e,(s,c)=>t(c))}addReference(e,t,s){return bp(e,s)}removeReference(e,t,s){return bp(e,s)}removeTargets(e,t,s){return this.db.getTargetCache().removeTargets(e,t,s)}markPotentiallyOrphaned(e,t){return bp(e,t)}Un(e,t){return function(s,c){let p=!1;return _i(s).Y(v=>Dt(s,v,c).next(x=>(x&&(p=!0),Je.resolve(!x)))).next(()=>p)}(e,t)}removeOrphanedDocuments(e,t){const s=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let p=0;return this.Ln(e,(v,x)=>{if(x<=t){const G=this.Un(e,v).next(Z=>{if(!Z)return p++,s.getEntry(e,v).next(()=>(s.removeEntry(v,Fn.min()),rl(e).delete([0,Bo(v.path)])))});c.push(G)}}).next(()=>Je.waitFor(c)).next(()=>s.apply(e)).next(()=>p)}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,s)}updateLimboDocument(e,t){return bp(e,t)}Ln(e,t){const s=rl(e);let c,p=fs.ot;return s.J({index:"documentTargetsIndex"},([v,x],{path:G,sequenceNumber:Z})=>{0===v?(p!==fs.ot&&t(new Zt(Qa(c)),p),p=Z,c=G):p=fs.ot}).next(()=>{p!==fs.ot&&t(new Zt(Qa(c)),p)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bp(i,e){return rl(i).put((s=i.currentSequenceNumber,{targetId:0,path:Bo(e.path),sequenceNumber:s}));var s}class qy{constructor(){this.changes=new Uo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ti.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return void 0!==s?Je.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class r0{constructor(e){this.wt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,s){return Ud(e).put(s)}removeEntry(e,t,s){return Ud(e).delete(function(c,p){const v=c.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],vh(p),v[v.length-1]]}(t,s))}updateMetadata(e,t){return this.getMetadata(e).next(s=>(s.byteSize+=t,this.qn(e,s)))}getEntry(e,t){let s=Ti.newInvalidDocument(t);return Ud(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Lu(t))},(c,p)=>{s=this.Kn(t,p)}).next(()=>s)}Gn(e,t){let s={size:0,document:Ti.newInvalidDocument(t)};return Ud(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Lu(t))},(c,p)=>{s={document:this.Kn(t,p),size:rt(p)}}).next(()=>s)}getEntries(e,t){let s=Pi();return this.Qn(e,t,(c,p)=>{const v=this.Kn(c,p);s=s.insert(c,v)}).next(()=>s)}jn(e,t){let s=Pi(),c=new ii(Zt.comparator);return this.Qn(e,t,(p,v)=>{const x=this.Kn(p,v);s=s.insert(p,x),c=c.insert(p,rt(v))}).next(()=>({documents:s,Wn:c}))}Qn(e,t,s){if(t.isEmpty())return Je.resolve();let c=new Nr(tm);t.forEach(G=>c=c.add(G));const p=IDBKeyRange.bound(Lu(c.first()),Lu(c.last())),v=c.getIterator();let x=v.getNext();return Ud(e).J({index:"documentKeyIndex",range:p},(G,Z,se)=>{const be=Zt.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;x&&tm(x,be)<0;)s(x,null),x=v.getNext();x&&x.isEqual(be)&&(s(x,Z),x=v.hasNext()?v.getNext():null),x?se.q(Lu(x)):se.done()}).next(()=>{for(;x;)s(x,null),x=v.hasNext()?v.getNext():null})}getAllFromCollection(e,t,s){const c=[t.popLast().toArray(),t.lastSegment(),vh(s.readTime),s.documentKey.path.isEmpty()?"":s.documentKey.path.lastSegment()],p=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ud(e).K(IDBKeyRange.bound(c,p,!0)).next(v=>{let x=Pi();for(const G of v){const Z=this.Kn(Zt.fromSegments(G.prefixPath.concat(G.collectionGroup,G.documentId)),G);x=x.insert(Z.key,Z)}return x})}getAllFromCollectionGroup(e,t,s,c){let p=Pi();const v=yf(t,s),x=yf(t,Gr.max());return Ud(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,x,!0)},(G,Z,se)=>{const be=this.Kn(Zt.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);p=p.insert(be.key,be),p.size===c&&se.done()}).next(()=>p)}newChangeBuffer(e){return new s0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Yy(e).get("remoteDocumentGlobalKey").next(t=>(D(!!t),t))}qn(e,t){return Yy(e).put("remoteDocumentGlobalKey",t)}Kn(e,t){if(t){const s=function _h(i,e){let t;if(e.document)t=re(i.ne,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const s=Zt.fromSegments(e.noDocument.path),c=Zl(e.noDocument.readTime);t=Ti.newNoDocument(s,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return S();{const s=Zt.fromSegments(e.unknownDocument.path),c=Zl(e.unknownDocument.version);t=Ti.newUnknownDocument(s,c)}}return e.readTime&&t.setReadTime(function(s){const c=new mi(s[0],s[1]);return Fn.fromTimestamp(c)}(e.readTime)),t}(this.wt,t);if(!s.isNoDocument()||!s.version.isEqual(Fn.min()))return s}return Ti.newInvalidDocument(e)}}function Zy(i){return new r0(i)}class s0 extends qy{constructor(e,t){super(),this.zn=e,this.trackRemovals=t,this.Hn=new Uo(s=>s.toString(),(s,c)=>s.isEqual(c))}applyChanges(e){const t=[];let s=0,c=new Nr((p,v)=>Rn(p.canonicalString(),v.canonicalString()));return this.changes.forEach((p,v)=>{const x=this.Hn.get(p);if(t.push(this.zn.removeEntry(e,p,x.readTime)),v.isValidDocument()){const G=ku(this.zn.wt,v);c=c.add(p.path.popLast()),s+=rt(G)-x.size,t.push(this.zn.addEntry(e,p,G))}else if(s-=x.size,this.trackRemovals){const G=ku(this.zn.wt,v.convertToNoDocument(Fn.min()));t.push(this.zn.addEntry(e,p,G))}}),c.forEach(p=>{t.push(this.zn.indexManager.addToCollectionParentIndex(e,p))}),t.push(this.zn.updateMetadata(e,s)),Je.waitFor(t)}getFromCache(e,t){return this.zn.Gn(e,t).next(s=>(this.Hn.set(t,{size:s.size,readTime:s.document.readTime}),s.document))}getAllFromCache(e,t){return this.zn.jn(e,t).next(({documents:s,Wn:c})=>(c.forEach((p,v)=>{this.Hn.set(p,{size:v,readTime:s.get(p).readTime})}),s))}}function Yy(i){return Ur(i,"remoteDocumentGlobal")}function Ud(i){return Ur(i,"remoteDocumentsV14")}function Lu(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yf(i,e){const t=e.documentKey.path.toArray();return[i,vh(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tm(i,e){const t=i.path.toArray(),s=e.path.toArray();let c=0;for(let p=0;p<t.length-2&&p<s.length-2;++p)if(c=Rn(t[p],s[p]),c)return c;return c=Rn(t.length,s.length),c||(c=Rn(t[t.length-2],s[s.length-2]),c||Rn(t[t.length-1],s[s.length-1]))}class nm{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _f{constructor(e,t,s,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=c}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(s=c,this.getBaseDocument(e,t,s))).next(c=>(null!==s&&Qu(s.mutation,c,ls.empty(),mi.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,yr()).next(()=>s))}getLocalViewOfDocuments(e,t,s=yr()){const c=Gi();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,s).next(p=>{let v=ua();return p.forEach((x,G)=>{v=v.insert(x,G.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const s=Gi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,yr()))}populateOverlays(e,t,s){const c=[];return s.forEach(p=>{t.has(p)||c.push(p)}),this.documentOverlayCache.getOverlays(e,c).next(p=>{p.forEach((v,x)=>{t.set(v,x)})})}computeViews(e,t,s,c){let p=Pi();const v=tl(),x=tl();return t.forEach((G,Z)=>{const se=s.get(Z.key);c.has(Z.key)&&(void 0===se||se.mutation instanceof Ka)?p=p.insert(Z.key,Z):void 0!==se&&(v.set(Z.key,se.mutation.getFieldMask()),Qu(se.mutation,Z,se.mutation.getFieldMask(),mi.now()))}),this.recalculateAndSaveOverlays(e,p).next(G=>(G.forEach((Z,se)=>v.set(Z,se)),t.forEach((Z,se)=>{var be;return x.set(Z,new nm(se,null!==(be=v.get(Z))&&void 0!==be?be:null))}),x))}recalculateAndSaveOverlays(e,t){const s=tl();let c=new ii((v,x)=>v-x),p=yr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const x of v)x.keys().forEach(G=>{const Z=t.get(G);if(null===Z)return;let se=s.get(G)||ls.empty();se=x.applyToLocalView(Z,se),s.set(G,se);const be=(c.get(x.batchId)||yr()).add(G);c=c.insert(x.batchId,be)})}).next(()=>{const v=[],x=c.getReverseIterator();for(;x.hasNext();){const G=x.getNext(),Z=G.key,se=G.value,be=cu();se.forEach(ot=>{if(!p.has(ot)){const vt=fc(t.get(ot),s.get(ot));null!==vt&&be.set(ot,vt),p=p.add(ot)}}),v.push(this.documentOverlayCache.saveOverlays(e,Z,be))}return Je.waitFor(v)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s){return Zt.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):lc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s):this.getDocumentsMatchingCollectionQuery(e,t,s);var c}getNextDocuments(e,t,s,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,c).next(p=>{const v=c-p.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,c-p.size):Je.resolve(Gi());let x=-1,G=p;return v.next(Z=>Je.forEach(Z,(se,be)=>(x<be.largestBatchId&&(x=be.largestBatchId),p.get(se)?Je.resolve():this.getBaseDocument(e,se,be).next(ot=>{G=G.insert(se,ot)}))).next(()=>this.populateOverlays(e,Z,p)).next(()=>this.computeViews(e,G,Z,yr())).next(se=>({batchId:x,changes:fo(se)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Zt(t)).next(s=>{let c=ua();return s.isFoundDocument()&&(c=c.insert(s.key,s)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,s){const c=t.collectionGroup;let p=ua();return this.indexManager.getCollectionParents(e,c).next(v=>Je.forEach(v,x=>{const G=(Z=t,se=x.child(c),new Ea(se,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,se;return this.getDocumentsMatchingCollectionQuery(e,G,s).next(Z=>{Z.forEach((se,be)=>{p=p.insert(se,be)})})}).next(()=>p))}getDocumentsMatchingCollectionQuery(e,t,s){let c;return this.remoteDocumentCache.getAllFromCollection(e,t.path,s).next(p=>(c=p,this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId))).next(p=>{p.forEach((x,G)=>{const Z=G.getKey();null===c.get(Z)&&(c=c.insert(Z,Ti.newInvalidDocument(Z)))});let v=ua();return c.forEach((x,G)=>{const Z=p.get(x);void 0!==Z&&Qu(Z.mutation,G,ls.empty(),mi.now()),cc(t,G)&&(v=v.insert(x,G))}),v})}getBaseDocument(e,t,s){return null===s||1===s.mutation.type?this.remoteDocumentCache.getEntry(e,t):Je.resolve(Ti.newInvalidDocument(t))}}class rm{constructor(e){this.wt=e,this.Jn=new Map,this.Yn=new Map}getBundleMetadata(e,t){return Je.resolve(this.Jn.get(t))}saveBundleMetadata(e,t){var s;return this.Jn.set(t.id,{id:(s=t).id,version:s.version,createTime:bs(s.createTime)}),Je.resolve()}getNamedQuery(e,t){return Je.resolve(this.Yn.get(t))}saveNamedQuery(e,t){return this.Yn.set(t.name,{name:(s=t).name,query:wa(s.bundledQuery),readTime:bs(s.readTime)}),Je.resolve();var s}}class Dp{constructor(){this.overlays=new ii(Zt.comparator),this.Xn=new Map}getOverlay(e,t){return Je.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Gi();return Je.forEach(t,c=>this.getOverlay(e,c).next(p=>{null!==p&&s.set(c,p)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((c,p)=>{this.ie(e,t,p)}),Je.resolve()}removeOverlaysForBatchId(e,t,s){const c=this.Xn.get(s);return void 0!==c&&(c.forEach(p=>this.overlays=this.overlays.remove(p)),this.Xn.delete(s)),Je.resolve()}getOverlaysForCollection(e,t,s){const c=Gi(),p=t.length+1,v=new Zt(t.child("")),x=this.overlays.getIteratorFrom(v);for(;x.hasNext();){const G=x.getNext().value,Z=G.getKey();if(!t.isPrefixOf(Z.path))break;Z.path.length===p&&G.largestBatchId>s&&c.set(G.getKey(),G)}return Je.resolve(c)}getOverlaysForCollectionGroup(e,t,s,c){let p=new ii((Z,se)=>Z-se);const v=this.overlays.getIterator();for(;v.hasNext();){const Z=v.getNext().value;if(Z.getKey().getCollectionGroup()===t&&Z.largestBatchId>s){let se=p.get(Z.largestBatchId);null===se&&(se=Gi(),p=p.insert(Z.largestBatchId,se)),se.set(Z.getKey(),Z)}}const x=Gi(),G=p.getIterator();for(;G.hasNext()&&(G.getNext().value.forEach((Z,se)=>x.set(Z,se)),!(x.size()>=c)););return Je.resolve(x)}ie(e,t,s){const c=this.overlays.get(s.key);if(null!==c){const v=this.Xn.get(c.largestBatchId).delete(s.key);this.Xn.set(c.largestBatchId,v)}this.overlays=this.overlays.insert(s.key,new mh(t,s));let p=this.Xn.get(t);void 0===p&&(p=yr(),this.Xn.set(t,p)),this.Xn.set(t,p.add(s.key))}}class Tp{constructor(){this.Zn=new Nr(Ts.ts),this.es=new Nr(Ts.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const s=new Ts(e,t);this.Zn=this.Zn.add(s),this.es=this.es.add(s)}ss(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.rs(new Ts(e,t))}os(e,t){e.forEach(s=>this.removeReference(s,t))}us(e){const t=new Zt(new Tr([])),s=new Ts(t,e),c=new Ts(t,e+1),p=[];return this.es.forEachInRange([s,c],v=>{this.rs(v),p.push(v.key)}),p}cs(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new Zt(new Tr([])),s=new Ts(t,e),c=new Ts(t,e+1);let p=yr();return this.es.forEachInRange([s,c],v=>{p=p.add(v.key)}),p}containsKey(e){const t=new Ts(e,0),s=this.Zn.firstAfterOrEqual(t);return null!==s&&e.isEqual(s.key)}}class Ts{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return Zt.comparator(e.key,t.key)||Rn(e.ls,t.ls)}static ns(e,t){return Rn(e.ls,t.ls)||Zt.comparator(e.key,t.key)}}class im{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.fs=1,this.ds=new Nr(Ts.ts)}checkEmpty(e){return Je.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,s,c){const p=this.fs;this.fs++;const v=new la(p,t,s,c);this.mutationQueue.push(v);for(const x of c)this.ds=this.ds.add(new Ts(x.key,p)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Je.resolve(v)}lookupMutationBatch(e,t){return Je.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.ws(t+1),p=c<0?0:c;return Je.resolve(this.mutationQueue.length>p?this.mutationQueue[p]:null)}getHighestUnacknowledgedBatchId(){return Je.resolve(0===this.mutationQueue.length?-1:this.fs-1)}getAllMutationBatches(e){return Je.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ts(t,0),c=new Ts(t,Number.POSITIVE_INFINITY),p=[];return this.ds.forEachInRange([s,c],v=>{const x=this._s(v.ls);p.push(x)}),Je.resolve(p)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Nr(Rn);return t.forEach(c=>{const p=new Ts(c,0),v=new Ts(c,Number.POSITIVE_INFINITY);this.ds.forEachInRange([p,v],x=>{s=s.add(x.ls)})}),Je.resolve(this.gs(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,c=s.length+1;let p=s;Zt.isDocumentKey(p)||(p=p.child(""));const v=new Ts(new Zt(p),0);let x=new Nr(Rn);return this.ds.forEachWhile(G=>{const Z=G.key.path;return!!s.isPrefixOf(Z)&&(Z.length===c&&(x=x.add(G.ls)),!0)},v),Je.resolve(this.gs(x))}gs(e){const t=[];return e.forEach(s=>{const c=this._s(s);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){D(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();let s=this.ds;return Je.forEach(t.mutations,c=>{const p=new Ts(c.key,t.batchId);return s=s.delete(p),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.ds=s})}In(e){}containsKey(e,t){const s=new Ts(t,0),c=this.ds.firstAfterOrEqual(s);return Je.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return Je.resolve()}ys(e,t){return this.ws(e)}ws(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}_s(e){const t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Qy{constructor(e){this.ps=e,this.docs=new ii(Zt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,c=this.docs.get(s),p=c?c.size:0,v=this.ps(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:v}),this.size+=v-p,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Je.resolve(s?s.document.mutableCopy():Ti.newInvalidDocument(t))}getEntries(e,t){let s=Pi();return t.forEach(c=>{const p=this.docs.get(c);s=s.insert(c,p?p.document.mutableCopy():Ti.newInvalidDocument(c))}),Je.resolve(s)}getAllFromCollection(e,t,s){let c=Pi();const p=new Zt(t.child("")),v=this.docs.getIteratorFrom(p);for(;v.hasNext();){const{key:x,value:{document:G}}=v.getNext();if(!t.isPrefixOf(x.path))break;x.path.length>t.length+1||Gu(Bc(G),s)<=0||(c=c.insert(G.key,G.mutableCopy()))}return Je.resolve(c)}getAllFromCollectionGroup(e,t,s,c){S()}Is(e,t){return Je.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Sp(this)}getSize(e){return Je.resolve(this.size)}}class Sp extends qy{constructor(e){super(),this.zn=e}applyChanges(e){const t=[];return this.changes.forEach((s,c)=>{c.isValidDocument()?t.push(this.zn.addEntry(e,c)):this.zn.removeEntry(s)}),Je.waitFor(t)}getFromCache(e,t){return this.zn.getEntry(e,t)}getAllFromCache(e,t){return this.zn.getEntries(e,t)}}class Jy{constructor(e){this.persistence=e,this.Ts=new Uo(t=>ia(t),Du),this.lastRemoteSnapshotVersion=Fn.min(),this.highestTargetId=0,this.Es=0,this.As=new Tp,this.targetCount=0,this.Rs=Ds.An()}forEachTarget(e,t){return this.Ts.forEach((s,c)=>t(c)),Je.resolve()}getLastRemoteSnapshotVersion(e){return Je.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Je.resolve(this.Es)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Je.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.Es&&(this.Es=t),Je.resolve()}vn(e){this.Ts.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Ds(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}addTargetData(e,t){return this.vn(t),this.targetCount+=1,Je.resolve()}updateTargetData(e,t){return this.vn(t),Je.resolve()}removeTargetData(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,Je.resolve()}removeTargets(e,t,s){let c=0;const p=[];return this.Ts.forEach((v,x)=>{x.sequenceNumber<=t&&null===s.get(x.targetId)&&(this.Ts.delete(v),p.push(this.removeMatchingKeysForTargetId(e,x.targetId)),c++)}),Je.waitFor(p).next(()=>c)}getTargetCount(e){return Je.resolve(this.targetCount)}getTargetData(e,t){const s=this.Ts.get(t)||null;return Je.resolve(s)}addMatchingKeys(e,t,s){return this.As.ss(t,s),Je.resolve()}removeMatchingKeys(e,t,s){this.As.os(t,s);const c=this.persistence.referenceDelegate,p=[];return c&&t.forEach(v=>{p.push(c.markPotentiallyOrphaned(e,v))}),Je.waitFor(p)}removeMatchingKeysForTargetId(e,t){return this.As.us(t),Je.resolve()}getMatchingKeysForTargetId(e,t){const s=this.As.hs(t);return Je.resolve(s)}containsKey(e,t){return Je.resolve(this.As.containsKey(t))}}class Ap{constructor(e,t){this.bs={},this.overlays={},this.Ps=new fs(0),this.vs=!1,this.vs=!0,this.referenceDelegate=e(this),this.Vs=new Jy(this),this.indexManager=new Fu,this.remoteDocumentCache=new Qy(s=>this.referenceDelegate.Ss(s)),this.wt=new yh(t),this.Ds=new rm(this.wt)}start(){return Promise.resolve()}shutdown(){return this.vs=!1,Promise.resolve()}get started(){return this.vs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Dp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.bs[e.toKey()];return s||(s=new im(t,this.referenceDelegate),this.bs[e.toKey()]=s),s}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ds}runTransaction(e,t,s){At("MemoryPersistence","Starting transaction:",e);const c=new Xy(this.Ps.next());return this.referenceDelegate.Cs(),s(c).next(p=>this.referenceDelegate.xs(c).next(()=>p)).toPromise().then(p=>(c.raiseOnCommittedEvent(),p))}Ns(e,t){return Je.or(Object.values(this.bs).map(s=>()=>s.containsKey(e,t)))}}class Xy extends jc{constructor(e){super(),this.currentSequenceNumber=e}}class vf{constructor(e){this.persistence=e,this.ks=new Tp,this.Os=null}static Ms(e){return new vf(e)}get Fs(){if(this.Os)return this.Os;throw S()}addReference(e,t,s){return this.ks.addReference(s,t),this.Fs.delete(s.toString()),Je.resolve()}removeReference(e,t,s){return this.ks.removeReference(s,t),this.Fs.add(s.toString()),Je.resolve()}markPotentiallyOrphaned(e,t){return this.Fs.add(t.toString()),Je.resolve()}removeTarget(e,t){this.ks.us(t.targetId).forEach(c=>this.Fs.add(c.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(p=>this.Fs.add(p.toString()))}).next(()=>s.removeTargetData(e,t))}Cs(){this.Os=new Set}xs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Je.forEach(this.Fs,s=>{const c=Zt.fromPath(s);return this.$s(e,c).next(p=>{p||t.removeEntry(c,Fn.min())})}).next(()=>(this.Os=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(s=>{s?this.Fs.delete(t.toString()):this.Fs.add(t.toString())})}Ss(e){return 0}$s(e,t){return Je.or([()=>Je.resolve(this.ks.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ns(e,t)])}}class Ch{constructor(e){this.wt=e}O(e,t,s,c){const p=new ja("createOrUpgrade",t);var x;s<1&&c>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Od,{unique:!0}),x.createObjectStore("documentMutations"),od(e),function(x){x.createObjectStore("remoteDocuments")}(e));let v=Je.resolve();return s<3&&c>=3&&(0!==s&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),od(e)),v=v.next(()=>function(x){const G=x.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Fn.min().toTimestamp(),targetCount:0};return G.put("targetGlobalKey",Z)}(p))),s<4&&c>=4&&(0!==s&&(v=v.next(()=>function(x,G){return G.store("mutations").K().next(Z=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Od,{unique:!0});const se=G.store("mutations"),be=Z.map(ot=>se.put(ot));return Je.waitFor(be)})}(e,p))),v=v.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),s<5&&c>=5&&(v=v.next(()=>this.Bs(p))),s<6&&c>=6&&(v=v.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.Ls(p)))),s<7&&c>=7&&(v=v.next(()=>this.Us(p))),s<8&&c>=8&&(v=v.next(()=>this.qs(e,p))),s<9&&c>=9&&(v=v.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),s<10&&c>=10&&(v=v.next(()=>this.Ks(p))),s<11&&c>=11&&(v=v.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),s<12&&c>=12&&(v=v.next(()=>{!function(x){const G=x.createObjectStore("documentOverlays",{keyPath:af});G.createIndex("collectionPathOverlayIndex",ph,{unique:!1}),G.createIndex("collectionGroupOverlayIndex",uf,{unique:!1})}(e)})),s<13&&c>=13&&(v=v.next(()=>function(x){const G=x.createObjectStore("remoteDocumentsV14",{keyPath:yp});G.createIndex("documentKeyIndex",tf),G.createIndex("collectionGroupIndex",nf)}(e)).next(()=>this.Gs(e,p)).next(()=>e.deleteObjectStore("remoteDocuments"))),s<14&&c>=14&&(v=v.next(()=>this.Qs(e,p))),s<15&&c>=15&&(v=v.next(()=>function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:kd}).createIndex("sequenceNumberIndex",vp,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Ep}).createIndex("documentKeyIndex",wp,{unique:!1})}(e))),v}Ls(e){let t=0;return e.store("remoteDocuments").J((s,c)=>{t+=rt(c)}).next(()=>{const s={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",s)})}Bs(e){const t=e.store("mutationQueues"),s=e.store("mutations");return t.K().next(c=>Je.forEach(c,p=>{const v=IDBKeyRange.bound([p.userId,-1],[p.userId,p.lastAcknowledgedBatchId]);return s.K("userMutationsIndex",v).next(x=>Je.forEach(x,G=>{D(G.userId===p.userId);const Z=xl(this.wt,G);return Ee(e,p.userId,Z).next(()=>{})}))}))}Us(e){const t=e.store("targetDocuments"),s=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const p=[];return s.J((v,x)=>{const G=new Tr(v),Z=[0,Bo(G)];p.push(t.get(Z).next(se=>se?Je.resolve():t.put({targetId:0,path:Bo(G),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>Je.waitFor(p))})}qs(e,t){e.createObjectStore("collectionParents",{keyPath:_p});const s=t.store("collectionParents"),c=new sd,p=v=>{if(c.add(v)){const x=v.lastSegment(),G=v.popLast();return s.put({collectionId:x,parent:Bo(G)})}};return t.store("remoteDocuments").J({H:!0},(v,x)=>{const G=new Tr(v);return p(G.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([v,x,G],Z)=>{const se=Qa(x);return p(se.popLast())}))}Ks(e){const t=e.store("targets");return t.J((s,c)=>{const p=wc(c),v=Eh(this.wt,p);return t.put(v)})}Gs(e,t){const s=t.store("remoteDocuments"),c=[];return s.J((p,v)=>{const x=t.store("remoteDocumentsV14"),G=(Z=v,Z.document?new Zt(Tr.fromString(Z.document.name).popFirst(5)):Z.noDocument?Zt.fromSegments(Z.noDocument.path):Z.unknownDocument?Zt.fromSegments(Z.unknownDocument.path):S()).path.toArray();var Z;const se={prefixPath:G.slice(0,G.length-2),collectionGroup:G[G.length-2],documentId:G[G.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};c.push(x.put(se))}).next(()=>Je.waitFor(c))}Qs(e,t){const s=t.store("mutations"),c=Zy(this.wt),p=new Ap(vf.Ms,this.wt.ne);return s.K().next(v=>{const x=new Map;return v.forEach(G=>{var Z;let se=null!==(Z=x.get(G.userId))&&void 0!==Z?Z:yr();xl(this.wt,G).keys().forEach(be=>se=se.add(be)),x.set(G.userId,se)}),Je.forEach(x,(G,Z)=>{const se=new Ji(Z),be=Ic.se(this.wt,se),ot=p.getIndexManager(se),vt=ut.se(se,this.wt,ot,p.referenceDelegate);return new _f(c,vt,be,ot).recalculateAndSaveOverlaysForDocumentKeys(new Ja(t,fs.ot),G).next()})})}}function od(i){i.createObjectStore("targetDocuments",{keyPath:rf}).createIndex("documentTargetsIndex",sf,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ql,{unique:!0}),i.createObjectStore("targetGlobal")}const bh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class bc{constructor(e,t,s,c,p,v,x,G,Z,se,be=14){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=s,this.js=p,this.window=v,this.document=x,this.Ws=Z,this.zs=se,this.Hs=be,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=ot=>Promise.resolve(),!bc.V())throw new K(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new n0(this,c),this.ei=t+"main",this.wt=new yh(G),this.ni=new Us(this.ei,this.Hs,new Ch(this.wt)),this.Vs=new Ql(this.referenceDelegate,this.wt),this.remoteDocumentCache=Zy(this.wt),this.Ds=new df,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===se&&gi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ii().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(P.FAILED_PRECONDITION,bh);return this.ri(),this.oi(),this.ui(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Vs.getHighestSequenceNumber(e))}).then(e=>{this.Ps=new fs(e,this.Ws)}).then(()=>{this.vs=!0}).catch(e=>(this.ni&&this.ni.close(),Promise.reject(e)))}ci(e){var t=this;return this.ti=function(){var s=(0,xe.Z)(function*(c){if(t.started)return e(c)});return function(c){return s.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ni.F(function(){var t=(0,xe.Z)(function*(s){null===s.newVersion&&(yield e())});return function(s){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget((0,xe.Z)(function*(){t.started&&(yield t.ii())})))}ii(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Xl(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ai(e).next(t=>{t||(this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)))})}).next(()=>this.hi(e)).next(t=>this.isPrimary&&!t?this.li(e).next(()=>!1):!!t&&this.fi(e).next(()=>!0))).catch(e=>{if(Do(e))return At("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return At("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.js.enqueueRetryable(()=>this.ti(e)),this.isPrimary=e})}ai(e){return Jl(e).get("owner").next(t=>Je.resolve(this.di(t)))}_i(e){return Xl(e).delete(this.clientId)}wi(){var e=this;return(0,xe.Z)(function*(){if(e.isPrimary&&!e.mi(e.Zs,18e5)){e.Zs=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",s=>{const c=Ur(s,"clientMetadata");return c.K().next(p=>{const v=e.gi(p,18e5),x=p.filter(G=>-1===v.indexOf(G));return Je.forEach(x,G=>c.delete(G.clientId)).next(()=>x)})}).catch(()=>[]);if(e.si)for(const s of t)e.si.removeItem(e.yi(s.clientId))}})()}ui(){this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ii().then(()=>this.wi()).then(()=>this.ui()))}di(e){return!!e&&e.ownerId===this.clientId}hi(e){return this.zs?Je.resolve(!0):Jl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)){if(this.di(t)&&this.networkEnabled)return!0;if(!this.di(t)){if(!t.allowTabSynchronization)throw new K(P.FAILED_PRECONDITION,bh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Xl(e).K().next(s=>void 0===this.gi(s,5e3).find(c=>{if(this.clientId!==c.clientId){const v=!this.inForeground&&c.inForeground,x=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||v&&x)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&At("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,xe.Z)(function*(){e.vs=!1,e.Ii(),e.Xs&&(e.Xs.cancel(),e.Xs=null),e.Ti(),e.Ei(),yield e.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const s=new Ja(t,fs.ot);return e.li(s).next(()=>e._i(s))}),e.ni.close(),e.Ai()})()}gi(e,t){return e.filter(s=>this.mi(s.updateTimeMs,t)&&!this.pi(s.clientId))}Ri(){return this.runTransaction("getActiveClients","readonly",e=>Xl(e).K().next(t=>this.gi(t,18e5).map(s=>s.clientId)))}get started(){return this.vs}getMutationQueue(e,t){return ut.se(e,this.wt,t,this.referenceDelegate)}getTargetCache(){return this.Vs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new u(e,this.wt.ne.databaseId)}getDocumentOverlayCache(e){return Ic.se(this.wt,e)}getBundleCache(){return this.Ds}runTransaction(e,t,s){At("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",p=15===(v=this.Hs)?lf:14===v?Ld:13===v?gh:12===v?Fd:11===v?Ec:void S();var v;let x;return this.ni.runTransaction(e,c,p,G=>(x=new Ja(G,this.Ps?this.Ps.next():fs.ot),"readwrite-primary"===t?this.ai(x).next(Z=>!!Z||this.hi(x)).next(Z=>{if(!Z)throw gi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.js.enqueueRetryable(()=>this.ti(!1)),new K(P.FAILED_PRECONDITION,Ba);return s(x)}).next(Z=>this.fi(x).next(()=>Z)):this.bi(x).next(()=>s(x)))).then(G=>(x.raiseOnCommittedEvent(),G))}bi(e){return Jl(e).get("owner").next(t=>{if(null!==t&&this.mi(t.leaseTimestampMs,5e3)&&!this.pi(t.ownerId)&&!this.di(t)&&!(this.zs||this.allowTabSynchronization&&t.allowTabSynchronization))throw new K(P.FAILED_PRECONDITION,bh)})}fi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jl(e).put("owner",t)}static V(){return Us.V()}li(e){const t=Jl(e);return t.get("owner").next(s=>this.di(s)?(At("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Je.resolve())}mi(e,t){const s=Date.now();return!(e<s-t||e>s&&(gi(`Detected an update time that is in the future: ${e} > ${s}`),1))}ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=()=>{this.js.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ii()))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}Ti(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}oi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=()=>{this.Ii(),(0,Ge.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.js.enterRestrictedMode(!0),this.js.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Js))}Ei(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}pi(e){var t;try{const s=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return At("IndexedDbPersistence",`Client '${e}' ${s?"is":"is not"} zombied in LocalStorage`),s}catch(s){return gi("IndexedDbPersistence","Failed to get zombied client id.",s),!1}}Ii(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(e){gi("Failed to set zombie client id.",e)}}Ai(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(e){}}yi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jl(i){return Ur(i,"owner")}function Xl(i){return Ur(i,"clientMetadata")}function xp(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class Ef{constructor(e,t,s,c){this.targetId=e,this.fromCache=t,this.Pi=s,this.vi=c}static Vi(e,t){let s=yr(),c=yr();for(const p of t.docChanges)switch(p.type){case 0:s=s.add(p.doc.key);break;case 1:c=c.add(p.doc.key)}return new Ef(e,t.fromCache,s,c)}}class Rp{constructor(){this.Si=!1}initialize(e,t){this.Di=e,this.indexManager=t,this.Si=!0}getDocumentsMatchingQuery(e,t,s,c){return this.Ci(e,t).next(p=>p||this.xi(e,t,c,s)).next(p=>p||this.Ni(e,t))}Ci(e,t){return Je.resolve(null)}xi(e,t,s,c){return function ef(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(t)||c.isEqual(Fn.min())?this.Ni(e,t):this.Di.getDocuments(e,s).next(p=>{const v=this.ki(t,p);return this.Oi(t,v,s,c)?this.Ni(e,t):(ru()<=W.in.DEBUG&&At("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),aa(t)),this.Mi(e,v,t,Iu(c,-1)))})}ki(e,t){let s=new Nr(Su(e));return t.forEach((c,p)=>{cc(e,p)&&(s=s.add(p))}),s}Oi(e,t,s,c){if(null===e.limit)return!1;if(s.size!==t.size)return!0;const p="F"===e.limitType?t.last():t.first();return!!p&&(p.hasPendingWrites||p.version.compareTo(c)>0)}Ni(e,t){return ru()<=W.in.DEBUG&&At("QueryEngine","Using full collection scan to execute query:",aa(t)),this.Di.getDocumentsMatchingQuery(e,t,Gr.min())}Mi(e,t,s,c){return this.Di.getDocumentsMatchingQuery(e,s,c).next(p=>(t.forEach(v=>{p=p.insert(v.key,v)}),p))}}class Mp{constructor(e,t,s,c){this.persistence=e,this.Fi=t,this.wt=c,this.$i=new ii(Rn),this.Bi=new Uo(p=>ia(p),Du),this.Li=new Map,this.Ui=e.getRemoteDocumentCache(),this.Vs=e.getTargetCache(),this.Ds=e.getBundleCache(),this.qi(s)}qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _f(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.$i))}}function wf(i,e,t,s){return new Mp(i,e,t,s)}function Np(i,e){return Bd.apply(this,arguments)}function Bd(){return Bd=(0,xe.Z)(function*(i,e){const t=N(i);return yield t.persistence.runTransaction("Handle user change","readonly",s=>{let c;return t.mutationQueue.getAllMutationBatches(s).next(p=>(c=p,t.qi(e),t.mutationQueue.getAllMutationBatches(s))).next(p=>{const v=[],x=[];let G=yr();for(const Z of c){v.push(Z.batchId);for(const se of Z.mutations)G=G.add(se.key)}for(const Z of p){x.push(Z.batchId);for(const se of Z.mutations)G=G.add(se.key)}return t.localDocuments.getDocuments(s,G).next(Z=>({Ki:Z,removedBatchIds:v,addedBatchIds:x}))})})}),Bd.apply(this,arguments)}function e_(i,e){const t=N(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const c=e.batch.keys(),p=t.Ui.newChangeBuffer({trackRemovals:!0});return function(v,x,G,Z){const se=G.batch,be=se.keys();let ot=Je.resolve();return be.forEach(vt=>{ot=ot.next(()=>Z.getEntry(x,vt)).next(Rt=>{const vn=G.docVersions.get(vt);D(null!==vn),Rt.version.compareTo(vn)<0&&(se.applyToRemoteDocument(Rt,G),Rt.isValidDocument()&&(Rt.setReadTime(G.commitVersion),Z.addEntry(Rt)))})}),ot.next(()=>v.mutationQueue.removeMutationBatch(x,se))}(t,s,e,p).next(()=>p.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(v){let x=yr();for(let G=0;G<v.mutationResults.length;++G)v.mutationResults[G].transformResults.length>0&&(x=x.add(v.batch.mutations[G].key));return x}(e))).next(()=>t.localDocuments.getDocuments(s,c))})}function Pp(i){const e=N(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Vs.getLastRemoteSnapshotVersion(t))}function o0(i,e){const t=N(i),s=e.snapshotVersion;let c=t.$i;return t.persistence.runTransaction("Apply remote event","readwrite-primary",p=>{const v=t.Ui.newChangeBuffer({trackRemovals:!0});c=t.$i;const x=[];e.targetChanges.forEach((se,be)=>{const ot=c.get(be);if(!ot)return;x.push(t.Vs.removeMatchingKeys(p,se.removedDocuments,be).next(()=>t.Vs.addMatchingKeys(p,se.addedDocuments,be)));let vt=ot.withSequenceNumber(p.currentSequenceNumber);var Rt,vn,Ln;e.targetMismatches.has(be)?vt=vt.withResumeToken($i.EMPTY_BYTE_STRING,Fn.min()).withLastLimboFreeSnapshotVersion(Fn.min()):se.resumeToken.approximateByteSize()>0&&(vt=vt.withResumeToken(se.resumeToken,s)),c=c.insert(be,vt),vn=vt,Ln=se,(0===(Rt=ot).resumeToken.approximateByteSize()||vn.snapshotVersion.toMicroseconds()-Rt.snapshotVersion.toMicroseconds()>=3e8||Ln.addedDocuments.size+Ln.modifiedDocuments.size+Ln.removedDocuments.size>0)&&x.push(t.Vs.updateTargetData(p,vt))});let G=Pi(),Z=yr();if(e.documentUpdates.forEach(se=>{e.resolvedLimboDocuments.has(se)&&x.push(t.persistence.referenceDelegate.updateLimboDocument(p,se))}),x.push(Op(p,v,e.documentUpdates).next(se=>{G=se.Gi,Z=se.Qi})),!s.isEqual(Fn.min())){const se=t.Vs.getLastRemoteSnapshotVersion(p).next(be=>t.Vs.setTargetsMetadata(p,p.currentSequenceNumber,s));x.push(se)}return Je.waitFor(x).next(()=>v.apply(p)).next(()=>t.localDocuments.getLocalViewOfDocuments(p,G,Z)).next(()=>G)}).then(p=>(t.$i=c,p))}function Op(i,e,t){let s=yr(),c=yr();return t.forEach(p=>s=s.add(p)),e.getEntries(i,s).next(p=>{let v=Pi();return t.forEach((x,G)=>{const Z=p.get(x);G.isFoundDocument()!==Z.isFoundDocument()&&(c=c.add(x)),G.isNoDocument()&&G.version.isEqual(Fn.min())?(e.removeEntry(x,G.readTime),v=v.insert(x,G)):!Z.isValidDocument()||G.version.compareTo(Z.version)>0||0===G.version.compareTo(Z.version)&&Z.hasPendingWrites?(e.addEntry(G),v=v.insert(x,G)):At("LocalStore","Ignoring outdated watch update for ",x,". Current version:",Z.version," Watch version:",G.version)}),{Gi:v,Qi:c}})}function sm(i,e){const t=N(i);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function jd(i,e){const t=N(i);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let c;return t.Vs.getTargetData(s,e).next(p=>p?(c=p,Je.resolve(c)):t.Vs.allocateTargetId(s).next(v=>(c=new Sl(e,v,0,s.currentSequenceNumber),t.Vs.addTargetData(s,c).next(()=>c))))}).then(s=>{const c=t.$i.get(s.targetId);return(null===c||s.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.$i=t.$i.insert(s.targetId,s),t.Bi.set(e,s.targetId)),s})}function ad(i,e,t){return kp.apply(this,arguments)}function kp(){return kp=(0,xe.Z)(function*(i,e,t){const s=N(i),c=s.$i.get(e),p=t?"readwrite":"readwrite-primary";try{t||(yield s.persistence.runTransaction("Release target",p,v=>s.persistence.referenceDelegate.removeTarget(v,c)))}catch(v){if(!Do(v))throw v;At("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}s.$i=s.$i.remove(e),s.Bi.delete(c.target)}),kp.apply(this,arguments)}function If(i,e,t){const s=N(i);let c=Fn.min(),p=yr();return s.persistence.runTransaction("Execute query","readonly",v=>function(x,G,Z){const se=N(x),be=se.Bi.get(Z);return void 0!==be?Je.resolve(se.$i.get(be)):se.Vs.getTargetData(G,Z)}(s,v,sa(e)).next(x=>{if(x)return c=x.lastLimboFreeSnapshotVersion,s.Vs.getMatchingKeysForTargetId(v,x.targetId).next(G=>{p=G})}).next(()=>s.Fi.getDocumentsMatchingQuery(v,e,t?c:Fn.min(),t?p:yr())).next(x=>(am(s,Oa(e),x),{documents:x,ji:p})))}function Xa(i,e){const t=N(i),s=N(t.Vs),c=t.$i.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",p=>s.te(p,e).next(v=>v?v.target:null))}function om(i,e){const t=N(i),s=t.Li.get(e)||Fn.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Ui.getAllFromCollectionGroup(c,e,Iu(s,-1),Number.MAX_SAFE_INTEGER)).then(c=>(am(t,e,c),c))}function am(i,e,t){let s=Fn.min();t.forEach((c,p)=>{p.readTime.compareTo(s)>0&&(s=p.readTime)}),i.Li.set(e,s)}function um(){return um=(0,xe.Z)(function*(i,e,t,s){const c=N(i);let p=yr(),v=Pi();for(const Z of t){const se=e.Wi(Z.metadata.name);Z.document&&(p=p.add(se));const be=e.zi(Z);be.setReadTime(e.Hi(Z.metadata.readTime)),v=v.insert(se,be)}const x=c.Ui.newChangeBuffer({trackRemovals:!0}),G=yield jd(c,(Z=s,sa(Ga(Tr.fromString(`__bundle__/docs/${Z}`)))));var Z;return c.persistence.runTransaction("Apply bundle documents","readwrite",Z=>Op(Z,x,v).next(se=>(x.apply(Z),se)).next(se=>c.Vs.removeMatchingKeysForTargetId(Z,G.targetId).next(()=>c.Vs.addMatchingKeys(Z,p,G.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(Z,se.Gi,se.Qi)).next(()=>se.Gi)))}),um.apply(this,arguments)}function lm(i,e){return cm.apply(this,arguments)}function cm(){return cm=(0,xe.Z)(function*(i,e,t=yr()){const s=yield jd(i,sa(wa(e.bundledQuery))),c=N(i);return c.persistence.runTransaction("Save named query","readwrite",p=>{const v=bs(e.readTime);if(s.snapshotVersion.compareTo(v)>=0)return c.Ds.saveNamedQuery(p,e);const x=s.withResumeToken($i.EMPTY_BYTE_STRING,v);return c.$i=c.$i.insert(x.targetId,x),c.Vs.updateTargetData(p,x).next(()=>c.Vs.removeMatchingKeysForTargetId(p,s.targetId)).next(()=>c.Vs.addMatchingKeys(p,t,s.targetId)).next(()=>c.Ds.saveNamedQuery(p,e))})}),cm.apply(this,arguments)}function dm(i,e){return`firestore_clients_${i}_${e}`}function Cf(i,e,t){let s=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(s+=`_${e.uid}`),s}function bf(i,e){return`firestore_targets_${i}_${e}`}class Df{constructor(e,t,s,c){this.user=e,this.batchId=t,this.state=s,this.error=c}static Ji(e,t,s){const c=JSON.parse(s);let p,v="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code,v&&(p=new K(c.error.code,c.error.message))),v?new Df(e,t,c.state,p):(gi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${s}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dh{constructor(e,t,s){this.targetId=e,this.state=t,this.error=s}static Ji(e,t){const s=JSON.parse(t);let c,p="object"==typeof s&&-1!==["not-current","current","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return p&&s.error&&(p="string"==typeof s.error.message&&"string"==typeof s.error.code,p&&(c=new K(s.error.code,s.error.message))),p?new Dh(e,s.state,c):(gi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ji(e,t){const s=JSON.parse(t);let c="object"==typeof s&&s.activeTargetIds instanceof Array,p=mc();for(let v=0;c&&v<s.activeTargetIds.length;++v)c=Pn(s.activeTargetIds[v]),p=p.add(s.activeTargetIds[v]);return c?new Tf(e,p):(gi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Sf{constructor(e,t){this.clientId=e,this.onlineState=t}static Ji(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Sf(t.clientId,t.onlineState):(gi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fp{constructor(){this.activeTargetIds=mc()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Af{constructor(e,t,s,c,p){this.window=e,this.js=t,this.persistenceKey=s,this.tr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new ii(Rn),this.started=!1,this.ir=[];const v=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=p,this.rr=dm(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Fp),this.cr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.ar=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static V(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,xe.Z)(function*(){const t=yield e.syncEngine.Ri();for(const c of t){if(c===e.tr)continue;const p=e.getItem(dm(e.persistenceKey,c));if(p){const v=Tf.Ji(c,p);v&&(e.sr=e.sr.insert(v.clientId,v))}}e._r();const s=e.storage.getItem(e.lr);if(s){const c=e.wr(s);c&&e.mr(c)}for(const c of e.ir)e.nr(c);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let t=!1;return this.sr.forEach((s,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,t,s){this.yr(e,t,s),this.pr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(bf(this.persistenceKey,e));if(s){const c=Dh.Ji(e,s);c&&(t=c.state)}}return this.Ir.Xi(e),this._r(),t}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(bf(this.persistenceKey,e))}updateQueryState(e,t,s){this.Tr(e,t,s)}handleUserChange(e,t,s){t.forEach(c=>{this.pr(c)}),this.currentUser=e,s.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return At("SharedClientState","READ",e,t),t}setItem(e,t){At("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){At("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var t=this;const s=e;if(s.storageArea===this.storage){if(At("SharedClientState","EVENT",s.key,s.newValue),s.key===this.rr)return void gi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable((0,xe.Z)(function*(){if(t.started){if(null!==s.key)if(t.cr.test(s.key)){if(null==s.newValue){const c=t.Rr(s.key);return t.br(c,null)}{const c=t.Pr(s.key,s.newValue);if(c)return t.br(c.clientId,c)}}else if(t.ar.test(s.key)){if(null!==s.newValue){const c=t.vr(s.key,s.newValue);if(c)return t.Vr(c)}}else if(t.hr.test(s.key)){if(null!==s.newValue){const c=t.Sr(s.key,s.newValue);if(c)return t.Dr(c)}}else if(s.key===t.lr){if(null!==s.newValue){const c=t.wr(s.newValue);if(c)return t.mr(c)}}else if(s.key===t.ur){const c=function(p){let v=fs.ot;if(null!=p)try{const x=JSON.parse(p);D("number"==typeof x),v=x}catch(x){gi("SharedClientState","Failed to read sequence number from WebStorage",x)}return v}(s.newValue);c!==fs.ot&&t.sequenceNumberHandler(c)}else if(s.key===t.dr){const c=t.Cr(s.newValue);yield Promise.all(c.map(p=>t.syncEngine.Nr(p)))}}else t.ir.push(s)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,t,s){const c=new Df(this.currentUser,e,t,s),p=Cf(this.persistenceKey,this.currentUser,e);this.setItem(p,c.Yi())}pr(e){const t=Cf(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,t,s){const c=bf(this.persistenceKey,e),p=new Dh(e,t,s);this.setItem(c,p.Yi())}Ar(e){const t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}Rr(e){const t=this.cr.exec(e);return t?t[1]:null}Pr(e,t){const s=this.Rr(e);return Tf.Ji(s,t)}vr(e,t){const s=this.ar.exec(e),c=Number(s[1]);return Df.Ji(new Ji(void 0!==s[2]?s[2]:null),c,t)}Sr(e,t){const s=this.hr.exec(e),c=Number(s[1]);return Dh.Ji(c,t)}wr(e){return Sf.Ji(e)}Cr(e){return JSON.parse(e)}Vr(e){var t=this;return(0,xe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.kr(e.batchId,e.state,e.error);At("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const s=t?this.sr.insert(e,t):this.sr.remove(e),c=this.gr(this.sr),p=this.gr(s),v=[],x=[];return p.forEach(G=>{c.has(G)||v.push(G)}),c.forEach(G=>{p.has(G)||x.push(G)}),this.syncEngine.Mr(v,x).then(()=>{this.sr=s})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let t=mc();return e.forEach((s,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class hm{constructor(){this.Fr=new Fp,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,s){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Fp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class t_{Br(e){}shutdown(){}}class Lp{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Kr(),this.Gr=[],this.Qr()}Br(e){this.Gr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){At("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Gr)e(0)}Kr(){At("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Gr)e(1)}static V(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class n_{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Ol extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,s,c,p){const v=this.oo(e,t);At("RestConnection","Sending: ",v,s);const x={};return this.uo(x,c,p),this.co(e,v,x,s).then(G=>(At("RestConnection","Received: ",G),G),G=>{throw Ho("RestConnection",`${e} failed with error: `,G,"url: ",v,"request:",s),G})}ao(e,t,s,c,p,v){return this.ro(e,t,s,c,p)}uo(e,t,s){e["X-Goog-Api-Client"]="gl-js/ fire/"+bo,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,p)=>e[p]=c),s&&s.headers.forEach((c,p)=>e[p]=c)}oo(e,t){return`${this.so}/v1/${t}:${fm[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,s,c){return new Promise((p,v)=>{const x=new Aa;x.listenOnce(vu.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case Ns.NO_ERROR:const Z=x.getResponseJson();At("Connection","XHR received:",JSON.stringify(Z)),p(Z);break;case Ns.TIMEOUT:At("Connection",'RPC "'+e+'" timed out'),v(new K(P.DEADLINE_EXCEEDED,"Request time out"));break;case Ns.HTTP_ERROR:const se=x.getStatus();if(At("Connection",'RPC "'+e+'" failed with status:',se,"response text:",x.getResponseText()),se>0){const be=x.getResponseJson().error;if(be&&be.status&&be.message){const ot=function(vt){const Rt=vt.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(Rt)>=0?Rt:P.UNKNOWN}(be.status);v(new K(ot,be.message))}else v(new K(P.UNKNOWN,"Server responded with status "+x.getStatus()))}else v(new K(P.UNAVAILABLE,"Connection failed."));break;default:S()}}finally{At("Connection",'RPC "'+e+'" completed.')}});const G=JSON.stringify(c);x.send(t,"POST",G,s,15)})}ho(e,t,s){const c=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],p=Qs(),v=Co(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new wu({})),this.uo(x.initMessageHeaders,t,s),(0,Ge.uI)()||(0,Ge.b$)()||(0,Ge.d)()||(0,Ge.w1)()||(0,Ge.Mn)()||(0,Ge.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const G=c.join("");At("Connection","Creating WebChannel: "+G,x);const Z=p.createWebChannel(G,x);let se=!1,be=!1;const ot=new n_({jr:Rt=>{be?At("Connection","Not sending because WebChannel is closed:",Rt):(se||(At("Connection","Opening WebChannel transport."),Z.open(),se=!0),At("Connection","WebChannel sending:",Rt),Z.send(Rt))},Wr:()=>Z.close()}),vt=(Rt,vn,Ln)=>{Rt.listen(vn,Oi=>{try{Ln(Oi)}catch(As){setTimeout(()=>{throw As},0)}})};return vt(Z,Mr.EventType.OPEN,()=>{be||At("Connection","WebChannel transport opened.")}),vt(Z,Mr.EventType.CLOSE,()=>{be||(be=!0,At("Connection","WebChannel transport closed"),ot.eo())}),vt(Z,Mr.EventType.ERROR,Rt=>{be||(be=!0,Ho("Connection","WebChannel transport errored:",Rt),ot.eo(new K(P.UNAVAILABLE,"The operation could not be completed")))}),vt(Z,Mr.EventType.MESSAGE,Rt=>{var vn;if(!be){const Ln=Rt.data[0];D(!!Ln);const Oi=Ln,As=Oi.error||(null===(vn=Oi[0])||void 0===vn?void 0:vn.error);if(As){At("Connection","WebChannel received error:",As);const Ei=As.status;let xo=function(Ws){const ca=ts[Ws];if(void 0!==ca)return Os(ca)}(Ei),ys=As.message;void 0===xo&&(xo=P.INTERNAL,ys="Unknown error status: "+Ei+" with message "+As.message),be=!0,ot.eo(new K(xo,ys)),Z.close()}else At("Connection","WebChannel received:",Ln),ot.no(Ln)}}),vt(v,Eu.STAT_EVENT,Rt=>{Rt.stat===Is.PROXY?At("Connection","Detected buffering proxy"):Rt.stat===Is.NOPROXY&&At("Connection","Detected no buffering proxy")}),setTimeout(()=>{ot.Zr()},0),ot}}function xf(){return"undefined"!=typeof window?window:null}function Rf(){return"undefined"!=typeof document?document:null}function Th(i){return new Dl(i,!0)}class pm{constructor(e,t,s=1e3,c=1.5,p=6e4){this.js=e,this.timerId=t,this.lo=s,this.fo=c,this._o=p,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),s=Math.max(0,Date.now()-this.yo),c=Math.max(0,t-s);c>0&&At("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.mo=this.js.enqueueAfterDelay(this.timerId,c,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class Vp{constructor(e,t,s,c,p,v,x,G){this.js=e,this.Ao=s,this.Ro=c,this.bo=p,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=x,this.listener=G,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new pm(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,xe.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,()=>this.Oo()))}Mo(e){this.Fo(),this.stream.send(e)}Oo(){var e=this;return(0,xe.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.vo&&(this.vo.cancel(),this.vo=null)}$o(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}close(e,t){var s=this;return(0,xe.Z)(function*(){s.Fo(),s.$o(),s.So.cancel(),s.Po++,4!==e?s.So.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(gi(t.toString()),gi("Using maximum backoff delay to prevent overloading the backend."),s.So.po()):t&&t.code===P.UNAUTHENTICATED&&3!==s.state&&(s.authCredentialsProvider.invalidateToken(),s.appCheckCredentialsProvider.invalidateToken()),null!==s.stream&&(s.Bo(),s.stream.close(),s.stream=null),s.state=e,yield s.listener.Jr(t)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,c])=>{this.Po===t&&this.Uo(s,c)},s=>{e(()=>{const c=new K(P.UNKNOWN,"Fetching auth token failed: "+s.message);return this.qo(c)})})}Uo(e,t){const s=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr(()=>{s(()=>(this.state=2,this.Vo=this.js.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(c=>{s(()=>this.qo(c))}),this.stream.onMessage(c=>{s(()=>this.onMessage(c))})}xo(){var e=this;this.state=5,this.So.Io((0,xe.Z)(function*(){e.state=0,e.start()}))}qo(e){return At("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.js.enqueueAndForget(()=>this.Po===e?t():(At("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r_ extends Vp{constructor(e,t,s,c,p,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,c,v),this.wt=p}Ko(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function dt(i,e){let t;if("targetChange"in e){const s="NO_CHANGE"===(G=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===G?1:"REMOVE"===G?2:"CURRENT"===G?3:"RESET"===G?4:S(),c=e.targetChange.targetIds||[],p=function(G,Z){return G.dt?(D(void 0===Z||"string"==typeof Z),$i.fromBase64String(Z||"")):(D(void 0===Z||Z instanceof Uint8Array),$i.fromUint8Array(Z||new Uint8Array))}(i,e.targetChange.resumeToken),v=e.targetChange.cause,x=v&&function(G){const Z=void 0===G.code?P.UNKNOWN:Os(G.code);return new K(Z,G.message||"")}(v);t=new xd(s,c,p,x||null)}else if("documentChange"in e){const s=e.documentChange,c=ks(i,s.document.name),p=bs(s.document.updateTime),v=new Gs({mapValue:{fields:s.document.fields}}),x=Ti.newFoundDocument(c,p,v);t=new yc(s.targetIds||[],s.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const s=e.documentDelete,c=ks(i,s.document),p=s.readTime?bs(s.readTime):Fn.min(),v=Ti.newNoDocument(c,p);t=new yc([],s.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const s=e.documentRemove,c=ks(i,s.document);t=new yc([],s.removedTargetIds||[],c,null)}else{if(!("filter"in e))return S();{const s=e.filter,p=new Vo(s.count||0);t=new Wl(s.targetId,p)}}var G;return t}(this.wt,e),s=function(c){if(!("targetChange"in c))return Fn.min();const p=c.targetChange;return p.targetIds&&p.targetIds.length?Fn.min():p.readTime?bs(p.readTime):Fn.min()}(e);return this.listener.Go(t,s)}Qo(e){const t={};t.database=m(this.wt),t.addTarget=function(c,p){let v;const x=p.target;return v=au(x)?{documents:On(c,x)}:{query:gs(c,x)},v.targetId=p.targetId,p.resumeToken.approximateByteSize()>0?v.resumeToken=_c(c,p.resumeToken):p.snapshotVersion.compareTo(Fn.min())>0&&(v.readTime=nl(c,p.snapshotVersion.toTimestamp())),v}(this.wt,e);const s=function zl(i,e){const t=function(s,c){switch(c){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return S()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);s&&(t.labels=s),this.Mo(t)}jo(e){const t={};t.database=m(this.wt),t.removeTarget=e,this.Mo(t)}}class i_ extends Vp{constructor(e,t,s,c,p,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,c,v),this.wt=p,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Ko(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(D(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function Gn(i,e){return i&&i.length>0?(D(void 0!==e),i.map(t=>function(s,c){let p=bs(s.updateTime?s.updateTime:c);return p.isEqual(Fn.min())&&(p=bs(c)),new Qc(p,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),s=bs(e.commitTime);return this.listener.Jo(s,t)}return D(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=m(this.wt),this.Mo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>Ft(this.wt,s))};this.Mo(t)}}class s_ extends class{}{constructor(e,t,s,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=s,this.wt=c,this.Zo=!1}tu(){if(this.Zo)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,s){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.bo.ro(e,t,s,c,p)).catch(c=>{throw"FirebaseError"===c.name?(c.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new K(P.UNKNOWN,c.toString())})}ao(e,t,s,c){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([p,v])=>this.bo.ao(e,t,s,p,v,c)).catch(p=>{throw"FirebaseError"===p.name?(p.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),p):new K(P.UNKNOWN,p.toString())})}terminate(){this.Zo=!0}}class Up{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(gi(t),this.su=!1):At("OnlineStateTracker",t)}cu(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class o_{constructor(e,t,s,c,p){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=p,this.du.Br(x=>{s.enqueueAndForget((0,xe.Z)(function*(){var G;ld(v)&&(At("RemoteStore","Restarting streams for network reachability change."),yield(G=(0,xe.Z)(function*(Z){const se=N(Z);se.lu.add(4),yield Dc(se),se._u.set("Unknown"),se.lu.delete(4),yield Sh(se)}),function(Z){return G.apply(this,arguments)})(v))}))}),this._u=new Up(s,c)}}function Sh(i){return $d.apply(this,arguments)}function $d(){return $d=(0,xe.Z)(function*(i){if(ld(i))for(const e of i.fu)yield e(!0)}),$d.apply(this,arguments)}function Dc(i){return Bp.apply(this,arguments)}function Bp(){return Bp=(0,xe.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Bp.apply(this,arguments)}function Hd(i,e){const t=N(i);t.hu.has(e.targetId)||(t.hu.set(e.targetId,e),Ah(t)?jp(t):Wd(t).Co()&&Mf(t,e))}function ud(i,e){const t=N(i),s=Wd(t);t.hu.delete(e),s.Co()&&gm(t,e),0===t.hu.size&&(s.Co()?s.ko():ld(t)&&t._u.set("Unknown"))}function Mf(i,e){i.wu.Nt(e.targetId),Wd(i).Qo(e)}function gm(i,e){i.wu.Nt(e),Wd(i).jo(e)}function jp(i){i.wu=new po({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),te:e=>i.hu.get(e)||null}),Wd(i).start(),i._u.iu()}function Ah(i){return ld(i)&&!Wd(i).Do()&&i.hu.size>0}function ld(i){return 0===N(i).lu.size}function mm(i){i.wu=void 0}function ym(i){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,xe.Z)(function*(i){i.hu.forEach((e,t)=>{Mf(i,e)})}),Nf.apply(this,arguments)}function _m(i,e){return Pf.apply(this,arguments)}function Pf(){return Pf=(0,xe.Z)(function*(i,e){mm(i),Ah(i)?(i._u.uu(e),jp(i)):i._u.set("Unknown")}),Pf.apply(this,arguments)}function vm(i,e,t){return il.apply(this,arguments)}function il(){return il=(0,xe.Z)(function*(i,e,t){if(i._u.set("Online"),e instanceof xd&&2===e.state&&e.cause)try{yield(s=(0,xe.Z)(function*(c,p){const v=p.cause;for(const x of p.targetIds)c.hu.has(x)&&(yield c.remoteSyncer.rejectListen(x,v),c.hu.delete(x),c.wu.removeTarget(x))}),function(c,p){return s.apply(this,arguments)})(i,e)}catch(s){At("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),yield cd(i,s)}else if(e instanceof yc?i.wu.Ut(e):e instanceof Wl?i.wu.zt(e):i.wu.Gt(e),!t.isEqual(Fn.min()))try{const s=yield Pp(i.localStore);t.compareTo(s)>=0&&(yield function(c,p){const v=c.wu.Yt(p);return v.targetChanges.forEach((x,G)=>{if(x.resumeToken.approximateByteSize()>0){const Z=c.hu.get(G);Z&&c.hu.set(G,Z.withResumeToken(x.resumeToken,p))}}),v.targetMismatches.forEach(x=>{const G=c.hu.get(x);if(!G)return;c.hu.set(x,G.withResumeToken($i.EMPTY_BYTE_STRING,G.snapshotVersion)),gm(c,x);const Z=new Sl(G.target,x,1,G.sequenceNumber);Mf(c,Z)}),c.remoteSyncer.applyRemoteEvent(v)}(i,t))}catch(s){At("RemoteStore","Failed to raise snapshot:",s),yield cd(i,s)}var s}),il.apply(this,arguments)}function cd(i,e,t){return $p.apply(this,arguments)}function $p(){return $p=(0,xe.Z)(function*(i,e,t){if(!Do(e))throw e;i.lu.add(1),yield Dc(i),i._u.set("Offline"),t||(t=()=>Pp(i.localStore)),i.asyncQueue.enqueueRetryable((0,xe.Z)(function*(){At("RemoteStore","Retrying IndexedDB access"),yield t(),i.lu.delete(1),yield Sh(i)}))}),$p.apply(this,arguments)}function Em(i,e){return e().catch(t=>cd(i,t,e))}function xh(i){return Rh.apply(this,arguments)}function Rh(){return Rh=(0,xe.Z)(function*(i){const e=N(i),t=hu(e);let s=e.au.length>0?e.au[e.au.length-1].batchId:-1;for(;wm(e);)try{const c=yield sm(e.localStore,s);if(null===c){0===e.au.length&&t.ko();break}s=c.batchId,Hp(e,c)}catch(c){yield cd(e,c)}Gd(e)&&Im(e)}),Rh.apply(this,arguments)}function wm(i){return ld(i)&&i.au.length<10}function Hp(i,e){i.au.push(e);const t=hu(i);t.Co()&&t.zo&&t.Ho(e.mutations)}function Gd(i){return ld(i)&&!hu(i).Do()&&i.au.length>0}function Im(i){hu(i).start()}function Gp(i){return Of.apply(this,arguments)}function Of(){return Of=(0,xe.Z)(function*(i){hu(i).Xo()}),Of.apply(this,arguments)}function Cm(i){return kf.apply(this,arguments)}function kf(){return kf=(0,xe.Z)(function*(i){const e=hu(i);for(const t of i.au)e.Ho(t.mutations)}),kf.apply(this,arguments)}function a_(i,e,t){return Mh.apply(this,arguments)}function Mh(){return Mh=(0,xe.Z)(function*(i,e,t){const s=i.au.shift(),c=Tl.from(s,e,t);yield Em(i,()=>i.remoteSyncer.applySuccessfulWrite(c)),yield xh(i)}),Mh.apply(this,arguments)}function u_(i,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,xe.Z)(function*(i,e){var t;e&&hu(i).zo&&(yield(t=(0,xe.Z)(function*(s,c){if(Hl(p=c.code)&&p!==P.ABORTED){const v=s.au.shift();hu(s).No(),yield Em(s,()=>s.remoteSyncer.rejectFailedWrite(v.batchId,c)),yield xh(s)}var p}),function(s,c){return t.apply(this,arguments)})(i,e)),Gd(i)&&Im(i)}),Wp.apply(this,arguments)}function zp(i,e){return Tc.apply(this,arguments)}function Tc(){return Tc=(0,xe.Z)(function*(i,e){const t=N(i);t.asyncQueue.verifyOperationInProgress(),At("RemoteStore","RemoteStore received new credentials");const s=ld(t);t.lu.add(3),yield Dc(t),s&&t._u.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.lu.delete(3),yield Sh(t)}),Tc.apply(this,arguments)}function Ff(i,e){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,xe.Z)(function*(i,e){const t=N(i);e?(t.lu.delete(2),yield Sh(t)):e||(t.lu.add(2),yield Dc(t),t._u.set("Unknown"))}),Kp.apply(this,arguments)}function Wd(i){return i.mu||(i.mu=function(e,t,s){const c=N(e);return c.tu(),new r_(t,c.bo,c.authCredentials,c.appCheckCredentials,c.wt,s)}(i.datastore,i.asyncQueue,{zr:ym.bind(null,i),Jr:_m.bind(null,i),Go:vm.bind(null,i)}),i.fu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.mu.No(),Ah(i)?jp(i):i._u.set("Unknown")):(yield i.mu.stop(),mm(i))});return function(t){return e.apply(this,arguments)}}())),i.mu}function hu(i){return i.gu||(i.gu=function(e,t,s){const c=N(e);return c.tu(),new i_(t,c.bo,c.authCredentials,c.appCheckCredentials,c.wt,s)}(i.datastore,i.asyncQueue,{zr:Gp.bind(null,i),Jr:u_.bind(null,i),Yo:Cm.bind(null,i),Jo:a_.bind(null,i)}),i.fu.push(function(){var e=(0,xe.Z)(function*(t){t?(i.gu.No(),yield xh(i)):(yield i.gu.stop(),i.au.length>0&&(At("RemoteStore",`Stopping write stream with ${i.au.length} pending writes`),i.au=[]))});return function(t){return e.apply(this,arguments)}}())),i.gu}class qp{constructor(e,t,s,c,p){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=c,this.removalCallback=p,this.deferred=new he,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,s,c,p){const v=Date.now()+s,x=new qp(e,t,v,c,p);return x.start(s),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new K(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zd(i,e){if(gi("AsyncQueue",`${e}: ${i}`),Do(i))return new K(P.UNAVAILABLE,`${e}: ${i}`);throw i}class Kd{constructor(e){this.comparator=e?(t,s)=>e(t,s)||Zt.comparator(t.key,s.key):(t,s)=>Zt.comparator(t.key,s.key),this.keyedMap=ua(),this.sortedSet=new ii(this.comparator)}static emptySet(e){return new Kd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Kd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,p=s.getNext().key;if(!c.isEqual(p))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const s=new Kd;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}class bm{constructor(){this.yu=new ii(Zt.comparator)}track(e){const t=e.doc.key,s=this.yu.get(t);s?0!==e.type&&3===s.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==s.type?this.yu=this.yu.insert(t,{type:s.type,doc:e.doc}):2===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===s.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===s.type?this.yu=this.yu.remove(t):1===e.type&&2===s.type?this.yu=this.yu.insert(t,{type:1,doc:s.doc}):0===e.type&&1===s.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):S():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal((t,s)=>{e.push(s)}),e}}class Ia{constructor(e,t,s,c,p,v,x,G){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=c,this.mutatedKeys=p,this.fromCache=v,this.syncStateChanged=x,this.excludesMetadataChanges=G}static fromInitialDocuments(e,t,s,c){const p=[];return t.forEach(v=>{p.push({type:0,doc:v})}),new Ia(e,t,Kd.emptySet(t),p,s,c,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==s[c].type||!t[c].doc.isEqual(s[c].doc))return!1;return!0}}class Zp{constructor(){this.Iu=void 0,this.listeners=[]}}class Dm{constructor(){this.queries=new Uo(e=>dh(e),jl),this.onlineState="Unknown",this.Tu=new Set}}function Lf(i,e){return Vf.apply(this,arguments)}function Vf(){return Vf=(0,xe.Z)(function*(i,e){const t=N(i),s=e.query;let c=!1,p=t.queries.get(s);if(p||(c=!0,p=new Zp),c)try{p.Iu=yield t.onListen(s)}catch(v){const x=zd(v,`Initialization of query '${aa(e.query)}' failed`);return void e.onError(x)}t.queries.set(s,p),p.listeners.push(e),e.Eu(t.onlineState),p.Iu&&e.Au(p.Iu)&&Qp(t)}),Vf.apply(this,arguments)}function Uf(i,e){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,xe.Z)(function*(i,e){const t=N(i),s=e.query;let c=!1;const p=t.queries.get(s);if(p){const v=p.listeners.indexOf(e);v>=0&&(p.listeners.splice(v,1),c=0===p.listeners.length)}if(c)return t.queries.delete(s),t.onUnlisten(s)}),Yp.apply(this,arguments)}function l_(i,e){const t=N(i);let s=!1;for(const c of e){const v=t.queries.get(c.query);if(v){for(const x of v.listeners)x.Au(c)&&(s=!0);v.Iu=c}}s&&Qp(t)}function c_(i,e,t){const s=N(i),c=s.queries.get(e);if(c)for(const p of c.listeners)p.onError(t);s.queries.delete(e)}function Qp(i){i.Tu.forEach(e=>{e.next()})}class Bf{constructor(e,t,s){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=s||{}}Au(e){if(!this.options.includeMetadataChanges){const s=[];for(const c of e.docChanges)3!==c.type&&s.push(c);e=new Ia(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),t=!0):this.Vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}Vu(e,t){return!e.fromCache||!(this.options.Du&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class u0{constructor(e,t){this.payload=e,this.byteLength=t}Cu(){return"metadata"in this.payload}}class Jp{constructor(e){this.wt=e}Wi(e){return ks(this.wt,e)}zi(e){return e.metadata.exists?re(this.wt,e.document,!1):Ti.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}Hi(e){return bs(e)}}class d_{constructor(e,t,s){this.xu=e,this.localStore=t,this.wt=s,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Tm(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const s=Tr.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(s.get(s.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ku(e){const t=new Map,s=new Jp(this.wt);for(const c of e)if(c.metadata.queries){const p=s.Wi(c.metadata.name);for(const v of c.metadata.queries){const x=(t.get(v)||yr()).add(p);t.set(v,x)}}return t}complete(){var e=this;return(0,xe.Z)(function*(){const t=yield function a0(i,e,t,s){return um.apply(this,arguments)}(e.localStore,new Jp(e.wt),e.documents,e.xu.id),s=e.ku(e.documents);for(const c of e.queries)yield lm(e.localStore,c,s.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Mu:t}})()}}function Tm(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class h_{constructor(e){this.key=e}}class f_{constructor(e){this.key=e}}class jf{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=yr(),this.mutatedKeys=yr(),this.Lu=Su(e),this.Uu=new Kd(this.Lu)}get qu(){return this.Fu}Ku(e,t){const s=t?t.Gu:new bm,c=t?t.Uu:this.Uu;let p=t?t.mutatedKeys:this.mutatedKeys,v=c,x=!1;const G="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,Z="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((se,be)=>{const ot=c.get(se),vt=cc(this.query,be)?be:null,Rt=!!ot&&this.mutatedKeys.has(ot.key),vn=!!vt&&(vt.hasLocalMutations||this.mutatedKeys.has(vt.key)&&vt.hasCommittedMutations);let Ln=!1;ot&&vt?ot.data.isEqual(vt.data)?Rt!==vn&&(s.track({type:3,doc:vt}),Ln=!0):this.Qu(ot,vt)||(s.track({type:2,doc:vt}),Ln=!0,(G&&this.Lu(vt,G)>0||Z&&this.Lu(vt,Z)<0)&&(x=!0)):!ot&&vt?(s.track({type:0,doc:vt}),Ln=!0):ot&&!vt&&(s.track({type:1,doc:ot}),Ln=!0,(G||Z)&&(x=!0)),Ln&&(vt?(v=v.add(vt),p=vn?p.add(se):p.delete(se)):(v=v.delete(se),p=p.delete(se)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const se="F"===this.query.limitType?v.last():v.first();v=v.delete(se.key),p=p.delete(se.key),s.track({type:1,doc:se})}return{Uu:v,Gu:s,Oi:x,mutatedKeys:p}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s){const c=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const p=e.Gu.pu();p.sort((Z,se)=>function(be,ot){const vt=Rt=>{switch(Rt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return S()}};return vt(be)-vt(ot)}(Z.type,se.type)||this.Lu(Z.doc,se.doc)),this.ju(s);const v=t?this.Wu():[],x=0===this.Bu.size&&this.current?1:0,G=x!==this.$u;return this.$u=x,0!==p.length||G?{snapshot:new Ia(this.query,e.Uu,c,p,e.mutatedKeys,0===x,G,!1),zu:v}:{zu:v}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new bm,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(t=>this.Fu=this.Fu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Fu=this.Fu.delete(t)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=yr(),this.Uu.forEach(s=>{this.Hu(s.key)&&(this.Bu=this.Bu.add(s.key))});const t=[];return e.forEach(s=>{this.Bu.has(s)||t.push(new f_(s))}),this.Bu.forEach(s=>{e.has(s)||t.push(new h_(s))}),t}Ju(e){this.Fu=e.ji,this.Bu=yr();const t=this.Ku(e.documents);return this.applyChanges(t,!0)}Yu(){return Ia.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class p_{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class Sm{constructor(e){this.key=e,this.Xu=!1}}class Am{constructor(e,t,s,c,p,v){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=c,this.currentUser=p,this.maxConcurrentLimboResolutions=v,this.Zu={},this.tc=new Uo(x=>dh(x),jl),this.ec=new Map,this.nc=new Set,this.sc=new ii(Zt.comparator),this.ic=new Map,this.rc=new Tp,this.oc={},this.uc=new Map,this.cc=Ds.Rn(),this.onlineState="Unknown",this.ac=void 0}get isPrimaryClient(){return!0===this.ac}}function l0(i,e){return fu.apply(this,arguments)}function fu(){return fu=(0,xe.Z)(function*(i,e){const t=qf(i);let s,c;const p=t.tc.get(e);if(p)s=p.targetId,t.sharedClientState.addLocalQueryTarget(s),c=p.view.Yu();else{const v=yield jd(t.localStore,sa(e));t.isPrimaryClient&&Hd(t.remoteStore,v);const x=t.sharedClientState.addLocalQueryTarget(v.targetId);s=v.targetId,c=yield xm(t,e,s,"current"===x)}return c}),fu.apply(this,arguments)}function xm(i,e,t,s){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,xe.Z)(function*(i,e,t,s){i.hc=(se,be,ot)=>{return(vt=(0,xe.Z)(function*(Rt,vn,Ln,Oi){let As=vn.view.Ku(Ln);As.Oi&&(As=yield If(Rt.localStore,vn.query,!1).then(({documents:ys})=>vn.view.Ku(ys,As)));const Ei=Oi&&Oi.targetChanges.get(vn.targetId),xo=vn.view.applyChanges(As,Rt.isPrimaryClient,Ei);return rg(Rt,vn.targetId,xo.zu),xo.snapshot}),function(Rt,vn,Ln,Oi){return vt.apply(this,arguments)})(i,se,be,ot);var vt};const c=yield If(i.localStore,e,!0),p=new jf(e,c.ji),v=p.Ku(c.documents),x=Il.createSynthesizedTargetChangeForCurrentChange(t,s&&"Offline"!==i.onlineState),G=p.applyChanges(v,i.isPrimaryClient,x);rg(i,t,G.zu);const Z=new p_(e,t,p);return i.tc.set(e,Z),i.ec.has(t)?i.ec.get(t).push(e):i.ec.set(t,[e]),G.snapshot}),Rm.apply(this,arguments)}function Mm(i,e){return $f.apply(this,arguments)}function $f(){return $f=(0,xe.Z)(function*(i,e){const t=N(i),s=t.tc.get(e),c=t.ec.get(s.targetId);if(c.length>1)return t.ec.set(s.targetId,c.filter(p=>!jl(p,e))),void t.tc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(s.targetId),t.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ad(t.localStore,s.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(s.targetId),ud(t.remoteStore,s.targetId),Zd(t,s.targetId)}).catch(fa))):(Zd(t,s.targetId),yield ad(t.localStore,s.targetId,!0))}),$f.apply(this,arguments)}function Xp(){return Xp=(0,xe.Z)(function*(i,e,t){const s=Zf(i);try{const c=yield function(p,v){const x=N(p),G=mi.now(),Z=v.reduce((ot,vt)=>ot.add(vt.key),yr());let se,be;return x.persistence.runTransaction("Locally write mutations","readwrite",ot=>{let vt=Pi(),Rt=yr();return x.Ui.getEntries(ot,Z).next(vn=>{vt=vn,vt.forEach((Ln,Oi)=>{Oi.isValidDocument()||(Rt=Rt.add(Ln))})}).next(()=>x.localDocuments.getOverlayedDocuments(ot,vt)).next(vn=>{se=vn;const Ln=[];for(const Oi of v){const As=Ru(Oi,se.get(Oi.key).overlayedDocument);null!=As&&Ln.push(new Ka(Oi.key,As,oc(As.value.mapValue),li.exists(!0)))}return x.mutationQueue.addMutationBatch(ot,G,Ln,v)}).next(vn=>{be=vn;const Ln=vn.applyToLocalDocumentSet(se,Rt);return x.documentOverlayCache.saveOverlays(ot,vn.batchId,Ln)})}).then(()=>({batchId:be.batchId,changes:fo(se)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(c.batchId),function(p,v,x){let G=p.oc[p.currentUser.toKey()];G||(G=new ii(Rn)),G=G.insert(v,x),p.oc[p.currentUser.toKey()]=G}(s,c.batchId,t),yield qo(s,c.changes),yield xh(s.remoteStore)}catch(c){const p=zd(c,"Failed to persist write");t.reject(p)}}),Xp.apply(this,arguments)}function g_(i,e){return Hf.apply(this,arguments)}function Hf(){return Hf=(0,xe.Z)(function*(i,e){const t=N(i);try{const s=yield o0(t.localStore,e);e.targetChanges.forEach((c,p)=>{const v=t.ic.get(p);v&&(D(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?v.Xu=!0:c.modifiedDocuments.size>0?D(v.Xu):c.removedDocuments.size>0&&(D(v.Xu),v.Xu=!1))}),yield qo(t,s,e)}catch(s){yield fa(s)}}),Hf.apply(this,arguments)}function Gf(i,e,t){const s=N(i);if(s.isPrimaryClient&&0===t||!s.isPrimaryClient&&1===t){const c=[];s.tc.forEach((p,v)=>{const x=v.view.Eu(e);x.snapshot&&c.push(x.snapshot)}),function(p,v){const x=N(p);x.onlineState=v;let G=!1;x.queries.forEach((Z,se)=>{for(const be of se.listeners)be.Eu(v)&&(G=!0)}),G&&Qp(x)}(s.eventManager,e),c.length&&s.Zu.Go(c),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}function m_(i,e,t){return Nh.apply(this,arguments)}function Nh(){return Nh=(0,xe.Z)(function*(i,e,t){const s=N(i);s.sharedClientState.updateQueryState(e,"rejected",t);const c=s.ic.get(e),p=c&&c.key;if(p){let v=new ii(Zt.comparator);v=v.insert(p,Ti.newNoDocument(p,Fn.min()));const x=yr().add(p),G=new So(Fn.min(),new Map,new Nr(Rn),v,x);yield g_(s,G),s.sc=s.sc.remove(p),s.ic.delete(e),Ph(s)}else yield ad(s.localStore,e,!1).then(()=>Zd(s,e,t)).catch(fa)}),Nh.apply(this,arguments)}function y_(i,e){return eg.apply(this,arguments)}function eg(){return eg=(0,xe.Z)(function*(i,e){const t=N(i),s=e.batch.batchId;try{const c=yield e_(t.localStore,e);Sc(t,s,null),qd(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),yield qo(t,c)}catch(c){yield fa(c)}}),eg.apply(this,arguments)}function __(i,e,t){return tg.apply(this,arguments)}function tg(){return tg=(0,xe.Z)(function*(i,e,t){const s=N(i);try{const c=yield function(p,v){const x=N(p);return x.persistence.runTransaction("Reject batch","readwrite-primary",G=>{let Z;return x.mutationQueue.lookupMutationBatch(G,v).next(se=>(D(null!==se),Z=se.keys(),x.mutationQueue.removeMutationBatch(G,se))).next(()=>x.mutationQueue.performConsistencyCheck(G)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(G,Z,v)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(G,Z)).next(()=>x.localDocuments.getDocuments(G,Z))})}(s.localStore,e);Sc(s,e,t),qd(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),yield qo(s,c)}catch(c){yield fa(c)}}),tg.apply(this,arguments)}function ng(){return ng=(0,xe.Z)(function*(i,e){const t=N(i);ld(t.remoteStore)||At("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(p){const v=N(p);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>v.mutationQueue.getHighestUnacknowledgedBatchId(x))}(t.localStore);if(-1===s)return void e.resolve();const c=t.uc.get(s)||[];c.push(e),t.uc.set(s,c)}catch(s){const c=zd(s,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),ng.apply(this,arguments)}function qd(i,e){(i.uc.get(e)||[]).forEach(t=>{t.resolve()}),i.uc.delete(e)}function Sc(i,e,t){const s=N(i);let c=s.oc[s.currentUser.toKey()];if(c){const p=c.get(e);p&&(t?p.reject(t):p.resolve(),c=c.remove(e)),s.oc[s.currentUser.toKey()]=c}}function Zd(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.ec.get(e))i.tc.delete(s),t&&i.Zu.lc(s,t);i.ec.delete(e),i.isPrimaryClient&&i.rc.us(e).forEach(s=>{i.rc.containsKey(s)||Yd(i,s)})}function Yd(i,e){i.nc.delete(e.path.canonicalString());const t=i.sc.get(e);null!==t&&(ud(i.remoteStore,t),i.sc=i.sc.remove(e),i.ic.delete(t),Ph(i))}function rg(i,e,t){for(const s of t)s instanceof h_?(i.rc.addReference(s.key,e),E_(i,s)):s instanceof f_?(At("SyncEngine","Document no longer in limbo: "+s.key),i.rc.removeReference(s.key,e),i.rc.containsKey(s.key)||Yd(i,s.key)):S()}function E_(i,e){const t=e.key,s=t.path.canonicalString();i.sc.get(t)||i.nc.has(s)||(At("SyncEngine","New document in limbo: "+t),i.nc.add(s),Ph(i))}function Ph(i){for(;i.nc.size>0&&i.sc.size<i.maxConcurrentLimboResolutions;){const e=i.nc.values().next().value;i.nc.delete(e);const t=new Zt(Tr.fromString(e)),s=i.cc.next();i.ic.set(s,new Sm(t)),i.sc=i.sc.insert(t,s),Hd(i.remoteStore,new Sl(sa(Ga(t.path)),s,2,fs.ot))}}function qo(i,e,t){return dd.apply(this,arguments)}function dd(){return dd=(0,xe.Z)(function*(i,e,t){const s=N(i),c=[],p=[],v=[];var x;s.tc.isEmpty()||(s.tc.forEach((x,G)=>{v.push(s.hc(G,e,t).then(Z=>{if(Z){s.isPrimaryClient&&s.sharedClientState.updateQueryState(G.targetId,Z.fromCache?"not-current":"current"),c.push(Z);const se=Ef.Vi(G.targetId,Z);p.push(se)}}))}),yield Promise.all(v),s.Zu.Go(c),yield(x=(0,xe.Z)(function*(G,Z){const se=N(G);try{yield se.persistence.runTransaction("notifyLocalViewChanges","readwrite",be=>Je.forEach(Z,ot=>Je.forEach(ot.Pi,vt=>se.persistence.referenceDelegate.addReference(be,ot.targetId,vt)).next(()=>Je.forEach(ot.vi,vt=>se.persistence.referenceDelegate.removeReference(be,ot.targetId,vt)))))}catch(be){if(!Do(be))throw be;At("LocalStore","Failed to update sequence numbers: "+be)}for(const be of Z){const ot=be.targetId;if(!be.fromCache){const vt=se.$i.get(ot),vn=vt.withLastLimboFreeSnapshotVersion(vt.snapshotVersion);se.$i=se.$i.insert(ot,vn)}}}),function(G,Z){return x.apply(this,arguments)})(s.localStore,p))}),dd.apply(this,arguments)}function Ca(i,e){return ec.apply(this,arguments)}function ec(){return ec=(0,xe.Z)(function*(i,e){const t=N(i);if(!t.currentUser.isEqual(e)){At("SyncEngine","User change. New user:",e.toKey());const s=yield Np(t.localStore,e);t.currentUser=e,(c=t).uc.forEach(v=>{v.forEach(x=>{x.reject(new K(P.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.uc.clear(),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),yield qo(t,s.Ki)}var c}),ec.apply(this,arguments)}function Wf(i,e){const t=N(i),s=t.ic.get(e);if(s&&s.Xu)return yr().add(s.key);{let c=yr();const p=t.ec.get(e);if(!p)return c;for(const v of p){const x=t.tc.get(v);c=c.unionWith(x.view.qu)}return c}}function Vu(i,e){return Oh.apply(this,arguments)}function Oh(){return Oh=(0,xe.Z)(function*(i,e){const t=N(i),s=yield If(t.localStore,e.query,!0),c=e.view.Ju(s);return t.isPrimaryClient&&rg(t,e.targetId,c.zu),c}),Oh.apply(this,arguments)}function Qd(i,e){return Ac.apply(this,arguments)}function Ac(){return Ac=(0,xe.Z)(function*(i,e){const t=N(i);return om(t.localStore,e).then(s=>qo(t,s))}),Ac.apply(this,arguments)}function Jd(i,e,t,s){return xc.apply(this,arguments)}function xc(){return xc=(0,xe.Z)(function*(i,e,t,s){const c=N(i),p=yield function(v,x){const G=N(v),Z=N(G.mutationQueue);return G.persistence.runTransaction("Lookup mutation documents","readonly",se=>Z.yn(se,x).next(be=>be?G.localDocuments.getDocuments(se,be):Je.resolve(null)))}(c.localStore,e);var x;null!==p?("pending"===t?yield xh(c.remoteStore):"acknowledged"===t||"rejected"===t?(Sc(c,e,s||null),qd(c,e),x=e,N(N(c.localStore).mutationQueue).In(x)):S(),yield qo(c,p)):At("SyncEngine","Cannot apply mutation batch with id: "+e)}),xc.apply(this,arguments)}function Rc(){return Rc=(0,xe.Z)(function*(i,e){const t=N(i);if(qf(t),Zf(t),!0===e&&!0!==t.ac){const s=t.sharedClientState.getAllActiveQueryTargets(),c=yield hd(t,s.toArray());t.ac=!0,yield Ff(t.remoteStore,!0);for(const p of c)Hd(t.remoteStore,p)}else if(!1===e&&!1!==t.ac){const s=[];let c=Promise.resolve();t.ec.forEach((p,v)=>{t.sharedClientState.isLocalQueryTarget(v)?s.push(v):c=c.then(()=>(Zd(t,v),ad(t.localStore,v,!0))),ud(t.remoteStore,v)}),yield c,yield hd(t,s),function(p){const v=N(p);v.ic.forEach((x,G)=>{ud(v.remoteStore,G)}),v.rc.cs(),v.ic=new Map,v.sc=new ii(Zt.comparator)}(t),t.ac=!1,yield Ff(t.remoteStore,!1)}}),Rc.apply(this,arguments)}function hd(i,e,t){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,xe.Z)(function*(i,e,t){const s=N(i),c=[],p=[];for(const v of e){let x;const G=s.ec.get(v);if(G&&0!==G.length){x=yield jd(s.localStore,sa(G[0]));for(const Z of G){const se=s.tc.get(Z),be=yield Vu(s,se);be.snapshot&&p.push(be.snapshot)}}else{const Z=yield Xa(s.localStore,v);x=yield jd(s.localStore,Z),yield xm(s,fd(Z),v,!1)}c.push(x)}return s.Zu.Go(p),c}),Mc.apply(this,arguments)}function fd(i){return Ul(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Pm(i){const e=N(i);return N(N(e.localStore).persistence).Ri()}function Om(i,e,t,s){return zf.apply(this,arguments)}function zf(){return zf=(0,xe.Z)(function*(i,e,t,s){const c=N(i);if(c.ac)return void At("SyncEngine","Ignoring unexpected query state notification.");const p=c.ec.get(e);if(p&&p.length>0)switch(t){case"current":case"not-current":{const v=yield om(c.localStore,Oa(p[0])),x=So.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield qo(c,v,x);break}case"rejected":yield ad(c.localStore,e,!0),Zd(c,e,s);break;default:S()}}),zf.apply(this,arguments)}function km(i,e,t){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,xe.Z)(function*(i,e,t){const s=qf(i);if(s.ac){for(const c of e){if(s.ec.has(c)){At("SyncEngine","Adding an already active target "+c);continue}const p=yield Xa(s.localStore,c),v=yield jd(s.localStore,p);yield xm(s,fd(p),v.targetId,!1),Hd(s.remoteStore,v)}for(const c of t)s.ec.has(c)&&(yield ad(s.localStore,c,!1).then(()=>{ud(s.remoteStore,c),Zd(s,c)}).catch(fa))}}),Kf.apply(this,arguments)}function qf(i){const e=N(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=g_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m_.bind(null,e),e.Zu.Go=l_.bind(null,e.eventManager),e.Zu.lc=c_.bind(null,e.eventManager),e}function Zf(i){const e=N(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__.bind(null,e),e}class ig{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,xe.Z)(function*(){t.wt=Th(e.databaseInfo.databaseId),t.sharedClientState=t.dc(e),t.persistence=t._c(e),yield t.persistence.start(),t.localStore=t.wc(e),t.gcScheduler=t.mc(e,t.localStore),t.indexBackfillerScheduler=t.gc(e,t.localStore)})()}mc(e,t){return null}gc(e,t){return null}wc(e){return wf(this.persistence,new Rp,e.initialUser,this.wt)}_c(e){return new Ap(vf.Ms,this.wt)}dc(e){return new hm}terminate(){var e=this;return(0,xe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Lm extends ig{constructor(e,t,s){super(),this.yc=e,this.cacheSizeBytes=t,this.forceOwnership=s,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e),yield s.yc.initialize(s,e),yield Zf(s.yc.syncEngine),yield xh(s.yc.remoteStore),yield s.persistence.ci(()=>(s.gcScheduler&&!s.gcScheduler.started&&s.gcScheduler.start(),s.indexBackfillerScheduler&&!s.indexBackfillerScheduler.started&&s.indexBackfillerScheduler.start(),Promise.resolve()))})()}wc(e){return wf(this.persistence,new Rp,e.initialUser,this.wt)}mc(e,t){return new e0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}gc(e,t){const s=new pl(t,this.persistence);return new Go(e.asyncQueue,s)}_c(e){const t=xp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),s=void 0!==this.cacheSizeBytes?le.withCacheSize(this.cacheSizeBytes):le.DEFAULT;return new bc(this.synchronizeTabs,t,e.clientId,s,e.asyncQueue,xf(),Rf(),this.wt,this.sharedClientState,!!this.forceOwnership)}dc(e){return new hm}}class Vm extends Lm{constructor(e,t){super(e,t,!1),this.yc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,s=this;return(0,xe.Z)(function*(){yield t().call(s,e);const c=s.yc.syncEngine;s.sharedClientState instanceof Af&&(s.sharedClientState.syncEngine={kr:Jd.bind(null,c),Or:Om.bind(null,c),Mr:km.bind(null,c),Ri:Pm.bind(null,c),Nr:Qd.bind(null,c)},yield s.sharedClientState.start()),yield s.persistence.ci(function(){var p=(0,xe.Z)(function*(v){yield function Xd(i,e){return Rc.apply(this,arguments)}(s.yc.syncEngine,v),s.gcScheduler&&(v&&!s.gcScheduler.started?s.gcScheduler.start():v||s.gcScheduler.stop()),s.indexBackfillerScheduler&&(v&&!s.indexBackfillerScheduler.started?s.indexBackfillerScheduler.start():v||s.indexBackfillerScheduler.stop())});return function(v){return p.apply(this,arguments)}}())})()}dc(e){const t=xf();if(!Af.V(t))throw new K(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const s=xp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Af(t,e.asyncQueue,s,e.clientId,e.initialUser)}}class sg{initialize(e,t){var s=this;return(0,xe.Z)(function*(){s.localStore||(s.localStore=e.localStore,s.sharedClientState=e.sharedClientState,s.datastore=s.createDatastore(t),s.remoteStore=s.createRemoteStore(t),s.eventManager=s.createEventManager(t),s.syncEngine=s.createSyncEngine(t,!e.synchronizeTabs),s.sharedClientState.onlineStateHandler=c=>Gf(s.syncEngine,c,1),s.remoteStore.remoteSyncer.handleCredentialChange=Ca.bind(null,s.syncEngine),yield Ff(s.remoteStore,s.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Dm}createDatastore(e){const t=Th(e.databaseInfo.databaseId),s=new Ol(e.databaseInfo);return new s_(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return t=this.localStore,s=this.datastore,c=e.asyncQueue,p=x=>Gf(this.syncEngine,x,0),v=Lp.V()?new Lp:new t_,new o_(t,s,c,p,v);var t,s,c,p,v}createSyncEngine(e,t){return function(s,c,p,v,x,G,Z){const se=new Am(s,c,p,v,x,G);return Z&&(se.ac=!0),se}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,xe.Z)(function*(t){const s=N(t);At("RemoteStore","RemoteStore shutting down."),s.lu.add(5),yield Dc(s),s.du.shutdown(),s._u.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function og(i,e=10240){let t=0;return{read:()=>(0,xe.Z)(function*(){if(t<i.byteLength){const s={value:i.slice(t,t+e),done:!1};return t+=e,s}return{done:!0}})(),cancel:()=>(0,xe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class kh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ic(this.observer.next,e)}error(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Tc(){this.muted=!0}Ic(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class w_{constructor(e,t){this.Ec=e,this.wt=t,this.metadata=new he,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then(s=>{s&&s.Cu()?this.metadata.resolve(s.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==s?void 0:s.payload)}`))},s=>this.metadata.reject(s))}close(){return this.Ec.cancel()}getMetadata(){var e=this;return(0,xe.Z)(function*(){return e.metadata.promise})()}fc(){var e=this;return(0,xe.Z)(function*(){return yield e.getMetadata(),e.Rc()})()}Rc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.bc();if(null===t)return null;const s=e.Ac.decode(t),c=Number(s);isNaN(c)&&e.Pc(`length string (${s}) is not valid number`);const p=yield e.vc(c);return new u0(JSON.parse(p),t.length+c)})()}Vc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}bc(){var e=this;return(0,xe.Z)(function*(){for(;e.Vc()<0&&!(yield e.Sc()););if(0===e.buffer.length)return null;const t=e.Vc();t<0&&e.Pc("Reached the end of bundle when a length string is expected.");const s=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),s})()}vc(e){var t=this;return(0,xe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Sc())&&t.Pc("Reached the end of bundle when more is expected.");const s=t.Ac.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),s})()}Pc(e){throw this.Ec.cancel(),new Error(`Invalid bundle format: ${e}`)}Sc(){var e=this;return(0,xe.Z)(function*(){const t=yield e.Ec.read();if(!t.done){const s=new Uint8Array(e.buffer.length+t.value.length);s.set(e.buffer),s.set(t.value,e.buffer.length),e.buffer=s}return t.done})()}}class I_{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,xe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new K(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const s=yield(c=(0,xe.Z)(function*(p,v){const x=N(p),G=m(x.wt)+"/documents",Z={documents:v.map(vt=>Za(x.wt,vt))},se=yield x.ao("BatchGetDocuments",G,Z,v.length),be=new Map;se.forEach(vt=>{const Rt=function Le(i,e){return"found"in e?function(t,s){D(!!s.found);const c=ks(t,s.found.name),p=bs(s.found.updateTime),v=new Gs({mapValue:{fields:s.found.fields}});return Ti.newFoundDocument(c,p,v)}(i,e):"missing"in e?function(t,s){D(!!s.missing),D(!!s.readTime);const c=ks(t,s.missing),p=bs(s.readTime);return Ti.newNoDocument(c,p)}(i,e):S()}(x.wt,vt);be.set(Rt.key.toString(),Rt)});const ot=[];return v.forEach(vt=>{const Rt=be.get(vt.toString());D(!!Rt),ot.push(Rt)}),ot}),function(p,v){return c.apply(this,arguments)})(t.datastore,e);var c;return s.forEach(c=>t.recordVersion(c)),s})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(s){this.lastWriteError=s}this.writtenDocs.add(e.toString())}delete(e){this.write(new Mu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,xe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var s;e.mutations.forEach(s=>{t.delete(s.key.toString())}),t.forEach((s,c)=>{const p=Zt.fromPath(c);e.mutations.push(new Xu(p,e.precondition(p)))}),yield(s=(0,xe.Z)(function*(c,p){const v=N(c),x=m(v.wt)+"/documents",G={writes:p.map(Z=>Ft(v.wt,Z))};yield v.ro("Commit",x,G)}),function(c,p){return s.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw S();t=Fn.min()}const s=this.readVersions.get(e.key.toString());if(s){if(!t.isEqual(s))throw new K(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?li.updateTime(t):li.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Fn.min()))throw new K(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return li.updateTime(t)}return li.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Um{constructor(e,t,s,c,p){this.asyncQueue=e,this.datastore=t,this.options=s,this.updateFunction=c,this.deferred=p,this.Dc=s.maxAttempts,this.So=new pm(this.asyncQueue,"transaction_retry")}run(){this.Dc-=1,this.Cc()}Cc(){var e=this;this.So.Io((0,xe.Z)(function*(){const t=new I_(e.datastore),s=e.xc(t);s&&s.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(p=>{e.Nc(p)}))}).catch(c=>{e.Nc(c)})}))}xc(e){try{const t=this.updateFunction(e);return!bt(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Nc(e){this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Cc(),Promise.resolve()))):this.deferred.reject(e)}kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Hl(t)}return!1}}class C_{constructor(e,t,s,c){var p=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=c,this.user=Ji.UNAUTHENTICATED,this.clientId=na.I(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(s,function(){var v=(0,xe.Z)(function*(x){At("FirestoreClient","Received user=",x.uid),yield p.authCredentialListener(x),p.user=x});return function(x){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(s,v=>(At("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,xe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new he;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(s){const c=zd(s,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function ag(i,e){return ug.apply(this,arguments)}function ug(){return ug=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),At("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener(function(){var c=(0,xe.Z)(function*(p){s.isEqual(p)||(yield Np(e.localStore,p),s=p)});return function(p){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ug.apply(this,arguments)}function Bm(i,e){return jm.apply(this,arguments)}function jm(){return jm=(0,xe.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield lg(i);At("FirestoreClient","Initializing OnlineComponentProvider");const s=yield i.getConfiguration();yield e.initialize(t,s),i.setCredentialChangeListener(c=>zp(e.remoteStore,c)),i.setAppCheckTokenChangeListener((c,p)=>zp(e.remoteStore,p)),i.onlineComponents=e}),jm.apply(this,arguments)}function lg(i){return Fh.apply(this,arguments)}function Fh(){return Fh=(0,xe.Z)(function*(i){return i.offlineComponents||(At("FirestoreClient","Using default OfflineComponentProvider"),yield ag(i,new ig)),i.offlineComponents}),Fh.apply(this,arguments)}function eh(i){return cg.apply(this,arguments)}function cg(){return cg=(0,xe.Z)(function*(i){return i.onlineComponents||(At("FirestoreClient","Using default OnlineComponentProvider"),yield Bm(i,new sg)),i.onlineComponents}),cg.apply(this,arguments)}function b_(i){return lg(i).then(e=>e.persistence)}function $m(i){return lg(i).then(e=>e.localStore)}function D_(i){return eh(i).then(e=>e.remoteStore)}function dg(i){return eh(i).then(e=>e.syncEngine)}function pd(i){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,xe.Z)(function*(i){const e=yield eh(i),t=e.eventManager;return t.onListen=l0.bind(null,e.syncEngine),t.onUnlisten=Mm.bind(null,e.syncEngine),t}),Hm.apply(this,arguments)}function hg(i,e,t={}){const s=new he;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(c,p,v,x,G){const Z=new kh({next:be=>{p.enqueueAndForget(()=>Uf(c,se));const ot=be.docs.has(v);!ot&&be.fromCache?G.reject(new K(P.UNAVAILABLE,"Failed to get document because the client is offline.")):ot&&be.fromCache&&x&&"server"===x.source?G.reject(new K(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):G.resolve(be)},error:be=>G.reject(be)}),se=new Bf(Ga(v.path),Z,{includeMetadataChanges:!0,Du:!0});return Lf(c,se)}(yield pd(i),i.asyncQueue,e,t,s)})),s.promise}function fg(i,e,t={}){const s=new he;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function(c,p,v,x,G){const Z=new kh({next:be=>{p.enqueueAndForget(()=>Uf(c,se)),be.fromCache&&"server"===x.source?G.reject(new K(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):G.resolve(be)},error:be=>G.reject(be)}),se=new Bf(v,Z,{includeMetadataChanges:!0,Du:!0});return Lf(c,se)}(yield pd(i),i.asyncQueue,e,t,s)})),s.promise}const Wm=new Map;function pg(i,e,t){if(!t)throw new K(P.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function zm(i,e,t,s){if(!0===e&&!0===s)throw new K(P.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function Km(i){if(!Zt.isDocumentKey(i))throw new K(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function gg(i){if(Zt.isDocumentKey(i))throw new K(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Qf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":S()}function si(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new K(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Qf(i);throw new K(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function mg(i,e){if(e<=0)throw new K(P.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class Jf{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new K(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new K(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,zm("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,t,s){this._authCredentials=t,this._appCheckCredentials=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jf({}),this._settingsFrozen=!1,e instanceof nt?this._databaseId=e:(this._app=e,this._databaseId=function(c){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nt(c.options.projectId)}(e))}get app(){if(!this._app)throw new K(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new K(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jf(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new ft;switch(t.type){case"gapi":const s=t.client;return D(!("object"!=typeof s||null===s||!s.auth||!s.auth.getAuthHeaderValueForFirstParty)),new Vr(s,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new K(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wm.get(e);t&&(At("ComponentProvider","Removing Datastore"),Wm.delete(e),t.terminate())}(this),Promise.resolve()}}class Ss{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ss(this.firestore,e,this._key)}}class Va{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Va(this.firestore,e,this._query)}}class eu extends Va{constructor(e,t,s){super(e,t,Ga(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ss(this.firestore,null,new Zt(e))}withConverter(e){return new eu(this.firestore,e,this._path)}}function _g(i,e,...t){if(i=(0,Ge.m9)(i),pg("collection","path",e),i instanceof Xf){const s=Tr.fromString(e,...t);return gg(s),new eu(i,null,s)}{if(!(i instanceof Ss||i instanceof eu))throw new K(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Tr.fromString(e,...t));return gg(s),new eu(i.firestore,null,s)}}function nh(i,e,...t){if(i=(0,Ge.m9)(i),1===arguments.length&&(e=na.I()),pg("doc","path",e),i instanceof Xf){const s=Tr.fromString(e,...t);return Km(s),new Ss(i,null,new Zt(s))}{if(!(i instanceof Ss||i instanceof eu))throw new K(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Tr.fromString(e,...t));return Km(s),new Ss(i.firestore,i instanceof eu?i.converter:null,new Zt(s))}}function qm(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),(i instanceof Ss||i instanceof eu)&&(e instanceof Ss||e instanceof eu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Lh(i,e){return i=(0,Ge.m9)(i),e=(0,Ge.m9)(e),i instanceof Va&&e instanceof Va&&i.firestore===e.firestore&&jl(i._query,e._query)&&i.converter===e.converter}class ep{constructor(){this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new pm(this,"async_queue_retry"),this.Kc=()=>{const t=Rf();t&&At("AsyncQueue","Visibility state changed to "+t.visibilityState),this.So.Eo()};const e=Rf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Kc)}get isShuttingDown(){return this.Fc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Gc(),this.Qc(e)}enterRestrictedMode(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;const t=Rf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}enqueue(e){if(this.Gc(),this.Fc)return new Promise(()=>{});const t=new he;return this.Qc(()=>this.Fc&&this.Uc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Mc.push(e),this.jc()))}jc(){var e=this;return(0,xe.Z)(function*(){if(0!==e.Mc.length){try{yield e.Mc[0](),e.Mc.shift(),e.So.reset()}catch(t){if(!Do(t))throw t;At("AsyncQueue","Operation failed with retryable error: "+t)}e.Mc.length>0&&e.So.Io(()=>e.jc())}})()}Qc(e){const t=this.Oc.then(()=>(this.Lc=!0,e().catch(s=>{throw this.Bc=s,this.Lc=!1,gi("INTERNAL UNHANDLED ERROR: ",function(p){let v=p.message||"";return p.stack&&(v=p.stack.includes(p.message)?p.stack:p.message+"\n"+p.stack),v}(s)),s}).then(s=>(this.Lc=!1,s))));return this.Oc=t,t}enqueueAfterDelay(e,t,s){this.Gc(),this.qc.indexOf(e)>-1&&(t=0);const c=qp.createAndSchedule(this,e,t,s,p=>this.Wc(p));return this.$c.push(c),c}Gc(){this.Bc&&S()}verifyOperationInProgress(){}zc(){var e=this;return(0,xe.Z)(function*(){let t;do{t=e.Oc,yield t}while(t!==e.Oc)})()}Hc(e){for(const t of this.$c)if(t.timerId===e)return!0;return!1}Jc(e){return this.zc().then(()=>{this.$c.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.$c)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.zc()})}Yc(e){this.qc.push(e)}Wc(e){const t=this.$c.indexOf(e);this.$c.splice(t,1)}}function Vh(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const s=e;for(const c of["next","error","complete"])if(c in s&&"function"==typeof s[c])return!0;return!1}(i)}class c0{constructor(){this._progressObserver={},this._taskCompletionResolver=new he,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,s){this._progressObserver={next:e,error:t,complete:s}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ms extends Xf{constructor(e,t,s){super(e,t,s),this.type="firestore",this._queue=new ep,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||tp(this),this._firestoreClient.terminate()}}function go(i){return i._firestoreClient||tp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function tp(i){var e;const t=i._freezeSettings(),s=(p=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new $e(i._databaseId,p,i._persistenceKey,(x=t).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var p,x;i._firestoreClient=new C_(i._authCredentials,i._appCheckCredentials,i._queue,s)}function np(i,e,t){const s=new he;return i.asyncQueue.enqueue((0,xe.Z)(function*(){try{yield ag(i,t),yield Bm(i,e),s.resolve()}catch(c){const p=c;if(!("FirebaseError"===(v=p).name?v.code===P.FAILED_PRECONDITION||v.code===P.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw p;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+p),s.reject(p)}var v})).then(()=>s.promise)}function Eg(i){if(i._initialized||i._terminated)throw new K(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class kl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new K(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Uu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uu($i.fromBase64String(e))}catch(t){throw new K(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Uu($i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nc{constructor(e){this._methodName=e}}class Uh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rn(this._lat,e._lat)||Rn(this._long,e._long)}}const ry=/^__.*__$/;class iy{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return null!==this.fieldMask?new Ka(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ju(e,this.data,t,this.fieldTransforms)}}class wg{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ka(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ig(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw S()}}class Bh{constructor(e,t,s,c,p,v){this.settings=e,this.databaseId=t,this.wt=s,this.ignoreUndefinedProperties=c,void 0===p&&this.Xc(),this.fieldTransforms=p||[],this.fieldMask=v||[]}get path(){return this.settings.path}get Zc(){return this.settings.Zc}ta(e){return new Bh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ea(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ta({path:s,na:!1});return c.sa(e),c}ia(e){var t;const s=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.ta({path:s,na:!1});return c.Xc(),c}ra(e){return this.ta({path:void 0,na:!0})}oa(e){return $h(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.sa(this.path.get(e))}sa(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(Ig(this.Zc)&&ry.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}class sy{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.wt=s||Th(e)}aa(e,t,s,c=!1){return new Bh({Zc:e,methodName:t,ca:s,path:Xi.emptyPath(),na:!1,ua:c},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}function rh(i){const e=i._freezeSettings(),t=Th(i._databaseId);return new sy(i._databaseId,!!e.ignoreUndefinedProperties,t)}function rp(i,e,t,s,c,p={}){const v=i.aa(p.merge||p.mergeFields?2:0,e,t,c);Sg("Data must be an object, but it was:",v,s);const x=Tg(s,v);let G,Z;if(p.merge)G=new ls(v.fieldMask),Z=v.fieldTransforms;else if(p.mergeFields){const se=[];for(const be of p.mergeFields){const ot=Ag(e,be,t);if(!v.contains(ot))throw new K(P.INVALID_ARGUMENT,`Field '${ot}' is specified in your field mask but missing from your input data.`);L_(se,ot)||se.push(ot)}G=new ls(se),Z=v.fieldTransforms.filter(be=>G.covers(be.field))}else G=null,Z=v.fieldTransforms;return new iy(new Gs(x),G,Z)}class jh extends Nc{_toFieldTransform(e){if(2!==e.Zc)throw e.oa(1===e.Zc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function Cg(i,e,t){return new Bh({Zc:3,ca:e.settings.ca,methodName:i._methodName,na:t},e.databaseId,e.wt,e.ignoreUndefinedProperties)}class bg extends Nc{_toFieldTransform(e){return new xu(e.path,new za)}isEqual(e){return e instanceof bg}}class jo extends Nc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Cg(this,e,!0),s=this.ha.map(p=>Pc(p,t)),c=new wl(s);return new xu(e.path,c)}isEqual(e){return this===e}}class oy extends Nc{constructor(e,t){super(e),this.ha=t}_toFieldTransform(e){const t=Cg(this,e,!0),s=this.ha.map(p=>Pc(p,t)),c=new Au(s);return new xu(e.path,c)}isEqual(e){return this===e}}class F_ extends Nc{constructor(e,t){super(e),this.la=t}_toFieldTransform(e){const t=new Zu(e.wt,bd(e.wt,this.la));return new xu(e.path,t)}isEqual(e){return this===e}}function Dg(i,e,t,s){const c=i.aa(1,e,t);Sg("Data must be an object, but it was:",c,s);const p=[],v=Gs.empty();Na(s,(G,Z)=>{const se=sp(e,G,t);Z=(0,Ge.m9)(Z);const be=c.ia(se);if(Z instanceof jh)p.push(se);else{const ot=Pc(Z,be);null!=ot&&(p.push(se),v.set(se,ot))}});const x=new ls(p);return new wg(v,x,c.fieldTransforms)}function ip(i,e,t,s,c,p){const v=i.aa(1,e,t),x=[Ag(e,s,t)],G=[c];if(p.length%2!=0)throw new K(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let ot=0;ot<p.length;ot+=2)x.push(Ag(e,p[ot])),G.push(p[ot+1]);const Z=[],se=Gs.empty();for(let ot=x.length-1;ot>=0;--ot)if(!L_(Z,x[ot])){const vt=x[ot];let Rt=G[ot];Rt=(0,Ge.m9)(Rt);const vn=v.ia(vt);if(Rt instanceof jh)Z.push(vt);else{const Ln=Pc(Rt,vn);null!=Ln&&(Z.push(vt),se.set(vt,Ln))}}const be=new ls(Z);return new wg(se,be,v.fieldTransforms)}function ay(i,e,t,s=!1){return Pc(t,i.aa(s?4:3,e))}function Pc(i,e){if(gd(i=(0,Ge.m9)(i)))return Sg("Unsupported field value:",e,i),Tg(i,e);if(i instanceof Nc)return function(t,s){if(!Ig(s.Zc))throw s.oa(`${t._methodName}() can only be used with update() and set()`);if(!s.path)throw s.oa(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(s);c&&s.fieldTransforms.push(c)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,s){const c=[];let p=0;for(const v of t){let x=Pc(v,s.ra(p));null==x&&(x={nullValue:"NULL_VALUE"}),c.push(x),p++}return{arrayValue:{values:c}}}(i,e)}return function(t,s){if(null===(t=(0,Ge.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return bd(s.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=mi.fromDate(t);return{timestampValue:nl(s.wt,c)}}if(t instanceof mi){const c=new mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:nl(s.wt,c)}}if(t instanceof Uh)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Uu)return{bytesValue:_c(s.wt,t._byteString)};if(t instanceof Ss){const c=s.databaseId,p=t.firestore._databaseId;if(!p.isEqual(c))throw s.oa(`Document reference is for database ${p.projectId}/${p.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:td(t.firestore._databaseId||s.databaseId,t._key.path)}}throw s.oa(`Unsupported field value: ${Qf(t)}`)}(i,e)}function Tg(i,e){const t={};return ma(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Na(i,(s,c)=>{const p=Pc(c,e.ea(s));null!=p&&(t[s]=p)}),{mapValue:{fields:t}}}function gd(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof mi||i instanceof Uh||i instanceof Uu||i instanceof Ss||i instanceof Nc)}function Sg(i,e,t){if(!gd(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const s=Qf(t);throw e.oa("an object"===s?i+" a custom object":i+" "+s)}var s}function Ag(i,e,t){if((e=(0,Ge.m9)(e))instanceof kl)return e._internalPath;if("string"==typeof e)return sp(i,e);throw $h("Field path arguments must be of type string or ",i,!1,void 0,t)}const uy=new RegExp("[~\\*/\\[\\]]");function sp(i,e,t){if(e.search(uy)>=0)throw $h(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new kl(...e.split("."))._internalPath}catch(s){throw $h(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function $h(i,e,t,s,c){const p=s&&!s.isEmpty(),v=void 0!==c;let x=`Function ${e}() called with invalid data`;t&&(x+=" (via `toFirestore()`)"),x+=". ";let G="";return(p||v)&&(G+=" (found",p&&(G+=` in field ${s}`),v&&(G+=` in document ${c}`),G+=")"),new K(P.INVALID_ARGUMENT,x+i+G)}function L_(i,e){return i.some(t=>t.isEqual(e))}class ih{constructor(e,t,s,c,p){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=c,this._converter=p}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xg extends ih{data(){return super.data()}}function pu(i,e){return"string"==typeof e?sp(i,e):e instanceof kl?e._internalPath:e._delegate._internalPath}class md{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tc extends ih{constructor(e,t,s,c,p,v){super(e,t,s,c,v),this._firestore=e,this._firestoreImpl=e,this.metadata=p}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new tu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(pu("DocumentSnapshot.get",e));if(null!==s)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class tu extends tc{data(e={}){return super.data(e)}}class Zo{constructor(e,t,s,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new md(c.hasPendingWrites,c.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new tu(this._firestore,this._userDataWriter,s.key,s,new md(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,c){if(s._snapshot.oldDocs.isEmpty()){let p=0;return s._snapshot.docChanges.map(v=>({type:"added",doc:new tu(s._firestore,s._userDataWriter,v.doc.key,v.doc,new md(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:p++}))}{let p=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(v=>c||3!==v.type).map(v=>{const x=new tu(s._firestore,s._userDataWriter,v.doc.key,v.doc,new md(s._snapshot.mutatedKeys.has(v.doc.key),s._snapshot.fromCache),s.query.converter);let G=-1,Z=-1;return 0!==v.type&&(G=p.indexOf(v.doc.key),p=p.delete(v.doc.key)),1!==v.type&&(p=p.add(v.doc),Z=p.indexOf(v.doc.key)),{type:sl(v.type),doc:x,oldIndex:G,newIndex:Z}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function sl(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return S()}}function Rg(i,e){return i instanceof tc&&e instanceof tc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Zo&&e instanceof Zo&&i._firestore===e._firestore&&Lh(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function Mg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new K(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Hh{}function Oc(i,...e){for(const t of e)i=t._apply(i);return i}class V_ extends Hh{constructor(e,t,s){super(),this.fa=e,this.da=t,this._a=s,this.type="where"}_apply(e){const t=rh(e.firestore),s=function(c,p,v,x,G,Z,se){let be;if(G.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new K(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){Og(se,Z);const vt=[];for(const Rt of se)vt.push(Wh(x,c,Rt));be={arrayValue:{values:vt}}}else be=Wh(x,c,se)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||Og(se,Z),be=ay(v,"where",se,"in"===Z||"not-in"===Z);const ot=es.create(G,Z,be);return function(vt,Rt){if(Rt.ht()){const Ln=Bl(vt);if(null!==Ln&&!Ln.isEqual(Rt.field))throw new K(P.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ln.toString()}' and '${Rt.field.toString()}'`);const Oi=Lo(vt);null!==Oi&&kg(0,Rt.field,Oi)}const vn=function(Ln,Oi){for(const As of Ln.filters)if(Oi.indexOf(As.op)>=0)return As.op;return null}(vt,function(Ln){switch(Ln){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Rt.op));if(null!==vn)throw new K(P.INVALID_ARGUMENT,vn===Rt.op?`Invalid query. You cannot use more than one '${Rt.op.toString()}' filter.`:`Invalid query. You cannot use '${Rt.op.toString()}' filters with '${vn.toString()}' filters.`)}(c,ot),ot}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new Va(e.firestore,e.converter,function(c,p){const v=c.filters.concat([p]);return new Ea(c.path,c.collectionGroup,c.explicitOrderBy.slice(),v,c.limit,c.limitType,c.startAt,c.endAt)}(e._query,s))}}class Ng extends Hh{constructor(e,t){super(),this.fa=e,this.wa=t,this.type="orderBy"}_apply(e){const t=function(s,c,p){if(null!==s.startAt)throw new K(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new K(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new Fo(c,p);return function(x,G){if(null===Lo(x)){const Z=Bl(x);null!==Z&&kg(0,Z,G.field)}}(s,v),v}(e._query,this.fa,this.wa);return new Va(e.firestore,e.converter,function(s,c){const p=s.explicitOrderBy.concat([c]);return new Ea(s.path,s.collectionGroup,p,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}class ly extends Hh{constructor(e,t,s){super(),this.type=e,this.ma=t,this.ga=s}_apply(e){return new Va(e.firestore,e.converter,oa(e._query,this.ma,this.ga))}}class Pg extends Hh{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=ap(e,this.type,this.ya,this.pa);return new Va(e.firestore,e.converter,(c=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,c,s.endAt)));var s,c}}class hy extends Hh{constructor(e,t,s){super(),this.type=e,this.ya=t,this.pa=s}_apply(e){const t=ap(e,this.type,this.ya,this.pa);return new Va(e.firestore,e.converter,(c=t,new Ea((s=e._query).path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,c)));var s,c}}function ap(i,e,t,s){if(t[0]=(0,Ge.m9)(t[0]),t[0]instanceof ih)return function(c,p,v,x,G){if(!x)throw new K(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const Z=[];for(const se of Wa(c))if(se.field.isKeyField())Z.push($s(p,x.key));else{const be=x.data.field(se.field);if(j(be))throw new K(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+se.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===be){const ot=se.field.canonicalString();throw new K(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${ot}' (used as the orderBy) does not exist.`)}Z.push(be)}return new _a(Z,G)}(i._query,i.firestore._databaseId,e,t[0]._document,s);{const c=rh(i.firestore);return function(p,v,x,G,Z,se){const be=p.explicitOrderBy;if(Z.length>be.length)throw new K(P.INVALID_ARGUMENT,`Too many arguments provided to ${G}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const ot=[];for(let vt=0;vt<Z.length;vt++){const Rt=Z[vt];if(be[vt].field.isKeyField()){if("string"!=typeof Rt)throw new K(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${G}(), but got a ${typeof Rt}`);if(!lc(p)&&-1!==Rt.indexOf("/"))throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${G}() must be a plain document ID, but '${Rt}' contains a slash.`);const vn=p.path.child(Tr.fromString(Rt));if(!Zt.isDocumentKey(vn))throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${G}() must result in a valid document path, but '${vn}' is not because it contains an odd number of segments.`);const Ln=new Zt(vn);ot.push($s(v,Ln))}else{const vn=ay(x,G,Rt);ot.push(vn)}}return new _a(ot,se)}(i._query,i.firestore._databaseId,c,e,t,s)}}function Wh(i,e,t){if("string"==typeof(t=(0,Ge.m9)(t))){if(""===t)throw new K(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lc(e)&&-1!==t.indexOf("/"))throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Tr.fromString(t));if(!Zt.isDocumentKey(s))throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $s(i,new Zt(s))}if(t instanceof Ss)return $s(i,t._key);throw new K(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qf(t)}.`)}function Og(i,e){if(!Array.isArray(i)||0===i.length)throw new K(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new K(P.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function kg(i,e,t){if(!t.isEqual(e))throw new K(P.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const gy={maxAttempts:5};class up{convertValue(e,t="none"){switch(Cn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(F(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw S()}}convertObject(e,t){const s={};return Na(e.fields,(c,p)=>{s[c]=this.convertValue(p,t)}),s}convertGeoPoint(e){return new Uh(Yi(e.latitude),Yi(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=X(e);return null==s?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(me(e));default:return null}}convertTimestamp(e){const t=Bs(e);return new mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Tr.fromString(e);D(nd(s));const c=new nt(s.get(1),s.get(3)),p=new Zt(s.popFirst(5));return c.isEqual(t)||gi(`Document ${p} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),p}}function zh(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class my extends up{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,t)}}class Fg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=rh(e)}set(e,t,s){this._verifyNotCommitted();const c=nc(e,this._firestore),p=zh(c.converter,t,s),v=rp(this._dataReader,"WriteBatch.set",c._key,p,null!==c.converter,s);return this._mutations.push(v.toMutation(c._key,li.none())),this}update(e,t,s,...c){this._verifyNotCommitted();const p=nc(e,this._firestore);let v;return v="string"==typeof(t=(0,Ge.m9)(t))||t instanceof kl?ip(this._dataReader,"WriteBatch.update",p._key,t,s,c):Dg(this._dataReader,"WriteBatch.update",p._key,t),this._mutations.push(v.toMutation(p._key,li.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=nc(e,this._firestore);return this._mutations=this._mutations.concat(new Mu(t._key,li.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function nc(i,e){if((i=(0,Ge.m9)(i)).firestore!==e)throw new K(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class yd extends up{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,t)}}function yy(i,e,t){i=si(i,Ss);const s=si(i.firestore,ms),c=zh(i.converter,e,t);return sh(s,[rp(rh(s),"setDoc",i._key,c,null!==i.converter,t).toMutation(i._key,li.none())])}function _y(i,e,t,...s){i=si(i,Ss);const c=si(i.firestore,ms),p=rh(c);let v;return v="string"==typeof(e=(0,Ge.m9)(e))||e instanceof kl?ip(p,"updateDoc",i._key,e,t,s):Dg(p,"updateDoc",i._key,e),sh(c,[v.toMutation(i._key,li.exists(!0))])}function vy(i,...e){var t,s,c;i=(0,Ge.m9)(i);let p={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||Vh(e[v])||(p=e[v],v++);const x={includeMetadataChanges:p.includeMetadataChanges};if(Vh(e[v])){const be=e[v];e[v]=null===(t=be.next)||void 0===t?void 0:t.bind(be),e[v+1]=null===(s=be.error)||void 0===s?void 0:s.bind(be),e[v+2]=null===(c=be.complete)||void 0===c?void 0:c.bind(be)}let G,Z,se;if(i instanceof Ss)Z=si(i.firestore,ms),se=Ga(i._key.path),G={next:be=>{e[v]&&e[v](Lg(Z,i,be))},error:e[v+1],complete:e[v+2]};else{const be=si(i,Va);Z=si(be.firestore,ms),se=be._query;const ot=new yd(Z);G={next:vt=>{e[v]&&e[v](new Zo(Z,ot,be,vt))},error:e[v+1],complete:e[v+2]},Mg(i._query)}return function(be,ot,vt,Rt){const vn=new kh(Rt),Ln=new Bf(ot,vn,vt);return be.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Lf(yield pd(be),Ln)})),()=>{vn.Tc(),be.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return Uf(yield pd(be),Ln)}))}}(go(Z),se,x,G)}function sh(i,e){return function(t,s){const c=new he;return t.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function Nm(i,e,t){return Xp.apply(this,arguments)}(yield dg(t),s,c)})),c.promise}(go(i),e)}function Lg(i,e,t){const s=t.docs.get(e._key),c=new yd(i);return new tc(i,c,e._key,s,new md(t.hasPendingWrites,t.fromCache),e.converter)}class Y_ extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=rh(e)}get(e){const t=nc(e,this._firestore),s=new my(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return S();const p=c[0];if(p.isFoundDocument())return new ih(this._firestore,s,p.key,p,t.converter);if(p.isNoDocument())return new ih(this._firestore,s,t._key,null,t.converter);throw S()})}set(e,t,s){const c=nc(e,this._firestore),p=zh(c.converter,t,s),v=rp(this._dataReader,"Transaction.set",c._key,p,null!==c.converter,s);return this._transaction.set(c._key,v),this}update(e,t,s,...c){const p=nc(e,this._firestore);let v;return v="string"==typeof(t=(0,Ge.m9)(t))||t instanceof kl?ip(this._dataReader,"Transaction.update",p._key,t,s,c):Dg(this._dataReader,"Transaction.update",p._key,t),this._transaction.update(p._key,v),this}delete(e){const t=nc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=nc(e,this._firestore),s=new yd(this._firestore);return super.get(e).then(c=>new tc(this._firestore,s,t._key,c._document,new md(!1,!1),t.converter))}}function lp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new K("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Ug(){if("undefined"==typeof Uint8Array)throw new K("unimplemented","Uint8Arrays are not available in this environment.")}function kc(){if(!function $c(){return"undefined"!=typeof atob}())throw new K("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){bo=kt.SDK_VERSION,(0,kt._registerComponent)(new ht.wA("firestore",(t,{options:s})=>{const c=t.getProvider("app").getImmediate(),p=new ms(c,new dr(t.getProvider("auth-internal")),new Xs(t.getProvider("app-check-internal")));return s=Object.assign({useFetchStreams:e},s),p._setSettings(s),p},"PUBLIC")),(0,kt.registerVersion)(Js,"3.4.11",i),(0,kt.registerVersion)(Js,"3.4.11","esm2017")}();class Kh{constructor(e){this._delegate=e}static fromBase64String(e){return kc(),new Kh(Uu.fromBase64String(e))}static fromUint8Array(e){return Ug(),new Kh(Uu.fromUint8Array(e))}toBase64(){return kc(),this._delegate.toBase64()}toUint8Array(){return Ug(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Bg(i){return function oh(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const s of e)if(s in t&&"function"==typeof t[s])return!0;return!1}(i,["next","error","complete"])}class d0{enableIndexedDbPersistence(e,t){return function Ym(i,e){Eg(i=si(i,ms));const t=go(i),s=i._freezeSettings(),c=new sg;return np(t,c,new Lm(c,s.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Qm(i){Eg(i=si(i,ms));const e=go(i),t=i._freezeSettings(),s=new sg;return np(e,s,new Vm(s,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Jm(i){if(i._initialized&&!i._terminated)throw new K(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new he;return i._queue.enqueueAndForgetEvenWhileRestricted((0,xe.Z)(function*(){try{yield(t=(0,xe.Z)(function*(s){if(!Us.V())return Promise.resolve();const c=s+"main";yield Us.delete(c)}),function(s){return t.apply(this,arguments)})(xp(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class cp{constructor(e,t,s){this._delegate=t,this._persistenceProvider=s,this.INTERNAL={delete:()=>this.terminate()},e instanceof nt||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ho("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,s={}){!function yg(i,e,t,s={}){var c;const p=(i=si(i,Xf))._getSettings();if("firestore.googleapis.com"!==p.host&&p.host!==e&&Ho("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},p),{host:`${e}:${t}`,ssl:!1})),s.mockUserToken){let v,x;if("string"==typeof s.mockUserToken)v=s.mockUserToken,x=Ji.MOCK_USER;else{v=(0,Ge.Sg)(s.mockUserToken,null===(c=i._app)||void 0===c?void 0:c.options.projectId);const G=s.mockUserToken.sub||s.mockUserToken.user_id;if(!G)throw new K(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new Ji(G)}i._authCredentials=new Xt(new Te(v,x))}}(this._delegate,e,t,s)}enableNetwork(){return function Xm(i){return function T_(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield b_(i),t=yield D_(i);return e.setNetworkEnabled(!0),function(s){const c=N(s);return c.lu.delete(0),Sh(c)}(t)}))}(go(i=si(i,ms)))}(this._delegate)}disableNetwork(){return function ey(i){return function th(i){return i.asyncQueue.enqueue((0,xe.Z)(function*(){const e=yield b_(i),t=yield D_(i);return e.setNetworkEnabled(!1),(s=(0,xe.Z)(function*(c){const p=N(c);p.lu.add(0),yield Dc(p),p._u.set("Offline")}),function(c){return s.apply(this,arguments)})(t);var s}))}(go(i=si(i,ms)))}(this._delegate)}enablePersistence(e){let t=!1,s=!1;return e&&(t=!!e.synchronizeTabs,s=!!e.experimentalForceOwningTab,zm("synchronizeTabs",t,"experimentalForceOwningTab",s)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,s)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function P_(i){return function(e){const t=new he;return e.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return function v_(i,e){return ng.apply(this,arguments)}(yield dg(e),t)})),t.promise}(go(i=si(i,ms)))}(this._delegate)}onSnapshotsInSync(e){return function Z_(i,e){return function Yf(i,e){const t=new kh(e);return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield pd(i),c=t,N(s).Tu.add(c),void c.next();var s,c})),()=>{t.Tc(),i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return s=yield pd(i),c=t,void N(s).Tu.delete(c);var s,c}))}}(go(i=si(i,ms)),Vh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new K("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new _d(this,_g(this._delegate,e))}catch(t){throw Ua(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bu(this,nh(this._delegate,e))}catch(t){throw Ua(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yo(this,function vg(i,e){if(i=si(i,Xf),pg("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K(P.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Va(i,null,(t=e,new Ea(Tr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ua(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Q_(i,e,t){i=si(i,ms);const s=Object.assign(Object.assign({},gy),t);return function(c){if(c.maxAttempts<1)throw new K(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function x_(i,e,t){const s=new he;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){const c=yield(p=i,eh(p).then(v=>v.datastore));var p;new Um(i.asyncQueue,c,t,e,s).run()})),s.promise}(go(i),c=>e(new Y_(i,c)),s)}(this._delegate,t=>e(new $g(this,t)))}batch(){return go(this._delegate),new tv(new Fg(this._delegate,e=>sh(this._delegate,e)))}loadBundle(e){return function ny(i,e){const t=go(i=si(i,ms)),s=new c0;return function Gm(i,e,t,s){const c=function(p,v){let x;return x="string"==typeof p?(new TextEncoder).encode(p):p,G=function(G,Z){if(G instanceof Uint8Array)return og(G,Z);if(G instanceof ArrayBuffer)return og(new Uint8Array(G),Z);if(G instanceof ReadableStream)return G.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new w_(G,v);var G}(t,Th(e));i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){!function Fm(i,e,t){const s=N(i);var c;(c=(0,xe.Z)(function*(p,v,x){try{const G=yield v.getMetadata();if(yield function(ot,vt){const Rt=N(ot),vn=bs(vt.createTime);return Rt.persistence.runTransaction("hasNewerBundle","readonly",Ln=>Rt.Ds.getBundleMetadata(Ln,vt.id)).then(Ln=>!!Ln&&Ln.createTime.compareTo(vn)>=0)}(p.localStore,G))return yield v.close(),x._completeWith({taskState:"Success",documentsLoaded:(ot=G).totalDocuments,bytesLoaded:ot.totalBytes,totalDocuments:ot.totalDocuments,totalBytes:ot.totalBytes}),Promise.resolve(new Set);x._updateProgress(Tm(G));const Z=new d_(G,p.localStore,v.wt);let se=yield v.fc();for(;se;){const ot=yield Z.Nu(se);ot&&x._updateProgress(ot),se=yield v.fc()}const be=yield Z.complete();return yield qo(p,be.Mu,void 0),yield function(ot,vt){const Rt=N(ot);return Rt.persistence.runTransaction("Save bundle","readwrite",vn=>Rt.Ds.saveBundleMetadata(vn,vt))}(p.localStore,G),x._completeWith(be.progress),Promise.resolve(be.Ou)}catch(G){return Ho("SyncEngine",`Loading bundle failed with ${G}`),x._failWith(G),Promise.resolve(new Set)}var ot}),function(p,v,x){return c.apply(this,arguments)})(s,e,t).then(c=>{s.sharedClientState.notifyBundleLoaded(c)})}(yield dg(i),c,s)}))}(t,i._databaseId,e,s),s}(this._delegate,e)}namedQuery(e){return function O_(i,e){return function R_(i,e){return i.asyncQueue.enqueue((0,xe.Z)(function*(){return function(t,s){const c=N(t);return c.persistence.runTransaction("Get named query","readonly",p=>c.Ds.getNamedQuery(p,s))}(yield $m(i),e)}))}(go(i=si(i,ms)),e).then(t=>t?new Va(i,null,t.query):null)}(this._delegate,e).then(t=>t?new Yo(this,t):null)}}class jg extends up{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kh(new Uu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Bu.forKey(t,this.firestore,null)}}class $g{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jg(e)}get(e){const t=vd(e);return this._delegate.get(t).then(s=>new Zh(this._firestore,new tc(this._firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,t.converter)))}set(e,t,s){const c=vd(e);return s?(lp("Transaction.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const p=vd(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,s,...c),this}delete(e){const t=vd(e);return this._delegate.delete(t),this}}class tv{constructor(e){this._delegate=e}set(e,t,s){const c=vd(e);return s?(lp("WriteBatch.set",s),this._delegate.set(c,t,s)):this._delegate.set(c,t),this}update(e,t,s,...c){const p=vd(e);return 2===arguments.length?this._delegate.update(p,t):this._delegate.update(p,t,s,...c),this}delete(e){const t=vd(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Un{constructor(e,t,s){this._firestore=e,this._userDataWriter=t,this._delegate=s}fromFirestore(e,t){const s=new tu(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Fc(this._firestore,s),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const s=Un.INSTANCES;let c=s.get(e);c||(c=new WeakMap,s.set(e,c));let p=c.get(t);return p||(p=new Un(e,new jg(e),t),c.set(t,p)),p}}Un.INSTANCES=new WeakMap;class Bu{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jg(e)}static forPath(e,t,s){if(e.length%2!=0)throw new K("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Bu(t,new Ss(t._delegate,s,new Zt(e)))}static forKey(e,t,s){return new Bu(t,new Ss(t._delegate,s,e))}get id(){return this._delegate.id}get parent(){return new _d(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new _d(this.firestore,_g(this._delegate,e))}catch(t){throw Ua(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Ge.m9)(e))instanceof Ss&&qm(this._delegate,e)}set(e,t){t=lp("DocumentReference.set",t);try{return t?yy(this._delegate,e,t):yy(this._delegate,e)}catch(s){throw Ua(s,"setDoc()","DocumentReference.set()")}}update(e,t,...s){try{return 1===arguments.length?_y(this._delegate,e):_y(this._delegate,e,t,...s)}catch(c){throw Ua(c,"updateDoc()","DocumentReference.update()")}}delete(){return function K_(i){return sh(si(i.firestore,ms),[new Mu(i._key,li.none())])}(this._delegate)}onSnapshot(...e){const t=Sy(e),s=qh(e,c=>new Zh(this.firestore,new tc(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return vy(this._delegate,t,s)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $_(i){i=si(i,Ss);const e=si(i.firestore,ms),t=go(e),s=new yd(e);return function S_(i,e){const t=new he;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(c,p,v){try{const x=yield function(G,Z){const se=N(G);return se.persistence.runTransaction("read document","readonly",be=>se.localDocuments.getDocument(be,Z))}(c,p);x.isFoundDocument()?v.resolve(x):x.isNoDocument()?v.resolve(null):v.reject(new K(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const G=zd(x,`Failed to get document '${p} from cache`);v.reject(G)}}),function(c,p,v){return s.apply(this,arguments)})(yield $m(i),e,t);var s})),t.promise}(t,i._key).then(c=>new tc(e,s,i._key,c,new md(null!==c&&c.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function H_(i){i=si(i,Ss);const e=si(i.firestore,ms);return hg(go(e),i._key,{source:"server"}).then(t=>Lg(e,i,t))}(this._delegate):function j_(i){i=si(i,Ss);const e=si(i.firestore,ms);return hg(go(e),i._key).then(t=>Lg(e,i,t))}(this._delegate),t.then(s=>new Zh(this.firestore,new tc(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)))}withConverter(e){return new Bu(this.firestore,this._delegate.withConverter(e?Un.getInstance(this.firestore,e):null))}}function Ua(i,e,t){return i.message=i.message.replace(e,t),i}function Sy(i){for(const e of i)if("object"==typeof e&&!Bg(e))return e;return{}}function qh(i,e){var t,s;let c;return c=Bg(i[0])?i[0]:Bg(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:p=>{c.next&&c.next(e(p))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(s=c.complete)||void 0===s?void 0:s.bind(c)}}class Zh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bu(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Rg(this._delegate,e._delegate)}}class Fc extends Zh{data(e){const t=this._delegate.data(e);return function b(i,e){i||S()}(void 0!==t),t}}class Yo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jg(e)}where(e,t,s){try{return new Yo(this.firestore,Oc(this._delegate,function U_(i,e,t){const s=e,c=pu("where",i);return new V_(c,s,t)}(e,t,s)))}catch(c){throw Ua(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yo(this.firestore,Oc(this._delegate,function Gh(i,e="asc"){const t=e,s=pu("orderBy",i);return new Ng(s,t)}(e,t)))}catch(s){throw Ua(s,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yo(this.firestore,Oc(this._delegate,function cy(i){return mg("limit",i),new ly("limit",i,"F")}(e)))}catch(t){throw Ua(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yo(this.firestore,Oc(this._delegate,function B_(i){return mg("limitToLast",i),new ly("limitToLast",i,"L")}(e)))}catch(t){throw Ua(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yo(this.firestore,Oc(this._delegate,function dy(...i){return new Pg("startAt",i,!0)}(...e)))}catch(t){throw Ua(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yo(this.firestore,Oc(this._delegate,function op(...i){return new Pg("startAfter",i,!1)}(...e)))}catch(t){throw Ua(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yo(this.firestore,Oc(this._delegate,function fy(...i){return new hy("endBefore",i,!1)}(...e)))}catch(t){throw Ua(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yo(this.firestore,Oc(this._delegate,function py(...i){return new hy("endAt",i,!0)}(...e)))}catch(t){throw Ua(t,"endAt()","Query.endAt()")}}isEqual(e){return Lh(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function W_(i){i=si(i,Va);const e=si(i.firestore,ms),t=go(e),s=new yd(e);return function A_(i,e){const t=new he;return i.asyncQueue.enqueueAndForget((0,xe.Z)(function*(){return(s=(0,xe.Z)(function*(c,p,v){try{const x=yield If(c,p,!0),G=new jf(p,x.ji),Z=G.Ku(x.documents),se=G.applyChanges(Z,!1);v.resolve(se.snapshot)}catch(x){const G=zd(x,`Failed to execute query '${p} against cache`);v.reject(G)}}),function(c,p,v){return s.apply(this,arguments)})(yield $m(i),e,t);var s})),t.promise}(t,i._query).then(c=>new Zo(e,s,i,c))}(this._delegate):"server"===(null==e?void 0:e.source)?function z_(i){i=si(i,Va);const e=si(i.firestore,ms),t=go(e),s=new yd(e);return fg(t,i._query,{source:"server"}).then(c=>new Zo(e,s,i,c))}(this._delegate):function G_(i){i=si(i,Va);const e=si(i.firestore,ms),t=go(e),s=new yd(e);return Mg(i._query),fg(t,i._query).then(c=>new Zo(e,s,i,c))}(this._delegate),t.then(s=>new Ay(this.firestore,new Zo(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)))}onSnapshot(...e){const t=Sy(e),s=qh(e,c=>new Ay(this.firestore,new Zo(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return vy(this._delegate,t,s)}withConverter(e){return new Yo(this.firestore,this._delegate.withConverter(e?Un.getInstance(this.firestore,e):null))}}class eo{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Fc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ay{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Fc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new eo(this._firestore,t))}forEach(e,t){this._delegate.forEach(s=>{e.call(t,new Fc(this._firestore,s))})}isEqual(e){return Rg(this._delegate,e._delegate)}}class _d extends Yo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Bu(this.firestore,e):null}doc(e){try{return new Bu(this.firestore,void 0===e?nh(this._delegate):nh(this._delegate,e))}catch(t){throw Ua(t,"doc()","CollectionReference.doc()")}}add(e){return function q_(i,e){const t=si(i.firestore,ms),s=nh(i),c=zh(i.converter,e);return sh(t,[rp(rh(i.firestore),"addDoc",s._key,c,null!==i.converter,{}).toMutation(s._key,li.exists(!1))]).then(()=>s)}(this._delegate,e).then(t=>new Bu(this.firestore,t))}isEqual(e){return qm(this._delegate,e._delegate)}withConverter(e){return new _d(this.firestore,this._delegate.withConverter(e?Un.getInstance(this.firestore,e):null))}}function vd(i){return si(i,Ss)}class Hg{constructor(...e){this._delegate=new kl(...e)}static documentId(){return new Hg(Xi.keyField().canonicalString())}isEqual(e){return(e=(0,Ge.m9)(e))instanceof kl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Lc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Ey(){return new bg("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Lc(e)}static delete(){const e=function J_(){return new jh("deleteField")}();return e._methodName="FieldValue.delete",new Lc(e)}static arrayUnion(...e){const t=function wy(...i){return new jo("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new Lc(t)}static arrayRemove(...e){const t=function Iy(...i){return new oy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new Lc(t)}static increment(e){const t=function Cy(i){return new F_("increment",i)}(e);return t._methodName="FieldValue.increment",new Lc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const xy={Firestore:cp,GeoPoint:Uh,Timestamp:mi,Blob:Kh,Transaction:$g,WriteBatch:tv,DocumentReference:Bu,DocumentSnapshot:Zh,Query:Yo,QueryDocumentSnapshot:Fc,QuerySnapshot:Ay,CollectionReference:_d,FieldPath:Hg,FieldValue:Lc,setLogLevel:function Ty(i){!function dl(i){ea.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function My(i){(function Ry(i,e){i.INTERNAL.registerComponent(new ht.wA("firestore-compat",t=>{const s=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(s,c)},"PUBLIC").setServiceProps(Object.assign({},xy)))})(i,(e,t)=>new cp(e,t,new d0)),i.registerVersion("@firebase/firestore-compat","0.1.20")}(pt.Z);var Vc=B(1205),nv=B(440),rv=B(127);function Ny(i,e){return function Yh(i,e=te.z){return new ie.y(t=>{let s;return null!=e?e.schedule(()=>{s=i.onSnapshot({includeMetadataChanges:!0},t)}):s=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=s&&s()}})}(i,e)}function Gg(i,e){return Ny(i,e).pipe((0,oe.U)(t=>({payload:t,type:"query"})))}function Ed(i,e){return Gg(i,e).pipe((0,ce.O)(void 0),Ue(),(0,oe.U)(([t,s])=>{const c=s.payload.docChanges(),p=c.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(s.payload.metadata)&&s.payload.docs.forEach((v,x)=>{const G=c.find(se=>se.doc.ref.isEqual(v.ref)),Z=null==t?void 0:t.payload.docs.find(se=>se.ref.isEqual(v.ref));G&&JSON.stringify(G.doc.metadata)===JSON.stringify(v.metadata)||!G&&Z&&JSON.stringify(Z.metadata)===JSON.stringify(v.metadata)||p.push({type:"modified",payload:{oldIndex:x,newIndex:x,type:"modified",doc:v}})}),p}))}function Wg(i,e,t){return Ed(i,t).pipe((0,Ne.R)((s,c)=>function Py(i,e,t){return e.forEach(s=>{t.indexOf(s.type)>-1&&(i=function sv(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return dp(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return dp(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return dp(i,e.oldIndex,1)}return i}(i,s))}),i}(s,c.map(p=>p.payload),e),[]),(0,Tt.x)(),(0,oe.U)(s=>s.map(c=>({type:c.type,payload:c}))))}function dp(i,e,t,...s){const c=i.slice();return c.splice(e,t,...s),c}function ah(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class uh{constructor(e,t,s){this.ref=e,this.query=t,this.afs=s}stateChanges(e){let t=Ed(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,oe.U)(s=>s.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,ce.O)(void 0),Ue(),(0,at.h)(([s,c])=>c.length>0||!s),(0,oe.U)(([s,c])=>c),Re.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ne.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=ah(e);return Wg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Re.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,oe.U)(t=>t.payload.docs.map(s=>e.idField?Object.assign(Object.assign({},s.data()),{[e.idField]:s.id}):s.data())),Re.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(Re.iC)}add(e){return this.ref.add(e)}doc(e){return new Oy(this.ref.doc(e),this.afs)}}class Oy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const s=this.ref.collection(e),{ref:c,query:p}=Vy(s,t);return new uh(c,p,this.afs)}snapshotChanges(){return function iv(i,e){return Ny(i,e).pipe((0,ce.O)(void 0),Ue(),(0,oe.U)(([t,s])=>s.exists?(null==t?void 0:t.exists)?{payload:s,type:"modified"}:{payload:s,type:"added"}:{payload:s,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Re.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,oe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Se.D)(this.ref.get(e)).pipe(Re.iC)}}class ov{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Ed(this.query,this.afs.schedulers.outsideAngular).pipe((0,oe.U)(t=>t.filter(s=>e.indexOf(s.type)>-1)),(0,at.h)(t=>t.length>0),Re.iC):Ed(this.query,this.afs.schedulers.outsideAngular).pipe(Re.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ne.R)((t,s)=>[...t,...s],[]))}snapshotChanges(e){const t=ah(e);return Wg(this.query,t,this.afs.schedulers.outsideAngular).pipe(Re.iC)}valueChanges(e={}){return Gg(this.query,this.afs.schedulers.outsideAngular).pipe((0,oe.U)(s=>s.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Re.iC)}get(e){return(0,Se.D)(this.query.get(e)).pipe(Re.iC)}}const ky=new _.OlP("angularfire2.enableFirestorePersistence"),zg=new _.OlP("angularfire2.firestore.persistenceSettings"),Fy=new _.OlP("angularfire2.firestore.settings"),Ly=new _.OlP("angularfire2.firestore.use-emulator");function Vy(i,e=(t=>t)){return{query:e(i),ref:i}}let Kg=(()=>{class i{constructor(t,s,c,p,v,x,G,Z,se,be,ot,vt,Rt,vn,Ln,Oi,As){this.schedulers=G;const Ei=(0,Xe.on)(t,x,s),xo=se;be&&(0,Vc.nw)(Ei,x,ot,Rt,vn,Ln,vt,Oi),[this.firestore,this.persistenceEnabled$]=(0,Xe.cc)(`${Ei.name}.firestore`,"AngularFirestore",Ei.name,()=>{const ys=x.runOutsideAngular(()=>Ei.firestore());if(p&&ys.settings(p),xo&&ys.useEmulator(...xo),c&&!(0,gt.PM)(v)){const Ws=()=>{try{return(0,Se.D)(ys.enablePersistence(Z||void 0).then(()=>!0,()=>!1))}catch(ca){return"undefined"!=typeof console&&console.warn(ca),(0,De.of)(!1)}};return[ys,x.runOutsideAngular(Ws)]}return[ys,(0,De.of)(!1)]},[p,xo,c])}collection(t,s){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:p,query:v}=Vy(c,s),x=this.schedulers.ngZone.run(()=>p);return new uh(x,v,this)}collectionGroup(t,s){const c=s||(v=>v),p=this.firestore.collectionGroup(t);return new ov(c(p),this)}doc(t){let s;s="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>s);return new Oy(c,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(_.LFG(Xe.Dh),_.LFG(Xe.xv,8),_.LFG(ky,8),_.LFG(Fy,8),_.LFG(_.Lbi),_.LFG(_.R0b),_.LFG(Re.HU),_.LFG(zg,8),_.LFG(Ly,8),_.LFG(Vc.zQ,8),_.LFG(Vc.Qv,8),_.LFG(Vc.L6,8),_.LFG(Vc._Q,8),_.LFG(Vc.rT,8),_.LFG(Vc.lh,8),_.LFG(Vc.f7,8),_.LFG(nv.nm,8))},i.\u0275prov=_.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),av=(()=>{class i{constructor(){rv.Z.registerVersion("angularfire",Re.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:i,providers:[{provide:ky,useValue:!0},{provide:zg,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=_.oAB({type:i}),i.\u0275inj=_.cJS({providers:[Kg]}),i})()},2084:(Ot,We,B)=>{B.d(We,{TE:()=>k});var _=B(8306),te=B(9646),ie=B(8996),Se=B(4986),De=B(4482),Re=B(5403),Me=B(4004),Ue=B(3900),ce=B(5813),oe=B(5e3),Ne=B(2011),Tt=B(3942),at=B(5861),Xe=B(9681),gt=B(2090),tt=B(4859);const pt="firebasestorage.googleapis.com",xe="storageBucket";class W extends gt.ZR{constructor(R,Y){super(Ge(R),`Firebase Storage: ${Y} (${Ge(R)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,W.prototype)}_codeEquals(R){return Ge(R)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(R){this.customData.serverResponse=R,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Ge(E){return"storage/"+E}function Et(){return new W("unknown","An unknown error occurred, please check the error payload for server response.")}function Qe(){return new W("canceled","User canceled the upload/download.")}function en(){return new W("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function nn(E){return new W("invalid-argument",E)}function un(){return new W("app-deleted","The Firebase app was deleted.")}function Bt(E){return new W("invalid-root-operation","The operation '"+E+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yt(E,R){return new W("invalid-format","String does not match format '"+E+"': "+R)}function Mn(E){throw new W("internal-error","Internal error: "+E)}class Vt{constructor(R,Y){this.bucket=R,this.path_=Y}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const R=encodeURIComponent;return"/b/"+R(this.bucket)+"/o/"+R(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(R,Y){let ae;try{ae=Vt.makeFromUrl(R,Y)}catch(Ae){return new Vt(R,"")}if(""===ae.path)return ae;throw function wt(E){return new W("invalid-default-bucket","Invalid default bucket '"+E+"'.")}(R)}static makeFromUrl(R,Y){let ae=null;const Ae="([A-Za-z0-9.\\-_]+)",Kt=new RegExp("^gs://"+Ae+"(/(.*))?$","i");function $n(Bi){Bi.path_=decodeURIComponent(Bi.path)}const xr=Y.replace(/[.]/g,"\\."),lr=[{regex:Kt,indices:{bucket:1,path:3},postModify:function Ke(Bi){"/"===Bi.path.charAt(Bi.path.length-1)&&(Bi.path_=Bi.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${xr}/v[A-Za-z0-9_]+/b/${Ae}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:$n},{regex:new RegExp(`^https?://${Y===pt?"(?:storage.googleapis.com|storage.cloud.google.com)":Y}/${Ae}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:$n}];for(let Bi=0;Bi<lr.length;Bi++){const so=lr[Bi],wo=so.regex.exec(R);if(wo){let No=wo[so.indices.path];No||(No=""),ae=new Vt(wo[so.indices.bucket],No),so.postModify(ae);break}}if(null==ae)throw function Ze(E){return new W("invalid-url","Invalid URL '"+E+"'.")}(R);return ae}}class tn{constructor(R){this.promise_=Promise.reject(R)}getPromise(){return this.promise_}cancel(R=!1){}}function Bn(E){return"string"==typeof E||E instanceof String}function Sr(E){return Yn()&&E instanceof Blob}function Yn(){return"undefined"!=typeof Blob}function Qt(E,R,Y,ae){if(ae<R)throw nn(`Invalid value for '${E}'. Expected ${R} or greater.`);if(ae>Y)throw nn(`Invalid value for '${E}'. Expected ${Y} or less.`)}function kn(E,R,Y){let ae=R;return null==Y&&(ae=`https://${R}`),`${Y}://${ae}/v0${E}`}function rn(E){const R=encodeURIComponent;let Y="?";for(const ae in E)E.hasOwnProperty(ae)&&(Y=Y+(R(ae)+"=")+R(E[ae])+"&");return Y=Y.slice(0,-1),Y}var yn=(()=>{return(E=yn||(yn={}))[E.NO_ERROR=0]="NO_ERROR",E[E.NETWORK_ERROR=1]="NETWORK_ERROR",E[E.ABORT=2]="ABORT",yn;var E})();class Wi{constructor(R,Y,ae,Ae,Ke,yt,Kt,Ut,$n,Qn,xr){this.url_=R,this.method_=Y,this.headers_=ae,this.body_=Ae,this.successCodes_=Ke,this.additionalRetryCodes_=yt,this.callback_=Kt,this.errorCallback_=Ut,this.timeout_=$n,this.progressCallback_=Qn,this.connectionFactory_=xr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Ir,nr)=>{this.resolve_=Ir,this.reject_=nr,this.start_()})}start_(){const Y=(ae,Ae)=>{const Ke=this.resolve_,yt=this.reject_,Kt=Ae.connection;if(Ae.wasSuccessCode)try{const Ut=this.callback_(Kt,Kt.getResponse());!function Pr(E){return void 0!==E}(Ut)?Ke():Ke(Ut)}catch(Ut){yt(Ut)}else if(null!==Kt){const Ut=Et();Ut.serverResponse=Kt.getErrorText(),yt(this.errorCallback_?this.errorCallback_(Kt,Ut):Ut)}else yt(Ae.canceled?this.appDelete_?un():Qe():function Be(){return new W("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?Y(0,new di(!1,null,!0)):this.backoffId_=function Cr(E,R,Y){let ae=1,Ae=null,Ke=null,yt=!1,Kt=0;function Ut(){return 2===Kt}let $n=!1;function Qn(...Lr){$n||($n=!0,R.apply(null,Lr))}function xr(Lr){Ae=setTimeout(()=>{Ae=null,E(nr,Ut())},Lr)}function Ir(){Ke&&clearTimeout(Ke)}function nr(Lr,...ri){if($n)return void Ir();if(Lr)return Ir(),void Qn.call(null,Lr,...ri);if(Ut()||yt)return Ir(),void Qn.call(null,Lr,...ri);let lr;ae<64&&(ae*=2),1===Kt?(Kt=2,lr=0):lr=1e3*(ae+Math.random()),xr(lr)}let Fr=!1;function Mi(Lr){Fr||(Fr=!0,Ir(),!$n&&(null!==Ae?(Lr||(Kt=2),clearTimeout(Ae),xr(0)):Lr||(Kt=1)))}return xr(0),Ke=setTimeout(()=>{yt=!0,Mi(!0)},Y),Mi}((ae,Ae)=>{if(Ae)return void ae(!1,new di(!1,null,!0));const Ke=this.connectionFactory_();this.pendingConnection_=Ke;const yt=Kt=>{null!==this.progressCallback_&&this.progressCallback_(Kt.loaded,Kt.lengthComputable?Kt.total:-1)};null!==this.progressCallback_&&Ke.addUploadProgressListener(yt),Ke.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ke.removeUploadProgressListener(yt),this.pendingConnection_=null;const Kt=Ke.getErrorCode()===yn.NO_ERROR,Ut=Ke.getStatus();if(!Kt||this.isRetryStatusCode_(Ut)){const Qn=Ke.getErrorCode()===yn.ABORT;return void ae(!1,new di(!1,null,Qn))}const $n=-1!==this.successCodes_.indexOf(Ut);ae(!0,new di($n,Ke))})},Y,this.timeout_)}getPromise(){return this.promise_}cancel(R){this.canceled_=!0,this.appDelete_=R||!1,null!==this.backoffId_&&function sr(E){E(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(R){const Y=R>=500&&R<600,Ae=-1!==[408,429].indexOf(R),Ke=-1!==this.additionalRetryCodes_.indexOf(R);return Y||Ae||Ke}}class di{constructor(R,Y,ae){this.wasSuccessCode=R,this.connection=Y,this.canceled=!!ae}}function an(...E){const R=function qt(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==R){const Y=new R;for(let ae=0;ae<E.length;ae++)Y.append(E[ae]);return Y.getBlob()}if(Yn())return new Blob(E);throw new W("unsupported-environment","This browser doesn't seem to support creating Blobs")}const wn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vi{constructor(R,Y){this.data=R,this.contentType=Y||null}}function Kr(E,R){switch(E){case wn.RAW:return new vi(pr(R));case wn.BASE64:case wn.BASE64URL:return new vi(Oe(E,R));case wn.DATA_URL:return new vi(function He(E){const R=new ye(E);return R.base64?Oe(wn.BASE64,R.rest):function fn(E){let R;try{R=decodeURIComponent(E)}catch(Y){throw Yt(wn.DATA_URL,"Malformed data URL.")}return pr(R)}(R.rest)}(R),function ke(E){return new ye(E).contentType}(R))}throw Et()}function pr(E){const R=[];for(let Y=0;Y<E.length;Y++){let ae=E.charCodeAt(Y);ae<=127?R.push(ae):ae<=2047?R.push(192|ae>>6,128|63&ae):55296==(64512&ae)?Y<E.length-1&&56320==(64512&E.charCodeAt(Y+1))?(ae=65536|(1023&ae)<<10|1023&E.charCodeAt(++Y),R.push(240|ae>>18,128|ae>>12&63,128|ae>>6&63,128|63&ae)):R.push(239,191,189):56320==(64512&ae)?R.push(239,191,189):R.push(224|ae>>12,128|ae>>6&63,128|63&ae)}return new Uint8Array(R)}function Oe(E,R){switch(E){case wn.BASE64:{const Ae=-1!==R.indexOf("-"),Ke=-1!==R.indexOf("_");if(Ae||Ke)throw Yt(E,"Invalid character '"+(Ae?"-":"_")+"' found: is it base64url encoded?");break}case wn.BASE64URL:{const Ae=-1!==R.indexOf("+"),Ke=-1!==R.indexOf("/");if(Ae||Ke)throw Yt(E,"Invalid character '"+(Ae?"+":"/")+"' found: is it base64 encoded?");R=R.replace(/-/g,"+").replace(/_/g,"/");break}}let Y;try{Y=function Si(E){return atob(E)}(R)}catch(Ae){throw Yt(E,"Invalid character found")}const ae=new Uint8Array(Y.length);for(let Ae=0;Ae<Y.length;Ae++)ae[Ae]=Y.charCodeAt(Ae);return ae}class ye{constructor(R){this.base64=!1,this.contentType=null;const Y=R.match(/^data:([^,]+)?,/);if(null===Y)throw Yt(wn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const ae=Y[1]||null;null!=ae&&(this.base64=function pe(E,R){return E.length>=R.length&&E.substring(E.length-R.length)===R}(ae,";base64"),this.contentType=this.base64?ae.substring(0,ae.length-7):ae),this.rest=R.substring(R.indexOf(",")+1)}}class qe{constructor(R,Y){let ae=0,Ae="";Sr(R)?(this.data_=R,ae=R.size,Ae=R.type):R instanceof ArrayBuffer?(Y?this.data_=new Uint8Array(R):(this.data_=new Uint8Array(R.byteLength),this.data_.set(new Uint8Array(R))),ae=this.data_.length):R instanceof Uint8Array&&(Y?this.data_=R:(this.data_=new Uint8Array(R.length),this.data_.set(R)),ae=R.length),this.size_=ae,this.type_=Ae}size(){return this.size_}type(){return this.type_}slice(R,Y){if(Sr(this.data_)){const Ae=function br(E,R,Y){return E.webkitSlice?E.webkitSlice(R,Y):E.mozSlice?E.mozSlice(R,Y):E.slice?E.slice(R,Y):null}(this.data_,R,Y);return null===Ae?null:new qe(Ae)}{const ae=new Uint8Array(this.data_.buffer,R,Y-R);return new qe(ae,!0)}}static getBlob(...R){if(Yn()){const Y=R.map(ae=>ae instanceof qe?ae.data_:ae);return new qe(an.apply(null,Y))}{const Y=R.map(yt=>Bn(yt)?Kr(wn.RAW,yt).data:yt.data_);let ae=0;Y.forEach(yt=>{ae+=yt.byteLength});const Ae=new Uint8Array(ae);let Ke=0;return Y.forEach(yt=>{for(let Kt=0;Kt<yt.length;Kt++)Ae[Ke++]=yt[Kt]}),new qe(Ae,!0)}}uploadData(){return this.data_}}function St(E){let R;try{R=JSON.parse(E)}catch(Y){return null}return function fr(E){return"object"==typeof E&&!Array.isArray(E)}(R)?R:null}function or(E){const R=E.lastIndexOf("/",E.length-2);return-1===R?E:E.slice(R+1)}function ar(E,R){return R}class hn{constructor(R,Y,ae,Ae){this.server=R,this.local=Y||R,this.writable=!!ae,this.xform=Ae||ar}}let rr=null;function qr(){if(rr)return rr;const E=[];E.push(new hn("bucket")),E.push(new hn("generation")),E.push(new hn("metageneration")),E.push(new hn("name","fullPath",!0));const Y=new hn("name");Y.xform=function R(Ke,yt){return function zi(E){return!Bn(E)||E.length<2?E:or(E)}(yt)},E.push(Y);const Ae=new hn("size");return Ae.xform=function ae(Ke,yt){return void 0!==yt?Number(yt):yt},E.push(Ae),E.push(new hn("timeCreated")),E.push(new hn("updated")),E.push(new hn("md5Hash",null,!0)),E.push(new hn("cacheControl",null,!0)),E.push(new hn("contentDisposition",null,!0)),E.push(new hn("contentEncoding",null,!0)),E.push(new hn("contentLanguage",null,!0)),E.push(new hn("contentType",null,!0)),E.push(new hn("metadata","customMetadata",!0)),rr=E,rr}function Dr(E,R,Y){const ae=St(R);return null===ae?null:function In(E,R,Y){const ae={type:"file"},Ae=Y.length;for(let Ke=0;Ke<Ae;Ke++){const yt=Y[Ke];ae[yt.local]=yt.xform(ae,R[yt.server])}return function wi(E,R){Object.defineProperty(E,"ref",{get:function Y(){const Ke=new Vt(E.bucket,E.fullPath);return R._makeStorageReference(Ke)}})}(ae,E),ae}(E,ae,Y)}function ei(E,R){const Y={},ae=R.length;for(let Ae=0;Ae<ae;Ae++){const Ke=R[Ae];Ke.writable&&(Y[Ke.server]=E[Ke.local])}return JSON.stringify(Y)}const Br="prefixes";class Yr{constructor(R,Y,ae,Ae){this.url=R,this.method=Y,this.handler=ae,this.timeout=Ae,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Er(E){if(!E)throw Et()}function wr(E,R){return function Y(ae,Ae){const Ke=Dr(E,Ae,R);return Er(null!==Ke),Ke}}function It(E){return function R(Y,ae){let Ae;return Ae=401===Y.getStatus()?Y.getErrorText().includes("Firebase App Check token is invalid")?function ge(){return new W("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function lt(){return new W("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===Y.getStatus()?function ue(E){return new W("quota-exceeded","Quota for bucket '"+E+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(E.bucket):403===Y.getStatus()?function Fe(E){return new W("unauthorized","User does not have permission to access '"+E+"'.")}(E.path):ae,Ae.serverResponse=ae.serverResponse,Ae}}function Ht(E){const R=It(E);return function Y(ae,Ae){let Ke=R(ae,Ae);return 404===ae.getStatus()&&(Ke=function Ct(E){return new W("object-not-found","Object '"+E+"' does not exist.")}(E.path)),Ke.serverResponse=Ae.serverResponse,Ke}}function Wn(E,R,Y){const Ae=kn(R.fullServerUrl(),E.host,E._protocol),yt=E.maxOperationRetryTime,Kt=new Yr(Ae,"GET",wr(E,Y),yt);return Kt.errorHandler=Ht(R),Kt}function Qr(E,R,Y,ae,Ae){const Ke={};Ke.prefix=R.isRoot?"":R.path+"/",Y&&Y.length>0&&(Ke.delimiter=Y),ae&&(Ke.pageToken=ae),Ae&&(Ke.maxResults=Ae);const Kt=kn(R.bucketOnlyServerUrl(),E.host,E._protocol),$n=E.maxOperationRetryTime,Qn=new Yr(Kt,"GET",function Qi(E,R){return function Y(ae,Ae){const Ke=function ki(E,R,Y){const ae=St(Y);return null===ae?null:function cs(E,R,Y){const ae={prefixes:[],items:[],nextPageToken:Y.nextPageToken};if(Y[Br])for(const Ae of Y[Br]){const Ke=Ae.replace(/\/$/,""),yt=E._makeStorageReference(new Vt(R,Ke));ae.prefixes.push(yt)}if(Y.items)for(const Ae of Y.items){const Ke=E._makeStorageReference(new Vt(R,Ae.name));ae.items.push(Ke)}return ae}(E,R,ae)}(E,R,Ae);return Er(null!==Ke),Ke}}(E,R.bucket),$n);return Qn.urlParams=Ke,Qn.errorHandler=It(R),Qn}function gr(E,R,Y){const ae=Object.assign({},Y);return ae.fullPath=E.path,ae.size=R.size(),ae.contentType||(ae.contentType=function Ai(E,R){return E&&E.contentType||R&&R.type()||"application/octet-stream"}(null,R)),ae}class Ce{constructor(R,Y,ae,Ae){this.current=R,this.total=Y,this.finalized=!!ae,this.metadata=Ae||null}}function we(E,R){let Y=null;try{Y=E.getResponseHeader("X-Goog-Upload-Status")}catch(Ae){Er(!1)}return Er(!!Y&&-1!==(R||["active"]).indexOf(Y)),Y}const bn={STATE_CHANGED:"state_changed"},xn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Tn(E){switch(E){case"running":case"pausing":case"canceling":return xn.RUNNING;case"paused":return xn.PAUSED;case"success":return xn.SUCCESS;case"canceled":return xn.CANCELED;default:return xn.ERROR}}class Fs{constructor(R,Y,ae){if(function Xn(E){return"function"==typeof E}(R)||null!=Y||null!=ae)this.next=R,this.error=null!=Y?Y:void 0,this.complete=null!=ae?ae:void 0;else{const Ke=R;this.next=Ke.next,this.error=Ke.error,this.complete=Ke.complete}}}function Zr(E){return(...R)=>{Promise.resolve().then(()=>E(...R))}}class Ls extends class xi{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yn.NO_ERROR,this.sendPromise_=new Promise(R=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yn.ABORT,R()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yn.NETWORK_ERROR,R()}),this.xhr_.addEventListener("load",()=>{R()})})}send(R,Y,ae,Ae){if(this.sent_)throw Mn("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(Y,R,!0),void 0!==Ae)for(const Ke in Ae)Ae.hasOwnProperty(Ke)&&this.xhr_.setRequestHeader(Ke,Ae[Ke].toString());return void 0!==ae?this.xhr_.send(ae):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Mn("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Mn("cannot .getStatus() before sending");try{return this.xhr_.status}catch(R){return-1}}getResponse(){if(!this.sent_)throw Mn("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Mn("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(R){return this.xhr_.getResponseHeader(R)}addUploadProgressListener(R){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",R)}removeUploadProgressListener(R){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",R)}}{initXhr(){this.xhr_.responseType="text"}}function rs(){return new Ls}class mo{constructor(R,Y,ae=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=R,this._blob=Y,this._metadata=ae,this._mappings=qr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=Ae=>{this._request=void 0,this._chunkMultiplier=1,Ae._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=Ae,this._transition("error"))},this._metadataErrorHandler=Ae=>{this._request=void 0,Ae._codeEquals("canceled")?this.completeTransitions_():(this._error=Ae,this._transition("error"))},this._promise=new Promise((Ae,Ke)=>{this._resolve=Ae,this._reject=Ke,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const R=this._transferred;return Y=>this._updateProgress(R+Y)}_shouldDoResumable(R){return R.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(R){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([Y,ae])=>{switch(this._state){case"running":R(Y,ae);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((R,Y)=>{const ae=function de(E,R,Y,ae,Ae){const Ke=R.bucketOnlyServerUrl(),yt=gr(R,ae,Ae),Kt={name:yt.fullPath},Ut=kn(Ke,E.host,E._protocol),Qn={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${ae.size()}`,"X-Goog-Upload-Header-Content-Type":yt.contentType,"Content-Type":"application/json; charset=utf-8"},xr=ei(yt,Y),Fr=new Yr(Ut,"POST",function nr(Mi){let Lr;we(Mi);try{Lr=Mi.getResponseHeader("X-Goog-Upload-URL")}catch(ri){Er(!1)}return Er(Bn(Lr)),Lr},E.maxUploadRetryTime);return Fr.urlParams=Kt,Fr.headers=Qn,Fr.body=xr,Fr.errorHandler=It(R),Fr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ae=this._ref.storage._makeRequest(ae,rs,R,Y);this._request=Ae,Ae.getPromise().then(Ke=>{this._request=void 0,this._uploadUrl=Ke,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const R=this._uploadUrl;this._resolveToken((Y,ae)=>{const Ae=function ze(E,R,Y,ae){const Ut=new Yr(Y,"POST",function Ke($n){const Qn=we($n,["active","final"]);let xr=null;try{xr=$n.getResponseHeader("X-Goog-Upload-Size-Received")}catch(nr){Er(!1)}xr||Er(!1);const Ir=Number(xr);return Er(!isNaN(Ir)),new Ce(Ir,ae.size(),"final"===Qn)},E.maxUploadRetryTime);return Ut.headers={"X-Goog-Upload-Command":"query"},Ut.errorHandler=It(R),Ut}(this._ref.storage,this._ref._location,R,this._blob),Ke=this._ref.storage._makeRequest(Ae,rs,Y,ae);this._request=Ke,Ke.getPromise().then(yt=>{yt=yt,this._request=void 0,this._updateProgress(yt.current),this._needToFetchStatus=!1,yt.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const R=262144*this._chunkMultiplier,Y=new Ce(this._transferred,this._blob.size()),ae=this._uploadUrl;this._resolveToken((Ae,Ke)=>{let yt;try{yt=function zt(E,R,Y,ae,Ae,Ke,yt,Kt){const Ut=new Ce(0,0);if(yt?(Ut.current=yt.current,Ut.total=yt.total):(Ut.current=0,Ut.total=ae.size()),ae.size()!==Ut.total)throw function Wt(){return new W("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const $n=Ut.total-Ut.current;let Qn=$n;Ae>0&&(Qn=Math.min(Qn,Ae));const xr=Ut.current,Fr={"X-Goog-Upload-Command":Qn===$n?"upload, finalize":"upload","X-Goog-Upload-Offset":`${Ut.current}`},Mi=ae.slice(xr,xr+Qn);if(null===Mi)throw en();const lr=new Yr(Y,"POST",function Lr(Bi,so){const wo=we(Bi,["active","final"]),Mo=Ut.current+Qn,No=ae.size();let Io;return Io="final"===wo?wr(R,Ke)(Bi,so):null,new Ce(Mo,No,"final"===wo,Io)},R.maxUploadRetryTime);return lr.headers=Fr,lr.body=Mi.uploadData(),lr.progressCallback=Kt||null,lr.errorHandler=It(E),lr}(this._ref._location,this._ref.storage,ae,this._blob,R,this._mappings,Y,this._makeProgressCallback())}catch(Ut){return this._error=Ut,void this._transition("error")}const Kt=this._ref.storage._makeRequest(yt,rs,Ae,Ke);this._request=Kt,Kt.getPromise().then(Ut=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(Ut.current),Ut.finalized?(this._metadata=Ut.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((R,Y)=>{const ae=Wn(this._ref.storage,this._ref._location,this._mappings),Ae=this._ref.storage._makeRequest(ae,rs,R,Y);this._request=Ae,Ae.getPromise().then(Ke=>{this._request=void 0,this._metadata=Ke,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((R,Y)=>{const ae=function En(E,R,Y,ae,Ae){const Ke=R.bucketOnlyServerUrl(),yt={"X-Goog-Upload-Protocol":"multipart"},Ut=function Kt(){let lr="";for(let Bi=0;Bi<2;Bi++)lr+=Math.random().toString().slice(2);return lr}();yt["Content-Type"]="multipart/related; boundary="+Ut;const $n=gr(R,ae,Ae),Qn=ei($n,Y),nr=qe.getBlob("--"+Ut+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Qn+"\r\n--"+Ut+"\r\nContent-Type: "+$n.contentType+"\r\n\r\n",ae,"\r\n--"+Ut+"--");if(null===nr)throw en();const Fr={name:$n.fullPath},Mi=kn(Ke,E.host,E._protocol),ri=E.maxUploadRetryTime,zs=new Yr(Mi,"POST",wr(E,Y),ri);return zs.urlParams=Fr,zs.headers=yt,zs.body=nr.uploadData(),zs.errorHandler=It(R),zs}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),Ae=this._ref.storage._makeRequest(ae,rs,R,Y);this._request=Ae,Ae.getPromise().then(Ke=>{this._request=void 0,this._metadata=Ke,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(R){const Y=this._transferred;this._transferred=R,this._transferred!==Y&&this._notifyObservers()}_transition(R){if(this._state!==R)switch(R){case"canceling":case"pausing":this._state=R,void 0!==this._request&&this._request.cancel();break;case"running":const Y="paused"===this._state;this._state=R,Y&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=R,this._notifyObservers();break;case"canceled":this._error=Qe(),this._state=R,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const R=Tn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:R,metadata:this._metadata,task:this,ref:this._ref}}on(R,Y,ae,Ae){const Ke=new Fs(Y||void 0,ae||void 0,Ae||void 0);return this._addObserver(Ke),()=>{this._removeObserver(Ke)}}then(R,Y){return this._promise.then(R,Y)}catch(R){return this.then(null,R)}_addObserver(R){this._observers.push(R),this._notifyObserver(R)}_removeObserver(R){const Y=this._observers.indexOf(R);-1!==Y&&this._observers.splice(Y,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(Y=>{this._notifyObserver(Y)})}_finishPromise(){if(void 0!==this._resolve){let R=!0;switch(Tn(this._state)){case xn.SUCCESS:Zr(this._resolve.bind(null,this.snapshot))();break;case xn.CANCELED:case xn.ERROR:Zr(this._reject.bind(null,this._error))();break;default:R=!1}R&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(R){switch(Tn(this._state)){case xn.RUNNING:case xn.PAUSED:R.next&&Zr(R.next.bind(R,this.snapshot))();break;case xn.SUCCESS:R.complete&&Zr(R.complete.bind(R))();break;default:R.error&&Zr(R.error.bind(R,this._error))()}}resume(){const R="paused"===this._state||"pausing"===this._state;return R&&this._transition("running"),R}pause(){const R="running"===this._state;return R&&this._transition("pausing"),R}cancel(){const R="running"===this._state||"pausing"===this._state;return R&&this._transition("canceling"),R}}class _r{constructor(R,Y){this._service=R,this._location=Y instanceof Vt?Y:Vt.makeFromUrl(Y,R.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(R,Y){return new _r(R,Y)}get root(){const R=new Vt(this._location.bucket,"");return this._newRef(this._service,R)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return or(this._location.path)}get storage(){return this._service}get parent(){const R=function $t(E){if(0===E.length)return null;const R=E.lastIndexOf("/");return-1===R?"":E.slice(0,R)}(this._location.path);if(null===R)return null;const Y=new Vt(this._location.bucket,R);return new _r(this._service,Y)}_throwIfRoot(R){if(""===this._location.path)throw Bt(R)}}function Gt(E,R,Y){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,at.Z)(function*(E,R,Y){const Ae=yield ai(E,{pageToken:Y});R.prefixes.push(...Ae.prefixes),R.items.push(...Ae.items),null!=Ae.nextPageToken&&(yield Gt(E,R,Ae.nextPageToken))})).apply(this,arguments)}function ai(E,R){null!=R&&"number"==typeof R.maxResults&&Qt("options.maxResults",1,1e3,R.maxResults);const Y=R||{},ae=Qr(E.storage,E._location,"/",Y.pageToken,Y.maxResults);return E.storage.makeRequestWithTokens(ae,rs)}function jr(E){E._throwIfRoot("getDownloadURL");const R=function ur(E,R,Y){const Ae=kn(R.fullServerUrl(),E.host,E._protocol),yt=E.maxOperationRetryTime,Kt=new Yr(Ae,"GET",function er(E,R){return function Y(ae,Ae){const Ke=Dr(E,Ae,R);return Er(null!==Ke),function Ii(E,R,Y,ae){const Ae=St(R);if(null===Ae||!Bn(Ae.downloadTokens))return null;const Ke=Ae.downloadTokens;if(0===Ke.length)return null;const yt=encodeURIComponent;return Ke.split(",").map($n=>{const xr=E.fullPath;return kn("/b/"+yt(E.bucket)+"/o/"+yt(xr),Y,ae)+rn({alt:"media",token:$n})})[0]}(Ke,Ae,E.host,E._protocol)}}(E,Y),yt);return Kt.errorHandler=Ht(R),Kt}(E.storage,E._location,qr());return E.storage.makeRequestWithTokens(R,rs).then(Y=>{if(null===Y)throw function it(){return new W("no-download-url","The given file does not have any download URLs.")}();return Y})}function Vi(E,R){const Y=function pn(E,R){const Y=R.split("/").filter(ae=>ae.length>0).join("/");return 0===E.length?Y:E+"/"+Y}(E._location.path,R),ae=new Vt(E._location.bucket,Y);return new _r(E.storage,ae)}function vs(E,R){if(E instanceof Ki){const Y=E;if(null==Y._bucket)throw function Nt(){return new W("no-default-bucket","No default bucket found. Did you set the '"+xe+"' property when initializing the app?")}();const ae=new _r(Y,Y._bucket);return null!=R?vs(ae,R):ae}return void 0!==R?Vi(E,R):E}function _o(E,R){if(R&&function $r(E){return/^[A-Za-z]+:\/\//.test(E)}(R)){if(E instanceof Ki)return function _s(E,R){return new _r(E,R)}(E,R);throw nn("To use ref(service, url), the first argument must be a Storage instance.")}return vs(E,R)}function Ro(E,R){const Y=null==R?void 0:R[xe];return null==Y?null:Vt.makeFromBucketSpec(Y,E)}class Ki{constructor(R,Y,ae,Ae,Ke){this.app=R,this._authProvider=Y,this._appCheckProvider=ae,this._url=Ae,this._firebaseVersion=Ke,this._bucket=null,this._host=pt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=Ae?Vt.makeFromBucketSpec(Ae,this._host):Ro(this._host,this.app.options)}get host(){return this._host}set host(R){this._host=R,this._bucket=null!=this._url?Vt.makeFromBucketSpec(this._url,R):Ro(R,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(R){Qt("time",0,Number.POSITIVE_INFINITY,R),this._maxUploadRetryTime=R}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(R){Qt("time",0,Number.POSITIVE_INFINITY,R),this._maxOperationRetryTime=R}_getAuthToken(){var R=this;return(0,at.Z)(function*(){if(R._overrideAuthToken)return R._overrideAuthToken;const Y=R._authProvider.getImmediate({optional:!0});if(Y){const ae=yield Y.getToken();if(null!==ae)return ae.accessToken}return null})()}_getAppCheckToken(){var R=this;return(0,at.Z)(function*(){const Y=R._appCheckProvider.getImmediate({optional:!0});return Y?(yield Y.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(R=>R.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(R){return new _r(this,R)}_makeRequest(R,Y,ae,Ae){if(this._deleted)return new tn(un());{const Ke=function Lt(E,R,Y,ae,Ae,Ke){const yt=rn(E.urlParams),Kt=E.url+yt,Ut=Object.assign({},E.headers);return function hi(E,R){R&&(E["X-Firebase-GMPID"]=R)}(Ut,R),function oi(E,R){null!==R&&R.length>0&&(E.Authorization="Firebase "+R)}(Ut,Y),function zr(E,R){E["X-Firebase-Storage-Version"]="webjs/"+(null!=R?R:"AppManager")}(Ut,Ke),function vr(E,R){null!==R&&(E["X-Firebase-AppCheck"]=R)}(Ut,ae),new Wi(Kt,E.method,Ut,E.body,E.successCodes,E.additionalRetryCodes,E.handler,E.errorHandler,E.timeout,E.progressCallback,Ae)}(R,this._appId,ae,Ae,Y,this._firebaseVersion);return this._requests.add(Ke),Ke.getPromise().then(()=>this._requests.delete(Ke),()=>this._requests.delete(Ke)),Ke}}makeRequestWithTokens(R,Y){var ae=this;return(0,at.Z)(function*(){const[Ae,Ke]=yield Promise.all([ae._getAuthToken(),ae._getAppCheckToken()]);return ae._makeRequest(R,Y,Ae,Ke).getPromise()})()}}const Ri="@firebase/storage";function ti(E,R){return _o(E=(0,gt.m9)(E),R)}function tr(E,{instanceIdentifier:R}){const Y=E.getProvider("app").getImmediate(),ae=E.getProvider("auth-internal"),Ae=E.getProvider("app-check-internal");return new Ki(Y,ae,Ae,R,Xe.SDK_VERSION)}!function U(){(0,Xe._registerComponent)(new tt.wA("storage",tr,"PUBLIC").setMultipleInstances(!0)),(0,Xe.registerVersion)(Ri,"0.9.8",""),(0,Xe.registerVersion)(Ri,"0.9.8","esm2017")}();class Q{constructor(R,Y,ae){this._delegate=R,this.task=Y,this.ref=ae}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class V{constructor(R,Y){this._delegate=R,this._ref=Y,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Q(this._delegate.snapshot,this,this._ref)}then(R,Y){return this._delegate.then(ae=>{if(R)return R(new Q(ae,this,this._ref))},Y)}on(R,Y,ae,Ae){let Ke;return Y&&(Ke="function"==typeof Y?yt=>Y(new Q(yt,this,this._ref)):{next:Y.next?yt=>Y.next(new Q(yt,this,this._ref)):void 0,complete:Y.complete||void 0,error:Y.error||void 0}),this._delegate.on(R,Ke,ae||void 0,Ae||void 0)}}class ne{constructor(R,Y){this._delegate=R,this._service=Y}get prefixes(){return this._delegate.prefixes.map(R=>new _e(R,this._service))}get items(){return this._delegate.items.map(R=>new _e(R,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class _e{constructor(R,Y){this._delegate=R,this.storage=Y}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(R){const Y=function Ms(E,R){return Vi(E,R)}(this._delegate,R);return new _e(Y,this.storage)}get root(){return new _e(this._delegate.root,this.storage)}get parent(){const R=this._delegate.parent;return null==R?null:new _e(R,this.storage)}put(R,Y){return this._throwIfRoot("put"),new V(function no(E,R,Y){return function je(E,R,Y){return E._throwIfRoot("uploadBytesResumable"),new mo(E,new qe(R),Y)}(E=(0,gt.m9)(E),R,Y)}(this._delegate,R,Y),this)}putString(R,Y=wn.RAW,ae){this._throwIfRoot("putString");const Ae=Kr(Y,R),Ke=Object.assign({},ae);return null==Ke.contentType&&null!=Ae.contentType&&(Ke.contentType=Ae.contentType),new V(new mo(this._delegate,new qe(Ae.data,!0),Ke),this)}listAll(){return function as(E){return function Mt(E){const R={prefixes:[],items:[]};return Gt(E,R).then(()=>R)}(E=(0,gt.m9)(E))}(this._delegate).then(R=>new ne(R,this.storage))}list(R){return function _n(E,R){return ai(E=(0,gt.m9)(E),R)}(this._delegate,R||void 0).then(Y=>new ne(Y,this.storage))}getMetadata(){return function Di(E){return function gn(E){E._throwIfRoot("getMetadata");const R=Wn(E.storage,E._location,qr());return E.storage.makeRequestWithTokens(R,rs)}(E=(0,gt.m9)(E))}(this._delegate)}updateMetadata(R){return function os(E,R){return function Dn(E,R){E._throwIfRoot("updateMetadata");const Y=function Li(E,R,Y,ae){const Ke=kn(R.fullServerUrl(),E.host,E._protocol),Kt=ei(Y,ae),$n=E.maxOperationRetryTime,Qn=new Yr(Ke,"PATCH",wr(E,ae),$n);return Qn.headers={"Content-Type":"application/json; charset=utf-8"},Qn.body=Kt,Qn.errorHandler=Ht(R),Qn}(E.storage,E._location,R,qr());return E.storage.makeRequestWithTokens(Y,rs)}(E=(0,gt.m9)(E),R)}(this._delegate,R)}getDownloadURL(){return function ui(E){return jr(E=(0,gt.m9)(E))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Eo(E){return function yo(E){E._throwIfRoot("deleteObject");const R=function cr(E,R){const ae=kn(R.fullServerUrl(),E.host,E._protocol),Kt=new Yr(ae,"DELETE",function yt(Ut,$n){},E.maxOperationRetryTime);return Kt.successCodes=[200,204],Kt.errorHandler=Ht(R),Kt}(E.storage,E._location);return E.storage.makeRequestWithTokens(R,rs)}(E=(0,gt.m9)(E))}(this._delegate)}_throwIfRoot(R){if(""===this._delegate._location.path)throw Bt(R)}}class et{constructor(R,Y){this.app=R,this._delegate=Y}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(R){if(mt(R))throw nn("ref() expected a child path but got a URL, use refFromURL instead.");return new _e(ti(this._delegate,R),this)}refFromURL(R){if(!mt(R))throw nn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Vt.makeFromUrl(R,this._delegate.host)}catch(Y){throw nn("refFromUrl() expected a valid full URL but got an invalid one.")}return new _e(ti(this._delegate,R),this)}setMaxUploadRetryTime(R){this._delegate.maxUploadRetryTime=R}setMaxOperationRetryTime(R){this._delegate.maxOperationRetryTime=R}useEmulator(R,Y,ae={}){!function Es(E,R,Y,ae={}){!function Or(E,R,Y,ae={}){E.host=`${R}:${Y}`,E._protocol="http";const{mockUserToken:Ae}=ae;Ae&&(E._overrideAuthToken="string"==typeof Ae?Ae:(0,gt.Sg)(Ae,E.app.options.projectId))}(E,R,Y,ae)}(this._delegate,R,Y,ae)}}function mt(E){return/^[A-Za-z]+:\/\//.test(E)}function jn(E,{instanceIdentifier:R}){const Y=E.getProvider("app-compat").getImmediate(),ae=E.getProvider("storage").getImmediate({identifier:R});return new et(Y,ae)}!function cn(E){const R={TaskState:xn,TaskEvent:bn,StringFormat:wn,Storage:et,Reference:_e};E.INTERNAL.registerComponent(new tt.wA("storage-compat",jn,"PUBLIC").setServiceProps(R).setMultipleInstances(!0)),E.registerVersion("@firebase/storage-compat","0.1.16")}(Tt.Z);var Xr=B(440),Ar=B(127);function Ui(E){const R=function kr(E){return new _.y(R=>{const Y=yt=>R.next(yt);Y(E.snapshot);const Ke=E.on("state_changed",Y);return E.then(yt=>{Y(yt),R.complete()},yt=>{Y(E.snapshot),(yt=>{R.error(yt)})(yt)}),function(){Ke()}}).pipe(function Ve(E,R=Se.z){return(0,De.e)((Y,ae)=>{let Ae=null,Ke=null,yt=null;const Kt=()=>{if(Ae){Ae.unsubscribe(),Ae=null;const $n=Ke;Ke=null,ae.next($n)}};function Ut(){const $n=yt+E,Qn=R.now();if(Qn<$n)return Ae=this.schedule(void 0,$n-Qn),void ae.add(Ae);Kt()}Y.subscribe((0,Re.x)(ae,$n=>{Ke=$n,yt=R.now(),Ae||(Ae=R.schedule(Ut,E),ae.add(Ae))},()=>{Kt(),ae.complete()},void 0,()=>{Ke=Ae=null}))})}(0))}(E);return{task:E,then:E.then.bind(E),catch:E.catch.bind(E),pause:E.pause.bind(E),cancel:E.cancel.bind(E),resume:E.resume.bind(E),snapshotChanges:()=>R,percentageChanges:()=>R.pipe((0,Me.U)(Y=>Y.bytesTransferred/Y.totalBytes*100))}}function Hr(E){return{getDownloadURL:()=>(0,te.of)(void 0).pipe(ce.fc,(0,Ue.w)(()=>E.getDownloadURL()),ce.iC),getMetadata:()=>(0,te.of)(void 0).pipe(ce.fc,(0,Ue.w)(()=>E.getMetadata()),ce.iC),delete:()=>(0,ie.D)(E.delete()),child:R=>Hr(E.child(R)),updateMetadata:R=>(0,ie.D)(E.updateMetadata(R)),put:(R,Y)=>Ui(E.put(R,Y)),putString:(R,Y,ae)=>Ui(E.putString(R,Y,ae)),list:R=>(0,ie.D)(E.list(R)),listAll:()=>(0,ie.D)(E.listAll())}}const Jt=new oe.OlP("angularfire2.storageBucket"),qi=new oe.OlP("angularfire2.storage.maxUploadRetryTime"),Nn=new oe.OlP("angularfire2.storage.maxOperationRetryTime"),io=new oe.OlP("angularfire2.storage.use-emulator");let ds=(()=>{class E{constructor(Y,ae,Ae,Ke,yt,Kt,Ut,$n,Qn,xr){const Ir=(0,Ne.on)(Y,yt,ae);this.storage=(0,Ne.cc)(`${Ir.name}.storage.${Ae}`,"AngularFireStorage",Ir.name,()=>{const nr=yt.runOutsideAngular(()=>Ir.storage(Ae||void 0)),Fr=Qn;return Fr&&nr.useEmulator(...Fr),Ut&&nr.setMaxUploadRetryTime(Ut),$n&&nr.setMaxOperationRetryTime($n),nr},[Ut,$n])}ref(Y){return Hr(this.storage.ref(Y))}refFromURL(Y){return Hr(this.storage.refFromURL(Y))}upload(Y,ae,Ae){return Hr(this.storage.ref(Y)).put(ae,Ae)}}return E.\u0275fac=function(Y){return new(Y||E)(oe.LFG(Ne.Dh),oe.LFG(Ne.xv,8),oe.LFG(Jt,8),oe.LFG(oe.Lbi),oe.LFG(oe.R0b),oe.LFG(ce.HU),oe.LFG(qi,8),oe.LFG(Nn,8),oe.LFG(io,8),oe.LFG(Xr.nm,8))},E.\u0275prov=oe.Yz7({token:E,factory:E.\u0275fac,providedIn:"any"}),E})(),L=(()=>{class E{}return E.\u0275fac=function(Y){return new(Y||E)},E.\u0275mod=oe.oAB({type:E}),E.\u0275inj=oe.cJS({}),E})(),k=(()=>{class E{constructor(){Ar.Z.registerVersion("angularfire",ce.q4.full,"gcs-compat")}}return E.\u0275fac=function(Y){return new(Y||E)},E.\u0275mod=oe.oAB({type:E}),E.\u0275inj=oe.cJS({providers:[ds],imports:[L]}),E})()},2011:(Ot,We,B)=>{B.d(We,{hO:()=>Tt,xv:()=>Ue,Dh:()=>Me,GT:()=>Re,cc:()=>at,on:()=>ce,pX:()=>De});var _=B(5e3),te=B(127),ie=B(5813);Ot=B.hmd(Ot);const Se=["ngOnDestroy"],De=(pt,xe,kt,ht={})=>new Proxy(pt,{get:(W,Ge)=>kt.runOutsideAngular(()=>{var Et;if(pt[Ge])return(null===(Et=null==ht?void 0:ht.spy)||void 0===Et?void 0:Et.get)&&ht.spy.get(Ge,pt[Ge]),pt[Ge];if(Se.indexOf(Ge)>-1)return()=>{};const Ct=xe.toPromise().then(ue=>{const lt=ue&&ue[Ge];return"function"==typeof lt?lt.bind(ue):lt&&lt.then?lt.then(ge=>kt.run(()=>ge)):kt.run(()=>lt)});return new Proxy(()=>{},{get:(ue,lt)=>Ct[lt],apply:(ue,lt,ge)=>Ct.then(Fe=>{var Be;const Qe=Fe&&Fe(...ge);return(null===(Be=null==ht?void 0:ht.spy)||void 0===Be?void 0:Be.apply)&&ht.spy.apply(Ge,ge,Qe),Qe})})})}),Re=(pt,xe)=>{xe.forEach(kt=>{Object.getOwnPropertyNames(kt.prototype||kt).forEach(ht=>{Object.defineProperty(pt.prototype,ht,Object.getOwnPropertyDescriptor(kt.prototype||kt,ht))})})};class Ve{constructor(xe){return xe}}const Me=new _.OlP("angularfire2.app.options"),Ue=new _.OlP("angularfire2.app.name");function ce(pt,xe,kt){const W="object"==typeof kt&&kt||{};W.name=W.name||"string"==typeof kt&&kt||"[DEFAULT]";const Et=te.Z.apps.filter(Ct=>Ct&&Ct.name===W.name)[0]||xe.runOutsideAngular(()=>te.Z.initializeApp(pt,W));try{JSON.stringify(pt)!==JSON.stringify(Et.options)&&oe("error",`${Et.name} Firebase App already initialized with different options${Ot.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ct){}return new Ve(Et)}const oe=(pt,...xe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[pt](...xe)},Ne={provide:Ve,useFactory:ce,deps:[Me,_.R0b,[new _.FiY,Ue]]};let Tt=(()=>{class pt{constructor(kt){te.Z.registerVersion("angularfire",ie.q4.full,"core"),te.Z.registerVersion("angularfire",ie.q4.full,"app-compat"),te.Z.registerVersion("angular",_.q4F.full,kt.toString())}static initializeApp(kt,ht){return{ngModule:pt,providers:[{provide:Me,useValue:kt},{provide:Ue,useValue:ht}]}}}return pt.\u0275fac=function(kt){return new(kt||pt)(_.LFG(_.Lbi))},pt.\u0275mod=_.oAB({type:pt}),pt.\u0275inj=_.cJS({providers:[Ne]}),pt})();function at(pt,xe,kt,ht,W){const[,Ge,Et]=globalThis.\u0275AngularfireInstanceCache.find(Ct=>Ct[0]===pt)||[];if(Ge)return function Xe(pt,xe){try{return pt.toString()===xe.toString()}catch(kt){return pt===xe}}(W,Et)||(tt("error",`${xe} was already initialized on the ${kt} Firebase App with different settings.${gt?" You may need to reload as Firebase is not HMR aware.":""}`),tt("warn",{is:W,was:Et})),Ge;{const Ct=ht();return globalThis.\u0275AngularfireInstanceCache.push([pt,Ct,W]),Ct}}const gt=!!Ot.hot,tt=(pt,...xe)=>{(0,_.X6Q)()&&"undefined"!=typeof console&&console[pt](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Ot,We,B)=>{B.d(We,{q4:()=>Us,iC:()=>$i,fc:()=>ls,HU:()=>ps,vb:()=>Na,JM:()=>Ha});var _=B(5e3),te=B(5867),ie=B(5861),Se=B(9681),De=B(2090),Re=B(4859),Ve=B(1877),Me=B(8766);const Ue="@firebase/installations",ce="0.5.11",Ne=`w:${ce}`,Tt="FIS_v2",xe=new De.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kt(F){return F instanceof De.ZR&&F.code.includes("request-failed")}function ht({projectId:F}){return`https://firebaseinstallations.googleapis.com/v1/projects/${F}/installations`}function W(F){return{token:F.token,requestStatus:2,expiresIn:Fe(F.expiresIn),creationTime:Date.now()}}function Ge(F,j){return Et.apply(this,arguments)}function Et(){return(Et=(0,ie.Z)(function*(F,j){const me=(yield j.json()).error;return xe.create("request-failed",{requestName:F,serverCode:me.code,serverMessage:me.message,serverStatus:me.status})})).apply(this,arguments)}function Ct({apiKey:F}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F})}function ue(F,{refreshToken:j}){const X=Ct(F);return X.append("Authorization",function Be(F){return`${Tt} ${F}`}(j)),X}function lt(F){return ge.apply(this,arguments)}function ge(){return(ge=(0,ie.Z)(function*(F){const j=yield F();return j.status>=500&&j.status<600?F():j})).apply(this,arguments)}function Fe(F){return Number(F.replace("s","000"))}function Qe(F,j){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,ie.Z)(function*({appConfig:F,heartbeatServiceProvider:j},{fid:X}){const me=ht(F),$e=Ct(F),nt=j.getImmediate({optional:!0});if(nt){const Hn=yield nt.getHeartbeatsHeader();Hn&&$e.append("x-firebase-client",Hn)}const Pt={method:"POST",headers:$e,body:JSON.stringify({fid:X,authVersion:Tt,appId:F.appId,sdkVersion:Ne})},Pn=yield lt(()=>fetch(me,Pt));if(Pn.ok){const Hn=yield Pn.json();return{fid:Hn.fid||X,registrationStatus:2,refreshToken:Hn.refreshToken,authToken:W(Hn.authToken)}}throw yield Ge("Create Installation",Pn)})).apply(this,arguments)}function wt(F){return new Promise(j=>{setTimeout(j,F)})}const en=/^[cdef][\w-]{21}$/;function it(){try{const F=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(F),F[0]=112+F[0]%16;const X=function nn(F){return function Nt(F){return btoa(String.fromCharCode(...F)).replace(/\+/g,"-").replace(/\//g,"_")}(F).substr(0,22)}(F);return en.test(X)?X:""}catch(F){return""}}function un(F){return`${F.appName}!${F.appId}`}const Bt=new Map;function Yt(F,j){const X=un(F);tn(X,j),function Cr(F,j){const X=function Pr(){return!sr&&"BroadcastChannel"in self&&(sr=new BroadcastChannel("[Firebase] FID Change"),sr.onmessage=F=>{tn(F.data.key,F.data.fid)}),sr}();X&&X.postMessage({key:F,fid:j}),function Xn(){0===Bt.size&&sr&&(sr.close(),sr=null)}()}(X,j)}function tn(F,j){const X=Bt.get(F);if(X)for(const me of X)me(j)}let sr=null;const Sr="firebase-installations-store";let Yn=null;function Qt(){return Yn||(Yn=(0,Me.X3)("firebase-installations-database",1,{upgrade:(F,j)=>{0===j&&F.createObjectStore(Sr)}})),Yn}function kn(F,j){return rn.apply(this,arguments)}function rn(){return(rn=(0,ie.Z)(function*(F,j){const X=un(F),$e=(yield Qt()).transaction(Sr,"readwrite"),nt=$e.objectStore(Sr),bt=yield nt.get(X);return yield nt.put(j,X),yield $e.done,(!bt||bt.fid!==j.fid)&&Yt(F,j.fid),j})).apply(this,arguments)}function yn(F){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,ie.Z)(function*(F){const j=un(F),me=(yield Qt()).transaction(Sr,"readwrite");yield me.objectStore(Sr).delete(j),yield me.done})).apply(this,arguments)}function di(F,j){return oi.apply(this,arguments)}function oi(){return(oi=(0,ie.Z)(function*(F,j){const X=un(F),$e=(yield Qt()).transaction(Sr,"readwrite"),nt=$e.objectStore(Sr),bt=yield nt.get(X),Pt=j(bt);return void 0===Pt?yield nt.delete(X):yield nt.put(Pt,X),yield $e.done,Pt&&(!bt||bt.fid!==Pt.fid)&&Yt(F,Pt.fid),Pt})).apply(this,arguments)}function zr(F){return hi.apply(this,arguments)}function hi(){return(hi=(0,ie.Z)(function*(F){let j;const X=yield di(F.appConfig,me=>{const $e=vr(me),nt=Lt(F,$e);return j=nt.registrationPromise,nt.installationEntry});return""===X.fid?{installationEntry:yield j}:{installationEntry:X,registrationPromise:j}})).apply(this,arguments)}function vr(F){return vi(F||{fid:it(),registrationStatus:0})}function Lt(F,j){if(0===j.registrationStatus){if(!navigator.onLine)return{installationEntry:j,registrationPromise:Promise.reject(xe.create("app-offline"))};const X={fid:j.fid,registrationStatus:1,registrationTime:Date.now()},me=function qt(F,j){return an.apply(this,arguments)}(F,X);return{installationEntry:X,registrationPromise:me}}return 1===j.registrationStatus?{installationEntry:j,registrationPromise:br(F)}:{installationEntry:j}}function an(){return(an=(0,ie.Z)(function*(F,j){try{const X=yield Qe(F,j);return kn(F.appConfig,X)}catch(X){throw kt(X)&&409===X.customData.serverCode?yield yn(F.appConfig):yield kn(F.appConfig,{fid:j.fid,registrationStatus:0}),X}})).apply(this,arguments)}function br(F){return Si.apply(this,arguments)}function Si(){return(Si=(0,ie.Z)(function*(F){let j=yield wn(F.appConfig);for(;1===j.registrationStatus;)yield wt(100),j=yield wn(F.appConfig);if(0===j.registrationStatus){const{installationEntry:X,registrationPromise:me}=yield zr(F);return me||X}return j})).apply(this,arguments)}function wn(F){return di(F,j=>{if(!j)throw xe.create("installation-not-found");return vi(j)})}function vi(F){return function Kr(F){return 1===F.registrationStatus&&F.registrationTime+1e4<Date.now()}(F)?{fid:F.fid,registrationStatus:0}:F}function pr(F,j){return fn.apply(this,arguments)}function fn(){return(fn=(0,ie.Z)(function*({appConfig:F,heartbeatServiceProvider:j},X){const me=Oe(F,X),$e=ue(F,X),nt=j.getImmediate({optional:!0});if(nt){const Hn=yield nt.getHeartbeatsHeader();Hn&&$e.append("x-firebase-client",Hn)}const Pt={method:"POST",headers:$e,body:JSON.stringify({installation:{sdkVersion:Ne,appId:F.appId}})},Pn=yield lt(()=>fetch(me,Pt));if(Pn.ok)return W(yield Pn.json());throw yield Ge("Generate Auth Token",Pn)})).apply(this,arguments)}function Oe(F,{fid:j}){return`${ht(F)}/${j}/authTokens:generate`}function ye(F){return He.apply(this,arguments)}function He(){return(He=(0,ie.Z)(function*(F,j=!1){let X;const me=yield di(F.appConfig,nt=>{if(!pn(nt))throw xe.create("not-registered");const bt=nt.authToken;if(!j&&or(bt))return nt;if(1===bt.requestStatus)return X=ke(F,j),nt;{if(!navigator.onLine)throw xe.create("app-offline");const Pt=hn(nt);return X=St(F,Pt),Pt}});return X?yield X:me.authToken})).apply(this,arguments)}function ke(F,j){return pe.apply(this,arguments)}function pe(){return(pe=(0,ie.Z)(function*(F,j){let X=yield qe(F.appConfig);for(;1===X.authToken.requestStatus;)yield wt(100),X=yield qe(F.appConfig);const me=X.authToken;return 0===me.requestStatus?ye(F,j):me})).apply(this,arguments)}function qe(F){return di(F,j=>{if(!pn(j))throw xe.create("not-registered");return function rr(F){return 1===F.requestStatus&&F.requestTime+1e4<Date.now()}(j.authToken)?Object.assign(Object.assign({},j),{authToken:{requestStatus:0}}):j})}function St(F,j){return $t.apply(this,arguments)}function $t(){return($t=(0,ie.Z)(function*(F,j){try{const X=yield pr(F,j),me=Object.assign(Object.assign({},j),{authToken:X});return yield kn(F.appConfig,me),X}catch(X){if(!kt(X)||401!==X.customData.serverCode&&404!==X.customData.serverCode){const me=Object.assign(Object.assign({},j),{authToken:{requestStatus:0}});yield kn(F.appConfig,me)}else yield yn(F.appConfig);throw X}})).apply(this,arguments)}function pn(F){return void 0!==F&&2===F.registrationStatus}function or(F){return 2===F.requestStatus&&!function ar(F){const j=Date.now();return j<F.creationTime||F.creationTime+F.expiresIn<j+36e5}(F)}function hn(F){const j={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},F),{authToken:j})}function qr(){return(qr=(0,ie.Z)(function*(F){const j=F,{installationEntry:X,registrationPromise:me}=yield zr(j);return me?me.catch(console.error):ye(j).catch(console.error),X.fid})).apply(this,arguments)}function In(){return(In=(0,ie.Z)(function*(F,j=!1){const X=F;return yield Dr(X),(yield ye(X,j)).token})).apply(this,arguments)}function Dr(F){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,ie.Z)(function*(F){const{registrationPromise:j}=yield zr(F);j&&(yield j)})).apply(this,arguments)}function Qi(F){return xe.create("missing-app-config-values",{valueName:F})}const er="installations",Ht=F=>{const j=F.getProvider("app").getImmediate(),X=function wr(F){if(!F||!F.options)throw Qi("App Configuration");if(!F.name)throw Qi("App Name");const j=["projectId","apiKey","appId"];for(const X of j)if(!F.options[X])throw Qi(X);return{appName:F.name,projectId:F.options.projectId,apiKey:F.options.apiKey,appId:F.options.appId}}(j);return{app:j,appConfig:X,heartbeatServiceProvider:(0,Se._getProvider)(j,"heartbeat"),_delete:()=>Promise.resolve()}},Wn=F=>{const j=F.getProvider("app").getImmediate(),X=(0,Se._getProvider)(j,er).getImmediate();return{getId:()=>function zi(F){return qr.apply(this,arguments)}(X),getToken:$e=>function wi(F){return In.apply(this,arguments)}(X,$e)}};(function Qr(){(0,Se._registerComponent)(new Re.wA(er,Ht,"PUBLIC")),(0,Se._registerComponent)(new Re.wA("installations-internal",Wn,"PRIVATE"))})(),(0,Se.registerVersion)(Ue,ce),(0,Se.registerVersion)(Ue,ce,"esm2017");const Fi="@firebase/remote-config",gr=new De.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ss{constructor(j,X,me,$e){this.client=j,this.storage=X,this.storageCache=me,this.logger=$e}isCachedDataFresh(j,X){if(!X)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const me=Date.now()-X,$e=me<=j;return this.logger.debug(`Config fetch cache check. Cache age millis: ${me}. Cache max age millis (minimumFetchIntervalMillis setting): ${j}. Is cache hit: ${$e}.`),$e}fetch(j){var X=this;return(0,ie.Z)(function*(){const[me,$e]=yield Promise.all([X.storage.getLastSuccessfulFetchTimestampMillis(),X.storage.getLastSuccessfulFetchResponse()]);if($e&&X.isCachedDataFresh(j.cacheMaxAgeMillis,me))return $e;j.eTag=$e&&$e.eTag;const nt=yield X.client.fetch(j),bt=[X.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===nt.status&&bt.push(X.storage.setLastSuccessfulFetchResponse(nt)),yield Promise.all(bt),nt})()}}function mo(F=navigator){return F.languages&&F.languages[0]||F.language}class _r{constructor(j,X,me,$e,nt,bt){this.firebaseInstallations=j,this.sdkVersion=X,this.namespace=me,this.projectId=$e,this.apiKey=nt,this.appId=bt}fetch(j){var X=this;return(0,ie.Z)(function*(){var me,$e,nt;const[bt,Pt]=yield Promise.all([X.firebaseInstallations.getId(),X.firebaseInstallations.getToken()]),Hn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${X.projectId}/namespaces/${X.namespace}:fetch?key=${X.apiKey}`,Kn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":j.eTag||"*"},Cn={sdk_version:X.sdkVersion,app_instance_id:bt,app_instance_id_token:Pt,app_id:X.appId,language_code:mo()},yi={method:"POST",headers:Kn,body:JSON.stringify(Cn)},Ps=fetch(Hn,yi),js=new Promise((Hs,ya)=>{j.signal.addEventListener(()=>{const ou=new Error("The operation was aborted.");ou.name="AbortError",ya(ou)})});let ho;try{yield Promise.race([Ps,js]),ho=yield Ps}catch(Hs){let ya="fetch-client-network";throw"AbortError"===(null===(me=Hs)||void 0===me?void 0:me.name)&&(ya="fetch-timeout"),gr.create(ya,{originalErrorMessage:null===($e=Hs)||void 0===$e?void 0:$e.message})}let Cs=ho.status;const iu=ho.headers.get("ETag")||void 0;let $s,su;if(200===ho.status){let Hs;try{Hs=yield ho.json()}catch(ya){throw gr.create("fetch-client-parse",{originalErrorMessage:null===(nt=ya)||void 0===nt?void 0:nt.message})}$s=Hs.entries,su=Hs.state}if("INSTANCE_STATE_UNSPECIFIED"===su?Cs=500:"NO_CHANGE"===su?Cs=304:("NO_TEMPLATE"===su||"EMPTY_CONFIG"===su)&&($s={}),304!==Cs&&200!==Cs)throw gr.create("fetch-status",{httpStatus:Cs});return{status:Cs,eTag:iu,config:$s}})()}}class ve{constructor(j,X){this.client=j,this.storage=X}fetch(j){var X=this;return(0,ie.Z)(function*(){const me=(yield X.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return X.attemptFetch(j,me)})()}attemptFetch(j,{throttleEndTimeMillis:X,backoffCount:me}){var $e=this;return(0,ie.Z)(function*(){yield function qn(F,j){return new Promise((X,me)=>{const $e=Math.max(j-Date.now(),0),nt=setTimeout(X,$e);F.addEventListener(()=>{clearTimeout(nt),me(gr.create("fetch-throttle",{throttleEndTimeMillis:j}))})})}(j.signal,X);try{const nt=yield $e.client.fetch(j);return yield $e.storage.deleteThrottleMetadata(),nt}catch(nt){if(!function Ie(F){if(!(F instanceof De.ZR&&F.customData))return!1;const j=Number(F.customData.httpStatus);return 429===j||500===j||503===j||504===j}(nt))throw nt;const bt={throttleEndTimeMillis:Date.now()+(0,De.$s)(me),backoffCount:me+1};return yield $e.storage.setThrottleMetadata(bt),$e.attemptFetch(j,bt)}})()}}class Mt{constructor(j,X,me,$e,nt){this.app=j,this._client=X,this._storageCache=me,this._storage=$e,this._logger=nt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Gt(F,j){var X;const me=F.target.error||void 0;return gr.create(j,{originalErrorMessage:me&&(null===(X=me)||void 0===X?void 0:X.message)})}const Zn="app_namespace_store";class jr{constructor(j,X,me,$e=function Dn(){return new Promise((F,j)=>{var X;try{const me=indexedDB.open("firebase_remote_config",1);me.onerror=$e=>{j(Gt($e,"storage-open"))},me.onsuccess=$e=>{F($e.target.result)},me.onupgradeneeded=$e=>{0===$e.oldVersion&&$e.target.result.createObjectStore(Zn,{keyPath:"compositeKey"})}}catch(me){j(gr.create("storage-open",{originalErrorMessage:null===(X=me)||void 0===X?void 0:X.message}))}})}()){this.appId=j,this.appName=X,this.namespace=me,this.openDbPromise=$e}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(j){return this.set("last_fetch_status",j)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(j){return this.set("last_successful_fetch_timestamp_millis",j)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(j){return this.set("last_successful_fetch_response",j)}getActiveConfig(){return this.get("active_config")}setActiveConfig(j){return this.set("active_config",j)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(j){return this.set("active_config_etag",j)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(j){return this.set("throttle_metadata",j)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(j){var X=this;return(0,ie.Z)(function*(){const me=yield X.openDbPromise;return new Promise(($e,nt)=>{var bt;const Pn=me.transaction([Zn],"readonly").objectStore(Zn),Hn=X.createCompositeKey(j);try{const Kn=Pn.get(Hn);Kn.onerror=Cn=>{nt(Gt(Cn,"storage-get"))},Kn.onsuccess=Cn=>{const yi=Cn.target.result;$e(yi?yi.value:void 0)}}catch(Kn){nt(gr.create("storage-get",{originalErrorMessage:null===(bt=Kn)||void 0===bt?void 0:bt.message}))}})})()}set(j,X){var me=this;return(0,ie.Z)(function*(){const $e=yield me.openDbPromise;return new Promise((nt,bt)=>{var Pt;const Hn=$e.transaction([Zn],"readwrite").objectStore(Zn),Kn=me.createCompositeKey(j);try{const Cn=Hn.put({compositeKey:Kn,value:X});Cn.onerror=yi=>{bt(Gt(yi,"storage-set"))},Cn.onsuccess=()=>{nt()}}catch(Cn){bt(gr.create("storage-set",{originalErrorMessage:null===(Pt=Cn)||void 0===Pt?void 0:Pt.message}))}})})()}delete(j){var X=this;return(0,ie.Z)(function*(){const me=yield X.openDbPromise;return new Promise(($e,nt)=>{var bt;const Pn=me.transaction([Zn],"readwrite").objectStore(Zn),Hn=X.createCompositeKey(j);try{const Kn=Pn.delete(Hn);Kn.onerror=Cn=>{nt(Gt(Cn,"storage-delete"))},Kn.onsuccess=()=>{$e()}}catch(Kn){nt(gr.create("storage-delete",{originalErrorMessage:null===(bt=Kn)||void 0===bt?void 0:bt.message}))}})})()}createCompositeKey(j){return[this.appId,this.appName,this.namespace,j].join()}}class yo{constructor(j){this.storage=j}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var j=this;return(0,ie.Z)(function*(){const X=j.storage.getLastFetchStatus(),me=j.storage.getLastSuccessfulFetchTimestampMillis(),$e=j.storage.getActiveConfig(),nt=yield X;nt&&(j.lastFetchStatus=nt);const bt=yield me;bt&&(j.lastSuccessfulFetchTimestampMillis=bt);const Pt=yield $e;Pt&&(j.activeConfig=Pt)})()}setLastFetchStatus(j){return this.lastFetchStatus=j,this.storage.setLastFetchStatus(j)}setLastSuccessfulFetchTimestampMillis(j){return this.lastSuccessfulFetchTimestampMillis=j,this.storage.setLastSuccessfulFetchTimestampMillis(j)}setActiveConfig(j){return this.activeConfig=j,this.storage.setActiveConfig(j)}}function vs(){return _o.apply(this,arguments)}function _o(){return(_o=(0,ie.Z)(function*(){if(!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch(F){return!1}})).apply(this,arguments)}!function Vi(){(0,Se._registerComponent)(new Re.wA("remote-config",function F(j,{instanceIdentifier:X}){const me=j.getProvider("app").getImmediate(),$e=j.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw gr.create("registration-window");if(!(0,De.hl)())throw gr.create("indexed-db-unavailable");const{projectId:nt,apiKey:bt,appId:Pt}=me.options;if(!nt)throw gr.create("registration-project-id");if(!bt)throw gr.create("registration-api-key");if(!Pt)throw gr.create("registration-app-id");const Pn=new jr(Pt,me.name,X=X||"firebase"),Hn=new yo(Pn),Kn=new Ve.Yd(Fi);Kn.logLevel=Ve.in.ERROR;const Cn=new _r($e,Se.SDK_VERSION,X,nt,bt,Pt),yi=new ve(Cn,Pn),Ps=new ss(yi,Pn,Hn,Kn),js=new Mt(me,Ps,Hn,Pn,Kn);return function Tn(F){const j=(0,De.m9)(F);j._initializePromise||(j._initializePromise=j._storageCache.loadFromStorage().then(()=>{j._isInitializationComplete=!0}))}(js),js},"PUBLIC").setMultipleInstances(!0)),(0,Se.registerVersion)(Fi,"0.3.10"),(0,Se.registerVersion)(Fi,"0.3.10","esm2017")}();const Ro="/firebase-messaging-sw.js",Or="/firebase-cloud-messaging-push-scope",Ki="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xs="google.c.a.c_id",vo="google.c.a.c_l",Rs="google.c.a.ts",ba="google.c.a.e";var no=(()=>{return(F=no||(no={})).PUSH_RECEIVED="push-received",F.NOTIFICATION_CLICKED="notification-clicked",no;var F})();function Di(F){const j=new Uint8Array(F);return btoa(String.fromCharCode(...j)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function os(F){const X=(F+"=".repeat((4-F.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),me=atob(X),$e=new Uint8Array(me.length);for(let nt=0;nt<me.length;++nt)$e[nt]=me.charCodeAt(nt);return $e}const _n="fcm_token_details_db",ui="fcm_token_object_Store";function Eo(F){return ti.apply(this,arguments)}function ti(){return ti=(0,ie.Z)(function*(F){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(nt=>nt.name).includes(_n))return null;let j=null;return(yield(0,Me.X3)(_n,5,{upgrade:(me=(0,ie.Z)(function*($e,nt,bt,Pt){var Pn;if(nt<2||!$e.objectStoreNames.contains(ui))return;const Hn=Pt.objectStore(ui),Kn=yield Hn.index("fcmSenderId").get(F);if(yield Hn.clear(),Kn)if(2===nt){const Cn=Kn;if(!Cn.auth||!Cn.p256dh||!Cn.endpoint)return;j={token:Cn.fcmToken,createTime:null!==(Pn=Cn.createTime)&&void 0!==Pn?Pn:Date.now(),subscriptionOptions:{auth:Cn.auth,p256dh:Cn.p256dh,endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:"string"==typeof Cn.vapidKey?Cn.vapidKey:Di(Cn.vapidKey)}}}else if(3===nt){const Cn=Kn;j={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:Di(Cn.auth),p256dh:Di(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:Di(Cn.vapidKey)}}}else if(4===nt){const Cn=Kn;j={token:Cn.fcmToken,createTime:Cn.createTime,subscriptionOptions:{auth:Di(Cn.auth),p256dh:Di(Cn.p256dh),endpoint:Cn.endpoint,swScope:Cn.swScope,vapidKey:Di(Cn.vapidKey)}}}}),function(nt,bt,Pt,Pn){return me.apply(this,arguments)})})).close(),yield(0,Me.Lj)(_n),yield(0,Me.Lj)("fcm_vapid_details_db"),yield(0,Me.Lj)("undefined"),Ms(j)?j:null;var me}),ti.apply(this,arguments)}function Ms(F){if(!F||!F.subscriptionOptions)return!1;const{subscriptionOptions:j}=F;return"number"==typeof F.createTime&&F.createTime>0&&"string"==typeof F.token&&F.token.length>0&&"string"==typeof j.auth&&j.auth.length>0&&"string"==typeof j.p256dh&&j.p256dh.length>0&&"string"==typeof j.endpoint&&j.endpoint.length>0&&"string"==typeof j.swScope&&j.swScope.length>0&&"string"==typeof j.vapidKey&&j.vapidKey.length>0}const Jr="firebase-messaging-store";let ro=null;function tr(){return ro||(ro=(0,Me.X3)("firebase-messaging-database",1,{upgrade:(F,j)=>{0===j&&F.createObjectStore(Jr)}})),ro}function U(F){return Q.apply(this,arguments)}function Q(){return(Q=(0,ie.Z)(function*(F){const j=mt(F),me=yield(yield tr()).transaction(Jr).objectStore(Jr).get(j);if(me)return me;{const $e=yield Eo(F.appConfig.senderId);if($e)return yield V(F,$e),$e}})).apply(this,arguments)}function V(F,j){return ne.apply(this,arguments)}function ne(){return(ne=(0,ie.Z)(function*(F,j){const X=mt(F),$e=(yield tr()).transaction(Jr,"readwrite");return yield $e.objectStore(Jr).put(j,X),yield $e.done,j})).apply(this,arguments)}function _e(F){return et.apply(this,arguments)}function et(){return(et=(0,ie.Z)(function*(F){const j=mt(F),me=(yield tr()).transaction(Jr,"readwrite");yield me.objectStore(Jr).delete(j),yield me.done})).apply(this,arguments)}function mt({appConfig:F}){return F.appId}const Sn=new De.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ir(F,j){return jn.apply(this,arguments)}function jn(){return(jn=(0,ie.Z)(function*(F,j){var X;const me=yield Hr(F),$e=qi(j),nt={method:"POST",headers:me,body:JSON.stringify($e)};let bt;try{bt=yield(yield fetch(Ui(F.appConfig),nt)).json()}catch(Pt){throw Sn.create("token-subscribe-failed",{errorInfo:null===(X=Pt)||void 0===X?void 0:X.toString()})}if(bt.error)throw Sn.create("token-subscribe-failed",{errorInfo:bt.error.message});if(!bt.token)throw Sn.create("token-subscribe-no-token");return bt.token})).apply(this,arguments)}function cn(F,j){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,ie.Z)(function*(F,j){var X;const me=yield Hr(F),$e=qi(j.subscriptionOptions),nt={method:"PATCH",headers:me,body:JSON.stringify($e)};let bt;try{bt=yield(yield fetch(`${Ui(F.appConfig)}/${j.token}`,nt)).json()}catch(Pt){throw Sn.create("token-update-failed",{errorInfo:null===(X=Pt)||void 0===X?void 0:X.toString()})}if(bt.error)throw Sn.create("token-update-failed",{errorInfo:bt.error.message});if(!bt.token)throw Sn.create("token-update-no-token");return bt.token})).apply(this,arguments)}function Ar(F,j){return kr.apply(this,arguments)}function kr(){return(kr=(0,ie.Z)(function*(F,j){var X;const $e={method:"DELETE",headers:yield Hr(F)};try{const bt=yield(yield fetch(`${Ui(F.appConfig)}/${j}`,$e)).json();if(bt.error)throw Sn.create("token-unsubscribe-failed",{errorInfo:bt.error.message})}catch(nt){throw Sn.create("token-unsubscribe-failed",{errorInfo:null===(X=nt)||void 0===X?void 0:X.toString()})}})).apply(this,arguments)}function Ui({projectId:F}){return`https://fcmregistrations.googleapis.com/v1/projects/${F}/registrations`}function Hr(F){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,ie.Z)(function*({appConfig:F,installations:j}){const X=yield j.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":F.apiKey,"x-goog-firebase-installations-auth":`FIS ${X}`})})).apply(this,arguments)}function qi({p256dh:F,auth:j,endpoint:X,vapidKey:me}){const $e={web:{endpoint:X,auth:j,p256dh:F}};return me!==Ki&&($e.web.applicationPubKey=me),$e}const Nn=6048e5;function io(F){return ds.apply(this,arguments)}function ds(){return(ds=(0,ie.Z)(function*(F){const j=yield ae(F.swRegistration,F.vapidKey),X={vapidKey:F.vapidKey,swScope:F.swRegistration.scope,endpoint:j.endpoint,auth:Di(j.getKey("auth")),p256dh:Di(j.getKey("p256dh"))},me=yield U(F.firebaseDependencies);if(me){if(Ke(me.subscriptionOptions,X))return Date.now()>=me.createTime+Nn?k(F,{token:me.token,createTime:Date.now(),subscriptionOptions:X}):me.token;try{yield Ar(F.firebaseDependencies,me.token)}catch($e){console.warn($e)}return R(F.firebaseDependencies,X)}return R(F.firebaseDependencies,X)})).apply(this,arguments)}function H(F){return L.apply(this,arguments)}function L(){return(L=(0,ie.Z)(function*(F){const j=yield U(F.firebaseDependencies);j&&(yield Ar(F.firebaseDependencies,j.token),yield _e(F.firebaseDependencies));const X=yield F.swRegistration.pushManager.getSubscription();return!X||X.unsubscribe()})).apply(this,arguments)}function k(F,j){return E.apply(this,arguments)}function E(){return(E=(0,ie.Z)(function*(F,j){try{const X=yield cn(F.firebaseDependencies,j),me=Object.assign(Object.assign({},j),{token:X,createTime:Date.now()});return yield V(F.firebaseDependencies,me),X}catch(X){throw yield H(F),X}})).apply(this,arguments)}function R(F,j){return Y.apply(this,arguments)}function Y(){return(Y=(0,ie.Z)(function*(F,j){const me={token:yield ir(F,j),createTime:Date.now(),subscriptionOptions:j};return yield V(F,me),me.token})).apply(this,arguments)}function ae(F,j){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,ie.Z)(function*(F,j){return(yield F.pushManager.getSubscription())||F.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:os(j)})})).apply(this,arguments)}function Ke(F,j){return j.vapidKey===F.vapidKey&&j.endpoint===F.endpoint&&j.auth===F.auth&&j.p256dh===F.p256dh}function yt(F){const j={from:F.from,collapseKey:F.collapse_key,messageId:F.fcmMessageId};return function Kt(F,j){if(!j.notification)return;F.notification={};const X=j.notification.title;X&&(F.notification.title=X);const me=j.notification.body;me&&(F.notification.body=me);const $e=j.notification.image;$e&&(F.notification.image=$e)}(j,F),function Ut(F,j){!j.data||(F.data=j.data)}(j,F),function $n(F,j){var X,me,$e,nt,bt;if(!j.fcmOptions&&!(null===(X=j.notification)||void 0===X?void 0:X.click_action))return;F.fcmOptions={};const Pt=null!==($e=null===(me=j.fcmOptions)||void 0===me?void 0:me.link)&&void 0!==$e?$e:null===(nt=j.notification)||void 0===nt?void 0:nt.click_action;Pt&&(F.fcmOptions.link=Pt);const Pn=null===(bt=j.fcmOptions)||void 0===bt?void 0:bt.analytics_label;Pn&&(F.fcmOptions.analyticsLabel=Pn)}(j,F),j}function Qn(F){return"object"==typeof F&&!!F&&xs in F}function xr(F,j){const X=[];for(let me=0;me<F.length;me++)X.push(F.charAt(me)),me<j.length&&X.push(j.charAt(me));return X.join("")}function nr(F){return Sn.create("missing-app-config-values",{valueName:F})}xr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Fr{constructor(j,X,me){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const $e=function Ir(F){if(!F||!F.options)throw nr("App Configuration Object");if(!F.name)throw nr("App Name");const j=["projectId","apiKey","appId","messagingSenderId"],{options:X}=F;for(const me of j)if(!X[me])throw nr(me);return{appName:F.name,projectId:X.projectId,apiKey:X.apiKey,appId:X.appId,senderId:X.messagingSenderId}}(j);this.firebaseDependencies={app:j,appConfig:$e,installations:X,analyticsProvider:me}}_delete(){return Promise.resolve()}}function Mi(F){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,ie.Z)(function*(F){var j;try{F.swRegistration=yield navigator.serviceWorker.register(Ro,{scope:Or}),F.swRegistration.update().catch(()=>{})}catch(X){throw Sn.create("failed-service-worker-registration",{browserErrorMessage:null===(j=X)||void 0===j?void 0:j.message})}})).apply(this,arguments)}function ri(F,j){return zs.apply(this,arguments)}function zs(){return(zs=(0,ie.Z)(function*(F,j){if(!j&&!F.swRegistration&&(yield Mi(F)),j||!F.swRegistration){if(!(j instanceof ServiceWorkerRegistration))throw Sn.create("invalid-sw-registration");F.swRegistration=j}})).apply(this,arguments)}function lr(F,j){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,ie.Z)(function*(F,j){j?F.vapidKey=j:F.vapidKey||(F.vapidKey=Ki)})).apply(this,arguments)}function wo(){return(wo=(0,ie.Z)(function*(F,j){if(!navigator)throw Sn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Sn.create("permission-blocked");return yield lr(F,null==j?void 0:j.vapidKey),yield ri(F,null==j?void 0:j.serviceWorkerRegistration),io(F)})).apply(this,arguments)}function Mo(F,j,X){return No.apply(this,arguments)}function No(){return(No=(0,ie.Z)(function*(F,j,X){const me=Io(j);(yield F.firebaseDependencies.analyticsProvider.get()).logEvent(me,{message_id:X[xs],message_name:X[vo],message_time:X[Rs],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Io(F){switch(F){case no.NOTIFICATION_CLICKED:return"notification_open";case no.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Da(){return(Da=(0,ie.Z)(function*(F,j){const X=j.data;if(!X.isFirebaseMessaging)return;F.onMessageHandler&&X.messageType===no.PUSH_RECEIVED&&("function"==typeof F.onMessageHandler?F.onMessageHandler(yt(X)):F.onMessageHandler.next(yt(X)));const me=X.data;Qn(me)&&"1"===me[ba]&&(yield Mo(F,X.messageType,me))})).apply(this,arguments)}const oo="@firebase/messaging",ao=F=>{const j=new Fr(F.getProvider("app").getImmediate(),F.getProvider("installations-internal").getImmediate(),F.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",X=>function mu(F,j){return Da.apply(this,arguments)}(j,X)),j},uo=F=>{const j=F.getProvider("messaging").getImmediate();return{getToken:me=>function so(F,j){return wo.apply(this,arguments)}(j,me)}};function Qo(){return da.apply(this,arguments)}function da(){return(da=(0,ie.Z)(function*(){try{yield(0,De.eu)()}catch(F){return!1}return"undefined"!=typeof window&&(0,De.hl)()&&(0,De.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function nu(){(0,Se._registerComponent)(new Re.wA("messaging",ao,"PUBLIC")),(0,Se._registerComponent)(new Re.wA("messaging-internal",uo,"PRIVATE")),(0,Se.registerVersion)(oo,"0.9.15"),(0,Se.registerVersion)(oo,"0.9.15","esm2017")}();const Jo="analytics",yu="firebase_id",ws="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ks="https://www.googletagmanager.com/gtag/js",Rr=new Ve.Yd("@firebase/analytics");function ju(F){return Promise.all(F.map(j=>j.catch(X=>X)))}function qs(F,j){const X=document.createElement("script");X.src=`${Ks}?l=${F}&id=${j}`,X.async=!0,document.head.appendChild(X)}function Sa(F,j,X,me,$e,nt){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,ie.Z)(function*(F,j,X,me,$e,nt){const bt=me[$e];try{if(bt)yield j[bt];else{const Pn=(yield ju(X)).find(Hn=>Hn.measurementId===$e);Pn&&(yield j[Pn.appId])}}catch(Pt){Rr.error(Pt)}F("config",$e,nt)})).apply(this,arguments)}function Oo(F,j,X,me,$e){return $o.apply(this,arguments)}function $o(){return($o=(0,ie.Z)(function*(F,j,X,me,$e){try{let nt=[];if($e&&$e.send_to){let bt=$e.send_to;Array.isArray(bt)||(bt=[bt]);const Pt=yield ju(X);for(const Pn of bt){const Hn=Pt.find(Cn=>Cn.measurementId===Pn),Kn=Hn&&j[Hn.appId];if(!Kn){nt=[];break}nt.push(Kn)}}0===nt.length&&(nt=Object.values(j)),yield Promise.all(nt),F("event",me,$e||{})}catch(nt){Rr.error(nt)}})).apply(this,arguments)}function _u(){const F=window.document.getElementsByTagName("script");for(const j of Object.values(F))if(j.src&&j.src.includes(Ks))return j;return null}const zn=new De.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),vu=new class Ns{constructor(j={},X=1e3){this.throttleMetadata=j,this.intervalMillis=X}getThrottleMetadata(j){return this.throttleMetadata[j]}setThrottleMetadata(j,X){this.throttleMetadata[j]=X}deleteThrottleMetadata(j){delete this.throttleMetadata[j]}};function Eu(F){return new Headers({Accept:"application/json","x-goog-api-key":F})}function Is(F){return wu.apply(this,arguments)}function wu(){return(wu=(0,ie.Z)(function*(F){var j;const{appId:X,apiKey:me}=F,$e={method:"GET",headers:Eu(me)},nt=ws.replace("{app-id}",X),bt=yield fetch(nt,$e);if(200!==bt.status&&304!==bt.status){let Pt="";try{const Pn=yield bt.json();(null===(j=Pn.error)||void 0===j?void 0:j.message)&&(Pt=Pn.error.message)}catch(Pn){}throw zn.create("config-fetch-failed",{httpStatus:bt.status,responseMessage:Pt})}return bt.json()})).apply(this,arguments)}function Mr(F){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,ie.Z)(function*(F,j=vu,X){const{appId:me,apiKey:$e,measurementId:nt}=F.options;if(!me)throw zn.create("no-app-id");if(!$e){if(nt)return{measurementId:nt,appId:me};throw zn.create("no-api-key")}const bt=j.getThrottleMetadata(me)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Pt=new ru;return setTimeout((0,ie.Z)(function*(){Pt.abort()}),void 0!==X?X:6e4),Js({appId:me,apiKey:$e,measurementId:nt},bt,Pt,j)})).apply(this,arguments)}function Js(F,j,X){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,ie.Z)(function*(F,{throttleEndTimeMillis:j,backoffCount:X},me,$e=vu){var nt,bt;const{appId:Pt,measurementId:Pn}=F;try{yield bo(me,j)}catch(Hn){if(Pn)return Rr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pn} provided in the "measurementId" field in the local Firebase config. [${null===(nt=Hn)||void 0===nt?void 0:nt.message}]`),{appId:Pt,measurementId:Pn};throw Hn}try{const Hn=yield Is(F);return $e.deleteThrottleMetadata(Pt),Hn}catch(Hn){const Kn=Hn;if(!ea(Kn)){if($e.deleteThrottleMetadata(Pt),Pn)return Rr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pn} provided in the "measurementId" field in the local Firebase config. [${null==Kn?void 0:Kn.message}]`),{appId:Pt,measurementId:Pn};throw Hn}const Cn=503===Number(null===(bt=null==Kn?void 0:Kn.customData)||void 0===bt?void 0:bt.httpStatus)?(0,De.$s)(X,$e.intervalMillis,30):(0,De.$s)(X,$e.intervalMillis),yi={throttleEndTimeMillis:Date.now()+Cn,backoffCount:X+1};return $e.setThrottleMetadata(Pt,yi),Rr.debug(`Calling attemptFetch again in ${Cn} millis`),Js(F,yi,me,$e)}})).apply(this,arguments)}function bo(F,j){return new Promise((X,me)=>{const $e=Math.max(j-Date.now(),0),nt=setTimeout(X,$e);F.addEventListener(()=>{clearTimeout(nt),me(zn.create("fetch-throttle",{throttleEndTimeMillis:j}))})})}function ea(F){if(!(F instanceof De.ZR&&F.customData))return!1;const j=Number(F.customData.httpStatus);return 429===j||500===j||503===j||504===j}class ru{constructor(){this.listeners=[]}addEventListener(j){this.listeners.push(j)}abort(){this.listeners.forEach(j=>j())}}function dl(){return At.apply(this,arguments)}function At(){return(At=(0,ie.Z)(function*(){var F;if(!(0,De.hl)())return Rr.warn(zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,De.eu)()}catch(j){return Rr.warn(zn.create("indexeddb-unavailable",{errorInfo:null===(F=j)||void 0===F?void 0:F.toString()}).message),!1}return!0})).apply(this,arguments)}function Ho(){return(Ho=(0,ie.Z)(function*(F,j,X,me,$e,nt,bt){var Pt;const Pn=Mr(F);Pn.then(Ps=>{X[Ps.measurementId]=Ps.appId,F.options.measurementId&&Ps.measurementId!==F.options.measurementId&&Rr.warn(`The measurement ID in the local Firebase config (${F.options.measurementId}) does not match the measurement ID fetched from the server (${Ps.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ps=>Rr.error(Ps)),j.push(Pn);const Hn=dl().then(Ps=>{if(Ps)return me.getId()}),[Kn,Cn]=yield Promise.all([Pn,Hn]);_u()||qs(nt,Kn.measurementId),$e("js",new Date);const yi=null!==(Pt=null==bt?void 0:bt.config)&&void 0!==Pt?Pt:{};return yi.origin="firebase",yi.update=!0,null!=Cn&&(yi[yu]=Cn),$e("config",Kn.measurementId,yi),Kn.measurementId})).apply(this,arguments)}class ta{constructor(j){this.app=j}_delete(){return delete S[this.app.options.appId],Promise.resolve()}}let S={},D=[];const b={};let K,he,N="dataLayer",Te=!1;function dr(F,j,X){!function Xt(){const F=[];if((0,De.ru)()&&F.push("This is a browser extension environment."),(0,De.zI)()||F.push("Cookies are not available."),F.length>0){const j=F.map((me,$e)=>`(${$e+1}) ${me}`).join(" "),X=zn.create("invalid-analytics-context",{errorInfo:j});Rr.warn(X.message)}}();const me=F.options.appId;if(!me)throw zn.create("no-app-id");if(!F.options.apiKey){if(!F.options.measurementId)throw zn.create("no-api-key");Rr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${F.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=S[me])throw zn.create("already-exists",{id:me});if(!Te){!function Zs(F){let j=[];Array.isArray(window[F])?j=window[F]:window[F]=j}(N);const{wrappedGtag:nt,gtagCore:bt}=function us(F,j,X,me,$e){let nt=function(...bt){window[me].push(arguments)};return window[$e]&&"function"==typeof window[$e]&&(nt=window[$e]),window[$e]=function Xo(F,j,X,me){function nt(){return(nt=(0,ie.Z)(function*(bt,Pt,Pn){try{"event"===bt?yield Oo(F,j,X,Pt,Pn):"config"===bt?yield Sa(F,j,X,me,Pt,Pn):F("set",Pt)}catch(Hn){Rr.error(Hn)}})).apply(this,arguments)}return function $e(bt,Pt,Pn){return nt.apply(this,arguments)}}(nt,F,j,X),{gtagCore:nt,wrappedGtag:window[$e]}}(S,D,b,N,"gtag");he=nt,K=bt,Te=!0}return S[me]=function gi(F,j,X,me,$e,nt,bt){return Ho.apply(this,arguments)}(F,D,b,j,K,N,X),new ta(F)}function Vr(){return(Vr=(0,ie.Z)(function*(F,j,X,me,$e){if($e&&$e.global)F("event",X,me);else{const nt=yield j;F("event",X,Object.assign(Object.assign({},me),{send_to:nt}))}})).apply(this,arguments)}function hl(){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,ie.Z)(function*(){if((0,De.ru)()||!(0,De.zI)()||!(0,De.hl)())return!1;try{return yield(0,De.eu)()}catch(F){return!1}})).apply(this,arguments)}const Ra="@firebase/analytics";!function fl(){(0,Se._registerComponent)(new Re.wA(Jo,(j,{options:X})=>dr(j.getProvider("app").getImmediate(),j.getProvider("installations-internal").getImmediate(),X),"PUBLIC")),(0,Se._registerComponent)(new Re.wA("analytics-internal",function F(j){try{const X=j.getProvider(Jo).getImmediate();return{logEvent:(me,$e,nt)=>function Ll(F,j,X,me){F=(0,De.m9)(F),function dn(F,j,X,me,$e){return Vr.apply(this,arguments)}(he,S[F.app.options.appId],j,X,me).catch($e=>Rr.error($e))}(X,me,$e,nt)}}catch(X){throw zn.create("interop-component-reg-failed",{reason:X})}},"PRIVATE")),(0,Se.registerVersion)(Ra,"0.7.11"),(0,Se.registerVersion)(Ra,"0.7.11","esm2017")}();var Iu=B(4408),Gr=B(7565);const Ba=new class Gu extends Gr.v{}(class Bc extends Iu.o{constructor(j,X){super(j,X),this.scheduler=j,this.work=X}schedule(j,X=0){return X>0?super.schedule(j,X):(this.delay=X,this.state=j,this.scheduler.flush(this),this)}execute(j,X){return X>0||this.closed?super.execute(j,X):this._execute(j,X)}requestAsyncId(j,X,me=0){return null!=me&&me>0||null==me&&this.delay>0?super.requestAsyncId(j,X,me):j.flush(this)}});var fa=B(4986),co=B(8505),Je=B(5363),ja=B(9468);const Us=new _.GfV("7.4.1"),pa="__angularfire_symbol__analyticsIsSupportedValue",ra="__angularfire_symbol__analyticsIsSupported",Do="__angularfire_symbol__remoteConfigIsSupportedValue",Ma="__angularfire_symbol__remoteConfigIsSupported",ga="__angularfire_symbol__messagingIsSupportedValue",Wu="__angularfire_symbol__messagingIsSupported";function Ha(F,j,X){if(j){if(1===j.length)return j[0];const nt=j.filter(bt=>bt.app===X);if(1===nt.length)return nt[0]}return X.container.getProvider(F).getImmediate({optional:!0})}globalThis[ra]||(globalThis[ra]=hl().then(F=>globalThis[pa]=F).catch(()=>globalThis[pa]=!1)),globalThis[Wu]||(globalThis[Wu]=Qo().then(F=>globalThis[ga]=F).catch(()=>globalThis[ga]=!1)),globalThis[Ma]||(globalThis[Ma]=vs().then(F=>globalThis[Do]=F).catch(()=>globalThis[Do]=!1));const Na=(F,j)=>{const X=j?[j]:(0,te.C6)(),me=[];return X.forEach($e=>{$e.container.getProvider(F).instances.forEach(bt=>{me.includes(bt)||me.push(bt)})}),me};function ma(){}class ii{constructor(j,X=Ba){this.zone=j,this.delegate=X}now(){return this.delegate.now()}schedule(j,X,me){const $e=this.zone;return this.delegate.schedule(function(bt){$e.runGuarded(()=>{j.apply(this,[bt])})},X,me)}}class Pa{constructor(j){this.zone=j,this.task=null}call(j,X){const me=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ma,{},ma,ma)),X.pipe((0,co.b)({next:me,complete:me,error:me})).subscribe(j).add(me)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ps=(()=>{class F{constructor(X){this.ngZone=X,this.outsideAngular=X.runOutsideAngular(()=>new ii(Zone.current)),this.insideAngular=X.run(()=>new ii(Zone.current,fa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return F.\u0275fac=function(X){return new(X||F)(_.LFG(_.R0b))},F.\u0275prov=_.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})();function Nr(){const F=globalThis.\u0275AngularFireScheduler;if(!F)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return F}function ls(F){return F.pipe((0,Je.Q)(Nr().outsideAngular))}function $i(F){return Nr(),function Wo(F){return function(X){return(X=X.lift(new Pa(F.ngZone))).pipe((0,ja.R)(F.outsideAngular),(0,Je.Q)(F.insideAngular))}}(Nr())(F)}},2090:(Ot,We,B)=>{B.d(We,{BH:()=>Tt,LL:()=>Ze,ZR:()=>Qe,gQ:()=>Sr,zI:()=>ge,hu:()=>te,g5:()=>ie,US:()=>Re,tV:()=>Ue,h$:()=>Ve,L:()=>Me,$s:()=>vi,r3:()=>Mn,Sg:()=>at,ne:()=>Yn,p$:()=>ce,vZ:()=>sr,ZB:()=>oe,gK:()=>di,pd:()=>Bn,m9:()=>fn,z$:()=>Xe,GJ:()=>Yt,jU:()=>pt,ru:()=>xe,d:()=>ht,xb:()=>tn,w1:()=>W,hl:()=>ue,uI:()=>gt,UG:()=>tt,Yr:()=>Et,b$:()=>kt,G6:()=>Ct,Mn:()=>Ge,w9:()=>Bt,cI:()=>en,UI:()=>Cr,xO:()=>Xn,zd:()=>fr,DV:()=>Vt,ug:()=>Lt,dS:()=>vr,Pz:()=>Wt,Dv:()=>Wi,Wj:()=>zr,lb:()=>hi,eu:()=>lt});const te=function(Oe,ye){if(!Oe)throw ie(ye)},ie=function(Oe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Oe)},Se=function(Oe){const ye=[];let He=0;for(let ke=0;ke<Oe.length;ke++){let pe=Oe.charCodeAt(ke);pe<128?ye[He++]=pe:pe<2048?(ye[He++]=pe>>6|192,ye[He++]=63&pe|128):55296==(64512&pe)&&ke+1<Oe.length&&56320==(64512&Oe.charCodeAt(ke+1))?(pe=65536+((1023&pe)<<10)+(1023&Oe.charCodeAt(++ke)),ye[He++]=pe>>18|240,ye[He++]=pe>>12&63|128,ye[He++]=pe>>6&63|128,ye[He++]=63&pe|128):(ye[He++]=pe>>12|224,ye[He++]=pe>>6&63|128,ye[He++]=63&pe|128)}return ye},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Oe,ye){if(!Array.isArray(Oe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const He=ye?this.byteToCharMapWebSafe_:this.byteToCharMap_,ke=[];for(let pe=0;pe<Oe.length;pe+=3){const qe=Oe[pe],St=pe+1<Oe.length,$t=St?Oe[pe+1]:0,pn=pe+2<Oe.length,or=pn?Oe[pe+2]:0;let rr=(15&$t)<<2|or>>6,zi=63&or;pn||(zi=64,St||(rr=64)),ke.push(He[qe>>2],He[(3&qe)<<4|$t>>4],He[rr],He[zi])}return ke.join("")},encodeString(Oe,ye){return this.HAS_NATIVE_SUPPORT&&!ye?btoa(Oe):this.encodeByteArray(Se(Oe),ye)},decodeString(Oe,ye){return this.HAS_NATIVE_SUPPORT&&!ye?atob(Oe):function(Oe){const ye=[];let He=0,ke=0;for(;He<Oe.length;){const pe=Oe[He++];if(pe<128)ye[ke++]=String.fromCharCode(pe);else if(pe>191&&pe<224){const qe=Oe[He++];ye[ke++]=String.fromCharCode((31&pe)<<6|63&qe)}else if(pe>239&&pe<365){const pn=((7&pe)<<18|(63&Oe[He++])<<12|(63&Oe[He++])<<6|63&Oe[He++])-65536;ye[ke++]=String.fromCharCode(55296+(pn>>10)),ye[ke++]=String.fromCharCode(56320+(1023&pn))}else{const qe=Oe[He++],St=Oe[He++];ye[ke++]=String.fromCharCode((15&pe)<<12|(63&qe)<<6|63&St)}}return ye.join("")}(this.decodeStringToByteArray(Oe,ye))},decodeStringToByteArray(Oe,ye){this.init_();const He=ye?this.charToByteMapWebSafe_:this.charToByteMap_,ke=[];for(let pe=0;pe<Oe.length;){const qe=He[Oe.charAt(pe++)],$t=pe<Oe.length?He[Oe.charAt(pe)]:0;++pe;const or=pe<Oe.length?He[Oe.charAt(pe)]:64;++pe;const hn=pe<Oe.length?He[Oe.charAt(pe)]:64;if(++pe,null==qe||null==$t||null==or||null==hn)throw Error();ke.push(qe<<2|$t>>4),64!==or&&(ke.push($t<<4&240|or>>2),64!==hn&&ke.push(or<<6&192|hn))}return ke},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Oe=0;Oe<this.ENCODED_VALS.length;Oe++)this.byteToCharMap_[Oe]=this.ENCODED_VALS.charAt(Oe),this.charToByteMap_[this.byteToCharMap_[Oe]]=Oe,this.byteToCharMapWebSafe_[Oe]=this.ENCODED_VALS_WEBSAFE.charAt(Oe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Oe]]=Oe,Oe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Oe)]=Oe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Oe)]=Oe)}}},Ve=function(Oe){const ye=Se(Oe);return Re.encodeByteArray(ye,!0)},Me=function(Oe){return Ve(Oe).replace(/\./g,"")},Ue=function(Oe){try{return Re.decodeString(Oe,!0)}catch(ye){console.error("base64Decode failed: ",ye)}return null};function ce(Oe){return oe(void 0,Oe)}function oe(Oe,ye){if(!(ye instanceof Object))return ye;switch(ye.constructor){case Date:return new Date(ye.getTime());case Object:void 0===Oe&&(Oe={});break;case Array:Oe=[];break;default:return ye}for(const He in ye)!ye.hasOwnProperty(He)||!Ne(He)||(Oe[He]=oe(Oe[He],ye[He]));return Oe}function Ne(Oe){return"__proto__"!==Oe}class Tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((ye,He)=>{this.resolve=ye,this.reject=He})}wrapCallback(ye){return(He,ke)=>{He?this.reject(He):this.resolve(ke),"function"==typeof ye&&(this.promise.catch(()=>{}),1===ye.length?ye(He):ye(He,ke))}}}function at(Oe,ye){if(Oe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ke=ye||"demo-project",pe=Oe.iat||0,qe=Oe.sub||Oe.user_id;if(!qe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const St=Object.assign({iss:`https://securetoken.google.com/${ke}`,aud:ke,iat:pe,exp:pe+3600,auth_time:pe,sub:qe,user_id:qe,firebase:{sign_in_provider:"custom",identities:{}}},Oe);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(St)),""].join(".")}function Xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function gt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())}function tt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Oe){return!1}}function pt(){return"object"==typeof self&&self.self===self}function xe(){const Oe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Oe&&void 0!==Oe.id}function kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ht(){return Xe().indexOf("Electron/")>=0}function W(){const Oe=Xe();return Oe.indexOf("MSIE ")>=0||Oe.indexOf("Trident/")>=0}function Ge(){return Xe().indexOf("MSAppHost/")>=0}function Et(){return!1}function Ct(){return!tt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ue(){return"object"==typeof indexedDB}function lt(){return new Promise((Oe,ye)=>{try{let He=!0;const ke="validate-browser-context-for-indexeddb-analytics-module",pe=self.indexedDB.open(ke);pe.onsuccess=()=>{pe.result.close(),He||self.indexedDB.deleteDatabase(ke),Oe(!0)},pe.onupgradeneeded=()=>{He=!1},pe.onerror=()=>{var qe;ye((null===(qe=pe.error)||void 0===qe?void 0:qe.message)||"")}}catch(He){ye(He)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Qe extends Error{constructor(ye,He,ke){super(He),this.code=ye,this.customData=ke,this.name="FirebaseError",Object.setPrototypeOf(this,Qe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(ye,He,ke){this.service=ye,this.serviceName=He,this.errors=ke}create(ye,...He){const ke=He[0]||{},pe=`${this.service}/${ye}`,qe=this.errors[ye],St=qe?function wt(Oe,ye){return Oe.replace(Nt,(He,ke)=>{const pe=ye[ke];return null!=pe?String(pe):`<${ke}?>`})}(qe,ke):"Error";return new Qe(pe,`${this.serviceName}: ${St} (${pe}).`,ke)}}const Nt=/\{\$([^}]+)}/g;function en(Oe){return JSON.parse(Oe)}function Wt(Oe){return JSON.stringify(Oe)}const it=function(Oe){let ye={},He={},ke={},pe="";try{const qe=Oe.split(".");ye=en(Ue(qe[0])||""),He=en(Ue(qe[1])||""),pe=qe[2],ke=He.d||{},delete He.d}catch(qe){}return{header:ye,claims:He,data:ke,signature:pe}},Bt=function(Oe){const He=it(Oe).claims;return!!He&&"object"==typeof He&&He.hasOwnProperty("iat")},Yt=function(Oe){const ye=it(Oe).claims;return"object"==typeof ye&&!0===ye.admin};function Mn(Oe,ye){return Object.prototype.hasOwnProperty.call(Oe,ye)}function Vt(Oe,ye){if(Object.prototype.hasOwnProperty.call(Oe,ye))return Oe[ye]}function tn(Oe){for(const ye in Oe)if(Object.prototype.hasOwnProperty.call(Oe,ye))return!1;return!0}function Cr(Oe,ye,He){const ke={};for(const pe in Oe)Object.prototype.hasOwnProperty.call(Oe,pe)&&(ke[pe]=ye.call(He,Oe[pe],pe,Oe));return ke}function sr(Oe,ye){if(Oe===ye)return!0;const He=Object.keys(Oe),ke=Object.keys(ye);for(const pe of He){if(!ke.includes(pe))return!1;const qe=Oe[pe],St=ye[pe];if(Pr(qe)&&Pr(St)){if(!sr(qe,St))return!1}else if(qe!==St)return!1}for(const pe of ke)if(!He.includes(pe))return!1;return!0}function Pr(Oe){return null!==Oe&&"object"==typeof Oe}function Xn(Oe){const ye=[];for(const[He,ke]of Object.entries(Oe))Array.isArray(ke)?ke.forEach(pe=>{ye.push(encodeURIComponent(He)+"="+encodeURIComponent(pe))}):ye.push(encodeURIComponent(He)+"="+encodeURIComponent(ke));return ye.length?"&"+ye.join("&"):""}function fr(Oe){const ye={};return Oe.replace(/^\?/,"").split("&").forEach(ke=>{if(ke){const[pe,qe]=ke.split("=");ye[decodeURIComponent(pe)]=decodeURIComponent(qe)}}),ye}function Bn(Oe){const ye=Oe.indexOf("?");if(!ye)return"";const He=Oe.indexOf("#",ye);return Oe.substring(ye,He>0?He:void 0)}class Sr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let ye=1;ye<this.blockSize;++ye)this.pad_[ye]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(ye,He){He||(He=0);const ke=this.W_;if("string"==typeof ye)for(let hn=0;hn<16;hn++)ke[hn]=ye.charCodeAt(He)<<24|ye.charCodeAt(He+1)<<16|ye.charCodeAt(He+2)<<8|ye.charCodeAt(He+3),He+=4;else for(let hn=0;hn<16;hn++)ke[hn]=ye[He]<<24|ye[He+1]<<16|ye[He+2]<<8|ye[He+3],He+=4;for(let hn=16;hn<80;hn++){const rr=ke[hn-3]^ke[hn-8]^ke[hn-14]^ke[hn-16];ke[hn]=4294967295&(rr<<1|rr>>>31)}let or,ar,pe=this.chain_[0],qe=this.chain_[1],St=this.chain_[2],$t=this.chain_[3],pn=this.chain_[4];for(let hn=0;hn<80;hn++){hn<40?hn<20?(or=$t^qe&(St^$t),ar=1518500249):(or=qe^St^$t,ar=1859775393):hn<60?(or=qe&St|$t&(qe|St),ar=2400959708):(or=qe^St^$t,ar=3395469782);const rr=(pe<<5|pe>>>27)+or+pn+ar+ke[hn]&4294967295;pn=$t,$t=St,St=4294967295&(qe<<30|qe>>>2),qe=pe,pe=rr}this.chain_[0]=this.chain_[0]+pe&4294967295,this.chain_[1]=this.chain_[1]+qe&4294967295,this.chain_[2]=this.chain_[2]+St&4294967295,this.chain_[3]=this.chain_[3]+$t&4294967295,this.chain_[4]=this.chain_[4]+pn&4294967295}update(ye,He){if(null==ye)return;void 0===He&&(He=ye.length);const ke=He-this.blockSize;let pe=0;const qe=this.buf_;let St=this.inbuf_;for(;pe<He;){if(0===St)for(;pe<=ke;)this.compress_(ye,pe),pe+=this.blockSize;if("string"==typeof ye){for(;pe<He;)if(qe[St]=ye.charCodeAt(pe),++St,++pe,St===this.blockSize){this.compress_(qe),St=0;break}}else for(;pe<He;)if(qe[St]=ye[pe],++St,++pe,St===this.blockSize){this.compress_(qe),St=0;break}}this.inbuf_=St,this.total_+=He}digest(){const ye=[];let He=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let pe=this.blockSize-1;pe>=56;pe--)this.buf_[pe]=255&He,He/=256;this.compress_(this.buf_);let ke=0;for(let pe=0;pe<5;pe++)for(let qe=24;qe>=0;qe-=8)ye[ke]=this.chain_[pe]>>qe&255,++ke;return ye}}function Yn(Oe,ye){const He=new Qt(Oe,ye);return He.subscribe.bind(He)}class Qt{constructor(ye,He){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=He,this.task.then(()=>{ye(this)}).catch(ke=>{this.error(ke)})}next(ye){this.forEachObserver(He=>{He.next(ye)})}error(ye){this.forEachObserver(He=>{He.error(ye)}),this.close(ye)}complete(){this.forEachObserver(ye=>{ye.complete()}),this.close()}subscribe(ye,He,ke){let pe;if(void 0===ye&&void 0===He&&void 0===ke)throw new Error("Missing Observer.");pe=function rn(Oe,ye){if("object"!=typeof Oe||null===Oe)return!1;for(const He of ye)if(He in Oe&&"function"==typeof Oe[He])return!0;return!1}(ye,["next","error","complete"])?ye:{next:ye,error:He,complete:ke},void 0===pe.next&&(pe.next=yn),void 0===pe.error&&(pe.error=yn),void 0===pe.complete&&(pe.complete=yn);const qe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?pe.error(this.finalError):pe.complete()}catch(St){}}),this.observers.push(pe),qe}unsubscribeOne(ye){void 0===this.observers||void 0===this.observers[ye]||(delete this.observers[ye],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(ye){if(!this.finalized)for(let He=0;He<this.observers.length;He++)this.sendOne(He,ye)}sendOne(ye,He){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[ye])try{He(this.observers[ye])}catch(ke){"undefined"!=typeof console&&console.error&&console.error(ke)}})}close(ye){this.finalized||(this.finalized=!0,void 0!==ye&&(this.finalError=ye),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yn(){}const Wi=function(Oe,ye,He,ke){let pe;if(ke<ye?pe="at least "+ye:ke>He&&(pe=0===He?"none":"no more than "+He),pe)throw new Error(Oe+" failed: Was called with "+ke+(1===ke?" argument.":" arguments.")+" Expects "+pe+".")};function di(Oe,ye){return`${Oe} failed: ${ye} argument `}function zr(Oe,ye,He,ke){if((!ke||He)&&"function"!=typeof He)throw new Error(di(Oe,ye)+"must be a valid function.")}function hi(Oe,ye,He,ke){if((!ke||He)&&("object"!=typeof He||null===He))throw new Error(di(Oe,ye)+"must be a valid context object.")}const vr=function(Oe){const ye=[];let He=0;for(let ke=0;ke<Oe.length;ke++){let pe=Oe.charCodeAt(ke);if(pe>=55296&&pe<=56319){const qe=pe-55296;ke++,te(ke<Oe.length,"Surrogate pair missing trail surrogate."),pe=65536+(qe<<10)+(Oe.charCodeAt(ke)-56320)}pe<128?ye[He++]=pe:pe<2048?(ye[He++]=pe>>6|192,ye[He++]=63&pe|128):pe<65536?(ye[He++]=pe>>12|224,ye[He++]=pe>>6&63|128,ye[He++]=63&pe|128):(ye[He++]=pe>>18|240,ye[He++]=pe>>12&63|128,ye[He++]=pe>>6&63|128,ye[He++]=63&pe|128)}return ye},Lt=function(Oe){let ye=0;for(let He=0;He<Oe.length;He++){const ke=Oe.charCodeAt(He);ke<128?ye++:ke<2048?ye+=2:ke>=55296&&ke<=56319?(ye+=4,He++):ye+=3}return ye};function vi(Oe,ye=1e3,He=2){const ke=ye*Math.pow(He,Oe),pe=Math.round(.5*ke*(Math.random()-.5)*2);return Math.min(144e5,ke+pe)}function fn(Oe){return Oe&&Oe._delegate?Oe._delegate:Oe}},5936:(Ot,We,B)=>{B.d(We,{a:()=>De});var _=B(4004),te=B(5e3),ie=B(441),Se=B(6209);let De=(()=>{class Re{constructor(Me,Ue){this.router=Me,this.authService=Ue}canActivate(){return this.authService.authState.pipe((0,_.U)(Me=>(Me||this.router.navigate(["/auth/login"]),!!Me)))}}return Re.\u0275fac=function(Me){return new(Me||Re)(te.LFG(ie.F0),te.LFG(Se.e))},Re.\u0275prov=te.Yz7({token:Re,factory:Re.\u0275fac}),Re})()},6209:(Ot,We,B)=>{B.d(We,{e:()=>Ve});var _=B(8505),te=B(5e3),ie=B(7078),Se=B(7407),De=B(1205),Re=B(441);let Ve=(()=>{class Me{constructor(ce,oe,Ne,Tt,at){this.store=ce,this.afs=oe,this.afAuth=Ne,this.router=Tt,this.ngZone=at,this.auth$=this.afAuth.authState.pipe((0,_.b)(Xe=>{this.store.set("user",Xe?{email:null==Xe?void 0:Xe.email,uid:null==Xe?void 0:Xe.uid,authenticated:!0}:null)}))}login(ce,oe){return this.afAuth.signInWithEmailAndPassword(ce,oe)}SignIn(ce,oe){return this.afAuth.signInWithEmailAndPassword(ce,oe).then(Ne=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(Ne.user)}).catch(Ne=>{window.alert(Ne.message)})}register(ce,oe){return this.afAuth.createUserWithEmailAndPassword(ce,oe)}SignUp(ce,oe){return this.afAuth.createUserWithEmailAndPassword(ce,oe).then(Ne=>{this.SendVerificationMail(),this.SetUserData(Ne.user)}).catch(Ne=>Ne)}SendVerificationMail(){return this.afAuth.currentUser.then(ce=>ce.sendEmailVerification()).then(()=>{this.router.navigate([""])})}ForgotPassword(ce){return this.afAuth.sendPasswordResetEmail(ce).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(oe=>{window.alert(oe)})}get isLoggedIn(){const ce=JSON.parse(localStorage.getItem("user"));return null!==ce&&!1!==ce.emailVerified}AuthLogin(ce){return this.afAuth.signInWithPopup(ce).then(oe=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(oe.user)}).catch(oe=>{window.alert(oe)})}SetUserData(ce){return this.afs.doc(`users/${ce.uid}`).set({uid:ce.uid,email:ce.email,displayName:ce.displayName,photoURL:ce.photoURL,emailVerified:ce.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}logout(){return this.afAuth.signOut()}get authState(){return this.afAuth.authState}get userId(){return this.afAuth.currentUser.then(ce=>ce.uid)}}return Me.\u0275fac=function(ce){return new(ce||Me)(te.LFG(ie.y),te.LFG(Se.ST),te.LFG(De.zQ),te.LFG(Re.F0),te.LFG(te.R0b))},Me.\u0275prov=te.Yz7({token:Me,factory:Me.\u0275fac}),Me})()},8583:(Ot,We,B)=>{B.d(We,{m:()=>Re});var _=B(5936),te=B(6209),ie=B(9808),Se=B(2382),De=B(5e3);let Re=(()=>{class Ve{static forRoot(){return{ngModule:Ve,providers:[te.e,_.a]}}}return Ve.\u0275fac=function(Ue){return new(Ue||Ve)},Ve.\u0275mod=De.oAB({type:Ve}),Ve.\u0275inj=De.cJS({imports:[[ie.ez,Se.UX]]}),Ve})()},8343:(Ot,We,B)=>{var _=B(9808),te=B(5e3);class ie extends _.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Se extends ie{static makeCurrent(){(0,_.HT)(new Se)}onAndCancel(we,de,ze){return we.addEventListener(de,ze,!1),()=>{we.removeEventListener(de,ze,!1)}}dispatchEvent(we,de){we.dispatchEvent(de)}remove(we){we.parentNode&&we.parentNode.removeChild(we)}createElement(we,de){return(de=de||this.getDefaultDocument()).createElement(we)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(we){return we.nodeType===Node.ELEMENT_NODE}isShadowRoot(we){return we instanceof DocumentFragment}getGlobalEventTarget(we,de){return"window"===de?window:"document"===de?we:"body"===de?we.body:null}getBaseHref(we){const de=function Re(){return De=De||document.querySelector("base"),De?De.getAttribute("href"):null}();return null==de?null:function Me(Ce){Ve=Ve||document.createElement("a"),Ve.setAttribute("href",Ce);const we=Ve.pathname;return"/"===we.charAt(0)?we:`/${we}`}(de)}resetBaseElement(){De=null}getUserAgent(){return window.navigator.userAgent}getCookie(we){return(0,_.Mx)(document.cookie,we)}}let Ve,De=null;const Ue=new te.OlP("TRANSITION_ID"),oe=[{provide:te.ip1,useFactory:function ce(Ce,we,de){return()=>{de.get(te.CZH).donePromise.then(()=>{const ze=(0,_.q)(),ct=we.querySelectorAll(`style[ng-transition="${Ce}"]`);for(let zt=0;zt<ct.length;zt++)ze.remove(ct[zt])})}},deps:[Ue,_.K0,te.zs3],multi:!0}];class Ne{static init(){(0,te.VLi)(new Ne)}addToWindow(we){te.dqk.getAngularTestability=(ze,ct=!0)=>{const zt=we.findTestabilityInTree(ze,ct);if(null==zt)throw new Error("Could not find testability for element.");return zt},te.dqk.getAllAngularTestabilities=()=>we.getAllTestabilities(),te.dqk.getAllAngularRootElements=()=>we.getAllRootElements(),te.dqk.frameworkStabilizers||(te.dqk.frameworkStabilizers=[]),te.dqk.frameworkStabilizers.push(ze=>{const ct=te.dqk.getAllAngularTestabilities();let zt=ct.length,bn=!1;const xn=function(Tn){bn=bn||Tn,zt--,0==zt&&ze(bn)};ct.forEach(function(Tn){Tn.whenStable(xn)})})}findTestabilityInTree(we,de,ze){if(null==de)return null;const ct=we.getTestability(de);return null!=ct?ct:ze?(0,_.q)().isShadowRoot(de)?this.findTestabilityInTree(we,de.host,!0):this.findTestabilityInTree(we,de.parentElement,!0):null}}let Tt=(()=>{class Ce{build(){return new XMLHttpRequest}}return Ce.\u0275fac=function(de){return new(de||Ce)},Ce.\u0275prov=te.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();const at=new te.OlP("EventManagerPlugins");let Xe=(()=>{class Ce{constructor(de,ze){this._zone=ze,this._eventNameToPlugin=new Map,de.forEach(ct=>ct.manager=this),this._plugins=de.slice().reverse()}addEventListener(de,ze,ct){return this._findPluginFor(ze).addEventListener(de,ze,ct)}addGlobalEventListener(de,ze,ct){return this._findPluginFor(ze).addGlobalEventListener(de,ze,ct)}getZone(){return this._zone}_findPluginFor(de){const ze=this._eventNameToPlugin.get(de);if(ze)return ze;const ct=this._plugins;for(let zt=0;zt<ct.length;zt++){const bn=ct[zt];if(bn.supports(de))return this._eventNameToPlugin.set(de,bn),bn}throw new Error(`No event manager plugin found for event ${de}`)}}return Ce.\u0275fac=function(de){return new(de||Ce)(te.LFG(at),te.LFG(te.R0b))},Ce.\u0275prov=te.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();class gt{constructor(we){this._doc=we}addGlobalEventListener(we,de,ze){const ct=(0,_.q)().getGlobalEventTarget(this._doc,we);if(!ct)throw new Error(`Unsupported event target ${ct} for event ${de}`);return this.addEventListener(ct,de,ze)}}let tt=(()=>{class Ce{constructor(){this._stylesSet=new Set}addStyles(de){const ze=new Set;de.forEach(ct=>{this._stylesSet.has(ct)||(this._stylesSet.add(ct),ze.add(ct))}),this.onStylesAdded(ze)}onStylesAdded(de){}getAllStyles(){return Array.from(this._stylesSet)}}return Ce.\u0275fac=function(de){return new(de||Ce)},Ce.\u0275prov=te.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})(),pt=(()=>{class Ce extends tt{constructor(de){super(),this._doc=de,this._hostNodes=new Map,this._hostNodes.set(de.head,[])}_addStylesToHost(de,ze,ct){de.forEach(zt=>{const bn=this._doc.createElement("style");bn.textContent=zt,ct.push(ze.appendChild(bn))})}addHost(de){const ze=[];this._addStylesToHost(this._stylesSet,de,ze),this._hostNodes.set(de,ze)}removeHost(de){const ze=this._hostNodes.get(de);ze&&ze.forEach(xe),this._hostNodes.delete(de)}onStylesAdded(de){this._hostNodes.forEach((ze,ct)=>{this._addStylesToHost(de,ct,ze)})}ngOnDestroy(){this._hostNodes.forEach(de=>de.forEach(xe))}}return Ce.\u0275fac=function(de){return new(de||Ce)(te.LFG(_.K0))},Ce.\u0275prov=te.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();function xe(Ce){(0,_.q)().remove(Ce)}const kt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ht=/%COMP%/g;function ge(Ce,we,de){for(let ze=0;ze<we.length;ze++){let ct=we[ze];Array.isArray(ct)?ge(Ce,ct,de):(ct=ct.replace(ht,Ce),de.push(ct))}return de}function Fe(Ce){return we=>{if("__ngUnwrap__"===we)return Ce;!1===Ce(we)&&(we.preventDefault(),we.returnValue=!1)}}let Qe=(()=>{class Ce{constructor(de,ze,ct){this.eventManager=de,this.sharedStylesHost=ze,this.appId=ct,this.rendererByCompId=new Map,this.defaultRenderer=new Ze(de)}createRenderer(de,ze){if(!de||!ze)return this.defaultRenderer;switch(ze.encapsulation){case te.ifc.Emulated:{let ct=this.rendererByCompId.get(ze.id);return ct||(ct=new en(this.eventManager,this.sharedStylesHost,ze,this.appId),this.rendererByCompId.set(ze.id,ct)),ct.applyToHost(de),ct}case 1:case te.ifc.ShadowDom:return new Wt(this.eventManager,this.sharedStylesHost,de,ze);default:if(!this.rendererByCompId.has(ze.id)){const ct=ge(ze.id,ze.styles,[]);this.sharedStylesHost.addStyles(ct),this.rendererByCompId.set(ze.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return Ce.\u0275fac=function(de){return new(de||Ce)(te.LFG(Xe),te.LFG(pt),te.LFG(te.AFp))},Ce.\u0275prov=te.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();class Ze{constructor(we){this.eventManager=we,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(we,de){return de?document.createElementNS(kt[de]||de,we):document.createElement(we)}createComment(we){return document.createComment(we)}createText(we){return document.createTextNode(we)}appendChild(we,de){we.appendChild(de)}insertBefore(we,de,ze){we&&we.insertBefore(de,ze)}removeChild(we,de){we&&we.removeChild(de)}selectRootElement(we,de){let ze="string"==typeof we?document.querySelector(we):we;if(!ze)throw new Error(`The selector "${we}" did not match any elements`);return de||(ze.textContent=""),ze}parentNode(we){return we.parentNode}nextSibling(we){return we.nextSibling}setAttribute(we,de,ze,ct){if(ct){de=ct+":"+de;const zt=kt[ct];zt?we.setAttributeNS(zt,de,ze):we.setAttribute(de,ze)}else we.setAttribute(de,ze)}removeAttribute(we,de,ze){if(ze){const ct=kt[ze];ct?we.removeAttributeNS(ct,de):we.removeAttribute(`${ze}:${de}`)}else we.removeAttribute(de)}addClass(we,de){we.classList.add(de)}removeClass(we,de){we.classList.remove(de)}setStyle(we,de,ze,ct){ct&(te.JOm.DashCase|te.JOm.Important)?we.style.setProperty(de,ze,ct&te.JOm.Important?"important":""):we.style[de]=ze}removeStyle(we,de,ze){ze&te.JOm.DashCase?we.style.removeProperty(de):we.style[de]=""}setProperty(we,de,ze){we[de]=ze}setValue(we,de){we.nodeValue=de}listen(we,de,ze){return"string"==typeof we?this.eventManager.addGlobalEventListener(we,de,Fe(ze)):this.eventManager.addEventListener(we,de,Fe(ze))}}class en extends Ze{constructor(we,de,ze,ct){super(we),this.component=ze;const zt=ge(ct+"-"+ze.id,ze.styles,[]);de.addStyles(zt),this.contentAttr=function ue(Ce){return"_ngcontent-%COMP%".replace(ht,Ce)}(ct+"-"+ze.id),this.hostAttr=function lt(Ce){return"_nghost-%COMP%".replace(ht,Ce)}(ct+"-"+ze.id)}applyToHost(we){super.setAttribute(we,this.hostAttr,"")}createElement(we,de){const ze=super.createElement(we,de);return super.setAttribute(ze,this.contentAttr,""),ze}}class Wt extends Ze{constructor(we,de,ze,ct){super(we),this.sharedStylesHost=de,this.hostEl=ze,this.shadowRoot=ze.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const zt=ge(ct.id,ct.styles,[]);for(let bn=0;bn<zt.length;bn++){const xn=document.createElement("style");xn.textContent=zt[bn],this.shadowRoot.appendChild(xn)}}nodeOrShadowRoot(we){return we===this.hostEl?this.shadowRoot:we}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(we,de){return super.appendChild(this.nodeOrShadowRoot(we),de)}insertBefore(we,de,ze){return super.insertBefore(this.nodeOrShadowRoot(we),de,ze)}removeChild(we,de){return super.removeChild(this.nodeOrShadowRoot(we),de)}parentNode(we){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(we)))}}let it=(()=>{class Ce extends gt{constructor(de){super(de)}supports(de){return!0}addEventListener(de,ze,ct){return de.addEventListener(ze,ct,!1),()=>this.removeEventListener(de,ze,ct)}removeEventListener(de,ze,ct){return de.removeEventListener(ze,ct)}}return Ce.\u0275fac=function(de){return new(de||Ce)(te.LFG(_.K0))},Ce.\u0275prov=te.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();const nn=["alt","control","meta","shift"],Bt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yt={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mn={alt:Ce=>Ce.altKey,control:Ce=>Ce.ctrlKey,meta:Ce=>Ce.metaKey,shift:Ce=>Ce.shiftKey};let Vt=(()=>{class Ce extends gt{constructor(de){super(de)}supports(de){return null!=Ce.parseEventName(de)}addEventListener(de,ze,ct){const zt=Ce.parseEventName(ze),bn=Ce.eventCallback(zt.fullKey,ct,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,_.q)().onAndCancel(de,zt.domEventName,bn))}static parseEventName(de){const ze=de.toLowerCase().split("."),ct=ze.shift();if(0===ze.length||"keydown"!==ct&&"keyup"!==ct)return null;const zt=Ce._normalizeKey(ze.pop());let bn="";if(nn.forEach(Tn=>{const Fs=ze.indexOf(Tn);Fs>-1&&(ze.splice(Fs,1),bn+=Tn+".")}),bn+=zt,0!=ze.length||0===zt.length)return null;const xn={};return xn.domEventName=ct,xn.fullKey=bn,xn}static getEventFullKey(de){let ze="",ct=function tn(Ce){let we=Ce.key;if(null==we){if(we=Ce.keyIdentifier,null==we)return"Unidentified";we.startsWith("U+")&&(we=String.fromCharCode(parseInt(we.substring(2),16)),3===Ce.location&&Yt.hasOwnProperty(we)&&(we=Yt[we]))}return Bt[we]||we}(de);return ct=ct.toLowerCase()," "===ct?ct="space":"."===ct&&(ct="dot"),nn.forEach(zt=>{zt!=ct&&Mn[zt](de)&&(ze+=zt+".")}),ze+=ct,ze}static eventCallback(de,ze,ct){return zt=>{Ce.getEventFullKey(zt)===de&&ct.runGuarded(()=>ze(zt))}}static _normalizeKey(de){return"esc"===de?"escape":de}}return Ce.\u0275fac=function(de){return new(de||Ce)(te.LFG(_.K0))},Ce.\u0275prov=te.Yz7({token:Ce,factory:Ce.\u0275fac}),Ce})();const fr=(0,te.eFA)(te._c5,"browser",[{provide:te.Lbi,useValue:_.bD},{provide:te.g9A,useValue:function Cr(){Se.makeCurrent(),Ne.init()},multi:!0},{provide:_.K0,useFactory:function Pr(){return(0,te.RDi)(document),document},deps:[]}]),Bn=[{provide:te.zSh,useValue:"root"},{provide:te.qLn,useFactory:function sr(){return new te.qLn},deps:[]},{provide:at,useClass:it,multi:!0,deps:[_.K0,te.R0b,te.Lbi]},{provide:at,useClass:Vt,multi:!0,deps:[_.K0]},{provide:Qe,useClass:Qe,deps:[Xe,pt,te.AFp]},{provide:te.FYo,useExisting:Qe},{provide:tt,useExisting:pt},{provide:pt,useClass:pt,deps:[_.K0]},{provide:te.dDg,useClass:te.dDg,deps:[te.R0b]},{provide:Xe,useClass:Xe,deps:[at,te.R0b]},{provide:_.JF,useClass:Tt,deps:[]}];let Sr=(()=>{class Ce{constructor(de){if(de)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(de){return{ngModule:Ce,providers:[{provide:te.AFp,useValue:de.appId},{provide:Ue,useExisting:te.AFp},oe]}}}return Ce.\u0275fac=function(de){return new(de||Ce)(te.LFG(Ce,12))},Ce.\u0275mod=te.oAB({type:Ce}),Ce.\u0275inj=te.cJS({providers:Bn,imports:[_.ez,te.hGG]}),Ce})();"undefined"!=typeof window&&window;var qr=B(8583),wi=B(5936),In=B(441);const Dr=[{path:"schedule",canActivate:[wi.a],loadChildren:()=>Promise.all([B.e(592),B.e(876)]).then(B.bind(B,4876)).then(Ce=>Ce.ScheduleModule)},{path:"meals",canActivate:[wi.a],loadChildren:()=>Promise.all([B.e(592),B.e(63)]).then(B.bind(B,3063)).then(Ce=>Ce.MealsModule)},{path:"workouts",canActivate:[wi.a],loadChildren:()=>Promise.all([B.e(592),B.e(456)]).then(B.bind(B,2456)).then(Ce=>Ce.WorkOutsModule)}];let Ii=(()=>{class Ce{}return Ce.\u0275fac=function(de){return new(de||Ce)},Ce.\u0275mod=te.oAB({type:Ce}),Ce.\u0275inj=te.cJS({imports:[[_.ez,In.Bz.forChild(Dr),qr.m.forRoot()]]}),Ce})();var ei=B(7078);const Br=[{path:"",pathMatch:"full",redirectTo:"schedule"}];let fi=(()=>{class Ce{}return Ce.\u0275fac=function(de){return new(de||Ce)},Ce.\u0275mod=te.oAB({type:Ce}),Ce.\u0275inj=te.cJS({imports:[[In.Bz.forRoot(Br)],In.Bz]}),Ce})();var cs=B(5861),ki=B(6209);function Yr(Ce,we){if(1&Ce){const de=te.EpF();te.TgZ(0,"div",14)(1,"span",15),te.NdJ("click",function(){return te.CHM(de),te.oxw(2).logoutUser()}),te._uU(2,"Logout"),te.qZA()()}}function Er(Ce,we){if(1&Ce&&(te.TgZ(0,"nav",2)(1,"div",3)(2,"a",4),te._uU(3,"FITNESS"),te.qZA(),te.TgZ(4,"button",5),te._UZ(5,"span",6),te.qZA(),te.TgZ(6,"div",7)(7,"ul",8)(8,"li",9)(9,"a",10),te._uU(10,"SCHEDULE"),te.qZA()(),te.TgZ(11,"li",9)(12,"a",11),te._uU(13,"MEALS"),te.qZA()(),te.TgZ(14,"li",9)(15,"a",12),te._uU(16,"WORKOUTS"),te.qZA()()(),te.YNc(17,Yr,3,0,"div",13),te.qZA()()()),2&Ce){const de=te.oxw();te.xp6(17),te.Q6J("ngIf",null==de.user?null:de.user.authenticated)}}function wr(Ce,we){1&Ce&&(te.TgZ(0,"h1"),te._uU(1,"Loading nav"),te.qZA())}let Qi=(()=>{class Ce{constructor(){this.logout=new te.vpe}ngOnInit(){}logoutUser(){this.logout.emit()}}return Ce.\u0275fac=function(de){return new(de||Ce)},Ce.\u0275cmp=te.Xpm({type:Ce,selectors:[["app-nav"]],inputs:{user:"user"},outputs:{logout:"logout"},decls:3,vars:2,consts:[["class","navbar navbar-expand-lg navbar-light bg-light my-0 py-0 mb-3",4,"ngIf","ngIfElse"],["loading",""],[1,"navbar","navbar-expand-lg","navbar-light","bg-light","my-0","py-0","mb-3"],[1,"container"],["routerLink","/",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarText","aria-controls","navbarText","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarText",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","schedule","routerLinkActive","active",1,"nav-link"],["routerLink","meals","routerLinkActive","active",1,"nav-link"],["routerLink","workouts","routerLinkActive","active",1,"nav-link"],["class","header",4,"ngIf"],[1,"header"],[3,"click"]],template:function(de,ze){if(1&de&&(te.YNc(0,Er,18,1,"nav",0),te.YNc(1,wr,2,0,"ng-template",null,1,te.W1O)),2&de){const ct=te.MAs(2);te.Q6J("ngIf",ze.user)("ngIfElse",ct)}},directives:[_.O5,In.yS,In.Od],styles:[""],changeDetection:0}),Ce})();function er(Ce,we){if(1&Ce){const de=te.EpF();te.TgZ(0,"app-nav",1),te.NdJ("logout",function(){return te.CHM(de),te.oxw().onLogout()}),te.ALo(1,"async"),te.qZA()}if(2&Ce){const de=te.oxw();te.Q6J("user",te.lcZ(1,1,de.user$))}}let It=(()=>{class Ce{constructor(de,ze,ct){this.store=de,this.authService=ze,this.router=ct}ngOnInit(){this.subscription=this.authService.auth$.subscribe(),this.user$=this.store.select("user")}ngOnDestroy(){this.subscription.unsubscribe()}onLogout(){var de=this;return(0,cs.Z)(function*(){yield de.authService.logout(),de.router.navigate(["/auth/login"])})()}}return Ce.\u0275fac=function(de){return new(de||Ce)(te.Y36(ei.y),te.Y36(ki.e),te.Y36(In.F0))},Ce.\u0275cmp=te.Xpm({type:Ce,selectors:[["app-root"]],decls:3,vars:3,consts:[[3,"user","logout",4,"ngIf"],[3,"user","logout"]],template:function(de,ze){if(1&de&&(te.YNc(0,er,2,3,"app-nav",0),te.ALo(1,"async"),te._UZ(2,"router-outlet")),2&de){let ct;te.Q6J("ngIf",null==(ct=te.lcZ(1,1,ze.user$))?null:ct.authenticated)}},directives:[_.O5,Qi,In.lC],pipes:[_.Ov],styles:[""]}),Ce})();var Ht=B(2011),Wn=B(1205),Qr=B(2084),Fi=B(7407),ur=B(1903);const Li=[{path:"auth",children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",loadChildren:()=>Promise.all([B.e(592),B.e(31)]).then(B.bind(B,9031)).then(Ce=>Ce.LoginModule)},{path:"register",loadChildren:()=>Promise.all([B.e(592),B.e(128)]).then(B.bind(B,7128)).then(Ce=>Ce.RegisterModule)}]}],cr={apiKey:"AIzaSyAg8NwlLXjVcTMW0QqEeYODtdoSckv2bYQ",authDomain:"fitnessapp-a65a1.firebaseapp.com",databaseURL:"https://fitnessapp-a65a1-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"fitnessapp-a65a1",storageBucket:"fitnessapp-a65a1.appspot.com",messagingSenderId:"441862111873",appId:"1:441862111873:web:70acd7dd3732c3b4ce0380",measurementId:"G-1FSQ30KPB9"};let Ai=(()=>{class Ce{}return Ce.\u0275fac=function(de){return new(de||Ce)},Ce.\u0275mod=te.oAB({type:Ce}),Ce.\u0275inj=te.cJS({imports:[[_.ez,In.Bz.forChild(Li),Ht.hO.initializeApp(cr),Wn.ww,Fi.yb,Qr.TE,ur.JS,qr.m.forRoot()]]}),Ce})(),gr=(()=>{class Ce{}return Ce.\u0275fac=function(de){return new(de||Ce)},Ce.\u0275mod=te.oAB({type:Ce,bootstrap:[It]}),Ce.\u0275inj=te.cJS({providers:[ei.y],imports:[[Sr,fi,Ai,Ii]]}),Ce})();(0,te.G48)(),fr().bootstrapModule(gr).catch(Ce=>console.error(Ce))},7078:(Ot,We,B)=>{B.d(We,{y:()=>Re});var _=B(1135),te=B(1884),ie=B(4004);const De={user:void 0,meals:void 0,date:void 0,workouts:void 0,schedule:void 0,selected:void 0,list:void 0};class Re{constructor(){this.subject=new _.X(De),this.store=this.subject.asObservable().pipe((0,te.x)())}get value(){return this.subject.value}select(Me){return this.store.pipe(function Se(...Ve){const Me=Ve.length;if(0===Me)throw new Error("list of properties cannot be empty.");return(0,ie.U)(Ue=>{let ce=Ue;for(let oe=0;oe<Me;oe++){const Ne=null==ce?void 0:ce[Ve[oe]];if(void 0===Ne)return;ce=Ne}return ce})}(Me))}set(Me,Ue){this.subject.next(Object.assign(Object.assign({},this.value),{[Me]:Ue}))}}},5867:(Ot,We,B)=>{B.d(We,{Mq:()=>_.getApp,C6:()=>_.getApps});var _=B(9681);(0,_.registerVersion)("firebase","9.8.4","app")},127:(Ot,We,B)=>{B.d(We,{Z:()=>_.Z});var _=B(3942);_.Z.registerVersion("firebase","9.8.4","app-compat")},3677:(Ot,We,B)=>{B.r(We);var _=B(5861),te=B(3942),ie=B(2090),Se=B(9681),De=B(655),Re=B(1877),Ve=B(4859);const Xe=function Tt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},gt=function at(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},tt=new ie.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),xe=new Re.Yd("@firebase/auth");function kt(w,...f){xe.logLevel<=Re.in.ERROR&&xe.error(`Auth (${Se.SDK_VERSION}): ${w}`,...f)}function ht(w,...f){throw Ct(w,...f)}function W(w,...f){return Ct(w,...f)}function Ge(w,f,m){const T=Object.assign(Object.assign({},gt()),{[f]:m});return new ie.LL("auth","Firebase",T).create(f,{appName:w.name})}function Et(w,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&ht(w,"argument-error"),Ge(w,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ct(w,...f){if("string"!=typeof w){const m=f[0],T=[...f.slice(1)];return T[0]&&(T[0].appName=w.name),w._errorFactory.create(m,...T)}return tt.create(w,...f)}function ue(w,f,...m){if(!w)throw Ct(f,...m)}function lt(w){const f="INTERNAL ASSERTION FAILED: "+w;throw kt(f),new Error(f)}function ge(w,f){w||lt(f)}const Fe=new Map;function Be(w){ge(w instanceof Function,"Expected a class definition");let f=Fe.get(w);return f?(ge(f instanceof w,"Instance stored in cache mismatched with class"),f):(f=new w,Fe.set(w,f),f)}function wt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function Nt(){return"http:"===en()||"https:"===en()}function en(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class nn{constructor(f,m){this.shortDelay=f,this.longDelay=m,ge(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,ie.uI)()||(0,ie.b$)()}get(){return function Wt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Nt()||(0,ie.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(w,f){ge(w.emulator,"Emulator should always be set here");const{url:m}=w.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Bt{static initialize(f,m,T){this.fetchImpl=f,m&&(this.headersImpl=m),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Yt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Mn=new nn(3e4,6e4);function Vt(w,f){return w.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:w.tenantId}):f}function tn(w,f,m,T){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,_.Z)(function*(w,f,m,T,z={}){return sr(w,z,(0,_.Z)(function*(){let re={},Le={};T&&("GET"===f?Le=T:re={body:JSON.stringify(T)});const dt=(0,ie.xO)(Object.assign({key:w.config.apiKey},Le)).slice(1),Ft=yield w._getAdditionalHeaders();return Ft["Content-Type"]="application/json",w.languageCode&&(Ft["X-Firebase-Locale"]=w.languageCode),Bt.fetch()(Bn(w,w.config.apiHost,m,dt),Object.assign({method:f,headers:Ft,referrerPolicy:"no-referrer"},re))}))})).apply(this,arguments)}function sr(w,f,m){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,_.Z)(function*(w,f,m){w._canInitEmulator=!1;const T=Object.assign(Object.assign({},Yt),f);try{const z=new Sr(w),re=yield Promise.race([m(),z.promise]);z.clearNetworkTimeout();const Le=yield re.json();if("needConfirmation"in Le)throw Yn(w,"account-exists-with-different-credential",Le);if(re.ok&&!("errorMessage"in Le))return Le;{const dt=re.ok?Le.errorMessage:Le.error.message,[Ft,sn]=dt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ft)throw Yn(w,"credential-already-in-use",Le);if("EMAIL_EXISTS"===Ft)throw Yn(w,"email-already-in-use",Le);if("USER_DISABLED"===Ft)throw Yn(w,"user-disabled",Le);const Gn=T[Ft]||Ft.toLowerCase().replace(/[_\s]+/g,"-");if(sn)throw Ge(w,Gn,sn);ht(w,Gn)}}catch(z){if(z instanceof ie.ZR)throw z;ht(w,"network-request-failed")}})).apply(this,arguments)}function Xn(w,f,m,T){return fr.apply(this,arguments)}function fr(){return(fr=(0,_.Z)(function*(w,f,m,T,z={}){const re=yield tn(w,f,m,T,z);return"mfaPendingCredential"in re&&ht(w,"multi-factor-auth-required",{_serverResponse:re}),re})).apply(this,arguments)}function Bn(w,f,m,T){const z=`${f}${m}?${T}`;return w.config.emulator?un(w.config,z):`${w.config.apiScheme}://${z}`}class Sr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,T)=>{this.timer=setTimeout(()=>T(W(this.auth,"network-request-failed")),Mn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Yn(w,f,m){const T={appName:w.name};m.email&&(T.email=m.email),m.phoneNumber&&(T.phoneNumber=m.phoneNumber);const z=W(w,f,T);return z.customData._tokenResponse=m,z}function kn(){return(kn=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function rn(w,f){return yn.apply(this,arguments)}function yn(){return(yn=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Wi(w,f){return di.apply(this,arguments)}function di(){return(di=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function oi(w){if(w)try{const f=new Date(Number(w));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function vr(){return(vr=(0,_.Z)(function*(w,f=!1){const m=(0,ie.m9)(w),T=yield m.getIdToken(f),z=qt(T);ue(z&&z.exp&&z.auth_time&&z.iat,m.auth,"internal-error");const re="object"==typeof z.firebase?z.firebase:void 0,Le=null==re?void 0:re.sign_in_provider;return{claims:z,token:T,authTime:oi(Lt(z.auth_time)),issuedAtTime:oi(Lt(z.iat)),expirationTime:oi(Lt(z.exp)),signInProvider:Le||null,signInSecondFactor:(null==re?void 0:re.sign_in_second_factor)||null}})).apply(this,arguments)}function Lt(w){return 1e3*Number(w)}function qt(w){var f;const[m,T,z]=w.split(".");if(void 0===m||void 0===T||void 0===z)return kt("JWT malformed, contained fewer than 3 sections"),null;try{const re=(0,ie.tV)(T);return re?JSON.parse(re):(kt("Failed to decode base64 JWT payload"),null)}catch(re){return kt("Caught error parsing JWT payload as JSON",null===(f=re)||void 0===f?void 0:f.toString()),null}}function br(w,f){return Si.apply(this,arguments)}function Si(){return(Si=(0,_.Z)(function*(w,f,m=!1){if(m)return f;try{return yield f}catch(T){throw T instanceof ie.ZR&&wn(T)&&w.auth.currentUser===w&&(yield w.auth.signOut()),T}})).apply(this,arguments)}function wn({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class vi{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const z=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,z)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const T=this.getInterval(f);this.timerId=setTimeout((0,_.Z)(function*(){yield m.iteration()}),T)}iteration(){var f=this;return(0,_.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(T){return void("auth/network-request-failed"===(null===(m=T)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Kr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=oi(this.lastLoginAt),this.creationTime=oi(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function pr(w){return fn.apply(this,arguments)}function fn(){return(fn=(0,_.Z)(function*(w){var f;const m=w.auth,T=yield w.getIdToken(),z=yield br(w,Wi(m,{idToken:T}));ue(null==z?void 0:z.users.length,m,"internal-error");const re=z.users[0];w._notifyReloadListener(re);const Le=(null===(f=re.providerUserInfo)||void 0===f?void 0:f.length)?ke(re.providerUserInfo):[],dt=He(w.providerData,Le),Gn=!!w.isAnonymous&&!(w.email&&re.passwordHash||(null==dt?void 0:dt.length)),On={uid:re.localId,displayName:re.displayName||null,photoURL:re.photoUrl||null,email:re.email||null,emailVerified:re.emailVerified||!1,phoneNumber:re.phoneNumber||null,tenantId:re.tenantId||null,providerData:dt,metadata:new Kr(re.createdAt,re.lastLoginAt),isAnonymous:Gn};Object.assign(w,On)})).apply(this,arguments)}function ye(){return(ye=(0,_.Z)(function*(w){const f=(0,ie.m9)(w);yield pr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function He(w,f){return[...w.filter(T=>!f.some(z=>z.providerId===T.providerId)),...f]}function ke(w){return w.map(f=>{var{providerId:m}=f,T=(0,De._T)(f,["providerId"]);return{providerId:m,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function qe(){return(qe=(0,_.Z)(function*(w,f){const m=yield sr(w,{},(0,_.Z)(function*(){const T=(0,ie.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:z,apiKey:re}=w.config,Le=Bn(w,z,"/v1/token",`key=${re}`),dt=yield w._getAdditionalHeaders();return dt["Content-Type"]="application/x-www-form-urlencoded",Bt.fetch()(Le,{method:"POST",headers:dt,body:T})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class St{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){ue(f.idToken,"internal-error"),ue(void 0!==f.idToken,"internal-error"),ue(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function an(w){const f=qt(w);return ue(f,"internal-error"),ue(void 0!==f.exp,"internal-error"),ue(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var T=this;return(0,_.Z)(function*(){return ue(!T.accessToken||T.refreshToken,f,"user-token-expired"),m||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(f,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var T=this;return(0,_.Z)(function*(){const{accessToken:z,refreshToken:re,expiresIn:Le}=yield function pe(w,f){return qe.apply(this,arguments)}(f,m);T.updateTokensAndExpiration(z,re,Number(Le))})()}updateTokensAndExpiration(f,m,T){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(f,m){const{refreshToken:T,accessToken:z,expirationTime:re}=m,Le=new St;return T&&(ue("string"==typeof T,"internal-error",{appName:f}),Le.refreshToken=T),z&&(ue("string"==typeof z,"internal-error",{appName:f}),Le.accessToken=z),re&&(ue("number"==typeof re,"internal-error",{appName:f}),Le.expirationTime=re),Le}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new St,this.toJSON())}_performRefresh(){return lt("not implemented")}}function $t(w,f){ue("string"==typeof w||void 0===w,"internal-error",{appName:f})}class pn{constructor(f){var{uid:m,auth:T,stsTokenManager:z}=f,re=(0,De._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=T,this.stsTokenManager=z,this.accessToken=z.accessToken,this.displayName=re.displayName||null,this.email=re.email||null,this.emailVerified=re.emailVerified||!1,this.phoneNumber=re.phoneNumber||null,this.photoURL=re.photoURL||null,this.isAnonymous=re.isAnonymous||!1,this.tenantId=re.tenantId||null,this.providerData=re.providerData?[...re.providerData]:[],this.metadata=new Kr(re.createdAt||void 0,re.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,_.Z)(function*(){const T=yield br(m,m.stsTokenManager.getToken(m.auth,f));return ue(T,m.auth,"internal-error"),m.accessToken!==T&&(m.accessToken=T,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),T})()}getIdTokenResult(f){return function hi(w){return vr.apply(this,arguments)}(this,f)}reload(){return function Oe(w){return ye.apply(this,arguments)}(this)}_assign(f){this!==f&&(ue(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new pn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var T=this;return(0,_.Z)(function*(){let z=!1;f.idToken&&f.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(f),z=!0),m&&(yield pr(T)),yield T.auth._persistUserIfCurrent(T),z&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var f=this;return(0,_.Z)(function*(){const m=yield f.getIdToken();return yield br(f,function Qt(w,f){return kn.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var T,z,re,Le,dt,Ft,sn,Gn;const On=null!==(T=m.displayName)&&void 0!==T?T:void 0,gs=null!==(z=m.email)&&void 0!==z?z:void 0,zo=null!==(re=m.phoneNumber)&&void 0!==re?re:void 0,zl=null!==(Le=m.photoURL)&&void 0!==Le?Le:void 0,Md=null!==(dt=m.tenantId)&&void 0!==dt?dt:void 0,Pu=null!==(Ft=m._redirectEventId)&&void 0!==Ft?Ft:void 0,Ko=null!==(sn=m.createdAt)&&void 0!==sn?sn:void 0,Ou=null!==(Gn=m.lastLoginAt)&&void 0!==Gn?Gn:void 0,{uid:Ya,emailVerified:Kl,isAnonymous:Nd,providerData:vc,stsTokenManager:nd}=m;ue(Ya&&nd,f,"internal-error");const Bo=St.fromJSON(this.name,nd);ue("string"==typeof Ya,f,"internal-error"),$t(On,f.name),$t(gs,f.name),ue("boolean"==typeof Kl,f,"internal-error"),ue("boolean"==typeof Nd,f,"internal-error"),$t(zo,f.name),$t(zl,f.name),$t(Md,f.name),$t(Pu,f.name),$t(Ko,f.name),$t(Ou,f.name);const rd=new pn({uid:Ya,auth:f,email:gs,emailVerified:Kl,displayName:On,isAnonymous:Nd,photoURL:zl,phoneNumber:zo,tenantId:Md,stsTokenManager:Bo,createdAt:Ko,lastLoginAt:Ou});return vc&&Array.isArray(vc)&&(rd.providerData=vc.map(Pd=>Object.assign({},Pd))),Pu&&(rd._redirectEventId=Pu),rd}static _fromIdTokenResponse(f,m,T=!1){return(0,_.Z)(function*(){const z=new St;z.updateFromServerResponse(m);const re=new pn({uid:m.localId,auth:f,stsTokenManager:z,isAnonymous:T});return yield pr(re),re})()}}const ar=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,_.Z)(function*(){return!0})()}_set(m,T){var z=this;return(0,_.Z)(function*(){z.storage[m]=T})()}_get(m){var T=this;return(0,_.Z)(function*(){const z=T.storage[m];return void 0===z?null:z})()}_remove(m){var T=this;return(0,_.Z)(function*(){delete T.storage[m]})()}_addListener(m,T){}_removeListener(m,T){}}return w.type="NONE",w})();function hn(w,f,m){return`firebase:${w}:${f}:${m}`}class rr{constructor(f,m,T){this.persistence=f,this.auth=m,this.userKey=T;const{config:z,name:re}=this.auth;this.fullUserKey=hn(this.userKey,z.apiKey,re),this.fullPersistenceKey=hn("persistence",z.apiKey,re),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,_.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?pn._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,_.Z)(function*(){if(m.persistence===f)return;const T=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,T?m.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,T="authUser"){return(0,_.Z)(function*(){if(!m.length)return new rr(Be(ar),f,T);const z=(yield Promise.all(m.map(function(){var sn=(0,_.Z)(function*(Gn){if(yield Gn._isAvailable())return Gn});return function(Gn){return sn.apply(this,arguments)}}()))).filter(sn=>sn);let re=z[0]||Be(ar);const Le=hn(T,f.config.apiKey,f.name);let dt=null;for(const sn of m)try{const Gn=yield sn._get(Le);if(Gn){const On=pn._fromJSON(f,Gn);sn!==re&&(dt=On),re=sn;break}}catch(Gn){}const Ft=z.filter(sn=>sn._shouldAllowMigration);return re._shouldAllowMigration&&Ft.length?(re=Ft[0],dt&&(yield re._set(Le,dt.toJSON())),yield Promise.all(m.map(function(){var sn=(0,_.Z)(function*(Gn){if(Gn!==re)try{yield Gn._remove(Le)}catch(On){}});return function(Gn){return sn.apply(this,arguments)}}())),new rr(re,f,T)):new rr(re,f,T)})()}}function zi(w){const f=w.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Dr(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(qr(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(ei(f))return"Blackberry";if(Br(f))return"Webos";if(wi(f))return"Safari";if((f.includes("chrome/")||In(f))&&!f.includes("edge/"))return"Chrome";if(Ii(f))return"Android";{const T=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==T?void 0:T.length))return T[1]}return"Other"}function qr(w=(0,ie.z$)()){return/firefox\//i.test(w)}function wi(w=(0,ie.z$)()){const f=w.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function In(w=(0,ie.z$)()){return/crios\//i.test(w)}function Dr(w=(0,ie.z$)()){return/iemobile/i.test(w)}function Ii(w=(0,ie.z$)()){return/android/i.test(w)}function ei(w=(0,ie.z$)()){return/blackberry/i.test(w)}function Br(w=(0,ie.z$)()){return/webos/i.test(w)}function fi(w=(0,ie.z$)()){return/iphone|ipad|ipod/i.test(w)}function Er(w=(0,ie.z$)()){return fi(w)||Ii(w)||Br(w)||ei(w)||/windows phone/i.test(w)||Dr(w)}function Qi(w,f=[]){let m;switch(w){case"Browser":m=zi((0,ie.z$)());break;case"Worker":m=`${zi((0,ie.z$)())}-${w}`;break;default:m=w}const T=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${Se.SDK_VERSION}/${T}`}class er{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const T=re=>new Promise((Le,dt)=>{try{Le(f(re))}catch(Ft){dt(Ft)}});T.onAbort=m,this.queue.push(T);const z=this.queue.length-1;return()=>{this.queue[z]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,_.Z)(function*(){var T;if(m.auth.currentUser===f)return;const z=[];try{for(const re of m.queue)yield re(f),re.onAbort&&z.push(re.onAbort)}catch(re){z.reverse();for(const Le of z)try{Le()}catch(dt){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(T=re)||void 0===T?void 0:T.message})}})()}}class It{constructor(f,m,T){this.app=f,this.heartbeatServiceProvider=m,this.config=T,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wn(this),this.idTokenSubscription=new Wn(this),this.beforeStateQueue=new er(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=T.sdkClientVersion}_initializeWithPersistence(f,m){var T=this;return m&&(this._popupRedirectResolver=Be(m)),this._initializationPromise=this.queue((0,_.Z)(function*(){var z,re;if(!T._deleted&&(T.persistenceManager=yield rr.create(T,f),!T._deleted)){if(null===(z=T._popupRedirectResolver)||void 0===z?void 0:z._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch(Le){}yield T.initializeCurrentUser(m),T.lastNotifiedUid=(null===(re=T.currentUser)||void 0===re?void 0:re.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,_.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,_.Z)(function*(){var T;const z=yield m.assertedPersistence.getCurrentUser();let re=z,Le=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const dt=null===(T=m.redirectUser)||void 0===T?void 0:T._redirectEventId,Ft=null==re?void 0:re._redirectEventId,sn=yield m.tryRedirectSignIn(f);(!dt||dt===Ft)&&(null==sn?void 0:sn.user)&&(re=sn.user,Le=!0)}if(!re)return m.directlySetCurrentUser(null);if(!re._redirectEventId){if(Le)try{yield m.beforeStateQueue.runMiddleware(re)}catch(dt){re=z,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(dt))}return re?m.reloadAndSetCurrentUserOrClear(re):m.directlySetCurrentUser(null)}return ue(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===re._redirectEventId?m.directlySetCurrentUser(re):m.reloadAndSetCurrentUserOrClear(re)})()}tryRedirectSignIn(f){var m=this;return(0,_.Z)(function*(){let T=null;try{T=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(z){yield m._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,_.Z)(function*(){var T;try{yield pr(f)}catch(z){if("auth/network-request-failed"!==(null===(T=z)||void 0===T?void 0:T.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function it(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var f=this;return(0,_.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,_.Z)(function*(){const T=f?(0,ie.m9)(f):null;return T&&ue(T.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(T&&T._clone(m))})()}_updateCurrentUser(f,m=!1){var T=this;return(0,_.Z)(function*(){if(!T._deleted)return f&&ue(T.tenantId===f.tenantId,T,"tenant-id-mismatch"),m||(yield T.beforeStateQueue.runMiddleware(f)),T.queue((0,_.Z)(function*(){yield T.directlySetCurrentUser(f),T.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,_.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,_.Z)(function*(){yield m.assertedPersistence.setPersistence(Be(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new ie.LL("auth","Firebase",f())}onAuthStateChanged(f,m,T){return this.registerStateListener(this.authStateSubscription,f,m,T)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,T){return this.registerStateListener(this.idTokenSubscription,f,m,T)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var T=this;return(0,_.Z)(function*(){const z=yield T.getOrInitRedirectPersistenceManager(m);return null===f?z.removeCurrentUser():z.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,_.Z)(function*(){if(!m.redirectPersistenceManager){const T=f&&Be(f)||m._popupRedirectResolver;ue(T,m,"argument-error"),m.redirectPersistenceManager=yield rr.create(m,[Be(T._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,_.Z)(function*(){var T,z;return m._isInitialized&&(yield m.queue((0,_.Z)(function*(){}))),(null===(T=m._currentUser)||void 0===T?void 0:T._redirectEventId)===f?m._currentUser:(null===(z=m.redirectUser)||void 0===z?void 0:z._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,_.Z)(function*(){if(f===m.currentUser)return m.queue((0,_.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,T,z){if(this._deleted)return()=>{};const re="function"==typeof m?m:m.next.bind(m),Le=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(Le,this,"internal-error"),Le.then(()=>re(this.currentUser)),"function"==typeof m?f.addObserver(m,T,z):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,_.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Qi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,_.Z)(function*(){var m;const T={"X-Client-Version":f.clientVersion};f.app.options.appId&&(T["X-Firebase-gmpid"]=f.app.options.appId);const z=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return z&&(T["X-Firebase-Client"]=z),T})()}}function Ht(w){return(0,ie.m9)(w)}class Wn{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,ie.ne)(m=>this.observer=m)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fi(w){const f=w.indexOf(":");return f<0?"":w.substr(0,f+1)}function Li(w){if(!w)return null;const f=Number(w);return isNaN(f)?null:f}class Ai{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return lt("not implemented")}_getIdTokenResponse(f){return lt("not implemented")}_linkToIdToken(f,m){return lt("not implemented")}_getReauthenticationResolver(f){return lt("not implemented")}}function gr(w,f){return En.apply(this,arguments)}function En(){return(En=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:resetPassword",Vt(w,f))})).apply(this,arguments)}function Ce(w,f){return we.apply(this,arguments)}function we(){return(we=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function de(w,f){return ze.apply(this,arguments)}function ze(){return(ze=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:update",Vt(w,f))})).apply(this,arguments)}function zt(){return(zt=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signInWithPassword",Vt(w,f))})).apply(this,arguments)}function bn(w,f){return xn.apply(this,arguments)}function xn(){return(xn=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:sendOobCode",Vt(w,f))})).apply(this,arguments)}function Tn(w,f){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,_.Z)(function*(w,f){return bn(w,f)})).apply(this,arguments)}function Zr(w,f){return pi.apply(this,arguments)}function pi(){return(pi=(0,_.Z)(function*(w,f){return bn(w,f)})).apply(this,arguments)}function xi(w,f){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,_.Z)(function*(w,f){return bn(w,f)})).apply(this,arguments)}function rs(w,f){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,_.Z)(function*(w,f){return bn(w,f)})).apply(this,arguments)}function to(){return(to=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signInWithEmailLink",Vt(w,f))})).apply(this,arguments)}function mo(){return(mo=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signInWithEmailLink",Vt(w,f))})).apply(this,arguments)}class _r extends Ai{constructor(f,m,T,z=null){super("password",T),this._email=f,this._password=m,this._tenantId=z}static _fromEmailAndPassword(f,m){return new _r(f,m,"password")}static _fromEmailAndCode(f,m,T=null){return new _r(f,m,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,_.Z)(function*(){switch(m.signInMethod){case"password":return function ct(w,f){return zt.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function is(w,f){return to.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:ht(f,"internal-error")}})()}_linkToIdToken(f,m){var T=this;return(0,_.Z)(function*(){switch(T.signInMethod){case"password":return Ce(f,{idToken:m,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function ss(w,f){return mo.apply(this,arguments)}(f,{idToken:m,email:T._email,oobCode:T._password});default:ht(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function qn(w,f){return Ie.apply(this,arguments)}function Ie(){return(Ie=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signInWithIdp",Vt(w,f))})).apply(this,arguments)}class je extends Ai{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new je(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):ht("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:T,signInMethod:z}=m,re=(0,De._T)(m,["providerId","signInMethod"]);if(!T||!z)return null;const Le=new je(T,z);return Le.idToken=re.idToken||void 0,Le.accessToken=re.accessToken||void 0,Le.secret=re.secret,Le.nonce=re.nonce,Le.pendingToken=re.pendingToken||null,Le}_getIdTokenResponse(f){return qn(f,this.buildRequest())}_linkToIdToken(f,m){const T=this.buildRequest();return T.idToken=m,qn(f,T)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,qn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,ie.xO)(m)}return f}}function st(w,f){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:sendVerificationCode",Vt(w,f))})).apply(this,arguments)}function Zn(){return(Zn=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,f))})).apply(this,arguments)}function gn(){return(gn=(0,_.Z)(function*(w,f){const m=yield Xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,f));if(m.temporaryProof)throw Yn(w,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Dn={USER_NOT_FOUND:"user-not-found"};function yo(){return(yo=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Dn)})).apply(this,arguments)}class Vi extends Ai{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Vi({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Vi({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function Gt(w,f){return Zn.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function ai(w,f){return gn.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function jr(w,f){return yo.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:T,verificationCode:z}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:T,code:z}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:T,phoneNumber:z,temporaryProof:re}=f;return T||m||z||re?new Vi({verificationId:m,verificationCode:T,phoneNumber:z,temporaryProof:re}):null}}class vs{constructor(f){var m,T,z,re,Le,dt;const Ft=(0,ie.zd)((0,ie.pd)(f)),sn=null!==(m=Ft.apiKey)&&void 0!==m?m:null,Gn=null!==(T=Ft.oobCode)&&void 0!==T?T:null,On=function $r(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(z=Ft.mode)&&void 0!==z?z:null);ue(sn&&Gn&&On,"argument-error"),this.apiKey=sn,this.operation=On,this.code=Gn,this.continueUrl=null!==(re=Ft.continueUrl)&&void 0!==re?re:null,this.languageCode=null!==(Le=Ft.languageCode)&&void 0!==Le?Le:null,this.tenantId=null!==(dt=Ft.tenantId)&&void 0!==dt?dt:null}static parseLink(f){const m=function _s(w){const f=(0,ie.zd)((0,ie.pd)(w)).link,m=f?(0,ie.zd)((0,ie.pd)(f)).deep_link_id:null,T=(0,ie.zd)((0,ie.pd)(w)).deep_link_id;return(T?(0,ie.zd)((0,ie.pd)(T)).link:null)||T||m||f||w}(f);try{return new vs(m)}catch(T){return null}}}let Ro=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(m,T){return _r._fromEmailAndPassword(m,T)}static credentialWithLink(m,T){const z=vs.parseLink(T);return ue(z,"argument-error"),_r._fromEmailAndCode(m,z.code,z.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class Or{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Ki extends Or{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ri extends Ki{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return ue("providerId"in m&&"signInMethod"in m,"argument-error"),je._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return ue(f.idToken||f.accessToken,"argument-error"),je._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ri.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ri.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:T,oauthTokenSecret:z,pendingToken:re,nonce:Le,providerId:dt}=f;if(!T&&!z&&!m&&!re||!dt)return null;try{return new Ri(dt)._credential({idToken:m,accessToken:T,nonce:Le,pendingToken:re})}catch(Ft){return null}}}let xs=(()=>{class w extends Ki{constructor(){super("facebook.com")}static credential(m){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(T){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),vo=(()=>{class w extends Ki{constructor(){super("google.com"),this.addScope("profile")}static credential(m,T){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:T})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:T,oauthAccessToken:z}=m;if(!T&&!z)return null;try{return w.credential(T,z)}catch(re){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Rs=(()=>{class w extends Ki{constructor(){super("github.com")}static credential(m){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return w.credential(m.oauthAccessToken)}catch(T){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class bi extends Ai{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return qn(f,this.buildRequest())}_linkToIdToken(f,m){const T=this.buildRequest();return T.idToken=m,qn(f,T)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,qn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:T,signInMethod:z,pendingToken:re}=m;return T&&z&&re&&T===z?new bi(T,re):null}static _create(f,m){return new bi(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Di extends Or{constructor(f){ue(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Di.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Di.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=bi.fromJSON(f);return ue(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:T}=f;if(!m||!T)return null;try{return bi._create(T,m)}catch(z){return null}}}let os=(()=>{class w extends Ki{constructor(){super("twitter.com")}static credential(m,T){return je._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:T})}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:T,oauthTokenSecret:z}=m;if(!T||!z)return null;try{return w.credential(T,z)}catch(re){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function _n(w,f){return as.apply(this,arguments)}function as(){return(as=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signUp",Vt(w,f))})).apply(this,arguments)}class ui{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,T,z=!1){return(0,_.Z)(function*(){const re=yield pn._fromIdTokenResponse(f,T,z),Le=Eo(T);return new ui({user:re,providerId:Le,_tokenResponse:T,operationType:m})})()}static _forOperation(f,m,T){return(0,_.Z)(function*(){yield f._updateTokensIfNecessary(T,!0);const z=Eo(T);return new ui({user:f,providerId:z,_tokenResponse:T,operationType:m})})()}}function Eo(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Ms(){return(Ms=(0,_.Z)(function*(w){var f;const m=Ht(w);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new ui({user:m.currentUser,providerId:null,operationType:"signIn"});const T=yield _n(m,{returnSecureToken:!0}),z=yield ui._fromIdTokenResponse(m,"signIn",T,!0);return yield m._updateCurrentUser(z.user),z})).apply(this,arguments)}class ni extends ie.ZR{constructor(f,m,T,z){var re;super(m.code,m.message),this.operationType=T,this.user=z,Object.setPrototypeOf(this,ni.prototype),this.customData={appName:f.name,tenantId:null!==(re=f.tenantId)&&void 0!==re?re:void 0,_serverResponse:m.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(f,m,T,z){return new ni(f,m,T,z)}}function Es(w,f,m,T){return("reauthenticate"===f?m._getReauthenticationResolver(w):m._getIdTokenResponse(w)).catch(re=>{throw"auth/multi-factor-auth-required"===re.code?ni._fromErrorAndOperation(w,re,f,T):re})}function Jr(w){return new Set(w.map(({providerId:f})=>f).filter(f=>!!f))}function tr(){return(tr=(0,_.Z)(function*(w,f){const m=(0,ie.m9)(w);yield V(!0,m,f);const{providerUserInfo:T}=yield rn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),z=Jr(T||[]);return m.providerData=m.providerData.filter(re=>z.has(re.providerId)),z.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function U(w,f){return Q.apply(this,arguments)}function Q(){return(Q=(0,_.Z)(function*(w,f,m=!1){const T=yield br(w,f._linkToIdToken(w.auth,yield w.getIdToken()),m);return ui._forOperation(w,"link",T)})).apply(this,arguments)}function V(w,f,m){return ne.apply(this,arguments)}function ne(){return(ne=(0,_.Z)(function*(w,f,m){yield pr(f);const z=!1===w?"provider-already-linked":"no-such-provider";ue(Jr(f.providerData).has(m)===w,f.auth,z)})).apply(this,arguments)}function _e(w,f){return et.apply(this,arguments)}function et(){return(et=(0,_.Z)(function*(w,f,m=!1){var T;const{auth:z}=w,re="reauthenticate";try{const Le=yield br(w,Es(z,re,f,w),m);ue(Le.idToken,z,"internal-error");const dt=qt(Le.idToken);ue(dt,z,"internal-error");const{sub:Ft}=dt;return ue(w.uid===Ft,z,"user-mismatch"),ui._forOperation(w,re,Le)}catch(Le){throw"auth/user-not-found"===(null===(T=Le)||void 0===T?void 0:T.code)&&ht(z,"user-mismatch"),Le}})).apply(this,arguments)}function mt(w,f){return ln.apply(this,arguments)}function ln(){return(ln=(0,_.Z)(function*(w,f,m=!1){const T="signIn",z=yield Es(w,T,f),re=yield ui._fromIdTokenResponse(w,T,z);return m||(yield w._updateCurrentUser(re.user)),re})).apply(this,arguments)}function Sn(w,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,_.Z)(function*(w,f){return mt(Ht(w),f)})).apply(this,arguments)}function jn(w,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,_.Z)(function*(w,f){const m=(0,ie.m9)(w);return yield V(!1,m,f.providerId),U(m,f)})).apply(this,arguments)}function Xr(w,f){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,_.Z)(function*(w,f){return _e((0,ie.m9)(w),f)})).apply(this,arguments)}function kr(w,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,_.Z)(function*(w,f){return Xn(w,"POST","/v1/accounts:signInWithCustomToken",Vt(w,f))})).apply(this,arguments)}function Jt(){return(Jt=(0,_.Z)(function*(w,f){const m=Ht(w),T=yield kr(m,{token:f,returnSecureToken:!0}),z=yield ui._fromIdTokenResponse(m,"signIn",T);return yield m._updateCurrentUser(z.user),z})).apply(this,arguments)}class qi{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?Nn._fromServerResponse(f,m):ht(f,"internal-error")}}class Nn extends qi{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new Nn(m)}}function io(w,f,m){var T;ue((null===(T=m.url)||void 0===T?void 0:T.length)>0,w,"invalid-continue-uri"),ue(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(ue(m.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(ue(m.android.packageName.length>0,w,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function H(){return(H=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w),z={requestType:"PASSWORD_RESET",email:f};m&&io(T,z,m),yield Zr(T,z)})).apply(this,arguments)}function k(){return(k=(0,_.Z)(function*(w,f,m){yield gr((0,ie.m9)(w),{oobCode:f,newPassword:m})})).apply(this,arguments)}function R(){return(R=(0,_.Z)(function*(w,f){yield de((0,ie.m9)(w),{oobCode:f})})).apply(this,arguments)}function Y(w,f){return ae.apply(this,arguments)}function ae(){return(ae=(0,_.Z)(function*(w,f){const m=(0,ie.m9)(w),T=yield gr(m,{oobCode:f}),z=T.requestType;switch(ue(z,m,"internal-error"),z){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(T.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(T.mfaInfo,m,"internal-error");default:ue(T.email,m,"internal-error")}let re=null;return T.mfaInfo&&(re=qi._fromServerResponse(Ht(m),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:re},operation:z}})).apply(this,arguments)}function Ke(){return(Ke=(0,_.Z)(function*(w,f){const{data:m}=yield Y((0,ie.m9)(w),f);return m.email})).apply(this,arguments)}function Kt(){return(Kt=(0,_.Z)(function*(w,f,m){const T=Ht(w),z=yield _n(T,{returnSecureToken:!0,email:f,password:m}),re=yield ui._fromIdTokenResponse(T,"signIn",z);return yield T._updateCurrentUser(re.user),re})).apply(this,arguments)}function Qn(){return(Qn=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w),z={requestType:"EMAIL_SIGNIN",email:f};ue(m.handleCodeInApp,T,"argument-error"),m&&io(T,z,m),yield xi(T,z)})).apply(this,arguments)}function nr(){return(nr=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w),z=Ro.credentialWithLink(f,m||wt());return ue(z._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),Sn(T,z)})).apply(this,arguments)}function Fr(w,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:createAuthUri",Vt(w,f))})).apply(this,arguments)}function ri(){return(ri=(0,_.Z)(function*(w,f){const T={identifier:f,continueUri:Nt()?wt():"http://localhost"},{signinMethods:z}=yield Fr((0,ie.m9)(w),T);return z||[]})).apply(this,arguments)}function lr(){return(lr=(0,_.Z)(function*(w,f){const m=(0,ie.m9)(w),z={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};f&&io(m.auth,z,f);const{email:re}=yield Tn(m.auth,z);re!==w.email&&(yield w.reload())})).apply(this,arguments)}function so(){return(so=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w),re={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:f};m&&io(T.auth,re,m);const{email:Le}=yield rs(T.auth,re);Le!==w.email&&(yield w.reload())})).apply(this,arguments)}function wo(w,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,_.Z)(function*(w,f){return tn(w,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Io(){return(Io=(0,_.Z)(function*(w,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const T=(0,ie.m9)(w),re={idToken:yield T.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},Le=yield br(T,wo(T.auth,re));T.displayName=Le.displayName||null,T.photoURL=Le.photoUrl||null;const dt=T.providerData.find(({providerId:Ft})=>"password"===Ft);dt&&(dt.displayName=T.displayName,dt.photoURL=T.photoURL),yield T._updateTokensIfNecessary(Le)})).apply(this,arguments)}function oo(w,f,m){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,_.Z)(function*(w,f,m){const{auth:T}=w,re={idToken:yield w.getIdToken(),returnSecureToken:!0};f&&(re.email=f),m&&(re.password=m);const Le=yield br(w,Ce(T,re));yield w._updateTokensIfNecessary(Le,!0)})).apply(this,arguments)}class uo{constructor(f,m,T={}){this.isNewUser=f,this.providerId=m,this.profile=T}}class nu extends uo{constructor(f,m,T,z){super(f,m,T),this.username=z}}class Qo extends uo{constructor(f,m){super(f,"facebook.com",m)}}class da extends nu{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class al extends uo{constructor(f,m){super(f,"google.com",m)}}class ji extends nu{constructor(f,m,T){super(f,"twitter.com",m,T)}}function Po(w){const{user:f,_tokenResponse:m}=w;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function ao(w){var f,m;if(!w)return null;const{providerId:T}=w,z=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},re=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!T&&(null==w?void 0:w.idToken)){const Le=null===(m=null===(f=qt(w.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(Le)return new uo(re,"anonymous"!==Le&&"custom"!==Le?Le:null)}if(!T)return null;switch(T){case"facebook.com":return new Qo(re,z);case"github.com":return new da(re,z);case"google.com":return new al(re,z);case"twitter.com":return new ji(re,z,w.screenName||null);case"custom":case"anonymous":return new uo(re,null);default:return new uo(re,T,z)}}(m)}class ws{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new ws("enroll",f)}static _fromMfaPendingCredential(f){return new ws("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,T;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return ws._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(T=f.multiFactorSession)||void 0===T?void 0:T.idToken)return ws._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ks{constructor(f,m,T){this.session=f,this.hints=m,this.signInResolver=T}static _fromError(f,m){const T=Ht(f),z=m.customData._serverResponse,re=(z.mfaInfo||[]).map(dt=>qi._fromServerResponse(T,dt));ue(z.mfaPendingCredential,T,"internal-error");const Le=ws._fromMfaPendingCredential(z.mfaPendingCredential);return new Ks(Le,re,function(){var dt=(0,_.Z)(function*(Ft){const sn=yield Ft._process(T,Le);delete z.mfaInfo,delete z.mfaPendingCredential;const Gn=Object.assign(Object.assign({},z),{idToken:sn.idToken,refreshToken:sn.refreshToken});switch(m.operationType){case"signIn":const On=yield ui._fromIdTokenResponse(T,m.operationType,Gn);return yield T._updateCurrentUser(On.user),On;case"reauthenticate":return ue(m.user,T,"internal-error"),ui._forOperation(m.user,m.operationType,Gn);default:ht(T,"internal-error")}});return function(Ft){return dt.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,_.Z)(function*(){return m.signInResolver(f)})()}}function ju(w,f){return tn(w,"POST","/v2/accounts/mfaEnrollment:start",Vt(w,f))}class Sa{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(T=>qi._fromServerResponse(f.auth,T)))})}static _fromUser(f){return new Sa(f)}getSession(){var f=this;return(0,_.Z)(function*(){return ws._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var T=this;return(0,_.Z)(function*(){const z=f,re=yield T.getSession(),Le=yield br(T.user,z._process(T.user.auth,re,m));return yield T.user._updateTokensIfNecessary(Le),T.user.reload()})()}unenroll(f){var m=this;return(0,_.Z)(function*(){var T;const z="string"==typeof f?f:f.uid,re=yield m.user.getIdToken(),Le=yield br(m.user,function Zs(w,f){return tn(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(w,f))}(m.user.auth,{idToken:re,mfaEnrollmentId:z}));m.enrolledFactors=m.enrolledFactors.filter(({uid:dt})=>dt!==z),yield m.user._updateTokensIfNecessary(Le);try{yield m.user.reload()}catch(dt){if("auth/user-token-expired"!==(null===(T=dt)||void 0===T?void 0:T.code))throw dt}})()}}const Ys=new WeakMap,$o="__sak";class Xo{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem($o,"1"),this.storage.removeItem($o),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Qs=(()=>{class w extends Xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,T)=>this.onStorageEvent(m,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function us(){const w=(0,ie.z$)();return wi(w)||fi(w)}()&&function wr(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=Er(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const T of Object.keys(this.listeners)){const z=this.storage.getItem(T),re=this.localCache[T];z!==re&&m(T,re,z)}}onStorageEvent(m,T=!1){if(!m.key)return void this.forAllChangedKeys((dt,Ft,sn)=>{this.notifyListeners(dt,sn)});const z=m.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const dt=this.storage.getItem(z);if(m.newValue!==dt)null!==m.newValue?this.storage.setItem(z,m.newValue):this.storage.removeItem(z);else if(this.localCache[z]===m.newValue&&!T)return}const re=()=>{const dt=this.storage.getItem(z);!T&&this.localCache[z]===dt||this.notifyListeners(z,dt)},Le=this.storage.getItem(z);!function Yr(){return(0,ie.w1)()&&10===document.documentMode}()||Le===m.newValue||m.newValue===m.oldValue?re():setTimeout(re,10)}notifyListeners(m,T){this.localCache[m]=T;const z=this.listeners[m];if(z)for(const re of Array.from(z))re(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,T,z)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:T,newValue:z}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,T){var z=()=>super._set,re=this;return(0,_.Z)(function*(){yield z().call(re,m,T),re.localCache[m]=JSON.stringify(T)})()}_get(m){var T=()=>super._get,z=this;return(0,_.Z)(function*(){const re=yield T().call(z,m);return z.localCache[m]=JSON.stringify(re),re})()}_remove(m){var T=()=>super._remove,z=this;return(0,_.Z)(function*(){yield T().call(z,m),delete z.localCache[m]})()}}return w.type="LOCAL",w})(),Ns=(()=>{class w extends Xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,T){}_removeListener(m,T){}}return w.type="SESSION",w})();let Eu=(()=>{class w{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const T=this.receivers.find(re=>re.isListeningto(m));if(T)return T;const z=new w(m);return this.receivers.push(z),z}isListeningto(m){return this.eventTarget===m}handleEvent(m){var T=this;return(0,_.Z)(function*(){const z=m,{eventId:re,eventType:Le,data:dt}=z.data,Ft=T.handlersMap[Le];if(!(null==Ft?void 0:Ft.size))return;z.ports[0].postMessage({status:"ack",eventId:re,eventType:Le});const sn=Array.from(Ft).map(function(){var On=(0,_.Z)(function*(gs){return gs(z.origin,dt)});return function(gs){return On.apply(this,arguments)}}()),Gn=yield function vu(w){return Promise.all(w.map(function(){var f=(0,_.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(T){return{fulfilled:!1,reason:T}}});return function(m){return f.apply(this,arguments)}}()))}(sn);z.ports[0].postMessage({status:"done",eventId:re,eventType:Le,response:Gn})})()}_subscribe(m,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(T)}_unsubscribe(m,T){this.handlersMap[m]&&T&&this.handlersMap[m].delete(T),(!T||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Is(w="",f=10){let m="";for(let T=0;T<f;T++)m+=Math.floor(10*Math.random());return w+m}class wu{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,T=50){var z=this;return(0,_.Z)(function*(){const re="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!re)throw new Error("connection_unavailable");let Le,dt;return new Promise((Ft,sn)=>{const Gn=Is("",20);re.port1.start();const On=setTimeout(()=>{sn(new Error("unsupported_event"))},T);dt={messageChannel:re,onMessage(gs){const zo=gs;if(zo.data.eventId===Gn)switch(zo.data.status){case"ack":clearTimeout(On),Le=setTimeout(()=>{sn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Le),Ft(zo.data.response);break;default:clearTimeout(On),clearTimeout(Le),sn(new Error("invalid_response"))}}},z.handlers.add(dt),re.port1.addEventListener("message",dt.onMessage),z.target.postMessage({eventType:f,eventId:Gn,data:m},[re.port2])}).finally(()=>{dt&&z.removeMessageHandler(dt)})})()}}function Mr(){return window}function Js(){return void 0!==Mr().WorkerGlobalScope&&"function"==typeof Mr().importScripts}function bo(){return(bo=(0,_.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const dl="firebaseLocalStorageDb",gi="firebaseLocalStorage",Ho="fbase_key";class ta{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function S(w,f){return w.transaction([gi],f?"readwrite":"readonly").objectStore(gi)}function b(){const w=indexedDB.open(dl,1);return new Promise((f,m)=>{w.addEventListener("error",()=>{m(w.error)}),w.addEventListener("upgradeneeded",()=>{const T=w.result;try{T.createObjectStore(gi,{keyPath:Ho})}catch(z){m(z)}}),w.addEventListener("success",(0,_.Z)(function*(){const T=w.result;T.objectStoreNames.contains(gi)?f(T):(T.close(),yield function D(){const w=indexedDB.deleteDatabase(dl);return new ta(w).toPromise()}(),f(yield b()))}))})}function N(w,f,m){return P.apply(this,arguments)}function P(){return(P=(0,_.Z)(function*(w,f,m){const T=S(w,!0).put({[Ho]:f,value:m});return new ta(T).toPromise()})).apply(this,arguments)}function he(){return(he=(0,_.Z)(function*(w,f){const m=S(w,!1).get(f),T=yield new ta(m).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Te(w,f){const m=S(w,!0).delete(f);return new ta(m).toPromise()}const dn=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,_.Z)(function*(){return m.db||(m.db=yield b()),m.db})()}_withRetries(m){var T=this;return(0,_.Z)(function*(){let z=0;for(;;)try{const re=yield T._openDb();return yield m(re)}catch(re){if(z++>3)throw re;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,_.Z)(function*(){return Js()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,_.Z)(function*(){m.receiver=Eu._getInstance(function ru(){return Js()?self:null}()),m.receiver._subscribe("keyChanged",function(){var T=(0,_.Z)(function*(z,re){return{keyProcessed:(yield m._poll()).includes(re.key)}});return function(z,re){return T.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var T=(0,_.Z)(function*(z,re){return["keyChanged"]});return function(z,re){return T.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,_.Z)(function*(){var T,z;if(m.activeServiceWorker=yield function Ji(){return bo.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new wu(m.activeServiceWorker);const re=yield m.sender._send("ping",{},800);!re||(null===(T=re[0])||void 0===T?void 0:T.fulfilled)&&(null===(z=re[0])||void 0===z?void 0:z.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var T=this;return(0,_.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function ea(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:m},T.serviceWorkerReceiverAvailable?800:50)}catch(z){}})()}_isAvailable(){return(0,_.Z)(function*(){try{if(!indexedDB)return!1;const m=yield b();return yield N(m,$o,"1"),yield Te(m,$o),!0}catch(m){}return!1})()}_withPendingWrite(m){var T=this;return(0,_.Z)(function*(){T.pendingWrites++;try{yield m()}finally{T.pendingWrites--}})()}_set(m,T){var z=this;return(0,_.Z)(function*(){return z._withPendingWrite((0,_.Z)(function*(){return yield z._withRetries(re=>N(re,m,T)),z.localCache[m]=T,z.notifyServiceWorker(m)}))})()}_get(m){var T=this;return(0,_.Z)(function*(){const z=yield T._withRetries(re=>function K(w,f){return he.apply(this,arguments)}(re,m));return T.localCache[m]=z,z})()}_remove(m){var T=this;return(0,_.Z)(function*(){return T._withPendingWrite((0,_.Z)(function*(){return yield T._withRetries(z=>Te(z,m)),delete T.localCache[m],T.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,_.Z)(function*(){const T=yield m._withRetries(Le=>{const dt=S(Le,!1).getAll();return new ta(dt).toPromise()});if(!T)return[];if(0!==m.pendingWrites)return[];const z=[],re=new Set;for(const{fbase_key:Le,value:dt}of T)re.add(Le),JSON.stringify(m.localCache[Le])!==JSON.stringify(dt)&&(m.notifyListeners(Le,dt),z.push(Le));for(const Le of Object.keys(m.localCache))m.localCache[Le]&&!re.has(Le)&&(m.notifyListeners(Le,null),z.push(Le));return z})()}notifyListeners(m,T){this.localCache[m]=T;const z=this.listeners[m];if(z)for(const re of Array.from(z))re(T)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,_.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(T)}_removeListener(m,T){this.listeners[m]&&(this.listeners[m].delete(T),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Vr(w,f){return tn(w,"POST","/v2/accounts/mfaSignIn:start",Vt(w,f))}function ko(){return(ko=(0,_.Z)(function*(w){return(yield tn(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function na(w){return new Promise((f,m)=>{const T=document.createElement("script");T.setAttribute("src",w),T.onload=f,T.onerror=z=>{const re=W("internal-error");re.customData=z,m(re)},T.type="text/javascript",T.charset="UTF-8",function xa(){var w,f;return null!==(f=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==f?f:document}().appendChild(T)})}function Rn(w){return`__${w}${Math.floor(1e6*Math.random())}`}const mi=1e12;class Fn{constructor(f){this.auth=f,this.counter=mi,this._widgets=new Map}render(f,m){const T=this.counter;return this._widgets.set(T,new hl(f,this.auth.name,m||{})),this.counter++,T}reset(f){var m;const T=f||mi;null===(m=this._widgets.get(T))||void 0===m||m.delete(),this._widgets.delete(T)}getResponse(f){var m;return(null===(m=this._widgets.get(f||mi))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,_.Z)(function*(){var T;return null===(T=m._widgets.get(f||mi))||void 0===T||T.execute(),""})()}}class hl{constructor(f,m,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const z="string"==typeof f?document.getElementById(f):f;ue(z,"argument-error",{appName:m}),this.container=z,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Tr(w){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<w;T++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(T){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(T){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ni=Rn("rcb"),Xi=new nn(3e4,6e4);class sc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Mr().grecaptcha}load(f,m=""){return ue(function Ll(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Mr().grecaptcha):new Promise((T,z)=>{const re=Mr().setTimeout(()=>{z(W(f,"network-request-failed"))},Xi.get());Mr()[Ni]=()=>{Mr().clearTimeout(re),delete Mr()[Ni];const dt=Mr().grecaptcha;if(!dt)return void z(W(f,"internal-error"));const Ft=dt.render;dt.render=(sn,Gn)=>{const On=Ft(sn,Gn);return this.counter++,On},this.hostLanguage=m,T(dt)},na(`https://www.google.com/recaptcha/api.js??${(0,ie.xO)({onload:Ni,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(re),z(W(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!Mr().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ra{load(f){return(0,_.Z)(function*(){return new Fn(f)})()}clearedOneInstance(){}}const Hu="recaptcha",fl={theme:"light",type:"image"};class Iu{constructor(f,m=Object.assign({},fl),T){this.parameters=m,this.type=Hu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ht(T),this.isInvisible="invisible"===this.parameters.size,ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const z="string"==typeof f?document.getElementById(f):f;ue(z,this.auth,"argument-error"),this.container=z,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ra:new sc,this.validateStartingState()}verify(){var f=this;return(0,_.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),T=f.getAssertedRecaptcha();return T.getResponse(m)||new Promise(re=>{const Le=dt=>{!dt||(f.tokenChangeListeners.delete(Le),re(dt))};f.tokenChangeListeners.add(Le),f.isInvisible&&T.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(T=>T(m)),"function"==typeof f)f(m);else if("string"==typeof f){const T=Mr()[f];"function"==typeof T&&T(m)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,_.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const T=document.createElement("div");m.appendChild(T),m=T}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,_.Z)(function*(){ue(Nt()&&!Js(),f.auth,"internal-error"),yield function Bc(){let w=null;return new Promise(f=>{"complete"!==document.readyState?(w=()=>f(),window.addEventListener("load",w)):f()}).catch(f=>{throw w&&window.removeEventListener("load",w),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Xs(w){return ko.apply(this,arguments)}(f.auth);ue(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Gr{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Vi._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Ba(){return(Ba=(0,_.Z)(function*(w,f,m){const T=Ht(w),z=yield ja(T,f,(0,ie.m9)(m));return new Gr(z,re=>Sn(T,re))})).apply(this,arguments)}function fa(){return(fa=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w);yield V(!1,T,"phone");const z=yield ja(T.auth,f,(0,ie.m9)(m));return new Gr(z,re=>jn(T,re))})).apply(this,arguments)}function Je(){return(Je=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w),z=yield ja(T.auth,f,(0,ie.m9)(m));return new Gr(z,re=>Xr(T,re))})).apply(this,arguments)}function ja(w,f,m){return Us.apply(this,arguments)}function Us(){return(Us=(0,_.Z)(function*(w,f,m){var T;const z=yield m.verify();try{let re;if(ue("string"==typeof z,w,"argument-error"),ue(m.type===Hu,w,"argument-error"),re="string"==typeof f?{phoneNumber:f}:f,"session"in re){const Le=re.session;if("phoneNumber"in re)return ue("enroll"===Le.type,w,"internal-error"),(yield ju(w,{idToken:Le.credential,phoneEnrollmentInfo:{phoneNumber:re.phoneNumber,recaptchaToken:z}})).phoneSessionInfo.sessionInfo;{ue("signin"===Le.type,w,"internal-error");const dt=(null===(T=re.multiFactorHint)||void 0===T?void 0:T.uid)||re.multiFactorUid;return ue(dt,w,"missing-multi-factor-info"),(yield Vr(w,{mfaPendingCredential:Le.credential,mfaEnrollmentId:dt,phoneSignInInfo:{recaptchaToken:z}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Le}=yield st(w,{phoneNumber:re.phoneNumber,recaptchaToken:z});return Le}}finally{m._reset()}})).apply(this,arguments)}function ra(){return(ra=(0,_.Z)(function*(w,f){yield U((0,ie.m9)(w),f)})).apply(this,arguments)}let Do=(()=>{class w{constructor(m){this.providerId=w.PROVIDER_ID,this.auth=Ht(m)}verifyPhoneNumber(m,T){return ja(this.auth,m,(0,ie.m9)(T))}static credential(m,T){return Vi._fromVerification(m,T)}static credentialFromResult(m){return w.credentialFromTaggedObject(m)}static credentialFromError(m){return w.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:T,temporaryProof:z}=m;return T&&z?Vi._fromTokenResponse(T,z):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Ma(w,f){return f?Be(f):(ue(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class ga extends Ai{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return qn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return qn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return qn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Wu(w){return mt(w.auth,new ga(w),w.bypassAuthState)}function $a(w){const{auth:f,user:m}=w;return ue(m,f,"internal-error"),_e(m,new ga(w),w.bypassAuthState)}function Go(w){return pl.apply(this,arguments)}function pl(){return(pl=(0,_.Z)(function*(w){const{auth:f,user:m}=w;return ue(m,f,"internal-error"),U(m,new ga(w),w.bypassAuthState)})).apply(this,arguments)}class fs{constructor(f,m,T,z,re=!1){this.auth=f,this.resolver=T,this.user=z,this.bypassAuthState=re,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,_.Z)(function*(T,z){f.pendingPromise={resolve:T,reject:z};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(re){f.reject(re)}});return function(T,z){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,_.Z)(function*(){const{urlResponse:T,sessionId:z,postBody:re,tenantId:Le,error:dt,type:Ft}=f;if(dt)return void m.reject(dt);const sn={auth:m.auth,requestUri:T,sessionId:z,tenantId:Le||void 0,postBody:re||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ft)(sn))}catch(Gn){m.reject(Gn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Wu;case"linkViaPopup":case"linkViaRedirect":return Go;case"reauthViaPopup":case"reauthViaRedirect":return $a;default:ht(this.auth,"internal-error")}}resolve(f){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ge(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ha=new nn(2e3,1e4);function ma(){return(ma=(0,_.Z)(function*(w,f,m){const T=Ht(w);Et(w,f,Or);const z=Ma(T,m);return new zu(T,"signInViaPopup",f,z).executeNotNull()})).apply(this,arguments)}function Pa(){return(Pa=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w);Et(T.auth,f,Or);const z=Ma(T.auth,m);return new zu(T.auth,"reauthViaPopup",f,z,T).executeNotNull()})).apply(this,arguments)}function Nr(){return(Nr=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w);Et(T.auth,f,Or);const z=Ma(T.auth,m);return new zu(T.auth,"linkViaPopup",f,z,T).executeNotNull()})).apply(this,arguments)}let zu=(()=>{class w extends fs{constructor(m,T,z,re,Le){super(m,T,re,Le),this.provider=z,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var m=this;return(0,_.Z)(function*(){const T=yield m.execute();return ue(T,m.auth,"internal-error"),T})()}onExecution(){var m=this;return(0,_.Z)(function*(){ge(1===m.filter.length,"Popup operations only handle one event");const T=Is();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],T),m.authWindow.associatedEvent=T,m.resolver._originValidation(m.auth).catch(z=>{m.reject(z)}),m.resolver._isIframeWebStorageSupported(m.auth,z=>{z||m.reject(W(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(W(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const m=()=>{var T,z;this.pollId=(null===(z=null===(T=this.authWindow)||void 0===T?void 0:T.window)||void 0===z?void 0:z.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(W(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Ha.get())};m()}}return w.currentPopupAction=null,w})();const ls=new Map;class $c extends fs{constructor(f,m,T=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,T),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,_.Z)(function*(){let T=ls.get(m.auth._key());if(!T){try{const re=(yield function $i(w,f){return Wo.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;T=()=>Promise.resolve(re)}catch(z){T=()=>Promise.reject(z)}ls.set(m.auth._key(),T)}return m.bypassAuthState||ls.set(m.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,T=this;return(0,_.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(T,f);if("unknown"!==f.type){if(f.eventId){const z=yield T.auth._redirectUserForId(f.eventId);if(z)return T.user=z,m().call(T,f);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,_.Z)(function*(){})()}cleanUp(){}}function Wo(){return(Wo=(0,_.Z)(function*(w,f){const m=me(f),T=X(w);if(!(yield T._isAvailable()))return!1;const z="true"===(yield T._get(m));return yield T._remove(m),z})).apply(this,arguments)}function Bs(w,f){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,_.Z)(function*(w,f){return X(w)._set(me(f),"true")})).apply(this,arguments)}function j(w,f){ls.set(w._key(),f)}function X(w){return Be(w._redirectPersistence)}function me(w){return hn("pendingRedirect",w.config.apiKey,w.name)}function bt(){return(bt=(0,_.Z)(function*(w,f,m){const T=Ht(w);Et(w,f,Or);const z=Ma(T,m);return yield Bs(z,T),z._openRedirect(T,f,"signInViaRedirect")})).apply(this,arguments)}function Hn(){return(Hn=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w);Et(T.auth,f,Or);const z=Ma(T.auth,m);yield Bs(z,T.auth);const re=yield iu(T);return z._openRedirect(T.auth,f,"reauthViaRedirect",re)})).apply(this,arguments)}function yi(){return(yi=(0,_.Z)(function*(w,f,m){const T=(0,ie.m9)(w);Et(T.auth,f,Or);const z=Ma(T.auth,m);yield V(!1,T,f.providerId),yield Bs(z,T.auth);const re=yield iu(T);return z._openRedirect(T.auth,f,"linkViaRedirect",re)})).apply(this,arguments)}function js(){return(js=(0,_.Z)(function*(w,f){return yield Ht(w)._initializationPromise,ho(w,f,!1)})).apply(this,arguments)}function ho(w,f){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,_.Z)(function*(w,f,m=!1){const T=Ht(w),z=Ma(T,f),Le=yield new $c(T,z,m).execute();return Le&&!m&&(delete Le.user._redirectEventId,yield T._persistUserIfCurrent(Le.user),yield T._setRedirectUser(null,f)),Le})).apply(this,arguments)}function iu(w){return $s.apply(this,arguments)}function $s(){return($s=(0,_.Z)(function*(w){const f=Is(`${w.uid}:::`);return w._redirectEventId=f,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),f})).apply(this,arguments)}class Hs{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(f,T)&&(m=!0,this.sendToConsumer(f,T),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Vl(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ou(w);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var T;if(f.error&&!ou(f)){const z=(null===(T=f.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";m.onError(W(this.auth,z))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const T=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&T}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ya(f))}saveEventToCache(f){this.cachedEventUids.add(ya(f)),this.lastProcessedEventTime=Date.now()}}function ya(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(f=>f).join("-")}function ou({type:w,error:f}){return"unknown"===w&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Cu(w){return gl.apply(this,arguments)}function gl(){return(gl=(0,_.Z)(function*(w,f={}){return tn(w,"GET","/v1/projects",f)})).apply(this,arguments)}const ml=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yl=/^https?/;function Hc(){return(Hc=(0,_.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:f}=yield Cu(w);for(const m of f)try{if(Gs(m))return}catch(T){}ht(w,"unauthorized-domain")})).apply(this,arguments)}function Gs(w){const f=wt(),{protocol:m,hostname:T}=new URL(f);if(w.startsWith("chrome-extension://")){const Le=new URL(w);return""===Le.hostname&&""===T?"chrome-extension:"===m&&w.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&Le.hostname===T}if(!yl.test(m))return!1;if(ml.test(w))return T===w;const z=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+z+"|"+z+")$","i").test(T)}const oc=new nn(3e4,6e4);function Ti(){const w=Mr().___jsl;if(null==w?void 0:w.H)for(const f of Object.keys(w.H))if(w.H[f].r=w.H[f].r||[],w.H[f].L=w.H[f].L||[],w.H[f].r=[...w.H[f].L],w.CP)for(let m=0;m<w.CP.length;m++)w.CP[m]=null}let bu=null;function ia(w){return bu=bu||function Gc(w){return new Promise((f,m)=>{var T,z,re;function Le(){Ti(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Ti(),m(W(w,"network-request-failed"))},timeout:oc.get()})}if(null===(z=null===(T=Mr().gapi)||void 0===T?void 0:T.iframes)||void 0===z?void 0:z.Iframe)f(gapi.iframes.getContext());else{if(!(null===(re=Mr().gapi)||void 0===re?void 0:re.load)){const dt=Rn("iframefcb");return Mr()[dt]=()=>{gapi.load?Le():m(W(w,"network-request-failed"))},na(`https://apis.google.com/js/api.js?onload=${dt}`).catch(Ft=>m(Ft))}Le()}}).catch(f=>{throw bu=null,f})}(w),bu}const _l=new nn(5e3,15e3),Ku={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Wc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function lh(w){const f=w.config;ue(f.authDomain,w,"auth-domain-config-required");const m=f.emulator?un(f,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,T={apiKey:f.apiKey,appName:w.name,v:Se.SDK_VERSION},z=Wc.get(w.config.apiHost);z&&(T.eid=z);const re=w._getFrameworks();return re.length&&(T.fw=re.join(",")),`${m}?${(0,ie.xO)(T).slice(1)}`}function qu(){return qu=(0,_.Z)(function*(w){const f=yield ia(w),m=Mr().gapi;return ue(m,w,"internal-error"),f.open({where:document.body,url:lh(w),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ku,dontclear:!0},T=>new Promise(function(){var z=(0,_.Z)(function*(re,Le){yield T.restyle({setHideOnLeave:!1});const dt=W(w,"network-request-failed"),Ft=Mr().setTimeout(()=>{Le(dt)},_l.get());function sn(){Mr().clearTimeout(Ft),re(T)}T.ping(sn).then(sn,()=>{Le(dt)})});return function(re,Le){return z.apply(this,arguments)}}()))}),qu.apply(this,arguments)}const Id={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Kc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Tu(w,f,m,T,z,re){ue(w.config.authDomain,w,"auth-domain-config-required"),ue(w.config.apiKey,w,"invalid-api-key");const Le={apiKey:w.config.apiKey,appName:w.name,authType:m,redirectUrl:T,v:Se.SDK_VERSION,eventId:z};if(f instanceof Or){f.setDefaultLanguage(w.languageCode),Le.providerId=f.providerId||"",(0,ie.xb)(f.getCustomParameters())||(Le.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Ft,sn]of Object.entries(re||{}))Le[Ft]=sn}if(f instanceof Ki){const Ft=f.getScopes().filter(sn=>""!==sn);Ft.length>0&&(Le.scopes=Ft.join(","))}w.tenantId&&(Le.tid=w.tenantId);const dt=Le;for(const Ft of Object.keys(dt))void 0===dt[Ft]&&delete dt[Ft];return`${function qc({config:w}){return w.emulator?un(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,ie.xO)(dt).slice(1)}`}const Ea="webStorageSupport";class Lo extends class ef{constructor(f){this.factorId=f}_process(f,m,T){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,T);case"signin":return this._finalizeSignIn(f,m.credential);default:return lt("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Lo(f)}_finalizeEnroll(f,m,T){return function qs(w,f){return tn(w,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(w,f))}(f,{idToken:m,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function mr(w,f){return tn(w,"POST","/v2/accounts/mfaSignIn:finalize",Vt(w,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Bl=(()=>{class w{constructor(){}static assertion(m){return Lo._fromCredential(m)}}return w.FACTOR_ID="phone",w})();var lc="@firebase/auth";class sa{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,_.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(T=>{var z;f((null===(z=T)||void 0===z?void 0:z.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function aa(){return window}function Su(){return(Su=(0,_.Z)(function*(w,f,m){var T;const{BuildInfo:z}=aa();ge(f.sessionId,"AuthEvent did not contain a session ID");const re=yield vl(f.sessionId),Le={};return fi()?Le.ibi=z.packageName:Ii()?Le.apn=z.packageName:ht(w,"operation-not-supported-in-this-environment"),z.displayName&&(Le.appDisplayName=z.displayName),Le.sessionId=re,Tu(w,m,f.type,void 0,null!==(T=f.eventId)&&void 0!==T?T:void 0,Le)})).apply(this,arguments)}function uu(){return(uu=(0,_.Z)(function*(w){const{BuildInfo:f}=aa(),m={};fi()?m.iosBundleId=f.packageName:Ii()?m.androidPackageName=f.packageName:ht(w,"operation-not-supported-in-this-environment"),yield Cu(w,m)})).apply(this,arguments)}function $l(){return($l=(0,_.Z)(function*(w,f,m){const{cordova:T}=aa();let z=()=>{};try{yield new Promise((re,Le)=>{let dt=null;function Ft(){var On;re();const gs=null===(On=T.plugins.browsertab)||void 0===On?void 0:On.close;"function"==typeof gs&&gs(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function sn(){dt||(dt=window.setTimeout(()=>{Le(W(w,"redirect-cancelled-by-user"))},2e3))}function Gn(){"visible"===(null==document?void 0:document.visibilityState)&&sn()}f.addPassiveListener(Ft),document.addEventListener("resume",sn,!1),Ii()&&document.addEventListener("visibilitychange",Gn,!1),z=()=>{f.removePassiveListener(Ft),document.removeEventListener("resume",sn,!1),document.removeEventListener("visibilitychange",Gn,!1),dt&&window.clearTimeout(dt)}})}finally{z()}})).apply(this,arguments)}function vl(w){return El.apply(this,arguments)}function El(){return(El=(0,_.Z)(function*(w){const f=za(w),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(z=>z.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function za(w){if(ge(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const f=new ArrayBuffer(w.length),m=new Uint8Array(f);for(let T=0;T<w.length;T++)m[T]=w.charCodeAt(T);return m}!function jl(w){(0,Se._registerComponent)(new Ve.wA("auth",(f,{options:m})=>{const T=f.getProvider("app").getImmediate(),z=f.getProvider("heartbeat"),{apiKey:re,authDomain:Le}=T.options;return((dt,Ft)=>{ue(re&&!re.includes(":"),"invalid-api-key",{appName:dt.name}),ue(!(null==Le?void 0:Le.includes(":")),"argument-error",{appName:dt.name});const sn={apiKey:re,authDomain:Le,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qi(w)},Gn=new It(dt,Ft,sn);return function Ze(w,f){const m=(null==f?void 0:f.persistence)||[],T=(Array.isArray(m)?m:[m]).map(Be);(null==f?void 0:f.errorMap)&&w._updateErrorMap(f.errorMap),w._initializeWithPersistence(T,null==f?void 0:f.popupRedirectResolver)}(Gn,m),Gn})(T,z)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,T)=>{f.getProvider("auth-internal").initialize()})),(0,Se._registerComponent)(new Ve.wA("auth-internal",f=>{const m=Ht(f.getProvider("auth").getImmediate());return new sa(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Se.registerVersion)(lc,"0.20.4",function oa(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,Se.registerVersion)(lc,"0.20.4","esm2017")}("Browser");class hh extends Hs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,_.Z)(function*(){yield f.initPromise})()}}function Zu(w){return hc.apply(this,arguments)}function hc(){return(hc=(0,_.Z)(function*(w){const f=yield Yu()._get(Qc(w));return f&&(yield Yu()._remove(Qc(w))),f})).apply(this,arguments)}function xu(){const w=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const T=Math.floor(Math.random()*f.length);w.push(f.charAt(T))}return w.join("")}function Yu(){return Be(Qs)}function Qc(w){return hn("authEvent",w.config.apiKey,w.name)}function Hi(w){if(!(null==w?void 0:w.includes("?")))return{};const[f,...m]=w.split("?");return(0,ie.zd)(m.join("?"))}function Ru(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:W("no-auth-event")}}function lu(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function Mu(w=(0,ie.z$)()){return!("file:"!==lu()&&"ionic:"!==lu()&&"capacitor:"!==lu()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Hl(){try{const w=self.localStorage,f=Is();if(w)return w.setItem(f,"1"),w.removeItem(f),!function Wr(w=(0,ie.z$)()){return function Vo(){return(0,ie.w1)()&&11===(null==document?void 0:document.documentMode)}()||function ts(w=(0,ie.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,ie.hl)()}catch(w){return Os()&&(0,ie.hl)()}return!1}function Os(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Uo(){return(function Xc(){return"http:"===lu()||"https:"===lu()}()||(0,ie.ru)()||Mu())&&!function Xu(){return(0,ie.b$)()||(0,ie.UG)()}()&&Hl()&&!Os()}function Gl(){return Mu()&&"undefined"!=typeof document}function el(){return(el=(0,_.Z)(function*(){return!!Gl()&&new Promise(w=>{const f=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),w(!0)})})})).apply(this,arguments)}const fo={LOCAL:"local",NONE:"none",SESSION:"session"},Gi=ue,cu="persistence";function gc(w){return du.apply(this,arguments)}function du(){return(du=(0,_.Z)(function*(w){yield w._initializationPromise;const f=Ad(),m=hn(cu,w.config.apiKey,w.name);f&&f.setItem(m,w._getPersistence())})).apply(this,arguments)}function Ad(){var w;try{return(null===(w=function ua(){return"undefined"!=typeof window?window:null}())||void 0===w?void 0:w.sessionStorage)||null}catch(f){return null}}const mc=ue;class So{constructor(){this.browserResolver=Be(class Ul{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ns,this._completeRedirectFn=ho,this._overrideRedirectResult=j}_openPopup(f,m,T,z){var re=this;return(0,_.Z)(function*(){var Le;ge(null===(Le=re.eventManagers[f._key()])||void 0===Le?void 0:Le.manager,"_initialize() not called before _openPopup()");const dt=Tu(f,m,T,wt(),z);return function ch(w,f,m,T=500,z=600){const re=Math.max((window.screen.availHeight-z)/2,0).toString(),Le=Math.max((window.screen.availWidth-T)/2,0).toString();let dt="";const Ft=Object.assign(Object.assign({},Id),{width:T.toString(),height:z.toString(),top:re,left:Le}),sn=(0,ie.z$)().toLowerCase();m&&(dt=In(sn)?"_blank":m),qr(sn)&&(f=f||"http://localhost",Ft.scrollbars="yes");const Gn=Object.entries(Ft).reduce((gs,[zo,zl])=>`${gs}${zo}=${zl},`,"");if(function ki(w=(0,ie.z$)()){var f;return fi(w)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(sn)&&"_self"!==dt)return function _a(w,f){const m=document.createElement("a");m.href=w,m.target=f;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(T)}(f||"",dt),new Kc(null);const On=window.open(f||"",dt,Gn);ue(On,w,"popup-blocked");try{On.focus()}catch(gs){}return new Kc(On)}(f,dt,Is())})()}_openRedirect(f,m,T,z){var re=this;return(0,_.Z)(function*(){return yield re._originValidation(f),function Aa(w){Mr().location.href=w}(Tu(f,m,T,wt(),z)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:z,promise:re}=this.eventManagers[m];return z?Promise.resolve(z):(ge(re,"If manager is not set, promise should be"),re)}const T=this.initAndGetManager(f);return this.eventManagers[m]={promise:T},T.catch(()=>{delete this.eventManagers[m]}),T}initAndGetManager(f){var m=this;return(0,_.Z)(function*(){const T=yield function es(w){return qu.apply(this,arguments)}(f),z=new Hs(f);return T.register("authEvent",re=>(ue(null==re?void 0:re.authEvent,f,"invalid-auth-event"),{status:z.onEvent(re.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:z},m.iframes[f._key()]=T,z})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Ea,{type:Ea},z=>{var re;const Le=null===(re=null==z?void 0:z[0])||void 0===re?void 0:re[Ea];void 0!==Le&&m(!!Le),ht(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function wd(w){return Hc.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Er()||wi()||fi()}}),this.cordovaResolver=Be(class pc{constructor(){this._redirectPersistence=Ns,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ho,this._overrideRedirectResult=j}_initialize(f){var m=this;return(0,_.Z)(function*(){const T=f._key();let z=m.eventManagers.get(T);return z||(z=new hh(f),m.eventManagers.set(T,z),m.attachCallbackListeners(f,z)),z})()}_openPopup(f){ht(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,T,z){var re=this;return(0,_.Z)(function*(){!function Dd(w){var f,m,T,z,re,Le,dt,Ft,sn,Gn;const On=aa();ue("function"==typeof(null===(f=null==On?void 0:On.universalLinks)||void 0===f?void 0:f.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(void 0!==(null===(m=null==On?void 0:On.BuildInfo)||void 0===m?void 0:m.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(re=null===(z=null===(T=null==On?void 0:On.cordova)||void 0===T?void 0:T.plugins)||void 0===z?void 0:z.browsertab)||void 0===re?void 0:re.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Ft=null===(dt=null===(Le=null==On?void 0:On.cordova)||void 0===Le?void 0:Le.plugins)||void 0===dt?void 0:dt.browsertab)||void 0===Ft?void 0:Ft.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Gn=null===(sn=null==On?void 0:On.cordova)||void 0===sn?void 0:sn.InAppBrowser)||void 0===Gn?void 0:Gn.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Le=yield re._initialize(f);yield Le.initialized(),Le.resetRedirect(),function F(){ls.clear()}(),yield re._originValidation(f);const dt=function Au(w,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:xu(),postBody:null,tenantId:w.tenantId,error:W(w,"no-auth-event")}}(f,T,z);yield function Yc(w,f){return Yu()._set(Qc(w),f)}(f,dt);const Ft=yield function Oa(w,f,m){return Su.apply(this,arguments)}(f,dt,m),sn=yield function dc(w){const{cordova:f}=aa();return new Promise(m=>{f.plugins.browsertab.isAvailable(T=>{let z=null;T?f.plugins.browsertab.openUrl(w):z=f.InAppBrowser.open(w,function cs(w=(0,ie.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),m(z)})})}(Ft);return function bd(w,f,m){return $l.apply(this,arguments)}(f,Le,sn)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Zc(w){return uu.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:T,handleOpenURL:z,BuildInfo:re}=aa(),Le=setTimeout((0,_.Z)(function*(){yield Zu(f),m.onEvent(Ru())}),500),dt=function(){var Gn=(0,_.Z)(function*(On){clearTimeout(Le);const gs=yield Zu(f);let zo=null;gs&&(null==On?void 0:On.url)&&(zo=function Td(w,f){var m,T;const z=function ka(w){const f=Hi(w),m=f.link?decodeURIComponent(f.link):void 0,T=Hi(m).link,z=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Hi(z).link||z||T||m||w}(f);if(z.includes("/__/auth/callback")){const re=Hi(z),Le=re.firebaseError?function li(w){try{return JSON.parse(w)}catch(f){return null}}(decodeURIComponent(re.firebaseError)):null,dt=null===(T=null===(m=null==Le?void 0:Le.code)||void 0===m?void 0:m.split("auth/"))||void 0===T?void 0:T[1],Ft=dt?W(dt):null;return Ft?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:Ft,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:z,postBody:null}}return null}(gs,On.url)),m.onEvent(zo||Ru())});return function(gs){return Gn.apply(this,arguments)}}();void 0!==T&&"function"==typeof T.subscribe&&T.subscribe(null,dt);const Ft=z,sn=`${re.packageName.toLowerCase()}://`;aa().handleOpenURL=function(){var Gn=(0,_.Z)(function*(On){if(On.toLowerCase().startsWith(sn)&&dt({url:On}),"function"==typeof Ft)try{Ft(On)}catch(gs){console.error(gs)}});return function(On){return Gn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ns,this._completeRedirectFn=ho,this._overrideRedirectResult=j}_initialize(f){var m=this;return(0,_.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,T,z){var re=this;return(0,_.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._openPopup(f,m,T,z)})()}_openRedirect(f,m,T,z){var re=this;return(0,_.Z)(function*(){return yield re.selectUnderlyingResolver(),re.assertedUnderlyingResolver._openRedirect(f,m,T,z)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Gl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return mc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,_.Z)(function*(){if(f.underlyingResolver)return;const m=yield function Pi(){return el.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Il(w){return w.unwrap()}function Wl(w){return Cl(w)}function Cl(w){const{_tokenResponse:f}=w instanceof ie.ZR?w.customData:w;if(!f)return null;if(!(w instanceof ie.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Do.credentialFromResult(w);const m=f.providerId;if(!m||"password"===m)return null;let T;switch(m){case"google.com":T=vo;break;case"facebook.com":T=xs;break;case"github.com":T=Rs;break;case"twitter.com":T=os;break;default:const{oauthIdToken:z,oauthAccessToken:re,oauthTokenSecret:Le,pendingToken:dt,nonce:Ft}=f;return re||Le||z||dt?dt?m.startsWith("saml.")?bi._create(m,dt):je._fromParams({providerId:m,signInMethod:m,pendingToken:dt,idToken:z,accessToken:re}):new Ri(m).credential({idToken:z,accessToken:re,rawNonce:Ft}):null}return w instanceof ie.ZR?T.credentialFromError(w):T.credentialFromResult(w)}function po(w,f){return f.catch(m=>{throw m instanceof ie.ZR&&function xd(w,f){var m,T;const z=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(T=f)||void 0===T?void 0:T.code))f.resolver=new ed(w,function Rr(w,f){var m;const T=(0,ie.m9)(w),z=f;return ue(f.customData.operationType,T,"argument-error"),ue(null===(m=z.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,T,"argument-error"),Ks._fromError(T,z)}(w,f));else if(z){const re=Cl(f),Le=f;re&&(Le.credential=re,Le.tenantId=z.tenantId||void 0,Le.email=z.email||void 0,Le.phoneNumber=z.phoneNumber||void 0)}}(w,m),m}).then(m=>{const z=m.user;return{operationType:m.operationType,credential:Wl(m),additionalUserInfo:Po(m),user:qa.getOrCreate(z)}})}function Nu(w,f){return bl.apply(this,arguments)}function bl(){return(bl=(0,_.Z)(function*(w,f){const m=yield f;return{verificationId:m.verificationId,confirm:T=>po(w,m.confirm(T))}})).apply(this,arguments)}class ed{constructor(f,m){this.resolver=m,this.auth=function yc(w){return w.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return po(Il(this.auth),this.resolver.resolveSignIn(f))}}class qa{constructor(f){this._delegate=f,this.multiFactor=function Oo(w){const f=(0,ie.m9)(w);return Ys.has(f)||Ys.set(f,Sa._fromUser(f)),Ys.get(f)}(f)}static getOrCreate(f){return qa.USER_MAP.has(f)||qa.USER_MAP.set(f,new qa(f)),qa.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,_.Z)(function*(){return po(m.auth,jn(m._delegate,f))})()}linkWithPhoneNumber(f,m){var T=this;return(0,_.Z)(function*(){return Nu(T.auth,function jc(w,f,m){return fa.apply(this,arguments)}(T._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,_.Z)(function*(){return po(m.auth,function ps(w,f,m){return Nr.apply(this,arguments)}(m._delegate,f,So))})()}linkWithRedirect(f){var m=this;return(0,_.Z)(function*(){return yield gc(Ht(m.auth)),function Kn(w,f,m){return function Cn(w,f,m){return yi.apply(this,arguments)}(w,f,m)}(m._delegate,f,So)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,_.Z)(function*(){return po(m.auth,Xr(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return Nu(this.auth,function co(w,f,m){return Je.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return po(this.auth,function ii(w,f,m){return Pa.apply(this,arguments)}(this._delegate,f,So))}reauthenticateWithRedirect(f){var m=this;return(0,_.Z)(function*(){return yield gc(Ht(m.auth)),function Pt(w,f,m){return function Pn(w,f,m){return Hn.apply(this,arguments)}(w,f,m)}(m._delegate,f,So)})()}sendEmailVerification(f){return function zs(w,f){return lr.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,_.Z)(function*(){return yield function ro(w,f){return tr.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function mu(w,f){return oo((0,ie.m9)(w),f,null)}(this._delegate,f)}updatePassword(f){return function Da(w,f){return oo((0,ie.m9)(w),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function pa(w,f){return ra.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function No(w,f){return Io.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function Bi(w,f,m){return so.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qa.USER_MAP=new WeakMap;const Dl=ue;let nl=(()=>{class w{constructor(m,T){if(this.app=m,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:z}=m.options;Dl(z,"invalid-api-key",{appName:m.name}),Dl(z,"invalid-api-key",{appName:m.name});const re="undefined"!=typeof window?So:void 0;this._delegate=T.initialize({options:{persistence:Fa(z,m.name),popupRedirectResolver:re}}),this._delegate._updateErrorMap(Xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,T){!function Qr(w,f,m){const T=Ht(w);ue(T._canInitEmulator,T,"emulator-config-failed"),ue(/^https?:\/\//.test(f),T,"invalid-emulator-scheme");const z=!!(null==m?void 0:m.disableWarnings),re=Fi(f),{host:Le,port:dt}=function ur(w){const f=Fi(w),m=/(\/\/)?([^?#/]+)/.exec(w.substr(f.length));if(!m)return{host:"",port:null};const T=m[2].split("@").pop()||"",z=/^(\[[^\]]+\])(:|$)/.exec(T);if(z){const re=z[1];return{host:re,port:Li(T.substr(re.length+1))}}{const[re,Le]=T.split(":");return{host:re,port:Li(Le)}}}(f);T.config.emulator={url:`${re}//${Le}${null===dt?"":`:${dt}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:Le,port:dt,protocol:re.replace(":",""),options:Object.freeze({disableWarnings:z})}),z||function cr(){function w(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}(this._delegate,m,T)}applyActionCode(m){return function E(w,f){return R.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Y(this._delegate,m)}confirmPasswordReset(m,T){return function L(w,f,m){return k.apply(this,arguments)}(this._delegate,m,T)}createUserWithEmailAndPassword(m,T){var z=this;return(0,_.Z)(function*(){return po(z._delegate,function yt(w,f,m){return Kt.apply(this,arguments)}(z._delegate,m,T))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Lr(w,f){return ri.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function xr(w,f){const m=vs.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,_.Z)(function*(){Dl(Uo(),m._delegate,"operation-not-supported-in-this-environment");const T=yield function Ps(w,f){return js.apply(this,arguments)}(m._delegate,So);return T?po(m._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Sd(w,f){Ht(w)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,T,z){const{next:re,error:Le,complete:dt}=_c(m,T,z);return this._delegate.onAuthStateChanged(re,Le,dt)}onIdTokenChanged(m,T,z){const{next:re,error:Le,complete:dt}=_c(m,T,z);return this._delegate.onIdTokenChanged(re,Le,dt)}sendSignInLinkToEmail(m,T){return function $n(w,f,m){return Qn.apply(this,arguments)}(this._delegate,m,T)}sendPasswordResetEmail(m,T){return function ds(w,f,m){return H.apply(this,arguments)}(this._delegate,m,T||void 0)}setPersistence(m){var T=this;return(0,_.Z)(function*(){let z;switch(function tl(w,f){Gi(Object.values(fo).includes(f),w,"invalid-persistence-type"),(0,ie.b$)()?Gi(f!==fo.SESSION,w,"unsupported-persistence-type"):(0,ie.UG)()?Gi(f===fo.NONE,w,"unsupported-persistence-type"):Os()?Gi(f===fo.NONE||f===fo.LOCAL&&(0,ie.hl)(),w,"unsupported-persistence-type"):Gi(f===fo.NONE||Hl(),w,"unsupported-persistence-type")}(T._delegate,m),m){case fo.SESSION:z=Ns;break;case fo.LOCAL:z=(yield Be(dn)._isAvailable())?dn:Qs;break;case fo.NONE:z=ar;break;default:return ht("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence(z)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return po(this._delegate,function ti(w){return Ms.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return po(this._delegate,Sn(this._delegate,m))}signInWithCustomToken(m){return po(this._delegate,function Hr(w,f){return Jt.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,T){return po(this._delegate,function Ut(w,f,m){return Sn((0,ie.m9)(w),Ro.credential(f,m))}(this._delegate,m,T))}signInWithEmailLink(m,T){return po(this._delegate,function Ir(w,f,m){return nr.apply(this,arguments)}(this._delegate,m,T))}signInWithPhoneNumber(m,T){return Nu(this._delegate,function Gu(w,f,m){return Ba.apply(this,arguments)}(this._delegate,m,T))}signInWithPopup(m){var T=this;return(0,_.Z)(function*(){return Dl(Uo(),T._delegate,"operation-not-supported-in-this-environment"),po(T._delegate,function Na(w,f,m){return ma.apply(this,arguments)}(T._delegate,m,So))})()}signInWithRedirect(m){var T=this;return(0,_.Z)(function*(){return Dl(Uo(),T._delegate,"operation-not-supported-in-this-environment"),yield gc(T._delegate),function $e(w,f,m){return function nt(w,f,m){return bt.apply(this,arguments)}(w,f,m)}(T._delegate,m,So)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Ae(w,f){return Ke.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=fo,w})();function _c(w,f,m){let T=w;"function"!=typeof w&&({next:T,error:f,complete:m}=w);const z=T;return{next:Le=>z(Le&&qa.getOrCreate(Le)),error:f,complete:m}}function Fa(w,f){const m=function yr(w,f){const m=Ad();if(!m)return[];const T=hn(cu,w,f);switch(m.getItem(T)){case fo.NONE:return[ar];case fo.LOCAL:return[dn,Ns];case fo.SESSION:return[Ns];default:return[]}}(w,f);if("undefined"!=typeof self&&!m.includes(dn)&&m.push(dn),"undefined"!=typeof window)for(const T of[Qs,Ns])m.includes(T)||m.push(T);return m.includes(ar)||m.push(ar),m}class bs{constructor(){this.providerId="phone",this._delegate=new Do(Il(te.Z.auth()))}static credential(f,m){return Do.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}bs.PHONE_SIGN_IN_METHOD=Do.PHONE_SIGN_IN_METHOD,bs.PROVIDER_ID=Do.PROVIDER_ID;const td=ue;class Rd{constructor(f,m,T=te.Z.app()){var z;td(null===(z=T.options)||void 0===z?void 0:z.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new Iu(f,m,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ks(w){w.INTERNAL.registerComponent(new Ve.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),T=f.getProvider("auth");return new nl(m,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ro,FacebookAuthProvider:xs,GithubAuthProvider:Rs,GoogleAuthProvider:vo,OAuthProvider:Ri,SAMLAuthProvider:Di,PhoneAuthProvider:bs,PhoneMultiFactorGenerator:Bl,RecaptchaVerifier:Rd,TwitterAuthProvider:os,Auth:nl,AuthCredential:Ai,Error:ie.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.2.17")}(te.Z)},1135:(Ot,We,B)=>{B.d(We,{X:()=>te});var _=B(7579);class te extends _.x{constructor(Se){super(),this._value=Se}get value(){return this.getValue()}_subscribe(Se){const De=super._subscribe(Se);return!De.closed&&Se.next(this._value),De}getValue(){const{hasError:Se,thrownError:De,_value:Re}=this;if(Se)throw De;return this._throwIfClosed(),Re}next(Se){super.next(this._value=Se)}}},8306:(Ot,We,B)=>{B.d(We,{y:()=>ce});var _=B(930),te=B(727),ie=B(8822),Se=B(4671);var Ve=B(2416),Me=B(576),Ue=B(2806);let ce=(()=>{class at{constructor(gt){gt&&(this._subscribe=gt)}lift(gt){const tt=new at;return tt.source=this,tt.operator=gt,tt}subscribe(gt,tt,pt){const xe=function Tt(at){return at&&at instanceof _.Lv||function Ne(at){return at&&(0,Me.m)(at.next)&&(0,Me.m)(at.error)&&(0,Me.m)(at.complete)}(at)&&(0,te.Nn)(at)}(gt)?gt:new _.Hp(gt,tt,pt);return(0,Ue.x)(()=>{const{operator:kt,source:ht}=this;xe.add(kt?kt.call(xe,ht):ht?this._subscribe(xe):this._trySubscribe(xe))}),xe}_trySubscribe(gt){try{return this._subscribe(gt)}catch(tt){gt.error(tt)}}forEach(gt,tt){return new(tt=oe(tt))((pt,xe)=>{const kt=new _.Hp({next:ht=>{try{gt(ht)}catch(W){xe(W),kt.unsubscribe()}},error:xe,complete:pt});this.subscribe(kt)})}_subscribe(gt){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(gt)}[ie.L](){return this}pipe(...gt){return function Re(at){return 0===at.length?Se.y:1===at.length?at[0]:function(gt){return at.reduce((tt,pt)=>pt(tt),gt)}}(gt)(this)}toPromise(gt){return new(gt=oe(gt))((tt,pt)=>{let xe;this.subscribe(kt=>xe=kt,kt=>pt(kt),()=>tt(xe))})}}return at.create=Xe=>new at(Xe),at})();function oe(at){var Xe;return null!==(Xe=null!=at?at:Ve.v.Promise)&&void 0!==Xe?Xe:Promise}},7579:(Ot,We,B)=>{B.d(We,{x:()=>Ve});var _=B(8306),te=B(727);const Se=(0,B(3888).d)(Ue=>function(){Ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var De=B(8737),Re=B(2806);let Ve=(()=>{class Ue extends _.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(oe){const Ne=new Me(this,this);return Ne.operator=oe,Ne}_throwIfClosed(){if(this.closed)throw new Se}next(oe){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ne of this.currentObservers)Ne.next(oe)}})}error(oe){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=oe;const{observers:Ne}=this;for(;Ne.length;)Ne.shift().error(oe)}})}complete(){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:oe}=this;for(;oe.length;)oe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var oe;return(null===(oe=this.observers)||void 0===oe?void 0:oe.length)>0}_trySubscribe(oe){return this._throwIfClosed(),super._trySubscribe(oe)}_subscribe(oe){return this._throwIfClosed(),this._checkFinalizedStatuses(oe),this._innerSubscribe(oe)}_innerSubscribe(oe){const{hasError:Ne,isStopped:Tt,observers:at}=this;return Ne||Tt?te.Lc:(this.currentObservers=null,at.push(oe),new te.w0(()=>{this.currentObservers=null,(0,De.P)(at,oe)}))}_checkFinalizedStatuses(oe){const{hasError:Ne,thrownError:Tt,isStopped:at}=this;Ne?oe.error(Tt):at&&oe.complete()}asObservable(){const oe=new _.y;return oe.source=this,oe}}return Ue.create=(ce,oe)=>new Me(ce,oe),Ue})();class Me extends Ve{constructor(ce,oe){super(),this.destination=ce,this.source=oe}next(ce){var oe,Ne;null===(Ne=null===(oe=this.destination)||void 0===oe?void 0:oe.next)||void 0===Ne||Ne.call(oe,ce)}error(ce){var oe,Ne;null===(Ne=null===(oe=this.destination)||void 0===oe?void 0:oe.error)||void 0===Ne||Ne.call(oe,ce)}complete(){var ce,oe;null===(oe=null===(ce=this.destination)||void 0===ce?void 0:ce.complete)||void 0===oe||oe.call(ce)}_subscribe(ce){var oe,Ne;return null!==(Ne=null===(oe=this.source)||void 0===oe?void 0:oe.subscribe(ce))&&void 0!==Ne?Ne:te.Lc}}},930:(Ot,We,B)=>{B.d(We,{Hp:()=>gt,Lv:()=>Ne});var _=B(576),te=B(727),ie=B(2416),Se=B(7849),De=B(5032);const Re=Ue("C",void 0,void 0);function Ue(ht,W,Ge){return{kind:ht,value:W,error:Ge}}var ce=B(3410),oe=B(2806);class Ne extends te.w0{constructor(W){super(),this.isStopped=!1,W?(this.destination=W,(0,te.Nn)(W)&&W.add(this)):this.destination=kt}static create(W,Ge,Et){return new gt(W,Ge,Et)}next(W){this.isStopped?xe(function Me(ht){return Ue("N",ht,void 0)}(W),this):this._next(W)}error(W){this.isStopped?xe(function Ve(ht){return Ue("E",void 0,ht)}(W),this):(this.isStopped=!0,this._error(W))}complete(){this.isStopped?xe(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(W){this.destination.next(W)}_error(W){try{this.destination.error(W)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Tt=Function.prototype.bind;function at(ht,W){return Tt.call(ht,W)}class Xe{constructor(W){this.partialObserver=W}next(W){const{partialObserver:Ge}=this;if(Ge.next)try{Ge.next(W)}catch(Et){tt(Et)}}error(W){const{partialObserver:Ge}=this;if(Ge.error)try{Ge.error(W)}catch(Et){tt(Et)}else tt(W)}complete(){const{partialObserver:W}=this;if(W.complete)try{W.complete()}catch(Ge){tt(Ge)}}}class gt extends Ne{constructor(W,Ge,Et){let Ct;if(super(),(0,_.m)(W)||!W)Ct={next:null!=W?W:void 0,error:null!=Ge?Ge:void 0,complete:null!=Et?Et:void 0};else{let ue;this&&ie.v.useDeprecatedNextContext?(ue=Object.create(W),ue.unsubscribe=()=>this.unsubscribe(),Ct={next:W.next&&at(W.next,ue),error:W.error&&at(W.error,ue),complete:W.complete&&at(W.complete,ue)}):Ct=W}this.destination=new Xe(Ct)}}function tt(ht){ie.v.useDeprecatedSynchronousErrorHandling?(0,oe.O)(ht):(0,Se.h)(ht)}function xe(ht,W){const{onStoppedNotification:Ge}=ie.v;Ge&&ce.z.setTimeout(()=>Ge(ht,W))}const kt={closed:!0,next:De.Z,error:function pt(ht){throw ht},complete:De.Z}},727:(Ot,We,B)=>{B.d(We,{Lc:()=>Re,w0:()=>De,Nn:()=>Ve});var _=B(576);const ie=(0,B(3888).d)(Ue=>function(oe){Ue(this),this.message=oe?`${oe.length} errors occurred during unsubscription:\n${oe.map((Ne,Tt)=>`${Tt+1}) ${Ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=oe});var Se=B(8737);class De{constructor(ce){this.initialTeardown=ce,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ce;if(!this.closed){this.closed=!0;const{_parentage:oe}=this;if(oe)if(this._parentage=null,Array.isArray(oe))for(const at of oe)at.remove(this);else oe.remove(this);const{initialTeardown:Ne}=this;if((0,_.m)(Ne))try{Ne()}catch(at){ce=at instanceof ie?at.errors:[at]}const{_finalizers:Tt}=this;if(Tt){this._finalizers=null;for(const at of Tt)try{Me(at)}catch(Xe){ce=null!=ce?ce:[],Xe instanceof ie?ce=[...ce,...Xe.errors]:ce.push(Xe)}}if(ce)throw new ie(ce)}}add(ce){var oe;if(ce&&ce!==this)if(this.closed)Me(ce);else{if(ce instanceof De){if(ce.closed||ce._hasParent(this))return;ce._addParent(this)}(this._finalizers=null!==(oe=this._finalizers)&&void 0!==oe?oe:[]).push(ce)}}_hasParent(ce){const{_parentage:oe}=this;return oe===ce||Array.isArray(oe)&&oe.includes(ce)}_addParent(ce){const{_parentage:oe}=this;this._parentage=Array.isArray(oe)?(oe.push(ce),oe):oe?[oe,ce]:ce}_removeParent(ce){const{_parentage:oe}=this;oe===ce?this._parentage=null:Array.isArray(oe)&&(0,Se.P)(oe,ce)}remove(ce){const{_finalizers:oe}=this;oe&&(0,Se.P)(oe,ce),ce instanceof De&&ce._removeParent(this)}}De.EMPTY=(()=>{const Ue=new De;return Ue.closed=!0,Ue})();const Re=De.EMPTY;function Ve(Ue){return Ue instanceof De||Ue&&"closed"in Ue&&(0,_.m)(Ue.remove)&&(0,_.m)(Ue.add)&&(0,_.m)(Ue.unsubscribe)}function Me(Ue){(0,_.m)(Ue)?Ue():Ue.unsubscribe()}},2416:(Ot,We,B)=>{B.d(We,{v:()=>_});const _={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(Ot,We,B)=>{B.d(We,{z:()=>De});var _=B(8189),ie=B(7669),Se=B(8996);function De(...Re){return function te(){return(0,_.J)(1)}()((0,Se.D)(Re,(0,ie.yG)(Re)))}},515:(Ot,We,B)=>{B.d(We,{E:()=>te});const te=new(B(8306).y)(De=>De.complete())},8996:(Ot,We,B)=>{B.d(We,{D:()=>W});var _=B(8421),te=B(5363),ie=B(9468),Re=B(8306),Me=B(2202),Ue=B(576),ce=B(9672);function Ne(Ge,Et){if(!Ge)throw new Error("Iterable cannot be null");return new Re.y(Ct=>{(0,ce.f)(Ct,Et,()=>{const ue=Ge[Symbol.asyncIterator]();(0,ce.f)(Ct,Et,()=>{ue.next().then(lt=>{lt.done?Ct.complete():Ct.next(lt.value)})},0,!0)})})}var Tt=B(3670),at=B(8239),Xe=B(1144),gt=B(6495),tt=B(2206),pt=B(4532),xe=B(3260);function W(Ge,Et){return Et?function ht(Ge,Et){if(null!=Ge){if((0,Tt.c)(Ge))return function Se(Ge,Et){return(0,_.Xf)(Ge).pipe((0,ie.R)(Et),(0,te.Q)(Et))}(Ge,Et);if((0,Xe.z)(Ge))return function Ve(Ge,Et){return new Re.y(Ct=>{let ue=0;return Et.schedule(function(){ue===Ge.length?Ct.complete():(Ct.next(Ge[ue++]),Ct.closed||this.schedule())})})}(Ge,Et);if((0,at.t)(Ge))return function De(Ge,Et){return(0,_.Xf)(Ge).pipe((0,ie.R)(Et),(0,te.Q)(Et))}(Ge,Et);if((0,tt.D)(Ge))return Ne(Ge,Et);if((0,gt.T)(Ge))return function oe(Ge,Et){return new Re.y(Ct=>{let ue;return(0,ce.f)(Ct,Et,()=>{ue=Ge[Me.h](),(0,ce.f)(Ct,Et,()=>{let lt,ge;try{({value:lt,done:ge}=ue.next())}catch(Fe){return void Ct.error(Fe)}ge?Ct.complete():Ct.next(lt)},0,!0)}),()=>(0,Ue.m)(null==ue?void 0:ue.return)&&ue.return()})}(Ge,Et);if((0,xe.L)(Ge))return function kt(Ge,Et){return Ne((0,xe.Q)(Ge),Et)}(Ge,Et)}throw(0,pt.z)(Ge)}(Ge,Et):(0,_.Xf)(Ge)}},8421:(Ot,We,B)=>{B.d(We,{Xf:()=>Tt});var _=B(655),te=B(1144),ie=B(8239),Se=B(8306),De=B(3670),Re=B(2206),Ve=B(4532),Me=B(6495),Ue=B(3260),ce=B(576),oe=B(7849),Ne=B(8822);function Tt(ht){if(ht instanceof Se.y)return ht;if(null!=ht){if((0,De.c)(ht))return function at(ht){return new Se.y(W=>{const Ge=ht[Ne.L]();if((0,ce.m)(Ge.subscribe))return Ge.subscribe(W);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ht);if((0,te.z)(ht))return function Xe(ht){return new Se.y(W=>{for(let Ge=0;Ge<ht.length&&!W.closed;Ge++)W.next(ht[Ge]);W.complete()})}(ht);if((0,ie.t)(ht))return function gt(ht){return new Se.y(W=>{ht.then(Ge=>{W.closed||(W.next(Ge),W.complete())},Ge=>W.error(Ge)).then(null,oe.h)})}(ht);if((0,Re.D)(ht))return pt(ht);if((0,Me.T)(ht))return function tt(ht){return new Se.y(W=>{for(const Ge of ht)if(W.next(Ge),W.closed)return;W.complete()})}(ht);if((0,Ue.L)(ht))return function xe(ht){return pt((0,Ue.Q)(ht))}(ht)}throw(0,Ve.z)(ht)}function pt(ht){return new Se.y(W=>{(function kt(ht,W){var Ge,Et,Ct,ue;return(0,_.mG)(this,void 0,void 0,function*(){try{for(Ge=(0,_.KL)(ht);!(Et=yield Ge.next()).done;)if(W.next(Et.value),W.closed)return}catch(lt){Ct={error:lt}}finally{try{Et&&!Et.done&&(ue=Ge.return)&&(yield ue.call(Ge))}finally{if(Ct)throw Ct.error}}W.complete()})})(ht,W).catch(Ge=>W.error(Ge))})}},6451:(Ot,We,B)=>{B.d(We,{T:()=>Re});var _=B(8189),te=B(8421),ie=B(515),Se=B(7669),De=B(8996);function Re(...Ve){const Me=(0,Se.yG)(Ve),Ue=(0,Se._6)(Ve,1/0),ce=Ve;return ce.length?1===ce.length?(0,te.Xf)(ce[0]):(0,_.J)(Ue)((0,De.D)(ce,Me)):ie.E}},9646:(Ot,We,B)=>{B.d(We,{of:()=>ie});var _=B(7669),te=B(8996);function ie(...Se){const De=(0,_.yG)(Se);return(0,te.D)(Se,De)}},5403:(Ot,We,B)=>{B.d(We,{x:()=>te});var _=B(930);function te(Se,De,Re,Ve,Me){return new ie(Se,De,Re,Ve,Me)}class ie extends _.Lv{constructor(De,Re,Ve,Me,Ue,ce){super(De),this.onFinalize=Ue,this.shouldUnsubscribe=ce,this._next=Re?function(oe){try{Re(oe)}catch(Ne){De.error(Ne)}}:super._next,this._error=Me?function(oe){try{Me(oe)}catch(Ne){De.error(Ne)}finally{this.unsubscribe()}}:super._error,this._complete=Ve?function(){try{Ve()}catch(oe){De.error(oe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var De;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Re}=this;super.unsubscribe(),!Re&&(null===(De=this.onFinalize)||void 0===De||De.call(this))}}}},6590:(Ot,We,B)=>{B.d(We,{d:()=>ie});var _=B(4482),te=B(5403);function ie(Se){return(0,_.e)((De,Re)=>{let Ve=!1;De.subscribe((0,te.x)(Re,Me=>{Ve=!0,Re.next(Me)},()=>{Ve||Re.next(Se),Re.complete()}))})}},1884:(Ot,We,B)=>{B.d(We,{x:()=>Se});var _=B(4671),te=B(4482),ie=B(5403);function Se(Re,Ve=_.y){return Re=null!=Re?Re:De,(0,te.e)((Me,Ue)=>{let ce,oe=!0;Me.subscribe((0,ie.x)(Ue,Ne=>{const Tt=Ve(Ne);(oe||!Re(ce,Tt))&&(oe=!1,ce=Tt,Ue.next(Ne))}))})}function De(Re,Ve){return Re===Ve}},9300:(Ot,We,B)=>{B.d(We,{h:()=>ie});var _=B(4482),te=B(5403);function ie(Se,De){return(0,_.e)((Re,Ve)=>{let Me=0;Re.subscribe((0,te.x)(Ve,Ue=>Se.call(De,Ue,Me++)&&Ve.next(Ue)))})}},590:(Ot,We,B)=>{B.d(We,{P:()=>Ve});var _=B(6805),te=B(9300),ie=B(5698),Se=B(6590),De=B(8068),Re=B(4671);function Ve(Me,Ue){const ce=arguments.length>=2;return oe=>oe.pipe(Me?(0,te.h)((Ne,Tt)=>Me(Ne,Tt,oe)):Re.y,(0,ie.q)(1),ce?(0,Se.d)(Ue):(0,De.T)(()=>new _.K))}},4004:(Ot,We,B)=>{B.d(We,{U:()=>ie});var _=B(4482),te=B(5403);function ie(Se,De){return(0,_.e)((Re,Ve)=>{let Me=0;Re.subscribe((0,te.x)(Ve,Ue=>{Ve.next(Se.call(De,Ue,Me++))}))})}},8189:(Ot,We,B)=>{B.d(We,{J:()=>ie});var _=B(5577),te=B(4671);function ie(Se=1/0){return(0,_.z)(te.y,Se)}},5577:(Ot,We,B)=>{B.d(We,{z:()=>Me});var _=B(4004),te=B(8421),ie=B(4482),Se=B(9672),De=B(5403),Ve=B(576);function Me(Ue,ce,oe=1/0){return(0,Ve.m)(ce)?Me((Ne,Tt)=>(0,_.U)((at,Xe)=>ce(Ne,at,Tt,Xe))((0,te.Xf)(Ue(Ne,Tt))),oe):("number"==typeof ce&&(oe=ce),(0,ie.e)((Ne,Tt)=>function Re(Ue,ce,oe,Ne,Tt,at,Xe,gt){const tt=[];let pt=0,xe=0,kt=!1;const ht=()=>{kt&&!tt.length&&!pt&&ce.complete()},W=Et=>pt<Ne?Ge(Et):tt.push(Et),Ge=Et=>{at&&ce.next(Et),pt++;let Ct=!1;(0,te.Xf)(oe(Et,xe++)).subscribe((0,De.x)(ce,ue=>{null==Tt||Tt(ue),at?W(ue):ce.next(ue)},()=>{Ct=!0},void 0,()=>{if(Ct)try{for(pt--;tt.length&&pt<Ne;){const ue=tt.shift();Xe?(0,Se.f)(ce,Xe,()=>Ge(ue)):Ge(ue)}ht()}catch(ue){ce.error(ue)}}))};return Ue.subscribe((0,De.x)(ce,W,()=>{kt=!0,ht()})),()=>{null==gt||gt()}}(Ne,Tt,Ue,oe)))}},5363:(Ot,We,B)=>{B.d(We,{Q:()=>Se});var _=B(9672),te=B(4482),ie=B(5403);function Se(De,Re=0){return(0,te.e)((Ve,Me)=>{Ve.subscribe((0,ie.x)(Me,Ue=>(0,_.f)(Me,De,()=>Me.next(Ue),Re),()=>(0,_.f)(Me,De,()=>Me.complete(),Re),Ue=>(0,_.f)(Me,De,()=>Me.error(Ue),Re)))})}},5026:(Ot,We,B)=>{B.d(We,{R:()=>Se});var _=B(4482),te=B(5403);function ie(De,Re,Ve,Me,Ue){return(ce,oe)=>{let Ne=Ve,Tt=Re,at=0;ce.subscribe((0,te.x)(oe,Xe=>{const gt=at++;Tt=Ne?De(Tt,Xe,gt):(Ne=!0,Xe),Me&&oe.next(Tt)},Ue&&(()=>{Ne&&oe.next(Tt),oe.complete()})))}}function Se(De,Re){return(0,_.e)(ie(De,Re,arguments.length>=2,!0))}},3099:(Ot,We,B)=>{B.d(We,{B:()=>Re});var _=B(8996),te=B(5698),ie=B(7579),Se=B(930),De=B(4482);function Re(Me={}){const{connector:Ue=(()=>new ie.x),resetOnError:ce=!0,resetOnComplete:oe=!0,resetOnRefCountZero:Ne=!0}=Me;return Tt=>{let at=null,Xe=null,gt=null,tt=0,pt=!1,xe=!1;const kt=()=>{null==Xe||Xe.unsubscribe(),Xe=null},ht=()=>{kt(),at=gt=null,pt=xe=!1},W=()=>{const Ge=at;ht(),null==Ge||Ge.unsubscribe()};return(0,De.e)((Ge,Et)=>{tt++,!xe&&!pt&&kt();const Ct=gt=null!=gt?gt:Ue();Et.add(()=>{tt--,0===tt&&!xe&&!pt&&(Xe=Ve(W,Ne))}),Ct.subscribe(Et),at||(at=new Se.Hp({next:ue=>Ct.next(ue),error:ue=>{xe=!0,kt(),Xe=Ve(ht,ce,ue),Ct.error(ue)},complete:()=>{pt=!0,kt(),Xe=Ve(ht,oe),Ct.complete()}}),(0,_.D)(Ge).subscribe(at))})(Tt)}}function Ve(Me,Ue,...ce){return!0===Ue?(Me(),null):!1===Ue?null:Ue(...ce).pipe((0,te.q)(1)).subscribe(()=>Me())}},8675:(Ot,We,B)=>{B.d(We,{O:()=>Se});var _=B(7272),te=B(7669),ie=B(4482);function Se(...De){const Re=(0,te.yG)(De);return(0,ie.e)((Ve,Me)=>{(Re?(0,_.z)(De,Ve,Re):(0,_.z)(De,Ve)).subscribe(Me)})}},9468:(Ot,We,B)=>{B.d(We,{R:()=>te});var _=B(4482);function te(ie,Se=0){return(0,_.e)((De,Re)=>{Re.add(ie.schedule(()=>De.subscribe(Re),Se))})}},3900:(Ot,We,B)=>{B.d(We,{w:()=>Se});var _=B(8421),te=B(4482),ie=B(5403);function Se(De,Re){return(0,te.e)((Ve,Me)=>{let Ue=null,ce=0,oe=!1;const Ne=()=>oe&&!Ue&&Me.complete();Ve.subscribe((0,ie.x)(Me,Tt=>{null==Ue||Ue.unsubscribe();let at=0;const Xe=ce++;(0,_.Xf)(De(Tt,Xe)).subscribe(Ue=(0,ie.x)(Me,gt=>Me.next(Re?Re(Tt,gt,Xe,at++):gt),()=>{Ue=null,Ne()}))},()=>{oe=!0,Ne()}))})}},5698:(Ot,We,B)=>{B.d(We,{q:()=>Se});var _=B(515),te=B(4482),ie=B(5403);function Se(De){return De<=0?()=>_.E:(0,te.e)((Re,Ve)=>{let Me=0;Re.subscribe((0,ie.x)(Ve,Ue=>{++Me<=De&&(Ve.next(Ue),De<=Me&&Ve.complete())}))})}},8505:(Ot,We,B)=>{B.d(We,{b:()=>De});var _=B(576),te=B(4482),ie=B(5403),Se=B(4671);function De(Re,Ve,Me){const Ue=(0,_.m)(Re)||Ve||Me?{next:Re,error:Ve,complete:Me}:Re;return Ue?(0,te.e)((ce,oe)=>{var Ne;null===(Ne=Ue.subscribe)||void 0===Ne||Ne.call(Ue);let Tt=!0;ce.subscribe((0,ie.x)(oe,at=>{var Xe;null===(Xe=Ue.next)||void 0===Xe||Xe.call(Ue,at),oe.next(at)},()=>{var at;Tt=!1,null===(at=Ue.complete)||void 0===at||at.call(Ue),oe.complete()},at=>{var Xe;Tt=!1,null===(Xe=Ue.error)||void 0===Xe||Xe.call(Ue,at),oe.error(at)},()=>{var at,Xe;Tt&&(null===(at=Ue.unsubscribe)||void 0===at||at.call(Ue)),null===(Xe=Ue.finalize)||void 0===Xe||Xe.call(Ue)}))}):Se.y}},8068:(Ot,We,B)=>{B.d(We,{T:()=>Se});var _=B(6805),te=B(4482),ie=B(5403);function Se(Re=De){return(0,te.e)((Ve,Me)=>{let Ue=!1;Ve.subscribe((0,ie.x)(Me,ce=>{Ue=!0,Me.next(ce)},()=>Ue?Me.complete():Me.error(Re())))})}function De(){return new _.K}},1365:(Ot,We,B)=>{B.d(We,{M:()=>Ve});var _=B(4482),te=B(5403),ie=B(8421),Se=B(4671),De=B(5032),Re=B(7669);function Ve(...Me){const Ue=(0,Re.jO)(Me);return(0,_.e)((ce,oe)=>{const Ne=Me.length,Tt=new Array(Ne);let at=Me.map(()=>!1),Xe=!1;for(let gt=0;gt<Ne;gt++)(0,ie.Xf)(Me[gt]).subscribe((0,te.x)(oe,tt=>{Tt[gt]=tt,!Xe&&!at[gt]&&(at[gt]=!0,(Xe=at.every(Se.y))&&(at=null))},De.Z));ce.subscribe((0,te.x)(oe,gt=>{if(Xe){const tt=[gt,...Tt];oe.next(Ue?Ue(...tt):tt)}}))})}},4408:(Ot,We,B)=>{B.d(We,{o:()=>De});var _=B(727);class te extends _.w0{constructor(Ve,Me){super()}schedule(Ve,Me=0){return this}}const ie={setInterval(Re,Ve,...Me){const{delegate:Ue}=ie;return(null==Ue?void 0:Ue.setInterval)?Ue.setInterval(Re,Ve,...Me):setInterval(Re,Ve,...Me)},clearInterval(Re){const{delegate:Ve}=ie;return((null==Ve?void 0:Ve.clearInterval)||clearInterval)(Re)},delegate:void 0};var Se=B(8737);class De extends te{constructor(Ve,Me){super(Ve,Me),this.scheduler=Ve,this.work=Me,this.pending=!1}schedule(Ve,Me=0){if(this.closed)return this;this.state=Ve;const Ue=this.id,ce=this.scheduler;return null!=Ue&&(this.id=this.recycleAsyncId(ce,Ue,Me)),this.pending=!0,this.delay=Me,this.id=this.id||this.requestAsyncId(ce,this.id,Me),this}requestAsyncId(Ve,Me,Ue=0){return ie.setInterval(Ve.flush.bind(Ve,this),Ue)}recycleAsyncId(Ve,Me,Ue=0){if(null!=Ue&&this.delay===Ue&&!1===this.pending)return Me;ie.clearInterval(Me)}execute(Ve,Me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ue=this._execute(Ve,Me);if(Ue)return Ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,Me){let ce,Ue=!1;try{this.work(Ve)}catch(oe){Ue=!0,ce=oe||new Error("Scheduled action threw falsy error")}if(Ue)return this.unsubscribe(),ce}unsubscribe(){if(!this.closed){const{id:Ve,scheduler:Me}=this,{actions:Ue}=Me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Se.P)(Ue,this),null!=Ve&&(this.id=this.recycleAsyncId(Me,Ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ot,We,B)=>{B.d(We,{v:()=>ie});var _=B(6063);class te{constructor(De,Re=te.now){this.schedulerActionCtor=De,this.now=Re}schedule(De,Re=0,Ve){return new this.schedulerActionCtor(this,De).schedule(Ve,Re)}}te.now=_.l.now;class ie extends te{constructor(De,Re=te.now){super(De,Re),this.actions=[],this._active=!1,this._scheduled=void 0}flush(De){const{actions:Re}=this;if(this._active)return void Re.push(De);let Ve;this._active=!0;do{if(Ve=De.execute(De.state,De.delay))break}while(De=Re.shift());if(this._active=!1,Ve){for(;De=Re.shift();)De.unsubscribe();throw Ve}}}},4986:(Ot,We,B)=>{B.d(We,{z:()=>ie});var _=B(4408);const ie=new(B(7565).v)(_.o)},6063:(Ot,We,B)=>{B.d(We,{l:()=>_});const _={now:()=>(_.delegate||Date).now(),delegate:void 0}},3410:(Ot,We,B)=>{B.d(We,{z:()=>_});const _={setTimeout(te,ie,...Se){const{delegate:De}=_;return(null==De?void 0:De.setTimeout)?De.setTimeout(te,ie,...Se):setTimeout(te,ie,...Se)},clearTimeout(te){const{delegate:ie}=_;return((null==ie?void 0:ie.clearTimeout)||clearTimeout)(te)},delegate:void 0}},2202:(Ot,We,B)=>{B.d(We,{h:()=>te});const te=function _(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ot,We,B)=>{B.d(We,{L:()=>_});const _="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(Ot,We,B)=>{B.d(We,{K:()=>te});const te=(0,B(3888).d)(ie=>function(){ie(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(Ot,We,B)=>{B.d(We,{_6:()=>Re,jO:()=>Se,yG:()=>De});var _=B(576);function ie(Ve){return Ve[Ve.length-1]}function Se(Ve){return(0,_.m)(ie(Ve))?Ve.pop():void 0}function De(Ve){return function te(Ve){return Ve&&(0,_.m)(Ve.schedule)}(ie(Ve))?Ve.pop():void 0}function Re(Ve,Me){return"number"==typeof ie(Ve)?Ve.pop():Me}},4742:(Ot,We,B)=>{B.d(We,{D:()=>De});const{isArray:_}=Array,{getPrototypeOf:te,prototype:ie,keys:Se}=Object;function De(Ve){if(1===Ve.length){const Me=Ve[0];if(_(Me))return{args:Me,keys:null};if(function Re(Ve){return Ve&&"object"==typeof Ve&&te(Ve)===ie}(Me)){const Ue=Se(Me);return{args:Ue.map(ce=>Me[ce]),keys:Ue}}}return{args:Ve,keys:null}}},8737:(Ot,We,B)=>{function _(te,ie){if(te){const Se=te.indexOf(ie);0<=Se&&te.splice(Se,1)}}B.d(We,{P:()=>_})},3888:(Ot,We,B)=>{function _(te){const Se=te(De=>{Error.call(De),De.stack=(new Error).stack});return Se.prototype=Object.create(Error.prototype),Se.prototype.constructor=Se,Se}B.d(We,{d:()=>_})},1810:(Ot,We,B)=>{function _(te,ie){return te.reduce((Se,De,Re)=>(Se[De]=ie[Re],Se),{})}B.d(We,{n:()=>_})},2806:(Ot,We,B)=>{B.d(We,{x:()=>ie,O:()=>Se});var _=B(2416);let te=null;function ie(De){if(_.v.useDeprecatedSynchronousErrorHandling){const Re=!te;if(Re&&(te={errorThrown:!1,error:null}),De(),Re){const{errorThrown:Ve,error:Me}=te;if(te=null,Ve)throw Me}}else De()}function Se(De){_.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=De)}},9672:(Ot,We,B)=>{function _(te,ie,Se,De=0,Re=!1){const Ve=ie.schedule(function(){Se(),Re?te.add(this.schedule(null,De)):this.unsubscribe()},De);if(te.add(Ve),!Re)return Ve}B.d(We,{f:()=>_})},4671:(Ot,We,B)=>{function _(te){return te}B.d(We,{y:()=>_})},1144:(Ot,We,B)=>{B.d(We,{z:()=>_});const _=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(Ot,We,B)=>{B.d(We,{D:()=>te});var _=B(576);function te(ie){return Symbol.asyncIterator&&(0,_.m)(null==ie?void 0:ie[Symbol.asyncIterator])}},576:(Ot,We,B)=>{function _(te){return"function"==typeof te}B.d(We,{m:()=>_})},3670:(Ot,We,B)=>{B.d(We,{c:()=>ie});var _=B(8822),te=B(576);function ie(Se){return(0,te.m)(Se[_.L])}},6495:(Ot,We,B)=>{B.d(We,{T:()=>ie});var _=B(2202),te=B(576);function ie(Se){return(0,te.m)(null==Se?void 0:Se[_.h])}},8239:(Ot,We,B)=>{B.d(We,{t:()=>te});var _=B(576);function te(ie){return(0,_.m)(null==ie?void 0:ie.then)}},3260:(Ot,We,B)=>{B.d(We,{Q:()=>ie,L:()=>Se});var _=B(655),te=B(576);function ie(De){return(0,_.FC)(this,arguments,function*(){const Ve=De.getReader();try{for(;;){const{value:Me,done:Ue}=yield(0,_.qq)(Ve.read());if(Ue)return yield(0,_.qq)(void 0);yield yield(0,_.qq)(Me)}}finally{Ve.releaseLock()}})}function Se(De){return(0,te.m)(null==De?void 0:De.getReader)}},4482:(Ot,We,B)=>{B.d(We,{A:()=>te,e:()=>ie});var _=B(576);function te(Se){return(0,_.m)(null==Se?void 0:Se.lift)}function ie(Se){return De=>{if(te(De))return De.lift(function(Re){try{return Se(Re,this)}catch(Ve){this.error(Ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(Ot,We,B)=>{B.d(We,{Z:()=>Se});var _=B(4004);const{isArray:te}=Array;function Se(De){return(0,_.U)(Re=>function ie(De,Re){return te(Re)?De(...Re):De(Re)}(De,Re))}},5032:(Ot,We,B)=>{function _(){}B.d(We,{Z:()=>_})},7849:(Ot,We,B)=>{B.d(We,{h:()=>ie});var _=B(2416),te=B(3410);function ie(Se){te.z.setTimeout(()=>{const{onUnhandledError:De}=_.v;if(!De)throw Se;De(Se)})}},4532:(Ot,We,B)=>{function _(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(We,{z:()=>_})},655:(Ot,We,B)=>{function Se(ge,Fe){var Be={};for(var Qe in ge)Object.prototype.hasOwnProperty.call(ge,Qe)&&Fe.indexOf(Qe)<0&&(Be[Qe]=ge[Qe]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var Ze=0;for(Qe=Object.getOwnPropertySymbols(ge);Ze<Qe.length;Ze++)Fe.indexOf(Qe[Ze])<0&&Object.prototype.propertyIsEnumerable.call(ge,Qe[Ze])&&(Be[Qe[Ze]]=ge[Qe[Ze]])}return Be}function Me(ge,Fe,Be,Qe){return new(Be||(Be=Promise))(function(wt,Nt){function en(nn){try{it(Qe.next(nn))}catch(un){Nt(un)}}function Wt(nn){try{it(Qe.throw(nn))}catch(un){Nt(un)}}function it(nn){nn.done?wt(nn.value):function Ze(wt){return wt instanceof Be?wt:new Be(function(Nt){Nt(wt)})}(nn.value).then(en,Wt)}it((Qe=Qe.apply(ge,Fe||[])).next())})}function tt(ge){return this instanceof tt?(this.v=ge,this):new tt(ge)}function pt(ge,Fe,Be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ze,Qe=Be.apply(ge,Fe||[]),wt=[];return Ze={},Nt("next"),Nt("throw"),Nt("return"),Ze[Symbol.asyncIterator]=function(){return this},Ze;function Nt(Bt){Qe[Bt]&&(Ze[Bt]=function(Yt){return new Promise(function(Mn,Vt){wt.push([Bt,Yt,Mn,Vt])>1||en(Bt,Yt)})})}function en(Bt,Yt){try{!function Wt(Bt){Bt.value instanceof tt?Promise.resolve(Bt.value.v).then(it,nn):un(wt[0][2],Bt)}(Qe[Bt](Yt))}catch(Mn){un(wt[0][3],Mn)}}function it(Bt){en("next",Bt)}function nn(Bt){en("throw",Bt)}function un(Bt,Yt){Bt(Yt),wt.shift(),wt.length&&en(wt[0][0],wt[0][1])}}function kt(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Be,Fe=ge[Symbol.asyncIterator];return Fe?Fe.call(ge):(ge=function Ne(ge){var Fe="function"==typeof Symbol&&Symbol.iterator,Be=Fe&&ge[Fe],Qe=0;if(Be)return Be.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&Qe>=ge.length&&(ge=void 0),{value:ge&&ge[Qe++],done:!ge}}};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),Be={},Qe("next"),Qe("throw"),Qe("return"),Be[Symbol.asyncIterator]=function(){return this},Be);function Qe(wt){Be[wt]=ge[wt]&&function(Nt){return new Promise(function(en,Wt){!function Ze(wt,Nt,en,Wt){Promise.resolve(Wt).then(function(it){wt({value:it,done:en})},Nt)}(en,Wt,(Nt=ge[wt](Nt)).done,Nt.value)})}}}B.d(We,{_T:()=>Se,mG:()=>Me,qq:()=>tt,FC:()=>pt,KL:()=>kt})},9808:(Ot,We,B)=>{B.d(We,{mr:()=>xe,Ov:()=>st,ez:()=>ba,K0:()=>Ve,uU:()=>Dn,Do:()=>ht,Ts:()=>$r,V_:()=>ce,Ye:()=>W,S$:()=>tt,sg:()=>ct,O5:()=>xn,b0:()=>kt,lw:()=>Me,gd:()=>ai,EM:()=>Ms,JF:()=>tr,PM:()=>as,w_:()=>Re,bD:()=>bi,q:()=>ie,Mx:()=>Ce,HT:()=>De});var _=B(5e3);let te=null;function ie(){return te}function De(U){te||(te=U)}class Re{}const Ve=new _.OlP("DocumentToken");let Me=(()=>{class U{historyGo(V){throw new Error("Not implemented")}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275prov=_.Yz7({token:U,factory:function(){return function Ue(){return(0,_.LFG)(oe)}()},providedIn:"platform"}),U})();const ce=new _.OlP("Location Initialized");let oe=(()=>{class U extends Me{constructor(V){super(),this._doc=V,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ie().getBaseHref(this._doc)}onPopState(V){const ne=ie().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("popstate",V,!1),()=>ne.removeEventListener("popstate",V)}onHashChange(V){const ne=ie().getGlobalEventTarget(this._doc,"window");return ne.addEventListener("hashchange",V,!1),()=>ne.removeEventListener("hashchange",V)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(V){this.location.pathname=V}pushState(V,ne,_e){Ne()?this._history.pushState(V,ne,_e):this.location.hash=_e}replaceState(V,ne,_e){Ne()?this._history.replaceState(V,ne,_e):this.location.hash=_e}forward(){this._history.forward()}back(){this._history.back()}historyGo(V=0){this._history.go(V)}getState(){return this._history.state}}return U.\u0275fac=function(V){return new(V||U)(_.LFG(Ve))},U.\u0275prov=_.Yz7({token:U,factory:function(){return function Tt(){return new oe((0,_.LFG)(Ve))}()},providedIn:"platform"}),U})();function Ne(){return!!window.history.pushState}function at(U,Q){if(0==U.length)return Q;if(0==Q.length)return U;let V=0;return U.endsWith("/")&&V++,Q.startsWith("/")&&V++,2==V?U+Q.substring(1):1==V?U+Q:U+"/"+Q}function Xe(U){const Q=U.match(/#|\?|$/),V=Q&&Q.index||U.length;return U.slice(0,V-("/"===U[V-1]?1:0))+U.slice(V)}function gt(U){return U&&"?"!==U[0]?"?"+U:U}let tt=(()=>{class U{historyGo(V){throw new Error("Not implemented")}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275prov=_.Yz7({token:U,factory:function(){return function pt(U){const Q=(0,_.LFG)(Ve).location;return new kt((0,_.LFG)(Me),Q&&Q.origin||"")}()},providedIn:"root"}),U})();const xe=new _.OlP("appBaseHref");let kt=(()=>{class U extends tt{constructor(V,ne){if(super(),this._platformLocation=V,this._removeListenerFns=[],null==ne&&(ne=this._platformLocation.getBaseHrefFromDOM()),null==ne)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ne}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}prepareExternalUrl(V){return at(this._baseHref,V)}path(V=!1){const ne=this._platformLocation.pathname+gt(this._platformLocation.search),_e=this._platformLocation.hash;return _e&&V?`${ne}${_e}`:ne}pushState(V,ne,_e,et){const mt=this.prepareExternalUrl(_e+gt(et));this._platformLocation.pushState(V,ne,mt)}replaceState(V,ne,_e,et){const mt=this.prepareExternalUrl(_e+gt(et));this._platformLocation.replaceState(V,ne,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ne,_e;null===(_e=(ne=this._platformLocation).historyGo)||void 0===_e||_e.call(ne,V)}}return U.\u0275fac=function(V){return new(V||U)(_.LFG(Me),_.LFG(xe,8))},U.\u0275prov=_.Yz7({token:U,factory:U.\u0275fac}),U})(),ht=(()=>{class U extends tt{constructor(V,ne){super(),this._platformLocation=V,this._baseHref="",this._removeListenerFns=[],null!=ne&&(this._baseHref=ne)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(V){this._removeListenerFns.push(this._platformLocation.onPopState(V),this._platformLocation.onHashChange(V))}getBaseHref(){return this._baseHref}path(V=!1){let ne=this._platformLocation.hash;return null==ne&&(ne="#"),ne.length>0?ne.substring(1):ne}prepareExternalUrl(V){const ne=at(this._baseHref,V);return ne.length>0?"#"+ne:ne}pushState(V,ne,_e,et){let mt=this.prepareExternalUrl(_e+gt(et));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.pushState(V,ne,mt)}replaceState(V,ne,_e,et){let mt=this.prepareExternalUrl(_e+gt(et));0==mt.length&&(mt=this._platformLocation.pathname),this._platformLocation.replaceState(V,ne,mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(V=0){var ne,_e;null===(_e=(ne=this._platformLocation).historyGo)||void 0===_e||_e.call(ne,V)}}return U.\u0275fac=function(V){return new(V||U)(_.LFG(Me),_.LFG(xe,8))},U.\u0275prov=_.Yz7({token:U,factory:U.\u0275fac}),U})(),W=(()=>{class U{constructor(V,ne){this._subject=new _.vpe,this._urlChangeListeners=[],this._platformStrategy=V;const _e=this._platformStrategy.getBaseHref();this._platformLocation=ne,this._baseHref=Xe(Ct(_e)),this._platformStrategy.onPopState(et=>{this._subject.emit({url:this.path(!0),pop:!0,state:et.state,type:et.type})})}path(V=!1){return this.normalize(this._platformStrategy.path(V))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(V,ne=""){return this.path()==this.normalize(V+gt(ne))}normalize(V){return U.stripTrailingSlash(function Et(U,Q){return U&&Q.startsWith(U)?Q.substring(U.length):Q}(this._baseHref,Ct(V)))}prepareExternalUrl(V){return V&&"/"!==V[0]&&(V="/"+V),this._platformStrategy.prepareExternalUrl(V)}go(V,ne="",_e=null){this._platformStrategy.pushState(_e,"",V,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+gt(ne)),_e)}replaceState(V,ne="",_e=null){this._platformStrategy.replaceState(_e,"",V,ne),this._notifyUrlChangeListeners(this.prepareExternalUrl(V+gt(ne)),_e)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(V=0){var ne,_e;null===(_e=(ne=this._platformStrategy).historyGo)||void 0===_e||_e.call(ne,V)}onUrlChange(V){this._urlChangeListeners.push(V),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ne=>{this._notifyUrlChangeListeners(ne.url,ne.state)}))}_notifyUrlChangeListeners(V="",ne){this._urlChangeListeners.forEach(_e=>_e(V,ne))}subscribe(V,ne,_e){return this._subject.subscribe({next:V,error:ne,complete:_e})}}return U.normalizeQueryParams=gt,U.joinWithSlash=at,U.stripTrailingSlash=Xe,U.\u0275fac=function(V){return new(V||U)(_.LFG(tt),_.LFG(Me))},U.\u0275prov=_.Yz7({token:U,factory:function(){return function Ge(){return new W((0,_.LFG)(tt),(0,_.LFG)(Me))}()},providedIn:"root"}),U})();function Ct(U){return U.replace(/\/index.html$/,"")}var Fe=(()=>((Fe=Fe||{})[Fe.Format=0]="Format",Fe[Fe.Standalone=1]="Standalone",Fe))(),Be=(()=>((Be=Be||{})[Be.Narrow=0]="Narrow",Be[Be.Abbreviated=1]="Abbreviated",Be[Be.Wide=2]="Wide",Be[Be.Short=3]="Short",Be))(),Qe=(()=>((Qe=Qe||{})[Qe.Short=0]="Short",Qe[Qe.Medium=1]="Medium",Qe[Qe.Long=2]="Long",Qe[Qe.Full=3]="Full",Qe))(),Ze=(()=>((Ze=Ze||{})[Ze.Decimal=0]="Decimal",Ze[Ze.Group=1]="Group",Ze[Ze.List=2]="List",Ze[Ze.PercentSign=3]="PercentSign",Ze[Ze.PlusSign=4]="PlusSign",Ze[Ze.MinusSign=5]="MinusSign",Ze[Ze.Exponential=6]="Exponential",Ze[Ze.SuperscriptingExponent=7]="SuperscriptingExponent",Ze[Ze.PerMille=8]="PerMille",Ze[Ze.Infinity=9]="Infinity",Ze[Ze.NaN=10]="NaN",Ze[Ze.TimeSeparator=11]="TimeSeparator",Ze[Ze.CurrencyDecimal=12]="CurrencyDecimal",Ze[Ze.CurrencyGroup=13]="CurrencyGroup",Ze))();function Yt(U,Q){return rn((0,_.cg1)(U)[_.wAp.DateFormat],Q)}function Mn(U,Q){return rn((0,_.cg1)(U)[_.wAp.TimeFormat],Q)}function Vt(U,Q){return rn((0,_.cg1)(U)[_.wAp.DateTimeFormat],Q)}function tn(U,Q){const V=(0,_.cg1)(U),ne=V[_.wAp.NumberSymbols][Q];if(void 0===ne){if(Q===Ze.CurrencyDecimal)return V[_.wAp.NumberSymbols][Ze.Decimal];if(Q===Ze.CurrencyGroup)return V[_.wAp.NumberSymbols][Ze.Group]}return ne}function Sr(U){if(!U[_.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${U[_.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function rn(U,Q){for(let V=Q;V>-1;V--)if(void 0!==U[V])return U[V];throw new Error("Locale data API: locale data undefined")}function yn(U){const[Q,V]=U.split(":");return{hours:+Q,minutes:+V}}const zr=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,hi={},vr=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Lt=(()=>((Lt=Lt||{})[Lt.Short=0]="Short",Lt[Lt.ShortGMT=1]="ShortGMT",Lt[Lt.Long=2]="Long",Lt[Lt.Extended=3]="Extended",Lt))(),qt=(()=>((qt=qt||{})[qt.FullYear=0]="FullYear",qt[qt.Month=1]="Month",qt[qt.Date=2]="Date",qt[qt.Hours=3]="Hours",qt[qt.Minutes=4]="Minutes",qt[qt.Seconds=5]="Seconds",qt[qt.FractionalSeconds=6]="FractionalSeconds",qt[qt.Day=7]="Day",qt))(),an=(()=>((an=an||{})[an.DayPeriods=0]="DayPeriods",an[an.Days=1]="Days",an[an.Months=2]="Months",an[an.Eras=3]="Eras",an))();function br(U,Q,V,ne){let _e=function wi(U){if(Dr(U))return U;if("number"==typeof U&&!isNaN(U))return new Date(U);if("string"==typeof U){if(U=U.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(U)){const[_e,et=1,mt=1]=U.split("-").map(ln=>+ln);return Si(_e,et-1,mt)}const V=parseFloat(U);if(!isNaN(U-V))return new Date(V);let ne;if(ne=U.match(zr))return function In(U){const Q=new Date(0);let V=0,ne=0;const _e=U[8]?Q.setUTCFullYear:Q.setFullYear,et=U[8]?Q.setUTCHours:Q.setHours;U[9]&&(V=Number(U[9]+U[10]),ne=Number(U[9]+U[11])),_e.call(Q,Number(U[1]),Number(U[2])-1,Number(U[3]));const mt=Number(U[4]||0)-V,ln=Number(U[5]||0)-ne,Sn=Number(U[6]||0),ir=Math.floor(1e3*parseFloat("0."+(U[7]||0)));return et.call(Q,mt,ln,Sn,ir),Q}(ne)}const Q=new Date(U);if(!Dr(Q))throw new Error(`Unable to convert "${U}" into a date`);return Q}(U);Q=wn(V,Q)||Q;let ln,mt=[];for(;Q;){if(ln=vr.exec(Q),!ln){mt.push(Q);break}{mt=mt.concat(ln.slice(1));const jn=mt.pop();if(!jn)break;Q=jn}}let Sn=_e.getTimezoneOffset();ne&&(Sn=rr(ne,Sn),_e=function qr(U,Q,V){const ne=V?-1:1,_e=U.getTimezoneOffset();return function zi(U,Q){return(U=new Date(U.getTime())).setMinutes(U.getMinutes()+Q),U}(U,ne*(rr(Q,_e)-_e))}(_e,ne,!0));let ir="";return mt.forEach(jn=>{const cn=function hn(U){if(ar[U])return ar[U];let Q;switch(U){case"G":case"GG":case"GGG":Q=ye(an.Eras,Be.Abbreviated);break;case"GGGG":Q=ye(an.Eras,Be.Wide);break;case"GGGGG":Q=ye(an.Eras,Be.Narrow);break;case"y":Q=fn(qt.FullYear,1,0,!1,!0);break;case"yy":Q=fn(qt.FullYear,2,0,!0,!0);break;case"yyy":Q=fn(qt.FullYear,3,0,!1,!0);break;case"yyyy":Q=fn(qt.FullYear,4,0,!1,!0);break;case"Y":Q=or(1);break;case"YY":Q=or(2,!0);break;case"YYY":Q=or(3);break;case"YYYY":Q=or(4);break;case"M":case"L":Q=fn(qt.Month,1,1);break;case"MM":case"LL":Q=fn(qt.Month,2,1);break;case"MMM":Q=ye(an.Months,Be.Abbreviated);break;case"MMMM":Q=ye(an.Months,Be.Wide);break;case"MMMMM":Q=ye(an.Months,Be.Narrow);break;case"LLL":Q=ye(an.Months,Be.Abbreviated,Fe.Standalone);break;case"LLLL":Q=ye(an.Months,Be.Wide,Fe.Standalone);break;case"LLLLL":Q=ye(an.Months,Be.Narrow,Fe.Standalone);break;case"w":Q=pn(1);break;case"ww":Q=pn(2);break;case"W":Q=pn(1,!0);break;case"d":Q=fn(qt.Date,1);break;case"dd":Q=fn(qt.Date,2);break;case"c":case"cc":Q=fn(qt.Day,1);break;case"ccc":Q=ye(an.Days,Be.Abbreviated,Fe.Standalone);break;case"cccc":Q=ye(an.Days,Be.Wide,Fe.Standalone);break;case"ccccc":Q=ye(an.Days,Be.Narrow,Fe.Standalone);break;case"cccccc":Q=ye(an.Days,Be.Short,Fe.Standalone);break;case"E":case"EE":case"EEE":Q=ye(an.Days,Be.Abbreviated);break;case"EEEE":Q=ye(an.Days,Be.Wide);break;case"EEEEE":Q=ye(an.Days,Be.Narrow);break;case"EEEEEE":Q=ye(an.Days,Be.Short);break;case"a":case"aa":case"aaa":Q=ye(an.DayPeriods,Be.Abbreviated);break;case"aaaa":Q=ye(an.DayPeriods,Be.Wide);break;case"aaaaa":Q=ye(an.DayPeriods,Be.Narrow);break;case"b":case"bb":case"bbb":Q=ye(an.DayPeriods,Be.Abbreviated,Fe.Standalone,!0);break;case"bbbb":Q=ye(an.DayPeriods,Be.Wide,Fe.Standalone,!0);break;case"bbbbb":Q=ye(an.DayPeriods,Be.Narrow,Fe.Standalone,!0);break;case"B":case"BB":case"BBB":Q=ye(an.DayPeriods,Be.Abbreviated,Fe.Format,!0);break;case"BBBB":Q=ye(an.DayPeriods,Be.Wide,Fe.Format,!0);break;case"BBBBB":Q=ye(an.DayPeriods,Be.Narrow,Fe.Format,!0);break;case"h":Q=fn(qt.Hours,1,-12);break;case"hh":Q=fn(qt.Hours,2,-12);break;case"H":Q=fn(qt.Hours,1);break;case"HH":Q=fn(qt.Hours,2);break;case"m":Q=fn(qt.Minutes,1);break;case"mm":Q=fn(qt.Minutes,2);break;case"s":Q=fn(qt.Seconds,1);break;case"ss":Q=fn(qt.Seconds,2);break;case"S":Q=fn(qt.FractionalSeconds,1);break;case"SS":Q=fn(qt.FractionalSeconds,2);break;case"SSS":Q=fn(qt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":Q=ke(Lt.Short);break;case"ZZZZZ":Q=ke(Lt.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":Q=ke(Lt.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":Q=ke(Lt.Long);break;default:return null}return ar[U]=Q,Q}(jn);ir+=cn?cn(_e,V,Sn):"''"===jn?"'":jn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ir}function Si(U,Q,V){const ne=new Date(0);return ne.setFullYear(U,Q,V),ne.setHours(0,0,0),ne}function wn(U,Q){const V=function Nt(U){return(0,_.cg1)(U)[_.wAp.LocaleId]}(U);if(hi[V]=hi[V]||{},hi[V][Q])return hi[V][Q];let ne="";switch(Q){case"shortDate":ne=Yt(U,Qe.Short);break;case"mediumDate":ne=Yt(U,Qe.Medium);break;case"longDate":ne=Yt(U,Qe.Long);break;case"fullDate":ne=Yt(U,Qe.Full);break;case"shortTime":ne=Mn(U,Qe.Short);break;case"mediumTime":ne=Mn(U,Qe.Medium);break;case"longTime":ne=Mn(U,Qe.Long);break;case"fullTime":ne=Mn(U,Qe.Full);break;case"short":const _e=wn(U,"shortTime"),et=wn(U,"shortDate");ne=vi(Vt(U,Qe.Short),[_e,et]);break;case"medium":const mt=wn(U,"mediumTime"),ln=wn(U,"mediumDate");ne=vi(Vt(U,Qe.Medium),[mt,ln]);break;case"long":const Sn=wn(U,"longTime"),ir=wn(U,"longDate");ne=vi(Vt(U,Qe.Long),[Sn,ir]);break;case"full":const jn=wn(U,"fullTime"),cn=wn(U,"fullDate");ne=vi(Vt(U,Qe.Full),[jn,cn])}return ne&&(hi[V][Q]=ne),ne}function vi(U,Q){return Q&&(U=U.replace(/\{([^}]+)}/g,function(V,ne){return null!=Q&&ne in Q?Q[ne]:V})),U}function Kr(U,Q,V="-",ne,_e){let et="";(U<0||_e&&U<=0)&&(_e?U=1-U:(U=-U,et=V));let mt=String(U);for(;mt.length<Q;)mt="0"+mt;return ne&&(mt=mt.substr(mt.length-Q)),et+mt}function fn(U,Q,V=0,ne=!1,_e=!1){return function(et,mt){let ln=function Oe(U,Q){switch(U){case qt.FullYear:return Q.getFullYear();case qt.Month:return Q.getMonth();case qt.Date:return Q.getDate();case qt.Hours:return Q.getHours();case qt.Minutes:return Q.getMinutes();case qt.Seconds:return Q.getSeconds();case qt.FractionalSeconds:return Q.getMilliseconds();case qt.Day:return Q.getDay();default:throw new Error(`Unknown DateType value "${U}".`)}}(U,et);if((V>0||ln>-V)&&(ln+=V),U===qt.Hours)0===ln&&-12===V&&(ln=12);else if(U===qt.FractionalSeconds)return function pr(U,Q){return Kr(U,3).substr(0,Q)}(ln,Q);const Sn=tn(mt,Ze.MinusSign);return Kr(ln,Q,Sn,ne,_e)}}function ye(U,Q,V=Fe.Format,ne=!1){return function(_e,et){return function He(U,Q,V,ne,_e,et){switch(V){case an.Months:return function it(U,Q,V){const ne=(0,_.cg1)(U),et=rn([ne[_.wAp.MonthsFormat],ne[_.wAp.MonthsStandalone]],Q);return rn(et,V)}(Q,_e,ne)[U.getMonth()];case an.Days:return function Wt(U,Q,V){const ne=(0,_.cg1)(U),et=rn([ne[_.wAp.DaysFormat],ne[_.wAp.DaysStandalone]],Q);return rn(et,V)}(Q,_e,ne)[U.getDay()];case an.DayPeriods:const mt=U.getHours(),ln=U.getMinutes();if(et){const ir=function Yn(U){const Q=(0,_.cg1)(U);return Sr(Q),(Q[_.wAp.ExtraData][2]||[]).map(ne=>"string"==typeof ne?yn(ne):[yn(ne[0]),yn(ne[1])])}(Q),jn=function Qt(U,Q,V){const ne=(0,_.cg1)(U);Sr(ne);const et=rn([ne[_.wAp.ExtraData][0],ne[_.wAp.ExtraData][1]],Q)||[];return rn(et,V)||[]}(Q,_e,ne),cn=ir.findIndex(Xr=>{if(Array.isArray(Xr)){const[Ar,kr]=Xr,Ui=mt>=Ar.hours&&ln>=Ar.minutes,Hr=mt<kr.hours||mt===kr.hours&&ln<kr.minutes;if(Ar.hours<kr.hours){if(Ui&&Hr)return!0}else if(Ui||Hr)return!0}else if(Xr.hours===mt&&Xr.minutes===ln)return!0;return!1});if(-1!==cn)return jn[cn]}return function en(U,Q,V){const ne=(0,_.cg1)(U),et=rn([ne[_.wAp.DayPeriodsFormat],ne[_.wAp.DayPeriodsStandalone]],Q);return rn(et,V)}(Q,_e,ne)[mt<12?0:1];case an.Eras:return function nn(U,Q){return rn((0,_.cg1)(U)[_.wAp.Eras],Q)}(Q,ne)[U.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${V}`)}}(_e,et,U,Q,V,ne)}}function ke(U){return function(Q,V,ne){const _e=-1*ne,et=tn(V,Ze.MinusSign),mt=_e>0?Math.floor(_e/60):Math.ceil(_e/60);switch(U){case Lt.Short:return(_e>=0?"+":"")+Kr(mt,2,et)+Kr(Math.abs(_e%60),2,et);case Lt.ShortGMT:return"GMT"+(_e>=0?"+":"")+Kr(mt,1,et);case Lt.Long:return"GMT"+(_e>=0?"+":"")+Kr(mt,2,et)+":"+Kr(Math.abs(_e%60),2,et);case Lt.Extended:return 0===ne?"Z":(_e>=0?"+":"")+Kr(mt,2,et)+":"+Kr(Math.abs(_e%60),2,et);default:throw new Error(`Unknown zone width "${U}"`)}}}function $t(U){return Si(U.getFullYear(),U.getMonth(),U.getDate()+(4-U.getDay()))}function pn(U,Q=!1){return function(V,ne){let _e;if(Q){const et=new Date(V.getFullYear(),V.getMonth(),1).getDay()-1,mt=V.getDate();_e=1+Math.floor((mt+et)/7)}else{const et=$t(V),mt=function St(U){const Q=Si(U,0,1).getDay();return Si(U,0,1+(Q<=4?4:11)-Q)}(et.getFullYear()),ln=et.getTime()-mt.getTime();_e=1+Math.round(ln/6048e5)}return Kr(_e,U,tn(ne,Ze.MinusSign))}}function or(U,Q=!1){return function(V,ne){return Kr($t(V).getFullYear(),U,tn(ne,Ze.MinusSign),Q)}}const ar={};function rr(U,Q){U=U.replace(/:/g,"");const V=Date.parse("Jan 01, 1970 00:00:00 "+U)/6e4;return isNaN(V)?Q:V}function Dr(U){return U instanceof Date&&!isNaN(U.valueOf())}function Ce(U,Q){Q=encodeURIComponent(Q);for(const V of U.split(";")){const ne=V.indexOf("="),[_e,et]=-1==ne?[V,""]:[V.slice(0,ne),V.slice(ne+1)];if(_e.trim()===Q)return decodeURIComponent(et)}return null}class ze{constructor(Q,V,ne,_e){this.$implicit=Q,this.ngForOf=V,this.index=ne,this.count=_e}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ct=(()=>{class U{constructor(V,ne,_e){this._viewContainer=V,this._template=ne,this._differs=_e,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(V){this._ngForOf=V,this._ngForOfDirty=!0}set ngForTrackBy(V){this._trackByFn=V}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(V){V&&(this._template=V)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const V=this._ngForOf;!this._differ&&V&&(this._differ=this._differs.find(V).create(this.ngForTrackBy))}if(this._differ){const V=this._differ.diff(this._ngForOf);V&&this._applyChanges(V)}}_applyChanges(V){const ne=this._viewContainer;V.forEachOperation((_e,et,mt)=>{if(null==_e.previousIndex)ne.createEmbeddedView(this._template,new ze(_e.item,this._ngForOf,-1,-1),null===mt?void 0:mt);else if(null==mt)ne.remove(null===et?void 0:et);else if(null!==et){const ln=ne.get(et);ne.move(ln,mt),zt(ln,_e)}});for(let _e=0,et=ne.length;_e<et;_e++){const ln=ne.get(_e).context;ln.index=_e,ln.count=et,ln.ngForOf=this._ngForOf}V.forEachIdentityChange(_e=>{zt(ne.get(_e.currentIndex),_e)})}static ngTemplateContextGuard(V,ne){return!0}}return U.\u0275fac=function(V){return new(V||U)(_.Y36(_.s_b),_.Y36(_.Rgc),_.Y36(_.ZZ4))},U.\u0275dir=_.lG2({type:U,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),U})();function zt(U,Q){U.context.$implicit=Q.item}let xn=(()=>{class U{constructor(V,ne){this._viewContainer=V,this._context=new Tn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ne}set ngIf(V){this._context.$implicit=this._context.ngIf=V,this._updateView()}set ngIfThen(V){Fs("ngIfThen",V),this._thenTemplateRef=V,this._thenViewRef=null,this._updateView()}set ngIfElse(V){Fs("ngIfElse",V),this._elseTemplateRef=V,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(V,ne){return!0}}return U.\u0275fac=function(V){return new(V||U)(_.Y36(_.s_b),_.Y36(_.Rgc))},U.\u0275dir=_.lG2({type:U,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),U})();class Tn{constructor(){this.$implicit=null,this.ngIf=null}}function Fs(U,Q){if(Q&&!Q.createEmbeddedView)throw new Error(`${U} must be a TemplateRef, but received '${(0,_.AaK)(Q)}'.`)}function _r(U,Q){return new _.vHH(2100,"")}class qn{createSubscription(Q,V){return Q.subscribe({next:V,error:ne=>{throw ne}})}dispose(Q){Q.unsubscribe()}onDestroy(Q){Q.unsubscribe()}}class Ie{createSubscription(Q,V){return Q.then(V,ne=>{throw ne})}dispose(Q){}onDestroy(Q){}}const ve=new Ie,je=new qn;let st=(()=>{class U{constructor(V){this._ref=V,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(V){return this._obj?V!==this._obj?(this._dispose(),this.transform(V)):this._latestValue:(V&&this._subscribe(V),this._latestValue)}_subscribe(V){this._obj=V,this._strategy=this._selectStrategy(V),this._subscription=this._strategy.createSubscription(V,ne=>this._updateLatestValue(V,ne))}_selectStrategy(V){if((0,_.QGY)(V))return ve;if((0,_.F4k)(V))return je;throw _r()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(V,ne){V===this._obj&&(this._latestValue=ne,this._ref.markForCheck())}}return U.\u0275fac=function(V){return new(V||U)(_.Y36(_.sBO,16))},U.\u0275pipe=_.Yjl({name:"async",type:U,pure:!1}),U})(),ai=(()=>{class U{transform(V){if(null==V)return null;if("string"!=typeof V)throw _r();return V.toUpperCase()}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275pipe=_.Yjl({name:"uppercase",type:U,pure:!0}),U})();const gn=new _.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Dn=(()=>{class U{constructor(V,ne){this.locale=V,this.defaultTimezone=ne}transform(V,ne="mediumDate",_e,et){var mt;if(null==V||""===V||V!=V)return null;try{return br(V,ne,et||this.locale,null!==(mt=null!=_e?_e:this.defaultTimezone)&&void 0!==mt?mt:void 0)}catch(ln){throw _r()}}}return U.\u0275fac=function(V){return new(V||U)(_.Y36(_.soG,16),_.Y36(gn,24))},U.\u0275pipe=_.Yjl({name:"date",type:U,pure:!0}),U})(),$r=(()=>{class U{transform(V){return JSON.stringify(V,null,2)}}return U.\u0275fac=function(V){return new(V||U)},U.\u0275pipe=_.Yjl({name:"json",type:U,pure:!1}),U})(),ba=(()=>{class U{}return U.\u0275fac=function(V){return new(V||U)},U.\u0275mod=_.oAB({type:U}),U.\u0275inj=_.cJS({}),U})();const bi="browser";function as(U){return"server"===U}let Ms=(()=>{class U{}return U.\u0275prov=(0,_.Yz7)({token:U,providedIn:"root",factory:()=>new ni((0,_.LFG)(Ve),window)}),U})();class ni{constructor(Q,V){this.document=Q,this.window=V,this.offset=()=>[0,0]}setOffset(Q){this.offset=Array.isArray(Q)?()=>Q:Q}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Q){this.supportsScrolling()&&this.window.scrollTo(Q[0],Q[1])}scrollToAnchor(Q){if(!this.supportsScrolling())return;const V=function Jr(U,Q){const V=U.getElementById(Q)||U.getElementsByName(Q)[0];if(V)return V;if("function"==typeof U.createTreeWalker&&U.body&&(U.body.createShadowRoot||U.body.attachShadow)){const ne=U.createTreeWalker(U.body,NodeFilter.SHOW_ELEMENT);let _e=ne.currentNode;for(;_e;){const et=_e.shadowRoot;if(et){const mt=et.getElementById(Q)||et.querySelector(`[name="${Q}"]`);if(mt)return mt}_e=ne.nextNode()}}return null}(this.document,Q);V&&(this.scrollToElement(V),V.focus())}setHistoryScrollRestoration(Q){if(this.supportScrollRestoration()){const V=this.window.history;V&&V.scrollRestoration&&(V.scrollRestoration=Q)}}scrollToElement(Q){const V=Q.getBoundingClientRect(),ne=V.left+this.window.pageXOffset,_e=V.top+this.window.pageYOffset,et=this.offset();this.window.scrollTo(ne-et[0],_e-et[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Q=Es(this.window.history)||Es(Object.getPrototypeOf(this.window.history));return!(!Q||!Q.writable&&!Q.set)}catch(Q){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Q){return!1}}}function Es(U){return Object.getOwnPropertyDescriptor(U,"scrollRestoration")}class tr{}},5e3:(Ot,We,B)=>{B.d(We,{deG:()=>Xi,tb:()=>EE,AFp:()=>mE,ip1:()=>gE,CZH:()=>Rv,hGG:()=>aC,z2F:()=>Lv,sBO:()=>WI,Sil:()=>DI,_Vd:()=>Uy,EJc:()=>CI,SBq:()=>qg,qLn:()=>Wl,vpe:()=>Uc,tBr:()=>ho,XFs:()=>Qt,OlP:()=>Ni,zs3:()=>Ia,ZZ4:()=>Hv,aQg:()=>Gv,soG:()=>Nv,YKP:()=>A0,h0i:()=>fp,PXZ:()=>LI,R0b:()=>rc,FiY:()=>Cs,Lbi:()=>vE,g9A:()=>_E,Qsj:()=>Ew,FYo:()=>C0,JOm:()=>z,tp0:()=>$s,Rgc:()=>Jg,dDg:()=>bE,q4F:()=>D0,GfV:()=>b0,s_b:()=>$y,ifc:()=>Lt,eFA:()=>SE,G48:()=>GI,Gpc:()=>oe,X6Q:()=>HI,_c5:()=>oC,VLi:()=>OI,c2e:()=>wE,zSh:()=>Hp,wAp:()=>Un,vHH:()=>Xe,cg1:()=>cp,kL8:()=>Ty,dqk:()=>wn,sIi:()=>Yd,CqO:()=>Qm,QGY:()=>tp,F4k:()=>Ym,RDi:()=>Es,AaK:()=>Me,qOj:()=>Gf,TTD:()=>Ri,_Bn:()=>E0,xp6:()=>pf,uIk:()=>Oh,ekj:()=>xg,Suo:()=>K0,Xpm:()=>$t,lG2:()=>wi,Yz7:()=>Yt,cJS:()=>Vt,oAB:()=>rr,Yjl:()=>In,Y36:()=>eu,_UZ:()=>Vh,qZA:()=>ep,TgZ:()=>Lh,EpF:()=>go,n5z:()=>Xs,LFG:()=>Pt,$8M:()=>xa,$Z:()=>_g,NdJ:()=>np,CRH:()=>q0,oxw:()=>ny,ALo:()=>V0,lcZ:()=>U0,xi3:()=>B0,Hsn:()=>kl,F$t:()=>Eg,Q6J:()=>vg,DdM:()=>N0,iGM:()=>z0,MAs:()=>og,CHM:()=>Y,LSH:()=>Qu,YNc:()=>Vm,W1O:()=>J0,_uU:()=>py,Oqu:()=>ap,hij:()=>Wh});var _=B(7579),te=B(727),ie=B(8306),Se=B(6451),De=B(3099);function Re(n){for(let r in n)if(n[r]===Re)return r;throw Error("Could not find renamed property on target object.")}function Ve(n,r){for(const o in r)r.hasOwnProperty(o)&&!n.hasOwnProperty(o)&&(n[o]=r[o])}function Me(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Me).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const o=r.indexOf("\n");return-1===o?r:r.substring(0,o)}function Ue(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ce=Re({__forward_ref__:Re});function oe(n){return n.__forward_ref__=oe,n.toString=function(){return Me(this())},n}function Ne(n){return Tt(n)?n():n}function Tt(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===oe}class Xe extends Error{constructor(r,o){super(function gt(n,r){return`NG0${Math.abs(n)}${r?": "+r:""}`}(r,o)),this.code=r}}function tt(n){return"string"==typeof n?n:null==n?"":String(n)}function pt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():tt(n)}function W(n,r){const o=r?` in ${r}`:"";throw new Xe(-201,`No provider for ${pt(n)} found${o}`)}function Wt(n,r){null==n&&function it(n,r,o,a){throw new Error(`ASSERTION ERROR: ${n}`+(null==a?"":` [Expected=> ${o} ${a} ${r} <=Actual]`))}(r,n,null,"!=")}function Yt(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function tn(n){return Cr(n,fr)||Cr(n,Sr)}function Cr(n,r){return n.hasOwnProperty(r)?n[r]:null}function Xn(n){return n&&(n.hasOwnProperty(Bn)||n.hasOwnProperty(Yn))?n[Bn]:null}const fr=Re({\u0275prov:Re}),Bn=Re({\u0275inj:Re}),Sr=Re({ngInjectableDef:Re}),Yn=Re({ngInjectorDef:Re});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let kn;function yn(n){const r=kn;return kn=n,r}function Wi(n,r,o){const a=tn(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:o&Qt.Optional?null:void 0!==r?r:void W(Me(n),"Injector")}function oi(n){return{toString:n}.toString()}var zr=(()=>((zr=zr||{})[zr.OnPush=0]="OnPush",zr[zr.Default=1]="Default",zr))(),Lt=(()=>{return(n=Lt||(Lt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Lt;var n})();const qt="undefined"!=typeof globalThis&&globalThis,an="undefined"!=typeof window&&window,br="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,wn=qt||"undefined"!=typeof global&&global||an||br,pr={},fn=[],Oe=Re({\u0275cmp:Re}),ye=Re({\u0275dir:Re}),He=Re({\u0275pipe:Re}),ke=Re({\u0275mod:Re}),pe=Re({\u0275fac:Re}),qe=Re({__NG_ELEMENT_ID__:Re});let St=0;function $t(n){return oi(()=>{const o={},a={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:o,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===zr.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||fn,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Lt.Emulated,id:"c",styles:n.styles||fn,_:null,setInput:null,schemas:n.schemas||null,tView:null},h=n.directives,y=n.features,I=n.pipes;return a.id+=St++,a.inputs=qr(n.inputs,o),a.outputs=qr(n.outputs),y&&y.forEach(A=>A(a)),a.directiveDefs=h?()=>("function"==typeof h?h():h).map(or):null,a.pipeDefs=I?()=>("function"==typeof I?I():I).map(ar):null,a})}function or(n){return Dr(n)||function Ii(n){return n[ye]||null}(n)}function ar(n){return function ei(n){return n[He]||null}(n)}const hn={};function rr(n){return oi(()=>{const r={type:n.type,bootstrap:n.bootstrap||fn,declarations:n.declarations||fn,imports:n.imports||fn,exports:n.exports||fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(hn[n.id]=n.type),r})}function qr(n,r){if(null==n)return pr;const o={};for(const a in n)if(n.hasOwnProperty(a)){let h=n[a],y=h;Array.isArray(h)&&(y=h[1],h=h[0]),o[h]=a,r&&(r[h]=y)}return o}const wi=$t;function In(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dr(n){return n[Oe]||null}function Br(n,r){const o=n[ke]||null;if(!o&&!0===r)throw new Error(`Type ${Me(n)} does not have '\u0275mod' property.`);return o}function pi(n){return Array.isArray(n)&&"object"==typeof n[1]}function xi(n){return Array.isArray(n)&&!0===n[1]}function Ls(n){return 0!=(8&n.flags)}function rs(n){return 2==(2&n.flags)}function Ci(n){return 1==(1&n.flags)}function is(n){return null!==n.template}function to(n){return 0!=(512&n[2])}function Or(n,r){return n.hasOwnProperty(pe)?n[pe]:null}class Ki{constructor(r,o,a){this.previousValue=r,this.currentValue=o,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ri(){return xs}function xs(n){return n.type.prototype.ngOnChanges&&(n.setInput=Rs),vo}function vo(){const n=bi(this),r=null==n?void 0:n.current;if(r){const o=n.previous;if(o===pr)n.previous=r;else for(let a in r)o[a]=r[a];n.current=null,this.ngOnChanges(r)}}function Rs(n,r,o,a){const h=bi(n)||function no(n,r){return n[ba]=r}(n,{previous:pr,current:null}),y=h.current||(h.current={}),I=h.previous,A=this.declaredInputs[o],O=I[A];y[A]=new Ki(O&&O.currentValue,r,I===pr),n[a]=r}Ri.ngInherit=!0;const ba="__ngSimpleChanges__";function bi(n){return n[ba]||null}let ni;function Es(n){ni=n}function tr(n){return!!n.listen}const U={createRenderer:(n,r)=>function Jr(){return void 0!==ni?ni:"undefined"!=typeof document?document:void 0}()};function V(n){for(;Array.isArray(n);)n=n[0];return n}function et(n,r){return V(r[n])}function mt(n,r){return V(r[n.index])}function Sn(n,r){return n.data[r]}function ir(n,r){return n[r]}function jn(n,r){const o=r[n];return pi(o)?o:o[0]}function cn(n){return 4==(4&n[2])}function Xr(n){return 128==(128&n[2])}function kr(n,r){return null==r?null:n[r]}function Ui(n){n[18]=0}function Hr(n,r){n[5]+=r;let o=n,a=n[3];for(;null!==a&&(1===r&&1===o[5]||-1===r&&0===o[5]);)a[5]+=r,o=a,a=a[3]}const Jt={lFrame:ao(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function H(){return Jt.bindingsEnabled}function E(){return Jt.lFrame.lView}function R(){return Jt.lFrame.tView}function Y(n){return Jt.lFrame.contextLView=n,n[8]}function ae(){let n=Ae();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ae(){return Jt.lFrame.currentTNode}function yt(n,r){const o=Jt.lFrame;o.currentTNode=n,o.isParent=r}function Kt(){return Jt.lFrame.isParent}function Ut(){Jt.lFrame.isParent=!1}function xr(){return Jt.isInCheckNoChangesMode}function Ir(n){Jt.isInCheckNoChangesMode=n}function nr(){const n=Jt.lFrame;let r=n.bindingRootIndex;return-1===r&&(r=n.bindingRootIndex=n.tView.bindingStartIndex),r}function Lr(){return Jt.lFrame.bindingIndex++}function Bi(n,r){const o=Jt.lFrame;o.bindingIndex=o.bindingRootIndex=n,wo(r)}function wo(n){Jt.lFrame.currentDirectiveIndex=n}function No(){return Jt.lFrame.currentQueryIndex}function Io(n){Jt.lFrame.currentQueryIndex=n}function mu(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function Da(n,r,o){if(o&Qt.SkipSelf){let h=r,y=n;for(;!(h=h.parent,null!==h||o&Qt.Host||(h=mu(y),null===h||(y=y[15],10&h.type))););if(null===h)return!1;r=h,n=y}const a=Jt.lFrame=Ta();return a.currentTNode=r,a.lView=n,!0}function oo(n){const r=Ta(),o=n[1];Jt.lFrame=r,r.currentTNode=o.firstChild,r.lView=n,r.tView=o,r.contextLView=n,r.bindingIndex=o.bindingStartIndex,r.inI18n=!1}function Ta(){const n=Jt.lFrame,r=null===n?null:n.child;return null===r?ao(n):r}function ao(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function uo(){const n=Jt.lFrame;return Jt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const nu=uo;function Qo(){const n=uo();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ji(){return Jt.lFrame.selectedIndex}function Po(n){Jt.lFrame.selectedIndex=n}function Zi(){const n=Jt.lFrame;return Sn(n.tView,n.selectedIndex)}function ha(n,r){for(let o=r.directiveStart,a=r.directiveEnd;o<a;o++){const y=n.data[o].type.prototype,{ngAfterContentInit:I,ngAfterContentChecked:A,ngAfterViewInit:O,ngAfterViewChecked:q,ngOnDestroy:J}=y;I&&(n.contentHooks||(n.contentHooks=[])).push(-o,I),A&&((n.contentHooks||(n.contentHooks=[])).push(o,A),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(o,A)),O&&(n.viewHooks||(n.viewHooks=[])).push(-o,O),q&&((n.viewHooks||(n.viewHooks=[])).push(o,q),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(o,q)),null!=J&&(n.destroyHooks||(n.destroyHooks=[])).push(o,J)}}function Vs(n,r,o){Rr(n,r,3,o)}function ws(n,r,o,a){(3&n[2])===o&&Rr(n,r,o,a)}function Ks(n,r){let o=n[2];(3&o)===r&&(o&=2047,o+=1,n[2]=o)}function Rr(n,r,o,a){const y=null!=a?a:-1,I=r.length-1;let A=0;for(let O=void 0!==a?65535&n[18]:0;O<I;O++)if("number"==typeof r[O+1]){if(A=r[O],null!=a&&A>=a)break}else r[O]<0&&(n[18]+=65536),(A<y||-1==y)&&(ju(n,o,r,O),n[18]=(4294901760&n[18])+O+2),O++}function ju(n,r,o,a){const h=o[a]<0,y=o[a+1],A=n[h?-o[a]:o[a]];if(h){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{y.call(A)}finally{}}}else try{y.call(A)}finally{}}class Zs{constructor(r,o,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=a}}function zn(n,r,o){const a=tr(n);let h=0;for(;h<o.length;){const y=o[h];if("number"==typeof y){if(0!==y)break;h++;const I=o[h++],A=o[h++],O=o[h++];a?n.setAttribute(r,A,O,I):r.setAttributeNS(I,A,O)}else{const I=y,A=o[++h];Co(I)?a&&n.setProperty(r,I,A):a?n.setAttribute(r,I,A):r.setAttribute(I,A),h++}}return h}function Qs(n){return 3===n||4===n||6===n}function Co(n){return 64===n.charCodeAt(0)}function Ns(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let o=-1;for(let a=0;a<r.length;a++){const h=r[a];"number"==typeof h?o=h:0===o||vu(n,o,h,null,-1===o||2===o?r[++a]:null)}}return n}function vu(n,r,o,a,h){let y=0,I=n.length;if(-1===r)I=-1;else for(;y<n.length;){const A=n[y++];if("number"==typeof A){if(A===r){I=-1;break}if(A>r){I=y-1;break}}}for(;y<n.length;){const A=n[y];if("number"==typeof A)break;if(A===o){if(null===a)return void(null!==h&&(n[y+1]=h));if(a===n[y+1])return void(n[y+2]=h)}y++,null!==a&&y++,null!==h&&y++}-1!==I&&(n.splice(I,0,r),y=I+1),n.splice(y++,0,o),null!==a&&n.splice(y++,0,a),null!==h&&n.splice(y++,0,h)}function Eu(n){return-1!==n}function Is(n){return 32767&n}function Mr(n,r){let o=function wu(n){return n>>16}(n),a=r;for(;o>0;)a=a[15],o--;return a}let Aa=!0;function Js(n){const r=Aa;return Aa=n,r}let ru=0;function At(n,r){const o=Ho(n,r);if(-1!==o)return o;const a=r[1];a.firstCreatePass&&(n.injectorIndex=r.length,gi(a.data,n),gi(r,null),gi(a.blueprint,null));const h=ta(n,r),y=n.injectorIndex;if(Eu(h)){const I=Is(h),A=Mr(h,r),O=A[1].data;for(let q=0;q<8;q++)r[y+q]=A[I+q]|O[I+q]}return r[y+8]=h,y}function gi(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Ho(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function ta(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let o=0,a=null,h=r;for(;null!==h;){const y=h[1],I=y.type;if(a=2===I?y.declTNode:1===I?h[6]:null,null===a)return-1;if(o++,h=h[15],-1!==a.injectorIndex)return a.injectorIndex|o<<16}return-1}function S(n,r,o){!function dl(n,r,o){let a;"string"==typeof o?a=o.charCodeAt(0)||0:o.hasOwnProperty(qe)&&(a=o[qe]),null==a&&(a=o[qe]=ru++);const h=255&a;r.data[n+(h>>5)]|=1<<h}(n,r,o)}function b(n,r,o){if(o&Qt.Optional)return n;W(r,"NodeInjector")}function N(n,r,o,a){if(o&Qt.Optional&&void 0===a&&(a=null),0==(o&(Qt.Self|Qt.Host))){const h=n[9],y=yn(void 0);try{return h?h.get(r,a,o&Qt.Optional):Wi(r,a,o&Qt.Optional)}finally{yn(y)}}return b(a,r,o)}function P(n,r,o,a=Qt.Default,h){if(null!==n){const y=function dr(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(qe)?n[qe]:void 0;return"number"==typeof r?r>=0?255&r:he:r}(o);if("function"==typeof y){if(!Da(r,n,a))return a&Qt.Host?b(h,o,a):N(r,o,a,h);try{const I=y(a);if(null!=I||a&Qt.Optional)return I;W(o)}finally{nu()}}else if("number"==typeof y){let I=null,A=Ho(n,r),O=-1,q=a&Qt.Host?r[16][6]:null;for((-1===A||a&Qt.SkipSelf)&&(O=-1===A?ta(n,r):r[A+8],-1!==O&&Vr(a,!1)?(I=r[1],A=Is(O),r=Mr(O,r)):A=-1);-1!==A;){const J=r[1];if(dn(y,A,J.data)){const fe=Te(A,r,o,I,a,q);if(fe!==K)return fe}O=r[A+8],-1!==O&&Vr(a,r[1].data[A+8]===q)&&dn(y,A,r)?(I=J,A=Is(O),r=Mr(O,r)):A=-1}}}return N(r,o,a,h)}const K={};function he(){return new mr(ae(),E())}function Te(n,r,o,a,h,y){const I=r[1],A=I.data[n+8],J=ft(A,I,o,null==a?rs(A)&&Aa:a!=I&&0!=(3&A.type),h&Qt.Host&&y===A);return null!==J?Xt(r,I,J,A):K}function ft(n,r,o,a,h){const y=n.providerIndexes,I=r.data,A=1048575&y,O=n.directiveStart,J=y>>20,Pe=h?A+J:n.directiveEnd;for(let Ye=a?A:A+J;Ye<Pe;Ye++){const _t=I[Ye];if(Ye<O&&o===_t||Ye>=O&&_t.type===o)return Ye}if(h){const Ye=I[O];if(Ye&&is(Ye)&&Ye.type===o)return O}return null}function Xt(n,r,o,a){let h=n[o];const y=r.data;if(function Sa(n){return n instanceof Zs}(h)){const I=h;I.resolving&&function xe(n,r){const o=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new Xe(-200,`Circular dependency in DI detected for ${n}${o}`)}(pt(y[o]));const A=Js(I.canSeeViewProviders);I.resolving=!0;const O=I.injectImpl?yn(I.injectImpl):null;Da(n,a,Qt.Default);try{h=n[o]=I.factory(void 0,y,n,a),r.firstCreatePass&&o>=a.directiveStart&&function yu(n,r,o){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:y}=r.type.prototype;if(a){const I=xs(r);(o.preOrderHooks||(o.preOrderHooks=[])).push(n,I),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,I)}h&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-n,h),y&&((o.preOrderHooks||(o.preOrderHooks=[])).push(n,y),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(n,y))}(o,y[o],r)}finally{null!==O&&yn(O),Js(A),I.resolving=!1,nu()}}return h}function dn(n,r,o){return!!(o[r+(n>>5)]&1<<n)}function Vr(n,r){return!(n&Qt.Self||n&Qt.Host&&r)}class mr{constructor(r,o){this._tNode=r,this._lView=o}get(r,o,a){return P(this._tNode,this._lView,r,a,o)}}function Xs(n){return oi(()=>{const r=n.prototype.constructor,o=r[pe]||ko(r),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const y=h[pe]||ko(h);if(y&&y!==o)return y;h=Object.getPrototypeOf(h)}return y=>new y})}function ko(n){return Tt(n)?()=>{const r=ko(Ne(n));return r&&r()}:Or(n)}function xa(n){return function D(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const o=n.attrs;if(o){const a=o.length;let h=0;for(;h<a;){const y=o[h];if(Qs(y))break;if(0===y)h+=2;else if("number"==typeof y)for(h++;h<a&&"string"==typeof o[h];)h++;else{if(y===r)return o[h+1];h+=2}}}return null}(ae(),n)}const Rn="__parameters__";function Fn(n,r,o){return oi(()=>{const a=function mi(n){return function(...o){if(n){const a=n(...o);for(const h in a)this[h]=a[h]}}}(r);function h(...y){if(this instanceof h)return a.apply(this,y),this;const I=new h(...y);return A.annotation=I,A;function A(O,q,J){const fe=O.hasOwnProperty(Rn)?O[Rn]:Object.defineProperty(O,Rn,{value:[]})[Rn];for(;fe.length<=J;)fe.push(null);return(fe[J]=fe[J]||[]).push(I),O}}return o&&(h.prototype=Object.create(o.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}class Ni{constructor(r,o){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Yt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xi=new Ni("AnalyzeForEntryComponents");function co(n,r){void 0===r&&(r=n);for(let o=0;o<n.length;o++){let a=n[o];Array.isArray(a)?(r===n&&(r=n.slice(0,o)),co(a,r)):r!==n&&r.push(a)}return r}function Je(n,r){n.forEach(o=>Array.isArray(o)?Je(o,r):r(o))}function ja(n,r,o){r>=n.length?n.push(o):n.splice(r,0,o)}function Us(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function pa(n,r){const o=[];for(let a=0;a<n;a++)o.push(r);return o}function Go(n,r,o){let a=fs(n,r);return a>=0?n[1|a]=o:(a=~a,function Ma(n,r,o,a){let h=n.length;if(h==r)n.push(o,a);else if(1===h)n.push(a,n[0]),n[0]=o;else{for(h--,n.push(n[h-1],n[h]);h>r;)n[h]=n[h-2],h--;n[r]=o,n[r+1]=a}}(n,a,r,o)),a}function pl(n,r){const o=fs(n,r);if(o>=0)return n[1|o]}function fs(n,r){return function Na(n,r,o){let a=0,h=n.length>>o;for(;h!==a;){const y=a+(h-a>>1),I=n[y<<o];if(r===I)return y<<o;I>r?h=y:a=y+1}return~(h<<o)}(n,r,1)}const $i={},Wo="__NG_DI_FLAG__",Bs="ngTempTokenPath",F=/\n/gm,X="__source",me=Re({provide:String,useValue:Re});let $e;function nt(n){const r=$e;return $e=n,r}function bt(n,r=Qt.Default){if(void 0===$e)throw new Xe(203,"");return null===$e?Wi(n,void 0,r):$e.get(n,r&Qt.Optional?null:void 0,r)}function Pt(n,r=Qt.Default){return(function rn(){return kn}()||bt)(Ne(n),r)}const Hn=Pt;function Kn(n){const r=[];for(let o=0;o<n.length;o++){const a=Ne(n[o]);if(Array.isArray(a)){if(0===a.length)throw new Xe(900,"");let h,y=Qt.Default;for(let I=0;I<a.length;I++){const A=a[I],O=yi(A);"number"==typeof O?-1===O?h=A.token:y|=O:h=A}r.push(Pt(h,y))}else r.push(Pt(a))}return r}function Cn(n,r){return n[Wo]=r,n.prototype[Wo]=r,n}function yi(n){return n[Wo]}const ho=Cn(Fn("Inject",n=>({token:n})),-1),Cs=Cn(Fn("Optional"),8),$s=Cn(Fn("SkipSelf"),4);class ac{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function va(n){return n instanceof ac?n.changingThisBreaksApplicationSecurity:n}const oa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,dh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Hi=(()=>((Hi=Hi||{})[Hi.NONE=0]="NONE",Hi[Hi.HTML=1]="HTML",Hi[Hi.STYLE=2]="STYLE",Hi[Hi.SCRIPT=3]="SCRIPT",Hi[Hi.URL=4]="URL",Hi[Hi.RESOURCE_URL=5]="RESOURCE_URL",Hi))();function Qu(n){const r=function Xu(){const n=E();return n&&n[12]}();return r?r.sanitize(Hi.URL,n)||"":function Tu(n,r){const o=function qc(n){return n instanceof ac&&n.getTypeName()||null}(n);if(null!=o&&o!==r){if("ResourceURL"===o&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${o} (see https://g.co/ng/security#xss)`)}return o===r}(n,"URL")?va(n):function aa(n){return(n=String(n)).match(oa)||n.match(dh)?n:"unsafe:"+n}(tt(n))}const Hl="__ngContext__";function Os(n,r){n[Hl]=r}function Gl(n){const r=function Uo(n){return n[Hl]||null}(n);return r?Array.isArray(r)?r:r.lView:null}function So(n){return n.ngOriginalError}function yc(n,...r){n.error(...r)}class Wl{constructor(){this._console=console}handleError(r){const o=this._findOriginalError(r),a=function Il(n){return n&&n.ngErrorLogger||yc}(r);a(this._console,"ERROR",r),o&&a(this._console,"ORIGINAL ERROR",o)}_findOriginalError(r){let o=r&&So(r);for(;o&&So(o);)o=So(o);return o||null}}const Fa=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(wn))();function ks(n){return n instanceof Function?n():n}var z=(()=>((z=z||{})[z.Important=1]="Important",z[z.DashCase=2]="DashCase",z))();function Le(n,r){return undefined(n,r)}function sn(n){const r=n[3];return xi(r)?r[3]:r}function gs(n){return zl(n[13])}function zo(n){return zl(n[4])}function zl(n){for(;null!==n&&!xi(n);)n=n[4];return n}function Pu(n,r,o,a,h){if(null!=a){let y,I=!1;xi(a)?y=a:pi(a)&&(I=!0,a=a[0]);const A=V(a);0===n&&null!==o?null==h?rf(r,o,A):ql(r,o,A,h||null,!0):1===n&&null!==o?ql(r,o,A,h||null,!0):2===n?function lf(n,r,o){const a=kd(n,r);a&&function _p(n,r,o,a){tr(n)?n.removeChild(r,o,a):r.removeChild(o)}(n,a,r,o)}(r,A,I):3===n&&r.destroyNode(A),null!=y&&function mh(n,r,o,a,h){const y=o[7];y!==V(o)&&Pu(r,n,a,y,h);for(let A=10;A<o.length;A++){const O=o[A];Ur(O[1],O,n,r,a,y)}}(r,n,y,o,h)}}function Kl(n,r,o){if(tr(n))return n.createElement(r,o);{const a=null!==o?function Ms(n){const r=n.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(o):null;return null===a?n.createElement(r):n.createElementNS(a,r)}}function Qa(n,r){const o=n[9],a=o.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,Hr(h,-1)),o.splice(a,1)}function Od(n,r){if(n.length<=10)return;const o=10+r,a=n[o];if(a){const h=a[17];null!==h&&h!==n&&Qa(h,a),r>0&&(n[o-1][4]=a[4]);const y=Us(n,10+r);!function Nd(n,r){Ur(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const I=y[19];null!==I&&I.detachView(y[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function id(n,r){if(!(256&r[2])){const o=r[11];tr(o)&&o.destroyNode&&Ur(n,r,o,3,null,null),function Bo(n){let r=n[13];if(!r)return fh(n[1],n);for(;r;){let o=null;if(pi(r))o=r[13];else{const a=r[10];a&&(o=a)}if(!o){for(;r&&!r[4]&&r!==n;)pi(r)&&fh(r[1],r),r=r[3];null===r&&(r=n),pi(r)&&fh(r[1],r),o=r&&r[4]}r=o}}(r)}}function fh(n,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function yp(n,r){let o;if(null!=n&&null!=(o=n.destroyHooks))for(let a=0;a<o.length;a+=2){const h=r[o[a]];if(!(h instanceof Zs)){const y=o[a+1];if(Array.isArray(y))for(let I=0;I<y.length;I+=2){const A=h[y[I]],O=y[I+1];try{O.call(A)}finally{}}else try{y.call(h)}finally{}}}}(n,r),function mp(n,r){const o=n.cleanup,a=r[7];let h=-1;if(null!==o)for(let y=0;y<o.length-1;y+=2)if("string"==typeof o[y]){const I=o[y+1],A="function"==typeof I?I(r):V(r[I]),O=a[h=o[y+2]],q=o[y+3];"boolean"==typeof q?A.removeEventListener(o[y],O,q):q>=0?a[h=q]():a[h=-q].unsubscribe(),y+=2}else{const I=a[h=o[y+1]];o[y].call(I)}if(null!==a){for(let y=h+1;y<a.length;y++)a[y]();r[7]=null}}(n,r),1===r[1].type&&tr(r[11])&&r[11].destroy();const o=r[17];if(null!==o&&xi(r[3])){o!==r[3]&&Qa(o,r);const a=r[19];null!==a&&a.detachView(n)}}}function tf(n,r,o){return function nf(n,r,o){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return o[0];if(2&a.flags){const h=n.data[a.directiveStart].encapsulation;if(h===Lt.None||h===Lt.Emulated)return null}return mt(a,o)}(n,r.parent,o)}function ql(n,r,o,a,h){tr(n)?n.insertBefore(r,o,a,h):r.insertBefore(o,a,h)}function rf(n,r,o){tr(n)?n.appendChild(r,o):r.appendChild(o)}function sf(n,r,o,a,h){null!==a?ql(n,r,o,a,h):rf(n,r,o)}function kd(n,r){return tr(n)?n.parentNode(r):r.parentNode}function Ep(n,r,o){return af(n,r,o)}let af=function wp(n,r,o){return 40&n.type?mt(n,o):null};function Ec(n,r,o,a){const h=tf(n,a,r),y=r[11],A=Ep(a.parent||r[6],a,r);if(null!=h)if(Array.isArray(o))for(let O=0;O<o.length;O++)sf(y,h,o[O],A,!1);else sf(y,h,o,A,!1)}function Fd(n,r){if(null!==r){const o=r.type;if(3&o)return mt(r,n);if(4&o)return Ld(-1,n[r.index]);if(8&o){const a=r.child;if(null!==a)return Fd(n,a);{const h=n[r.index];return xi(h)?Ld(-1,h):V(h)}}if(32&o)return Le(r,n)()||V(n[r.index]);{const a=gh(n,r);return null!==a?Array.isArray(a)?a[0]:Fd(sn(n[16]),a):Fd(n,r.next)}}return null}function gh(n,r){return null!==r?n[16][6].projection[r.projection]:null}function Ld(n,r){const o=10+n+1;if(o<r.length){const a=r[o],h=a[1].firstChild;if(null!==h)return Fd(a,h)}return r[7]}function Ja(n,r,o,a,h,y,I){for(;null!=o;){const A=a[o.index],O=o.type;if(I&&0===r&&(A&&Os(V(A),a),o.flags|=4),64!=(64&o.flags))if(8&O)Ja(n,r,o.child,a,h,y,!1),Pu(r,n,h,A,y);else if(32&O){const q=Le(o,a);let J;for(;J=q();)Pu(r,n,h,J,y);Pu(r,n,h,A,y)}else 16&O?Tl(n,r,a,o,h,y):Pu(r,n,h,A,y);o=I?o.projectionNext:o.next}}function Ur(n,r,o,a,h,y){Ja(o,a,n.firstChild,r,h,y,!1)}function Tl(n,r,o,a,h,y){const I=o[16],O=I[6].projection[a.projection];if(Array.isArray(O))for(let q=0;q<O.length;q++)Pu(r,n,h,O[q],y);else Ja(n,r,O,I[3],h,y,!0)}function yh(n,r,o){tr(n)?n.setAttribute(r,"style",o):r.style.cssText=o}function _h(n,r,o){tr(n)?""===o?n.removeAttribute(r,"class"):n.setAttribute(r,"class",o):r.className=o}function ku(n,r,o){let a=n.length;for(;;){const h=n.indexOf(r,o);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const y=r.length;if(h+y===a||n.charCodeAt(h+y)<=32)return h}o=h+1}}const Al="ng-template";function Zl(n,r,o){let a=0;for(;a<n.length;){let h=n[a++];if(o&&"class"===h){if(h=n[a],-1!==ku(h.toLowerCase(),r,0))return!0}else if(1===h){for(;a<n.length&&"string"==typeof(h=n[a++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function xl(n){return 4===n.type&&n.value!==Al}function wc(n,r,o){return r===(4!==n.type||o?n.value:Al)}function Eh(n,r,o){let a=4;const h=n.attrs||[],y=function df(n){for(let r=0;r<n.length;r++)if(Qs(n[r]))return r;return n.length}(h);let I=!1;for(let A=0;A<r.length;A++){const O=r[A];if("number"!=typeof O){if(!I)if(4&a){if(a=2|1&a,""!==O&&!wc(n,O,o)||""===O&&1===r.length){if(wa(a))return!1;I=!0}}else{const q=8&a?O:r[++A];if(8&a&&null!==n.attrs){if(!Zl(n.attrs,q,o)){if(wa(a))return!1;I=!0}continue}const fe=Vd(8&a?"class":O,h,xl(n),o);if(-1===fe){if(wa(a))return!1;I=!0;continue}if(""!==q){let Pe;Pe=fe>y?"":h[fe+1].toLowerCase();const Ye=8&a?Pe:null;if(Ye&&-1!==ku(Ye,q,0)||2&a&&q!==Pe){if(wa(a))return!1;I=!0}}}}else{if(!I&&!wa(a)&&!wa(O))return!1;if(I&&wa(O))continue;I=!1,a=O|1&a}}return wa(a)||I}function wa(n){return 0==(1&n)}function Vd(n,r,o,a){if(null===r)return-1;let h=0;if(a||!o){let y=!1;for(;h<r.length;){const I=r[h];if(I===n)return h;if(3===I||6===I)y=!0;else{if(1===I||2===I){let A=r[++h];for(;"string"==typeof A;)A=r[++h];continue}if(4===I)break;if(0===I){h+=4;continue}}h+=y?1:2}return-1}return function hf(n,r){let o=n.indexOf(4);if(o>-1)for(o++;o<n.length;){const a=n[o];if("number"==typeof a)return-1;if(a===r)return o;o++}return-1}(r,n)}function Yl(n,r,o=!1){for(let a=0;a<r.length;a++)if(Eh(n,r[a],o))return!0;return!1}function ff(n,r){e:for(let o=0;o<r.length;o++){const a=r[o];if(n.length===a.length){for(let h=0;h<n.length;h++)if(n[h]!==a[h])continue e;return!0}}return!1}function Ic(n,r){return n?":not("+r.trim()+")":r}function Cc(n){let r=n[0],o=1,a=2,h="",y=!1;for(;o<n.length;){let I=n[o];if("string"==typeof I)if(2&a){const A=n[++o];h+="["+I+(A.length>0?'="'+A+'"':"")+"]"}else 8&a?h+="."+I:4&a&&(h+=" "+I);else""!==h&&!wa(I)&&(r+=Ic(y,h),h=""),a=I,y=y||!wa(a);o++}return""!==h&&(r+=Ic(y,h)),r}const hr={};function pf(n){wh(R(),E(),ji()+n,xr())}function wh(n,r,o,a){if(!a)if(3==(3&r[2])){const y=n.preOrderCheckHooks;null!==y&&Vs(r,y,o)}else{const y=n.preOrderHooks;null!==y&&ws(r,y,0,o)}Po(o)}function Ml(n,r){return n<<17|r<<2}function Ao(n){return n>>17&32767}function Ih(n){return 2|n}function Fu(n){return(131068&n)>>2}function sd(n,r){return-131069&n|r<<2}function u(n){return 1|n}function Ap(n,r){const o=n.contentQueries;if(null!==o)for(let a=0;a<o.length;a+=2){const h=o[a],y=o[a+1];if(-1!==y){const I=n.data[y];Io(h),I.contentQueries(2,r[y],y)}}}function Ch(n,r,o,a,h,y,I,A,O,q){const J=r.blueprint.slice();return J[0]=h,J[2]=140|a,Ui(J),J[3]=J[15]=n,J[8]=o,J[10]=I||n&&n[10],J[11]=A||n&&n[11],J[12]=O||n&&n[12]||null,J[9]=q||n&&n[9]||null,J[6]=y,J[16]=2==r.type?n[16]:J,J}function od(n,r,o,a,h){let y=n.data[r];if(null===y)y=function bh(n,r,o,a,h){const y=Ae(),I=Kt(),O=n.data[r]=function jd(n,r,o,a,h,y){return{type:o,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:y,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?y:y&&y.parent,o,r,a,h);return null===n.firstChild&&(n.firstChild=O),null!==y&&(I?null==y.child&&null!==O.parent&&(y.child=O):null===y.next&&(y.next=O)),O}(n,r,o,a,h),function zs(){return Jt.lFrame.inI18n}()&&(y.flags|=64);else if(64&y.type){y.type=o,y.value=a,y.attrs=h;const I=function Ke(){const n=Jt.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();y.injectorIndex=null===I?-1:I.injectorIndex}return yt(y,!0),y}function bc(n,r,o,a){if(0===o)return-1;const h=r.length;for(let y=0;y<o;y++)r.push(a),n.blueprint.push(a),n.data.push(null);return h}function Jl(n,r,o){oo(r);try{const a=n.viewQuery;null!==a&&Ah(1,a,o);const h=n.template;null!==h&&Ef(n,r,h,1,o),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Ap(n,r),n.staticViewQueries&&Ah(2,n.viewQuery,o);const y=n.components;null!==y&&function vf(n,r){for(let o=0;o<r.length;o++)o_(n,r[o])}(r,y)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{r[2]&=-5,Qo()}}function Xl(n,r,o,a){const h=r[2];if(256==(256&h))return;oo(r);const y=xr();try{Ui(r),function Mi(n){return Jt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==o&&Ef(n,r,o,2,a);const I=3==(3&h);if(!y)if(I){const q=n.preOrderCheckHooks;null!==q&&Vs(r,q,null)}else{const q=n.preOrderHooks;null!==q&&ws(r,q,0,null),Ks(r,0)}if(function i_(n){for(let r=gs(n);null!==r;r=zo(r)){if(!r[2])continue;const o=r[9];for(let a=0;a<o.length;a++){const h=o[a],y=h[3];0==(1024&h[2])&&Hr(y,1),h[2]|=1024}}}(r),function r_(n){for(let r=gs(n);null!==r;r=zo(r))for(let o=10;o<r.length;o++){const a=r[o],h=a[1];Xr(a)&&Xl(h,a,h.template,a[8])}}(r),null!==n.contentQueries&&Ap(n,r),!y)if(I){const q=n.contentCheckHooks;null!==q&&Vs(r,q)}else{const q=n.contentHooks;null!==q&&ws(r,q,1),Ks(r,1)}!function Jy(n,r){const o=n.hostBindingOpCodes;if(null!==o)try{for(let a=0;a<o.length;a++){const h=o[a];if(h<0)Po(~h);else{const y=h,I=o[++a],A=o[++a];Bi(I,y),A(2,r[y])}}}finally{Po(-1)}}(n,r);const A=n.components;null!==A&&function Xy(n,r){for(let o=0;o<r.length;o++)s_(n,r[o])}(r,A);const O=n.viewQuery;if(null!==O&&Ah(2,O,a),!y)if(I){const q=n.viewCheckHooks;null!==q&&Vs(r,q)}else{const q=n.viewHooks;null!==q&&ws(r,q,2),Ks(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),y||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Hr(r[3],-1))}finally{Qo()}}function xp(n,r,o,a){const h=r[10],y=!xr(),I=cn(r);try{y&&!I&&h.begin&&h.begin(),I&&Jl(n,r,a),Xl(n,r,o,a)}finally{y&&!I&&h.end&&h.end()}}function Ef(n,r,o,a,h){const y=ji(),I=2&a;try{Po(-1),I&&r.length>20&&wh(n,r,20,xr()),o(a,h)}finally{Po(y)}}function Mp(n,r,o){!H()||(function Dh(n,r,o,a){const h=o.directiveStart,y=o.directiveEnd;n.firstCreatePass||At(o,r),Os(a,r);const I=o.initialInputs;for(let A=h;A<y;A++){const O=n.data[A],q=is(O);q&&n_(r,o,O);const J=Xt(r,n,A,o);Os(J,r),null!==I&&Rf(0,A-h,J,O,0,I),q&&(jn(o.index,r)[8]=J)}}(n,r,o,mt(o,r)),128==(128&o.flags)&&function Tf(n,r,o){const a=o.directiveStart,h=o.directiveEnd,I=o.index,A=function so(){return Jt.lFrame.currentDirectiveIndex}();try{Po(I);for(let O=a;O<h;O++){const q=n.data[O],J=r[O];wo(O),(null!==q.hostBindings||0!==q.hostVars||null!==q.hostAttrs)&&Sf(q,J)}}finally{Po(-1),wo(A)}}(n,r,o))}function wf(n,r,o=mt){const a=r.localNames;if(null!==a){let h=r.index+1;for(let y=0;y<a.length;y+=2){const I=a[y+1],A=-1===I?o(r,n):n[I];n[h++]=A}}}function Np(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=Bd(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function Bd(n,r,o,a,h,y,I,A,O,q){const J=20+a,fe=J+h,Pe=function e_(n,r){const o=[];for(let a=0;a<r;a++)o.push(a<n?null:hr);return o}(J,fe),Ye="function"==typeof q?q():q;return Pe[1]={type:n,blueprint:Pe,template:o,queries:null,viewQuery:A,declTNode:r,data:Pe.slice().fill(null,J),bindingStartIndex:J,expandoStartIndex:fe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof y?y():y,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:O,consts:Ye,incompleteFirstPass:!1}}function sm(n,r,o,a){const h=ym(r);null===o?h.push(a):(h.push(o),n.firstCreatePass&&Nf(n).push(a,h.length-1))}function ad(n,r,o){for(let a in n)if(n.hasOwnProperty(a)){const h=n[a];(o=null===o?{}:o).hasOwnProperty(a)?o[a].push(r,h):o[a]=[r,h]}return o}function Cf(n,r,o,a){let h=!1;if(H()){const y=function Fp(n,r,o){const a=n.directiveRegistry;let h=null;if(a)for(let y=0;y<a.length;y++){const I=a[y];Yl(o,I.selectors,!1)&&(h||(h=[]),S(At(o,r),n,I.type),is(I)?(Af(n,o),h.unshift(I)):h.push(I))}return h}(n,r,o),I=null===a?null:{"":-1};if(null!==y){h=!0,Lp(o,n.data.length,y.length);for(let J=0;J<y.length;J++){const fe=y[J];fe.providersResolver&&fe.providersResolver(fe)}let A=!1,O=!1,q=bc(n,r,y.length,null);for(let J=0;J<y.length;J++){const fe=y[J];o.mergedAttrs=Ns(o.mergedAttrs,fe.hostAttrs),fm(n,o,r,q,fe),t_(q,fe,I),null!==fe.contentQueries&&(o.flags|=8),(null!==fe.hostBindings||null!==fe.hostAttrs||0!==fe.hostVars)&&(o.flags|=128);const Pe=fe.type.prototype;!A&&(Pe.ngOnChanges||Pe.ngOnInit||Pe.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(o.index),A=!0),!O&&(Pe.ngOnChanges||Pe.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(o.index),O=!0),q++}!function kp(n,r){const a=r.directiveEnd,h=n.data,y=r.attrs,I=[];let A=null,O=null;for(let q=r.directiveStart;q<a;q++){const J=h[q],fe=J.inputs,Pe=null===y||xl(r)?null:Th(fe,y);I.push(Pe),A=ad(fe,q,A),O=ad(J.outputs,q,O)}null!==A&&(A.hasOwnProperty("class")&&(r.flags|=16),A.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=I,r.inputs=A,r.outputs=O}(n,o)}I&&function hm(n,r,o){if(r){const a=n.localNames=[];for(let h=0;h<r.length;h+=2){const y=o[r[h+1]];if(null==y)throw new Xe(-301,!1);a.push(r[h],y)}}}(o,a,I)}return o.mergedAttrs=Ns(o.mergedAttrs,o.attrs),h}function bf(n,r,o,a,h,y){const I=y.hostBindings;if(I){let A=n.hostBindingOpCodes;null===A&&(A=n.hostBindingOpCodes=[]);const O=~r.index;(function Df(n){let r=n.length;for(;r>0;){const o=n[--r];if("number"==typeof o&&o<0)return o}return 0})(A)!=O&&A.push(O),A.push(a,h,I)}}function Sf(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Af(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function t_(n,r,o){if(o){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)o[r.exportAs[a]]=n;is(r)&&(o[""]=n)}}function Lp(n,r,o){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+o,n.providerIndexes=r}function fm(n,r,o,a,h){n.data[a]=h;const y=h.factory||(h.factory=Or(h.type)),I=new Zs(y,is(h),null);n.blueprint[a]=I,o[a]=I,bf(n,r,0,a,bc(n,o,h.hostVars,hr),h)}function n_(n,r,o){const a=mt(r,n),h=Np(o),y=n[10],I=$d(n,Ch(n,h,null,o.onPush?64:16,a,r,y,y.createRenderer(a,o),null,null));n[r.index]=I}function Ol(n,r,o,a,h,y){const I=mt(n,r);!function xf(n,r,o,a,h,y,I){if(null==y)tr(n)?n.removeAttribute(r,h,o):r.removeAttribute(h);else{const A=null==I?tt(y):I(y,a||"",h);tr(n)?n.setAttribute(r,h,A,o):o?r.setAttributeNS(o,h,A):r.setAttribute(h,A)}}(r[11],I,y,n.value,o,a,h)}function Rf(n,r,o,a,h,y){const I=y[r];if(null!==I){const A=a.setInput;for(let O=0;O<I.length;){const q=I[O++],J=I[O++],fe=I[O++];null!==A?a.setInput(o,fe,q,J):o[J]=fe}}}function Th(n,r){let o=null,a=0;for(;a<r.length;){const h=r[a];if(0!==h)if(5!==h){if("number"==typeof h)break;n.hasOwnProperty(h)&&(null===o&&(o=[]),o.push(h,n[h],r[a+1])),a+=2}else a+=2;else a+=4}return o}function Vp(n,r,o,a){return new Array(n,!0,!1,r,null,0,a,o,null,null)}function s_(n,r){const o=jn(r,n);if(Xr(o)){const a=o[1];80&o[2]?Xl(a,o,a.template,o[8]):o[5]>0&&Up(o)}}function Up(n){for(let a=gs(n);null!==a;a=zo(a))for(let h=10;h<a.length;h++){const y=a[h];if(1024&y[2]){const I=y[1];Xl(I,y,I.template,y[8])}else y[5]>0&&Up(y)}const o=n[1].components;if(null!==o)for(let a=0;a<o.length;a++){const h=jn(o[a],n);Xr(h)&&h[5]>0&&Up(h)}}function o_(n,r){const o=jn(r,n),a=o[1];(function Sh(n,r){for(let o=r.length;o<n.blueprint.length;o++)r.push(n.blueprint[o])})(a,o),Jl(a,o,o[8])}function $d(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function Dc(n){for(;n;){n[2]|=64;const r=sn(n);if(to(n)&&!r)return n;n=r}return null}function ud(n,r,o){const a=r[10];a.begin&&a.begin();try{Xl(n,r,n.template,o)}catch(h){throw Pf(r,h),h}finally{a.end&&a.end()}}function Mf(n){!function Hd(n){for(let r=0;r<n.components.length;r++){const o=n.components[r],a=Gl(o),h=a[1];xp(h,a,h.template,o)}}(n[8])}function Ah(n,r,o){Io(0),r(n,o)}const mm=(()=>Promise.resolve(null))();function ym(n){return n[7]||(n[7]=[])}function Nf(n){return n.cleanup||(n.cleanup=[])}function Pf(n,r){const o=n[9],a=o?o.get(Wl,null):null;a&&a.handleError(r)}function vm(n,r,o,a,h){for(let y=0;y<o.length;){const I=o[y++],A=o[y++],O=r[I],q=n.data[I];null!==q.setInput?q.setInput(O,h,a,A):O[A]=h}}function il(n,r,o){const a=et(r,n);!function Ou(n,r,o){tr(n)?n.setValue(r,o):r.textContent=o}(n[11],a,o)}function cd(n,r,o){let a=o?n.styles:null,h=o?n.classes:null,y=0;if(null!==r)for(let I=0;I<r.length;I++){const A=r[I];"number"==typeof A?y=A:1==y?h=Ue(h,A):2==y&&(a=Ue(a,A+": "+r[++I]+";"))}o?n.styles=a:n.stylesWithoutHost=a,o?n.classes=h:n.classesWithoutHost=h}const Rh=new Ni("INJECTOR",-1);class wm{get(r,o=$i){if(o===$i){const a=new Error(`NullInjectorError: No provider for ${Me(r)}!`);throw a.name="NullInjectorError",a}return o}}const Hp=new Ni("Set Injector scope."),Gd={},Im={};let Gp;function Of(){return void 0===Gp&&(Gp=new wm),Gp}function Cm(n,r=null,o=null,a){const h=kf(n,r,o,a);return h._resolveInjectorDefTypes(),h}function kf(n,r=null,o=null,a){return new a_(n,o,r||Of(),a)}class a_{constructor(r,o,a,h=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const y=[];o&&Je(o,A=>this.processProvider(A,r,o)),Je([r],A=>this.processInjectorType(A,[],y)),this.records.set(Rh,Tc(void 0,this));const I=this.records.get(Hp);this.scope=null!=I?I.value:null,this.source=h||("object"==typeof r?null:Me(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,o=$i,a=Qt.Default){this.assertNotDestroyed();const h=nt(this),y=yn(void 0);try{if(!(a&Qt.SkipSelf)){let A=this.records.get(r);if(void 0===A){const O=function bm(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ni}(r)&&tn(r);A=O&&this.injectableDefInScope(O)?Tc(Mh(r),Gd):null,this.records.set(r,A)}if(null!=A)return this.hydrate(r,A)}return(a&Qt.Self?Of():this.parent).get(r,o=a&Qt.Optional&&o===$i?null:o)}catch(I){if("NullInjectorError"===I.name){if((I[Bs]=I[Bs]||[]).unshift(Me(r)),h)throw I;return function Ps(n,r,o,a){const h=n[Bs];throw r[X]&&h.unshift(r[X]),n.message=function js(n,r,o,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let h=Me(r);if(Array.isArray(r))h=r.map(Me).join(" -> ");else if("object"==typeof r){let y=[];for(let I in r)if(r.hasOwnProperty(I)){let A=r[I];y.push(I+":"+("string"==typeof A?JSON.stringify(A):Me(A)))}h=`{${y.join(", ")}}`}return`${o}${a?"("+a+")":""}[${h}]: ${n.replace(F,"\n  ")}`}("\n"+n.message,h,o,a),n.ngTokenPath=h,n[Bs]=null,n}(I,r,"R3InjectorError",this.source)}throw I}finally{yn(y),nt(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,h)=>r.push(Me(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Xe(205,!1)}processInjectorType(r,o,a){if(!(r=Ne(r)))return!1;let h=Xn(r);const y=null==h&&r.ngModule||void 0,I=void 0===y?r:y,A=-1!==a.indexOf(I);if(void 0!==y&&(h=Xn(y)),null==h)return!1;if(null!=h.imports&&!A){let J;a.push(I);try{Je(h.imports,fe=>{this.processInjectorType(fe,o,a)&&(void 0===J&&(J=[]),J.push(fe))})}finally{}if(void 0!==J)for(let fe=0;fe<J.length;fe++){const{ngModule:Pe,providers:Ye}=J[fe];Je(Ye,_t=>this.processProvider(_t,Pe,Ye||fn))}}this.injectorDefTypes.add(I);const O=Or(I)||(()=>new I);this.records.set(I,Tc(O,Gd));const q=h.providers;if(null!=q&&!A){const J=r;Je(q,fe=>this.processProvider(fe,J,q))}return void 0!==y&&void 0!==r.providers}processProvider(r,o,a){let h=hu(r=Ne(r))?r:Ne(r&&r.provide);const y=function Wp(n,r,o){return Ff(n)?Tc(void 0,n.useValue):Tc(zp(n),Gd)}(r);if(hu(r)||!0!==r.multi)this.records.get(h);else{let I=this.records.get(h);I||(I=Tc(void 0,Gd,!0),I.factory=()=>Kn(I.multi),this.records.set(h,I)),h=r,I.multi.push(r)}this.records.set(h,y)}hydrate(r,o){return o.value===Gd&&(o.value=Im,o.value=o.factory()),"object"==typeof o.value&&o.value&&function Kd(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(o.value)&&this.onDestroy.add(o.value),o.value}injectableDefInScope(r){if(!r.providedIn)return!1;const o=Ne(r.providedIn);return"string"==typeof o?"any"===o||o===this.scope:this.injectorDefTypes.has(o)}}function Mh(n){const r=tn(n),o=null!==r?r.factory:Or(n);if(null!==o)return o;if(n instanceof Ni)throw new Xe(204,!1);if(n instanceof Function)return function u_(n){const r=n.length;if(r>0)throw pa(r,"?"),new Xe(204,!1);const o=function sr(n){const r=n&&(n[fr]||n[Sr]);if(r){const o=function Pr(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),r}return null}(n);return null!==o?()=>o.factory(n):()=>new n}(n);throw new Xe(204,!1)}function zp(n,r,o){let a;if(hu(n)){const h=Ne(n);return Or(h)||Mh(h)}if(Ff(n))a=()=>Ne(n.useValue);else if(function Wd(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Kn(n.deps||[]));else if(function Kp(n){return!(!n||!n.useExisting)}(n))a=()=>Pt(Ne(n.useExisting));else{const h=Ne(n&&(n.useClass||n.provide));if(!function zd(n){return!!n.deps}(n))return Or(h)||Mh(h);a=()=>new h(...Kn(n.deps))}return a}function Tc(n,r,o=!1){return{factory:n,value:r,multi:o?[]:void 0}}function Ff(n){return null!==n&&"object"==typeof n&&me in n}function hu(n){return"function"==typeof n}let Ia=(()=>{class n{static create(o,a){var h;if(Array.isArray(o))return Cm({name:""},a,o,"");{const y=null!==(h=o.name)&&void 0!==h?h:"";return Cm({name:y},o.parent,o.providers,y)}}}return n.THROW_IF_NOT_FOUND=$i,n.NULL=new wm,n.\u0275prov=Yt({token:n,providedIn:"any",factory:()=>Pt(Rh)}),n.__NG_ELEMENT_ID__=-1,n})();function Xp(n,r){ha(Gl(n)[1],ae())}function Gf(n){let r=function Hf(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),o=!0;const a=[n];for(;r;){let h;if(is(n))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Xe(903,"");h=r.\u0275dir}if(h){if(o){a.push(h);const I=n;I.inputs=Nh(n.inputs),I.declaredInputs=Nh(n.declaredInputs),I.outputs=Nh(n.outputs);const A=h.hostBindings;A&&__(n,A);const O=h.viewQuery,q=h.contentQueries;if(O&&y_(n,O),q&&eg(n,q),Ve(n.inputs,h.inputs),Ve(n.declaredInputs,h.declaredInputs),Ve(n.outputs,h.outputs),is(h)&&h.data.animation){const J=n.data;J.animation=(J.animation||[]).concat(h.data.animation)}}const y=h.features;if(y)for(let I=0;I<y.length;I++){const A=y[I];A&&A.ngInherit&&A(n),A===Gf&&(o=!1)}}r=Object.getPrototypeOf(r)}!function m_(n){let r=0,o=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=r+=h.hostVars,h.hostAttrs=Ns(h.hostAttrs,o=Ns(o,h.hostAttrs))}}(a)}function Nh(n){return n===pr?{}:n===fn?[]:n}function y_(n,r){const o=n.viewQuery;n.viewQuery=o?(a,h)=>{r(a,h),o(a,h)}:r}function eg(n,r){const o=n.contentQueries;n.contentQueries=o?(a,h,y)=>{r(a,h,y),o(a,h,y)}:r}function __(n,r){const o=n.hostBindings;n.hostBindings=o?(a,h)=>{r(a,h),o(a,h)}:r}let qd=null;function Sc(){if(!qd){const n=wn.Symbol;if(n&&n.iterator)qd=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<r.length;++o){const a=r[o];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(qd=a)}}}return qd}function Yd(n){return!!Ph(n)&&(Array.isArray(n)||!(n instanceof Map)&&Sc()in n)}function Ph(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function qo(n,r,o){return n[r]=o}function Ca(n,r,o){return!Object.is(n[r],o)&&(n[r]=o,!0)}function Oh(n,r,o,a){const h=E();return Ca(h,Lr(),r)&&(R(),Ol(Zi(),h,n,r,o,a)),Oh}function Vm(n,r,o,a,h,y,I,A){const O=E(),q=R(),J=n+20,fe=q.firstCreatePass?function Lm(n,r,o,a,h,y,I,A,O){const q=r.consts,J=od(r,n,4,I||null,kr(q,A));Cf(r,o,J,kr(q,O)),ha(r,J);const fe=J.tViews=Bd(2,J,a,h,y,r.directiveRegistry,r.pipeRegistry,null,r.schemas,q);return null!==r.queries&&(r.queries.template(r,J),fe.queries=r.queries.embeddedTView(J)),J}(J,q,O,r,o,a,h,y,I):q.data[J];yt(fe,!1);const Pe=O[11].createComment("");Ec(q,O,Pe,fe),Os(Pe,O),$d(O,O[J]=Vp(Pe,O,Pe,fe)),Ci(fe)&&Mp(q,O,fe),null!=I&&wf(O,fe,A)}function og(n){return ir(function Qn(){return Jt.lFrame.contextLView}(),20+n)}function eu(n,r=Qt.Default){const o=E();return null===o?Pt(n,r):P(ae(),o,Ne(n),r)}function _g(){throw new Error("invalid")}function vg(n,r,o){const a=E();return Ca(a,Lr(),r)&&function Xa(n,r,o,a,h,y,I,A){const O=mt(r,o);let J,q=r.inputs;!A&&null!=q&&(J=q[a])?(vm(n,o,J,a,h),rs(r)&&function om(n,r){const o=jn(r,n);16&o[2]||(o[2]|=64)}(o,r.index)):3&r.type&&(a=function If(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=I?I(h,r.value||"",a):h,tr(y)?y.setProperty(O,a,h):Co(a)||(O.setProperty?O.setProperty(a,h):O[a]=h))}(R(),Zi(),a,n,r,a[11],o,!1),vg}function nh(n,r,o,a,h){const I=h?"class":"style";vm(n,o,r.inputs[I],I,a)}function Lh(n,r,o,a){const h=E(),y=R(),I=20+n,A=h[11],O=h[I]=Kl(A,r,function Jo(){return Jt.lFrame.currentNamespace}()),q=y.firstCreatePass?function qm(n,r,o,a,h,y,I){const A=r.consts,q=od(r,n,2,h,kr(A,y));return Cf(r,o,q,kr(A,I)),null!==q.attrs&&cd(q,q.attrs,!1),null!==q.mergedAttrs&&cd(q,q.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,q),q}(I,y,h,0,r,o,a):y.data[I];yt(q,!0);const J=q.mergedAttrs;null!==J&&zn(A,O,J);const fe=q.classes;null!==fe&&_h(A,O,fe);const Pe=q.styles;return null!==Pe&&yh(A,O,Pe),64!=(64&q.flags)&&Ec(y,h,O,q),0===function Nn(){return Jt.lFrame.elementDepthCount}()&&Os(O,h),function io(){Jt.lFrame.elementDepthCount++}(),Ci(q)&&(Mp(y,h,q),function Rp(n,r,o){if(Ls(r)){const h=r.directiveEnd;for(let y=r.directiveStart;y<h;y++){const I=n.data[y];I.contentQueries&&I.contentQueries(1,o[y],y)}}}(y,q,h)),null!==a&&wf(h,q),Lh}function ep(){let n=ae();Kt()?Ut():(n=n.parent,yt(n,!1));const r=n;!function ds(){Jt.lFrame.elementDepthCount--}();const o=R();return o.firstCreatePass&&(ha(o,n),Ls(n)&&o.queries.elementEnd(n)),null!=r.classesWithoutHost&&function Xo(n){return 0!=(16&n.flags)}(r)&&nh(o,r,E(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function us(n){return 0!=(32&n.flags)}(r)&&nh(o,r,E(),r.stylesWithoutHost,!1),ep}function Vh(n,r,o,a){return Lh(n,r,o,a),ep(),Vh}function go(){return E()}function tp(n){return!!n&&"function"==typeof n.then}function Ym(n){return!!n&&"function"==typeof n.subscribe}const Qm=Ym;function np(n,r,o,a){const h=E(),y=R(),I=ae();return function Xm(n,r,o,a,h,y,I,A){const O=Ci(a),J=n.firstCreatePass&&Nf(n),fe=r[8],Pe=ym(r);let Ye=!0;if(3&a.type||A){const on=mt(a,r),An=A?A(on):on,xt=Pe.length,Jn=A?ci=>A(V(ci[a.index])):a.index;if(tr(o)){let ci=null;if(!A&&O&&(ci=function P_(n,r,o,a){const h=n.cleanup;if(null!=h)for(let y=0;y<h.length-1;y+=2){const I=h[y];if(I===o&&h[y+1]===a){const A=r[7],O=h[y+2];return A.length>O?A[O]:null}"string"==typeof I&&(y+=2)}return null}(n,r,h,a.index)),null!==ci)(ci.__ngLastListenerFn__||ci).__ngNextListenerFn__=y,ci.__ngLastListenerFn__=y,Ye=!1;else{y=ty(a,r,fe,y,!1);const ns=o.listen(An,h,y);Pe.push(y,ns),J&&J.push(h,Jn,xt,xt+1)}}else y=ty(a,r,fe,y,!0),An.addEventListener(h,y,I),Pe.push(y),J&&J.push(h,Jn,xt,I)}else y=ty(a,r,fe,y,!1);const _t=a.outputs;let jt;if(Ye&&null!==_t&&(jt=_t[h])){const on=jt.length;if(on)for(let An=0;An<on;An+=2){const ol=r[jt[An]][jt[An+1]].subscribe(y),Xh=Pe.length;Pe.push(y,ol),J&&J.push(h,a.index,Xh,-(Xh+1))}}}(y,h,h[11],I,n,r,!!o,a),np}function ey(n,r,o,a){try{return!1!==o(a)}catch(h){return Pf(n,h),!1}}function ty(n,r,o,a,h){return function y(I){if(I===Function)return a;const A=2&n.flags?jn(n.index,r):r;0==(32&r[2])&&Dc(A);let O=ey(r,0,a,I),q=y.__ngNextListenerFn__;for(;q;)O=ey(r,0,q,I)&&O,q=q.__ngNextListenerFn__;return h&&!1===O&&(I.preventDefault(),I.returnValue=!1),O}}function ny(n=1){return function da(n){return(Jt.lFrame.contextLView=function al(n,r){for(;n>0;)r=r[15],n--;return r}(n,Jt.lFrame.contextLView))[8]}(n)}function O_(n,r){let o=null;const a=function cf(n){const r=n.attrs;if(null!=r){const o=r.indexOf(5);if(0==(1&o))return r[o+1]}return null}(n);for(let h=0;h<r.length;h++){const y=r[h];if("*"!==y){if(null===a?Yl(n,y,!0):ff(a,y))return h}else o=h}return o}function Eg(n){const r=E()[16][6];if(!r.projection){const a=r.projection=pa(n?n.length:1,null),h=a.slice();let y=r.child;for(;null!==y;){const I=n?O_(y,n):0;null!==I&&(h[I]?h[I].projectionNext=y:a[I]=y,h[I]=y),y=y.next}}}function kl(n,r=0,o){const a=E(),h=R(),y=od(h,20+n,16,null,o||null);null===y.projection&&(y.projection=r),Ut(),64!=(64&y.flags)&&function la(n,r,o){Tl(r[11],0,r,o,tf(n,o,r),Ep(o.parent||r[6],o,r))}(h,a,y)}function Cg(n,r,o,a,h){const y=n[o+1],I=null===r;let A=a?Ao(y):Fu(y),O=!1;for(;0!==A&&(!1===O||I);){const J=n[A+1];bg(n[A],r)&&(O=!0,n[A+1]=a?u(J):Ih(J)),A=a?Ao(J):Fu(J)}O&&(n[o+1]=a?Ih(y):u(y))}function bg(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&fs(n,r)>=0}function xg(n,r){return function Zo(n,r,o,a){const h=E(),y=R(),I=function ri(n){const r=Jt.lFrame,o=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,o}(2);y.firstUpdatePass&&function Mg(n,r,o,a){const h=n.data;if(null===h[o+1]){const y=h[ji()],I=function Rg(n,r){return r>=n.expandoStartIndex}(n,o);(function fy(n,r){return 0!=(n.flags&(r?16:32))})(y,a)&&null===r&&!I&&(r=!1),r=function Hh(n,r,o,a){const h=function Mo(n){const r=Jt.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let y=a?r.residualClasses:r.residualStyles;if(null===h)0===(a?r.classBindings:r.styleBindings)&&(o=Gh(o=Ng(null,n,r,o,a),r.attrs,a),y=null);else{const I=r.directiveStylingLast;if(-1===I||n[I]!==h)if(o=Ng(h,n,r,o,a),null===y){let O=function Oc(n,r,o){const a=o?r.classBindings:r.styleBindings;if(0!==Fu(a))return n[Ao(a)]}(n,r,a);void 0!==O&&Array.isArray(O)&&(O=Ng(null,n,r,O[1],a),O=Gh(O,r.attrs,a),function V_(n,r,o,a){n[Ao(o?r.classBindings:r.styleBindings)]=a}(n,r,a,O))}else y=function U_(n,r,o){let a;const h=r.directiveEnd;for(let y=1+r.directiveStylingLast;y<h;y++)a=Gh(a,n[y].hostAttrs,o);return Gh(a,r.attrs,o)}(n,r,a)}return void 0!==y&&(a?r.residualClasses=y:r.residualStyles=y),o}(h,y,r,a),function rp(n,r,o,a,h,y){let I=y?r.classBindings:r.styleBindings,A=Ao(I),O=Fu(I);n[a]=o;let J,q=!1;if(Array.isArray(o)){const fe=o;J=fe[1],(null===J||fs(fe,J)>0)&&(q=!0)}else J=o;if(h)if(0!==O){const Pe=Ao(n[A+1]);n[a+1]=Ml(Pe,A),0!==Pe&&(n[Pe+1]=sd(n[Pe+1],a)),n[A+1]=function mf(n,r){return 131071&n|r<<17}(n[A+1],a)}else n[a+1]=Ml(A,0),0!==A&&(n[A+1]=sd(n[A+1],a)),A=a;else n[a+1]=Ml(O,0),0===A?A=a:n[O+1]=sd(n[O+1],a),O=a;q&&(n[a+1]=Ih(n[a+1])),Cg(n,J,a,!0),Cg(n,J,a,!1),function jh(n,r,o,a,h){const y=h?n.residualClasses:n.residualStyles;null!=y&&"string"==typeof r&&fs(y,r)>=0&&(o[a+1]=u(o[a+1]))}(r,J,n,a,y),I=Ml(A,O),y?r.classBindings=I:r.styleBindings=I}(h,y,r,o,I,a)}}(y,n,I,a),r!==hr&&Ca(h,I,r)&&function Pg(n,r,o,a,h,y,I,A){if(!(3&r.type))return;const O=n.data,q=O[A+1];op(function d(n){return 1==(1&n)}(q)?dy(O,r,o,h,Fu(q),I):void 0)||(op(y)||function Nl(n){return 2==(2&n)}(q)&&(y=dy(O,null,o,h,A,I)),function Sl(n,r,o,a,h){const y=tr(n);if(r)h?y?n.addClass(o,a):o.classList.add(a):y?n.removeClass(o,a):o.classList.remove(a);else{let I=-1===a.indexOf("-")?void 0:z.DashCase;if(null==h)y?n.removeStyle(o,a,I):o.style.removeProperty(a);else{const A="string"==typeof h&&h.endsWith("!important");A&&(h=h.slice(0,-10),I|=z.Important),y?n.setStyle(o,a,h,I):o.style.setProperty(a,h,A?"important":"")}}}(a,I,et(ji(),o),h,y))}(y,y.data[ji()],h,h[11],n,h[I+1]=function hy(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=Me(va(n)))),n}(r,o),a,I)}(n,r,null,!0),xg}function Ng(n,r,o,a,h){let y=null;const I=o.directiveEnd;let A=o.directiveStylingLast;for(-1===A?A=o.directiveStart:A++;A<I&&(y=r[A],a=Gh(a,y.hostAttrs,h),y!==n);)A++;return null!==n&&(o.directiveStylingLast=A),a}function Gh(n,r,o){const a=o?1:2;let h=-1;if(null!==r)for(let y=0;y<r.length;y++){const I=r[y];"number"==typeof I?h=I:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Go(n,I,!!o||r[++y]))}return void 0===n?null:n}function dy(n,r,o,a,h,y){const I=null===r;let A;for(;h>0;){const O=n[h],q=Array.isArray(O),J=q?O[1]:O,fe=null===J;let Pe=o[h+1];Pe===hr&&(Pe=fe?fn:void 0);let Ye=fe?pl(Pe,a):J===a?Pe:void 0;if(q&&!op(Ye)&&(Ye=pl(O,a)),op(Ye)&&(A=Ye,I))return A;const _t=n[h+1];h=I?Ao(_t):Fu(_t)}if(null!==r){let O=y?r.residualClasses:r.residualStyles;null!=O&&(A=pl(O,a))}return A}function op(n){return void 0!==n}function py(n,r=""){const o=E(),a=R(),h=n+20,y=a.firstCreatePass?od(a,h,1,r,null):a.data[h],I=o[h]=function Ko(n,r){return tr(n)?n.createText(r):n.createTextNode(r)}(o[11],r);Ec(a,o,I,y),yt(y,!1)}function ap(n){return Wh("",n,""),ap}function Wh(n,r,o){const a=E(),h=function Ac(n,r,o,a){return Ca(n,Lr(),o)?r+tt(o)+a:hr}(a,n,r,o);return h!==hr&&il(a,ji(),h),Wh}const kc=void 0;var Bg=["en",[["a","p"],["AM","PM"],kc],[["AM","PM"],kc,kc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],kc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],kc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",kc,"{1} 'at' {0}",kc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kh(n){const o=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===a?1:5}];let oh={};function cp(n){const r=function Bu(n){return n.toLowerCase().replace(/_/g,"-")}(n);let o=$g(r);if(o)return o;const a=r.split("-")[0];if(o=$g(a),o)return o;if("en"===a)return Bg;throw new Error(`Missing locale data for the locale "${n}".`)}function Ty(n){return cp(n)[Un.PluralCase]}function $g(n){return n in oh||(oh[n]=wn.ng&&wn.ng.common&&wn.ng.common.locales&&wn.ng.common.locales[n]),oh[n]}var Un=(()=>((Un=Un||{})[Un.LocaleId=0]="LocaleId",Un[Un.DayPeriodsFormat=1]="DayPeriodsFormat",Un[Un.DayPeriodsStandalone=2]="DayPeriodsStandalone",Un[Un.DaysFormat=3]="DaysFormat",Un[Un.DaysStandalone=4]="DaysStandalone",Un[Un.MonthsFormat=5]="MonthsFormat",Un[Un.MonthsStandalone=6]="MonthsStandalone",Un[Un.Eras=7]="Eras",Un[Un.FirstDayOfWeek=8]="FirstDayOfWeek",Un[Un.WeekendRange=9]="WeekendRange",Un[Un.DateFormat=10]="DateFormat",Un[Un.TimeFormat=11]="TimeFormat",Un[Un.DateTimeFormat=12]="DateTimeFormat",Un[Un.NumberSymbols=13]="NumberSymbols",Un[Un.NumberFormats=14]="NumberFormats",Un[Un.CurrencyCode=15]="CurrencyCode",Un[Un.CurrencySymbol=16]="CurrencySymbol",Un[Un.CurrencyName=17]="CurrencyName",Un[Un.Currencies=18]="Currencies",Un[Un.Directionality=19]="Directionality",Un[Un.PluralCase=20]="PluralCase",Un[Un.ExtraData=21]="ExtraData",Un))();const qh="en-US";let _d=qh;function cv(n,r,o,a,h){if(n=Ne(n),Array.isArray(n))for(let y=0;y<n.length;y++)cv(n[y],r,o,a,h);else{const y=R(),I=E();let A=hu(n)?n:Ne(n.provide),O=zp(n);const q=ae(),J=1048575&q.providerIndexes,fe=q.directiveStart,Pe=q.providerIndexes>>20;if(hu(n)||!n.multi){const Ye=new Zs(O,h,eu),_t=hv(A,r,h?J:J+Pe,fe);-1===_t?(S(At(q,I),y,A),dv(y,n,r.length),r.push(A),q.directiveStart++,q.directiveEnd++,h&&(q.providerIndexes+=1048576),o.push(Ye),I.push(Ye)):(o[_t]=Ye,I[_t]=Ye)}else{const Ye=hv(A,r,J+Pe,fe),_t=hv(A,r,J,J+Pe),jt=Ye>=0&&o[Ye],on=_t>=0&&o[_t];if(h&&!on||!h&&!jt){S(At(q,I),y,A);const An=function pw(n,r,o,a,h){const y=new Zs(n,o,eu);return y.multi=[],y.index=r,y.componentProviders=0,v0(y,h,a&&!o),y}(h?fw:hw,o.length,h,a,O);!h&&on&&(o[_t].providerFactory=An),dv(y,n,r.length,0),r.push(A),q.directiveStart++,q.directiveEnd++,h&&(q.providerIndexes+=1048576),o.push(An),I.push(An)}else dv(y,n,Ye>-1?Ye:_t,v0(o[h?_t:Ye],O,!h&&a));!h&&a&&on&&o[_t].componentProviders++}}}function dv(n,r,o,a){const h=hu(r),y=function qp(n){return!!n.useClass}(r);if(h||y){const O=(y?Ne(r.useClass):r).prototype.ngOnDestroy;if(O){const q=n.destroyHooks||(n.destroyHooks=[]);if(!h&&r.multi){const J=q.indexOf(o);-1===J?q.push(o,[a,O]):q[J+1].push(a,O)}else q.push(o,O)}}}function v0(n,r,o){return o&&n.componentProviders++,n.multi.push(r)-1}function hv(n,r,o,a){for(let h=o;h<a;h++)if(r[h]===n)return h;return-1}function hw(n,r,o,a){return fv(this.multi,[])}function fw(n,r,o,a){const h=this.multi;let y;if(this.providerFactory){const I=this.providerFactory.componentProviders,A=Xt(o,o[1],this.providerFactory.index,a);y=A.slice(0,I),fv(h,y);for(let O=I;O<A.length;O++)y.push(A[O])}else y=[],fv(h,y);return y}function fv(n,r){for(let o=0;o<n.length;o++)r.push((0,n[o])());return r}function E0(n,r=[]){return o=>{o.providersResolver=(a,h)=>function dw(n,r,o){const a=R();if(a.firstCreatePass){const h=is(n);cv(o,a.data,a.blueprint,h,!0),cv(r,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,r)}}class w0{}class yw{resolveComponentFactory(r){throw function mw(n){const r=Error(`No component factory found for ${Me(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Uy=(()=>{class n{}return n.NULL=new yw,n})();function _w(){return hp(ae(),E())}function hp(n,r){return new qg(mt(n,r))}let qg=(()=>{class n{constructor(o){this.nativeElement=o}}return n.__NG_ELEMENT_ID__=_w,n})();function vw(n){return n instanceof qg?n.nativeElement:n}class C0{}let Ew=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function Iw(){const n=E(),o=jn(ae().index,n);return function ww(n){return n[11]}(pi(o)?o:n)}(),n})(),Cw=(()=>{class n{}return n.\u0275prov=Yt({token:n,providedIn:"root",factory:()=>null}),n})();class b0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const D0=new b0("13.2.7"),pv={};function By(n,r,o,a,h=!1){for(;null!==o;){const y=r[o.index];if(null!==y&&a.push(V(y)),xi(y))for(let A=10;A<y.length;A++){const O=y[A],q=O[1].firstChild;null!==q&&By(O[1],O,q,a)}const I=o.type;if(8&I)By(n,r,o.child,a);else if(32&I){const A=Le(o,r);let O;for(;O=A();)a.push(O)}else if(16&I){const A=gh(r,o);if(Array.isArray(A))a.push(...A);else{const O=sn(r[16]);By(O[1],O,A,a,!0)}}o=h?o.projectionNext:o.next}return a}class Zg{constructor(r,o){this._lView=r,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,o=r[1];return By(o,r,o.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(xi(r)){const o=r[8],a=o?o.indexOf(this):-1;a>-1&&(Od(r,a),Us(o,a))}this._attachedToViewContainer=!1}id(this._lView[1],this._lView)}onDestroy(r){sm(this._lView[1],this._lView,null,r)}markForCheck(){Dc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ud(this._lView[1],this._lView,this.context)}checkNoChanges(){!function gm(n,r,o){Ir(!0);try{ud(n,r,o)}finally{Ir(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nd(n,r){Ur(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Xe(902,"");this._appRef=r}}class bw extends Zg{constructor(r){super(r),this._view=r}detectChanges(){Mf(this._view)}checkNoChanges(){!function jp(n){Ir(!0);try{Mf(n)}finally{Ir(!1)}}(this._view)}get context(){return null}}class T0 extends Uy{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const o=Dr(r);return new gv(o,this.ngModule)}}function S0(n){const r=[];for(let o in n)n.hasOwnProperty(o)&&r.push({propName:n[o],templateName:o});return r}class gv extends w0{constructor(r,o){super(),this.componentDef=r,this.ngModule=o,this.componentType=r.type,this.selector=function Rl(n){return n.map(Cc).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return S0(this.componentDef.inputs)}get outputs(){return S0(this.componentDef.outputs)}create(r,o,a,h){const y=(h=h||this.ngModule)?function Tw(n,r){return{get:(o,a,h)=>{const y=n.get(o,pv,h);return y!==pv||a===pv?y:r.get(o,a,h)}}}(r,h.injector):r,I=y.get(C0,U),A=y.get(Cw,null),O=I.createRenderer(null,this.componentDef),q=this.componentDef.selectors[0][0]||"div",J=a?function Op(n,r,o){if(tr(n))return n.selectRootElement(r,o===Lt.ShadowDom);let a="string"==typeof r?n.querySelector(r):r;return a.textContent="",a}(O,a,this.componentDef.encapsulation):Kl(I.createRenderer(null,this.componentDef),q,function Dw(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(q)),fe=this.componentDef.onPush?576:528,Pe=function Nm(n,r){return{components:[],scheduler:n||Fa,clean:mm,playerHandler:r||null,flags:0}}(),Ye=Bd(0,null,null,1,0,null,null,null,null,null),_t=Ch(null,Ye,Pe,fe,null,null,I,O,A,y);let jt,on;oo(_t);try{const An=function Mm(n,r,o,a,h,y){const I=o[1];o[20]=n;const O=od(I,20,2,"#host",null),q=O.mergedAttrs=r.hostAttrs;null!==q&&(cd(O,q,!0),null!==n&&(zn(h,n,q),null!==O.classes&&_h(h,n,O.classes),null!==O.styles&&yh(h,n,O.styles)));const J=a.createRenderer(n,r),fe=Ch(o,Np(r),null,r.onPush?64:16,o[20],O,a,J,y||null,null);return I.firstCreatePass&&(S(At(O,o),I,r.type),Af(I,O),Lp(O,o.length,1)),$d(o,fe),o[20]=fe}(J,this.componentDef,_t,I,O);if(J)if(a)zn(O,J,["ng-version",D0.full]);else{const{attrs:xt,classes:Jn}=function Ip(n){const r=[],o=[];let a=1,h=2;for(;a<n.length;){let y=n[a];if("string"==typeof y)2===h?""!==y&&r.push(y,n[++a]):8===h&&o.push(y);else{if(!wa(h))break;h=y}a++}return{attrs:r,classes:o}}(this.componentDef.selectors[0]);xt&&zn(O,J,xt),Jn&&Jn.length>0&&_h(O,J,Jn.join(" "))}if(on=Sn(Ye,20),void 0!==o){const xt=on.projection=[];for(let Jn=0;Jn<this.ngContentSelectors.length;Jn++){const ci=o[Jn];xt.push(null!=ci?Array.from(ci):null)}}jt=function $f(n,r,o,a,h){const y=o[1],I=function dm(n,r,o){const a=ae();n.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),fm(n,a,r,bc(n,r,1,null),o));const h=Xt(r,n,a.directiveStart,a);Os(h,r);const y=mt(a,r);return y&&Os(y,r),h}(y,o,r);if(a.components.push(I),n[8]=I,h&&h.forEach(O=>O(I,r)),r.contentQueries){const O=ae();r.contentQueries(1,I,O.directiveStart)}const A=ae();return!y.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Po(A.index),bf(o[1],A,0,A.directiveStart,A.directiveEnd,r),Sf(r,I)),I}(An,this.componentDef,_t,Pe,[Xp]),Jl(Ye,_t,null)}finally{Qo()}return new Aw(this.componentType,jt,hp(on,_t),_t,on)}}class Aw extends class gw{}{constructor(r,o,a,h,y){super(),this.location=a,this._rootLView=h,this._tNode=y,this.instance=o,this.hostView=this.changeDetectorRef=new bw(h),this.componentType=r}get injector(){return new mr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class fp{}class A0{}const pp=new Map;class M0 extends fp{constructor(r,o){super(),this._parent=o,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new T0(this);const a=Br(r);this._bootstrapComponents=ks(a.bootstrap),this._r3Injector=kf(r,o,[{provide:fp,useValue:this},{provide:Uy,useValue:this.componentFactoryResolver}],Me(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,o=Ia.THROW_IF_NOT_FOUND,a=Qt.Default){return r===Ia||r===fp||r===Rh?this:this._r3Injector.get(r,o,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class mv extends A0{constructor(r){super(),this.moduleType=r,null!==Br(r)&&function Rw(n){const r=new Set;!function o(a){const h=Br(a,!0),y=h.id;null!==y&&(function x0(n,r,o){if(r&&r!==o)throw new Error(`Duplicate module registered for ${n} - ${Me(r)} vs ${Me(r.name)}`)}(y,pp.get(y),a),pp.set(y,a));const I=ks(h.imports);for(const A of I)r.has(A)||(r.add(A),o(A))}(n)}(r)}create(r){return new M0(this.moduleType,r)}}function N0(n,r,o){const a=nr()+n,h=E();return h[a]===hr?qo(h,a,o?r.call(o):r()):function dd(n,r){return n[r]}(h,a)}function Yg(n,r){const o=n[r];return o===hr?void 0:o}function O0(n,r,o,a,h,y,I){const A=r+o;return function ec(n,r,o,a){const h=Ca(n,r,o);return Ca(n,r+1,a)||h}(n,A,h,y)?qo(n,A+2,I?a.call(I,h,y):a(h,y)):Yg(n,A+2)}function V0(n,r){const o=R();let a;const h=n+20;o.firstCreatePass?(a=function Bw(n,r){if(r)for(let o=r.length-1;o>=0;o--){const a=r[o];if(n===a.name)return a}}(r,o.pipeRegistry),o.data[h]=a,a.onDestroy&&(o.destroyHooks||(o.destroyHooks=[])).push(h,a.onDestroy)):a=o.data[h];const y=a.factory||(a.factory=Or(a.type)),I=yn(eu);try{const A=Js(!1),O=y();return Js(A),function sg(n,r,o,a){o>=n.data.length&&(n.data[o]=null,n.blueprint[o]=null),r[o]=a}(o,E(),h,O),O}finally{yn(I)}}function U0(n,r,o){const a=n+20,h=E(),y=ir(h,a);return Qg(h,a)?function P0(n,r,o,a,h,y){const I=r+o;return Ca(n,I,h)?qo(n,I+1,y?a.call(y,h):a(h)):Yg(n,I+1)}(h,nr(),r,y.transform,o,y):y.transform(o)}function B0(n,r,o,a){const h=n+20,y=E(),I=ir(y,h);return Qg(y,h)?O0(y,nr(),r,I.transform,o,a,I):I.transform(o,a)}function Qg(n,r){return n[1].data[r].pure}function yv(n){return r=>{setTimeout(n,void 0,r)}}const Uc=class Gw extends _.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,o,a){var h,y,I;let A=r,O=o||(()=>null),q=a;if(r&&"object"==typeof r){const fe=r;A=null===(h=fe.next)||void 0===h?void 0:h.bind(fe),O=null===(y=fe.error)||void 0===y?void 0:y.bind(fe),q=null===(I=fe.complete)||void 0===I?void 0:I.bind(fe)}this.__isAsync&&(O=yv(O),A&&(A=yv(A)),q&&(q=yv(q)));const J=super.subscribe({next:A,error:O,complete:q});return r instanceof te.w0&&r.add(J),J}};function Ww(){return this._results[Sc()]()}class _v{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const o=Sc(),a=_v.prototype;a[o]||(a[o]=Ww)}get changes(){return this._changes||(this._changes=new Uc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,o){return this._results.reduce(r,o)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,o){const a=this;a.dirty=!1;const h=co(r);(this._changesDetected=!function fa(n,r,o){if(n.length!==r.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],y=r[a];if(o&&(h=o(h),y=o(y)),y!==h)return!1}return!0}(a._results,h,o))&&(a._results=h,a.length=h.length,a.last=h[this.length-1],a.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Jg=(()=>{class n{}return n.__NG_ELEMENT_ID__=qw,n})();const zw=Jg,Kw=class extends zw{constructor(r,o,a){super(),this._declarationLView=r,this._declarationTContainer=o,this.elementRef=a}createEmbeddedView(r){const o=this._declarationTContainer.tViews,a=Ch(this._declarationLView,o,r,16,null,o.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(a[19]=y.createEmbeddedView(o)),Jl(o,a,r),new Zg(a)}};function qw(){return jy(ae(),E())}function jy(n,r){return 4&n.type?new Kw(r,n,hp(n,r)):null}let $y=(()=>{class n{}return n.__NG_ELEMENT_ID__=Zw,n})();function Zw(){return H0(ae(),E())}const Yw=$y,j0=class extends Yw{constructor(r,o,a){super(),this._lContainer=r,this._hostTNode=o,this._hostLView=a}get element(){return hp(this._hostTNode,this._hostLView)}get injector(){return new mr(this._hostTNode,this._hostLView)}get parentInjector(){const r=ta(this._hostTNode,this._hostLView);if(Eu(r)){const o=Mr(r,this._hostLView),a=Is(r);return new mr(o[1].data[a+8],o)}return new mr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const o=$0(this._lContainer);return null!==o&&o[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,o,a){const h=r.createEmbeddedView(o||{});return this.insert(h,a),h}createComponent(r,o,a,h,y){const I=r&&!function Ba(n){return"function"==typeof n}(r);let A;if(I)A=o;else{const fe=o||{};A=fe.index,a=fe.injector,h=fe.projectableNodes,y=fe.ngModuleRef}const O=I?r:new gv(Dr(r)),q=a||this.parentInjector;if(!y&&null==O.ngModule){const Pe=(I?q:this.parentInjector).get(fp,null);Pe&&(y=Pe)}const J=O.create(q,h,void 0,y);return this.insert(J.hostView,A),J}insert(r,o){const a=r._lView,h=a[1];if(function Ar(n){return xi(n[3])}(a)){const J=this.indexOf(r);if(-1!==J)this.detach(J);else{const fe=a[3],Pe=new j0(fe,fe[6],fe[3]);Pe.detach(Pe.indexOf(r))}}const y=this._adjustIndex(o),I=this._lContainer;!function rd(n,r,o,a){const h=10+a,y=o.length;a>0&&(o[h-1][4]=r),a<y-10?(r[4]=o[h],ja(o,10+a,r)):(o.push(r),r[4]=null),r[3]=o;const I=r[17];null!==I&&o!==I&&function Pd(n,r){const o=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===o?n[9]=[r]:o.push(r)}(I,r);const A=r[19];null!==A&&A.insertView(n),r[2]|=128}(h,a,I,y);const A=Ld(y,I),O=a[11],q=kd(O,I[7]);return null!==q&&function vc(n,r,o,a,h,y){a[0]=h,a[6]=r,Ur(n,a,o,1,h,y)}(h,I[6],O,a,q,A),r.attachToViewContainerRef(),ja(vv(I),y,r),r}move(r,o){return this.insert(r,o)}indexOf(r){const o=$0(this._lContainer);return null!==o?o.indexOf(r):-1}remove(r){const o=this._adjustIndex(r,-1),a=Od(this._lContainer,o);a&&(Us(vv(this._lContainer),o),id(a[1],a))}detach(r){const o=this._adjustIndex(r,-1),a=Od(this._lContainer,o);return a&&null!=Us(vv(this._lContainer),o)?new Zg(a):null}_adjustIndex(r,o=0){return null==r?this.length+o:r}};function $0(n){return n[8]}function vv(n){return n[8]||(n[8]=[])}function H0(n,r){let o;const a=r[n.index];if(xi(a))o=a;else{let h;if(8&n.type)h=V(a);else{const y=r[11];h=y.createComment("");const I=mt(n,r);ql(y,kd(y,I),h,function vp(n,r){return tr(n)?n.nextSibling(r):r.nextSibling}(y,I),!1)}r[n.index]=o=Vp(a,r,h,n),$d(r,o)}return new j0(o,n,r)}class Ev{constructor(r){this.queryList=r,this.matches=null}clone(){return new Ev(this.queryList)}setDirty(){this.queryList.setDirty()}}class wv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const o=r.queries;if(null!==o){const a=null!==r.contentQueries?r.contentQueries[0]:o.length,h=[];for(let y=0;y<a;y++){const I=o.getByIndex(y);h.push(this.queries[I.indexInDeclarationView].clone())}return new wv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let o=0;o<this.queries.length;o++)null!==Q0(r,o).matches&&this.queries[o].setDirty()}}class G0{constructor(r,o,a=null){this.predicate=r,this.flags=o,this.read=a}}class Iv{constructor(r=[]){this.queries=r}elementStart(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,o)}elementEnd(r){for(let o=0;o<this.queries.length;o++)this.queries[o].elementEnd(r)}embeddedTView(r){let o=null;for(let a=0;a<this.length;a++){const h=null!==o?o.length:0,y=this.getByIndex(a).embeddedTView(r,h);y&&(y.indexInDeclarationView=a,null!==o?o.push(y):o=[y])}return null!==o?new Iv(o):null}template(r,o){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,o)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Cv{constructor(r,o=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=o}elementStart(r,o){this.isApplyingToNode(o)&&this.matchTNode(r,o)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,o){this.elementStart(r,o)}embeddedTView(r,o){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,o),new Cv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const o=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==o;)a=a.parent;return o===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,o){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const y=a[h];this.matchTNodeWithReadOption(r,o,Xw(o,y)),this.matchTNodeWithReadOption(r,o,ft(o,r,y,!1,!1))}else a===Jg?4&o.type&&this.matchTNodeWithReadOption(r,o,-1):this.matchTNodeWithReadOption(r,o,ft(o,r,a,!1,!1))}matchTNodeWithReadOption(r,o,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===qg||h===$y||h===Jg&&4&o.type)this.addMatch(o.index,-2);else{const y=ft(o,r,h,!1,!1);null!==y&&this.addMatch(o.index,y)}else this.addMatch(o.index,a)}}addMatch(r,o){null===this.matches?this.matches=[r,o]:this.matches.push(r,o)}}function Xw(n,r){const o=n.localNames;if(null!==o)for(let a=0;a<o.length;a+=2)if(o[a]===r)return o[a+1];return null}function tI(n,r,o,a){return-1===o?function eI(n,r){return 11&n.type?hp(n,r):4&n.type?jy(n,r):null}(r,n):-2===o?function nI(n,r,o){return o===qg?hp(r,n):o===Jg?jy(r,n):o===$y?H0(r,n):void 0}(n,r,a):Xt(n,n[1],o,r)}function W0(n,r,o,a){const h=r[19].queries[a];if(null===h.matches){const y=n.data,I=o.matches,A=[];for(let O=0;O<I.length;O+=2){const q=I[O];A.push(q<0?null:tI(r,y[q],I[O+1],o.metadata.read))}h.matches=A}return h.matches}function bv(n,r,o,a){const h=n.queries.getByIndex(o),y=h.matches;if(null!==y){const I=W0(n,r,h,o);for(let A=0;A<y.length;A+=2){const O=y[A];if(O>0)a.push(I[A/2]);else{const q=y[A+1],J=r[-O];for(let fe=10;fe<J.length;fe++){const Pe=J[fe];Pe[17]===Pe[3]&&bv(Pe[1],Pe,q,a)}if(null!==J[9]){const fe=J[9];for(let Pe=0;Pe<fe.length;Pe++){const Ye=fe[Pe];bv(Ye[1],Ye,q,a)}}}}}return a}function z0(n){const r=E(),o=R(),a=No();Io(a+1);const h=Q0(o,a);if(n.dirty&&cn(r)===(2==(2&h.metadata.flags))){if(null===h.matches)n.reset([]);else{const y=h.crossesNgTemplate?bv(o,r,a,[]):W0(o,r,h,a);n.reset(y,vw),n.notifyOnChanges()}return!0}return!1}function K0(n,r,o,a){const h=R();if(h.firstCreatePass){const y=ae();(function Y0(n,r,o){null===n.queries&&(n.queries=new Iv),n.queries.track(new Cv(r,o))})(h,new G0(r,o,a),y.index),function sI(n,r){const o=n.contentQueries||(n.contentQueries=[]);r!==(o.length?o[o.length-1]:-1)&&o.push(n.queries.length-1,r)}(h,n),2==(2&o)&&(h.staticContentQueries=!0)}!function Z0(n,r,o){const a=new _v(4==(4&o));sm(n,r,a,a.destroy),null===r[19]&&(r[19]=new wv),r[19].queries.push(new Ev(a))}(h,E(),o)}function q0(){return function iI(n,r){return n[19].queries[r].queryList}(E(),No())}function Q0(n,r){return n.queries.getByIndex(r)}function J0(n,r){return jy(n,r)}function Wy(...n){}const gE=new Ni("Application Initializer");let Rv=(()=>{class n{constructor(o){this.appInits=o,this.resolve=Wy,this.reject=Wy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,h)=>{this.resolve=a,this.reject=h})}runInitializers(){if(this.initialized)return;const o=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const y=this.appInits[h]();if(tp(y))o.push(y);else if(Qm(y)){const I=new Promise((A,O)=>{y.subscribe({complete:A,error:O})});o.push(I)}}Promise.all(o).then(()=>{a()}).catch(h=>{this.reject(h)}),0===o.length&&a(),this.initialized=!0}}return n.\u0275fac=function(o){return new(o||n)(Pt(gE,8))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mE=new Ni("AppId",{providedIn:"root",factory:function yE(){return`${Mv()}${Mv()}${Mv()}`}});function Mv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const _E=new Ni("Platform Initializer"),vE=new Ni("Platform ID"),EE=new Ni("appBootstrapListener");let wE=(()=>{class n{log(o){console.log(o)}warn(o){console.warn(o)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})();const Nv=new Ni("LocaleId",{providedIn:"root",factory:()=>Hn(Nv,Qt.Optional|Qt.SkipSelf)||function II(){return"undefined"!=typeof $localize&&$localize.locale||qh}()}),CI=new Ni("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class bI{constructor(r,o){this.ngModuleFactory=r,this.componentFactories=o}}let DI=(()=>{class n{compileModuleSync(o){return new mv(o)}compileModuleAsync(o){return Promise.resolve(this.compileModuleSync(o))}compileModuleAndAllComponentsSync(o){const a=this.compileModuleSync(o),y=ks(Br(o).declarations).reduce((I,A)=>{const O=Dr(A);return O&&I.push(new gv(O)),I},[]);return new bI(a,y)}compileModuleAndAllComponentsAsync(o){return Promise.resolve(this.compileModuleAndAllComponentsSync(o))}clearCache(){}clearCacheFor(o){}getModuleId(o){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SI=(()=>Promise.resolve(0))();function Pv(n){"undefined"==typeof Zone?SI.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class rc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Uc(!1),this.onMicrotaskEmpty=new Uc(!1),this.onStable=new Uc(!1),this.onError=new Uc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&o,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function AI(){let n=wn.requestAnimationFrame,r=wn.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const o=n[Zone.__symbol__("OriginalDelegate")];o&&(n=o);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function MI(n){const r=()=>{!function RI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(wn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,kv(n),n.isCheckStableRunning=!0,Ov(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),kv(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,a,h,y,I,A)=>{try{return IE(n),o.invokeTask(h,y,I,A)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===y.type||n.shouldCoalesceRunChangeDetection)&&r(),CE(n)}},onInvoke:(o,a,h,y,I,A,O)=>{try{return IE(n),o.invoke(h,y,I,A,O)}finally{n.shouldCoalesceRunChangeDetection&&r(),CE(n)}},onHasTask:(o,a,h,y)=>{o.hasTask(h,y),a===h&&("microTask"==y.change?(n._hasPendingMicrotasks=y.microTask,kv(n),Ov(n)):"macroTask"==y.change&&(n.hasPendingMacrotasks=y.macroTask))},onHandleError:(o,a,h,y)=>(o.handleError(h,y),n.runOutsideAngular(()=>n.onError.emit(y)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(rc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,o,a){return this._inner.run(r,o,a)}runTask(r,o,a,h){const y=this._inner,I=y.scheduleEventTask("NgZoneEvent: "+h,r,xI,Wy,Wy);try{return y.runTask(I,o,a)}finally{y.cancelTask(I)}}runGuarded(r,o,a){return this._inner.runGuarded(r,o,a)}runOutsideAngular(r){return this._outer.run(r)}}const xI={};function Ov(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function kv(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function IE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CE(n){n._nesting--,Ov(n)}class NI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Uc,this.onMicrotaskEmpty=new Uc,this.onStable=new Uc,this.onError=new Uc}run(r,o,a){return r.apply(o,a)}runGuarded(r,o,a){return r.apply(o,a)}runOutsideAngular(r){return r()}runTask(r,o,a,h){return r.apply(o,a)}}let bE=(()=>{class n{constructor(o){this._ngZone=o,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rc.assertNotInAngularZone(),Pv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Pv(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(o)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,a,h){let y=-1;a&&a>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(I=>I.timeoutId!==y),o(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:o,timeoutId:y,updateCb:h})}whenStable(o,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(o,a,h){return[]}}return n.\u0275fac=function(o){return new(o||n)(Pt(rc))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})(),DE=(()=>{class n{constructor(){this._applications=new Map,Fv.addToWindow(this)}registerApplication(o,a){this._applications.set(o,a)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,a=!0){return Fv.findTestabilityInTree(this,o,a)}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})();class PI{addToWindow(r){}findTestabilityInTree(r,o,a){return null}}function OI(n){Fv=n}let ic,Fv=new PI;const TE=new Ni("AllowMultipleToken");class LI{constructor(r,o){this.name=r,this.token=o}}function SE(n,r,o=[]){const a=`Platform: ${r}`,h=new Ni(a);return(y=[])=>{let I=AE();if(!I||I.injector.get(TE,!1))if(n)n(o.concat(y).concat({provide:h,useValue:!0}));else{const A=o.concat(y).concat({provide:h,useValue:!0},{provide:Hp,useValue:"platform"});!function VI(n){if(ic&&!ic.destroyed&&!ic.injector.get(TE,!1))throw new Xe(400,"");ic=n.get(xE);const r=n.get(_E,null);r&&r.forEach(o=>o())}(Ia.create({providers:A,name:a}))}return function UI(n){const r=AE();if(!r)throw new Xe(401,"");return r}()}}function AE(){return ic&&!ic.destroyed?ic:null}let xE=(()=>{class n{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,a){const A=function BI(n,r){let o;return o="noop"===n?new NI:("zone.js"===n?void 0:n)||new rc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),o}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),O=[{provide:rc,useValue:A}];return A.run(()=>{const q=Ia.create({providers:O,parent:this.injector,name:o.moduleType.name}),J=o.create(q),fe=J.injector.get(Wl,null);if(!fe)throw new Xe(402,"");return A.runOutsideAngular(()=>{const Pe=A.onError.subscribe({next:Ye=>{fe.handleError(Ye)}});J.onDestroy(()=>{Vv(this._modules,J),Pe.unsubscribe()})}),function jI(n,r,o){try{const a=o();return tp(a)?a.catch(h=>{throw r.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw r.runOutsideAngular(()=>n.handleError(a)),a}}(fe,A,()=>{const Pe=J.injector.get(Rv);return Pe.runInitializers(),Pe.donePromise.then(()=>(function vd(n){Wt(n,"Expected localeId to be defined"),"string"==typeof n&&(_d=n.toLowerCase().replace(/_/g,"-"))}(J.injector.get(Nv,qh)||qh),this._moduleDoBootstrap(J),J))})})}bootstrapModule(o,a=[]){const h=RE({},a);return function kI(n,r,o){const a=new mv(o);return Promise.resolve(a)}(0,0,o).then(y=>this.bootstrapModuleFactory(y,h))}_moduleDoBootstrap(o){const a=o.injector.get(Lv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!o.instance.ngDoBootstrap)throw new Xe(403,"");o.instance.ngDoBootstrap(a)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Xe(404,"");this._modules.slice().forEach(o=>o.destroy()),this._destroyListeners.forEach(o=>o()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(o){return new(o||n)(Pt(Ia))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac}),n})();function RE(n,r){return Array.isArray(r)?r.reduce(RE,n):Object.assign(Object.assign({},n),r)}let Lv=(()=>{class n{constructor(o,a,h,y,I){this._zone=o,this._injector=a,this._exceptionHandler=h,this._componentFactoryResolver=y,this._initStatus=I,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const A=new ie.y(q=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{q.next(this._stable),q.complete()})}),O=new ie.y(q=>{let J;this._zone.runOutsideAngular(()=>{J=this._zone.onStable.subscribe(()=>{rc.assertNotInAngularZone(),Pv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,q.next(!0))})})});const fe=this._zone.onUnstable.subscribe(()=>{rc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{q.next(!1)}))});return()=>{J.unsubscribe(),fe.unsubscribe()}});this.isStable=(0,Se.T)(A,O.pipe((0,De.B)()))}bootstrap(o,a){if(!this._initStatus.done)throw new Xe(405,"");let h;h=o instanceof w0?o:this._componentFactoryResolver.resolveComponentFactory(o),this.componentTypes.push(h.componentType);const y=function FI(n){return n.isBoundToModule}(h)?void 0:this._injector.get(fp),A=h.create(Ia.NULL,[],a||h.selector,y),O=A.location.nativeElement,q=A.injector.get(bE,null),J=q&&A.injector.get(DE);return q&&J&&J.registerApplication(O,q),A.onDestroy(()=>{this.detachView(A.hostView),Vv(this.components,A),J&&J.unregisterApplication(O)}),this._loadComponent(A),A}tick(){if(this._runningTick)throw new Xe(101,"");try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const a=o;this._views.push(a),a.attachToAppRef(this)}detachView(o){const a=o;Vv(this._views,a),a.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(EE,[]).concat(this._bootstrapListeners).forEach(h=>h(o))}ngOnDestroy(){this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(o){return new(o||n)(Pt(rc),Pt(Ia),Pt(Wl),Pt(Uy),Pt(Rv))},n.\u0275prov=Yt({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Vv(n,r){const o=n.indexOf(r);o>-1&&n.splice(o,1)}let NE=!0,PE=!1;function HI(){return PE=!0,NE}function GI(){if(PE)throw new Error("Cannot enable prod mode after platform setup.");NE=!1}let WI=(()=>{class n{}return n.__NG_ELEMENT_ID__=zI,n})();function zI(n){return function KI(n,r,o){if(rs(n)&&!o){const a=jn(n.index,r);return new Zg(a,a)}return 47&n.type?new Zg(r[16],r):null}(ae(),E(),16==(16&n))}class LE{constructor(){}supports(r){return Yd(r)}create(r){return new XI(r)}}const JI=(n,r)=>r;class XI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||JI}forEachItem(r){let o;for(o=this._itHead;null!==o;o=o._next)r(o)}forEachOperation(r){let o=this._itHead,a=this._removalsHead,h=0,y=null;for(;o||a;){const I=!a||o&&o.currentIndex<UE(a,h,y)?o:a,A=UE(I,h,y),O=I.currentIndex;if(I===a)h--,a=a._nextRemoved;else if(o=o._next,null==I.previousIndex)h++;else{y||(y=[]);const q=A-h,J=O-h;if(q!=J){for(let Pe=0;Pe<q;Pe++){const Ye=Pe<y.length?y[Pe]:y[Pe]=0,_t=Ye+Pe;J<=_t&&_t<q&&(y[Pe]=Ye+1)}y[I.previousIndex]=J-q}}A!==O&&r(I,A,O)}}forEachPreviousItem(r){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachMovedItem(r){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}forEachIdentityChange(r){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)r(o)}diff(r){if(null==r&&(r=[]),!Yd(r))throw new Xe(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,y,I,o=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let A=0;A<this.length;A++)y=r[A],I=this._trackByFn(A,y),null!==o&&Object.is(o.trackById,I)?(a&&(o=this._verifyReinsertion(o,y,I,A)),Object.is(o.item,y)||this._addIdentityChange(o,y)):(o=this._mismatch(o,y,I,A),a=!0),o=o._next}else h=0,function E_(n,r){if(Array.isArray(n))for(let o=0;o<n.length;o++)r(n[o]);else{const o=n[Sc()]();let a;for(;!(a=o.next()).done;)r(a.value)}}(r,A=>{I=this._trackByFn(h,A),null!==o&&Object.is(o.trackById,I)?(a&&(o=this._verifyReinsertion(o,A,I,h)),Object.is(o.item,A)||this._addIdentityChange(o,A)):(o=this._mismatch(o,A,I,h),a=!0),o=o._next,h++}),this.length=h;return this._truncate(o),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,o,a,h){let y;return null===r?y=this._itTail:(y=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._reinsertAfter(r,y,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(r.item,o)||this._addIdentityChange(r,o),this._moveAfter(r,y,h)):r=this._addAfter(new eC(o,a),y,h),r}_verifyReinsertion(r,o,a,h){let y=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==y?r=this._reinsertAfter(y,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const o=r._next;this._addToRemovals(this._unlink(r)),r=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,o,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,y=r._nextRemoved;return null===h?this._removalsHead=y:h._nextRemoved=y,null===y?this._removalsTail=h:y._prevRemoved=h,this._insertAfter(r,o,a),this._addToMoves(r,a),r}_moveAfter(r,o,a){return this._unlink(r),this._insertAfter(r,o,a),this._addToMoves(r,a),r}_addAfter(r,o,a){return this._insertAfter(r,o,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,o,a){const h=null===o?this._itHead:o._next;return r._next=h,r._prev=o,null===h?this._itTail=r:h._prev=r,null===o?this._itHead=r:o._next=r,null===this._linkedRecords&&(this._linkedRecords=new VE),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const o=r._prev,a=r._next;return null===o?this._itHead=a:o._next=a,null===a?this._itTail=o:a._prev=o,r}_addToMoves(r,o){return r.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,o){return r.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class eC{constructor(r,o){this.item=r,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class tC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,o){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===o||o<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const o=r._prevDup,a=r._nextDup;return null===o?this._head=a:o._nextDup=a,null===a?this._tail=o:a._prevDup=o,null===this._head}}class VE{constructor(){this.map=new Map}put(r){const o=r.trackById;let a=this.map.get(o);a||(a=new tC,this.map.set(o,a)),a.add(r)}get(r,o){const h=this.map.get(r);return h?h.get(r,o):null}remove(r){const o=r.trackById;return this.map.get(o).remove(r)&&this.map.delete(o),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function UE(n,r,o){const a=n.previousIndex;if(null===a)return a;let h=0;return o&&a<o.length&&(h=o[a]),a+r+h}class BE{constructor(){}supports(r){return r instanceof Map||Ph(r)}create(){return new nC}}class nC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let o;for(o=this._mapHead;null!==o;o=o._next)r(o)}forEachPreviousItem(r){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)r(o)}forEachChangedItem(r){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)r(o)}forEachAddedItem(r){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)r(o)}forEachRemovedItem(r){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)r(o)}diff(r){if(r){if(!(r instanceof Map||Ph(r)))throw new Xe(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,h)=>{if(o&&o.key===h)this._maybeAddToChanges(o,a),this._appendAfter=o,o=o._next;else{const y=this._getOrCreateRecordForKey(h,a);o=this._insertBeforeOrAppend(o,y)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let a=o;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,o){if(r){const a=r._prev;return o._next=r,o._prev=a,r._prev=o,a&&(a._next=o),r===this._mapHead&&(this._mapHead=o),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(r,o){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,o);const y=h._prev,I=h._next;return y&&(y._next=I),I&&(I._prev=y),h._next=null,h._prev=null,h}const a=new rC(r);return this._records.set(r,a),a.currentValue=o,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,o){Object.is(o,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=o,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,o){r instanceof Map?r.forEach(o):Object.keys(r).forEach(a=>o(r[a],a))}}class rC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function jE(){return new Hv([new LE])}let Hv=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(null!=a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||jE()),deps:[[n,new $s,new Cs]]}}find(o){const a=this.factories.find(h=>h.supports(o));if(null!=a)return a;throw new Xe(901,"")}}return n.\u0275prov=Yt({token:n,providedIn:"root",factory:jE}),n})();function $E(){return new Gv([new BE])}let Gv=(()=>{class n{constructor(o){this.factories=o}static create(o,a){if(a){const h=a.factories.slice();o=o.concat(h)}return new n(o)}static extend(o){return{provide:n,useFactory:a=>n.create(o,a||$E()),deps:[[n,new $s,new Cs]]}}find(o){const a=this.factories.find(y=>y.supports(o));if(a)return a;throw new Xe(901,"")}}return n.\u0275prov=Yt({token:n,providedIn:"root",factory:$E}),n})();const oC=SE(null,"core",[{provide:vE,useValue:"unknown"},{provide:xE,deps:[Ia]},{provide:DE,deps:[]},{provide:wE,deps:[]}]);let aC=(()=>{class n{constructor(o){}}return n.\u0275fac=function(o){return new(o||n)(Pt(Lv))},n.\u0275mod=rr({type:n}),n.\u0275inj=Vt({}),n})()},2382:(Ot,We,B)=>{B.d(We,{Fj:()=>ht,CE:()=>Or,qu:()=>io,NI:()=>bn,u:()=>xs,sg:()=>_s,x0:()=>_o,u5:()=>Jt,JU:()=>Xe,JJ:()=>zr,JL:()=>hi,wV:()=>je,UX:()=>qi,kI:()=>lt,_Y:()=>Ie});var _=B(5e3),te=B(9808),ie=B(8306),Se=B(4742),De=B(8421),Re=B(7669),Ve=B(5403),Me=B(3268),Ue=B(1810),oe=B(8996),Ne=B(4004);let Tt=(()=>{class H{constructor(k,E){this._renderer=k,this._elementRef=E,this.onChange=R=>{},this.onTouched=()=>{}}setProperty(k,E){this._renderer.setProperty(this._elementRef.nativeElement,k,E)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(_.Qsj),_.Y36(_.SBq))},H.\u0275dir=_.lG2({type:H}),H})(),at=(()=>{class H extends Tt{}return H.\u0275fac=function(){let L;return function(E){return(L||(L=_.n5z(H)))(E||H)}}(),H.\u0275dir=_.lG2({type:H,features:[_.qOj]}),H})();const Xe=new _.OlP("NgValueAccessor"),pt={provide:Xe,useExisting:(0,_.Gpc)(()=>ht),multi:!0},kt=new _.OlP("CompositionEventMode");let ht=(()=>{class H extends Tt{constructor(k,E,R){super(k,E),this._compositionMode=R,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xe(){const H=(0,te.q)()?(0,te.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(k){this.setProperty("value",null==k?"":k)}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(_.Qsj),_.Y36(_.SBq),_.Y36(kt,8))},H.\u0275dir=_.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,E){1&k&&_.NdJ("input",function(Y){return E._handleInput(Y.target.value)})("blur",function(){return E.onTouched()})("compositionstart",function(){return E._compositionStart()})("compositionend",function(Y){return E._compositionEnd(Y.target.value)})},features:[_._Bn([pt]),_.qOj]}),H})();function W(H){return null==H||0===H.length}function Ge(H){return null!=H&&"number"==typeof H.length}const Et=new _.OlP("NgValidators"),Ct=new _.OlP("NgAsyncValidators"),ue=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class lt{static min(L){return function ge(H){return L=>{if(W(L.value)||W(H))return null;const k=parseFloat(L.value);return!isNaN(k)&&k<H?{min:{min:H,actual:L.value}}:null}}(L)}static max(L){return function Fe(H){return L=>{if(W(L.value)||W(H))return null;const k=parseFloat(L.value);return!isNaN(k)&&k>H?{max:{max:H,actual:L.value}}:null}}(L)}static required(L){return function Be(H){return W(H.value)?{required:!0}:null}(L)}static requiredTrue(L){return function Qe(H){return!0===H.value?null:{required:!0}}(L)}static email(L){return function Ze(H){return W(H.value)||ue.test(H.value)?null:{email:!0}}(L)}static minLength(L){return function wt(H){return L=>W(L.value)||!Ge(L.value)?null:L.value.length<H?{minlength:{requiredLength:H,actualLength:L.value.length}}:null}(L)}static maxLength(L){return function Nt(H){return L=>Ge(L.value)&&L.value.length>H?{maxlength:{requiredLength:H,actualLength:L.value.length}}:null}(L)}static pattern(L){return function en(H){if(!H)return Wt;let L,k;return"string"==typeof H?(k="","^"!==H.charAt(0)&&(k+="^"),k+=H,"$"!==H.charAt(H.length-1)&&(k+="$"),L=new RegExp(k)):(k=H.toString(),L=H),E=>{if(W(E.value))return null;const R=E.value;return L.test(R)?null:{pattern:{requiredPattern:k,actualValue:R}}}}(L)}static nullValidator(L){return null}static compose(L){return Vt(L)}static composeAsync(L){return Cr(L)}}function Wt(H){return null}function it(H){return null!=H}function nn(H){const L=(0,_.QGY)(H)?(0,oe.D)(H):H;return(0,_.CqO)(L),L}function un(H){let L={};return H.forEach(k=>{L=null!=k?Object.assign(Object.assign({},L),k):L}),0===Object.keys(L).length?null:L}function Bt(H,L){return L.map(k=>k(H))}function Mn(H){return H.map(L=>function Yt(H){return!H.validate}(L)?L:k=>L.validate(k))}function Vt(H){if(!H)return null;const L=H.filter(it);return 0==L.length?null:function(k){return un(Bt(k,L))}}function tn(H){return null!=H?Vt(Mn(H)):null}function Cr(H){if(!H)return null;const L=H.filter(it);return 0==L.length?null:function(k){return function ce(...H){const L=(0,Re.jO)(H),{args:k,keys:E}=(0,Se.D)(H),R=new ie.y(Y=>{const{length:ae}=k;if(!ae)return void Y.complete();const Ae=new Array(ae);let Ke=ae,yt=ae;for(let Kt=0;Kt<ae;Kt++){let Ut=!1;(0,De.Xf)(k[Kt]).subscribe((0,Ve.x)(Y,$n=>{Ut||(Ut=!0,yt--),Ae[Kt]=$n},()=>Ke--,void 0,()=>{(!Ke||!Ut)&&(yt||Y.next(E?(0,Ue.n)(E,Ae):Ae),Y.complete())}))}});return L?R.pipe((0,Me.Z)(L)):R}(Bt(k,L).map(nn)).pipe((0,Ne.U)(un))}}function sr(H){return null!=H?Cr(Mn(H)):null}function Pr(H,L){return null===H?[L]:Array.isArray(H)?[...H,L]:[H,L]}function Xn(H){return H._rawValidators}function fr(H){return H._rawAsyncValidators}function Bn(H){return H?Array.isArray(H)?H:[H]:[]}function Sr(H,L){return Array.isArray(H)?H.includes(L):H===L}function Yn(H,L){const k=Bn(L);return Bn(H).forEach(R=>{Sr(k,R)||k.push(R)}),k}function Qt(H,L){return Bn(L).filter(k=>!Sr(H,k))}class kn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(L){this._rawValidators=L||[],this._composedValidatorFn=tn(this._rawValidators)}_setAsyncValidators(L){this._rawAsyncValidators=L||[],this._composedAsyncValidatorFn=sr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(L){this._onDestroyCallbacks.push(L)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(L=>L()),this._onDestroyCallbacks=[]}reset(L){this.control&&this.control.reset(L)}hasError(L,k){return!!this.control&&this.control.hasError(L,k)}getError(L,k){return this.control?this.control.getError(L,k):null}}class rn extends kn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class yn extends kn{get formDirective(){return null}get path(){return null}}class Wi{constructor(L){this._cd=L}is(L){var k,E,R;return"submitted"===L?!!(null===(k=this._cd)||void 0===k?void 0:k.submitted):!!(null===(R=null===(E=this._cd)||void 0===E?void 0:E.control)||void 0===R?void 0:R[L])}}let zr=(()=>{class H extends Wi{constructor(k){super(k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(rn,2))},H.\u0275dir=_.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,E){2&k&&_.ekj("ng-untouched",E.is("untouched"))("ng-touched",E.is("touched"))("ng-pristine",E.is("pristine"))("ng-dirty",E.is("dirty"))("ng-valid",E.is("valid"))("ng-invalid",E.is("invalid"))("ng-pending",E.is("pending"))},features:[_.qOj]}),H})(),hi=(()=>{class H extends Wi{constructor(k){super(k)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(yn,10))},H.\u0275dir=_.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,E){2&k&&_.ekj("ng-untouched",E.is("untouched"))("ng-touched",E.is("touched"))("ng-pristine",E.is("pristine"))("ng-dirty",E.is("dirty"))("ng-valid",E.is("valid"))("ng-invalid",E.is("invalid"))("ng-pending",E.is("pending"))("ng-submitted",E.is("submitted"))},features:[_.qOj]}),H})();function qe(H,L){return[...L.path,H]}function St(H,L){ar(H,L),L.valueAccessor.writeValue(H.value),function rr(H,L){L.valueAccessor.registerOnChange(k=>{H._pendingValue=k,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&qr(H,L)})}(H,L),function wi(H,L){const k=(E,R)=>{L.valueAccessor.writeValue(E),R&&L.viewToModelUpdate(E)};H.registerOnChange(k),L._registerOnDestroy(()=>{H._unregisterOnChange(k)})}(H,L),function zi(H,L){L.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&qr(H,L),"submit"!==H.updateOn&&H.markAsTouched()})}(H,L),function or(H,L){if(L.valueAccessor.setDisabledState){const k=E=>{L.valueAccessor.setDisabledState(E)};H.registerOnDisabledChange(k),L._registerOnDestroy(()=>{H._unregisterOnDisabledChange(k)})}}(H,L)}function $t(H,L,k=!0){const E=()=>{};L.valueAccessor&&(L.valueAccessor.registerOnChange(E),L.valueAccessor.registerOnTouched(E)),hn(H,L),H&&(L._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function pn(H,L){H.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange(L)})}function ar(H,L){const k=Xn(H);null!==L.validator?H.setValidators(Pr(k,L.validator)):"function"==typeof k&&H.setValidators([k]);const E=fr(H);null!==L.asyncValidator?H.setAsyncValidators(Pr(E,L.asyncValidator)):"function"==typeof E&&H.setAsyncValidators([E]);const R=()=>H.updateValueAndValidity();pn(L._rawValidators,R),pn(L._rawAsyncValidators,R)}function hn(H,L){let k=!1;if(null!==H){if(null!==L.validator){const R=Xn(H);if(Array.isArray(R)&&R.length>0){const Y=R.filter(ae=>ae!==L.validator);Y.length!==R.length&&(k=!0,H.setValidators(Y))}}if(null!==L.asyncValidator){const R=fr(H);if(Array.isArray(R)&&R.length>0){const Y=R.filter(ae=>ae!==L.asyncValidator);Y.length!==R.length&&(k=!0,H.setAsyncValidators(Y))}}}const E=()=>{};return pn(L._rawValidators,E),pn(L._rawAsyncValidators,E),k}function qr(H,L){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),L.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function wr(H,L){const k=H.indexOf(L);k>-1&&H.splice(k,1)}const It="VALID",Ht="INVALID",Wn="PENDING",Qr="DISABLED";function ur(H){return(gr(H)?H.validators:H)||null}function Li(H){return Array.isArray(H)?tn(H):H||null}function cr(H,L){return(gr(L)?L.asyncValidators:H)||null}function Ai(H){return Array.isArray(H)?sr(H):H||null}function gr(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}const En=H=>H instanceof bn,Ce=H=>H instanceof xn,we=H=>H instanceof Tn;function de(H){return En(H)?H.value:H.getRawValue()}function ze(H,L){const k=Ce(H),E=H.controls;if(!(k?Object.keys(E):E).length)throw new _.vHH(1e3,"");if(!E[L])throw new _.vHH(1001,"")}function ct(H,L){Ce(H),H._forEachChild((E,R)=>{if(void 0===L[R])throw new _.vHH(1002,"")})}class zt{constructor(L,k){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=L,this._rawAsyncValidators=k,this._composedValidatorFn=Li(this._rawValidators),this._composedAsyncValidatorFn=Ai(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(L){this._rawValidators=this._composedValidatorFn=L}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(L){this._rawAsyncValidators=this._composedAsyncValidatorFn=L}get parent(){return this._parent}get valid(){return this.status===It}get invalid(){return this.status===Ht}get pending(){return this.status==Wn}get disabled(){return this.status===Qr}get enabled(){return this.status!==Qr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(L){this._rawValidators=L,this._composedValidatorFn=Li(L)}setAsyncValidators(L){this._rawAsyncValidators=L,this._composedAsyncValidatorFn=Ai(L)}addValidators(L){this.setValidators(Yn(L,this._rawValidators))}addAsyncValidators(L){this.setAsyncValidators(Yn(L,this._rawAsyncValidators))}removeValidators(L){this.setValidators(Qt(L,this._rawValidators))}removeAsyncValidators(L){this.setAsyncValidators(Qt(L,this._rawAsyncValidators))}hasValidator(L){return Sr(this._rawValidators,L)}hasAsyncValidator(L){return Sr(this._rawAsyncValidators,L)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(L={}){this.touched=!0,this._parent&&!L.onlySelf&&this._parent.markAsTouched(L)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(L=>L.markAllAsTouched())}markAsUntouched(L={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}markAsDirty(L={}){this.pristine=!1,this._parent&&!L.onlySelf&&this._parent.markAsDirty(L)}markAsPristine(L={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}markAsPending(L={}){this.status=Wn,!1!==L.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!L.onlySelf&&this._parent.markAsPending(L)}disable(L={}){const k=this._parentMarkedDirty(L.onlySelf);this.status=Qr,this.errors=null,this._forEachChild(E=>{E.disable(Object.assign(Object.assign({},L),{onlySelf:!0}))}),this._updateValue(),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},L),{skipPristineCheck:k})),this._onDisabledChange.forEach(E=>E(!0))}enable(L={}){const k=this._parentMarkedDirty(L.onlySelf);this.status=It,this._forEachChild(E=>{E.enable(Object.assign(Object.assign({},L),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},L),{skipPristineCheck:k})),this._onDisabledChange.forEach(E=>E(!1))}_updateAncestors(L){this._parent&&!L.onlySelf&&(this._parent.updateValueAndValidity(L),L.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(L){this._parent=L}updateValueAndValidity(L={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===It||this.status===Wn)&&this._runAsyncValidator(L.emitEvent)),!1!==L.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!L.onlySelf&&this._parent.updateValueAndValidity(L)}_updateTreeValidity(L={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity(L)),this.updateValueAndValidity({onlySelf:!0,emitEvent:L.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qr:It}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(L){if(this.asyncValidator){this.status=Wn,this._hasOwnPendingAsyncValidator=!0;const k=nn(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(E=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(E,{emitEvent:L})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(L,k={}){this.errors=L,this._updateControlsErrors(!1!==k.emitEvent)}get(L){return function Fi(H,L,k){if(null==L||(Array.isArray(L)||(L=L.split(k)),Array.isArray(L)&&0===L.length))return null;let E=H;return L.forEach(R=>{E=Ce(E)?E.controls.hasOwnProperty(R)?E.controls[R]:null:we(E)&&E.at(R)||null}),E}(this,L,".")}getError(L,k){const E=k?this.get(k):this;return E&&E.errors?E.errors[L]:null}hasError(L,k){return!!this.getError(L,k)}get root(){let L=this;for(;L._parent;)L=L._parent;return L}_updateControlsErrors(L){this.status=this._calculateStatus(),L&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(L)}_initObservables(){this.valueChanges=new _.vpe,this.statusChanges=new _.vpe}_calculateStatus(){return this._allControlsDisabled()?Qr:this.errors?Ht:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wn)?Wn:this._anyControlsHaveStatus(Ht)?Ht:It}_anyControlsHaveStatus(L){return this._anyControls(k=>k.status===L)}_anyControlsDirty(){return this._anyControls(L=>L.dirty)}_anyControlsTouched(){return this._anyControls(L=>L.touched)}_updatePristine(L={}){this.pristine=!this._anyControlsDirty(),this._parent&&!L.onlySelf&&this._parent._updatePristine(L)}_updateTouched(L={}){this.touched=this._anyControlsTouched(),this._parent&&!L.onlySelf&&this._parent._updateTouched(L)}_isBoxedValue(L){return"object"==typeof L&&null!==L&&2===Object.keys(L).length&&"value"in L&&"disabled"in L}_registerOnCollectionChange(L){this._onCollectionChange=L}_setUpdateStrategy(L){gr(L)&&null!=L.updateOn&&(this._updateOn=L.updateOn)}_parentMarkedDirty(L){return!L&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class bn extends zt{constructor(L=null,k,E){super(ur(k),cr(E,k)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(L),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),gr(k)&&k.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(L)?L.value:L)}setValue(L,k={}){this.value=this._pendingValue=L,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(E=>E(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue(L,k={}){this.setValue(L,k)}reset(L=this.defaultValue,k={}){this._applyFormState(L),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls(L){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(L){this._onChange.push(L)}_unregisterOnChange(L){wr(this._onChange,L)}registerOnDisabledChange(L){this._onDisabledChange.push(L)}_unregisterOnDisabledChange(L){wr(this._onDisabledChange,L)}_forEachChild(L){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(L){this._isBoxedValue(L)?(this.value=this._pendingValue=L.value,L.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=L}}class xn extends zt{constructor(L,k,E){super(ur(k),cr(E,k)),this.controls=L,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(L,k){return this.controls[L]?this.controls[L]:(this.controls[L]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl(L,k,E={}){this.registerControl(L,k),this.updateValueAndValidity({emitEvent:E.emitEvent}),this._onCollectionChange()}removeControl(L,k={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl(L,k,E={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),delete this.controls[L],k&&this.registerControl(L,k),this.updateValueAndValidity({emitEvent:E.emitEvent}),this._onCollectionChange()}contains(L){return this.controls.hasOwnProperty(L)&&this.controls[L].enabled}setValue(L,k={}){ct(this,L),Object.keys(L).forEach(E=>{ze(this,E),this.controls[E].setValue(L[E],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(L,k={}){null!=L&&(Object.keys(L).forEach(E=>{this.controls[E]&&this.controls[E].patchValue(L[E],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(L={},k={}){this._forEachChild((E,R)=>{E.reset(L[R],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},(L,k,E)=>(L[E]=de(k),L))}_syncPendingControls(){let L=this._reduceChildren(!1,(k,E)=>!!E._syncPendingControls()||k);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){Object.keys(this.controls).forEach(k=>{const E=this.controls[k];E&&L(E,k)})}_setUpControls(){this._forEachChild(L=>{L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(L){for(const k of Object.keys(this.controls)){const E=this.controls[k];if(this.contains(k)&&L(E))return!0}return!1}_reduceValue(){return this._reduceChildren({},(L,k,E)=>((k.enabled||this.disabled)&&(L[E]=k.value),L))}_reduceChildren(L,k){let E=L;return this._forEachChild((R,Y)=>{E=k(E,R,Y)}),E}_allControlsDisabled(){for(const L of Object.keys(this.controls))if(this.controls[L].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Tn extends zt{constructor(L,k,E){super(ur(k),cr(E,k)),this.controls=L,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(L){return this.controls[L]}push(L,k={}){this.controls.push(L),this._registerControl(L),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert(L,k,E={}){this.controls.splice(L,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:E.emitEvent})}removeAt(L,k={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),this.controls.splice(L,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl(L,k,E={}){this.controls[L]&&this.controls[L]._registerOnCollectionChange(()=>{}),this.controls.splice(L,1),k&&(this.controls.splice(L,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:E.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(L,k={}){ct(this,L),L.forEach((E,R)=>{ze(this,R),this.at(R).setValue(E,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(L,k={}){null!=L&&(L.forEach((E,R)=>{this.at(R)&&this.at(R).patchValue(E,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(L=[],k={}){this._forEachChild((E,R)=>{E.reset(L[R],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map(L=>de(L))}clear(L={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:L.emitEvent}))}_syncPendingControls(){let L=this.controls.reduce((k,E)=>!!E._syncPendingControls()||k,!1);return L&&this.updateValueAndValidity({onlySelf:!0}),L}_forEachChild(L){this.controls.forEach((k,E)=>{L(k,E)})}_updateValue(){this.value=this.controls.filter(L=>L.enabled||this.disabled).map(L=>L.value)}_anyControls(L){return this.controls.some(k=>k.enabled&&L(k))}_setUpControls(){this._forEachChild(L=>this._registerControl(L))}_allControlsDisabled(){for(const L of this.controls)if(L.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(L){L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange)}}let xi=(()=>{class H extends yn{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return qe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}}return H.\u0275fac=function(){let L;return function(E){return(L||(L=_.n5z(H)))(E||H)}}(),H.\u0275dir=_.lG2({type:H,features:[_.qOj]}),H})(),Ie=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275dir=_.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})();const ve={provide:Xe,useExisting:(0,_.Gpc)(()=>je),multi:!0};let je=(()=>{class H extends at{writeValue(k){this.setProperty("value",null==k?"":k)}registerOnChange(k){this.onChange=E=>{k(""==E?null:parseFloat(E))}}}return H.\u0275fac=function(){let L;return function(E){return(L||(L=_.n5z(H)))(E||H)}}(),H.\u0275dir=_.lG2({type:H,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(k,E){1&k&&_.NdJ("input",function(Y){return E.onChange(Y.target.value)})("blur",function(){return E.onTouched()})},features:[_._Bn([ve]),_.qOj]}),H})(),Gt=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({}),H})();const jr=new _.OlP("NgModelWithFormControlWarning"),$r={provide:yn,useExisting:(0,_.Gpc)(()=>_s)};let _s=(()=>{class H extends yn{constructor(k,E){super(),this.validators=k,this.asyncValidators=E,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new _.vpe,this._setValidators(k),this._setAsyncValidators(E)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(hn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const E=this.form.get(k.path);return St(E,k),E.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),E}getControl(k){return this.form.get(k.path)}removeControl(k){$t(k.control||null,k,!1),wr(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,E){this.form.get(k.path).setValue(E)}onSubmit(k){return this.submitted=!0,function Yr(H,L){H._syncPendingControls(),L.forEach(k=>{const E=k.control;"submit"===E.updateOn&&E._pendingChange&&(k.viewToModelUpdate(E._pendingValue),E._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const E=k.control,R=this.form.get(k.path);E!==R&&($t(E||null,k),En(R)&&(St(R,k),k.control=R))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const E=this.form.get(k.path);(function In(H,L){ar(H,L)})(E,k),E.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const E=this.form.get(k.path);E&&function Dr(H,L){return hn(H,L)}(E,k)&&E.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ar(this.form,this),this._oldForm&&hn(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(Et,10),_.Y36(Ct,10))},H.\u0275dir=_.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(k,E){1&k&&_.NdJ("submit",function(Y){return E.onSubmit(Y)})("reset",function(){return E.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[_._Bn([$r]),_.qOj,_.TTD]}),H})();const vs={provide:yn,useExisting:(0,_.Gpc)(()=>_o)};let _o=(()=>{class H extends xi{constructor(k,E,R){super(),this._parent=k,this._setValidators(E),this._setAsyncValidators(R)}_checkParentType(){Ki(this._parent)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(yn,13),_.Y36(Et,10),_.Y36(Ct,10))},H.\u0275dir=_.lG2({type:H,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[_._Bn([vs]),_.qOj]}),H})();const Ro={provide:yn,useExisting:(0,_.Gpc)(()=>Or)};let Or=(()=>{class H extends yn{constructor(k,E,R){super(),this._parent=k,this._setValidators(E),this._setAsyncValidators(R)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return qe(null==this.name?this.name:this.name.toString(),this._parent)}_checkParentType(){Ki(this._parent)}}return H.\u0275fac=function(k){return new(k||H)(_.Y36(yn,13),_.Y36(Et,10),_.Y36(Ct,10))},H.\u0275dir=_.lG2({type:H,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[_._Bn([Ro]),_.qOj]}),H})();function Ki(H){return!(H instanceof _o||H instanceof _s||H instanceof Or)}const Ri={provide:rn,useExisting:(0,_.Gpc)(()=>xs)};let xs=(()=>{class H extends rn{constructor(k,E,R,Y,ae){super(),this._ngModelWarningConfig=ae,this._added=!1,this.update=new _.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(E),this._setAsyncValidators(R),this.valueAccessor=function Er(H,L){if(!L)return null;let k,E,R;return Array.isArray(L),L.forEach(Y=>{Y.constructor===ht?k=Y:function ki(H){return Object.getPrototypeOf(H.constructor)===at}(Y)?E=Y:R=Y}),R||E||k||null}(0,Y)}set isDisabled(k){}ngOnChanges(k){this._added||this._setUpControl(),function cs(H,L){if(!H.hasOwnProperty("model"))return!1;const k=H.model;return!!k.isFirstChange()||!Object.is(L,k.currentValue)}(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return qe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return H._ngModelWarningSentOnce=!1,H.\u0275fac=function(k){return new(k||H)(_.Y36(yn,13),_.Y36(Et,10),_.Y36(Ct,10),_.Y36(Xe,10),_.Y36(jr,8))},H.\u0275dir=_.lG2({type:H,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[_._Bn([Ri]),_.qOj,_.TTD]}),H})(),Hr=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({imports:[[Gt]]}),H})(),Jt=(()=>{class H{}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({imports:[Hr]}),H})(),qi=(()=>{class H{static withConfig(k){return{ngModule:H,providers:[{provide:jr,useValue:k.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275mod=_.oAB({type:H}),H.\u0275inj=_.cJS({imports:[Hr]}),H})(),io=(()=>{class H{group(k,E=null){const R=this._reduceControls(k);let Ae,Y=null,ae=null;return null!=E&&(function Nn(H){return void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn}(E)?(Y=null!=E.validators?E.validators:null,ae=null!=E.asyncValidators?E.asyncValidators:null,Ae=null!=E.updateOn?E.updateOn:void 0):(Y=null!=E.validator?E.validator:null,ae=null!=E.asyncValidator?E.asyncValidator:null)),new xn(R,{asyncValidators:ae,updateOn:Ae,validators:Y})}control(k,E,R){return new bn(k,E,R)}array(k,E,R){const Y=k.map(ae=>this._createControl(ae));return new Tn(Y,E,R)}_reduceControls(k){const E={};return Object.keys(k).forEach(R=>{E[R]=this._createControl(k[R])}),E}_createControl(k){return En(k)||Ce(k)||we(k)?k:Array.isArray(k)?this.control(k[0],k.length>1?k[1]:null,k.length>2?k[2]:null):this.control(k)}}return H.\u0275fac=function(k){return new(k||H)},H.\u0275prov=_.Yz7({token:H,factory:H.\u0275fac,providedIn:qi}),H})()},441:(Ot,We,B)=>{B.d(We,{gz:()=>Zr,F0:()=>Rr,rH:()=>Zs,Od:()=>Oo,yS:()=>Sa,Bz:()=>Is,lC:()=>Ms});var _=B(5e3),te=B(8306),ie=B(4742),Se=B(8996),De=B(4671),Re=B(3268),Ve=B(7669),Me=B(1810),Ue=B(5403),ce=B(9672);function Tt(S,D,b){S?(0,ce.f)(b,S,D):D()}var at=B(576);function Xe(S,D){const b=(0,at.m)(S)?S:()=>S,N=P=>P.error(b());return new te.y(D?P=>D.schedule(N,0,P):N)}var gt=B(8421);function tt(S){return new te.y(D=>{(0,gt.Xf)(S()).subscribe(D)})}var pt=B(727),xe=B(4482);function kt(){return(0,xe.e)((S,D)=>{let b=null;S._refCount++;const N=(0,Ue.x)(D,void 0,void 0,void 0,()=>{if(!S||S._refCount<=0||0<--S._refCount)return void(b=null);const P=S._connection,K=b;b=null,P&&(!K||P===K)&&P.unsubscribe(),D.unsubscribe()});S.subscribe(N),N.closed||(b=S.connect())})}class ht extends te.y{constructor(D,b){super(),this.source=D,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,xe.A)(D)&&(this.lift=D.lift)}_subscribe(D){return this.getSubject().subscribe(D)}getSubject(){const D=this._subject;return(!D||D.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:D}=this;this._subject=this._connection=null,null==D||D.unsubscribe()}connect(){let D=this._connection;if(!D){D=this._connection=new pt.w0;const b=this.getSubject();D.add(this.source.subscribe((0,Ue.x)(b,void 0,()=>{this._teardown(),b.complete()},N=>{this._teardown(),b.error(N)},()=>this._teardown()))),D.closed&&(this._connection=null,D=pt.w0.EMPTY)}return D}refCount(){return kt()(this)}}var W=B(9646),Ge=B(1135),Et=B(6805),Ct=B(7272),ue=B(515),lt=B(7579);function ge(S){return(0,xe.e)((D,b)=>{let K,N=null,P=!1;N=D.subscribe((0,Ue.x)(b,void 0,void 0,he=>{K=(0,gt.Xf)(S(he,ge(S)(D))),N?(N.unsubscribe(),N=null,K.subscribe(b)):P=!0})),P&&(N.unsubscribe(),N=null,K.subscribe(b))})}var Fe=B(5577);function Be(S,D){return(0,at.m)(D)?(0,Fe.z)(S,D,1):(0,Fe.z)(S,1)}var Qe=B(9300);function Ze(S){return S<=0?()=>ue.E:(0,xe.e)((D,b)=>{let N=[];D.subscribe((0,Ue.x)(b,P=>{N.push(P),S<N.length&&N.shift()},()=>{for(const P of N)b.next(P);b.complete()},void 0,()=>{N=null}))})}var wt=B(8068),Nt=B(6590),it=B(4004),nn=B(3900),un=B(5698),Bt=B(8675),Yt=B(5026),Mn=B(590),Vt=B(8505),tn=B(8189),Cr=B(9808);class sr{constructor(D,b){this.id=D,this.url=b}}class Pr extends sr{constructor(D,b,N="imperative",P=null){super(D,b),this.navigationTrigger=N,this.restoredState=P}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Xn extends sr{constructor(D,b,N){super(D,b),this.urlAfterRedirects=N}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class fr extends sr{constructor(D,b,N){super(D,b),this.reason=N}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Bn extends sr{constructor(D,b,N){super(D,b),this.error=N}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sr extends sr{constructor(D,b,N,P){super(D,b),this.urlAfterRedirects=N,this.state=P}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yn extends sr{constructor(D,b,N,P){super(D,b),this.urlAfterRedirects=N,this.state=P}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qt extends sr{constructor(D,b,N,P,K){super(D,b),this.urlAfterRedirects=N,this.state=P,this.shouldActivate=K}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kn extends sr{constructor(D,b,N,P){super(D,b),this.urlAfterRedirects=N,this.state=P}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rn extends sr{constructor(D,b,N,P){super(D,b),this.urlAfterRedirects=N,this.state=P}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class yn{constructor(D){this.route=D}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Wi{constructor(D){this.route=D}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class di{constructor(D){this.snapshot=D}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oi{constructor(D){this.snapshot=D}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class zr{constructor(D){this.snapshot=D}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hi{constructor(D){this.snapshot=D}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vr{constructor(D,b,N){this.routerEvent=D,this.position=b,this.anchor=N}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Lt="primary";class qt{constructor(D){this.params=D||{}}has(D){return Object.prototype.hasOwnProperty.call(this.params,D)}get(D){if(this.has(D)){const b=this.params[D];return Array.isArray(b)?b[0]:b}return null}getAll(D){if(this.has(D)){const b=this.params[D];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function an(S){return new qt(S)}const br="ngNavigationCancelingError";function Si(S){const D=Error("NavigationCancelingError: "+S);return D[br]=!0,D}function vi(S,D,b){const N=b.path.split("/");if(N.length>S.length||"full"===b.pathMatch&&(D.hasChildren()||N.length<S.length))return null;const P={};for(let K=0;K<N.length;K++){const he=N[K],Te=S[K];if(he.startsWith(":"))P[he.substring(1)]=Te;else if(he!==Te.path)return null}return{consumed:S.slice(0,N.length),posParams:P}}function pr(S,D){const b=S?Object.keys(S):void 0,N=D?Object.keys(D):void 0;if(!b||!N||b.length!=N.length)return!1;let P;for(let K=0;K<b.length;K++)if(P=b[K],!fn(S[P],D[P]))return!1;return!0}function fn(S,D){if(Array.isArray(S)&&Array.isArray(D)){if(S.length!==D.length)return!1;const b=[...S].sort(),N=[...D].sort();return b.every((P,K)=>N[K]===P)}return S===D}function Oe(S){return Array.prototype.concat.apply([],S)}function ye(S){return S.length>0?S[S.length-1]:null}function ke(S,D){for(const b in S)S.hasOwnProperty(b)&&D(S[b],b)}function pe(S){return(0,_.CqO)(S)?S:(0,_.QGY)(S)?(0,Se.D)(Promise.resolve(S)):(0,W.of)(S)}const St={exact:function ar(S,D,b){if(!ei(S.segments,D.segments)||!qr(S.segments,D.segments,b)||S.numberOfChildren!==D.numberOfChildren)return!1;for(const N in D.children)if(!S.children[N]||!ar(S.children[N],D.children[N],b))return!1;return!0},subset:rr},$t={exact:function or(S,D){return pr(S,D)},subset:function hn(S,D){return Object.keys(D).length<=Object.keys(S).length&&Object.keys(D).every(b=>fn(S[b],D[b]))},ignored:()=>!0};function pn(S,D,b){return St[b.paths](S.root,D.root,b.matrixParams)&&$t[b.queryParams](S.queryParams,D.queryParams)&&!("exact"===b.fragment&&S.fragment!==D.fragment)}function rr(S,D,b){return zi(S,D,D.segments,b)}function zi(S,D,b,N){if(S.segments.length>b.length){const P=S.segments.slice(0,b.length);return!(!ei(P,b)||D.hasChildren()||!qr(P,b,N))}if(S.segments.length===b.length){if(!ei(S.segments,b)||!qr(S.segments,b,N))return!1;for(const P in D.children)if(!S.children[P]||!rr(S.children[P],D.children[P],N))return!1;return!0}{const P=b.slice(0,S.segments.length),K=b.slice(S.segments.length);return!!(ei(S.segments,P)&&qr(S.segments,P,N)&&S.children[Lt])&&zi(S.children[Lt],D,K,N)}}function qr(S,D,b){return D.every((N,P)=>$t[b](S[P].parameters,N.parameters))}class wi{constructor(D,b,N){this.root=D,this.queryParams=b,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=an(this.queryParams)),this._queryParamMap}toString(){return ki.serialize(this)}}class In{constructor(D,b){this.segments=D,this.children=b,this.parent=null,ke(b,(N,P)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yr(this)}}class Dr{constructor(D,b){this.path=D,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=an(this.parameters)),this._parameterMap}toString(){return Qr(this)}}function ei(S,D){return S.length===D.length&&S.every((b,N)=>b.path===D[N].path)}class fi{}class cs{parse(D){const b=new we(D);return new wi(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(D){const b=`/${Er(D.root,!0)}`,N=function ur(S){const D=Object.keys(S).map(b=>{const N=S[b];return Array.isArray(N)?N.map(P=>`${Qi(b)}=${Qi(P)}`).join("&"):`${Qi(b)}=${Qi(N)}`}).filter(b=>!!b);return D.length?`?${D.join("&")}`:""}(D.queryParams);return`${b}${N}${"string"==typeof D.fragment?`#${function er(S){return encodeURI(S)}(D.fragment)}`:""}`}}const ki=new cs;function Yr(S){return S.segments.map(D=>Qr(D)).join("/")}function Er(S,D){if(!S.hasChildren())return Yr(S);if(D){const b=S.children[Lt]?Er(S.children[Lt],!1):"",N=[];return ke(S.children,(P,K)=>{K!==Lt&&N.push(`${K}:${Er(P,!1)}`)}),N.length>0?`${b}(${N.join("//")})`:b}{const b=function Br(S,D){let b=[];return ke(S.children,(N,P)=>{P===Lt&&(b=b.concat(D(N,P)))}),ke(S.children,(N,P)=>{P!==Lt&&(b=b.concat(D(N,P)))}),b}(S,(N,P)=>P===Lt?[Er(S.children[Lt],!1)]:[`${P}:${Er(N,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[Lt]?`${Yr(S)}/${b[0]}`:`${Yr(S)}/(${b.join("//")})`}}function wr(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qi(S){return wr(S).replace(/%3B/gi,";")}function It(S){return wr(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ht(S){return decodeURIComponent(S)}function Wn(S){return Ht(S.replace(/\+/g,"%20"))}function Qr(S){return`${It(S.path)}${function Fi(S){return Object.keys(S).map(D=>`;${It(D)}=${It(S[D])}`).join("")}(S.parameters)}`}const Li=/^[^\/()?;=#]+/;function cr(S){const D=S.match(Li);return D?D[0]:""}const Ai=/^[^=?&#]+/,En=/^[^&#]+/;class we{constructor(D){this.url=D,this.remaining=D}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new In([],{}):new In([],this.parseChildren())}parseQueryParams(){const D={};if(this.consumeOptional("?"))do{this.parseQueryParam(D)}while(this.consumeOptional("&"));return D}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const D=[];for(this.peekStartsWith("(")||D.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),D.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(D.length>0||Object.keys(b).length>0)&&(N[Lt]=new In(D,b)),N}parseSegment(){const D=cr(this.remaining);if(""===D&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(D),new Dr(Ht(D),this.parseMatrixParams())}parseMatrixParams(){const D={};for(;this.consumeOptional(";");)this.parseParam(D);return D}parseParam(D){const b=cr(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const P=cr(this.remaining);P&&(N=P,this.capture(N))}D[Ht(b)]=Ht(N)}parseQueryParam(D){const b=function gr(S){const D=S.match(Ai);return D?D[0]:""}(this.remaining);if(!b)return;this.capture(b);let N="";if(this.consumeOptional("=")){const he=function Ce(S){const D=S.match(En);return D?D[0]:""}(this.remaining);he&&(N=he,this.capture(N))}const P=Wn(b),K=Wn(N);if(D.hasOwnProperty(P)){let he=D[P];Array.isArray(he)||(he=[he],D[P]=he),he.push(K)}else D[P]=K}parseParens(D){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=cr(this.remaining),P=this.remaining[N.length];if("/"!==P&&")"!==P&&";"!==P)throw new Error(`Cannot parse url '${this.url}'`);let K;N.indexOf(":")>-1?(K=N.substr(0,N.indexOf(":")),this.capture(K),this.capture(":")):D&&(K=Lt);const he=this.parseChildren();b[K]=1===Object.keys(he).length?he[Lt]:new In([],he),this.consumeOptional("//")}return b}peekStartsWith(D){return this.remaining.startsWith(D)}consumeOptional(D){return!!this.peekStartsWith(D)&&(this.remaining=this.remaining.substring(D.length),!0)}capture(D){if(!this.consumeOptional(D))throw new Error(`Expected "${D}".`)}}class de{constructor(D){this._root=D}get root(){return this._root.value}parent(D){const b=this.pathFromRoot(D);return b.length>1?b[b.length-2]:null}children(D){const b=ze(D,this._root);return b?b.children.map(N=>N.value):[]}firstChild(D){const b=ze(D,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(D){const b=ct(D,this._root);return b.length<2?[]:b[b.length-2].children.map(P=>P.value).filter(P=>P!==D)}pathFromRoot(D){return ct(D,this._root).map(b=>b.value)}}function ze(S,D){if(S===D.value)return D;for(const b of D.children){const N=ze(S,b);if(N)return N}return null}function ct(S,D){if(S===D.value)return[D];for(const b of D.children){const N=ct(S,b);if(N.length)return N.unshift(D),N}return[]}class zt{constructor(D,b){this.value=D,this.children=b}toString(){return`TreeNode(${this.value})`}}function bn(S){const D={};return S&&S.children.forEach(b=>D[b.value.outlet]=b),D}class xn extends de{constructor(D,b){super(D),this.snapshot=b,Ci(this,D)}toString(){return this.snapshot.toString()}}function Tn(S,D){const b=function Fs(S,D){const he=new Ls([],{},{},"",{},Lt,D,null,S.root,-1,{});return new rs("",new zt(he,[]))}(S,D),N=new Ge.X([new Dr("",{})]),P=new Ge.X({}),K=new Ge.X({}),he=new Ge.X({}),Te=new Ge.X(""),ft=new Zr(N,P,he,Te,K,Lt,D,b.root);return ft.snapshot=b.root,new xn(new zt(ft,[]),b)}class Zr{constructor(D,b,N,P,K,he,Te,ft){this.url=D,this.params=b,this.queryParams=N,this.fragment=P,this.data=K,this.outlet=he,this.component=Te,this._futureSnapshot=ft}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,it.U)(D=>an(D)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,it.U)(D=>an(D)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pi(S,D="emptyOnly"){const b=S.pathFromRoot;let N=0;if("always"!==D)for(N=b.length-1;N>=1;){const P=b[N],K=b[N-1];if(P.routeConfig&&""===P.routeConfig.path)N--;else{if(K.component)break;N--}}return function xi(S){return S.reduce((D,b)=>({params:Object.assign(Object.assign({},D.params),b.params),data:Object.assign(Object.assign({},D.data),b.data),resolve:Object.assign(Object.assign({},D.resolve),b._resolvedData)}),{params:{},data:{},resolve:{}})}(b.slice(N))}class Ls{constructor(D,b,N,P,K,he,Te,ft,Xt,dr,dn){this.url=D,this.params=b,this.queryParams=N,this.fragment=P,this.data=K,this.outlet=he,this.component=Te,this.routeConfig=ft,this._urlSegment=Xt,this._lastPathIndex=dr,this._resolve=dn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=an(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=an(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class rs extends de{constructor(D,b){super(b),this.url=D,Ci(this,b)}toString(){return is(this._root)}}function Ci(S,D){D.value._routerState=S,D.children.forEach(b=>Ci(S,b))}function is(S){const D=S.children.length>0?` { ${S.children.map(is).join(", ")} } `:"";return`${S.value}${D}`}function to(S){if(S.snapshot){const D=S.snapshot,b=S._futureSnapshot;S.snapshot=b,pr(D.queryParams,b.queryParams)||S.queryParams.next(b.queryParams),D.fragment!==b.fragment&&S.fragment.next(b.fragment),pr(D.params,b.params)||S.params.next(b.params),function Kr(S,D){if(S.length!==D.length)return!1;for(let b=0;b<S.length;++b)if(!pr(S[b],D[b]))return!1;return!0}(D.url,b.url)||S.url.next(b.url),pr(D.data,b.data)||S.data.next(b.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function ss(S,D){const b=pr(S.params,D.params)&&function Ii(S,D){return ei(S,D)&&S.every((b,N)=>pr(b.parameters,D[N].parameters))}(S.url,D.url);return b&&!(!S.parent!=!D.parent)&&(!S.parent||ss(S.parent,D.parent))}function _r(S,D,b){if(b&&S.shouldReuseRoute(D.value,b.value.snapshot)){const N=b.value;N._futureSnapshot=D.value;const P=function qn(S,D,b){return D.children.map(N=>{for(const P of b.children)if(S.shouldReuseRoute(N.value,P.value.snapshot))return _r(S,N,P);return _r(S,N)})}(S,D,b);return new zt(N,P)}{if(S.shouldAttach(D.value)){const K=S.retrieve(D.value);if(null!==K){const he=K.route;return he.value._futureSnapshot=D.value,he.children=D.children.map(Te=>_r(S,Te)),he}}const N=function Ie(S){return new Zr(new Ge.X(S.url),new Ge.X(S.params),new Ge.X(S.queryParams),new Ge.X(S.fragment),new Ge.X(S.data),S.outlet,S.component,S)}(D.value),P=D.children.map(K=>_r(S,K));return new zt(N,P)}}function je(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function st(S){return"object"==typeof S&&null!=S&&S.outlets}function Mt(S,D,b,N,P){let K={};if(N&&ke(N,(Te,ft)=>{K[ft]=Array.isArray(Te)?Te.map(Xt=>`${Xt}`):`${Te}`}),S===D)return new wi(b,K,P);const he=Gt(S,D,b);return new wi(he,K,P)}function Gt(S,D,b){const N={};return ke(S.children,(P,K)=>{N[K]=P===D?b:Gt(P,D,b)}),new In(S.segments,N)}class Zn{constructor(D,b,N){if(this.isAbsolute=D,this.numberOfDoubleDots=b,this.commands=N,D&&N.length>0&&je(N[0]))throw new Error("Root segment cannot have matrix parameters");const P=N.find(st);if(P&&P!==ye(N))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gn{constructor(D,b,N){this.segmentGroup=D,this.processChildren=b,this.index=N}}function Vi(S,D,b){if(S||(S=new In([],{})),0===S.segments.length&&S.hasChildren())return $r(S,D,b);const N=function _s(S,D,b){let N=0,P=D;const K={match:!1,pathIndex:0,commandIndex:0};for(;P<S.segments.length;){if(N>=b.length)return K;const he=S.segments[P],Te=b[N];if(st(Te))break;const ft=`${Te}`,Xt=N<b.length-1?b[N+1]:null;if(P>0&&void 0===ft)break;if(ft&&Xt&&"object"==typeof Xt&&void 0===Xt.outlets){if(!Or(ft,Xt,he))return K;N+=2}else{if(!Or(ft,{},he))return K;N++}P++}return{match:!0,pathIndex:P,commandIndex:N}}(S,D,b),P=b.slice(N.commandIndex);if(N.match&&N.pathIndex<S.segments.length){const K=new In(S.segments.slice(0,N.pathIndex),{});return K.children[Lt]=new In(S.segments.slice(N.pathIndex),S.children),$r(K,0,P)}return N.match&&0===P.length?new In(S.segments,{}):N.match&&!S.hasChildren()?vs(S,D,b):N.match?$r(S,0,P):vs(S,D,b)}function $r(S,D,b){if(0===b.length)return new In(S.segments,{});{const N=function yo(S){return st(S[0])?S[0].outlets:{[Lt]:S}}(b),P={};return ke(N,(K,he)=>{"string"==typeof K&&(K=[K]),null!==K&&(P[he]=Vi(S.children[he],D,K))}),ke(S.children,(K,he)=>{void 0===N[he]&&(P[he]=K)}),new In(S.segments,P)}}function vs(S,D,b){const N=S.segments.slice(0,D);let P=0;for(;P<b.length;){const K=b[P];if(st(K)){const ft=_o(K.outlets);return new In(N,ft)}if(0===P&&je(b[0])){N.push(new Dr(S.segments[D].path,Ro(b[0]))),P++;continue}const he=st(K)?K.outlets[Lt]:`${K}`,Te=P<b.length-1?b[P+1]:null;he&&Te&&je(Te)?(N.push(new Dr(he,Ro(Te))),P+=2):(N.push(new Dr(he,{})),P++)}return new In(N,{})}function _o(S){const D={};return ke(S,(b,N)=>{"string"==typeof b&&(b=[b]),null!==b&&(D[N]=vs(new In([],{}),0,b))}),D}function Ro(S){const D={};return ke(S,(b,N)=>D[N]=`${b}`),D}function Or(S,D,b){return S==b.path&&pr(D,b.parameters)}class Ri{constructor(D,b,N,P){this.routeReuseStrategy=D,this.futureState=b,this.currState=N,this.forwardEvent=P}activate(D){const b=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,N,D),to(this.futureState.root),this.activateChildRoutes(b,N,D)}deactivateChildRoutes(D,b,N){const P=bn(b);D.children.forEach(K=>{const he=K.value.outlet;this.deactivateRoutes(K,P[he],N),delete P[he]}),ke(P,(K,he)=>{this.deactivateRouteAndItsChildren(K,N)})}deactivateRoutes(D,b,N){const P=D.value,K=b?b.value:null;if(P===K)if(P.component){const he=N.getContext(P.outlet);he&&this.deactivateChildRoutes(D,b,he.children)}else this.deactivateChildRoutes(D,b,N);else K&&this.deactivateRouteAndItsChildren(b,N)}deactivateRouteAndItsChildren(D,b){D.value.component&&this.routeReuseStrategy.shouldDetach(D.value.snapshot)?this.detachAndStoreRouteSubtree(D,b):this.deactivateRouteAndOutlet(D,b)}detachAndStoreRouteSubtree(D,b){const N=b.getContext(D.value.outlet),P=N&&D.value.component?N.children:b,K=bn(D);for(const he of Object.keys(K))this.deactivateRouteAndItsChildren(K[he],P);if(N&&N.outlet){const he=N.outlet.detach(),Te=N.children.onOutletDeactivated();this.routeReuseStrategy.store(D.value.snapshot,{componentRef:he,route:D,contexts:Te})}}deactivateRouteAndOutlet(D,b){const N=b.getContext(D.value.outlet),P=N&&D.value.component?N.children:b,K=bn(D);for(const he of Object.keys(K))this.deactivateRouteAndItsChildren(K[he],P);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(D,b,N){const P=bn(b);D.children.forEach(K=>{this.activateRoutes(K,P[K.value.outlet],N),this.forwardEvent(new hi(K.value.snapshot))}),D.children.length&&this.forwardEvent(new oi(D.value.snapshot))}activateRoutes(D,b,N){const P=D.value,K=b?b.value:null;if(to(P),P===K)if(P.component){const he=N.getOrCreateContext(P.outlet);this.activateChildRoutes(D,b,he.children)}else this.activateChildRoutes(D,b,N);else if(P.component){const he=N.getOrCreateContext(P.outlet);if(this.routeReuseStrategy.shouldAttach(P.snapshot)){const Te=this.routeReuseStrategy.retrieve(P.snapshot);this.routeReuseStrategy.store(P.snapshot,null),he.children.onOutletReAttached(Te.contexts),he.attachRef=Te.componentRef,he.route=Te.route.value,he.outlet&&he.outlet.attach(Te.componentRef,Te.route.value),to(Te.route.value),this.activateChildRoutes(D,null,he.children)}else{const Te=function xs(S){for(let D=S.parent;D;D=D.parent){const b=D.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig;if(b&&b.component)return null}return null}(P.snapshot),ft=Te?Te.module.componentFactoryResolver:null;he.attachRef=null,he.route=P,he.resolver=ft,he.outlet&&he.outlet.activateWith(P,ft),this.activateChildRoutes(D,null,he.children)}}else this.activateChildRoutes(D,null,N)}}class vo{constructor(D,b){this.routes=D,this.module=b}}function Rs(S){return"function"==typeof S}function bi(S){return S instanceof wi}const as=Symbol("INITIAL_VALUE");function ui(){return(0,nn.w)(S=>function oe(...S){const D=(0,Ve.yG)(S),b=(0,Ve.jO)(S),{args:N,keys:P}=(0,ie.D)(S);if(0===N.length)return(0,Se.D)([],D);const K=new te.y(function Ne(S,D,b=De.y){return N=>{Tt(D,()=>{const{length:P}=S,K=new Array(P);let he=P,Te=P;for(let ft=0;ft<P;ft++)Tt(D,()=>{const Xt=(0,Se.D)(S[ft],D);let dr=!1;Xt.subscribe((0,Ue.x)(N,dn=>{K[ft]=dn,dr||(dr=!0,Te--),Te||N.next(b(K.slice()))},()=>{--he||N.complete()}))},N)},N)}}(N,D,P?he=>(0,Me.n)(P,he):De.y));return b?K.pipe((0,Re.Z)(b)):K}(S.map(D=>D.pipe((0,un.q)(1),(0,Bt.O)(as)))).pipe((0,Yt.R)((D,b)=>{let N=!1;return b.reduce((P,K,he)=>P!==as?P:(K===as&&(N=!0),N||!1!==K&&he!==b.length-1&&!bi(K)?P:K),D)},as),(0,Qe.h)(D=>D!==as),(0,it.U)(D=>bi(D)?D:!0===D),(0,un.q)(1)))}class Eo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ti,this.attachRef=null}}class ti{constructor(){this.contexts=new Map}onChildOutletCreated(D,b){const N=this.getOrCreateContext(D);N.outlet=b,this.contexts.set(D,N)}onChildOutletDestroyed(D){const b=this.getContext(D);b&&(b.outlet=null,b.attachRef=null)}onOutletDeactivated(){const D=this.contexts;return this.contexts=new Map,D}onOutletReAttached(D){this.contexts=D}getOrCreateContext(D){let b=this.getContext(D);return b||(b=new Eo,this.contexts.set(D,b)),b}getContext(D){return this.contexts.get(D)||null}}let Ms=(()=>{class S{constructor(b,N,P,K,he){this.parentContexts=b,this.location=N,this.resolver=P,this.changeDetector=he,this.activated=null,this._activatedRoute=null,this.activateEvents=new _.vpe,this.deactivateEvents=new _.vpe,this.attachEvents=new _.vpe,this.detachEvents=new _.vpe,this.name=K||Lt,b.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const b=this.parentContexts.getContext(this.name);b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,N){this.activated=b,this._activatedRoute=N,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,N){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=b;const he=(N=N||this.resolver).resolveComponentFactory(b._futureSnapshot.routeConfig.component),Te=this.parentContexts.getOrCreateContext(this.name).children,ft=new ni(b,Te,this.location.injector);this.activated=this.location.createComponent(he,this.location.length,ft),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(b){return new(b||S)(_.Y36(ti),_.Y36(_.s_b),_.Y36(_._Vd),_.$8M("name"),_.Y36(_.sBO))},S.\u0275dir=_.lG2({type:S,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),S})();class ni{constructor(D,b,N){this.route=D,this.childContexts=b,this.parent=N}get(D,b){return D===Zr?this.route:D===ti?this.childContexts:this.parent.get(D,b)}}let Es=(()=>{class S{}return S.\u0275fac=function(b){return new(b||S)},S.\u0275cmp=_.Xpm({type:S,selectors:[["ng-component"]],decls:1,vars:0,template:function(b,N){1&b&&_._UZ(0,"router-outlet")},directives:[Ms],encapsulation:2}),S})();function Jr(S,D=""){for(let b=0;b<S.length;b++){const N=S[b];ro(N,tr(D,N))}}function ro(S,D){S.children&&Jr(S.children,D)}function tr(S,D){return D?S||D.path?S&&!D.path?`${S}/`:!S&&D.path?D.path:`${S}/${D.path}`:"":S}function U(S){const D=S.children&&S.children.map(U),b=D?Object.assign(Object.assign({},S),{children:D}):Object.assign({},S);return!b.component&&(D||b.loadChildren)&&b.outlet&&b.outlet!==Lt&&(b.component=Es),b}function Q(S){return S.outlet||Lt}function V(S,D){const b=S.filter(N=>Q(N)===D);return b.push(...S.filter(N=>Q(N)!==D)),b}const ne={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _e(S,D,b){var N;if(""===D.path)return"full"===D.pathMatch&&(S.hasChildren()||b.length>0)?Object.assign({},ne):{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const K=(D.matcher||vi)(b,S,D);if(!K)return Object.assign({},ne);const he={};ke(K.posParams,(ft,Xt)=>{he[Xt]=ft.path});const Te=K.consumed.length>0?Object.assign(Object.assign({},he),K.consumed[K.consumed.length-1].parameters):he;return{matched:!0,consumedSegments:K.consumed,remainingSegments:b.slice(K.consumed.length),parameters:Te,positionalParamSegments:null!==(N=K.posParams)&&void 0!==N?N:{}}}function et(S,D,b,N,P="corrected"){if(b.length>0&&function Sn(S,D,b){return b.some(N=>jn(S,D,N)&&Q(N)!==Lt)}(S,b,N)){const he=new In(D,function ln(S,D,b,N){const P={};P[Lt]=N,N._sourceSegment=S,N._segmentIndexShift=D.length;for(const K of b)if(""===K.path&&Q(K)!==Lt){const he=new In([],{});he._sourceSegment=S,he._segmentIndexShift=D.length,P[Q(K)]=he}return P}(S,D,N,new In(b,S.children)));return he._sourceSegment=S,he._segmentIndexShift=D.length,{segmentGroup:he,slicedSegments:[]}}if(0===b.length&&function ir(S,D,b){return b.some(N=>jn(S,D,N))}(S,b,N)){const he=new In(S.segments,function mt(S,D,b,N,P,K){const he={};for(const Te of N)if(jn(S,b,Te)&&!P[Q(Te)]){const ft=new In([],{});ft._sourceSegment=S,ft._segmentIndexShift="legacy"===K?S.segments.length:D.length,he[Q(Te)]=ft}return Object.assign(Object.assign({},P),he)}(S,D,b,N,S.children,P));return he._sourceSegment=S,he._segmentIndexShift=D.length,{segmentGroup:he,slicedSegments:b}}const K=new In(S.segments,S.children);return K._sourceSegment=S,K._segmentIndexShift=D.length,{segmentGroup:K,slicedSegments:b}}function jn(S,D,b){return(!(S.hasChildren()||D.length>0)||"full"!==b.pathMatch)&&""===b.path}function cn(S,D,b,N){return!!(Q(S)===N||N!==Lt&&jn(D,b,S))&&("**"===S.path||_e(D,S,b).matched)}function Xr(S,D,b){return 0===D.length&&!S.children[b]}class Ar{constructor(D){this.segmentGroup=D||null}}class kr{constructor(D){this.urlTree=D}}function Ui(S){return Xe(new Ar(S))}function Hr(S){return Xe(new kr(S))}class io{constructor(D,b,N,P,K){this.configLoader=b,this.urlSerializer=N,this.urlTree=P,this.config=K,this.allowRedirects=!0,this.ngModule=D.get(_.h0i)}apply(){const D=et(this.urlTree.root,[],[],this.config).segmentGroup,b=new In(D.segments,D.children);return this.expandSegmentGroup(this.ngModule,this.config,b,Lt).pipe((0,it.U)(K=>this.createUrlTree(H(K),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ge(K=>{if(K instanceof kr)return this.allowRedirects=!1,this.match(K.urlTree);throw K instanceof Ar?this.noMatchError(K):K}))}match(D){return this.expandSegmentGroup(this.ngModule,this.config,D.root,Lt).pipe((0,it.U)(P=>this.createUrlTree(H(P),D.queryParams,D.fragment))).pipe(ge(P=>{throw P instanceof Ar?this.noMatchError(P):P}))}noMatchError(D){return new Error(`Cannot match any routes. URL Segment: '${D.segmentGroup}'`)}createUrlTree(D,b,N){const P=D.segments.length>0?new In([],{[Lt]:D}):D;return new wi(P,b,N)}expandSegmentGroup(D,b,N,P){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(D,b,N).pipe((0,it.U)(K=>new In([],K))):this.expandSegment(D,N,b,N.segments,P,!0)}expandChildren(D,b,N){const P=[];for(const K of Object.keys(N.children))"primary"===K?P.unshift(K):P.push(K);return(0,Se.D)(P).pipe(Be(K=>{const he=N.children[K],Te=V(b,K);return this.expandSegmentGroup(D,Te,he,K).pipe((0,it.U)(ft=>({segment:ft,outlet:K})))}),(0,Yt.R)((K,he)=>(K[he.outlet]=he.segment,K),{}),function en(S,D){const b=arguments.length>=2;return N=>N.pipe(S?(0,Qe.h)((P,K)=>S(P,K,N)):De.y,Ze(1),b?(0,Nt.d)(D):(0,wt.T)(()=>new Et.K))}())}expandSegment(D,b,N,P,K,he){return(0,Se.D)(N).pipe(Be(Te=>this.expandSegmentAgainstRoute(D,b,N,Te,P,K,he).pipe(ge(Xt=>{if(Xt instanceof Ar)return(0,W.of)(null);throw Xt}))),(0,Mn.P)(Te=>!!Te),ge((Te,ft)=>{if(Te instanceof Et.K||"EmptyError"===Te.name)return Xr(b,P,K)?(0,W.of)(new In([],{})):Ui(b);throw Te}))}expandSegmentAgainstRoute(D,b,N,P,K,he,Te){return cn(P,b,K,he)?void 0===P.redirectTo?this.matchSegmentAgainstRoute(D,b,P,K,he):Te&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(D,b,N,P,K,he):Ui(b):Ui(b)}expandSegmentAgainstRouteUsingRedirect(D,b,N,P,K,he){return"**"===P.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(D,N,P,he):this.expandRegularSegmentAgainstRouteUsingRedirect(D,b,N,P,K,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(D,b,N,P){const K=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?Hr(K):this.lineralizeSegments(N,K).pipe((0,Fe.z)(he=>{const Te=new In(he,{});return this.expandSegment(D,Te,b,he,P,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(D,b,N,P,K,he){const{matched:Te,consumedSegments:ft,remainingSegments:Xt,positionalParamSegments:dr}=_e(b,P,K);if(!Te)return Ui(b);const dn=this.applyRedirectCommands(ft,P.redirectTo,dr);return P.redirectTo.startsWith("/")?Hr(dn):this.lineralizeSegments(P,dn).pipe((0,Fe.z)(Vr=>this.expandSegment(D,b,N,Vr.concat(Xt),he,!1)))}matchSegmentAgainstRoute(D,b,N,P,K){if("**"===N.path)return N.loadChildren?(N._loadedConfig?(0,W.of)(N._loadedConfig):this.configLoader.load(D.injector,N)).pipe((0,it.U)(dn=>(N._loadedConfig=dn,new In(P,{})))):(0,W.of)(new In(P,{}));const{matched:he,consumedSegments:Te,remainingSegments:ft}=_e(b,N,P);return he?this.getChildConfig(D,N,P).pipe((0,Fe.z)(dr=>{const dn=dr.module,Vr=dr.routes,{segmentGroup:mr,slicedSegments:Xs}=et(b,Te,ft,Vr),ko=new In(mr.segments,mr.children);if(0===Xs.length&&ko.hasChildren())return this.expandChildren(dn,Vr,ko).pipe((0,it.U)(lo=>new In(Te,lo)));if(0===Vr.length&&0===Xs.length)return(0,W.of)(new In(Te,{}));const xa=Q(N)===K;return this.expandSegment(dn,ko,Vr,Xs,xa?Lt:K,!0).pipe((0,it.U)(Rn=>new In(Te.concat(Rn.segments),Rn.children)))})):Ui(b)}getChildConfig(D,b,N){return b.children?(0,W.of)(new vo(b.children,D)):b.loadChildren?void 0!==b._loadedConfig?(0,W.of)(b._loadedConfig):this.runCanLoadGuards(D.injector,b,N).pipe((0,Fe.z)(P=>P?this.configLoader.load(D.injector,b).pipe((0,it.U)(K=>(b._loadedConfig=K,K))):function qi(S){return Xe(Si(`Cannot load children because the guard of the route "path: '${S.path}'" returned false`))}(b))):(0,W.of)(new vo([],D))}runCanLoadGuards(D,b,N){const P=b.canLoad;if(!P||0===P.length)return(0,W.of)(!0);const K=P.map(he=>{const Te=D.get(he);let ft;if(function no(S){return S&&Rs(S.canLoad)}(Te))ft=Te.canLoad(b,N);else{if(!Rs(Te))throw new Error("Invalid CanLoad guard");ft=Te(b,N)}return pe(ft)});return(0,W.of)(K).pipe(ui(),(0,Vt.b)(he=>{if(!bi(he))return;const Te=Si(`Redirecting to "${this.urlSerializer.serialize(he)}"`);throw Te.url=he,Te}),(0,it.U)(he=>!0===he))}lineralizeSegments(D,b){let N=[],P=b.root;for(;;){if(N=N.concat(P.segments),0===P.numberOfChildren)return(0,W.of)(N);if(P.numberOfChildren>1||!P.children[Lt])return Xe(new Error(`Only absolute redirects can have named outlets. redirectTo: '${D.redirectTo}'`));P=P.children[Lt]}}applyRedirectCommands(D,b,N){return this.applyRedirectCreatreUrlTree(b,this.urlSerializer.parse(b),D,N)}applyRedirectCreatreUrlTree(D,b,N,P){const K=this.createSegmentGroup(D,b.root,N,P);return new wi(K,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(D,b){const N={};return ke(D,(P,K)=>{if("string"==typeof P&&P.startsWith(":")){const Te=P.substring(1);N[K]=b[Te]}else N[K]=P}),N}createSegmentGroup(D,b,N,P){const K=this.createSegments(D,b.segments,N,P);let he={};return ke(b.children,(Te,ft)=>{he[ft]=this.createSegmentGroup(D,Te,N,P)}),new In(K,he)}createSegments(D,b,N,P){return b.map(K=>K.path.startsWith(":")?this.findPosParam(D,K,P):this.findOrReturn(K,N))}findPosParam(D,b,N){const P=N[b.path.substring(1)];if(!P)throw new Error(`Cannot redirect to '${D}'. Cannot find '${b.path}'.`);return P}findOrReturn(D,b){let N=0;for(const P of b){if(P.path===D.path)return b.splice(N),P;N++}return D}}function H(S){const D={};for(const N of Object.keys(S.children)){const K=H(S.children[N]);(K.segments.length>0||K.hasChildren())&&(D[N]=K)}return function ds(S){if(1===S.numberOfChildren&&S.children[Lt]){const D=S.children[Lt];return new In(S.segments.concat(D.segments),D.children)}return S}(new In(S.segments,D))}class k{constructor(D){this.path=D,this.route=this.path[this.path.length-1]}}class E{constructor(D,b){this.component=D,this.route=b}}function R(S,D,b){const N=S._root;return Ke(N,D?D._root:null,b,[N.value])}function ae(S,D,b){const N=function Ae(S){if(!S)return null;for(let D=S.parent;D;D=D.parent){const b=D.routeConfig;if(b&&b._loadedConfig)return b._loadedConfig}return null}(D);return(N?N.module.injector:b).get(S)}function Ke(S,D,b,N,P={canDeactivateChecks:[],canActivateChecks:[]}){const K=bn(D);return S.children.forEach(he=>{(function yt(S,D,b,N,P={canDeactivateChecks:[],canActivateChecks:[]}){const K=S.value,he=D?D.value:null,Te=b?b.getContext(S.value.outlet):null;if(he&&K.routeConfig===he.routeConfig){const ft=function Kt(S,D,b){if("function"==typeof b)return b(S,D);switch(b){case"pathParamsChange":return!ei(S.url,D.url);case"pathParamsOrQueryParamsChange":return!ei(S.url,D.url)||!pr(S.queryParams,D.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ss(S,D)||!pr(S.queryParams,D.queryParams);default:return!ss(S,D)}}(he,K,K.routeConfig.runGuardsAndResolvers);ft?P.canActivateChecks.push(new k(N)):(K.data=he.data,K._resolvedData=he._resolvedData),Ke(S,D,K.component?Te?Te.children:null:b,N,P),ft&&Te&&Te.outlet&&Te.outlet.isActivated&&P.canDeactivateChecks.push(new E(Te.outlet.component,he))}else he&&Ut(D,Te,P),P.canActivateChecks.push(new k(N)),Ke(S,null,K.component?Te?Te.children:null:b,N,P)})(he,K[he.value.outlet],b,N.concat([he.value]),P),delete K[he.value.outlet]}),ke(K,(he,Te)=>Ut(he,b.getContext(Te),P)),P}function Ut(S,D,b){const N=bn(S),P=S.value;ke(N,(K,he)=>{Ut(K,P.component?D?D.children.getContext(he):null:D,b)}),b.canDeactivateChecks.push(new E(P.component&&D&&D.outlet&&D.outlet.isActivated?D.outlet.component:null,P))}class ri{}function zs(S){return new te.y(D=>D.error(S))}class Bi{constructor(D,b,N,P,K,he){this.rootComponentType=D,this.config=b,this.urlTree=N,this.url=P,this.paramsInheritanceStrategy=K,this.relativeLinkResolution=he}recognize(){const D=et(this.urlTree.root,[],[],this.config.filter(he=>void 0===he.redirectTo),this.relativeLinkResolution).segmentGroup,b=this.processSegmentGroup(this.config,D,Lt);if(null===b)return null;const N=new Ls([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Lt,this.rootComponentType,null,this.urlTree.root,-1,{}),P=new zt(N,b),K=new rs(this.url,P);return this.inheritParamsAndData(K._root),K}inheritParamsAndData(D){const b=D.value,N=pi(b,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data),D.children.forEach(P=>this.inheritParamsAndData(P))}processSegmentGroup(D,b,N){return 0===b.segments.length&&b.hasChildren()?this.processChildren(D,b):this.processSegment(D,b,b.segments,N)}processChildren(D,b){const N=[];for(const K of Object.keys(b.children)){const he=b.children[K],Te=V(D,K),ft=this.processSegmentGroup(Te,he,K);if(null===ft)return null;N.push(...ft)}const P=No(N);return function so(S){S.sort((D,b)=>D.value.outlet===Lt?-1:b.value.outlet===Lt?1:D.value.outlet.localeCompare(b.value.outlet))}(P),P}processSegment(D,b,N,P){for(const K of D){const he=this.processSegmentAgainstRoute(K,b,N,P);if(null!==he)return he}return Xr(b,N,P)?[]:null}processSegmentAgainstRoute(D,b,N,P){if(D.redirectTo||!cn(D,b,N,P))return null;let K,he=[],Te=[];if("**"===D.path){const mr=N.length>0?ye(N).parameters:{};K=new Ls(N,mr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oo(D),Q(D),D.component,D,mu(b),Da(b)+N.length,Ta(D))}else{const mr=_e(b,D,N);if(!mr.matched)return null;he=mr.consumedSegments,Te=mr.remainingSegments,K=new Ls(he,mr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,oo(D),Q(D),D.component,D,mu(b),Da(b)+he.length,Ta(D))}const ft=function wo(S){return S.children?S.children:S.loadChildren?S._loadedConfig.routes:[]}(D),{segmentGroup:Xt,slicedSegments:dr}=et(b,he,Te,ft.filter(mr=>void 0===mr.redirectTo),this.relativeLinkResolution);if(0===dr.length&&Xt.hasChildren()){const mr=this.processChildren(ft,Xt);return null===mr?null:[new zt(K,mr)]}if(0===ft.length&&0===dr.length)return[new zt(K,[])];const dn=Q(D)===P,Vr=this.processSegment(ft,Xt,dr,dn?Lt:P);return null===Vr?null:[new zt(K,Vr)]}}function Mo(S){const D=S.value.routeConfig;return D&&""===D.path&&void 0===D.redirectTo}function No(S){const D=[],b=new Set;for(const N of S){if(!Mo(N)){D.push(N);continue}const P=D.find(K=>N.value.routeConfig===K.value.routeConfig);void 0!==P?(P.children.push(...N.children),b.add(P)):D.push(N)}for(const N of b){const P=No(N.children);D.push(new zt(N.value,P))}return D.filter(N=>!b.has(N))}function mu(S){let D=S;for(;D._sourceSegment;)D=D._sourceSegment;return D}function Da(S){let D=S,b=D._segmentIndexShift?D._segmentIndexShift:0;for(;D._sourceSegment;)D=D._sourceSegment,b+=D._segmentIndexShift?D._segmentIndexShift:0;return b-1}function oo(S){return S.data||{}}function Ta(S){return S.resolve||{}}function da(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}function ji(S){return(0,nn.w)(D=>{const b=S(D);return b?(0,Se.D)(b).pipe((0,it.U)(()=>D)):(0,W.of)(D)})}class Fl extends class Zi{shouldDetach(D){return!1}store(D,b){}shouldAttach(D){return!1}retrieve(D){return null}shouldReuseRoute(D,b){return D.routeConfig===b.routeConfig}}{}const hs=new _.OlP("ROUTES");class ul{constructor(D,b,N,P){this.injector=D,this.compiler=b,this.onLoadStartListener=N,this.onLoadEndListener=P}load(D,b){if(b._loader$)return b._loader$;this.onLoadStartListener&&this.onLoadStartListener(b);const P=this.loadModuleFactory(b.loadChildren).pipe((0,it.U)(K=>{this.onLoadEndListener&&this.onLoadEndListener(b);const he=K.create(D);return new vo(Oe(he.injector.get(hs,void 0,_.XFs.Self|_.XFs.Optional)).map(U),he)}),ge(K=>{throw b._loader$=void 0,K}));return b._loader$=new ht(P,()=>new lt.x).pipe(kt()),b._loader$}loadModuleFactory(D){return pe(D()).pipe((0,Fe.z)(b=>b instanceof _.YKP?(0,W.of)(b):(0,Se.D)(this.compiler.compileModuleAsync(b))))}}class Jo{shouldProcessUrl(D){return!0}extract(D){return D}merge(D,b){return D}}function yu(S){throw S}function ha(S,D,b){return D.parse("/")}function Vs(S,D){return(0,W.of)(null)}const ws={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ks={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Rr=(()=>{class S{constructor(b,N,P,K,he,Te,ft){this.rootComponentType=b,this.urlSerializer=N,this.rootContexts=P,this.location=K,this.config=ft,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new lt.x,this.errorHandler=yu,this.malformedUriErrorHandler=ha,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Vs,afterPreactivation:Vs},this.urlHandlingStrategy=new Jo,this.routeReuseStrategy=new Fl,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=he.get(_.h0i),this.console=he.get(_.c2e);const dn=he.get(_.R0b);this.isNgZoneEnabled=dn instanceof _.R0b&&_.R0b.isInAngularZone(),this.resetConfig(ft),this.currentUrlTree=function qe(){return new wi(new In([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ul(he,Te,Vr=>this.triggerEvent(new yn(Vr)),Vr=>this.triggerEvent(new Wi(Vr))),this.routerState=Tn(this.currentUrlTree,this.rootComponentType),this.transitions=new Ge.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var b;return null===(b=this.location.getState())||void 0===b?void 0:b.\u0275routerPageId}setupNavigations(b){const N=this.events;return b.pipe((0,Qe.h)(P=>0!==P.id),(0,it.U)(P=>Object.assign(Object.assign({},P),{extractedUrl:this.urlHandlingStrategy.extract(P.rawUrl)})),(0,nn.w)(P=>{let K=!1,he=!1;return(0,W.of)(P).pipe((0,Vt.b)(Te=>{this.currentNavigation={id:Te.id,initialUrl:Te.currentRawUrl,extractedUrl:Te.extractedUrl,trigger:Te.source,extras:Te.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,nn.w)(Te=>{const ft=this.browserUrlTree.toString(),Xt=!this.navigated||Te.extractedUrl.toString()!==ft||ft!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Xt)&&this.urlHandlingStrategy.shouldProcessUrl(Te.rawUrl))return qs(Te.source)&&(this.browserUrlTree=Te.extractedUrl),(0,W.of)(Te).pipe((0,nn.w)(dn=>{const Vr=this.transitions.getValue();return N.next(new Pr(dn.id,this.serializeUrl(dn.extractedUrl),dn.source,dn.restoredState)),Vr!==this.transitions.getValue()?ue.E:Promise.resolve(dn)}),function L(S,D,b,N){return(0,nn.w)(P=>function Nn(S,D,b,N,P){return new io(S,D,b,N,P).apply()}(S,D,b,P.extractedUrl,N).pipe((0,it.U)(K=>Object.assign(Object.assign({},P),{urlAfterRedirects:K}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Vt.b)(dn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:dn.urlAfterRedirects})}),function ao(S,D,b,N,P){return(0,Fe.z)(K=>function lr(S,D,b,N,P="emptyOnly",K="legacy"){try{const he=new Bi(S,D,b,N,P,K).recognize();return null===he?zs(new ri):(0,W.of)(he)}catch(he){return zs(he)}}(S,D,K.urlAfterRedirects,b(K.urlAfterRedirects),N,P).pipe((0,it.U)(he=>Object.assign(Object.assign({},K),{targetSnapshot:he}))))}(this.rootComponentType,this.config,dn=>this.serializeUrl(dn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Vt.b)(dn=>{if("eager"===this.urlUpdateStrategy){if(!dn.extras.skipLocationChange){const mr=this.urlHandlingStrategy.merge(dn.urlAfterRedirects,dn.rawUrl);this.setBrowserUrl(mr,dn)}this.browserUrlTree=dn.urlAfterRedirects}const Vr=new Sr(dn.id,this.serializeUrl(dn.extractedUrl),this.serializeUrl(dn.urlAfterRedirects),dn.targetSnapshot);N.next(Vr)}));if(Xt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Vr,extractedUrl:mr,source:Xs,restoredState:ko,extras:xa}=Te,na=new Pr(Vr,this.serializeUrl(mr),Xs,ko);N.next(na);const Rn=Tn(mr,this.rootComponentType).snapshot;return(0,W.of)(Object.assign(Object.assign({},Te),{targetSnapshot:Rn,urlAfterRedirects:mr,extras:Object.assign(Object.assign({},xa),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Te.rawUrl,Te.resolve(null),ue.E}),ji(Te=>{const{targetSnapshot:ft,id:Xt,extractedUrl:dr,rawUrl:dn,extras:{skipLocationChange:Vr,replaceUrl:mr}}=Te;return this.hooks.beforePreactivation(ft,{navigationId:Xt,appliedUrlTree:dr,rawUrlTree:dn,skipLocationChange:!!Vr,replaceUrl:!!mr})}),(0,Vt.b)(Te=>{const ft=new Yn(Te.id,this.serializeUrl(Te.extractedUrl),this.serializeUrl(Te.urlAfterRedirects),Te.targetSnapshot);this.triggerEvent(ft)}),(0,it.U)(Te=>Object.assign(Object.assign({},Te),{guards:R(Te.targetSnapshot,Te.currentSnapshot,this.rootContexts)})),function $n(S,D){return(0,Fe.z)(b=>{const{targetSnapshot:N,currentSnapshot:P,guards:{canActivateChecks:K,canDeactivateChecks:he}}=b;return 0===he.length&&0===K.length?(0,W.of)(Object.assign(Object.assign({},b),{guardsResult:!0})):function Qn(S,D,b,N){return(0,Se.D)(S).pipe((0,Fe.z)(P=>function Lr(S,D,b,N,P){const K=D&&D.routeConfig?D.routeConfig.canDeactivate:null;if(!K||0===K.length)return(0,W.of)(!0);const he=K.map(Te=>{const ft=ae(Te,D,P);let Xt;if(function _n(S){return S&&Rs(S.canDeactivate)}(ft))Xt=pe(ft.canDeactivate(S,D,b,N));else{if(!Rs(ft))throw new Error("Invalid CanDeactivate guard");Xt=pe(ft(S,D,b,N))}return Xt.pipe((0,Mn.P)())});return(0,W.of)(he).pipe(ui())}(P.component,P.route,b,D,N)),(0,Mn.P)(P=>!0!==P,!0))}(he,N,P,S).pipe((0,Fe.z)(Te=>Te&&function ba(S){return"boolean"==typeof S}(Te)?function xr(S,D,b,N){return(0,Se.D)(D).pipe(Be(P=>(0,Ct.z)(function nr(S,D){return null!==S&&D&&D(new di(S)),(0,W.of)(!0)}(P.route.parent,N),function Ir(S,D){return null!==S&&D&&D(new zr(S)),(0,W.of)(!0)}(P.route,N),function Mi(S,D,b){const N=D[D.length-1],K=D.slice(0,D.length-1).reverse().map(he=>function Y(S){const D=S.routeConfig?S.routeConfig.canActivateChild:null;return D&&0!==D.length?{node:S,guards:D}:null}(he)).filter(he=>null!==he).map(he=>tt(()=>{const Te=he.guards.map(ft=>{const Xt=ae(ft,he.node,b);let dr;if(function os(S){return S&&Rs(S.canActivateChild)}(Xt))dr=pe(Xt.canActivateChild(N,S));else{if(!Rs(Xt))throw new Error("Invalid CanActivateChild guard");dr=pe(Xt(N,S))}return dr.pipe((0,Mn.P)())});return(0,W.of)(Te).pipe(ui())}));return(0,W.of)(K).pipe(ui())}(S,P.path,b),function Fr(S,D,b){const N=D.routeConfig?D.routeConfig.canActivate:null;if(!N||0===N.length)return(0,W.of)(!0);const P=N.map(K=>tt(()=>{const he=ae(K,D,b);let Te;if(function Di(S){return S&&Rs(S.canActivate)}(he))Te=pe(he.canActivate(D,S));else{if(!Rs(he))throw new Error("Invalid CanActivate guard");Te=pe(he(D,S))}return Te.pipe((0,Mn.P)())}));return(0,W.of)(P).pipe(ui())}(S,P.route,b))),(0,Mn.P)(P=>!0!==P,!0))}(N,K,S,D):(0,W.of)(Te)),(0,it.U)(Te=>Object.assign(Object.assign({},b),{guardsResult:Te})))})}(this.ngModule.injector,Te=>this.triggerEvent(Te)),(0,Vt.b)(Te=>{if(bi(Te.guardsResult)){const Xt=Si(`Redirecting to "${this.serializeUrl(Te.guardsResult)}"`);throw Xt.url=Te.guardsResult,Xt}const ft=new Qt(Te.id,this.serializeUrl(Te.extractedUrl),this.serializeUrl(Te.urlAfterRedirects),Te.targetSnapshot,!!Te.guardsResult);this.triggerEvent(ft)}),(0,Qe.h)(Te=>!!Te.guardsResult||(this.restoreHistory(Te),this.cancelNavigationTransition(Te,""),!1)),ji(Te=>{if(Te.guards.canActivateChecks.length)return(0,W.of)(Te).pipe((0,Vt.b)(ft=>{const Xt=new kn(ft.id,this.serializeUrl(ft.extractedUrl),this.serializeUrl(ft.urlAfterRedirects),ft.targetSnapshot);this.triggerEvent(Xt)}),(0,nn.w)(ft=>{let Xt=!1;return(0,W.of)(ft).pipe(function uo(S,D){return(0,Fe.z)(b=>{const{targetSnapshot:N,guards:{canActivateChecks:P}}=b;if(!P.length)return(0,W.of)(b);let K=0;return(0,Se.D)(P).pipe(Be(he=>function nu(S,D,b,N){return function Qo(S,D,b,N){const P=da(S);if(0===P.length)return(0,W.of)({});const K={};return(0,Se.D)(P).pipe((0,Fe.z)(he=>function al(S,D,b,N){const P=ae(S,D,N);return pe(P.resolve?P.resolve(D,b):P(D,b))}(S[he],D,b,N).pipe((0,Vt.b)(Te=>{K[he]=Te}))),Ze(1),(0,Fe.z)(()=>da(K).length===P.length?(0,W.of)(K):ue.E))}(S._resolve,S,D,N).pipe((0,it.U)(K=>(S._resolvedData=K,S.data=Object.assign(Object.assign({},S.data),pi(S,b).resolve),null)))}(he.route,N,S,D)),(0,Vt.b)(()=>K++),Ze(1),(0,Fe.z)(he=>K===P.length?(0,W.of)(b):ue.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Vt.b)({next:()=>Xt=!0,complete:()=>{Xt||(this.restoreHistory(ft),this.cancelNavigationTransition(ft,"At least one route resolver didn't emit any value."))}}))}),(0,Vt.b)(ft=>{const Xt=new rn(ft.id,this.serializeUrl(ft.extractedUrl),this.serializeUrl(ft.urlAfterRedirects),ft.targetSnapshot);this.triggerEvent(Xt)}))}),ji(Te=>{const{targetSnapshot:ft,id:Xt,extractedUrl:dr,rawUrl:dn,extras:{skipLocationChange:Vr,replaceUrl:mr}}=Te;return this.hooks.afterPreactivation(ft,{navigationId:Xt,appliedUrlTree:dr,rawUrlTree:dn,skipLocationChange:!!Vr,replaceUrl:!!mr})}),(0,it.U)(Te=>{const ft=function mo(S,D,b){const N=_r(S,D._root,b?b._root:void 0);return new xn(N,D)}(this.routeReuseStrategy,Te.targetSnapshot,Te.currentRouterState);return Object.assign(Object.assign({},Te),{targetRouterState:ft})}),(0,Vt.b)(Te=>{this.currentUrlTree=Te.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Te.urlAfterRedirects,Te.rawUrl),this.routerState=Te.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Te.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Te),this.browserUrlTree=Te.urlAfterRedirects)}),((S,D,b)=>(0,it.U)(N=>(new Ri(D,N.targetRouterState,N.currentRouterState,b).activate(S),N)))(this.rootContexts,this.routeReuseStrategy,Te=>this.triggerEvent(Te)),(0,Vt.b)({next(){K=!0},complete(){K=!0}}),function Wt(S){return(0,xe.e)((D,b)=>{try{D.subscribe(b)}finally{b.add(S)}})}(()=>{var Te;K||he||this.cancelNavigationTransition(P,`Navigation ID ${P.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Te=this.currentNavigation)||void 0===Te?void 0:Te.id)===P.id&&(this.currentNavigation=null)}),ge(Te=>{if(he=!0,function wn(S){return S&&S[br]}(Te)){const ft=bi(Te.url);ft||(this.navigated=!0,this.restoreHistory(P,!0));const Xt=new fr(P.id,this.serializeUrl(P.extractedUrl),Te.message);N.next(Xt),ft?setTimeout(()=>{const dr=this.urlHandlingStrategy.merge(Te.url,this.rawUrlTree),dn={skipLocationChange:P.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||qs(P.source)};this.scheduleNavigation(dr,"imperative",null,dn,{resolve:P.resolve,reject:P.reject,promise:P.promise})},0):P.resolve(!1)}else{this.restoreHistory(P,!0);const ft=new Bn(P.id,this.serializeUrl(P.extractedUrl),Te);N.next(ft);try{P.resolve(this.errorHandler(Te))}catch(Xt){P.reject(Xt)}}return ue.E}))}))}resetRootComponentType(b){this.rootComponentType=b,this.routerState.root.component=this.rootComponentType}setTransition(b){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),b))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const N="popstate"===b.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{var P;const K={replaceUrl:!0},he=(null===(P=b.state)||void 0===P?void 0:P.navigationId)?b.state:null;if(he){const ft=Object.assign({},he);delete ft.navigationId,delete ft.\u0275routerPageId,0!==Object.keys(ft).length&&(K.state=ft)}const Te=this.parseUrl(b.url);this.scheduleNavigation(Te,N,he,K)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(b){this.events.next(b)}resetConfig(b){Jr(b),this.config=b.map(U),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,N={}){const{relativeTo:P,queryParams:K,fragment:he,queryParamsHandling:Te,preserveFragment:ft}=N,Xt=P||this.routerState.root,dr=ft?this.currentUrlTree.fragment:he;let dn=null;switch(Te){case"merge":dn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),K);break;case"preserve":dn=this.currentUrlTree.queryParams;break;default:dn=K||null}return null!==dn&&(dn=this.removeEmptyProps(dn)),function ve(S,D,b,N,P){if(0===b.length)return Mt(D.root,D.root,D.root,N,P);const K=function ai(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new Zn(!0,0,S);let D=0,b=!1;const N=S.reduce((P,K,he)=>{if("object"==typeof K&&null!=K){if(K.outlets){const Te={};return ke(K.outlets,(ft,Xt)=>{Te[Xt]="string"==typeof ft?ft.split("/"):ft}),[...P,{outlets:Te}]}if(K.segmentPath)return[...P,K.segmentPath]}return"string"!=typeof K?[...P,K]:0===he?(K.split("/").forEach((Te,ft)=>{0==ft&&"."===Te||(0==ft&&""===Te?b=!0:".."===Te?D++:""!=Te&&P.push(Te))}),P):[...P,K]},[]);return new Zn(b,D,N)}(b);if(K.toRoot())return Mt(D.root,D.root,new In([],{}),N,P);const he=function Dn(S,D,b){if(S.isAbsolute)return new gn(D.root,!0,0);if(-1===b.snapshot._lastPathIndex){const K=b.snapshot._urlSegment;return new gn(K,K===D.root,0)}const N=je(S.commands[0])?0:1;return function jr(S,D,b){let N=S,P=D,K=b;for(;K>P;){if(K-=P,N=N.parent,!N)throw new Error("Invalid number of '../'");P=N.segments.length}return new gn(N,!1,P-K)}(b.snapshot._urlSegment,b.snapshot._lastPathIndex+N,S.numberOfDoubleDots)}(K,D,S),Te=he.processChildren?$r(he.segmentGroup,he.index,K.commands):Vi(he.segmentGroup,he.index,K.commands);return Mt(D.root,he.segmentGroup,Te,N,P)}(Xt,this.currentUrlTree,b,dn,null!=dr?dr:null)}navigateByUrl(b,N={skipLocationChange:!1}){const P=bi(b)?b:this.parseUrl(b),K=this.urlHandlingStrategy.merge(P,this.rawUrlTree);return this.scheduleNavigation(K,"imperative",null,N)}navigate(b,N={skipLocationChange:!1}){return function ju(S){for(let D=0;D<S.length;D++){const b=S[D];if(null==b)throw new Error(`The requested path contains ${b} segment at index ${D}`)}}(b),this.navigateByUrl(this.createUrlTree(b,N),N)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let N;try{N=this.urlSerializer.parse(b)}catch(P){N=this.malformedUriErrorHandler(P,this.urlSerializer,b)}return N}isActive(b,N){let P;if(P=!0===N?Object.assign({},ws):!1===N?Object.assign({},Ks):N,bi(b))return pn(this.currentUrlTree,b,P);const K=this.parseUrl(b);return pn(this.currentUrlTree,K,P)}removeEmptyProps(b){return Object.keys(b).reduce((N,P)=>{const K=b[P];return null!=K&&(N[P]=K),N},{})}processNavigations(){this.navigations.subscribe(b=>{this.navigated=!0,this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId,this.events.next(new Xn(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,b.resolve(!0)},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}scheduleNavigation(b,N,P,K,he){var Te,ft;if(this.disposed)return Promise.resolve(!1);let Xt,dr,dn;he?(Xt=he.resolve,dr=he.reject,dn=he.promise):dn=new Promise((Xs,ko)=>{Xt=Xs,dr=ko});const Vr=++this.navigationId;let mr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(P=this.location.getState()),mr=P&&P.\u0275routerPageId?P.\u0275routerPageId:K.replaceUrl||K.skipLocationChange?null!==(Te=this.browserPageId)&&void 0!==Te?Te:0:(null!==(ft=this.browserPageId)&&void 0!==ft?ft:0)+1):mr=0,this.setTransition({id:Vr,targetPageId:mr,source:N,restoredState:P,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:b,extras:K,resolve:Xt,reject:dr,promise:dn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),dn.catch(Xs=>Promise.reject(Xs))}setBrowserUrl(b,N){const P=this.urlSerializer.serialize(b),K=Object.assign(Object.assign({},N.extras.state),this.generateNgRouterState(N.id,N.targetPageId));this.location.isCurrentPathEqualTo(P)||N.extras.replaceUrl?this.location.replaceState(P,"",K):this.location.go(P,"",K)}restoreHistory(b,N=!1){var P,K;if("computed"===this.canceledNavigationResolution){const he=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(P=this.currentNavigation)||void 0===P?void 0:P.finalUrl)||0===he?this.currentUrlTree===(null===(K=this.currentNavigation)||void 0===K?void 0:K.finalUrl)&&0===he&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(he)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(b,N){const P=new fr(b.id,this.serializeUrl(b.extractedUrl),N);this.triggerEvent(P),b.resolve(!1)}generateNgRouterState(b,N){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:N}:{navigationId:b}}}return S.\u0275fac=function(b){_.$Z()},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})();function qs(S){return"imperative"!==S}let Zs=(()=>{class S{constructor(b,N,P,K,he){this.router=b,this.route=N,this.tabIndexAttribute=P,this.renderer=K,this.el=he,this.commands=null,this.onChanges=new lt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(b){if(null!=this.tabIndexAttribute)return;const N=this.renderer,P=this.el.nativeElement;null!==b?N.setAttribute(P,"tabindex",b):N.removeAttribute(P,"tabindex")}ngOnChanges(b){this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const b={skipLocationChange:Ys(this.skipLocationChange),replaceUrl:Ys(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,b),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ys(this.preserveFragment)})}}return S.\u0275fac=function(b){return new(b||S)(_.Y36(Rr),_.Y36(Zr),_.$8M("tabindex"),_.Y36(_.Qsj),_.Y36(_.SBq))},S.\u0275dir=_.lG2({type:S,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(b,N){1&b&&_.NdJ("click",function(){return N.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),S})(),Sa=(()=>{class S{constructor(b,N,P){this.router=b,this.route=N,this.locationStrategy=P,this.commands=null,this.href=null,this.onChanges=new lt.x,this.subscription=b.events.subscribe(K=>{K instanceof Xn&&this.updateTargetUrlAndHref()})}set routerLink(b){this.commands=null!=b?Array.isArray(b)?b:[b]:null}ngOnChanges(b){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(b,N,P,K,he){if(0!==b||N||P||K||he||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Te={skipLocationChange:Ys(this.skipLocationChange),replaceUrl:Ys(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Te),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ys(this.preserveFragment)})}}return S.\u0275fac=function(b){return new(b||S)(_.Y36(Rr),_.Y36(Zr),_.Y36(Cr.S$))},S.\u0275dir=_.lG2({type:S,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(b,N){1&b&&_.NdJ("click",function(K){return N.onClick(K.button,K.ctrlKey,K.shiftKey,K.altKey,K.metaKey)}),2&b&&_.uIk("target",N.target)("href",N.href,_.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[_.TTD]}),S})();function Ys(S){return""===S||!!S}let Oo=(()=>{class S{constructor(b,N,P,K,he,Te){this.router=b,this.element=N,this.renderer=P,this.cdr=K,this.link=he,this.linkWithHref=Te,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _.vpe,this.routerEventsSubscription=b.events.subscribe(ft=>{ft instanceof Xn&&this.update()})}ngAfterContentInit(){(0,W.of)(this.links.changes,this.linksWithHrefs.changes,(0,W.of)(null)).pipe((0,tn.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var b;null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe();const N=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(P=>!!P).map(P=>P.onChanges);this.linkInputChangesSubscription=(0,Se.D)(N).pipe((0,tn.J)()).subscribe(P=>{this.isActive!==this.isLinkActive(this.router)(P)&&this.update()})}set routerLinkActive(b){const N=Array.isArray(b)?b:b.split(" ");this.classes=N.filter(P=>!!P)}ngOnChanges(b){this.update()}ngOnDestroy(){var b;this.routerEventsSubscription.unsubscribe(),null===(b=this.linkInputChangesSubscription)||void 0===b||b.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this.isActive!==b&&(this.isActive=b,this.cdr.markForCheck(),this.classes.forEach(N=>{b?this.renderer.addClass(this.element.nativeElement,N):this.renderer.removeClass(this.element.nativeElement,N)}),this.isActiveChange.emit(b))})}isLinkActive(b){const N=function $o(S){return!!S.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return P=>!!P.urlTree&&b.isActive(P.urlTree,N)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.linkWithHref&&b(this.linkWithHref)||this.links.some(b)||this.linksWithHrefs.some(b)}}return S.\u0275fac=function(b){return new(b||S)(_.Y36(Rr),_.Y36(_.SBq),_.Y36(_.Qsj),_.Y36(_.sBO),_.Y36(Zs,8),_.Y36(Sa,8))},S.\u0275dir=_.lG2({type:S,selectors:[["","routerLinkActive",""]],contentQueries:function(b,N,P){if(1&b&&(_.Suo(P,Zs,5),_.Suo(P,Sa,5)),2&b){let K;_.iGM(K=_.CRH())&&(N.links=K),_.iGM(K=_.CRH())&&(N.linksWithHrefs=K)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[_.TTD]}),S})();class Xo{}class _u{preload(D,b){return(0,W.of)(null)}}let cl=(()=>{class S{constructor(b,N,P,K){this.router=b,this.injector=P,this.preloadingStrategy=K,this.loader=new ul(P,N,ft=>b.triggerEvent(new yn(ft)),ft=>b.triggerEvent(new Wi(ft)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Qe.h)(b=>b instanceof Xn),Be(()=>this.preload())).subscribe(()=>{})}preload(){const b=this.injector.get(_.h0i);return this.processRoutes(b,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,N){const P=[];for(const K of N)if(K.loadChildren&&!K.canLoad&&K._loadedConfig){const he=K._loadedConfig;P.push(this.processRoutes(he.module,he.routes))}else K.loadChildren&&!K.canLoad?P.push(this.preloadConfig(b,K)):K.children&&P.push(this.processRoutes(b,K.children));return(0,Se.D)(P).pipe((0,tn.J)(),(0,it.U)(K=>{}))}preloadConfig(b,N){return this.preloadingStrategy.preload(N,()=>(N._loadedConfig?(0,W.of)(N._loadedConfig):this.loader.load(b.injector,N)).pipe((0,Fe.z)(K=>(N._loadedConfig=K,this.processRoutes(K.module,K.routes)))))}}return S.\u0275fac=function(b){return new(b||S)(_.LFG(Rr),_.LFG(_.Sil),_.LFG(_.zs3),_.LFG(Xo))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})(),zn=(()=>{class S{constructor(b,N,P={}){this.router=b,this.viewportScroller=N,this.options=P,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},P.scrollPositionRestoration=P.scrollPositionRestoration||"disabled",P.anchorScrolling=P.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(b=>{b instanceof Pr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Xn&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.router.parseUrl(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(b=>{b instanceof vr&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,N){this.router.triggerEvent(new vr(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return S.\u0275fac=function(b){_.$Z()},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})();const Co=new _.OlP("ROUTER_CONFIGURATION"),Ns=new _.OlP("ROUTER_FORROOT_GUARD"),vu=[Cr.Ye,{provide:fi,useClass:cs},{provide:Rr,useFactory:function Ji(S,D,b,N,P,K,he={},Te,ft){const Xt=new Rr(null,S,D,b,N,P,Oe(K));return Te&&(Xt.urlHandlingStrategy=Te),ft&&(Xt.routeReuseStrategy=ft),function bo(S,D){S.errorHandler&&(D.errorHandler=S.errorHandler),S.malformedUriErrorHandler&&(D.malformedUriErrorHandler=S.malformedUriErrorHandler),S.onSameUrlNavigation&&(D.onSameUrlNavigation=S.onSameUrlNavigation),S.paramsInheritanceStrategy&&(D.paramsInheritanceStrategy=S.paramsInheritanceStrategy),S.relativeLinkResolution&&(D.relativeLinkResolution=S.relativeLinkResolution),S.urlUpdateStrategy&&(D.urlUpdateStrategy=S.urlUpdateStrategy),S.canceledNavigationResolution&&(D.canceledNavigationResolution=S.canceledNavigationResolution)}(he,Xt),he.enableTracing&&Xt.events.subscribe(dr=>{var dn,Vr;null===(dn=console.group)||void 0===dn||dn.call(console,`Router Event: ${dr.constructor.name}`),console.log(dr.toString()),console.log(dr),null===(Vr=console.groupEnd)||void 0===Vr||Vr.call(console)}),Xt},deps:[fi,ti,Cr.Ye,_.zs3,_.Sil,hs,Co,[class ll{},new _.FiY],[class Po{},new _.FiY]]},ti,{provide:Zr,useFactory:function ea(S){return S.routerState.root},deps:[Rr]},cl,_u,class us{preload(D,b){return b().pipe(ge(()=>(0,W.of)(null)))}},{provide:Co,useValue:{enableTracing:!1}}];function Eu(){return new _.PXZ("Router",Rr)}let Is=(()=>{class S{constructor(b,N){}static forRoot(b,N){return{ngModule:S,providers:[vu,Js(b),{provide:Ns,useFactory:Aa,deps:[[Rr,new _.FiY,new _.tp0]]},{provide:Co,useValue:N||{}},{provide:Cr.S$,useFactory:Mr,deps:[Cr.lw,[new _.tBr(Cr.mr),new _.FiY],Co]},{provide:zn,useFactory:wu,deps:[Rr,Cr.EM,Co]},{provide:Xo,useExisting:N&&N.preloadingStrategy?N.preloadingStrategy:_u},{provide:_.PXZ,multi:!0,useFactory:Eu},[ru,{provide:_.ip1,multi:!0,useFactory:dl,deps:[ru]},{provide:gi,useFactory:At,deps:[ru]},{provide:_.tb,multi:!0,useExisting:gi}]]}}static forChild(b){return{ngModule:S,providers:[Js(b)]}}}return S.\u0275fac=function(b){return new(b||S)(_.LFG(Ns,8),_.LFG(Rr,8))},S.\u0275mod=_.oAB({type:S}),S.\u0275inj=_.cJS({}),S})();function wu(S,D,b){return b.scrollOffset&&D.setOffset(b.scrollOffset),new zn(S,D,b)}function Mr(S,D,b={}){return b.useHash?new Cr.Do(S,D):new Cr.b0(S,D)}function Aa(S){return"guarded"}function Js(S){return[{provide:_.deG,multi:!0,useValue:S},{provide:hs,multi:!0,useValue:S}]}let ru=(()=>{class S{constructor(b){this.injector=b,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new lt.x}appInitializer(){return this.injector.get(Cr.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let N=null;const P=new Promise(Te=>N=Te),K=this.injector.get(Rr),he=this.injector.get(Co);return"disabled"===he.initialNavigation?(K.setUpLocationChangeListener(),N(!0)):"enabled"===he.initialNavigation||"enabledBlocking"===he.initialNavigation?(K.hooks.afterPreactivation=()=>this.initNavigation?(0,W.of)(null):(this.initNavigation=!0,N(!0),this.resultOfPreactivationDone),K.initialNavigation()):N(!0),P})}bootstrapListener(b){const N=this.injector.get(Co),P=this.injector.get(cl),K=this.injector.get(zn),he=this.injector.get(Rr),Te=this.injector.get(_.z2F);b===Te.components[0]&&(("enabledNonBlocking"===N.initialNavigation||void 0===N.initialNavigation)&&he.initialNavigation(),P.setUpPreloading(),K.init(),he.resetRootComponentType(Te.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return S.\u0275fac=function(b){return new(b||S)(_.LFG(_.zs3))},S.\u0275prov=_.Yz7({token:S,factory:S.\u0275fac}),S})();function dl(S){return S.appInitializer.bind(S)}function At(S){return S.bootstrapListener.bind(S)}const gi=new _.OlP("Router Initializer")},3942:(Ot,We,B)=>{B.d(We,{Z:()=>Xe});var _=B(2090),te=B(4859),ie=B(9681),Se=B(1877);class De{constructor(tt,pt){this._delegate=tt,this.firebase=pt,(0,ie._addComponent)(tt,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=tt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(tt){this._delegate.automaticDataCollectionEnabled=tt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(tt=>{this._delegate.checkDestroyed(),tt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,ie.deleteApp)(this._delegate)))}_getService(tt,pt=ie._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const kt=this._delegate.container.getProvider(tt);return!kt.isInitialized()&&"EXPLICIT"===(null===(xe=kt.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&kt.initialize(),kt.getImmediate({identifier:pt})}_removeServiceInstance(tt,pt=ie._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(tt).clearInstance(pt)}_addComponent(tt){(0,ie._addComponent)(this._delegate,tt)}_addOrOverwriteComponent(tt){(0,ie._addOrOverwriteComponent)(this._delegate,tt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ve=new _.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function Ue(){const gt=function Me(gt){const tt={},pt={__esModule:!0,initializeApp:function ht(Ct,ue={}){const lt=ie.initializeApp(Ct,ue);if((0,_.r3)(tt,lt.name))return tt[lt.name];const ge=new gt(lt,pt);return tt[lt.name]=ge,ge},app:kt,registerVersion:ie.registerVersion,setLogLevel:ie.setLogLevel,onLog:ie.onLog,apps:null,SDK_VERSION:ie.SDK_VERSION,INTERNAL:{registerComponent:function Ge(Ct){const ue=Ct.name,lt=ue.replace("-compat","");if(ie._registerComponent(Ct)&&"PUBLIC"===Ct.type){const ge=(Fe=kt())=>{if("function"!=typeof Fe[lt])throw Ve.create("invalid-app-argument",{appName:ue});return Fe[lt]()};void 0!==Ct.serviceProps&&(0,_.ZB)(ge,Ct.serviceProps),pt[lt]=ge,gt.prototype[lt]=function(...Fe){return this._getService.bind(this,ue).apply(this,Ct.multipleInstances?Fe:[])}}return"PUBLIC"===Ct.type?pt[lt]:null},removeApp:function xe(Ct){delete tt[Ct]},useAsService:function Et(Ct,ue){return"serverAuth"===ue?null:ue},modularAPIs:ie}};function kt(Ct){if(!(0,_.r3)(tt,Ct=Ct||ie._DEFAULT_ENTRY_NAME))throw Ve.create("no-app",{appName:Ct});return tt[Ct]}return pt.default=pt,Object.defineProperty(pt,"apps",{get:function W(){return Object.keys(tt).map(Ct=>tt[Ct])}}),kt.App=gt,pt}(De);return gt.INTERNAL=Object.assign(Object.assign({},gt.INTERNAL),{createFirebaseNamespace:Ue,extendNamespace:function tt(pt){(0,_.ZB)(gt,pt)},createSubscribe:_.ne,ErrorFactory:_.LL,deepExtend:_.ZB}),gt}(),oe=new Se.Yd("@firebase/app-compat");if((0,_.jU)()&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const gt=self.firebase.SDK_VERSION;gt&&gt.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Xe=ce;!function at(gt){(0,ie.registerVersion)("@firebase/app-compat","0.1.28",gt)}()},9681:(Ot,We,B)=>{B.r(We),B.d(We,{FirebaseError:()=>Se.ZR,SDK_VERSION:()=>fr,_DEFAULT_ENTRY_NAME:()=>Wt,_addComponent:()=>Bt,_addOrOverwriteComponent:()=>Yt,_apps:()=>nn,_clearComponents:()=>Cr,_components:()=>un,_getProvider:()=>Vt,_registerComponent:()=>Mn,_removeServiceInstance:()=>tn,deleteApp:()=>Qt,getApp:()=>Sr,getApps:()=>Yn,initializeApp:()=>Bn,onLog:()=>yn,registerVersion:()=>rn,setLogLevel:()=>Wi});var _=B(5861),te=B(4859),ie=B(1877),Se=B(2090),De=B(8766);class Re{constructor(pe){this.container=pe}getPlatformInfoString(){return this.container.getProviders().map(qe=>{if(function Ve(ke){const pe=ke.getComponent();return"VERSION"===(null==pe?void 0:pe.type)}(qe)){const St=qe.getImmediate();return`${St.library}/${St.version}`}return null}).filter(qe=>qe).join(" ")}}const Me="@firebase/app",ce=new ie.Yd("@firebase/app"),Wt="[DEFAULT]",it={[Me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,un=new Map;function Bt(ke,pe){try{ke.container.addComponent(pe)}catch(qe){ce.debug(`Component ${pe.name} failed to register with FirebaseApp ${ke.name}`,qe)}}function Yt(ke,pe){ke.container.addOrOverwriteComponent(pe)}function Mn(ke){const pe=ke.name;if(un.has(pe))return ce.debug(`There were multiple attempts to register component ${pe}.`),!1;un.set(pe,ke);for(const qe of nn.values())Bt(qe,ke);return!0}function Vt(ke,pe){const qe=ke.container.getProvider("heartbeat").getImmediate({optional:!0});return qe&&qe.triggerHeartbeat(),ke.container.getProvider(pe)}function tn(ke,pe,qe=Wt){Vt(ke,pe).clearInstance(qe)}function Cr(){un.clear()}const Pr=new Se.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Xn{constructor(pe,qe,St){this._isDeleted=!1,this._options=Object.assign({},pe),this._config=Object.assign({},qe),this._name=qe.name,this._automaticDataCollectionEnabled=qe.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pe){this._isDeleted=pe}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}const fr="9.8.4";function Bn(ke,pe={}){"object"!=typeof pe&&(pe={name:pe});const qe=Object.assign({name:Wt,automaticDataCollectionEnabled:!1},pe),St=qe.name;if("string"!=typeof St||!St)throw Pr.create("bad-app-name",{appName:String(St)});const $t=nn.get(St);if($t){if((0,Se.vZ)(ke,$t.options)&&(0,Se.vZ)(qe,$t.config))return $t;throw Pr.create("duplicate-app",{appName:St})}const pn=new te.H0(St);for(const ar of un.values())pn.addComponent(ar);const or=new Xn(ke,qe,pn);return nn.set(St,or),or}function Sr(ke=Wt){const pe=nn.get(ke);if(!pe)throw Pr.create("no-app",{appName:ke});return pe}function Yn(){return Array.from(nn.values())}function Qt(ke){return kn.apply(this,arguments)}function kn(){return(kn=(0,_.Z)(function*(ke){const pe=ke.name;nn.has(pe)&&(nn.delete(pe),yield Promise.all(ke.container.getProviders().map(qe=>qe.delete())),ke.isDeleted=!0)})).apply(this,arguments)}function rn(ke,pe,qe){var St;let $t=null!==(St=it[ke])&&void 0!==St?St:ke;qe&&($t+=`-${qe}`);const pn=$t.match(/\s|\//),or=pe.match(/\s|\//);if(pn||or){const ar=[`Unable to register library "${$t}" with version "${pe}":`];return pn&&ar.push(`library name "${$t}" contains illegal characters (whitespace or "/")`),pn&&or&&ar.push("and"),or&&ar.push(`version name "${pe}" contains illegal characters (whitespace or "/")`),void ce.warn(ar.join(" "))}Mn(new te.wA(`${$t}-version`,()=>({library:$t,version:pe}),"VERSION"))}function yn(ke,pe){if(null!==ke&&"function"!=typeof ke)throw Pr.create("invalid-log-argument");(0,ie.Am)(ke,pe)}function Wi(ke){(0,ie.Ub)(ke)}const zr="firebase-heartbeat-store";let hi=null;function vr(){return hi||(hi=(0,De.X3)("firebase-heartbeat-database",1,{upgrade:(ke,pe)=>{0===pe&&ke.createObjectStore(zr)}}).catch(ke=>{throw Pr.create("storage-open",{originalErrorMessage:ke.message})})),hi}function qt(){return(qt=(0,_.Z)(function*(ke){var pe;try{return(yield vr()).transaction(zr).objectStore(zr).get(Si(ke))}catch(qe){throw Pr.create("storage-get",{originalErrorMessage:null===(pe=qe)||void 0===pe?void 0:pe.message})}})).apply(this,arguments)}function an(ke,pe){return br.apply(this,arguments)}function br(){return(br=(0,_.Z)(function*(ke,pe){var qe;try{const $t=(yield vr()).transaction(zr,"readwrite");return yield $t.objectStore(zr).put(pe,Si(ke)),$t.done}catch(St){throw Pr.create("storage-set",{originalErrorMessage:null===(qe=St)||void 0===qe?void 0:qe.message})}})).apply(this,arguments)}function Si(ke){return`${ke.name}!${ke.options.appId}`}class Kr{constructor(pe){this.container=pe,this._heartbeatsCache=null;const qe=this.container.getProvider("app").getImmediate();this._storage=new Oe(qe),this._heartbeatsCachePromise=this._storage.read().then(St=>(this._heartbeatsCache=St,St))}triggerHeartbeat(){var pe=this;return(0,_.Z)(function*(){const St=pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$t=pr();if(null===pe._heartbeatsCache&&(pe._heartbeatsCache=yield pe._heartbeatsCachePromise),pe._heartbeatsCache.lastSentHeartbeatDate!==$t&&!pe._heartbeatsCache.heartbeats.some(pn=>pn.date===$t))return pe._heartbeatsCache.heartbeats.push({date:$t,agent:St}),pe._heartbeatsCache.heartbeats=pe._heartbeatsCache.heartbeats.filter(pn=>{const or=new Date(pn.date).valueOf();return Date.now()-or<=2592e6}),pe._storage.overwrite(pe._heartbeatsCache)})()}getHeartbeatsHeader(){var pe=this;return(0,_.Z)(function*(){if(null===pe._heartbeatsCache&&(yield pe._heartbeatsCachePromise),null===pe._heartbeatsCache||0===pe._heartbeatsCache.heartbeats.length)return"";const qe=pr(),{heartbeatsToSend:St,unsentEntries:$t}=function fn(ke,pe=1024){const qe=[];let St=ke.slice();for(const $t of ke){const pn=qe.find(or=>or.agent===$t.agent);if(pn){if(pn.dates.push($t.date),ye(qe)>pe){pn.dates.pop();break}}else if(qe.push({agent:$t.agent,dates:[$t.date]}),ye(qe)>pe){qe.pop();break}St=St.slice(1)}return{heartbeatsToSend:qe,unsentEntries:St}}(pe._heartbeatsCache.heartbeats),pn=(0,Se.L)(JSON.stringify({version:2,heartbeats:St}));return pe._heartbeatsCache.lastSentHeartbeatDate=qe,$t.length>0?(pe._heartbeatsCache.heartbeats=$t,yield pe._storage.overwrite(pe._heartbeatsCache)):(pe._heartbeatsCache.heartbeats=[],pe._storage.overwrite(pe._heartbeatsCache)),pn})()}}function pr(){return(new Date).toISOString().substring(0,10)}class Oe{constructor(pe){this.app=pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,_.Z)(function*(){return!!(0,Se.hl)()&&(0,Se.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pe=this;return(0,_.Z)(function*(){return(yield pe._canUseIndexedDBPromise)&&(yield function Lt(ke){return qt.apply(this,arguments)}(pe.app))||{heartbeats:[]}})()}overwrite(pe){var qe=this;return(0,_.Z)(function*(){var St;if(yield qe._canUseIndexedDBPromise){const pn=yield qe.read();return an(qe.app,{lastSentHeartbeatDate:null!==(St=pe.lastSentHeartbeatDate)&&void 0!==St?St:pn.lastSentHeartbeatDate,heartbeats:pe.heartbeats})}})()}add(pe){var qe=this;return(0,_.Z)(function*(){var St;if(yield qe._canUseIndexedDBPromise){const pn=yield qe.read();return an(qe.app,{lastSentHeartbeatDate:null!==(St=pe.lastSentHeartbeatDate)&&void 0!==St?St:pn.lastSentHeartbeatDate,heartbeats:[...pn.heartbeats,...pe.heartbeats]})}})()}}function ye(ke){return(0,Se.L)(JSON.stringify({version:2,heartbeats:ke})).length}!function He(ke){Mn(new te.wA("platform-logger",pe=>new Re(pe),"PRIVATE")),Mn(new te.wA("heartbeat",pe=>new Kr(pe),"PRIVATE")),rn(Me,"0.7.27",ke),rn(Me,"0.7.27","esm2017"),rn("fire-js","")}("")},4859:(Ot,We,B)=>{B.d(We,{wA:()=>ie,H0:()=>Me,zt:()=>De});var _=B(5861),te=B(2090);class ie{constructor(ce,oe,Ne){this.name=ce,this.instanceFactory=oe,this.type=Ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const Se="[DEFAULT]";class De{constructor(ce,oe){this.name=ce,this.container=oe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const oe=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(oe)){const Ne=new te.BH;if(this.instancesDeferred.set(oe,Ne),this.isInitialized(oe)||this.shouldAutoInitialize())try{const Tt=this.getOrInitializeService({instanceIdentifier:oe});Tt&&Ne.resolve(Tt)}catch(Tt){}}return this.instancesDeferred.get(oe).promise}getImmediate(ce){var oe;const Ne=this.normalizeInstanceIdentifier(null==ce?void 0:ce.identifier),Tt=null!==(oe=null==ce?void 0:ce.optional)&&void 0!==oe&&oe;if(!this.isInitialized(Ne)&&!this.shouldAutoInitialize()){if(Tt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ne})}catch(at){if(Tt)return null;throw at}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function Ve(Ue){return"EAGER"===Ue.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:Se})}catch(oe){}for(const[oe,Ne]of this.instancesDeferred.entries()){const Tt=this.normalizeInstanceIdentifier(oe);try{const at=this.getOrInitializeService({instanceIdentifier:Tt});Ne.resolve(at)}catch(at){}}}}clearInstance(ce=Se){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,_.Z)(function*(){const oe=Array.from(ce.instances.values());yield Promise.all([...oe.filter(Ne=>"INTERNAL"in Ne).map(Ne=>Ne.INTERNAL.delete()),...oe.filter(Ne=>"_delete"in Ne).map(Ne=>Ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=Se){return this.instances.has(ce)}getOptions(ce=Se){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:oe={}}=ce,Ne=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(Ne))throw Error(`${this.name}(${Ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Tt=this.getOrInitializeService({instanceIdentifier:Ne,options:oe});for(const[at,Xe]of this.instancesDeferred.entries())Ne===this.normalizeInstanceIdentifier(at)&&Xe.resolve(Tt);return Tt}onInit(ce,oe){var Ne;const Tt=this.normalizeInstanceIdentifier(oe),at=null!==(Ne=this.onInitCallbacks.get(Tt))&&void 0!==Ne?Ne:new Set;at.add(ce),this.onInitCallbacks.set(Tt,at);const Xe=this.instances.get(Tt);return Xe&&ce(Xe,Tt),()=>{at.delete(ce)}}invokeOnInitCallbacks(ce,oe){const Ne=this.onInitCallbacks.get(oe);if(Ne)for(const Tt of Ne)try{Tt(ce,oe)}catch(at){}}getOrInitializeService({instanceIdentifier:ce,options:oe={}}){let Ne=this.instances.get(ce);if(!Ne&&this.component&&(Ne=this.component.instanceFactory(this.container,{instanceIdentifier:(Ue=ce,Ue===Se?void 0:Ue),options:oe}),this.instances.set(ce,Ne),this.instancesOptions.set(ce,oe),this.invokeOnInitCallbacks(Ne,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,Ne)}catch(Tt){}var Ue;return Ne||null}normalizeInstanceIdentifier(ce=Se){return this.component?this.component.multipleInstances?ce:Se:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Me{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const oe=this.getProvider(ce.name);if(oe.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);oe.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const oe=new De(ce,this);return this.providers.set(ce,oe),oe}getProviders(){return Array.from(this.providers.values())}}},1877:(Ot,We,B)=>{B.d(We,{in:()=>te,Yd:()=>Ve,Ub:()=>Me,Am:()=>Ue});const _=[];var te=(()=>{return(ce=te||(te={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",te;var ce})();const ie={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Se=te.INFO,De={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Re=(ce,oe,...Ne)=>{if(oe<ce.logLevel)return;const Tt=(new Date).toISOString(),at=De[oe];if(!at)throw new Error(`Attempted to log a message with an invalid logType (value: ${oe})`);console[at](`[${Tt}]  ${ce.name}:`,...Ne)};class Ve{constructor(oe){this.name=oe,this._logLevel=Se,this._logHandler=Re,this._userLogHandler=null,_.push(this)}get logLevel(){return this._logLevel}set logLevel(oe){if(!(oe in te))throw new TypeError(`Invalid value "${oe}" assigned to \`logLevel\``);this._logLevel=oe}setLogLevel(oe){this._logLevel="string"==typeof oe?ie[oe]:oe}get logHandler(){return this._logHandler}set logHandler(oe){if("function"!=typeof oe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=oe}get userLogHandler(){return this._userLogHandler}set userLogHandler(oe){this._userLogHandler=oe}debug(...oe){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...oe),this._logHandler(this,te.DEBUG,...oe)}log(...oe){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...oe),this._logHandler(this,te.VERBOSE,...oe)}info(...oe){this._userLogHandler&&this._userLogHandler(this,te.INFO,...oe),this._logHandler(this,te.INFO,...oe)}warn(...oe){this._userLogHandler&&this._userLogHandler(this,te.WARN,...oe),this._logHandler(this,te.WARN,...oe)}error(...oe){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...oe),this._logHandler(this,te.ERROR,...oe)}}function Me(ce){_.forEach(oe=>{oe.setLogLevel(ce)})}function Ue(ce,oe){for(const Ne of _){let Tt=null;oe&&oe.level&&(Tt=ie[oe.level]),Ne.userLogHandler=null===ce?null:(at,Xe,...gt)=>{const tt=gt.map(pt=>{if(null==pt)return null;if("string"==typeof pt)return pt;if("number"==typeof pt||"boolean"==typeof pt)return pt.toString();if(pt instanceof Error)return pt.message;try{return JSON.stringify(pt)}catch(xe){return null}}).filter(pt=>pt).join(" ");Xe>=(null!=Tt?Tt:at.logLevel)&&ce({level:te[Xe].toLowerCase(),message:tt,args:gt,type:at.name})}}}},8766:(Ot,We,B)=>{B.d(We,{Lj:()=>ht,X3:()=>kt});var _=B(5861);let ie,Se;const Ve=new WeakMap,Me=new WeakMap,Ue=new WeakMap,ce=new WeakMap,oe=new WeakMap;let at={get(ue,lt,ge){if(ue instanceof IDBTransaction){if("done"===lt)return Me.get(ue);if("objectStoreNames"===lt)return ue.objectStoreNames||Ue.get(ue);if("store"===lt)return ge.objectStoreNames[1]?void 0:ge.objectStore(ge.objectStoreNames[0])}return pt(ue[lt])},set:(ue,lt,ge)=>(ue[lt]=ge,!0),has:(ue,lt)=>ue instanceof IDBTransaction&&("done"===lt||"store"===lt)||lt in ue};function tt(ue){return"function"==typeof ue?function gt(ue){return ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Re(){return Se||(Se=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ue)?function(...lt){return ue.apply(xe(this),lt),pt(Ve.get(this))}:function(...lt){return pt(ue.apply(xe(this),lt))}:function(lt,...ge){const Fe=ue.call(xe(this),lt,...ge);return Ue.set(Fe,lt.sort?lt.sort():[lt]),pt(Fe)}}(ue):(ue instanceof IDBTransaction&&function Tt(ue){if(Me.has(ue))return;const lt=new Promise((ge,Fe)=>{const Be=()=>{ue.removeEventListener("complete",Qe),ue.removeEventListener("error",Ze),ue.removeEventListener("abort",Ze)},Qe=()=>{ge(),Be()},Ze=()=>{Fe(ue.error||new DOMException("AbortError","AbortError")),Be()};ue.addEventListener("complete",Qe),ue.addEventListener("error",Ze),ue.addEventListener("abort",Ze)});Me.set(ue,lt)}(ue),((ue,lt)=>lt.some(ge=>ue instanceof ge))(ue,function De(){return ie||(ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ue,at):ue)}function pt(ue){if(ue instanceof IDBRequest)return function Ne(ue){const lt=new Promise((ge,Fe)=>{const Be=()=>{ue.removeEventListener("success",Qe),ue.removeEventListener("error",Ze)},Qe=()=>{ge(pt(ue.result)),Be()},Ze=()=>{Fe(ue.error),Be()};ue.addEventListener("success",Qe),ue.addEventListener("error",Ze)});return lt.then(ge=>{ge instanceof IDBCursor&&Ve.set(ge,ue)}).catch(()=>{}),oe.set(lt,ue),lt}(ue);if(ce.has(ue))return ce.get(ue);const lt=tt(ue);return lt!==ue&&(ce.set(ue,lt),oe.set(lt,ue)),lt}const xe=ue=>oe.get(ue);function kt(ue,lt,{blocked:ge,upgrade:Fe,blocking:Be,terminated:Qe}={}){const Ze=indexedDB.open(ue,lt),wt=pt(Ze);return Fe&&Ze.addEventListener("upgradeneeded",Nt=>{Fe(pt(Ze.result),Nt.oldVersion,Nt.newVersion,pt(Ze.transaction))}),ge&&Ze.addEventListener("blocked",()=>ge()),wt.then(Nt=>{Qe&&Nt.addEventListener("close",()=>Qe()),Be&&Nt.addEventListener("versionchange",()=>Be())}).catch(()=>{}),wt}function ht(ue,{blocked:lt}={}){const ge=indexedDB.deleteDatabase(ue);return lt&&ge.addEventListener("blocked",()=>lt()),pt(ge).then(()=>{})}const W=["get","getKey","getAll","getAllKeys","count"],Ge=["put","add","delete","clear"],Et=new Map;function Ct(ue,lt){if(!(ue instanceof IDBDatabase)||lt in ue||"string"!=typeof lt)return;if(Et.get(lt))return Et.get(lt);const ge=lt.replace(/FromIndex$/,""),Fe=lt!==ge,Be=Ge.includes(ge);if(!(ge in(Fe?IDBIndex:IDBObjectStore).prototype)||!Be&&!W.includes(ge))return;const Qe=function(){var Ze=(0,_.Z)(function*(wt,...Nt){const en=this.transaction(wt,Be?"readwrite":"readonly");let Wt=en.store;return Fe&&(Wt=Wt.index(Nt.shift())),(yield Promise.all([Wt[ge](...Nt),Be&&en.done]))[0]});return function(Nt){return Ze.apply(this,arguments)}}();return Et.set(lt,Qe),Qe}!function Xe(ue){at=ue(at)}(ue=>zE(WE({},ue),{get:(lt,ge,Fe)=>Ct(lt,ge)||ue.get(lt,ge,Fe),has:(lt,ge)=>!!Ct(lt,ge)||ue.has(lt,ge)}))},5861:(Ot,We,B)=>{function _(ie,Se,De,Re,Ve,Me,Ue){try{var ce=ie[Me](Ue),oe=ce.value}catch(Ne){return void De(Ne)}ce.done?Se(oe):Promise.resolve(oe).then(Re,Ve)}function te(ie){return function(){var Se=this,De=arguments;return new Promise(function(Re,Ve){var Me=ie.apply(Se,De);function Ue(oe){_(Me,Re,Ve,Ue,ce,"next",oe)}function ce(oe){_(Me,Re,Ve,Ue,ce,"throw",oe)}Ue(void 0)})}}B.d(We,{Z:()=>te})}},Ot=>{Ot(Ot.s=8343)}]);