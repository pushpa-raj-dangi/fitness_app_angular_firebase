"use strict";(self.webpackChunkfirebaseapp=self.webpackChunkfirebaseapp||[]).push([[857],{4857:(O,d,i)=>{i.r(d),i.d(d,{MealsModule:()=>q});var c=i(441),l=i(2382),a=i(9808),e=i(5e3),h=i(4004),f=i(7078),M=i(6209),g=i(7471);let u=(()=>{class n{constructor(t,o,s){this.store=t,this.authService=o,this.db=s,this.id="",this.authService.userId.then(m=>{this.id=m;let p=[];this.mealRef=this.db.list(`meals/${m}/items`),this.meals$=this.mealRef.snapshotChanges().pipe((0,h.U)(w=>{p=w.map(v=>Object.assign({$key:v.key},v.payload.val())),this.store.set("meals",p)}))})}addMeal(t){return console.log("addMeal",this.id),this.db.list(`meals/${this.id}/items`).push(t)}removeMeal(t){return console.log(t),this.db.list(`meals/${this.id}/items`).remove(t.$key)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(f.y),e.LFG(M.e),e.LFG(g.KQ))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();function b(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",5)(2,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeItem()}),e._uU(3,"Yes"),e.qZA(),e.TgZ(4,"button",7),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggle()}),e._uU(5,"No"),e.qZA()()()}}let C=(()=>{class n{constructor(){this.toggled=!1,this.remove=new e.vpe}getRoute(t){return["../meals",t.$key]}removeItem(){this.remove.emit(this.item)}toggle(){this.toggled=!this.toggled}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["list-item"]],inputs:{item:"item"},outputs:{remove:"remove"},decls:12,vars:7,consts:[[1,"list-group"],[1,"list-group-item","list-group-item-action"],[3,"routerLink"],[4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[1,"my-4"],["type","button",1,"btn","btn-danger","me-3",3,"click"],["type","button",1,"btn","btn-outline-danger",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"pre"),e._uU(3),e.ALo(4,"json"),e.qZA(),e.TgZ(5,"p",2),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.YNc(9,b,6,0,"div",3),e.TgZ(10,"button",4),e.NdJ("click",function(){return o.toggle()}),e._uU(11,"Delete"),e.qZA()()()),2&t&&(e.xp6(3),e.hij("    ",e.lcZ(4,5,o.item),"\n   "),e.xp6(2),e.Q6J("routerLink",o.getRoute(o.item)),e.xp6(1),e.hij(" ",o.item.name," "),e.xp6(2),e.hij(" ",o.item.ingredients," "),e.xp6(1),e.Q6J("ngIf",o.toggled))},directives:[c.rH,a.O5],pipes:[a.Ts],styles:[""],changeDetection:0}),n})();function Z(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1," No meals, add a new meal to start "),e.qZA())}function y(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"list-item",8),e.NdJ("remove",function(s){return e.CHM(t),e.oxw(2).remove(s)}),e.qZA()}2&n&&e.Q6J("item",r.$implicit)}function T(n,r){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.YNc(2,Z,2,0,"div",6),e.YNc(3,y,1,1,"list-item",7),e.qZA()),2&n){const t=r.ngIf;e.xp6(1),e.hij(" ",t.length," "),e.xp6(1),e.Q6J("ngIf",!t),e.xp6(1),e.Q6J("ngForOf",t)}}function F(n,r){1&n&&e._uU(0,"Loading...")}let x=(()=>{class n{constructor(t,o){this.mealService=t,this.store=o}ngOnInit(){this.meals$=this.store.select("meals"),this.subscription=this.mealService.meals$.subscribe(),console.log(this.meals$),this.mealService.meals$.subscribe()}ngOnDestroy(){this.subscription.unsubscribe()}remove(t){this.mealService.removeMeal(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u),e.Y36(f.y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-meals"]],decls:12,vars:4,consts:[[1,"container"],[1,"row"],[1,"col-md-4","offset-md-4"],["routerLink","/meals/new",1,"btn","btn-primary"],[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[3,"item","remove",4,"ngFor","ngForOf"],[3,"item","remove"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e._uU(4,"Your meals"),e.qZA(),e.TgZ(5,"a",3),e._uU(6,"Create New"),e.qZA(),e._UZ(7,"hr"),e.YNc(8,T,4,3,"div",4),e.ALo(9,"async"),e.YNc(10,F,1,0,"ng-template",null,5,e.W1O),e.qZA()()()),2&t){const s=e.MAs(11);e.xp6(8),e.Q6J("ngIf",e.lcZ(9,2,o.meals$))("ngIfElse",s)}},directives:[c.yS,a.O5,a.sg,C],pipes:[a.Ov],styles:[""]}),n})();function A(n,r){1&n&&(e.TgZ(0,"div",10),e._uU(1,"Workout is required"),e.qZA())}function I(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"label",11),e._UZ(1,"input",12),e.TgZ(2,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().addIngredient()}),e._uU(3,"Add"),e.qZA(),e.TgZ(4,"button",14),e.NdJ("click",function(){const m=e.CHM(t).index;return e.oxw().removeIngredient(m)}),e._uU(5,"Delete"),e.qZA()()}if(2&n){const t=r.index;e.xp6(1),e.Q6J("formControlName",t)}}const J=function(){return["../"]};let N=(()=>{class n{constructor(t){this.fb=t,this.form=this.fb.group({name:["",l.kI.required],ingredients:this.fb.array([""])}),this.meal=new e.vpe}addIngredient(){this.ingredients.push(new l.NI(""))}createMeal(){this.form.valid&&this.meal.emit(this.form.value)}removeIngredient(t){this.ingredients.removeAt(t)}get ingredients(){return this.form.get("ingredients")}get required(){var t,o;return(null===(t=this.form.get("name"))||void 0===t?void 0:t.hasError("required"))&&(null===(o=this.form.get("name"))||void 0===o?void 0:o.touched)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["meal-form"]],outputs:{meal:"meal"},decls:13,vars:5,consts:[[1,""],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","formControlName","name","placeholder","e.g English Breakfast",1,"form-control","my-3"],["class","alert alert-danger",4,"ngIf"],["formArrayName","ingredients",1,"form-group","my-4"],["class","d-flex my-4",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger","mx-3",3,"routerLink"],[1,"alert","alert-danger"],[1,"d-flex","my-4"],["type","text",1,"form-control",3,"formControlName"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"btn","btn-danger",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"label",3),e._uU(4,"Meal Name"),e.qZA(),e._UZ(5,"input",4),e.YNc(6,A,2,0,"div",5),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,I,6,1,"label",7),e.qZA(),e.TgZ(9,"button",8),e.NdJ("click",function(){return o.createMeal()}),e._uU(10,"Add Food"),e.qZA(),e.TgZ(11,"button",9),e._uU(12,"Cancel"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngIf",o.required),e.xp6(2),e.Q6J("ngForOf",o.ingredients.controls),e.xp6(3),e.Q6J("routerLink",e.DdM(4,J)))},directives:[l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,a.O5,l.CE,a.sg,c.rH],styles:[""],changeDetection:0}),n})(),_=(()=>{class n{constructor(t,o){this.mealService=t,this.router=o}addMeal(t){this.mealService.addMeal(t),this.router.navigate(["/meals"])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u),e.Y36(c.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-meal"]],decls:3,vars:0,consts:[[1,"row"],[1,"col-md-4","offset-md-4"],[3,"meal","create"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"meal-form",2),e.NdJ("meal",function(m){return o.addMeal(m)})("create",function(m){return o.addMeal(m)}),e.qZA()()())},directives:[N],styles:[""]}),n})();var U=i(1205),k=i(7407),L=i(2084);let S=(()=>{class n{static forRoot(){return{ngModule:n,providers:[u]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,U.ww,k.yb,L.TE,g.JS,c.Bz]]}),n})();const Y=[{path:"",component:x},{path:"new",component:_},{path:":id",component:_}];let q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.ez,l.UX,c.Bz.forChild(Y),S.forRoot()]]}),n})()}}]);